WPM.loadApp({"name":"wpm","context":"page","js":[{"name":"jquery","src":"LyohIGpRdWVyeSB2MS44LjMganF1ZXJ5LmNvbSB8IGpxdWVyeS5vcmcvbGljZW5zZSAqLwooZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBfKGUpe3ZhciB0PU1bZV09e307cmV0dXJuIHYuZWFjaChlLnNwbGl0KHkpLGZ1bmN0aW9uKGUsbil7dFtuXT0hMH0pLHR9ZnVuY3Rpb24gSChlLG4scil7aWYocj09PXQmJmUubm9kZVR5cGU9PT0xKXt2YXIgaT0iZGF0YS0iK24ucmVwbGFjZShQLCItJDEiKS50b0xvd2VyQ2FzZSgpO3I9ZS5nZXRBdHRyaWJ1dGUoaSk7aWYodHlwZW9mIHI9PSJzdHJpbmciKXt0cnl7cj1yPT09InRydWUiPyEwOnI9PT0iZmFsc2UiPyExOnI9PT0ibnVsbCI/bnVsbDorcisiIj09PXI/K3I6RC50ZXN0KHIpP3YucGFyc2VKU09OKHIpOnJ9Y2F0Y2gocyl7fXYuZGF0YShlLG4scil9ZWxzZSByPXR9cmV0dXJuIHJ9ZnVuY3Rpb24gQihlKXt2YXIgdDtmb3IodCBpbiBlKXtpZih0PT09ImRhdGEiJiZ2LmlzRW1wdHlPYmplY3QoZVt0XSkpY29udGludWU7aWYodCE9PSJ0b0pTT04iKXJldHVybiExfXJldHVybiEwfWZ1bmN0aW9uIGV0KCl7cmV0dXJuITF9ZnVuY3Rpb24gdHQoKXtyZXR1cm4hMH1mdW5jdGlvbiB1dChlKXtyZXR1cm4hZXx8IWUucGFyZW50Tm9kZXx8ZS5wYXJlbnROb2RlLm5vZGVUeXBlPT09MTF9ZnVuY3Rpb24gYXQoZSx0KXtkbyBlPWVbdF07d2hpbGUoZSYmZS5ub2RlVHlwZSE9PTEpO3JldHVybiBlfWZ1bmN0aW9uIGZ0KGUsdCxuKXt0PXR8fDA7aWYodi5pc0Z1bmN0aW9uKHQpKXJldHVybiB2LmdyZXAoZSxmdW5jdGlvbihlLHIpe3ZhciBpPSEhdC5jYWxsKGUscixlKTtyZXR1cm4gaT09PW59KTtpZih0Lm5vZGVUeXBlKXJldHVybiB2LmdyZXAoZSxmdW5jdGlvbihlLHIpe3JldHVybiBlPT09dD09PW59KTtpZih0eXBlb2YgdD09InN0cmluZyIpe3ZhciByPXYuZ3JlcChlLGZ1bmN0aW9uKGUpe3JldHVybiBlLm5vZGVUeXBlPT09MX0pO2lmKGl0LnRlc3QodCkpcmV0dXJuIHYuZmlsdGVyKHQsciwhbik7dD12LmZpbHRlcih0LHIpfXJldHVybiB2LmdyZXAoZSxmdW5jdGlvbihlLHIpe3JldHVybiB2LmluQXJyYXkoZSx0KT49MD09PW59KX1mdW5jdGlvbiBsdChlKXt2YXIgdD1jdC5zcGxpdCgifCIpLG49ZS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7aWYobi5jcmVhdGVFbGVtZW50KXdoaWxlKHQubGVuZ3RoKW4uY3JlYXRlRWxlbWVudCh0LnBvcCgpKTtyZXR1cm4gbn1mdW5jdGlvbiBMdChlLHQpe3JldHVybiBlLmdldEVsZW1lbnRzQnlUYWdOYW1lKHQpWzBdfHxlLmFwcGVuZENoaWxkKGUub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KHQpKX1mdW5jdGlvbiBBdChlLHQpe2lmKHQubm9kZVR5cGUhPT0xfHwhdi5oYXNEYXRhKGUpKXJldHVybjt2YXIgbixyLGkscz12Ll9kYXRhKGUpLG89di5fZGF0YSh0LHMpLHU9cy5ldmVudHM7aWYodSl7ZGVsZXRlIG8uaGFuZGxlLG8uZXZlbnRzPXt9O2ZvcihuIGluIHUpZm9yKHI9MCxpPXVbbl0ubGVuZ3RoO3I8aTtyKyspdi5ldmVudC5hZGQodCxuLHVbbl1bcl0pfW8uZGF0YSYmKG8uZGF0YT12LmV4dGVuZCh7fSxvLmRhdGEpKX1mdW5jdGlvbiBPdChlLHQpe3ZhciBuO2lmKHQubm9kZVR5cGUhPT0xKXJldHVybjt0LmNsZWFyQXR0cmlidXRlcyYmdC5jbGVhckF0dHJpYnV0ZXMoKSx0Lm1lcmdlQXR0cmlidXRlcyYmdC5tZXJnZUF0dHJpYnV0ZXMoZSksbj10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksbj09PSJvYmplY3QiPyh0LnBhcmVudE5vZGUmJih0Lm91dGVySFRNTD1lLm91dGVySFRNTCksdi5zdXBwb3J0Lmh0bWw1Q2xvbmUmJmUuaW5uZXJIVE1MJiYhdi50cmltKHQuaW5uZXJIVE1MKSYmKHQuaW5uZXJIVE1MPWUuaW5uZXJIVE1MKSk6bj09PSJpbnB1dCImJkV0LnRlc3QoZS50eXBlKT8odC5kZWZhdWx0Q2hlY2tlZD10LmNoZWNrZWQ9ZS5jaGVja2VkLHQudmFsdWUhPT1lLnZhbHVlJiYodC52YWx1ZT1lLnZhbHVlKSk6bj09PSJvcHRpb24iP3Quc2VsZWN0ZWQ9ZS5kZWZhdWx0U2VsZWN0ZWQ6bj09PSJpbnB1dCJ8fG49PT0idGV4dGFyZWEiP3QuZGVmYXVsdFZhbHVlPWUuZGVmYXVsdFZhbHVlOm49PT0ic2NyaXB0IiYmdC50ZXh0IT09ZS50ZXh0JiYodC50ZXh0PWUudGV4dCksdC5yZW1vdmVBdHRyaWJ1dGUodi5leHBhbmRvKX1mdW5jdGlvbiBNdChlKXtyZXR1cm4gdHlwZW9mIGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUhPSJ1bmRlZmluZWQiP2UuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKTp0eXBlb2YgZS5xdWVyeVNlbGVjdG9yQWxsIT0idW5kZWZpbmVkIj9lLnF1ZXJ5U2VsZWN0b3JBbGwoIioiKTpbXX1mdW5jdGlvbiBfdChlKXtFdC50ZXN0KGUudHlwZSkmJihlLmRlZmF1bHRDaGVja2VkPWUuY2hlY2tlZCl9ZnVuY3Rpb24gUXQoZSx0KXtpZih0IGluIGUpcmV0dXJuIHQ7dmFyIG49dC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpLHI9dCxpPUp0Lmxlbmd0aDt3aGlsZShpLS0pe3Q9SnRbaV0rbjtpZih0IGluIGUpcmV0dXJuIHR9cmV0dXJuIHJ9ZnVuY3Rpb24gR3QoZSx0KXtyZXR1cm4gZT10fHxlLHYuY3NzKGUsImRpc3BsYXkiKT09PSJub25lInx8IXYuY29udGFpbnMoZS5vd25lckRvY3VtZW50LGUpfWZ1bmN0aW9uIFl0KGUsdCl7dmFyIG4scixpPVtdLHM9MCxvPWUubGVuZ3RoO2Zvcig7czxvO3MrKyl7bj1lW3NdO2lmKCFuLnN0eWxlKWNvbnRpbnVlO2lbc109di5fZGF0YShuLCJvbGRkaXNwbGF5IiksdD8oIWlbc10mJm4uc3R5bGUuZGlzcGxheT09PSJub25lIiYmKG4uc3R5bGUuZGlzcGxheT0iIiksbi5zdHlsZS5kaXNwbGF5PT09IiImJkd0KG4pJiYoaVtzXT12Ll9kYXRhKG4sIm9sZGRpc3BsYXkiLG5uKG4ubm9kZU5hbWUpKSkpOihyPUR0KG4sImRpc3BsYXkiKSwhaVtzXSYmciE9PSJub25lIiYmdi5fZGF0YShuLCJvbGRkaXNwbGF5IixyKSl9Zm9yKHM9MDtzPG87cysrKXtuPWVbc107aWYoIW4uc3R5bGUpY29udGludWU7aWYoIXR8fG4uc3R5bGUuZGlzcGxheT09PSJub25lInx8bi5zdHlsZS5kaXNwbGF5PT09IiIpbi5zdHlsZS5kaXNwbGF5PXQ/aVtzXXx8IiI6Im5vbmUifXJldHVybiBlfWZ1bmN0aW9uIFp0KGUsdCxuKXt2YXIgcj1SdC5leGVjKHQpO3JldHVybiByP01hdGgubWF4KDAsclsxXS0obnx8MCkpKyhyWzJdfHwicHgiKTp0fWZ1bmN0aW9uIGVuKGUsdCxuLHIpe3ZhciBpPW49PT0ocj8iYm9yZGVyIjoiY29udGVudCIpPzQ6dD09PSJ3aWR0aCI/MTowLHM9MDtmb3IoO2k8NDtpKz0yKW49PT0ibWFyZ2luIiYmKHMrPXYuY3NzKGUsbiskdFtpXSwhMCkpLHI/KG49PT0iY29udGVudCImJihzLT1wYXJzZUZsb2F0KER0KGUsInBhZGRpbmciKyR0W2ldKSl8fDApLG4hPT0ibWFyZ2luIiYmKHMtPXBhcnNlRmxvYXQoRHQoZSwiYm9yZGVyIiskdFtpXSsiV2lkdGgiKSl8fDApKToocys9cGFyc2VGbG9hdChEdChlLCJwYWRkaW5nIiskdFtpXSkpfHwwLG4hPT0icGFkZGluZyImJihzKz1wYXJzZUZsb2F0KER0KGUsImJvcmRlciIrJHRbaV0rIldpZHRoIikpfHwwKSk7cmV0dXJuIHN9ZnVuY3Rpb24gdG4oZSx0LG4pe3ZhciByPXQ9PT0id2lkdGgiP2Uub2Zmc2V0V2lkdGg6ZS5vZmZzZXRIZWlnaHQsaT0hMCxzPXYuc3VwcG9ydC5ib3hTaXppbmcmJnYuY3NzKGUsImJveFNpemluZyIpPT09ImJvcmRlci1ib3giO2lmKHI8PTB8fHI9PW51bGwpe3I9RHQoZSx0KTtpZihyPDB8fHI9PW51bGwpcj1lLnN0eWxlW3RdO2lmKFV0LnRlc3QocikpcmV0dXJuIHI7aT1zJiYodi5zdXBwb3J0LmJveFNpemluZ1JlbGlhYmxlfHxyPT09ZS5zdHlsZVt0XSkscj1wYXJzZUZsb2F0KHIpfHwwfXJldHVybiByK2VuKGUsdCxufHwocz8iYm9yZGVyIjoiY29udGVudCIpLGkpKyJweCJ9ZnVuY3Rpb24gbm4oZSl7aWYoV3RbZV0pcmV0dXJuIFd0W2VdO3ZhciB0PXYoIjwiK2UrIj4iKS5hcHBlbmRUbyhpLmJvZHkpLG49dC5jc3MoImRpc3BsYXkiKTt0LnJlbW92ZSgpO2lmKG49PT0ibm9uZSJ8fG49PT0iIil7UHQ9aS5ib2R5LmFwcGVuZENoaWxkKFB0fHx2LmV4dGVuZChpLmNyZWF0ZUVsZW1lbnQoImlmcmFtZSIpLHtmcmFtZUJvcmRlcjowLHdpZHRoOjAsaGVpZ2h0OjB9KSk7aWYoIUh0fHwhUHQuY3JlYXRlRWxlbWVudClIdD0oUHQuY29udGVudFdpbmRvd3x8UHQuY29udGVudERvY3VtZW50KS5kb2N1bWVudCxIdC53cml0ZSgiPCFkb2N0eXBlIGh0bWw+PGh0bWw+PGJvZHk+IiksSHQuY2xvc2UoKTt0PUh0LmJvZHkuYXBwZW5kQ2hpbGQoSHQuY3JlYXRlRWxlbWVudChlKSksbj1EdCh0LCJkaXNwbGF5IiksaS5ib2R5LnJlbW92ZUNoaWxkKFB0KX1yZXR1cm4gV3RbZV09bixufWZ1bmN0aW9uIGZuKGUsdCxuLHIpe3ZhciBpO2lmKHYuaXNBcnJheSh0KSl2LmVhY2godCxmdW5jdGlvbih0LGkpe258fHNuLnRlc3QoZSk/cihlLGkpOmZuKGUrIlsiKyh0eXBlb2YgaT09Im9iamVjdCI/dDoiIikrIl0iLGksbixyKX0pO2Vsc2UgaWYoIW4mJnYudHlwZSh0KT09PSJvYmplY3QiKWZvcihpIGluIHQpZm4oZSsiWyIraSsiXSIsdFtpXSxuLHIpO2Vsc2UgcihlLHQpfWZ1bmN0aW9uIENuKGUpe3JldHVybiBmdW5jdGlvbih0LG4pe3R5cGVvZiB0IT0ic3RyaW5nIiYmKG49dCx0PSIqIik7dmFyIHIsaSxzLG89dC50b0xvd2VyQ2FzZSgpLnNwbGl0KHkpLHU9MCxhPW8ubGVuZ3RoO2lmKHYuaXNGdW5jdGlvbihuKSlmb3IoO3U8YTt1Kyspcj1vW3VdLHM9L15cKy8udGVzdChyKSxzJiYocj1yLnN1YnN0cigxKXx8IioiKSxpPWVbcl09ZVtyXXx8W10saVtzPyJ1bnNoaWZ0IjoicHVzaCJdKG4pfX1mdW5jdGlvbiBrbihlLG4scixpLHMsbyl7cz1zfHxuLmRhdGFUeXBlc1swXSxvPW98fHt9LG9bc109ITA7dmFyIHUsYT1lW3NdLGY9MCxsPWE/YS5sZW5ndGg6MCxjPWU9PT1Tbjtmb3IoO2Y8bCYmKGN8fCF1KTtmKyspdT1hW2ZdKG4scixpKSx0eXBlb2YgdT09InN0cmluZyImJighY3x8b1t1XT91PXQ6KG4uZGF0YVR5cGVzLnVuc2hpZnQodSksdT1rbihlLG4scixpLHUsbykpKTtyZXR1cm4oY3x8IXUpJiYhb1siKiJdJiYodT1rbihlLG4scixpLCIqIixvKSksdX1mdW5jdGlvbiBMbihlLG4pe3ZhciByLGkscz12LmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9uc3x8e307Zm9yKHIgaW4gbiluW3JdIT09dCYmKChzW3JdP2U6aXx8KGk9e30pKVtyXT1uW3JdKTtpJiZ2LmV4dGVuZCghMCxlLGkpfWZ1bmN0aW9uIEFuKGUsbixyKXt2YXIgaSxzLG8sdSxhPWUuY29udGVudHMsZj1lLmRhdGFUeXBlcyxsPWUucmVzcG9uc2VGaWVsZHM7Zm9yKHMgaW4gbClzIGluIHImJihuW2xbc11dPXJbc10pO3doaWxlKGZbMF09PT0iKiIpZi5zaGlmdCgpLGk9PT10JiYoaT1lLm1pbWVUeXBlfHxuLmdldFJlc3BvbnNlSGVhZGVyKCJjb250ZW50LXR5cGUiKSk7aWYoaSlmb3IocyBpbiBhKWlmKGFbc10mJmFbc10udGVzdChpKSl7Zi51bnNoaWZ0KHMpO2JyZWFrfWlmKGZbMF1pbiByKW89ZlswXTtlbHNle2ZvcihzIGluIHIpe2lmKCFmWzBdfHxlLmNvbnZlcnRlcnNbcysiICIrZlswXV0pe289czticmVha311fHwodT1zKX1vPW98fHV9aWYobylyZXR1cm4gbyE9PWZbMF0mJmYudW5zaGlmdChvKSxyW29dfWZ1bmN0aW9uIE9uKGUsdCl7dmFyIG4scixpLHMsbz1lLmRhdGFUeXBlcy5zbGljZSgpLHU9b1swXSxhPXt9LGY9MDtlLmRhdGFGaWx0ZXImJih0PWUuZGF0YUZpbHRlcih0LGUuZGF0YVR5cGUpKTtpZihvWzFdKWZvcihuIGluIGUuY29udmVydGVycylhW24udG9Mb3dlckNhc2UoKV09ZS5jb252ZXJ0ZXJzW25dO2Zvcig7aT1vWysrZl07KWlmKGkhPT0iKiIpe2lmKHUhPT0iKiImJnUhPT1pKXtuPWFbdSsiICIraV18fGFbIiogIitpXTtpZighbilmb3IociBpbiBhKXtzPXIuc3BsaXQoIiAiKTtpZihzWzFdPT09aSl7bj1hW3UrIiAiK3NbMF1dfHxhWyIqICIrc1swXV07aWYobil7bj09PSEwP249YVtyXTphW3JdIT09ITAmJihpPXNbMF0sby5zcGxpY2UoZi0tLDAsaSkpO2JyZWFrfX19aWYobiE9PSEwKWlmKG4mJmVbInRocm93cyJdKXQ9bih0KTtlbHNlIHRyeXt0PW4odCl9Y2F0Y2gobCl7cmV0dXJue3N0YXRlOiJwYXJzZXJlcnJvciIsZXJyb3I6bj9sOiJObyBjb252ZXJzaW9uIGZyb20gIit1KyIgdG8gIitpfX19dT1pfXJldHVybntzdGF0ZToic3VjY2VzcyIsZGF0YTp0fX1mdW5jdGlvbiBGbigpe3RyeXtyZXR1cm4gbmV3IGUuWE1MSHR0cFJlcXVlc3R9Y2F0Y2godCl7fX1mdW5jdGlvbiBJbigpe3RyeXtyZXR1cm4gbmV3IGUuQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTEhUVFAiKX1jYXRjaCh0KXt9fWZ1bmN0aW9uICRuKCl7cmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtxbj10fSwwKSxxbj12Lm5vdygpfWZ1bmN0aW9uIEpuKGUsdCl7di5lYWNoKHQsZnVuY3Rpb24odCxuKXt2YXIgcj0oVm5bdF18fFtdKS5jb25jYXQoVm5bIioiXSksaT0wLHM9ci5sZW5ndGg7Zm9yKDtpPHM7aSsrKWlmKHJbaV0uY2FsbChlLHQsbikpcmV0dXJufSl9ZnVuY3Rpb24gS24oZSx0LG4pe3ZhciByLGk9MCxzPTAsbz1Ybi5sZW5ndGgsdT12LkRlZmVycmVkKCkuYWx3YXlzKGZ1bmN0aW9uKCl7ZGVsZXRlIGEuZWxlbX0pLGE9ZnVuY3Rpb24oKXt2YXIgdD1xbnx8JG4oKSxuPU1hdGgubWF4KDAsZi5zdGFydFRpbWUrZi5kdXJhdGlvbi10KSxyPW4vZi5kdXJhdGlvbnx8MCxpPTEtcixzPTAsbz1mLnR3ZWVucy5sZW5ndGg7Zm9yKDtzPG87cysrKWYudHdlZW5zW3NdLnJ1bihpKTtyZXR1cm4gdS5ub3RpZnlXaXRoKGUsW2YsaSxuXSksaTwxJiZvP246KHUucmVzb2x2ZVdpdGgoZSxbZl0pLCExKX0sZj11LnByb21pc2Uoe2VsZW06ZSxwcm9wczp2LmV4dGVuZCh7fSx0KSxvcHRzOnYuZXh0ZW5kKCEwLHtzcGVjaWFsRWFzaW5nOnt9fSxuKSxvcmlnaW5hbFByb3BlcnRpZXM6dCxvcmlnaW5hbE9wdGlvbnM6bixzdGFydFRpbWU6cW58fCRuKCksZHVyYXRpb246bi5kdXJhdGlvbix0d2VlbnM6W10sY3JlYXRlVHdlZW46ZnVuY3Rpb24odCxuLHIpe3ZhciBpPXYuVHdlZW4oZSxmLm9wdHMsdCxuLGYub3B0cy5zcGVjaWFsRWFzaW5nW3RdfHxmLm9wdHMuZWFzaW5nKTtyZXR1cm4gZi50d2VlbnMucHVzaChpKSxpfSxzdG9wOmZ1bmN0aW9uKHQpe3ZhciBuPTAscj10P2YudHdlZW5zLmxlbmd0aDowO2Zvcig7bjxyO24rKylmLnR3ZWVuc1tuXS5ydW4oMSk7cmV0dXJuIHQ/dS5yZXNvbHZlV2l0aChlLFtmLHRdKTp1LnJlamVjdFdpdGgoZSxbZix0XSksdGhpc319KSxsPWYucHJvcHM7UW4obCxmLm9wdHMuc3BlY2lhbEVhc2luZyk7Zm9yKDtpPG87aSsrKXtyPVhuW2ldLmNhbGwoZixlLGwsZi5vcHRzKTtpZihyKXJldHVybiByfXJldHVybiBKbihmLGwpLHYuaXNGdW5jdGlvbihmLm9wdHMuc3RhcnQpJiZmLm9wdHMuc3RhcnQuY2FsbChlLGYpLHYuZngudGltZXIodi5leHRlbmQoYSx7YW5pbTpmLHF1ZXVlOmYub3B0cy5xdWV1ZSxlbGVtOmV9KSksZi5wcm9ncmVzcyhmLm9wdHMucHJvZ3Jlc3MpLmRvbmUoZi5vcHRzLmRvbmUsZi5vcHRzLmNvbXBsZXRlKS5mYWlsKGYub3B0cy5mYWlsKS5hbHdheXMoZi5vcHRzLmFsd2F5cyl9ZnVuY3Rpb24gUW4oZSx0KXt2YXIgbixyLGkscyxvO2ZvcihuIGluIGUpe3I9di5jYW1lbENhc2UobiksaT10W3JdLHM9ZVtuXSx2LmlzQXJyYXkocykmJihpPXNbMV0scz1lW25dPXNbMF0pLG4hPT1yJiYoZVtyXT1zLGRlbGV0ZSBlW25dKSxvPXYuY3NzSG9va3Nbcl07aWYobyYmImV4cGFuZCJpbiBvKXtzPW8uZXhwYW5kKHMpLGRlbGV0ZSBlW3JdO2ZvcihuIGluIHMpbiBpbiBlfHwoZVtuXT1zW25dLHRbbl09aSl9ZWxzZSB0W3JdPWl9fWZ1bmN0aW9uIEduKGUsdCxuKXt2YXIgcixpLHMsbyx1LGEsZixsLGMsaD10aGlzLHA9ZS5zdHlsZSxkPXt9LG09W10sZz1lLm5vZGVUeXBlJiZHdChlKTtuLnF1ZXVlfHwobD12Ll9xdWV1ZUhvb2tzKGUsImZ4IiksbC51bnF1ZXVlZD09bnVsbCYmKGwudW5xdWV1ZWQ9MCxjPWwuZW1wdHkuZmlyZSxsLmVtcHR5LmZpcmU9ZnVuY3Rpb24oKXtsLnVucXVldWVkfHxjKCl9KSxsLnVucXVldWVkKyssaC5hbHdheXMoZnVuY3Rpb24oKXtoLmFsd2F5cyhmdW5jdGlvbigpe2wudW5xdWV1ZWQtLSx2LnF1ZXVlKGUsImZ4IikubGVuZ3RofHxsLmVtcHR5LmZpcmUoKX0pfSkpLGUubm9kZVR5cGU9PT0xJiYoImhlaWdodCJpbiB0fHwid2lkdGgiaW4gdCkmJihuLm92ZXJmbG93PVtwLm92ZXJmbG93LHAub3ZlcmZsb3dYLHAub3ZlcmZsb3dZXSx2LmNzcyhlLCJkaXNwbGF5Iik9PT0iaW5saW5lIiYmdi5jc3MoZSwiZmxvYXQiKT09PSJub25lIiYmKCF2LnN1cHBvcnQuaW5saW5lQmxvY2tOZWVkc0xheW91dHx8bm4oZS5ub2RlTmFtZSk9PT0iaW5saW5lIj9wLmRpc3BsYXk9ImlubGluZS1ibG9jayI6cC56b29tPTEpKSxuLm92ZXJmbG93JiYocC5vdmVyZmxvdz0iaGlkZGVuIix2LnN1cHBvcnQuc2hyaW5rV3JhcEJsb2Nrc3x8aC5kb25lKGZ1bmN0aW9uKCl7cC5vdmVyZmxvdz1uLm92ZXJmbG93WzBdLHAub3ZlcmZsb3dYPW4ub3ZlcmZsb3dbMV0scC5vdmVyZmxvd1k9bi5vdmVyZmxvd1syXX0pKTtmb3IociBpbiB0KXtzPXRbcl07aWYoVW4uZXhlYyhzKSl7ZGVsZXRlIHRbcl0sYT1hfHxzPT09InRvZ2dsZSI7aWYocz09PShnPyJoaWRlIjoic2hvdyIpKWNvbnRpbnVlO20ucHVzaChyKX19bz1tLmxlbmd0aDtpZihvKXt1PXYuX2RhdGEoZSwiZnhzaG93Iil8fHYuX2RhdGEoZSwiZnhzaG93Iix7fSksImhpZGRlbiJpbiB1JiYoZz11LmhpZGRlbiksYSYmKHUuaGlkZGVuPSFnKSxnP3YoZSkuc2hvdygpOmguZG9uZShmdW5jdGlvbigpe3YoZSkuaGlkZSgpfSksaC5kb25lKGZ1bmN0aW9uKCl7dmFyIHQ7di5yZW1vdmVEYXRhKGUsImZ4c2hvdyIsITApO2Zvcih0IGluIGQpdi5zdHlsZShlLHQsZFt0XSl9KTtmb3Iocj0wO3I8bztyKyspaT1tW3JdLGY9aC5jcmVhdGVUd2VlbihpLGc/dVtpXTowKSxkW2ldPXVbaV18fHYuc3R5bGUoZSxpKSxpIGluIHV8fCh1W2ldPWYuc3RhcnQsZyYmKGYuZW5kPWYuc3RhcnQsZi5zdGFydD1pPT09IndpZHRoInx8aT09PSJoZWlnaHQiPzE6MCkpfX1mdW5jdGlvbiBZbihlLHQsbixyLGkpe3JldHVybiBuZXcgWW4ucHJvdG90eXBlLmluaXQoZSx0LG4scixpKX1mdW5jdGlvbiBabihlLHQpe3ZhciBuLHI9e2hlaWdodDplfSxpPTA7dD10PzE6MDtmb3IoO2k8NDtpKz0yLXQpbj0kdFtpXSxyWyJtYXJnaW4iK25dPXJbInBhZGRpbmciK25dPWU7cmV0dXJuIHQmJihyLm9wYWNpdHk9ci53aWR0aD1lKSxyfWZ1bmN0aW9uIHRyKGUpe3JldHVybiB2LmlzV2luZG93KGUpP2U6ZS5ub2RlVHlwZT09PTk/ZS5kZWZhdWx0Vmlld3x8ZS5wYXJlbnRXaW5kb3c6ITF9dmFyIG4scixpPWUuZG9jdW1lbnQscz1lLmxvY2F0aW9uLG89ZS5uYXZpZ2F0b3IsdT1lLmpRdWVyeSxhPWUuJCxmPUFycmF5LnByb3RvdHlwZS5wdXNoLGw9QXJyYXkucHJvdG90eXBlLnNsaWNlLGM9QXJyYXkucHJvdG90eXBlLmluZGV4T2YsaD1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLHA9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxkPVN0cmluZy5wcm90b3R5cGUudHJpbSx2PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyB2LmZuLmluaXQoZSx0LG4pfSxtPS9bXC0rXT8oPzpcZCpcLnwpXGQrKD86W2VFXVtcLStdP1xkK3wpLy5zb3VyY2UsZz0vXFMvLHk9L1xzKy8sYj0vXltcc1x1RkVGRlx4QTBdK3xbXHNcdUZFRkZceEEwXSskL2csdz0vXig/OlteIzxdKig8W1x3XFddKz4pW14+XSokfCMoW1x3XC1dKikkKS8sRT0vXjwoXHcrKVxzKlwvPz4oPzo8XC9cMT58KSQvLFM9L15bXF0sOnt9XHNdKiQvLHg9Lyg/Ol58OnwsKSg/OlxzKlxbKSsvZyxUPS9cXCg/OlsiXFxcL2JmbnJ0XXx1W1xkYS1mQS1GXXs0fSkvZyxOPS8iW14iXFxcclxuXSoifHRydWV8ZmFsc2V8bnVsbHwtPyg/OlxkXGQqXC58KVxkKyg/OltlRV1bXC0rXT9cZCt8KS9nLEM9L14tbXMtLyxrPS8tKFtcZGEtel0pL2dpLEw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4odCsiIikudG9VcHBlckNhc2UoKX0sQT1mdW5jdGlvbigpe2kuYWRkRXZlbnRMaXN0ZW5lcj8oaS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixBLCExKSx2LnJlYWR5KCkpOmkucmVhZHlTdGF0ZT09PSJjb21wbGV0ZSImJihpLmRldGFjaEV2ZW50KCJvbnJlYWR5c3RhdGVjaGFuZ2UiLEEpLHYucmVhZHkoKSl9LE89e307di5mbj12LnByb3RvdHlwZT17Y29uc3RydWN0b3I6dixpbml0OmZ1bmN0aW9uKGUsbixyKXt2YXIgcyxvLHUsYTtpZighZSlyZXR1cm4gdGhpcztpZihlLm5vZGVUeXBlKXJldHVybiB0aGlzLmNvbnRleHQ9dGhpc1swXT1lLHRoaXMubGVuZ3RoPTEsdGhpcztpZih0eXBlb2YgZT09InN0cmluZyIpe2UuY2hhckF0KDApPT09IjwiJiZlLmNoYXJBdChlLmxlbmd0aC0xKT09PSI+IiYmZS5sZW5ndGg+PTM/cz1bbnVsbCxlLG51bGxdOnM9dy5leGVjKGUpO2lmKHMmJihzWzFdfHwhbikpe2lmKHNbMV0pcmV0dXJuIG49biBpbnN0YW5jZW9mIHY/blswXTpuLGE9biYmbi5ub2RlVHlwZT9uLm93bmVyRG9jdW1lbnR8fG46aSxlPXYucGFyc2VIVE1MKHNbMV0sYSwhMCksRS50ZXN0KHNbMV0pJiZ2LmlzUGxhaW5PYmplY3QobikmJnRoaXMuYXR0ci5jYWxsKGUsbiwhMCksdi5tZXJnZSh0aGlzLGUpO289aS5nZXRFbGVtZW50QnlJZChzWzJdKTtpZihvJiZvLnBhcmVudE5vZGUpe2lmKG8uaWQhPT1zWzJdKXJldHVybiByLmZpbmQoZSk7dGhpcy5sZW5ndGg9MSx0aGlzWzBdPW99cmV0dXJuIHRoaXMuY29udGV4dD1pLHRoaXMuc2VsZWN0b3I9ZSx0aGlzfXJldHVybiFufHxuLmpxdWVyeT8obnx8cikuZmluZChlKTp0aGlzLmNvbnN0cnVjdG9yKG4pLmZpbmQoZSl9cmV0dXJuIHYuaXNGdW5jdGlvbihlKT9yLnJlYWR5KGUpOihlLnNlbGVjdG9yIT09dCYmKHRoaXMuc2VsZWN0b3I9ZS5zZWxlY3Rvcix0aGlzLmNvbnRleHQ9ZS5jb250ZXh0KSx2Lm1ha2VBcnJheShlLHRoaXMpKX0sc2VsZWN0b3I6IiIsanF1ZXJ5OiIxLjguMyIsbGVuZ3RoOjAsc2l6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aH0sdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBsLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihlKXtyZXR1cm4gZT09bnVsbD90aGlzLnRvQXJyYXkoKTplPDA/dGhpc1t0aGlzLmxlbmd0aCtlXTp0aGlzW2VdfSxwdXNoU3RhY2s6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXYubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLGUpO3JldHVybiByLnByZXZPYmplY3Q9dGhpcyxyLmNvbnRleHQ9dGhpcy5jb250ZXh0LHQ9PT0iZmluZCI/ci5zZWxlY3Rvcj10aGlzLnNlbGVjdG9yKyh0aGlzLnNlbGVjdG9yPyIgIjoiIikrbjp0JiYoci5zZWxlY3Rvcj10aGlzLnNlbGVjdG9yKyIuIit0KyIoIituKyIpIikscn0sZWFjaDpmdW5jdGlvbihlLHQpe3JldHVybiB2LmVhY2godGhpcyxlLHQpfSxyZWFkeTpmdW5jdGlvbihlKXtyZXR1cm4gdi5yZWFkeS5wcm9taXNlKCkuZG9uZShlKSx0aGlzfSxlcTpmdW5jdGlvbihlKXtyZXR1cm4gZT0rZSxlPT09LTE/dGhpcy5zbGljZShlKTp0aGlzLnNsaWNlKGUsZSsxKX0sZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgwKX0sbGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKC0xKX0sc2xpY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2sobC5hcHBseSh0aGlzLGFyZ3VtZW50cyksInNsaWNlIixsLmNhbGwoYXJndW1lbnRzKS5qb2luKCIsIikpfSxtYXA6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHYubWFwKHRoaXMsZnVuY3Rpb24odCxuKXtyZXR1cm4gZS5jYWxsKHQsbix0KX0pKX0sZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJldk9iamVjdHx8dGhpcy5jb25zdHJ1Y3RvcihudWxsKX0scHVzaDpmLHNvcnQ6W10uc29ydCxzcGxpY2U6W10uc3BsaWNlfSx2LmZuLmluaXQucHJvdG90eXBlPXYuZm4sdi5leHRlbmQ9di5mbi5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgZSxuLHIsaSxzLG8sdT1hcmd1bWVudHNbMF18fHt9LGE9MSxmPWFyZ3VtZW50cy5sZW5ndGgsbD0hMTt0eXBlb2YgdT09ImJvb2xlYW4iJiYobD11LHU9YXJndW1lbnRzWzFdfHx7fSxhPTIpLHR5cGVvZiB1IT0ib2JqZWN0IiYmIXYuaXNGdW5jdGlvbih1KSYmKHU9e30pLGY9PT1hJiYodT10aGlzLC0tYSk7Zm9yKDthPGY7YSsrKWlmKChlPWFyZ3VtZW50c1thXSkhPW51bGwpZm9yKG4gaW4gZSl7cj11W25dLGk9ZVtuXTtpZih1PT09aSljb250aW51ZTtsJiZpJiYodi5pc1BsYWluT2JqZWN0KGkpfHwocz12LmlzQXJyYXkoaSkpKT8ocz8ocz0hMSxvPXImJnYuaXNBcnJheShyKT9yOltdKTpvPXImJnYuaXNQbGFpbk9iamVjdChyKT9yOnt9LHVbbl09di5leHRlbmQobCxvLGkpKTppIT09dCYmKHVbbl09aSl9cmV0dXJuIHV9LHYuZXh0ZW5kKHtub0NvbmZsaWN0OmZ1bmN0aW9uKHQpe3JldHVybiBlLiQ9PT12JiYoZS4kPWEpLHQmJmUualF1ZXJ5PT09diYmKGUualF1ZXJ5PXUpLHZ9LGlzUmVhZHk6ITEscmVhZHlXYWl0OjEsaG9sZFJlYWR5OmZ1bmN0aW9uKGUpe2U/di5yZWFkeVdhaXQrKzp2LnJlYWR5KCEwKX0scmVhZHk6ZnVuY3Rpb24oZSl7aWYoZT09PSEwPy0tdi5yZWFkeVdhaXQ6di5pc1JlYWR5KXJldHVybjtpZighaS5ib2R5KXJldHVybiBzZXRUaW1lb3V0KHYucmVhZHksMSk7di5pc1JlYWR5PSEwO2lmKGUhPT0hMCYmLS12LnJlYWR5V2FpdD4wKXJldHVybjtyLnJlc29sdmVXaXRoKGksW3ZdKSx2LmZuLnRyaWdnZXImJnYoaSkudHJpZ2dlcigicmVhZHkiKS5vZmYoInJlYWR5Iil9LGlzRnVuY3Rpb246ZnVuY3Rpb24oZSl7cmV0dXJuIHYudHlwZShlKT09PSJmdW5jdGlvbiJ9LGlzQXJyYXk6QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24oZSl7cmV0dXJuIHYudHlwZShlKT09PSJhcnJheSJ9LGlzV2luZG93OmZ1bmN0aW9uKGUpe3JldHVybiBlIT1udWxsJiZlPT1lLndpbmRvd30saXNOdW1lcmljOmZ1bmN0aW9uKGUpe3JldHVybiFpc05hTihwYXJzZUZsb2F0KGUpKSYmaXNGaW5pdGUoZSl9LHR5cGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PW51bGw/U3RyaW5nKGUpOk9baC5jYWxsKGUpXXx8Im9iamVjdCJ9LGlzUGxhaW5PYmplY3Q6ZnVuY3Rpb24oZSl7aWYoIWV8fHYudHlwZShlKSE9PSJvYmplY3QifHxlLm5vZGVUeXBlfHx2LmlzV2luZG93KGUpKXJldHVybiExO3RyeXtpZihlLmNvbnN0cnVjdG9yJiYhcC5jYWxsKGUsImNvbnN0cnVjdG9yIikmJiFwLmNhbGwoZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsImlzUHJvdG90eXBlT2YiKSlyZXR1cm4hMX1jYXRjaChuKXtyZXR1cm4hMX12YXIgcjtmb3IociBpbiBlKTtyZXR1cm4gcj09PXR8fHAuY2FsbChlLHIpfSxpc0VtcHR5T2JqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0O2Zvcih0IGluIGUpcmV0dXJuITE7cmV0dXJuITB9LGVycm9yOmZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcihlKX0scGFyc2VIVE1MOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcjtyZXR1cm4hZXx8dHlwZW9mIGUhPSJzdHJpbmciP251bGw6KHR5cGVvZiB0PT0iYm9vbGVhbiImJihuPXQsdD0wKSx0PXR8fGksKHI9RS5leGVjKGUpKT9bdC5jcmVhdGVFbGVtZW50KHJbMV0pXToocj12LmJ1aWxkRnJhZ21lbnQoW2VdLHQsbj9udWxsOltdKSx2Lm1lcmdlKFtdLChyLmNhY2hlYWJsZT92LmNsb25lKHIuZnJhZ21lbnQpOnIuZnJhZ21lbnQpLmNoaWxkTm9kZXMpKSl9LHBhcnNlSlNPTjpmdW5jdGlvbih0KXtpZighdHx8dHlwZW9mIHQhPSJzdHJpbmciKXJldHVybiBudWxsO3Q9di50cmltKHQpO2lmKGUuSlNPTiYmZS5KU09OLnBhcnNlKXJldHVybiBlLkpTT04ucGFyc2UodCk7aWYoUy50ZXN0KHQucmVwbGFjZShULCJAIikucmVwbGFjZShOLCJdIikucmVwbGFjZSh4LCIiKSkpcmV0dXJuKG5ldyBGdW5jdGlvbigicmV0dXJuICIrdCkpKCk7di5lcnJvcigiSW52YWxpZCBKU09OOiAiK3QpfSxwYXJzZVhNTDpmdW5jdGlvbihuKXt2YXIgcixpO2lmKCFufHx0eXBlb2YgbiE9InN0cmluZyIpcmV0dXJuIG51bGw7dHJ5e2UuRE9NUGFyc2VyPyhpPW5ldyBET01QYXJzZXIscj1pLnBhcnNlRnJvbVN0cmluZyhuLCJ0ZXh0L3htbCIpKToocj1uZXcgQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTERPTSIpLHIuYXN5bmM9ImZhbHNlIixyLmxvYWRYTUwobikpfWNhdGNoKHMpe3I9dH1yZXR1cm4oIXJ8fCFyLmRvY3VtZW50RWxlbWVudHx8ci5nZXRFbGVtZW50c0J5VGFnTmFtZSgicGFyc2VyZXJyb3IiKS5sZW5ndGgpJiZ2LmVycm9yKCJJbnZhbGlkIFhNTDogIituKSxyfSxub29wOmZ1bmN0aW9uKCl7fSxnbG9iYWxFdmFsOmZ1bmN0aW9uKHQpe3QmJmcudGVzdCh0KSYmKGUuZXhlY1NjcmlwdHx8ZnVuY3Rpb24odCl7ZS5ldmFsLmNhbGwoZSx0KX0pKHQpfSxjYW1lbENhc2U6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZShDLCJtcy0iKS5yZXBsYWNlKGssTCl9LG5vZGVOYW1lOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUubm9kZU5hbWUmJmUubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXQudG9Mb3dlckNhc2UoKX0sZWFjaDpmdW5jdGlvbihlLG4scil7dmFyIGkscz0wLG89ZS5sZW5ndGgsdT1vPT09dHx8di5pc0Z1bmN0aW9uKGUpO2lmKHIpe2lmKHUpe2ZvcihpIGluIGUpaWYobi5hcHBseShlW2ldLHIpPT09ITEpYnJlYWt9ZWxzZSBmb3IoO3M8bzspaWYobi5hcHBseShlW3MrK10scik9PT0hMSlicmVha31lbHNlIGlmKHUpe2ZvcihpIGluIGUpaWYobi5jYWxsKGVbaV0saSxlW2ldKT09PSExKWJyZWFrfWVsc2UgZm9yKDtzPG87KWlmKG4uY2FsbChlW3NdLHMsZVtzKytdKT09PSExKWJyZWFrO3JldHVybiBlfSx0cmltOmQmJiFkLmNhbGwoIlx1ZmVmZlx1MDBhMCIpP2Z1bmN0aW9uKGUpe3JldHVybiBlPT1udWxsPyIiOmQuY2FsbChlKX06ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PW51bGw/IiI6KGUrIiIpLnJlcGxhY2UoYiwiIil9LG1ha2VBcnJheTpmdW5jdGlvbihlLHQpe3ZhciBuLHI9dHx8W107cmV0dXJuIGUhPW51bGwmJihuPXYudHlwZShlKSxlLmxlbmd0aD09bnVsbHx8bj09PSJzdHJpbmcifHxuPT09ImZ1bmN0aW9uInx8bj09PSJyZWdleHAifHx2LmlzV2luZG93KGUpP2YuY2FsbChyLGUpOnYubWVyZ2UocixlKSkscn0saW5BcnJheTpmdW5jdGlvbihlLHQsbil7dmFyIHI7aWYodCl7aWYoYylyZXR1cm4gYy5jYWxsKHQsZSxuKTtyPXQubGVuZ3RoLG49bj9uPDA/TWF0aC5tYXgoMCxyK24pOm46MDtmb3IoO248cjtuKyspaWYobiBpbiB0JiZ0W25dPT09ZSlyZXR1cm4gbn1yZXR1cm4tMX0sbWVyZ2U6ZnVuY3Rpb24oZSxuKXt2YXIgcj1uLmxlbmd0aCxpPWUubGVuZ3RoLHM9MDtpZih0eXBlb2Ygcj09Im51bWJlciIpZm9yKDtzPHI7cysrKWVbaSsrXT1uW3NdO2Vsc2Ugd2hpbGUobltzXSE9PXQpZVtpKytdPW5bcysrXTtyZXR1cm4gZS5sZW5ndGg9aSxlfSxncmVwOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpPVtdLHM9MCxvPWUubGVuZ3RoO249ISFuO2Zvcig7czxvO3MrKylyPSEhdChlW3NdLHMpLG4hPT1yJiZpLnB1c2goZVtzXSk7cmV0dXJuIGl9LG1hcDpmdW5jdGlvbihlLG4scil7dmFyIGkscyxvPVtdLHU9MCxhPWUubGVuZ3RoLGY9ZSBpbnN0YW5jZW9mIHZ8fGEhPT10JiZ0eXBlb2YgYT09Im51bWJlciImJihhPjAmJmVbMF0mJmVbYS0xXXx8YT09PTB8fHYuaXNBcnJheShlKSk7aWYoZilmb3IoO3U8YTt1KyspaT1uKGVbdV0sdSxyKSxpIT1udWxsJiYob1tvLmxlbmd0aF09aSk7ZWxzZSBmb3IocyBpbiBlKWk9bihlW3NdLHMsciksaSE9bnVsbCYmKG9bby5sZW5ndGhdPWkpO3JldHVybiBvLmNvbmNhdC5hcHBseShbXSxvKX0sZ3VpZDoxLHByb3h5OmZ1bmN0aW9uKGUsbil7dmFyIHIsaSxzO3JldHVybiB0eXBlb2Ygbj09InN0cmluZyImJihyPWVbbl0sbj1lLGU9ciksdi5pc0Z1bmN0aW9uKGUpPyhpPWwuY2FsbChhcmd1bWVudHMsMikscz1mdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KG4saS5jb25jYXQobC5jYWxsKGFyZ3VtZW50cykpKX0scy5ndWlkPWUuZ3VpZD1lLmd1aWR8fHYuZ3VpZCsrLHMpOnR9LGFjY2VzczpmdW5jdGlvbihlLG4scixpLHMsbyx1KXt2YXIgYSxmPXI9PW51bGwsbD0wLGM9ZS5sZW5ndGg7aWYociYmdHlwZW9mIHI9PSJvYmplY3QiKXtmb3IobCBpbiByKXYuYWNjZXNzKGUsbixsLHJbbF0sMSxvLGkpO3M9MX1lbHNlIGlmKGkhPT10KXthPXU9PT10JiZ2LmlzRnVuY3Rpb24oaSksZiYmKGE/KGE9bixuPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gYS5jYWxsKHYoZSksbil9KToobi5jYWxsKGUsaSksbj1udWxsKSk7aWYobilmb3IoO2w8YztsKyspbihlW2xdLHIsYT9pLmNhbGwoZVtsXSxsLG4oZVtsXSxyKSk6aSx1KTtzPTF9cmV0dXJuIHM/ZTpmP24uY2FsbChlKTpjP24oZVswXSxyKTpvfSxub3c6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IERhdGUpLmdldFRpbWUoKX19KSx2LnJlYWR5LnByb21pc2U9ZnVuY3Rpb24odCl7aWYoIXIpe3I9di5EZWZlcnJlZCgpO2lmKGkucmVhZHlTdGF0ZT09PSJjb21wbGV0ZSIpc2V0VGltZW91dCh2LnJlYWR5LDEpO2Vsc2UgaWYoaS5hZGRFdmVudExpc3RlbmVyKWkuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsQSwhMSksZS5hZGRFdmVudExpc3RlbmVyKCJsb2FkIix2LnJlYWR5LCExKTtlbHNle2kuYXR0YWNoRXZlbnQoIm9ucmVhZHlzdGF0ZWNoYW5nZSIsQSksZS5hdHRhY2hFdmVudCgib25sb2FkIix2LnJlYWR5KTt2YXIgbj0hMTt0cnl7bj1lLmZyYW1lRWxlbWVudD09bnVsbCYmaS5kb2N1bWVudEVsZW1lbnR9Y2F0Y2gocyl7fW4mJm4uZG9TY3JvbGwmJmZ1bmN0aW9uIG8oKXtpZighdi5pc1JlYWR5KXt0cnl7bi5kb1Njcm9sbCgibGVmdCIpfWNhdGNoKGUpe3JldHVybiBzZXRUaW1lb3V0KG8sNTApfXYucmVhZHkoKX19KCl9fXJldHVybiByLnByb21pc2UodCl9LHYuZWFjaCgiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCIuc3BsaXQoIiAiKSxmdW5jdGlvbihlLHQpe09bIltvYmplY3QgIit0KyJdIl09dC50b0xvd2VyQ2FzZSgpfSksbj12KGkpO3ZhciBNPXt9O3YuQ2FsbGJhY2tzPWZ1bmN0aW9uKGUpe2U9dHlwZW9mIGU9PSJzdHJpbmciP01bZV18fF8oZSk6di5leHRlbmQoe30sZSk7dmFyIG4scixpLHMsbyx1LGE9W10sZj0hZS5vbmNlJiZbXSxsPWZ1bmN0aW9uKHQpe249ZS5tZW1vcnkmJnQscj0hMCx1PXN8fDAscz0wLG89YS5sZW5ndGgsaT0hMDtmb3IoO2EmJnU8bzt1KyspaWYoYVt1XS5hcHBseSh0WzBdLHRbMV0pPT09ITEmJmUuc3RvcE9uRmFsc2Upe249ITE7YnJlYWt9aT0hMSxhJiYoZj9mLmxlbmd0aCYmbChmLnNoaWZ0KCkpOm4/YT1bXTpjLmRpc2FibGUoKSl9LGM9e2FkZDpmdW5jdGlvbigpe2lmKGEpe3ZhciB0PWEubGVuZ3RoOyhmdW5jdGlvbiByKHQpe3YuZWFjaCh0LGZ1bmN0aW9uKHQsbil7dmFyIGk9di50eXBlKG4pO2k9PT0iZnVuY3Rpb24iPyghZS51bmlxdWV8fCFjLmhhcyhuKSkmJmEucHVzaChuKTpuJiZuLmxlbmd0aCYmaSE9PSJzdHJpbmciJiZyKG4pfSl9KShhcmd1bWVudHMpLGk/bz1hLmxlbmd0aDpuJiYocz10LGwobikpfXJldHVybiB0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oKXtyZXR1cm4gYSYmdi5lYWNoKGFyZ3VtZW50cyxmdW5jdGlvbihlLHQpe3ZhciBuO3doaWxlKChuPXYuaW5BcnJheSh0LGEsbikpPi0xKWEuc3BsaWNlKG4sMSksaSYmKG48PW8mJm8tLSxuPD11JiZ1LS0pfSksdGhpc30saGFzOmZ1bmN0aW9uKGUpe3JldHVybiB2LmluQXJyYXkoZSxhKT4tMX0sZW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gYT1bXSx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGE9Zj1uPXQsdGhpc30sZGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hYX0sbG9jazpmdW5jdGlvbigpe3JldHVybiBmPXQsbnx8Yy5kaXNhYmxlKCksdGhpc30sbG9ja2VkOmZ1bmN0aW9uKCl7cmV0dXJuIWZ9LGZpcmVXaXRoOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ9dHx8W10sdD1bZSx0LnNsaWNlP3Quc2xpY2UoKTp0XSxhJiYoIXJ8fGYpJiYoaT9mLnB1c2godCk6bCh0KSksdGhpc30sZmlyZTpmdW5jdGlvbigpe3JldHVybiBjLmZpcmVXaXRoKHRoaXMsYXJndW1lbnRzKSx0aGlzfSxmaXJlZDpmdW5jdGlvbigpe3JldHVybiEhcn19O3JldHVybiBjfSx2LmV4dGVuZCh7RGVmZXJyZWQ6ZnVuY3Rpb24oZSl7dmFyIHQ9W1sicmVzb2x2ZSIsImRvbmUiLHYuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLCJyZXNvbHZlZCJdLFsicmVqZWN0IiwiZmFpbCIsdi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksInJlamVjdGVkIl0sWyJub3RpZnkiLCJwcm9ncmVzcyIsdi5DYWxsYmFja3MoIm1lbW9yeSIpXV0sbj0icGVuZGluZyIscj17c3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gbn0sYWx3YXlzOmZ1bmN0aW9uKCl7cmV0dXJuIGkuZG9uZShhcmd1bWVudHMpLmZhaWwoYXJndW1lbnRzKSx0aGlzfSx0aGVuOmZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzO3JldHVybiB2LkRlZmVycmVkKGZ1bmN0aW9uKG4pe3YuZWFjaCh0LGZ1bmN0aW9uKHQscil7dmFyIHM9clswXSxvPWVbdF07aVtyWzFdXSh2LmlzRnVuY3Rpb24obyk/ZnVuY3Rpb24oKXt2YXIgZT1vLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtlJiZ2LmlzRnVuY3Rpb24oZS5wcm9taXNlKT9lLnByb21pc2UoKS5kb25lKG4ucmVzb2x2ZSkuZmFpbChuLnJlamVjdCkucHJvZ3Jlc3Mobi5ub3RpZnkpOm5bcysiV2l0aCJdKHRoaXM9PT1pP246dGhpcyxbZV0pfTpuW3NdKX0pLGU9bnVsbH0pLnByb21pc2UoKX0scHJvbWlzZTpmdW5jdGlvbihlKXtyZXR1cm4gZSE9bnVsbD92LmV4dGVuZChlLHIpOnJ9fSxpPXt9O3JldHVybiByLnBpcGU9ci50aGVuLHYuZWFjaCh0LGZ1bmN0aW9uKGUscyl7dmFyIG89c1syXSx1PXNbM107cltzWzFdXT1vLmFkZCx1JiZvLmFkZChmdW5jdGlvbigpe249dX0sdFtlXjFdWzJdLmRpc2FibGUsdFsyXVsyXS5sb2NrKSxpW3NbMF1dPW8uZmlyZSxpW3NbMF0rIldpdGgiXT1vLmZpcmVXaXRofSksci5wcm9taXNlKGkpLGUmJmUuY2FsbChpLGkpLGl9LHdoZW46ZnVuY3Rpb24oZSl7dmFyIHQ9MCxuPWwuY2FsbChhcmd1bWVudHMpLHI9bi5sZW5ndGgsaT1yIT09MXx8ZSYmdi5pc0Z1bmN0aW9uKGUucHJvbWlzZSk/cjowLHM9aT09PTE/ZTp2LkRlZmVycmVkKCksbz1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGZ1bmN0aW9uKHIpe3RbZV09dGhpcyxuW2VdPWFyZ3VtZW50cy5sZW5ndGg+MT9sLmNhbGwoYXJndW1lbnRzKTpyLG49PT11P3Mubm90aWZ5V2l0aCh0LG4pOi0taXx8cy5yZXNvbHZlV2l0aCh0LG4pfX0sdSxhLGY7aWYocj4xKXt1PW5ldyBBcnJheShyKSxhPW5ldyBBcnJheShyKSxmPW5ldyBBcnJheShyKTtmb3IoO3Q8cjt0Kyspblt0XSYmdi5pc0Z1bmN0aW9uKG5bdF0ucHJvbWlzZSk/blt0XS5wcm9taXNlKCkuZG9uZShvKHQsZixuKSkuZmFpbChzLnJlamVjdCkucHJvZ3Jlc3Mobyh0LGEsdSkpOi0taX1yZXR1cm4gaXx8cy5yZXNvbHZlV2l0aChmLG4pLHMucHJvbWlzZSgpfX0pLHYuc3VwcG9ydD1mdW5jdGlvbigpe3ZhciB0LG4scixzLG8sdSxhLGYsbCxjLGgscD1pLmNyZWF0ZUVsZW1lbnQoImRpdiIpO3Auc2V0QXR0cmlidXRlKCJjbGFzc05hbWUiLCJ0IikscC5pbm5lckhUTUw9IiAgPGxpbmsvPjx0YWJsZT48L3RhYmxlPjxhIGhyZWY9Jy9hJz5hPC9hPjxpbnB1dCB0eXBlPSdjaGVja2JveCcvPiIsbj1wLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikscj1wLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJhIilbMF07aWYoIW58fCFyfHwhbi5sZW5ndGgpcmV0dXJue307cz1pLmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpLG89cy5hcHBlbmRDaGlsZChpLmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpKSx1PXAuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImlucHV0IilbMF0sci5zdHlsZS5jc3NUZXh0PSJ0b3A6MXB4O2Zsb2F0OmxlZnQ7b3BhY2l0eTouNSIsdD17bGVhZGluZ1doaXRlc3BhY2U6cC5maXJzdENoaWxkLm5vZGVUeXBlPT09Myx0Ym9keTohcC5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGJvZHkiKS5sZW5ndGgsaHRtbFNlcmlhbGl6ZTohIXAuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImxpbmsiKS5sZW5ndGgsc3R5bGU6L3RvcC8udGVzdChyLmdldEF0dHJpYnV0ZSgic3R5bGUiKSksaHJlZk5vcm1hbGl6ZWQ6ci5nZXRBdHRyaWJ1dGUoImhyZWYiKT09PSIvYSIsb3BhY2l0eTovXjAuNS8udGVzdChyLnN0eWxlLm9wYWNpdHkpLGNzc0Zsb2F0OiEhci5zdHlsZS5jc3NGbG9hdCxjaGVja09uOnUudmFsdWU9PT0ib24iLG9wdFNlbGVjdGVkOm8uc2VsZWN0ZWQsZ2V0U2V0QXR0cmlidXRlOnAuY2xhc3NOYW1lIT09InQiLGVuY3R5cGU6ISFpLmNyZWF0ZUVsZW1lbnQoImZvcm0iKS5lbmN0eXBlLGh0bWw1Q2xvbmU6aS5jcmVhdGVFbGVtZW50KCJuYXYiKS5jbG9uZU5vZGUoITApLm91dGVySFRNTCE9PSI8Om5hdj48LzpuYXY+Iixib3hNb2RlbDppLmNvbXBhdE1vZGU9PT0iQ1NTMUNvbXBhdCIsc3VibWl0QnViYmxlczohMCxjaGFuZ2VCdWJibGVzOiEwLGZvY3VzaW5CdWJibGVzOiExLGRlbGV0ZUV4cGFuZG86ITAsbm9DbG9uZUV2ZW50OiEwLGlubGluZUJsb2NrTmVlZHNMYXlvdXQ6ITEsc2hyaW5rV3JhcEJsb2NrczohMSxyZWxpYWJsZU1hcmdpblJpZ2h0OiEwLGJveFNpemluZ1JlbGlhYmxlOiEwLHBpeGVsUG9zaXRpb246ITF9LHUuY2hlY2tlZD0hMCx0Lm5vQ2xvbmVDaGVja2VkPXUuY2xvbmVOb2RlKCEwKS5jaGVja2VkLHMuZGlzYWJsZWQ9ITAsdC5vcHREaXNhYmxlZD0hby5kaXNhYmxlZDt0cnl7ZGVsZXRlIHAudGVzdH1jYXRjaChkKXt0LmRlbGV0ZUV4cGFuZG89ITF9IXAuYWRkRXZlbnRMaXN0ZW5lciYmcC5hdHRhY2hFdmVudCYmcC5maXJlRXZlbnQmJihwLmF0dGFjaEV2ZW50KCJvbmNsaWNrIixoPWZ1bmN0aW9uKCl7dC5ub0Nsb25lRXZlbnQ9ITF9KSxwLmNsb25lTm9kZSghMCkuZmlyZUV2ZW50KCJvbmNsaWNrIikscC5kZXRhY2hFdmVudCgib25jbGljayIsaCkpLHU9aS5jcmVhdGVFbGVtZW50KCJpbnB1dCIpLHUudmFsdWU9InQiLHUuc2V0QXR0cmlidXRlKCJ0eXBlIiwicmFkaW8iKSx0LnJhZGlvVmFsdWU9dS52YWx1ZT09PSJ0Iix1LnNldEF0dHJpYnV0ZSgiY2hlY2tlZCIsImNoZWNrZWQiKSx1LnNldEF0dHJpYnV0ZSgibmFtZSIsInQiKSxwLmFwcGVuZENoaWxkKHUpLGE9aS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksYS5hcHBlbmRDaGlsZChwLmxhc3RDaGlsZCksdC5jaGVja0Nsb25lPWEuY2xvbmVOb2RlKCEwKS5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5jaGVja2VkLHQuYXBwZW5kQ2hlY2tlZD11LmNoZWNrZWQsYS5yZW1vdmVDaGlsZCh1KSxhLmFwcGVuZENoaWxkKHApO2lmKHAuYXR0YWNoRXZlbnQpZm9yKGwgaW57c3VibWl0OiEwLGNoYW5nZTohMCxmb2N1c2luOiEwfSlmPSJvbiIrbCxjPWYgaW4gcCxjfHwocC5zZXRBdHRyaWJ1dGUoZiwicmV0dXJuOyIpLGM9dHlwZW9mIHBbZl09PSJmdW5jdGlvbiIpLHRbbCsiQnViYmxlcyJdPWM7cmV0dXJuIHYoZnVuY3Rpb24oKXt2YXIgbixyLHMsbyx1PSJwYWRkaW5nOjA7bWFyZ2luOjA7Ym9yZGVyOjA7ZGlzcGxheTpibG9jaztvdmVyZmxvdzpoaWRkZW47IixhPWkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImJvZHkiKVswXTtpZighYSlyZXR1cm47bj1pLmNyZWF0ZUVsZW1lbnQoImRpdiIpLG4uc3R5bGUuY3NzVGV4dD0idmlzaWJpbGl0eTpoaWRkZW47Ym9yZGVyOjA7d2lkdGg6MDtoZWlnaHQ6MDtwb3NpdGlvbjpzdGF0aWM7dG9wOjA7bWFyZ2luLXRvcDoxcHgiLGEuaW5zZXJ0QmVmb3JlKG4sYS5maXJzdENoaWxkKSxyPWkuY3JlYXRlRWxlbWVudCgiZGl2Iiksbi5hcHBlbmRDaGlsZChyKSxyLmlubmVySFRNTD0iPHRhYmxlPjx0cj48dGQ+PC90ZD48dGQ+dDwvdGQ+PC90cj48L3RhYmxlPiIscz1yLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0ZCIpLHNbMF0uc3R5bGUuY3NzVGV4dD0icGFkZGluZzowO21hcmdpbjowO2JvcmRlcjowO2Rpc3BsYXk6bm9uZSIsYz1zWzBdLm9mZnNldEhlaWdodD09PTAsc1swXS5zdHlsZS5kaXNwbGF5PSIiLHNbMV0uc3R5bGUuZGlzcGxheT0ibm9uZSIsdC5yZWxpYWJsZUhpZGRlbk9mZnNldHM9YyYmc1swXS5vZmZzZXRIZWlnaHQ9PT0wLHIuaW5uZXJIVE1MPSIiLHIuc3R5bGUuY3NzVGV4dD0iYm94LXNpemluZzpib3JkZXItYm94Oy1tb3otYm94LXNpemluZzpib3JkZXItYm94Oy13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94O3BhZGRpbmc6MXB4O2JvcmRlcjoxcHg7ZGlzcGxheTpibG9jazt3aWR0aDo0cHg7bWFyZ2luLXRvcDoxJTtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MSU7Iix0LmJveFNpemluZz1yLm9mZnNldFdpZHRoPT09NCx0LmRvZXNOb3RJbmNsdWRlTWFyZ2luSW5Cb2R5T2Zmc2V0PWEub2Zmc2V0VG9wIT09MSxlLmdldENvbXB1dGVkU3R5bGUmJih0LnBpeGVsUG9zaXRpb249KGUuZ2V0Q29tcHV0ZWRTdHlsZShyLG51bGwpfHx7fSkudG9wIT09IjElIix0LmJveFNpemluZ1JlbGlhYmxlPShlLmdldENvbXB1dGVkU3R5bGUocixudWxsKXx8e3dpZHRoOiI0cHgifSkud2lkdGg9PT0iNHB4IixvPWkuY3JlYXRlRWxlbWVudCgiZGl2Iiksby5zdHlsZS5jc3NUZXh0PXIuc3R5bGUuY3NzVGV4dD11LG8uc3R5bGUubWFyZ2luUmlnaHQ9by5zdHlsZS53aWR0aD0iMCIsci5zdHlsZS53aWR0aD0iMXB4IixyLmFwcGVuZENoaWxkKG8pLHQucmVsaWFibGVNYXJnaW5SaWdodD0hcGFyc2VGbG9hdCgoZS5nZXRDb21wdXRlZFN0eWxlKG8sbnVsbCl8fHt9KS5tYXJnaW5SaWdodCkpLHR5cGVvZiByLnN0eWxlLnpvb20hPSJ1bmRlZmluZWQiJiYoci5pbm5lckhUTUw9IiIsci5zdHlsZS5jc3NUZXh0PXUrIndpZHRoOjFweDtwYWRkaW5nOjFweDtkaXNwbGF5OmlubGluZTt6b29tOjEiLHQuaW5saW5lQmxvY2tOZWVkc0xheW91dD1yLm9mZnNldFdpZHRoPT09MyxyLnN0eWxlLmRpc3BsYXk9ImJsb2NrIixyLnN0eWxlLm92ZXJmbG93PSJ2aXNpYmxlIixyLmlubmVySFRNTD0iPGRpdj48L2Rpdj4iLHIuZmlyc3RDaGlsZC5zdHlsZS53aWR0aD0iNXB4Iix0LnNocmlua1dyYXBCbG9ja3M9ci5vZmZzZXRXaWR0aCE9PTMsbi5zdHlsZS56b29tPTEpLGEucmVtb3ZlQ2hpbGQobiksbj1yPXM9bz1udWxsfSksYS5yZW1vdmVDaGlsZChwKSxuPXI9cz1vPXU9YT1wPW51bGwsdH0oKTt2YXIgRD0vKD86XHtbXHNcU10qXH18XFtbXHNcU10qXF0pJC8sUD0vKFtBLVpdKS9nO3YuZXh0ZW5kKHtjYWNoZTp7fSxkZWxldGVkSWRzOltdLHV1aWQ6MCxleHBhbmRvOiJqUXVlcnkiKyh2LmZuLmpxdWVyeStNYXRoLnJhbmRvbSgpKS5yZXBsYWNlKC9cRC9nLCIiKSxub0RhdGE6e2VtYmVkOiEwLG9iamVjdDoiY2xzaWQ6RDI3Q0RCNkUtQUU2RC0xMWNmLTk2QjgtNDQ0NTUzNTQwMDAwIixhcHBsZXQ6ITB9LGhhc0RhdGE6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9ZS5ub2RlVHlwZT92LmNhY2hlW2Vbdi5leHBhbmRvXV06ZVt2LmV4cGFuZG9dLCEhZSYmIUIoZSl9LGRhdGE6ZnVuY3Rpb24oZSxuLHIsaSl7aWYoIXYuYWNjZXB0RGF0YShlKSlyZXR1cm47dmFyIHMsbyx1PXYuZXhwYW5kbyxhPXR5cGVvZiBuPT0ic3RyaW5nIixmPWUubm9kZVR5cGUsbD1mP3YuY2FjaGU6ZSxjPWY/ZVt1XTplW3VdJiZ1O2lmKCghY3x8IWxbY118fCFpJiYhbFtjXS5kYXRhKSYmYSYmcj09PXQpcmV0dXJuO2N8fChmP2VbdV09Yz12LmRlbGV0ZWRJZHMucG9wKCl8fHYuZ3VpZCsrOmM9dSksbFtjXXx8KGxbY109e30sZnx8KGxbY10udG9KU09OPXYubm9vcCkpO2lmKHR5cGVvZiBuPT0ib2JqZWN0Inx8dHlwZW9mIG49PSJmdW5jdGlvbiIpaT9sW2NdPXYuZXh0ZW5kKGxbY10sbik6bFtjXS5kYXRhPXYuZXh0ZW5kKGxbY10uZGF0YSxuKTtyZXR1cm4gcz1sW2NdLGl8fChzLmRhdGF8fChzLmRhdGE9e30pLHM9cy5kYXRhKSxyIT09dCYmKHNbdi5jYW1lbENhc2UobildPXIpLGE/KG89c1tuXSxvPT1udWxsJiYobz1zW3YuY2FtZWxDYXNlKG4pXSkpOm89cyxvfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGUsdCxuKXtpZighdi5hY2NlcHREYXRhKGUpKXJldHVybjt2YXIgcixpLHMsbz1lLm5vZGVUeXBlLHU9bz92LmNhY2hlOmUsYT1vP2Vbdi5leHBhbmRvXTp2LmV4cGFuZG87aWYoIXVbYV0pcmV0dXJuO2lmKHQpe3I9bj91W2FdOnVbYV0uZGF0YTtpZihyKXt2LmlzQXJyYXkodCl8fCh0IGluIHI/dD1bdF06KHQ9di5jYW1lbENhc2UodCksdCBpbiByP3Q9W3RdOnQ9dC5zcGxpdCgiICIpKSk7Zm9yKGk9MCxzPXQubGVuZ3RoO2k8cztpKyspZGVsZXRlIHJbdFtpXV07aWYoIShuP0I6di5pc0VtcHR5T2JqZWN0KShyKSlyZXR1cm59fWlmKCFuKXtkZWxldGUgdVthXS5kYXRhO2lmKCFCKHVbYV0pKXJldHVybn1vP3YuY2xlYW5EYXRhKFtlXSwhMCk6di5zdXBwb3J0LmRlbGV0ZUV4cGFuZG98fHUhPXUud2luZG93P2RlbGV0ZSB1W2FdOnVbYV09bnVsbH0sX2RhdGE6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB2LmRhdGEoZSx0LG4sITApfSxhY2NlcHREYXRhOmZ1bmN0aW9uKGUpe3ZhciB0PWUubm9kZU5hbWUmJnYubm9EYXRhW2Uubm9kZU5hbWUudG9Mb3dlckNhc2UoKV07cmV0dXJuIXR8fHQhPT0hMCYmZS5nZXRBdHRyaWJ1dGUoImNsYXNzaWQiKT09PXR9fSksdi5mbi5leHRlbmQoe2RhdGE6ZnVuY3Rpb24oZSxuKXt2YXIgcixpLHMsbyx1LGE9dGhpc1swXSxmPTAsbD1udWxsO2lmKGU9PT10KXtpZih0aGlzLmxlbmd0aCl7bD12LmRhdGEoYSk7aWYoYS5ub2RlVHlwZT09PTEmJiF2Ll9kYXRhKGEsInBhcnNlZEF0dHJzIikpe3M9YS5hdHRyaWJ1dGVzO2Zvcih1PXMubGVuZ3RoO2Y8dTtmKyspbz1zW2ZdLm5hbWUsby5pbmRleE9mKCJkYXRhLSIpfHwobz12LmNhbWVsQ2FzZShvLnN1YnN0cmluZyg1KSksSChhLG8sbFtvXSkpO3YuX2RhdGEoYSwicGFyc2VkQXR0cnMiLCEwKX19cmV0dXJuIGx9cmV0dXJuIHR5cGVvZiBlPT0ib2JqZWN0Ij90aGlzLmVhY2goZnVuY3Rpb24oKXt2LmRhdGEodGhpcyxlKX0pOihyPWUuc3BsaXQoIi4iLDIpLHJbMV09clsxXT8iLiIrclsxXToiIixpPXJbMV0rIiEiLHYuYWNjZXNzKHRoaXMsZnVuY3Rpb24obil7aWYobj09PXQpcmV0dXJuIGw9dGhpcy50cmlnZ2VySGFuZGxlcigiZ2V0RGF0YSIraSxbclswXV0pLGw9PT10JiZhJiYobD12LmRhdGEoYSxlKSxsPUgoYSxlLGwpKSxsPT09dCYmclsxXT90aGlzLmRhdGEoclswXSk6bDtyWzFdPW4sdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9dih0aGlzKTt0LnRyaWdnZXJIYW5kbGVyKCJzZXREYXRhIitpLHIpLHYuZGF0YSh0aGlzLGUsbiksdC50cmlnZ2VySGFuZGxlcigiY2hhbmdlRGF0YSIraSxyKX0pfSxudWxsLG4sYXJndW1lbnRzLmxlbmd0aD4xLG51bGwsITEpKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7di5yZW1vdmVEYXRhKHRoaXMsZSl9KX19KSx2LmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oZSx0LG4pe3ZhciByO2lmKGUpcmV0dXJuIHQ9KHR8fCJmeCIpKyJxdWV1ZSIscj12Ll9kYXRhKGUsdCksbiYmKCFyfHx2LmlzQXJyYXkobik/cj12Ll9kYXRhKGUsdCx2Lm1ha2VBcnJheShuKSk6ci5wdXNoKG4pKSxyfHxbXX0sZGVxdWV1ZTpmdW5jdGlvbihlLHQpe3Q9dHx8ImZ4Ijt2YXIgbj12LnF1ZXVlKGUsdCkscj1uLmxlbmd0aCxpPW4uc2hpZnQoKSxzPXYuX3F1ZXVlSG9va3MoZSx0KSxvPWZ1bmN0aW9uKCl7di5kZXF1ZXVlKGUsdCl9O2k9PT0iaW5wcm9ncmVzcyImJihpPW4uc2hpZnQoKSxyLS0pLGkmJih0PT09ImZ4IiYmbi51bnNoaWZ0KCJpbnByb2dyZXNzIiksZGVsZXRlIHMuc3RvcCxpLmNhbGwoZSxvLHMpKSwhciYmcyYmcy5lbXB0eS5maXJlKCl9LF9xdWV1ZUhvb2tzOmZ1bmN0aW9uKGUsdCl7dmFyIG49dCsicXVldWVIb29rcyI7cmV0dXJuIHYuX2RhdGEoZSxuKXx8di5fZGF0YShlLG4se2VtcHR5OnYuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLmFkZChmdW5jdGlvbigpe3YucmVtb3ZlRGF0YShlLHQrInF1ZXVlIiwhMCksdi5yZW1vdmVEYXRhKGUsbiwhMCl9KX0pfX0pLHYuZm4uZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihlLG4pe3ZhciByPTI7cmV0dXJuIHR5cGVvZiBlIT0ic3RyaW5nIiYmKG49ZSxlPSJmeCIsci0tKSxhcmd1bWVudHMubGVuZ3RoPHI/di5xdWV1ZSh0aGlzWzBdLGUpOm49PT10P3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9di5xdWV1ZSh0aGlzLGUsbik7di5fcXVldWVIb29rcyh0aGlzLGUpLGU9PT0iZngiJiZ0WzBdIT09ImlucHJvZ3Jlc3MiJiZ2LmRlcXVldWUodGhpcyxlKX0pfSxkZXF1ZXVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2LmRlcXVldWUodGhpcyxlKX0pfSxkZWxheTpmdW5jdGlvbihlLHQpe3JldHVybiBlPXYuZng/di5meC5zcGVlZHNbZV18fGU6ZSx0PXR8fCJmeCIsdGhpcy5xdWV1ZSh0LGZ1bmN0aW9uKHQsbil7dmFyIHI9c2V0VGltZW91dCh0LGUpO24uc3RvcD1mdW5jdGlvbigpe2NsZWFyVGltZW91dChyKX19KX0sY2xlYXJRdWV1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5xdWV1ZShlfHwiZngiLFtdKX0scHJvbWlzZTpmdW5jdGlvbihlLG4pe3ZhciByLGk9MSxzPXYuRGVmZXJyZWQoKSxvPXRoaXMsdT10aGlzLmxlbmd0aCxhPWZ1bmN0aW9uKCl7LS1pfHxzLnJlc29sdmVXaXRoKG8sW29dKX07dHlwZW9mIGUhPSJzdHJpbmciJiYobj1lLGU9dCksZT1lfHwiZngiO3doaWxlKHUtLSlyPXYuX2RhdGEob1t1XSxlKyJxdWV1ZUhvb2tzIiksciYmci5lbXB0eSYmKGkrKyxyLmVtcHR5LmFkZChhKSk7cmV0dXJuIGEoKSxzLnByb21pc2Uobil9fSk7dmFyIGosRixJLHE9L1tcdFxyXG5dL2csUj0vXHIvZyxVPS9eKD86YnV0dG9ufGlucHV0KSQvaSx6PS9eKD86YnV0dG9ufGlucHV0fG9iamVjdHxzZWxlY3R8dGV4dGFyZWEpJC9pLFc9L15hKD86cmVhfCkkL2ksWD0vXig/OmF1dG9mb2N1c3xhdXRvcGxheXxhc3luY3xjaGVja2VkfGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkfHNlbGVjdGVkKSQvaSxWPXYuc3VwcG9ydC5nZXRTZXRBdHRyaWJ1dGU7di5mbi5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdi5hY2Nlc3ModGhpcyx2LmF0dHIsZSx0LGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3YucmVtb3ZlQXR0cih0aGlzLGUpfSl9LHByb3A6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdi5hY2Nlc3ModGhpcyx2LnByb3AsZSx0LGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZVByb3A6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9di5wcm9wRml4W2VdfHxlLHRoaXMuZWFjaChmdW5jdGlvbigpe3RyeXt0aGlzW2VdPXQsZGVsZXRlIHRoaXNbZV19Y2F0Y2gobil7fX0pfSxhZGRDbGFzczpmdW5jdGlvbihlKXt2YXIgdCxuLHIsaSxzLG8sdTtpZih2LmlzRnVuY3Rpb24oZSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbih0KXt2KHRoaXMpLmFkZENsYXNzKGUuY2FsbCh0aGlzLHQsdGhpcy5jbGFzc05hbWUpKX0pO2lmKGUmJnR5cGVvZiBlPT0ic3RyaW5nIil7dD1lLnNwbGl0KHkpO2ZvcihuPTAscj10aGlzLmxlbmd0aDtuPHI7bisrKXtpPXRoaXNbbl07aWYoaS5ub2RlVHlwZT09PTEpaWYoIWkuY2xhc3NOYW1lJiZ0Lmxlbmd0aD09PTEpaS5jbGFzc05hbWU9ZTtlbHNle3M9IiAiK2kuY2xhc3NOYW1lKyIgIjtmb3Iobz0wLHU9dC5sZW5ndGg7bzx1O28rKylzLmluZGV4T2YoIiAiK3Rbb10rIiAiKTwwJiYocys9dFtvXSsiICIpO2kuY2xhc3NOYW1lPXYudHJpbShzKX19fXJldHVybiB0aGlzfSxyZW1vdmVDbGFzczpmdW5jdGlvbihlKXt2YXIgbixyLGkscyxvLHUsYTtpZih2LmlzRnVuY3Rpb24oZSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbih0KXt2KHRoaXMpLnJlbW92ZUNsYXNzKGUuY2FsbCh0aGlzLHQsdGhpcy5jbGFzc05hbWUpKX0pO2lmKGUmJnR5cGVvZiBlPT0ic3RyaW5nInx8ZT09PXQpe249KGV8fCIiKS5zcGxpdCh5KTtmb3IodT0wLGE9dGhpcy5sZW5ndGg7dTxhO3UrKyl7aT10aGlzW3VdO2lmKGkubm9kZVR5cGU9PT0xJiZpLmNsYXNzTmFtZSl7cj0oIiAiK2kuY2xhc3NOYW1lKyIgIikucmVwbGFjZShxLCIgIik7Zm9yKHM9MCxvPW4ubGVuZ3RoO3M8bztzKyspd2hpbGUoci5pbmRleE9mKCIgIituW3NdKyIgIik+PTApcj1yLnJlcGxhY2UoIiAiK25bc10rIiAiLCIgIik7aS5jbGFzc05hbWU9ZT92LnRyaW0ocik6IiJ9fX1yZXR1cm4gdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oZSx0KXt2YXIgbj10eXBlb2YgZSxyPXR5cGVvZiB0PT0iYm9vbGVhbiI7cmV0dXJuIHYuaXNGdW5jdGlvbihlKT90aGlzLmVhY2goZnVuY3Rpb24obil7dih0aGlzKS50b2dnbGVDbGFzcyhlLmNhbGwodGhpcyxuLHRoaXMuY2xhc3NOYW1lLHQpLHQpfSk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7aWYobj09PSJzdHJpbmciKXt2YXIgaSxzPTAsbz12KHRoaXMpLHU9dCxhPWUuc3BsaXQoeSk7d2hpbGUoaT1hW3MrK10pdT1yP3U6IW8uaGFzQ2xhc3MoaSksb1t1PyJhZGRDbGFzcyI6InJlbW92ZUNsYXNzIl0oaSl9ZWxzZSBpZihuPT09InVuZGVmaW5lZCJ8fG49PT0iYm9vbGVhbiIpdGhpcy5jbGFzc05hbWUmJnYuX2RhdGEodGhpcywiX19jbGFzc05hbWVfXyIsdGhpcy5jbGFzc05hbWUpLHRoaXMuY2xhc3NOYW1lPXRoaXMuY2xhc3NOYW1lfHxlPT09ITE/IiI6di5fZGF0YSh0aGlzLCJfX2NsYXNzTmFtZV9fIil8fCIifSl9LGhhc0NsYXNzOmZ1bmN0aW9uKGUpe3ZhciB0PSIgIitlKyIgIixuPTAscj10aGlzLmxlbmd0aDtmb3IoO248cjtuKyspaWYodGhpc1tuXS5ub2RlVHlwZT09PTEmJigiICIrdGhpc1tuXS5jbGFzc05hbWUrIiAiKS5yZXBsYWNlKHEsIiAiKS5pbmRleE9mKHQpPj0wKXJldHVybiEwO3JldHVybiExfSx2YWw6ZnVuY3Rpb24oZSl7dmFyIG4scixpLHM9dGhpc1swXTtpZighYXJndW1lbnRzLmxlbmd0aCl7aWYocylyZXR1cm4gbj12LnZhbEhvb2tzW3MudHlwZV18fHYudmFsSG9va3Nbcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxuJiYiZ2V0ImluIG4mJihyPW4uZ2V0KHMsInZhbHVlIikpIT09dD9yOihyPXMudmFsdWUsdHlwZW9mIHI9PSJzdHJpbmciP3IucmVwbGFjZShSLCIiKTpyPT1udWxsPyIiOnIpO3JldHVybn1yZXR1cm4gaT12LmlzRnVuY3Rpb24oZSksdGhpcy5lYWNoKGZ1bmN0aW9uKHIpe3ZhciBzLG89dih0aGlzKTtpZih0aGlzLm5vZGVUeXBlIT09MSlyZXR1cm47aT9zPWUuY2FsbCh0aGlzLHIsby52YWwoKSk6cz1lLHM9PW51bGw/cz0iIjp0eXBlb2Ygcz09Im51bWJlciI/cys9IiI6di5pc0FycmF5KHMpJiYocz12Lm1hcChzLGZ1bmN0aW9uKGUpe3JldHVybiBlPT1udWxsPyIiOmUrIiJ9KSksbj12LnZhbEhvb2tzW3RoaXMudHlwZV18fHYudmFsSG9va3NbdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXTtpZighbnx8ISgic2V0ImluIG4pfHxuLnNldCh0aGlzLHMsInZhbHVlIik9PT10KXRoaXMudmFsdWU9c30pfX0pLHYuZXh0ZW5kKHt2YWxIb29rczp7b3B0aW9uOntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5hdHRyaWJ1dGVzLnZhbHVlO3JldHVybiF0fHx0LnNwZWNpZmllZD9lLnZhbHVlOmUudGV4dH19LHNlbGVjdDp7Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0LG4scj1lLm9wdGlvbnMsaT1lLnNlbGVjdGVkSW5kZXgscz1lLnR5cGU9PT0ic2VsZWN0LW9uZSJ8fGk8MCxvPXM/bnVsbDpbXSx1PXM/aSsxOnIubGVuZ3RoLGE9aTwwP3U6cz9pOjA7Zm9yKDthPHU7YSsrKXtuPXJbYV07aWYoKG4uc2VsZWN0ZWR8fGE9PT1pKSYmKHYuc3VwcG9ydC5vcHREaXNhYmxlZD8hbi5kaXNhYmxlZDpuLmdldEF0dHJpYnV0ZSgiZGlzYWJsZWQiKT09PW51bGwpJiYoIW4ucGFyZW50Tm9kZS5kaXNhYmxlZHx8IXYubm9kZU5hbWUobi5wYXJlbnROb2RlLCJvcHRncm91cCIpKSl7dD12KG4pLnZhbCgpO2lmKHMpcmV0dXJuIHQ7by5wdXNoKHQpfX1yZXR1cm4gb30sc2V0OmZ1bmN0aW9uKGUsdCl7dmFyIG49di5tYWtlQXJyYXkodCk7cmV0dXJuIHYoZSkuZmluZCgib3B0aW9uIikuZWFjaChmdW5jdGlvbigpe3RoaXMuc2VsZWN0ZWQ9di5pbkFycmF5KHYodGhpcykudmFsKCksbik+PTB9KSxuLmxlbmd0aHx8KGUuc2VsZWN0ZWRJbmRleD0tMSksbn19fSxhdHRyRm46e30sYXR0cjpmdW5jdGlvbihlLG4scixpKXt2YXIgcyxvLHUsYT1lLm5vZGVUeXBlO2lmKCFlfHxhPT09M3x8YT09PTh8fGE9PT0yKXJldHVybjtpZihpJiZ2LmlzRnVuY3Rpb24odi5mbltuXSkpcmV0dXJuIHYoZSlbbl0ocik7aWYodHlwZW9mIGUuZ2V0QXR0cmlidXRlPT0idW5kZWZpbmVkIilyZXR1cm4gdi5wcm9wKGUsbixyKTt1PWEhPT0xfHwhdi5pc1hNTERvYyhlKSx1JiYobj1uLnRvTG93ZXJDYXNlKCksbz12LmF0dHJIb29rc1tuXXx8KFgudGVzdChuKT9GOmopKTtpZihyIT09dCl7aWYocj09PW51bGwpe3YucmVtb3ZlQXR0cihlLG4pO3JldHVybn1yZXR1cm4gbyYmInNldCJpbiBvJiZ1JiYocz1vLnNldChlLHIsbikpIT09dD9zOihlLnNldEF0dHJpYnV0ZShuLHIrIiIpLHIpfXJldHVybiBvJiYiZ2V0ImluIG8mJnUmJihzPW8uZ2V0KGUsbikpIT09bnVsbD9zOihzPWUuZ2V0QXR0cmlidXRlKG4pLHM9PT1udWxsP3Q6cyl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGkscyxvPTA7aWYodCYmZS5ub2RlVHlwZT09PTEpe3I9dC5zcGxpdCh5KTtmb3IoO288ci5sZW5ndGg7bysrKWk9cltvXSxpJiYobj12LnByb3BGaXhbaV18fGkscz1YLnRlc3QoaSksc3x8di5hdHRyKGUsaSwiIiksZS5yZW1vdmVBdHRyaWJ1dGUoVj9pOm4pLHMmJm4gaW4gZSYmKGVbbl09ITEpKX19LGF0dHJIb29rczp7dHlwZTp7c2V0OmZ1bmN0aW9uKGUsdCl7aWYoVS50ZXN0KGUubm9kZU5hbWUpJiZlLnBhcmVudE5vZGUpdi5lcnJvcigidHlwZSBwcm9wZXJ0eSBjYW4ndCBiZSBjaGFuZ2VkIik7ZWxzZSBpZighdi5zdXBwb3J0LnJhZGlvVmFsdWUmJnQ9PT0icmFkaW8iJiZ2Lm5vZGVOYW1lKGUsImlucHV0Iikpe3ZhciBuPWUudmFsdWU7cmV0dXJuIGUuc2V0QXR0cmlidXRlKCJ0eXBlIix0KSxuJiYoZS52YWx1ZT1uKSx0fX19LHZhbHVlOntnZXQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaiYmdi5ub2RlTmFtZShlLCJidXR0b24iKT9qLmdldChlLHQpOnQgaW4gZT9lLnZhbHVlOm51bGx9LHNldDpmdW5jdGlvbihlLHQsbil7aWYoaiYmdi5ub2RlTmFtZShlLCJidXR0b24iKSlyZXR1cm4gai5zZXQoZSx0LG4pO2UudmFsdWU9dH19fSxwcm9wRml4Ont0YWJpbmRleDoidGFiSW5kZXgiLHJlYWRvbmx5OiJyZWFkT25seSIsImZvciI6Imh0bWxGb3IiLCJjbGFzcyI6ImNsYXNzTmFtZSIsbWF4bGVuZ3RoOiJtYXhMZW5ndGgiLGNlbGxzcGFjaW5nOiJjZWxsU3BhY2luZyIsY2VsbHBhZGRpbmc6ImNlbGxQYWRkaW5nIixyb3dzcGFuOiJyb3dTcGFuIixjb2xzcGFuOiJjb2xTcGFuIix1c2VtYXA6InVzZU1hcCIsZnJhbWVib3JkZXI6ImZyYW1lQm9yZGVyIixjb250ZW50ZWRpdGFibGU6ImNvbnRlbnRFZGl0YWJsZSJ9LHByb3A6ZnVuY3Rpb24oZSxuLHIpe3ZhciBpLHMsbyx1PWUubm9kZVR5cGU7aWYoIWV8fHU9PT0zfHx1PT09OHx8dT09PTIpcmV0dXJuO3JldHVybiBvPXUhPT0xfHwhdi5pc1hNTERvYyhlKSxvJiYobj12LnByb3BGaXhbbl18fG4scz12LnByb3BIb29rc1tuXSksciE9PXQ/cyYmInNldCJpbiBzJiYoaT1zLnNldChlLHIsbikpIT09dD9pOmVbbl09cjpzJiYiZ2V0ImluIHMmJihpPXMuZ2V0KGUsbikpIT09bnVsbD9pOmVbbl19LHByb3BIb29rczp7dGFiSW5kZXg6e2dldDpmdW5jdGlvbihlKXt2YXIgbj1lLmdldEF0dHJpYnV0ZU5vZGUoInRhYmluZGV4Iik7cmV0dXJuIG4mJm4uc3BlY2lmaWVkP3BhcnNlSW50KG4udmFsdWUsMTApOnoudGVzdChlLm5vZGVOYW1lKXx8Vy50ZXN0KGUubm9kZU5hbWUpJiZlLmhyZWY/MDp0fX19fSksRj17Z2V0OmZ1bmN0aW9uKGUsbil7dmFyIHIsaT12LnByb3AoZSxuKTtyZXR1cm4gaT09PSEwfHx0eXBlb2YgaSE9ImJvb2xlYW4iJiYocj1lLmdldEF0dHJpYnV0ZU5vZGUobikpJiZyLm5vZGVWYWx1ZSE9PSExP24udG9Mb3dlckNhc2UoKTp0fSxzZXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciByO3JldHVybiB0PT09ITE/di5yZW1vdmVBdHRyKGUsbik6KHI9di5wcm9wRml4W25dfHxuLHIgaW4gZSYmKGVbcl09ITApLGUuc2V0QXR0cmlidXRlKG4sbi50b0xvd2VyQ2FzZSgpKSksbn19LFZ8fChJPXtuYW1lOiEwLGlkOiEwLGNvb3JkczohMH0saj12LnZhbEhvb2tzLmJ1dHRvbj17Z2V0OmZ1bmN0aW9uKGUsbil7dmFyIHI7cmV0dXJuIHI9ZS5nZXRBdHRyaWJ1dGVOb2RlKG4pLHImJihJW25dP3IudmFsdWUhPT0iIjpyLnNwZWNpZmllZCk/ci52YWx1ZTp0fSxzZXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWUuZ2V0QXR0cmlidXRlTm9kZShuKTtyZXR1cm4gcnx8KHI9aS5jcmVhdGVBdHRyaWJ1dGUobiksZS5zZXRBdHRyaWJ1dGVOb2RlKHIpKSxyLnZhbHVlPXQrIiJ9fSx2LmVhY2goWyJ3aWR0aCIsImhlaWdodCJdLGZ1bmN0aW9uKGUsdCl7di5hdHRySG9va3NbdF09di5leHRlbmQodi5hdHRySG9va3NbdF0se3NldDpmdW5jdGlvbihlLG4pe2lmKG49PT0iIilyZXR1cm4gZS5zZXRBdHRyaWJ1dGUodCwiYXV0byIpLG59fSl9KSx2LmF0dHJIb29rcy5jb250ZW50ZWRpdGFibGU9e2dldDpqLmdldCxzZXQ6ZnVuY3Rpb24oZSx0LG4pe3Q9PT0iIiYmKHQ9ImZhbHNlIiksai5zZXQoZSx0LG4pfX0pLHYuc3VwcG9ydC5ocmVmTm9ybWFsaXplZHx8di5lYWNoKFsiaHJlZiIsInNyYyIsIndpZHRoIiwiaGVpZ2h0Il0sZnVuY3Rpb24oZSxuKXt2LmF0dHJIb29rc1tuXT12LmV4dGVuZCh2LmF0dHJIb29rc1tuXSx7Z2V0OmZ1bmN0aW9uKGUpe3ZhciByPWUuZ2V0QXR0cmlidXRlKG4sMik7cmV0dXJuIHI9PT1udWxsP3Q6cn19KX0pLHYuc3VwcG9ydC5zdHlsZXx8KHYuYXR0ckhvb2tzLnN0eWxlPXtnZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3R5bGUuY3NzVGV4dC50b0xvd2VyQ2FzZSgpfHx0fSxzZXQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5zdHlsZS5jc3NUZXh0PXQrIiJ9fSksdi5zdXBwb3J0Lm9wdFNlbGVjdGVkfHwodi5wcm9wSG9va3Muc2VsZWN0ZWQ9di5leHRlbmQodi5wcm9wSG9va3Muc2VsZWN0ZWQse2dldDpmdW5jdGlvbihlKXt2YXIgdD1lLnBhcmVudE5vZGU7cmV0dXJuIHQmJih0LnNlbGVjdGVkSW5kZXgsdC5wYXJlbnROb2RlJiZ0LnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCksbnVsbH19KSksdi5zdXBwb3J0LmVuY3R5cGV8fCh2LnByb3BGaXguZW5jdHlwZT0iZW5jb2RpbmciKSx2LnN1cHBvcnQuY2hlY2tPbnx8di5lYWNoKFsicmFkaW8iLCJjaGVja2JveCJdLGZ1bmN0aW9uKCl7di52YWxIb29rc1t0aGlzXT17Z2V0OmZ1bmN0aW9uKGUpe3JldHVybiBlLmdldEF0dHJpYnV0ZSgidmFsdWUiKT09PW51bGw/Im9uIjplLnZhbHVlfX19KSx2LmVhY2goWyJyYWRpbyIsImNoZWNrYm94Il0sZnVuY3Rpb24oKXt2LnZhbEhvb2tzW3RoaXNdPXYuZXh0ZW5kKHYudmFsSG9va3NbdGhpc10se3NldDpmdW5jdGlvbihlLHQpe2lmKHYuaXNBcnJheSh0KSlyZXR1cm4gZS5jaGVja2VkPXYuaW5BcnJheSh2KGUpLnZhbCgpLHQpPj0wfX0pfSk7dmFyICQ9L14oPzp0ZXh0YXJlYXxpbnB1dHxzZWxlY3QpJC9pLEo9L14oW15cLl0qfCkoPzpcLiguKyl8KSQvLEs9Lyg/Ol58XHMpaG92ZXIoXC5cUyt8KVxiLyxRPS9ea2V5LyxHPS9eKD86bW91c2V8Y29udGV4dG1lbnUpfGNsaWNrLyxZPS9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLyxaPWZ1bmN0aW9uKGUpe3JldHVybiB2LmV2ZW50LnNwZWNpYWwuaG92ZXI/ZTplLnJlcGxhY2UoSywibW91c2VlbnRlciQxIG1vdXNlbGVhdmUkMSIpfTt2LmV2ZW50PXthZGQ6ZnVuY3Rpb24oZSxuLHIsaSxzKXt2YXIgbyx1LGEsZixsLGMsaCxwLGQsbSxnO2lmKGUubm9kZVR5cGU9PT0zfHxlLm5vZGVUeXBlPT09OHx8IW58fCFyfHwhKG89di5fZGF0YShlKSkpcmV0dXJuO3IuaGFuZGxlciYmKGQ9cixyPWQuaGFuZGxlcixzPWQuc2VsZWN0b3IpLHIuZ3VpZHx8KHIuZ3VpZD12Lmd1aWQrKyksYT1vLmV2ZW50cyxhfHwoby5ldmVudHM9YT17fSksdT1vLmhhbmRsZSx1fHwoby5oYW5kbGU9dT1mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIHY9PSJ1bmRlZmluZWQifHwhIWUmJnYuZXZlbnQudHJpZ2dlcmVkPT09ZS50eXBlP3Q6di5ldmVudC5kaXNwYXRjaC5hcHBseSh1LmVsZW0sYXJndW1lbnRzKX0sdS5lbGVtPWUpLG49di50cmltKFoobikpLnNwbGl0KCIgIik7Zm9yKGY9MDtmPG4ubGVuZ3RoO2YrKyl7bD1KLmV4ZWMobltmXSl8fFtdLGM9bFsxXSxoPShsWzJdfHwiIikuc3BsaXQoIi4iKS5zb3J0KCksZz12LmV2ZW50LnNwZWNpYWxbY118fHt9LGM9KHM/Zy5kZWxlZ2F0ZVR5cGU6Zy5iaW5kVHlwZSl8fGMsZz12LmV2ZW50LnNwZWNpYWxbY118fHt9LHA9di5leHRlbmQoe3R5cGU6YyxvcmlnVHlwZTpsWzFdLGRhdGE6aSxoYW5kbGVyOnIsZ3VpZDpyLmd1aWQsc2VsZWN0b3I6cyxuZWVkc0NvbnRleHQ6cyYmdi5leHByLm1hdGNoLm5lZWRzQ29udGV4dC50ZXN0KHMpLG5hbWVzcGFjZTpoLmpvaW4oIi4iKX0sZCksbT1hW2NdO2lmKCFtKXttPWFbY109W10sbS5kZWxlZ2F0ZUNvdW50PTA7aWYoIWcuc2V0dXB8fGcuc2V0dXAuY2FsbChlLGksaCx1KT09PSExKWUuYWRkRXZlbnRMaXN0ZW5lcj9lLmFkZEV2ZW50TGlzdGVuZXIoYyx1LCExKTplLmF0dGFjaEV2ZW50JiZlLmF0dGFjaEV2ZW50KCJvbiIrYyx1KX1nLmFkZCYmKGcuYWRkLmNhbGwoZSxwKSxwLmhhbmRsZXIuZ3VpZHx8KHAuaGFuZGxlci5ndWlkPXIuZ3VpZCkpLHM/bS5zcGxpY2UobS5kZWxlZ2F0ZUNvdW50KyssMCxwKTptLnB1c2gocCksdi5ldmVudC5nbG9iYWxbY109ITB9ZT1udWxsfSxnbG9iYWw6e30scmVtb3ZlOmZ1bmN0aW9uKGUsdCxuLHIsaSl7dmFyIHMsbyx1LGEsZixsLGMsaCxwLGQsbSxnPXYuaGFzRGF0YShlKSYmdi5fZGF0YShlKTtpZighZ3x8IShoPWcuZXZlbnRzKSlyZXR1cm47dD12LnRyaW0oWih0fHwiIikpLnNwbGl0KCIgIik7Zm9yKHM9MDtzPHQubGVuZ3RoO3MrKyl7bz1KLmV4ZWModFtzXSl8fFtdLHU9YT1vWzFdLGY9b1syXTtpZighdSl7Zm9yKHUgaW4gaCl2LmV2ZW50LnJlbW92ZShlLHUrdFtzXSxuLHIsITApO2NvbnRpbnVlfXA9di5ldmVudC5zcGVjaWFsW3VdfHx7fSx1PShyP3AuZGVsZWdhdGVUeXBlOnAuYmluZFR5cGUpfHx1LGQ9aFt1XXx8W10sbD1kLmxlbmd0aCxmPWY/bmV3IFJlZ0V4cCgiKF58XFwuKSIrZi5zcGxpdCgiLiIpLnNvcnQoKS5qb2luKCJcXC4oPzouKlxcLnwpIikrIihcXC58JCkiKTpudWxsO2ZvcihjPTA7YzxkLmxlbmd0aDtjKyspbT1kW2NdLChpfHxhPT09bS5vcmlnVHlwZSkmJighbnx8bi5ndWlkPT09bS5ndWlkKSYmKCFmfHxmLnRlc3QobS5uYW1lc3BhY2UpKSYmKCFyfHxyPT09bS5zZWxlY3Rvcnx8cj09PSIqKiImJm0uc2VsZWN0b3IpJiYoZC5zcGxpY2UoYy0tLDEpLG0uc2VsZWN0b3ImJmQuZGVsZWdhdGVDb3VudC0tLHAucmVtb3ZlJiZwLnJlbW92ZS5jYWxsKGUsbSkpO2QubGVuZ3RoPT09MCYmbCE9PWQubGVuZ3RoJiYoKCFwLnRlYXJkb3dufHxwLnRlYXJkb3duLmNhbGwoZSxmLGcuaGFuZGxlKT09PSExKSYmdi5yZW1vdmVFdmVudChlLHUsZy5oYW5kbGUpLGRlbGV0ZSBoW3VdKX12LmlzRW1wdHlPYmplY3QoaCkmJihkZWxldGUgZy5oYW5kbGUsdi5yZW1vdmVEYXRhKGUsImV2ZW50cyIsITApKX0sY3VzdG9tRXZlbnQ6e2dldERhdGE6ITAsc2V0RGF0YTohMCxjaGFuZ2VEYXRhOiEwfSx0cmlnZ2VyOmZ1bmN0aW9uKG4scixzLG8pe2lmKCFzfHxzLm5vZGVUeXBlIT09MyYmcy5ub2RlVHlwZSE9PTgpe3ZhciB1LGEsZixsLGMsaCxwLGQsbSxnLHk9bi50eXBlfHxuLGI9W107aWYoWS50ZXN0KHkrdi5ldmVudC50cmlnZ2VyZWQpKXJldHVybjt5LmluZGV4T2YoIiEiKT49MCYmKHk9eS5zbGljZSgwLC0xKSxhPSEwKSx5LmluZGV4T2YoIi4iKT49MCYmKGI9eS5zcGxpdCgiLiIpLHk9Yi5zaGlmdCgpLGIuc29ydCgpKTtpZigoIXN8fHYuZXZlbnQuY3VzdG9tRXZlbnRbeV0pJiYhdi5ldmVudC5nbG9iYWxbeV0pcmV0dXJuO249dHlwZW9mIG49PSJvYmplY3QiP25bdi5leHBhbmRvXT9uOm5ldyB2LkV2ZW50KHksbik6bmV3IHYuRXZlbnQoeSksbi50eXBlPXksbi5pc1RyaWdnZXI9ITAsbi5leGNsdXNpdmU9YSxuLm5hbWVzcGFjZT1iLmpvaW4oIi4iKSxuLm5hbWVzcGFjZV9yZT1uLm5hbWVzcGFjZT9uZXcgUmVnRXhwKCIoXnxcXC4pIitiLmpvaW4oIlxcLig/Oi4qXFwufCkiKSsiKFxcLnwkKSIpOm51bGwsaD15LmluZGV4T2YoIjoiKTwwPyJvbiIreToiIjtpZighcyl7dT12LmNhY2hlO2ZvcihmIGluIHUpdVtmXS5ldmVudHMmJnVbZl0uZXZlbnRzW3ldJiZ2LmV2ZW50LnRyaWdnZXIobixyLHVbZl0uaGFuZGxlLmVsZW0sITApO3JldHVybn1uLnJlc3VsdD10LG4udGFyZ2V0fHwobi50YXJnZXQ9cykscj1yIT1udWxsP3YubWFrZUFycmF5KHIpOltdLHIudW5zaGlmdChuKSxwPXYuZXZlbnQuc3BlY2lhbFt5XXx8e307aWYocC50cmlnZ2VyJiZwLnRyaWdnZXIuYXBwbHkocyxyKT09PSExKXJldHVybjttPVtbcyxwLmJpbmRUeXBlfHx5XV07aWYoIW8mJiFwLm5vQnViYmxlJiYhdi5pc1dpbmRvdyhzKSl7Zz1wLmRlbGVnYXRlVHlwZXx8eSxsPVkudGVzdChnK3kpP3M6cy5wYXJlbnROb2RlO2ZvcihjPXM7bDtsPWwucGFyZW50Tm9kZSltLnB1c2goW2wsZ10pLGM9bDtjPT09KHMub3duZXJEb2N1bWVudHx8aSkmJm0ucHVzaChbYy5kZWZhdWx0Vmlld3x8Yy5wYXJlbnRXaW5kb3d8fGUsZ10pfWZvcihmPTA7ZjxtLmxlbmd0aCYmIW4uaXNQcm9wYWdhdGlvblN0b3BwZWQoKTtmKyspbD1tW2ZdWzBdLG4udHlwZT1tW2ZdWzFdLGQ9KHYuX2RhdGEobCwiZXZlbnRzIil8fHt9KVtuLnR5cGVdJiZ2Ll9kYXRhKGwsImhhbmRsZSIpLGQmJmQuYXBwbHkobCxyKSxkPWgmJmxbaF0sZCYmdi5hY2NlcHREYXRhKGwpJiZkLmFwcGx5JiZkLmFwcGx5KGwscik9PT0hMSYmbi5wcmV2ZW50RGVmYXVsdCgpO3JldHVybiBuLnR5cGU9eSwhbyYmIW4uaXNEZWZhdWx0UHJldmVudGVkKCkmJighcC5fZGVmYXVsdHx8cC5fZGVmYXVsdC5hcHBseShzLm93bmVyRG9jdW1lbnQscik9PT0hMSkmJih5IT09ImNsaWNrInx8IXYubm9kZU5hbWUocywiYSIpKSYmdi5hY2NlcHREYXRhKHMpJiZoJiZzW3ldJiYoeSE9PSJmb2N1cyImJnkhPT0iYmx1ciJ8fG4udGFyZ2V0Lm9mZnNldFdpZHRoIT09MCkmJiF2LmlzV2luZG93KHMpJiYoYz1zW2hdLGMmJihzW2hdPW51bGwpLHYuZXZlbnQudHJpZ2dlcmVkPXksc1t5XSgpLHYuZXZlbnQudHJpZ2dlcmVkPXQsYyYmKHNbaF09YykpLG4ucmVzdWx0fXJldHVybn0sZGlzcGF0Y2g6ZnVuY3Rpb24obil7bj12LmV2ZW50LmZpeChufHxlLmV2ZW50KTt2YXIgcixpLHMsbyx1LGEsZixjLGgscCxkPSh2Ll9kYXRhKHRoaXMsImV2ZW50cyIpfHx7fSlbbi50eXBlXXx8W10sbT1kLmRlbGVnYXRlQ291bnQsZz1sLmNhbGwoYXJndW1lbnRzKSx5PSFuLmV4Y2x1c2l2ZSYmIW4ubmFtZXNwYWNlLGI9di5ldmVudC5zcGVjaWFsW24udHlwZV18fHt9LHc9W107Z1swXT1uLG4uZGVsZWdhdGVUYXJnZXQ9dGhpcztpZihiLnByZURpc3BhdGNoJiZiLnByZURpc3BhdGNoLmNhbGwodGhpcyxuKT09PSExKXJldHVybjtpZihtJiYoIW4uYnV0dG9ufHxuLnR5cGUhPT0iY2xpY2siKSlmb3Iocz1uLnRhcmdldDtzIT10aGlzO3M9cy5wYXJlbnROb2RlfHx0aGlzKWlmKHMuZGlzYWJsZWQhPT0hMHx8bi50eXBlIT09ImNsaWNrIil7dT17fSxmPVtdO2ZvcihyPTA7cjxtO3IrKyljPWRbcl0saD1jLnNlbGVjdG9yLHVbaF09PT10JiYodVtoXT1jLm5lZWRzQ29udGV4dD92KGgsdGhpcykuaW5kZXgocyk+PTA6di5maW5kKGgsdGhpcyxudWxsLFtzXSkubGVuZ3RoKSx1W2hdJiZmLnB1c2goYyk7Zi5sZW5ndGgmJncucHVzaCh7ZWxlbTpzLG1hdGNoZXM6Zn0pfWQubGVuZ3RoPm0mJncucHVzaCh7ZWxlbTp0aGlzLG1hdGNoZXM6ZC5zbGljZShtKX0pO2ZvcihyPTA7cjx3Lmxlbmd0aCYmIW4uaXNQcm9wYWdhdGlvblN0b3BwZWQoKTtyKyspe2E9d1tyXSxuLmN1cnJlbnRUYXJnZXQ9YS5lbGVtO2ZvcihpPTA7aTxhLm1hdGNoZXMubGVuZ3RoJiYhbi5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpO2krKyl7Yz1hLm1hdGNoZXNbaV07aWYoeXx8IW4ubmFtZXNwYWNlJiYhYy5uYW1lc3BhY2V8fG4ubmFtZXNwYWNlX3JlJiZuLm5hbWVzcGFjZV9yZS50ZXN0KGMubmFtZXNwYWNlKSluLmRhdGE9Yy5kYXRhLG4uaGFuZGxlT2JqPWMsbz0oKHYuZXZlbnQuc3BlY2lhbFtjLm9yaWdUeXBlXXx8e30pLmhhbmRsZXx8Yy5oYW5kbGVyKS5hcHBseShhLmVsZW0sZyksbyE9PXQmJihuLnJlc3VsdD1vLG89PT0hMSYmKG4ucHJldmVudERlZmF1bHQoKSxuLnN0b3BQcm9wYWdhdGlvbigpKSl9fXJldHVybiBiLnBvc3REaXNwYXRjaCYmYi5wb3N0RGlzcGF0Y2guY2FsbCh0aGlzLG4pLG4ucmVzdWx0fSxwcm9wczoiYXR0ckNoYW5nZSBhdHRyTmFtZSByZWxhdGVkTm9kZSBzcmNFbGVtZW50IGFsdEtleSBidWJibGVzIGNhbmNlbGFibGUgY3RybEtleSBjdXJyZW50VGFyZ2V0IGV2ZW50UGhhc2UgbWV0YUtleSByZWxhdGVkVGFyZ2V0IHNoaWZ0S2V5IHRhcmdldCB0aW1lU3RhbXAgdmlldyB3aGljaCIuc3BsaXQoIiAiKSxmaXhIb29rczp7fSxrZXlIb29rczp7cHJvcHM6ImNoYXIgY2hhckNvZGUga2V5IGtleUNvZGUiLnNwbGl0KCIgIiksZmlsdGVyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUud2hpY2g9PW51bGwmJihlLndoaWNoPXQuY2hhckNvZGUhPW51bGw/dC5jaGFyQ29kZTp0LmtleUNvZGUpLGV9fSxtb3VzZUhvb2tzOntwcm9wczoiYnV0dG9uIGJ1dHRvbnMgY2xpZW50WCBjbGllbnRZIGZyb21FbGVtZW50IG9mZnNldFggb2Zmc2V0WSBwYWdlWCBwYWdlWSBzY3JlZW5YIHNjcmVlblkgdG9FbGVtZW50Ii5zcGxpdCgiICIpLGZpbHRlcjpmdW5jdGlvbihlLG4pe3ZhciByLHMsbyx1PW4uYnV0dG9uLGE9bi5mcm9tRWxlbWVudDtyZXR1cm4gZS5wYWdlWD09bnVsbCYmbi5jbGllbnRYIT1udWxsJiYocj1lLnRhcmdldC5vd25lckRvY3VtZW50fHxpLHM9ci5kb2N1bWVudEVsZW1lbnQsbz1yLmJvZHksZS5wYWdlWD1uLmNsaWVudFgrKHMmJnMuc2Nyb2xsTGVmdHx8byYmby5zY3JvbGxMZWZ0fHwwKS0ocyYmcy5jbGllbnRMZWZ0fHxvJiZvLmNsaWVudExlZnR8fDApLGUucGFnZVk9bi5jbGllbnRZKyhzJiZzLnNjcm9sbFRvcHx8byYmby5zY3JvbGxUb3B8fDApLShzJiZzLmNsaWVudFRvcHx8byYmby5jbGllbnRUb3B8fDApKSwhZS5yZWxhdGVkVGFyZ2V0JiZhJiYoZS5yZWxhdGVkVGFyZ2V0PWE9PT1lLnRhcmdldD9uLnRvRWxlbWVudDphKSwhZS53aGljaCYmdSE9PXQmJihlLndoaWNoPXUmMT8xOnUmMj8zOnUmND8yOjApLGV9fSxmaXg6ZnVuY3Rpb24oZSl7aWYoZVt2LmV4cGFuZG9dKXJldHVybiBlO3ZhciB0LG4scj1lLHM9di5ldmVudC5maXhIb29rc1tlLnR5cGVdfHx7fSxvPXMucHJvcHM/dGhpcy5wcm9wcy5jb25jYXQocy5wcm9wcyk6dGhpcy5wcm9wcztlPXYuRXZlbnQocik7Zm9yKHQ9by5sZW5ndGg7dDspbj1vWy0tdF0sZVtuXT1yW25dO3JldHVybiBlLnRhcmdldHx8KGUudGFyZ2V0PXIuc3JjRWxlbWVudHx8aSksZS50YXJnZXQubm9kZVR5cGU9PT0zJiYoZS50YXJnZXQ9ZS50YXJnZXQucGFyZW50Tm9kZSksZS5tZXRhS2V5PSEhZS5tZXRhS2V5LHMuZmlsdGVyP3MuZmlsdGVyKGUscik6ZX0sc3BlY2lhbDp7bG9hZDp7bm9CdWJibGU6ITB9LGZvY3VzOntkZWxlZ2F0ZVR5cGU6ImZvY3VzaW4ifSxibHVyOntkZWxlZ2F0ZVR5cGU6ImZvY3Vzb3V0In0sYmVmb3JldW5sb2FkOntzZXR1cDpmdW5jdGlvbihlLHQsbil7di5pc1dpbmRvdyh0aGlzKSYmKHRoaXMub25iZWZvcmV1bmxvYWQ9bil9LHRlYXJkb3duOmZ1bmN0aW9uKGUsdCl7dGhpcy5vbmJlZm9yZXVubG9hZD09PXQmJih0aGlzLm9uYmVmb3JldW5sb2FkPW51bGwpfX19LHNpbXVsYXRlOmZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpPXYuZXh0ZW5kKG5ldyB2LkV2ZW50LG4se3R5cGU6ZSxpc1NpbXVsYXRlZDohMCxvcmlnaW5hbEV2ZW50Ont9fSk7cj92LmV2ZW50LnRyaWdnZXIoaSxudWxsLHQpOnYuZXZlbnQuZGlzcGF0Y2guY2FsbCh0LGkpLGkuaXNEZWZhdWx0UHJldmVudGVkKCkmJm4ucHJldmVudERlZmF1bHQoKX19LHYuZXZlbnQuaGFuZGxlPXYuZXZlbnQuZGlzcGF0Y2gsdi5yZW1vdmVFdmVudD1pLnJlbW92ZUV2ZW50TGlzdGVuZXI/ZnVuY3Rpb24oZSx0LG4pe2UucmVtb3ZlRXZlbnRMaXN0ZW5lciYmZS5yZW1vdmVFdmVudExpc3RlbmVyKHQsbiwhMSl9OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj0ib24iK3Q7ZS5kZXRhY2hFdmVudCYmKHR5cGVvZiBlW3JdPT0idW5kZWZpbmVkIiYmKGVbcl09bnVsbCksZS5kZXRhY2hFdmVudChyLG4pKX0sdi5FdmVudD1mdW5jdGlvbihlLHQpe2lmKCEodGhpcyBpbnN0YW5jZW9mIHYuRXZlbnQpKXJldHVybiBuZXcgdi5FdmVudChlLHQpO2UmJmUudHlwZT8odGhpcy5vcmlnaW5hbEV2ZW50PWUsdGhpcy50eXBlPWUudHlwZSx0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD1lLmRlZmF1bHRQcmV2ZW50ZWR8fGUucmV0dXJuVmFsdWU9PT0hMXx8ZS5nZXRQcmV2ZW50RGVmYXVsdCYmZS5nZXRQcmV2ZW50RGVmYXVsdCgpP3R0OmV0KTp0aGlzLnR5cGU9ZSx0JiZ2LmV4dGVuZCh0aGlzLHQpLHRoaXMudGltZVN0YW1wPWUmJmUudGltZVN0YW1wfHx2Lm5vdygpLHRoaXNbdi5leHBhbmRvXT0hMH0sdi5FdmVudC5wcm90b3R5cGU9e3ByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9dHQ7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O2lmKCFlKXJldHVybjtlLnByZXZlbnREZWZhdWx0P2UucHJldmVudERlZmF1bHQoKTplLnJldHVyblZhbHVlPSExfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkPXR0O3ZhciBlPXRoaXMub3JpZ2luYWxFdmVudDtpZighZSlyZXR1cm47ZS5zdG9wUHJvcGFnYXRpb24mJmUuc3RvcFByb3BhZ2F0aW9uKCksZS5jYW5jZWxCdWJibGU9ITB9LHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3RoaXMuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9dHQsdGhpcy5zdG9wUHJvcGFnYXRpb24oKX0saXNEZWZhdWx0UHJldmVudGVkOmV0LGlzUHJvcGFnYXRpb25TdG9wcGVkOmV0LGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOmV0fSx2LmVhY2goe21vdXNlZW50ZXI6Im1vdXNlb3ZlciIsbW91c2VsZWF2ZToibW91c2VvdXQifSxmdW5jdGlvbihlLHQpe3YuZXZlbnQuc3BlY2lhbFtlXT17ZGVsZWdhdGVUeXBlOnQsYmluZFR5cGU6dCxoYW5kbGU6ZnVuY3Rpb24oZSl7dmFyIG4scj10aGlzLGk9ZS5yZWxhdGVkVGFyZ2V0LHM9ZS5oYW5kbGVPYmosbz1zLnNlbGVjdG9yO2lmKCFpfHxpIT09ciYmIXYuY29udGFpbnMocixpKSllLnR5cGU9cy5vcmlnVHlwZSxuPXMuaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksZS50eXBlPXQ7cmV0dXJuIG59fX0pLHYuc3VwcG9ydC5zdWJtaXRCdWJibGVzfHwodi5ldmVudC5zcGVjaWFsLnN1Ym1pdD17c2V0dXA6ZnVuY3Rpb24oKXtpZih2Lm5vZGVOYW1lKHRoaXMsImZvcm0iKSlyZXR1cm4hMTt2LmV2ZW50LmFkZCh0aGlzLCJjbGljay5fc3VibWl0IGtleXByZXNzLl9zdWJtaXQiLGZ1bmN0aW9uKGUpe3ZhciBuPWUudGFyZ2V0LHI9di5ub2RlTmFtZShuLCJpbnB1dCIpfHx2Lm5vZGVOYW1lKG4sImJ1dHRvbiIpP24uZm9ybTp0O3ImJiF2Ll9kYXRhKHIsIl9zdWJtaXRfYXR0YWNoZWQiKSYmKHYuZXZlbnQuYWRkKHIsInN1Ym1pdC5fc3VibWl0IixmdW5jdGlvbihlKXtlLl9zdWJtaXRfYnViYmxlPSEwfSksdi5fZGF0YShyLCJfc3VibWl0X2F0dGFjaGVkIiwhMCkpfSl9LHBvc3REaXNwYXRjaDpmdW5jdGlvbihlKXtlLl9zdWJtaXRfYnViYmxlJiYoZGVsZXRlIGUuX3N1Ym1pdF9idWJibGUsdGhpcy5wYXJlbnROb2RlJiYhZS5pc1RyaWdnZXImJnYuZXZlbnQuc2ltdWxhdGUoInN1Ym1pdCIsdGhpcy5wYXJlbnROb2RlLGUsITApKX0sdGVhcmRvd246ZnVuY3Rpb24oKXtpZih2Lm5vZGVOYW1lKHRoaXMsImZvcm0iKSlyZXR1cm4hMTt2LmV2ZW50LnJlbW92ZSh0aGlzLCIuX3N1Ym1pdCIpfX0pLHYuc3VwcG9ydC5jaGFuZ2VCdWJibGVzfHwodi5ldmVudC5zcGVjaWFsLmNoYW5nZT17c2V0dXA6ZnVuY3Rpb24oKXtpZigkLnRlc3QodGhpcy5ub2RlTmFtZSkpe2lmKHRoaXMudHlwZT09PSJjaGVja2JveCJ8fHRoaXMudHlwZT09PSJyYWRpbyIpdi5ldmVudC5hZGQodGhpcywicHJvcGVydHljaGFuZ2UuX2NoYW5nZSIsZnVuY3Rpb24oZSl7ZS5vcmlnaW5hbEV2ZW50LnByb3BlcnR5TmFtZT09PSJjaGVja2VkIiYmKHRoaXMuX2p1c3RfY2hhbmdlZD0hMCl9KSx2LmV2ZW50LmFkZCh0aGlzLCJjbGljay5fY2hhbmdlIixmdW5jdGlvbihlKXt0aGlzLl9qdXN0X2NoYW5nZWQmJiFlLmlzVHJpZ2dlciYmKHRoaXMuX2p1c3RfY2hhbmdlZD0hMSksdi5ldmVudC5zaW11bGF0ZSgiY2hhbmdlIix0aGlzLGUsITApfSk7cmV0dXJuITF9di5ldmVudC5hZGQodGhpcywiYmVmb3JlYWN0aXZhdGUuX2NoYW5nZSIsZnVuY3Rpb24oZSl7dmFyIHQ9ZS50YXJnZXQ7JC50ZXN0KHQubm9kZU5hbWUpJiYhdi5fZGF0YSh0LCJfY2hhbmdlX2F0dGFjaGVkIikmJih2LmV2ZW50LmFkZCh0LCJjaGFuZ2UuX2NoYW5nZSIsZnVuY3Rpb24oZSl7dGhpcy5wYXJlbnROb2RlJiYhZS5pc1NpbXVsYXRlZCYmIWUuaXNUcmlnZ2VyJiZ2LmV2ZW50LnNpbXVsYXRlKCJjaGFuZ2UiLHRoaXMucGFyZW50Tm9kZSxlLCEwKX0pLHYuX2RhdGEodCwiX2NoYW5nZV9hdHRhY2hlZCIsITApKX0pfSxoYW5kbGU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS50YXJnZXQ7aWYodGhpcyE9PXR8fGUuaXNTaW11bGF0ZWR8fGUuaXNUcmlnZ2VyfHx0LnR5cGUhPT0icmFkaW8iJiZ0LnR5cGUhPT0iY2hlY2tib3giKXJldHVybiBlLmhhbmRsZU9iai5oYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sdGVhcmRvd246ZnVuY3Rpb24oKXtyZXR1cm4gdi5ldmVudC5yZW1vdmUodGhpcywiLl9jaGFuZ2UiKSwhJC50ZXN0KHRoaXMubm9kZU5hbWUpfX0pLHYuc3VwcG9ydC5mb2N1c2luQnViYmxlc3x8di5lYWNoKHtmb2N1czoiZm9jdXNpbiIsYmx1cjoiZm9jdXNvdXQifSxmdW5jdGlvbihlLHQpe3ZhciBuPTAscj1mdW5jdGlvbihlKXt2LmV2ZW50LnNpbXVsYXRlKHQsZS50YXJnZXQsdi5ldmVudC5maXgoZSksITApfTt2LmV2ZW50LnNwZWNpYWxbdF09e3NldHVwOmZ1bmN0aW9uKCl7bisrPT09MCYmaS5hZGRFdmVudExpc3RlbmVyKGUsciwhMCl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7LS1uPT09MCYmaS5yZW1vdmVFdmVudExpc3RlbmVyKGUsciwhMCl9fX0pLHYuZm4uZXh0ZW5kKHtvbjpmdW5jdGlvbihlLG4scixpLHMpe3ZhciBvLHU7aWYodHlwZW9mIGU9PSJvYmplY3QiKXt0eXBlb2YgbiE9InN0cmluZyImJihyPXJ8fG4sbj10KTtmb3IodSBpbiBlKXRoaXMub24odSxuLHIsZVt1XSxzKTtyZXR1cm4gdGhpc31yPT1udWxsJiZpPT1udWxsPyhpPW4scj1uPXQpOmk9PW51bGwmJih0eXBlb2Ygbj09InN0cmluZyI/KGk9cixyPXQpOihpPXIscj1uLG49dCkpO2lmKGk9PT0hMSlpPWV0O2Vsc2UgaWYoIWkpcmV0dXJuIHRoaXM7cmV0dXJuIHM9PT0xJiYobz1pLGk9ZnVuY3Rpb24oZSl7cmV0dXJuIHYoKS5vZmYoZSksby5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGkuZ3VpZD1vLmd1aWR8fChvLmd1aWQ9di5ndWlkKyspKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2LmV2ZW50LmFkZCh0aGlzLGUsaSxyLG4pfSl9LG9uZTpmdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gdGhpcy5vbihlLHQsbixyLDEpfSxvZmY6ZnVuY3Rpb24oZSxuLHIpe3ZhciBpLHM7aWYoZSYmZS5wcmV2ZW50RGVmYXVsdCYmZS5oYW5kbGVPYmopcmV0dXJuIGk9ZS5oYW5kbGVPYmosdihlLmRlbGVnYXRlVGFyZ2V0KS5vZmYoaS5uYW1lc3BhY2U/aS5vcmlnVHlwZSsiLiIraS5uYW1lc3BhY2U6aS5vcmlnVHlwZSxpLnNlbGVjdG9yLGkuaGFuZGxlciksdGhpcztpZih0eXBlb2YgZT09Im9iamVjdCIpe2ZvcihzIGluIGUpdGhpcy5vZmYocyxuLGVbc10pO3JldHVybiB0aGlzfWlmKG49PT0hMXx8dHlwZW9mIG49PSJmdW5jdGlvbiIpcj1uLG49dDtyZXR1cm4gcj09PSExJiYocj1ldCksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7di5ldmVudC5yZW1vdmUodGhpcyxlLHIsbil9KX0sYmluZDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMub24oZSxudWxsLHQsbil9LHVuYmluZDpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLm9mZihlLG51bGwsdCl9LGxpdmU6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB2KHRoaXMuY29udGV4dCkub24oZSx0aGlzLnNlbGVjdG9yLHQsbiksdGhpc30sZGllOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHYodGhpcy5jb250ZXh0KS5vZmYoZSx0aGlzLnNlbGVjdG9yfHwiKioiLHQpLHRoaXN9LGRlbGVnYXRlOmZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiB0aGlzLm9uKHQsZSxuLHIpfSx1bmRlbGVnYXRlOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD09PTE/dGhpcy5vZmYoZSwiKioiKTp0aGlzLm9mZih0LGV8fCIqKiIsbil9LHRyaWdnZXI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7di5ldmVudC50cmlnZ2VyKGUsdCx0aGlzKX0pfSx0cmlnZ2VySGFuZGxlcjpmdW5jdGlvbihlLHQpe2lmKHRoaXNbMF0pcmV0dXJuIHYuZXZlbnQudHJpZ2dlcihlLHQsdGhpc1swXSwhMCl9LHRvZ2dsZTpmdW5jdGlvbihlKXt2YXIgdD1hcmd1bWVudHMsbj1lLmd1aWR8fHYuZ3VpZCsrLHI9MCxpPWZ1bmN0aW9uKG4pe3ZhciBpPSh2Ll9kYXRhKHRoaXMsImxhc3RUb2dnbGUiK2UuZ3VpZCl8fDApJXI7cmV0dXJuIHYuX2RhdGEodGhpcywibGFzdFRvZ2dsZSIrZS5ndWlkLGkrMSksbi5wcmV2ZW50RGVmYXVsdCgpLHRbaV0uYXBwbHkodGhpcyxhcmd1bWVudHMpfHwhMX07aS5ndWlkPW47d2hpbGUocjx0Lmxlbmd0aCl0W3IrK10uZ3VpZD1uO3JldHVybiB0aGlzLmNsaWNrKGkpfSxob3ZlcjpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLm1vdXNlZW50ZXIoZSkubW91c2VsZWF2ZSh0fHxlKX19KSx2LmVhY2goImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCBsb2FkIHJlc2l6ZSBzY3JvbGwgdW5sb2FkIGNsaWNrIGRibGNsaWNrIG1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2VlbnRlciBtb3VzZWxlYXZlIGNoYW5nZSBzZWxlY3Qgc3VibWl0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgZXJyb3IgY29udGV4dG1lbnUiLnNwbGl0KCIgIiksZnVuY3Rpb24oZSx0KXt2LmZuW3RdPWZ1bmN0aW9uKGUsbil7cmV0dXJuIG49PW51bGwmJihuPWUsZT1udWxsKSxhcmd1bWVudHMubGVuZ3RoPjA/dGhpcy5vbih0LG51bGwsZSxuKTp0aGlzLnRyaWdnZXIodCl9LFEudGVzdCh0KSYmKHYuZXZlbnQuZml4SG9va3NbdF09di5ldmVudC5rZXlIb29rcyksRy50ZXN0KHQpJiYodi5ldmVudC5maXhIb29rc1t0XT12LmV2ZW50Lm1vdXNlSG9va3MpfSksZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBudChlLHQsbixyKXtuPW58fFtdLHQ9dHx8Zzt2YXIgaSxzLGEsZixsPXQubm9kZVR5cGU7aWYoIWV8fHR5cGVvZiBlIT0ic3RyaW5nIilyZXR1cm4gbjtpZihsIT09MSYmbCE9PTkpcmV0dXJuW107YT1vKHQpO2lmKCFhJiYhcilpZihpPVIuZXhlYyhlKSlpZihmPWlbMV0pe2lmKGw9PT05KXtzPXQuZ2V0RWxlbWVudEJ5SWQoZik7aWYoIXN8fCFzLnBhcmVudE5vZGUpcmV0dXJuIG47aWYocy5pZD09PWYpcmV0dXJuIG4ucHVzaChzKSxufWVsc2UgaWYodC5vd25lckRvY3VtZW50JiYocz10Lm93bmVyRG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZikpJiZ1KHQscykmJnMuaWQ9PT1mKXJldHVybiBuLnB1c2gocyksbn1lbHNle2lmKGlbMl0pcmV0dXJuIFMuYXBwbHkobix4LmNhbGwodC5nZXRFbGVtZW50c0J5VGFnTmFtZShlKSwwKSksbjtpZigoZj1pWzNdKSYmWiYmdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKXJldHVybiBTLmFwcGx5KG4seC5jYWxsKHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShmKSwwKSksbn1yZXR1cm4gdnQoZS5yZXBsYWNlKGosIiQxIiksdCxuLHIsYSl9ZnVuY3Rpb24gcnQoZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3ZhciBuPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4gbj09PSJpbnB1dCImJnQudHlwZT09PWV9fWZ1bmN0aW9uIGl0KGUpe3JldHVybiBmdW5jdGlvbih0KXt2YXIgbj10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuKG49PT0iaW5wdXQifHxuPT09ImJ1dHRvbiIpJiZ0LnR5cGU9PT1lfX1mdW5jdGlvbiBzdChlKXtyZXR1cm4gTihmdW5jdGlvbih0KXtyZXR1cm4gdD0rdCxOKGZ1bmN0aW9uKG4scil7dmFyIGkscz1lKFtdLG4ubGVuZ3RoLHQpLG89cy5sZW5ndGg7d2hpbGUoby0tKW5baT1zW29dXSYmKG5baV09IShyW2ldPW5baV0pKX0pfSl9ZnVuY3Rpb24gb3QoZSx0LG4pe2lmKGU9PT10KXJldHVybiBuO3ZhciByPWUubmV4dFNpYmxpbmc7d2hpbGUocil7aWYocj09PXQpcmV0dXJuLTE7cj1yLm5leHRTaWJsaW5nfXJldHVybiAxfWZ1bmN0aW9uIHV0KGUsdCl7dmFyIG4scixzLG8sdSxhLGYsbD1MW2RdW2UrIiAiXTtpZihsKXJldHVybiB0PzA6bC5zbGljZSgwKTt1PWUsYT1bXSxmPWkucHJlRmlsdGVyO3doaWxlKHUpe2lmKCFufHwocj1GLmV4ZWModSkpKXImJih1PXUuc2xpY2UoclswXS5sZW5ndGgpfHx1KSxhLnB1c2gocz1bXSk7bj0hMTtpZihyPUkuZXhlYyh1KSlzLnB1c2gobj1uZXcgbShyLnNoaWZ0KCkpKSx1PXUuc2xpY2Uobi5sZW5ndGgpLG4udHlwZT1yWzBdLnJlcGxhY2UoaiwiICIpO2ZvcihvIGluIGkuZmlsdGVyKShyPUpbb10uZXhlYyh1KSkmJighZltvXXx8KHI9ZltvXShyKSkpJiYocy5wdXNoKG49bmV3IG0oci5zaGlmdCgpKSksdT11LnNsaWNlKG4ubGVuZ3RoKSxuLnR5cGU9byxuLm1hdGNoZXM9cik7aWYoIW4pYnJlYWt9cmV0dXJuIHQ/dS5sZW5ndGg6dT9udC5lcnJvcihlKTpMKGUsYSkuc2xpY2UoMCl9ZnVuY3Rpb24gYXQoZSx0LHIpe3ZhciBpPXQuZGlyLHM9ciYmdC5kaXI9PT0icGFyZW50Tm9kZSIsbz13Kys7cmV0dXJuIHQuZmlyc3Q/ZnVuY3Rpb24odCxuLHIpe3doaWxlKHQ9dFtpXSlpZihzfHx0Lm5vZGVUeXBlPT09MSlyZXR1cm4gZSh0LG4scil9OmZ1bmN0aW9uKHQscix1KXtpZighdSl7dmFyIGEsZj1iKyIgIitvKyIgIixsPWYrbjt3aGlsZSh0PXRbaV0paWYoc3x8dC5ub2RlVHlwZT09PTEpe2lmKChhPXRbZF0pPT09bClyZXR1cm4gdC5zaXpzZXQ7aWYodHlwZW9mIGE9PSJzdHJpbmciJiZhLmluZGV4T2YoZik9PT0wKXtpZih0LnNpenNldClyZXR1cm4gdH1lbHNle3RbZF09bDtpZihlKHQscix1KSlyZXR1cm4gdC5zaXpzZXQ9ITAsdDt0LnNpenNldD0hMX19fWVsc2Ugd2hpbGUodD10W2ldKWlmKHN8fHQubm9kZVR5cGU9PT0xKWlmKGUodCxyLHUpKXJldHVybiB0fX1mdW5jdGlvbiBmdChlKXtyZXR1cm4gZS5sZW5ndGg+MT9mdW5jdGlvbih0LG4scil7dmFyIGk9ZS5sZW5ndGg7d2hpbGUoaS0tKWlmKCFlW2ldKHQsbixyKSlyZXR1cm4hMTtyZXR1cm4hMH06ZVswXX1mdW5jdGlvbiBsdChlLHQsbixyLGkpe3ZhciBzLG89W10sdT0wLGE9ZS5sZW5ndGgsZj10IT1udWxsO2Zvcig7dTxhO3UrKylpZihzPWVbdV0paWYoIW58fG4ocyxyLGkpKW8ucHVzaChzKSxmJiZ0LnB1c2godSk7cmV0dXJuIG99ZnVuY3Rpb24gY3QoZSx0LG4scixpLHMpe3JldHVybiByJiYhcltkXSYmKHI9Y3QocikpLGkmJiFpW2RdJiYoaT1jdChpLHMpKSxOKGZ1bmN0aW9uKHMsbyx1LGEpe3ZhciBmLGwsYyxoPVtdLHA9W10sZD1vLmxlbmd0aCx2PXN8fGR0KHR8fCIqIix1Lm5vZGVUeXBlP1t1XTp1LFtdKSxtPWUmJihzfHwhdCk/bHQodixoLGUsdSxhKTp2LGc9bj9pfHwocz9lOmR8fHIpP1tdOm86bTtuJiZuKG0sZyx1LGEpO2lmKHIpe2Y9bHQoZyxwKSxyKGYsW10sdSxhKSxsPWYubGVuZ3RoO3doaWxlKGwtLSlpZihjPWZbbF0pZ1twW2xdXT0hKG1bcFtsXV09Yyl9aWYocyl7aWYoaXx8ZSl7aWYoaSl7Zj1bXSxsPWcubGVuZ3RoO3doaWxlKGwtLSkoYz1nW2xdKSYmZi5wdXNoKG1bbF09Yyk7aShudWxsLGc9W10sZixhKX1sPWcubGVuZ3RoO3doaWxlKGwtLSkoYz1nW2xdKSYmKGY9aT9ULmNhbGwocyxjKTpoW2xdKT4tMSYmKHNbZl09IShvW2ZdPWMpKX19ZWxzZSBnPWx0KGc9PT1vP2cuc3BsaWNlKGQsZy5sZW5ndGgpOmcpLGk/aShudWxsLG8sZyxhKTpTLmFwcGx5KG8sZyl9KX1mdW5jdGlvbiBodChlKXt2YXIgdCxuLHIscz1lLmxlbmd0aCxvPWkucmVsYXRpdmVbZVswXS50eXBlXSx1PW98fGkucmVsYXRpdmVbIiAiXSxhPW8/MTowLGY9YXQoZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10fSx1LCEwKSxsPWF0KGZ1bmN0aW9uKGUpe3JldHVybiBULmNhbGwodCxlKT4tMX0sdSwhMCksaD1bZnVuY3Rpb24oZSxuLHIpe3JldHVybiFvJiYocnx8biE9PWMpfHwoKHQ9bikubm9kZVR5cGU/ZihlLG4scik6bChlLG4scikpfV07Zm9yKDthPHM7YSsrKWlmKG49aS5yZWxhdGl2ZVtlW2FdLnR5cGVdKWg9W2F0KGZ0KGgpLG4pXTtlbHNle249aS5maWx0ZXJbZVthXS50eXBlXS5hcHBseShudWxsLGVbYV0ubWF0Y2hlcyk7aWYobltkXSl7cj0rK2E7Zm9yKDtyPHM7cisrKWlmKGkucmVsYXRpdmVbZVtyXS50eXBlXSlicmVhaztyZXR1cm4gY3QoYT4xJiZmdChoKSxhPjEmJmUuc2xpY2UoMCxhLTEpLmpvaW4oIiIpLnJlcGxhY2UoaiwiJDEiKSxuLGE8ciYmaHQoZS5zbGljZShhLHIpKSxyPHMmJmh0KGU9ZS5zbGljZShyKSkscjxzJiZlLmpvaW4oIiIpKX1oLnB1c2gobil9cmV0dXJuIGZ0KGgpfWZ1bmN0aW9uIHB0KGUsdCl7dmFyIHI9dC5sZW5ndGg+MCxzPWUubGVuZ3RoPjAsbz1mdW5jdGlvbih1LGEsZixsLGgpe3ZhciBwLGQsdixtPVtdLHk9MCx3PSIwIix4PXUmJltdLFQ9aCE9bnVsbCxOPWMsQz11fHxzJiZpLmZpbmQuVEFHKCIqIixoJiZhLnBhcmVudE5vZGV8fGEpLGs9Yis9Tj09bnVsbD8xOk1hdGguRTtUJiYoYz1hIT09ZyYmYSxuPW8uZWwpO2Zvcig7KHA9Q1t3XSkhPW51bGw7dysrKXtpZihzJiZwKXtmb3IoZD0wO3Y9ZVtkXTtkKyspaWYodihwLGEsZikpe2wucHVzaChwKTticmVha31UJiYoYj1rLG49KytvLmVsKX1yJiYoKHA9IXYmJnApJiZ5LS0sdSYmeC5wdXNoKHApKX15Kz13O2lmKHImJnchPT15KXtmb3IoZD0wO3Y9dFtkXTtkKyspdih4LG0sYSxmKTtpZih1KXtpZih5PjApd2hpbGUody0tKSF4W3ddJiYhbVt3XSYmKG1bd109RS5jYWxsKGwpKTttPWx0KG0pfVMuYXBwbHkobCxtKSxUJiYhdSYmbS5sZW5ndGg+MCYmeSt0Lmxlbmd0aD4xJiZudC51bmlxdWVTb3J0KGwpfXJldHVybiBUJiYoYj1rLGM9TikseH07cmV0dXJuIG8uZWw9MCxyP04obyk6b31mdW5jdGlvbiBkdChlLHQsbil7dmFyIHI9MCxpPXQubGVuZ3RoO2Zvcig7cjxpO3IrKyludChlLHRbcl0sbik7cmV0dXJuIG59ZnVuY3Rpb24gdnQoZSx0LG4scixzKXt2YXIgbyx1LGYsbCxjLGg9dXQoZSkscD1oLmxlbmd0aDtpZighciYmaC5sZW5ndGg9PT0xKXt1PWhbMF09aFswXS5zbGljZSgwKTtpZih1Lmxlbmd0aD4yJiYoZj11WzBdKS50eXBlPT09IklEIiYmdC5ub2RlVHlwZT09PTkmJiFzJiZpLnJlbGF0aXZlW3VbMV0udHlwZV0pe3Q9aS5maW5kLklEKGYubWF0Y2hlc1swXS5yZXBsYWNlKCQsIiIpLHQscylbMF07aWYoIXQpcmV0dXJuIG47ZT1lLnNsaWNlKHUuc2hpZnQoKS5sZW5ndGgpfWZvcihvPUouUE9TLnRlc3QoZSk/LTE6dS5sZW5ndGgtMTtvPj0wO28tLSl7Zj11W29dO2lmKGkucmVsYXRpdmVbbD1mLnR5cGVdKWJyZWFrO2lmKGM9aS5maW5kW2xdKWlmKHI9YyhmLm1hdGNoZXNbMF0ucmVwbGFjZSgkLCIiKSx6LnRlc3QodVswXS50eXBlKSYmdC5wYXJlbnROb2RlfHx0LHMpKXt1LnNwbGljZShvLDEpLGU9ci5sZW5ndGgmJnUuam9pbigiIik7aWYoIWUpcmV0dXJuIFMuYXBwbHkobix4LmNhbGwociwwKSksbjticmVha319fXJldHVybiBhKGUsaCkocix0LHMsbix6LnRlc3QoZSkpLG59ZnVuY3Rpb24gbXQoKXt9dmFyIG4scixpLHMsbyx1LGEsZixsLGMsaD0hMCxwPSJ1bmRlZmluZWQiLGQ9KCJzaXpjYWNoZSIrTWF0aC5yYW5kb20oKSkucmVwbGFjZSgiLiIsIiIpLG09U3RyaW5nLGc9ZS5kb2N1bWVudCx5PWcuZG9jdW1lbnRFbGVtZW50LGI9MCx3PTAsRT1bXS5wb3AsUz1bXS5wdXNoLHg9W10uc2xpY2UsVD1bXS5pbmRleE9mfHxmdW5jdGlvbihlKXt2YXIgdD0wLG49dGhpcy5sZW5ndGg7Zm9yKDt0PG47dCsrKWlmKHRoaXNbdF09PT1lKXJldHVybiB0O3JldHVybi0xfSxOPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGVbZF09dD09bnVsbHx8dCxlfSxDPWZ1bmN0aW9uKCl7dmFyIGU9e30sdD1bXTtyZXR1cm4gTihmdW5jdGlvbihuLHIpe3JldHVybiB0LnB1c2gobik+aS5jYWNoZUxlbmd0aCYmZGVsZXRlIGVbdC5zaGlmdCgpXSxlW24rIiAiXT1yfSxlKX0saz1DKCksTD1DKCksQT1DKCksTz0iW1xceDIwXFx0XFxyXFxuXFxmXSIsTT0iKD86XFxcXC58Wy1cXHddfFteXFx4MDAtXFx4YTBdKSsiLF89TS5yZXBsYWNlKCJ3IiwidyMiKSxEPSIoWypeJHwhfl0/PSkiLFA9IlxcWyIrTysiKigiK00rIikiK08rIiooPzoiK0QrTysiKig/OihbJ1wiXSkoKD86XFxcXC58W15cXFxcXSkqPylcXDN8KCIrXysiKXwpfCkiK08rIipcXF0iLEg9IjooIitNKyIpKD86XFwoKD86KFsnXCJdKSgoPzpcXFxcLnxbXlxcXFxdKSo/KVxcMnwoW14oKVtcXF1dKnwoPzooPzoiK1ArIil8W146XXxcXFxcLikqfC4qKSlcXCl8KSIsQj0iOihldmVufG9kZHxlcXxndHxsdHxudGh8Zmlyc3R8bGFzdCkoPzpcXCgiK08rIiooKD86LVxcZCk/XFxkKikiK08rIipcXCl8KSg/PVteLV18JCkiLGo9bmV3IFJlZ0V4cCgiXiIrTysiK3woKD86XnxbXlxcXFxdKSg/OlxcXFwuKSopIitPKyIrJCIsImciKSxGPW5ldyBSZWdFeHAoIl4iK08rIiosIitPKyIqIiksST1uZXcgUmVnRXhwKCJeIitPKyIqKFtcXHgyMFxcdFxcclxcblxcZj4rfl0pIitPKyIqIikscT1uZXcgUmVnRXhwKEgpLFI9L14oPzojKFtcd1wtXSspfChcdyspfFwuKFtcd1wtXSspKSQvLFU9L146bm90Lyx6PS9bXHgyMFx0XHJcblxmXSpbK35dLyxXPS86bm90XCgkLyxYPS9oXGQvaSxWPS9pbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uL2ksJD0vXFwoPyFcXCkvZyxKPXtJRDpuZXcgUmVnRXhwKCJeIygiK00rIikiKSxDTEFTUzpuZXcgUmVnRXhwKCJeXFwuKCIrTSsiKSIpLE5BTUU6bmV3IFJlZ0V4cCgiXlxcW25hbWU9WydcIl0/KCIrTSsiKVsnXCJdP1xcXSIpLFRBRzpuZXcgUmVnRXhwKCJeKCIrTS5yZXBsYWNlKCJ3IiwidyoiKSsiKSIpLEFUVFI6bmV3IFJlZ0V4cCgiXiIrUCksUFNFVURPOm5ldyBSZWdFeHAoIl4iK0gpLFBPUzpuZXcgUmVnRXhwKEIsImkiKSxDSElMRDpuZXcgUmVnRXhwKCJeOihvbmx5fG50aHxmaXJzdHxsYXN0KS1jaGlsZCg/OlxcKCIrTysiKihldmVufG9kZHwoKFsrLV18KShcXGQqKW58KSIrTysiKig/OihbKy1dfCkiK08rIiooXFxkKyl8KSkiK08rIipcXCl8KSIsImkiKSxuZWVkc0NvbnRleHQ6bmV3IFJlZ0V4cCgiXiIrTysiKls+K35dfCIrQiwiaSIpfSxLPWZ1bmN0aW9uKGUpe3ZhciB0PWcuY3JlYXRlRWxlbWVudCgiZGl2Iik7dHJ5e3JldHVybiBlKHQpfWNhdGNoKG4pe3JldHVybiExfWZpbmFsbHl7dD1udWxsfX0sUT1LKGZ1bmN0aW9uKGUpe3JldHVybiBlLmFwcGVuZENoaWxkKGcuY3JlYXRlQ29tbWVudCgiIikpLCFlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikubGVuZ3RofSksRz1LKGZ1bmN0aW9uKGUpe3JldHVybiBlLmlubmVySFRNTD0iPGEgaHJlZj0nIyc+PC9hPiIsZS5maXJzdENoaWxkJiZ0eXBlb2YgZS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSE9PXAmJmUuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoImhyZWYiKT09PSIjIn0pLFk9SyhmdW5jdGlvbihlKXtlLmlubmVySFRNTD0iPHNlbGVjdD48L3NlbGVjdD4iO3ZhciB0PXR5cGVvZiBlLmxhc3RDaGlsZC5nZXRBdHRyaWJ1dGUoIm11bHRpcGxlIik7cmV0dXJuIHQhPT0iYm9vbGVhbiImJnQhPT0ic3RyaW5nIn0pLFo9SyhmdW5jdGlvbihlKXtyZXR1cm4gZS5pbm5lckhUTUw9IjxkaXYgY2xhc3M9J2hpZGRlbiBlJz48L2Rpdj48ZGl2IGNsYXNzPSdoaWRkZW4nPjwvZGl2PiIsIWUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZXx8IWUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiZSIpLmxlbmd0aD8hMTooZS5sYXN0Q2hpbGQuY2xhc3NOYW1lPSJlIixlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImUiKS5sZW5ndGg9PT0yKX0pLGV0PUsoZnVuY3Rpb24oZSl7ZS5pZD1kKzAsZS5pbm5lckhUTUw9IjxhIG5hbWU9JyIrZCsiJz48L2E+PGRpdiBuYW1lPSciK2QrIic+PC9kaXY+Iix5Lmluc2VydEJlZm9yZShlLHkuZmlyc3RDaGlsZCk7dmFyIHQ9Zy5nZXRFbGVtZW50c0J5TmFtZSYmZy5nZXRFbGVtZW50c0J5TmFtZShkKS5sZW5ndGg9PT0yK2cuZ2V0RWxlbWVudHNCeU5hbWUoZCswKS5sZW5ndGg7cmV0dXJuIHI9IWcuZ2V0RWxlbWVudEJ5SWQoZCkseS5yZW1vdmVDaGlsZChlKSx0fSk7dHJ5e3guY2FsbCh5LmNoaWxkTm9kZXMsMClbMF0ubm9kZVR5cGV9Y2F0Y2godHQpe3g9ZnVuY3Rpb24oZSl7dmFyIHQsbj1bXTtmb3IoO3Q9dGhpc1tlXTtlKyspbi5wdXNoKHQpO3JldHVybiBufX1udC5tYXRjaGVzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG50KGUsbnVsbCxudWxsLHQpfSxudC5tYXRjaGVzU2VsZWN0b3I9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbnQodCxudWxsLG51bGwsW2VdKS5sZW5ndGg+MH0scz1udC5nZXRUZXh0PWZ1bmN0aW9uKGUpe3ZhciB0LG49IiIscj0wLGk9ZS5ub2RlVHlwZTtpZihpKXtpZihpPT09MXx8aT09PTl8fGk9PT0xMSl7aWYodHlwZW9mIGUudGV4dENvbnRlbnQ9PSJzdHJpbmciKXJldHVybiBlLnRleHRDb250ZW50O2ZvcihlPWUuZmlyc3RDaGlsZDtlO2U9ZS5uZXh0U2libGluZyluKz1zKGUpfWVsc2UgaWYoaT09PTN8fGk9PT00KXJldHVybiBlLm5vZGVWYWx1ZX1lbHNlIGZvcig7dD1lW3JdO3IrKyluKz1zKHQpO3JldHVybiBufSxvPW50LmlzWE1MPWZ1bmN0aW9uKGUpe3ZhciB0PWUmJihlLm93bmVyRG9jdW1lbnR8fGUpLmRvY3VtZW50RWxlbWVudDtyZXR1cm4gdD90Lm5vZGVOYW1lIT09IkhUTUwiOiExfSx1PW50LmNvbnRhaW5zPXkuY29udGFpbnM/ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLm5vZGVUeXBlPT09OT9lLmRvY3VtZW50RWxlbWVudDplLHI9dCYmdC5wYXJlbnROb2RlO3JldHVybiBlPT09cnx8ISEociYmci5ub2RlVHlwZT09PTEmJm4uY29udGFpbnMmJm4uY29udGFpbnMocikpfTp5LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uP2Z1bmN0aW9uKGUsdCl7cmV0dXJuIHQmJiEhKGUuY29tcGFyZURvY3VtZW50UG9zaXRpb24odCkmMTYpfTpmdW5jdGlvbihlLHQpe3doaWxlKHQ9dC5wYXJlbnROb2RlKWlmKHQ9PT1lKXJldHVybiEwO3JldHVybiExfSxudC5hdHRyPWZ1bmN0aW9uKGUsdCl7dmFyIG4scj1vKGUpO3JldHVybiByfHwodD10LnRvTG93ZXJDYXNlKCkpLChuPWkuYXR0ckhhbmRsZVt0XSk/bihlKTpyfHxZP2UuZ2V0QXR0cmlidXRlKHQpOihuPWUuZ2V0QXR0cmlidXRlTm9kZSh0KSxuP3R5cGVvZiBlW3RdPT0iYm9vbGVhbiI/ZVt0XT90Om51bGw6bi5zcGVjaWZpZWQ/bi52YWx1ZTpudWxsOm51bGwpfSxpPW50LnNlbGVjdG9ycz17Y2FjaGVMZW5ndGg6NTAsY3JlYXRlUHNldWRvOk4sbWF0Y2g6SixhdHRySGFuZGxlOkc/e306e2hyZWY6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0QXR0cmlidXRlKCJocmVmIiwyKX0sdHlwZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5nZXRBdHRyaWJ1dGUoInR5cGUiKX19LGZpbmQ6e0lEOnI/ZnVuY3Rpb24oZSx0LG4pe2lmKHR5cGVvZiB0LmdldEVsZW1lbnRCeUlkIT09cCYmIW4pe3ZhciByPXQuZ2V0RWxlbWVudEJ5SWQoZSk7cmV0dXJuIHImJnIucGFyZW50Tm9kZT9bcl06W119fTpmdW5jdGlvbihlLG4scil7aWYodHlwZW9mIG4uZ2V0RWxlbWVudEJ5SWQhPT1wJiYhcil7dmFyIGk9bi5nZXRFbGVtZW50QnlJZChlKTtyZXR1cm4gaT9pLmlkPT09ZXx8dHlwZW9mIGkuZ2V0QXR0cmlidXRlTm9kZSE9PXAmJmkuZ2V0QXR0cmlidXRlTm9kZSgiaWQiKS52YWx1ZT09PWU/W2ldOnQ6W119fSxUQUc6UT9mdW5jdGlvbihlLHQpe2lmKHR5cGVvZiB0LmdldEVsZW1lbnRzQnlUYWdOYW1lIT09cClyZXR1cm4gdC5nZXRFbGVtZW50c0J5VGFnTmFtZShlKX06ZnVuY3Rpb24oZSx0KXt2YXIgbj10LmdldEVsZW1lbnRzQnlUYWdOYW1lKGUpO2lmKGU9PT0iKiIpe3ZhciByLGk9W10scz0wO2Zvcig7cj1uW3NdO3MrKylyLm5vZGVUeXBlPT09MSYmaS5wdXNoKHIpO3JldHVybiBpfXJldHVybiBufSxOQU1FOmV0JiZmdW5jdGlvbihlLHQpe2lmKHR5cGVvZiB0LmdldEVsZW1lbnRzQnlOYW1lIT09cClyZXR1cm4gdC5nZXRFbGVtZW50c0J5TmFtZShuYW1lKX0sQ0xBU1M6WiYmZnVuY3Rpb24oZSx0LG4pe2lmKHR5cGVvZiB0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUhPT1wJiYhbilyZXR1cm4gdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGUpfX0scmVsYXRpdmU6eyI+Ijp7ZGlyOiJwYXJlbnROb2RlIixmaXJzdDohMH0sIiAiOntkaXI6InBhcmVudE5vZGUifSwiKyI6e2RpcjoicHJldmlvdXNTaWJsaW5nIixmaXJzdDohMH0sIn4iOntkaXI6InByZXZpb3VzU2libGluZyJ9fSxwcmVGaWx0ZXI6e0FUVFI6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbMV09ZVsxXS5yZXBsYWNlKCQsIiIpLGVbM109KGVbNF18fGVbNV18fCIiKS5yZXBsYWNlKCQsIiIpLGVbMl09PT0ifj0iJiYoZVszXT0iICIrZVszXSsiICIpLGUuc2xpY2UoMCw0KX0sQ0hJTEQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbMV09ZVsxXS50b0xvd2VyQ2FzZSgpLGVbMV09PT0ibnRoIj8oZVsyXXx8bnQuZXJyb3IoZVswXSksZVszXT0rKGVbM10/ZVs0XSsoZVs1XXx8MSk6MiooZVsyXT09PSJldmVuInx8ZVsyXT09PSJvZGQiKSksZVs0XT0rKGVbNl0rZVs3XXx8ZVsyXT09PSJvZGQiKSk6ZVsyXSYmbnQuZXJyb3IoZVswXSksZX0sUFNFVURPOmZ1bmN0aW9uKGUpe3ZhciB0LG47aWYoSi5DSElMRC50ZXN0KGVbMF0pKXJldHVybiBudWxsO2lmKGVbM10pZVsyXT1lWzNdO2Vsc2UgaWYodD1lWzRdKXEudGVzdCh0KSYmKG49dXQodCwhMCkpJiYobj10LmluZGV4T2YoIikiLHQubGVuZ3RoLW4pLXQubGVuZ3RoKSYmKHQ9dC5zbGljZSgwLG4pLGVbMF09ZVswXS5zbGljZSgwLG4pKSxlWzJdPXQ7cmV0dXJuIGUuc2xpY2UoMCwzKX19LGZpbHRlcjp7SUQ6cj9mdW5jdGlvbihlKXtyZXR1cm4gZT1lLnJlcGxhY2UoJCwiIiksZnVuY3Rpb24odCl7cmV0dXJuIHQuZ2V0QXR0cmlidXRlKCJpZCIpPT09ZX19OmZ1bmN0aW9uKGUpe3JldHVybiBlPWUucmVwbGFjZSgkLCIiKSxmdW5jdGlvbih0KXt2YXIgbj10eXBlb2YgdC5nZXRBdHRyaWJ1dGVOb2RlIT09cCYmdC5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpO3JldHVybiBuJiZuLnZhbHVlPT09ZX19LFRBRzpmdW5jdGlvbihlKXtyZXR1cm4gZT09PSIqIj9mdW5jdGlvbigpe3JldHVybiEwfTooZT1lLnJlcGxhY2UoJCwiIikudG9Mb3dlckNhc2UoKSxmdW5jdGlvbih0KXtyZXR1cm4gdC5ub2RlTmFtZSYmdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09ZX0pfSxDTEFTUzpmdW5jdGlvbihlKXt2YXIgdD1rW2RdW2UrIiAiXTtyZXR1cm4gdHx8KHQ9bmV3IFJlZ0V4cCgiKF58IitPKyIpIitlKyIoIitPKyJ8JCkiKSkmJmsoZSxmdW5jdGlvbihlKXtyZXR1cm4gdC50ZXN0KGUuY2xhc3NOYW1lfHx0eXBlb2YgZS5nZXRBdHRyaWJ1dGUhPT1wJiZlLmdldEF0dHJpYnV0ZSgiY2xhc3MiKXx8IiIpfSl9LEFUVFI6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBmdW5jdGlvbihyLGkpe3ZhciBzPW50LmF0dHIocixlKTtyZXR1cm4gcz09bnVsbD90PT09IiE9Ijp0PyhzKz0iIix0PT09Ij0iP3M9PT1uOnQ9PT0iIT0iP3MhPT1uOnQ9PT0iXj0iP24mJnMuaW5kZXhPZihuKT09PTA6dD09PSIqPSI/biYmcy5pbmRleE9mKG4pPi0xOnQ9PT0iJD0iP24mJnMuc3Vic3RyKHMubGVuZ3RoLW4ubGVuZ3RoKT09PW46dD09PSJ+PSI/KCIgIitzKyIgIikuaW5kZXhPZihuKT4tMTp0PT09Inw9Ij9zPT09bnx8cy5zdWJzdHIoMCxuLmxlbmd0aCsxKT09PW4rIi0iOiExKTohMH19LENISUxEOmZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiBlPT09Im50aCI/ZnVuY3Rpb24oZSl7dmFyIHQsaSxzPWUucGFyZW50Tm9kZTtpZihuPT09MSYmcj09PTApcmV0dXJuITA7aWYocyl7aT0wO2Zvcih0PXMuZmlyc3RDaGlsZDt0O3Q9dC5uZXh0U2libGluZylpZih0Lm5vZGVUeXBlPT09MSl7aSsrO2lmKGU9PT10KWJyZWFrfX1yZXR1cm4gaS09cixpPT09bnx8aSVuPT09MCYmaS9uPj0wfTpmdW5jdGlvbih0KXt2YXIgbj10O3N3aXRjaChlKXtjYXNlIm9ubHkiOmNhc2UiZmlyc3QiOndoaWxlKG49bi5wcmV2aW91c1NpYmxpbmcpaWYobi5ub2RlVHlwZT09PTEpcmV0dXJuITE7aWYoZT09PSJmaXJzdCIpcmV0dXJuITA7bj10O2Nhc2UibGFzdCI6d2hpbGUobj1uLm5leHRTaWJsaW5nKWlmKG4ubm9kZVR5cGU9PT0xKXJldHVybiExO3JldHVybiEwfX19LFBTRVVETzpmdW5jdGlvbihlLHQpe3ZhciBuLHI9aS5wc2V1ZG9zW2VdfHxpLnNldEZpbHRlcnNbZS50b0xvd2VyQ2FzZSgpXXx8bnQuZXJyb3IoInVuc3VwcG9ydGVkIHBzZXVkbzogIitlKTtyZXR1cm4gcltkXT9yKHQpOnIubGVuZ3RoPjE/KG49W2UsZSwiIix0XSxpLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoZS50b0xvd2VyQ2FzZSgpKT9OKGZ1bmN0aW9uKGUsbil7dmFyIGkscz1yKGUsdCksbz1zLmxlbmd0aDt3aGlsZShvLS0paT1ULmNhbGwoZSxzW29dKSxlW2ldPSEobltpXT1zW29dKX0pOmZ1bmN0aW9uKGUpe3JldHVybiByKGUsMCxuKX0pOnJ9fSxwc2V1ZG9zOntub3Q6TihmdW5jdGlvbihlKXt2YXIgdD1bXSxuPVtdLHI9YShlLnJlcGxhY2UoaiwiJDEiKSk7cmV0dXJuIHJbZF0/TihmdW5jdGlvbihlLHQsbixpKXt2YXIgcyxvPXIoZSxudWxsLGksW10pLHU9ZS5sZW5ndGg7d2hpbGUodS0tKWlmKHM9b1t1XSllW3VdPSEodFt1XT1zKX0pOmZ1bmN0aW9uKGUsaSxzKXtyZXR1cm4gdFswXT1lLHIodCxudWxsLHMsbiksIW4ucG9wKCl9fSksaGFzOk4oZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBudChlLHQpLmxlbmd0aD4wfX0pLGNvbnRhaW5zOk4oZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybih0LnRleHRDb250ZW50fHx0LmlubmVyVGV4dHx8cyh0KSkuaW5kZXhPZihlKT4tMX19KSxlbmFibGVkOmZ1bmN0aW9uKGUpe3JldHVybiBlLmRpc2FibGVkPT09ITF9LGRpc2FibGVkOmZ1bmN0aW9uKGUpe3JldHVybiBlLmRpc2FibGVkPT09ITB9LGNoZWNrZWQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiB0PT09ImlucHV0IiYmISFlLmNoZWNrZWR8fHQ9PT0ib3B0aW9uIiYmISFlLnNlbGVjdGVkfSxzZWxlY3RlZDpmdW5jdGlvbihlKXtyZXR1cm4gZS5wYXJlbnROb2RlJiZlLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxlLnNlbGVjdGVkPT09ITB9LHBhcmVudDpmdW5jdGlvbihlKXtyZXR1cm4haS5wc2V1ZG9zLmVtcHR5KGUpfSxlbXB0eTpmdW5jdGlvbihlKXt2YXIgdDtlPWUuZmlyc3RDaGlsZDt3aGlsZShlKXtpZihlLm5vZGVOYW1lPiJAInx8KHQ9ZS5ub2RlVHlwZSk9PT0zfHx0PT09NClyZXR1cm4hMTtlPWUubmV4dFNpYmxpbmd9cmV0dXJuITB9LGhlYWRlcjpmdW5jdGlvbihlKXtyZXR1cm4gWC50ZXN0KGUubm9kZU5hbWUpfSx0ZXh0OmZ1bmN0aW9uKGUpe3ZhciB0LG47cmV0dXJuIGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PSJpbnB1dCImJih0PWUudHlwZSk9PT0idGV4dCImJigobj1lLmdldEF0dHJpYnV0ZSgidHlwZSIpKT09bnVsbHx8bi50b0xvd2VyQ2FzZSgpPT09dCl9LHJhZGlvOnJ0KCJyYWRpbyIpLGNoZWNrYm94OnJ0KCJjaGVja2JveCIpLGZpbGU6cnQoImZpbGUiKSxwYXNzd29yZDpydCgicGFzc3dvcmQiKSxpbWFnZTpydCgiaW1hZ2UiKSxzdWJtaXQ6aXQoInN1Ym1pdCIpLHJlc2V0Oml0KCJyZXNldCIpLGJ1dHRvbjpmdW5jdGlvbihlKXt2YXIgdD1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuIHQ9PT0iaW5wdXQiJiZlLnR5cGU9PT0iYnV0dG9uInx8dD09PSJidXR0b24ifSxpbnB1dDpmdW5jdGlvbihlKXtyZXR1cm4gVi50ZXN0KGUubm9kZU5hbWUpfSxmb2N1czpmdW5jdGlvbihlKXt2YXIgdD1lLm93bmVyRG9jdW1lbnQ7cmV0dXJuIGU9PT10LmFjdGl2ZUVsZW1lbnQmJighdC5oYXNGb2N1c3x8dC5oYXNGb2N1cygpKSYmISEoZS50eXBlfHxlLmhyZWZ8fH5lLnRhYkluZGV4KX0sYWN0aXZlOmZ1bmN0aW9uKGUpe3JldHVybiBlPT09ZS5vd25lckRvY3VtZW50LmFjdGl2ZUVsZW1lbnR9LGZpcnN0OnN0KGZ1bmN0aW9uKCl7cmV0dXJuWzBdfSksbGFzdDpzdChmdW5jdGlvbihlLHQpe3JldHVyblt0LTFdfSksZXE6c3QoZnVuY3Rpb24oZSx0LG4pe3JldHVybltuPDA/bit0Om5dfSksZXZlbjpzdChmdW5jdGlvbihlLHQpe2Zvcih2YXIgbj0wO248dDtuKz0yKWUucHVzaChuKTtyZXR1cm4gZX0pLG9kZDpzdChmdW5jdGlvbihlLHQpe2Zvcih2YXIgbj0xO248dDtuKz0yKWUucHVzaChuKTtyZXR1cm4gZX0pLGx0OnN0KGZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9bjwwP24rdDpuOy0tcj49MDspZS5wdXNoKHIpO3JldHVybiBlfSksZ3Q6c3QoZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgcj1uPDA/bit0Om47KytyPHQ7KWUucHVzaChyKTtyZXR1cm4gZX0pfX0sZj15LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uP2Z1bmN0aW9uKGUsdCl7cmV0dXJuIGU9PT10PyhsPSEwLDApOighZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbnx8IXQuY29tcGFyZURvY3VtZW50UG9zaXRpb24/ZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjplLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHQpJjQpPy0xOjF9OmZ1bmN0aW9uKGUsdCl7aWYoZT09PXQpcmV0dXJuIGw9ITAsMDtpZihlLnNvdXJjZUluZGV4JiZ0LnNvdXJjZUluZGV4KXJldHVybiBlLnNvdXJjZUluZGV4LXQuc291cmNlSW5kZXg7dmFyIG4scixpPVtdLHM9W10sbz1lLnBhcmVudE5vZGUsdT10LnBhcmVudE5vZGUsYT1vO2lmKG89PT11KXJldHVybiBvdChlLHQpO2lmKCFvKXJldHVybi0xO2lmKCF1KXJldHVybiAxO3doaWxlKGEpaS51bnNoaWZ0KGEpLGE9YS5wYXJlbnROb2RlO2E9dTt3aGlsZShhKXMudW5zaGlmdChhKSxhPWEucGFyZW50Tm9kZTtuPWkubGVuZ3RoLHI9cy5sZW5ndGg7Zm9yKHZhciBmPTA7ZjxuJiZmPHI7ZisrKWlmKGlbZl0hPT1zW2ZdKXJldHVybiBvdChpW2ZdLHNbZl0pO3JldHVybiBmPT09bj9vdChlLHNbZl0sLTEpOm90KGlbZl0sdCwxKX0sWzAsMF0uc29ydChmKSxoPSFsLG50LnVuaXF1ZVNvcnQ9ZnVuY3Rpb24oZSl7dmFyIHQsbj1bXSxyPTEsaT0wO2w9aCxlLnNvcnQoZik7aWYobCl7Zm9yKDt0PWVbcl07cisrKXQ9PT1lW3ItMV0mJihpPW4ucHVzaChyKSk7d2hpbGUoaS0tKWUuc3BsaWNlKG5baV0sMSl9cmV0dXJuIGV9LG50LmVycm9yPWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcigiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogIitlKX0sYT1udC5jb21waWxlPWZ1bmN0aW9uKGUsdCl7dmFyIG4scj1bXSxpPVtdLHM9QVtkXVtlKyIgIl07aWYoIXMpe3R8fCh0PXV0KGUpKSxuPXQubGVuZ3RoO3doaWxlKG4tLSlzPWh0KHRbbl0pLHNbZF0/ci5wdXNoKHMpOmkucHVzaChzKTtzPUEoZSxwdChpLHIpKX1yZXR1cm4gc30sZy5xdWVyeVNlbGVjdG9yQWxsJiZmdW5jdGlvbigpe3ZhciBlLHQ9dnQsbj0vJ3xcXC9nLHI9L1w9W1x4MjBcdFxyXG5cZl0qKFteJyJcXV0qKVtceDIwXHRcclxuXGZdKlxdL2csaT1bIjpmb2N1cyJdLHM9WyI6YWN0aXZlIl0sdT15Lm1hdGNoZXNTZWxlY3Rvcnx8eS5tb3pNYXRjaGVzU2VsZWN0b3J8fHkud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHx5Lm9NYXRjaGVzU2VsZWN0b3J8fHkubXNNYXRjaGVzU2VsZWN0b3I7SyhmdW5jdGlvbihlKXtlLmlubmVySFRNTD0iPHNlbGVjdD48b3B0aW9uIHNlbGVjdGVkPScnPjwvb3B0aW9uPjwvc2VsZWN0PiIsZS5xdWVyeVNlbGVjdG9yQWxsKCJbc2VsZWN0ZWRdIikubGVuZ3RofHxpLnB1c2goIlxcWyIrTysiKig/OmNoZWNrZWR8ZGlzYWJsZWR8aXNtYXB8bXVsdGlwbGV8cmVhZG9ubHl8c2VsZWN0ZWR8dmFsdWUpIiksZS5xdWVyeVNlbGVjdG9yQWxsKCI6Y2hlY2tlZCIpLmxlbmd0aHx8aS5wdXNoKCI6Y2hlY2tlZCIpfSksSyhmdW5jdGlvbihlKXtlLmlubmVySFRNTD0iPHAgdGVzdD0nJz48L3A+IixlLnF1ZXJ5U2VsZWN0b3JBbGwoIlt0ZXN0Xj0nJ10iKS5sZW5ndGgmJmkucHVzaCgiWypeJF09IitPKyIqKD86XCJcInwnJykiKSxlLmlubmVySFRNTD0iPGlucHV0IHR5cGU9J2hpZGRlbicvPiIsZS5xdWVyeVNlbGVjdG9yQWxsKCI6ZW5hYmxlZCIpLmxlbmd0aHx8aS5wdXNoKCI6ZW5hYmxlZCIsIjpkaXNhYmxlZCIpfSksaT1uZXcgUmVnRXhwKGkuam9pbigifCIpKSx2dD1mdW5jdGlvbihlLHIscyxvLHUpe2lmKCFvJiYhdSYmIWkudGVzdChlKSl7dmFyIGEsZixsPSEwLGM9ZCxoPXIscD1yLm5vZGVUeXBlPT09OSYmZTtpZihyLm5vZGVUeXBlPT09MSYmci5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIT09Im9iamVjdCIpe2E9dXQoZSksKGw9ci5nZXRBdHRyaWJ1dGUoImlkIikpP2M9bC5yZXBsYWNlKG4sIlxcJCYiKTpyLnNldEF0dHJpYnV0ZSgiaWQiLGMpLGM9IltpZD0nIitjKyInXSAiLGY9YS5sZW5ndGg7d2hpbGUoZi0tKWFbZl09YythW2ZdLmpvaW4oIiIpO2g9ei50ZXN0KGUpJiZyLnBhcmVudE5vZGV8fHIscD1hLmpvaW4oIiwiKX1pZihwKXRyeXtyZXR1cm4gUy5hcHBseShzLHguY2FsbChoLnF1ZXJ5U2VsZWN0b3JBbGwocCksMCkpLHN9Y2F0Y2godil7fWZpbmFsbHl7bHx8ci5yZW1vdmVBdHRyaWJ1dGUoImlkIil9fXJldHVybiB0KGUscixzLG8sdSl9LHUmJihLKGZ1bmN0aW9uKHQpe2U9dS5jYWxsKHQsImRpdiIpO3RyeXt1LmNhbGwodCwiW3Rlc3QhPScnXTpzaXp6bGUiKSxzLnB1c2goIiE9IixIKX1jYXRjaChuKXt9fSkscz1uZXcgUmVnRXhwKHMuam9pbigifCIpKSxudC5tYXRjaGVzU2VsZWN0b3I9ZnVuY3Rpb24odCxuKXtuPW4ucmVwbGFjZShyLCI9JyQxJ10iKTtpZighbyh0KSYmIXMudGVzdChuKSYmIWkudGVzdChuKSl0cnl7dmFyIGE9dS5jYWxsKHQsbik7aWYoYXx8ZXx8dC5kb2N1bWVudCYmdC5kb2N1bWVudC5ub2RlVHlwZSE9PTExKXJldHVybiBhfWNhdGNoKGYpe31yZXR1cm4gbnQobixudWxsLG51bGwsW3RdKS5sZW5ndGg+MH0pfSgpLGkucHNldWRvcy5udGg9aS5wc2V1ZG9zLmVxLGkuZmlsdGVycz1tdC5wcm90b3R5cGU9aS5wc2V1ZG9zLGkuc2V0RmlsdGVycz1uZXcgbXQsbnQuYXR0cj12LmF0dHIsdi5maW5kPW50LHYuZXhwcj1udC5zZWxlY3RvcnMsdi5leHByWyI6Il09di5leHByLnBzZXVkb3Msdi51bmlxdWU9bnQudW5pcXVlU29ydCx2LnRleHQ9bnQuZ2V0VGV4dCx2LmlzWE1MRG9jPW50LmlzWE1MLHYuY29udGFpbnM9bnQuY29udGFpbnN9KGUpO3ZhciBudD0vVW50aWwkLyxydD0vXig/OnBhcmVudHN8cHJldig/OlVudGlsfEFsbCkpLyxpdD0vXi5bXjojXFtcLixdKiQvLHN0PXYuZXhwci5tYXRjaC5uZWVkc0NvbnRleHQsb3Q9e2NoaWxkcmVuOiEwLGNvbnRlbnRzOiEwLG5leHQ6ITAscHJldjohMH07di5mbi5leHRlbmQoe2ZpbmQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixyLGkscyxvLHU9dGhpcztpZih0eXBlb2YgZSE9InN0cmluZyIpcmV0dXJuIHYoZSkuZmlsdGVyKGZ1bmN0aW9uKCl7Zm9yKHQ9MCxuPXUubGVuZ3RoO3Q8bjt0KyspaWYodi5jb250YWlucyh1W3RdLHRoaXMpKXJldHVybiEwfSk7bz10aGlzLnB1c2hTdGFjaygiIiwiZmluZCIsZSk7Zm9yKHQ9MCxuPXRoaXMubGVuZ3RoO3Q8bjt0Kyspe3I9by5sZW5ndGgsdi5maW5kKGUsdGhpc1t0XSxvKTtpZih0PjApZm9yKGk9cjtpPG8ubGVuZ3RoO2krKylmb3Iocz0wO3M8cjtzKyspaWYob1tzXT09PW9baV0pe28uc3BsaWNlKGktLSwxKTticmVha319cmV0dXJuIG99LGhhczpmdW5jdGlvbihlKXt2YXIgdCxuPXYoZSx0aGlzKSxyPW4ubGVuZ3RoO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe2Zvcih0PTA7dDxyO3QrKylpZih2LmNvbnRhaW5zKHRoaXMsblt0XSkpcmV0dXJuITB9KX0sbm90OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayhmdCh0aGlzLGUsITEpLCJub3QiLGUpfSxmaWx0ZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGZ0KHRoaXMsZSwhMCksImZpbHRlciIsZSl9LGlzOmZ1bmN0aW9uKGUpe3JldHVybiEhZSYmKHR5cGVvZiBlPT0ic3RyaW5nIj9zdC50ZXN0KGUpP3YoZSx0aGlzLmNvbnRleHQpLmluZGV4KHRoaXNbMF0pPj0wOnYuZmlsdGVyKGUsdGhpcykubGVuZ3RoPjA6dGhpcy5maWx0ZXIoZSkubGVuZ3RoPjApfSxjbG9zZXN0OmZ1bmN0aW9uKGUsdCl7dmFyIG4scj0wLGk9dGhpcy5sZW5ndGgscz1bXSxvPXN0LnRlc3QoZSl8fHR5cGVvZiBlIT0ic3RyaW5nIj92KGUsdHx8dGhpcy5jb250ZXh0KTowO2Zvcig7cjxpO3IrKyl7bj10aGlzW3JdO3doaWxlKG4mJm4ub3duZXJEb2N1bWVudCYmbiE9PXQmJm4ubm9kZVR5cGUhPT0xMSl7aWYobz9vLmluZGV4KG4pPi0xOnYuZmluZC5tYXRjaGVzU2VsZWN0b3IobixlKSl7cy5wdXNoKG4pO2JyZWFrfW49bi5wYXJlbnROb2RlfX1yZXR1cm4gcz1zLmxlbmd0aD4xP3YudW5pcXVlKHMpOnMsdGhpcy5wdXNoU3RhY2socywiY2xvc2VzdCIsZSl9LGluZGV4OmZ1bmN0aW9uKGUpe3JldHVybiBlP3R5cGVvZiBlPT0ic3RyaW5nIj92LmluQXJyYXkodGhpc1swXSx2KGUpKTp2LmluQXJyYXkoZS5qcXVlcnk/ZVswXTplLHRoaXMpOnRoaXNbMF0mJnRoaXNbMF0ucGFyZW50Tm9kZT90aGlzLnByZXZBbGwoKS5sZW5ndGg6LTF9LGFkZDpmdW5jdGlvbihlLHQpe3ZhciBuPXR5cGVvZiBlPT0ic3RyaW5nIj92KGUsdCk6di5tYWtlQXJyYXkoZSYmZS5ub2RlVHlwZT9bZV06ZSkscj12Lm1lcmdlKHRoaXMuZ2V0KCksbik7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHV0KG5bMF0pfHx1dChyWzBdKT9yOnYudW5pcXVlKHIpKX0sYWRkQmFjazpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5hZGQoZT09bnVsbD90aGlzLnByZXZPYmplY3Q6dGhpcy5wcmV2T2JqZWN0LmZpbHRlcihlKSl9fSksdi5mbi5hbmRTZWxmPXYuZm4uYWRkQmFjayx2LmVhY2goe3BhcmVudDpmdW5jdGlvbihlKXt2YXIgdD1lLnBhcmVudE5vZGU7cmV0dXJuIHQmJnQubm9kZVR5cGUhPT0xMT90Om51bGx9LHBhcmVudHM6ZnVuY3Rpb24oZSl7cmV0dXJuIHYuZGlyKGUsInBhcmVudE5vZGUiKX0scGFyZW50c1VudGlsOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdi5kaXIoZSwicGFyZW50Tm9kZSIsbil9LG5leHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGF0KGUsIm5leHRTaWJsaW5nIil9LHByZXY6ZnVuY3Rpb24oZSl7cmV0dXJuIGF0KGUsInByZXZpb3VzU2libGluZyIpfSxuZXh0QWxsOmZ1bmN0aW9uKGUpe3JldHVybiB2LmRpcihlLCJuZXh0U2libGluZyIpfSxwcmV2QWxsOmZ1bmN0aW9uKGUpe3JldHVybiB2LmRpcihlLCJwcmV2aW91c1NpYmxpbmciKX0sbmV4dFVudGlsOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdi5kaXIoZSwibmV4dFNpYmxpbmciLG4pfSxwcmV2VW50aWw6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB2LmRpcihlLCJwcmV2aW91c1NpYmxpbmciLG4pfSxzaWJsaW5nczpmdW5jdGlvbihlKXtyZXR1cm4gdi5zaWJsaW5nKChlLnBhcmVudE5vZGV8fHt9KS5maXJzdENoaWxkLGUpfSxjaGlsZHJlbjpmdW5jdGlvbihlKXtyZXR1cm4gdi5zaWJsaW5nKGUuZmlyc3RDaGlsZCl9LGNvbnRlbnRzOmZ1bmN0aW9uKGUpe3JldHVybiB2Lm5vZGVOYW1lKGUsImlmcmFtZSIpP2UuY29udGVudERvY3VtZW50fHxlLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ6di5tZXJnZShbXSxlLmNoaWxkTm9kZXMpfX0sZnVuY3Rpb24oZSx0KXt2LmZuW2VdPWZ1bmN0aW9uKG4scil7dmFyIGk9di5tYXAodGhpcyx0LG4pO3JldHVybiBudC50ZXN0KGUpfHwocj1uKSxyJiZ0eXBlb2Ygcj09InN0cmluZyImJihpPXYuZmlsdGVyKHIsaSkpLGk9dGhpcy5sZW5ndGg+MSYmIW90W2VdP3YudW5pcXVlKGkpOmksdGhpcy5sZW5ndGg+MSYmcnQudGVzdChlKSYmKGk9aS5yZXZlcnNlKCkpLHRoaXMucHVzaFN0YWNrKGksZSxsLmNhbGwoYXJndW1lbnRzKS5qb2luKCIsIikpfX0pLHYuZXh0ZW5kKHtmaWx0ZXI6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBuJiYoZT0iOm5vdCgiK2UrIikiKSx0Lmxlbmd0aD09PTE/di5maW5kLm1hdGNoZXNTZWxlY3Rvcih0WzBdLGUpP1t0WzBdXTpbXTp2LmZpbmQubWF0Y2hlcyhlLHQpfSxkaXI6ZnVuY3Rpb24oZSxuLHIpe3ZhciBpPVtdLHM9ZVtuXTt3aGlsZShzJiZzLm5vZGVUeXBlIT09OSYmKHI9PT10fHxzLm5vZGVUeXBlIT09MXx8IXYocykuaXMocikpKXMubm9kZVR5cGU9PT0xJiZpLnB1c2gocykscz1zW25dO3JldHVybiBpfSxzaWJsaW5nOmZ1bmN0aW9uKGUsdCl7dmFyIG49W107Zm9yKDtlO2U9ZS5uZXh0U2libGluZyllLm5vZGVUeXBlPT09MSYmZSE9PXQmJm4ucHVzaChlKTtyZXR1cm4gbn19KTt2YXIgY3Q9ImFiYnJ8YXJ0aWNsZXxhc2lkZXxhdWRpb3xiZGl8Y2FudmFzfGRhdGF8ZGF0YWxpc3R8ZGV0YWlsc3xmaWdjYXB0aW9ufGZpZ3VyZXxmb290ZXJ8aGVhZGVyfGhncm91cHxtYXJrfG1ldGVyfG5hdnxvdXRwdXR8cHJvZ3Jlc3N8c2VjdGlvbnxzdW1tYXJ5fHRpbWV8dmlkZW8iLGh0PS8galF1ZXJ5XGQrPSIoPzpudWxsfFxkKykiL2cscHQ9L15ccysvLGR0PS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcdzpdKylbXj5dKilcLz4vZ2ksdnQ9LzwoW1x3Ol0rKS8sbXQ9Lzx0Ym9keS9pLGd0PS88fCYjP1x3KzsvLHl0PS88KD86c2NyaXB0fHN0eWxlfGxpbmspL2ksYnQ9LzwoPzpzY3JpcHR8b2JqZWN0fGVtYmVkfG9wdGlvbnxzdHlsZSkvaSx3dD1uZXcgUmVnRXhwKCI8KD86IitjdCsiKVtcXHMvPl0iLCJpIiksRXQ9L14oPzpjaGVja2JveHxyYWRpbykkLyxTdD0vY2hlY2tlZFxzKig/OltePV18PVxzKi5jaGVja2VkLikvaSx4dD0vXC8oamF2YXxlY21hKXNjcmlwdC9pLFR0PS9eXHMqPCEoPzpcW0NEQVRBXFt8XC1cLSl8W1xdXC1dezJ9PlxzKiQvZyxOdD17b3B0aW9uOlsxLCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+IiwiPC9zZWxlY3Q+Il0sbGVnZW5kOlsxLCI8ZmllbGRzZXQ+IiwiPC9maWVsZHNldD4iXSx0aGVhZDpbMSwiPHRhYmxlPiIsIjwvdGFibGU+Il0sdHI6WzIsIjx0YWJsZT48dGJvZHk+IiwiPC90Ym9keT48L3RhYmxlPiJdLHRkOlszLCI8dGFibGU+PHRib2R5Pjx0cj4iLCI8L3RyPjwvdGJvZHk+PC90YWJsZT4iXSxjb2w6WzIsIjx0YWJsZT48dGJvZHk+PC90Ym9keT48Y29sZ3JvdXA+IiwiPC9jb2xncm91cD48L3RhYmxlPiJdLGFyZWE6WzEsIjxtYXA+IiwiPC9tYXA+Il0sX2RlZmF1bHQ6WzAsIiIsIiJdfSxDdD1sdChpKSxrdD1DdC5hcHBlbmRDaGlsZChpLmNyZWF0ZUVsZW1lbnQoImRpdiIpKTtOdC5vcHRncm91cD1OdC5vcHRpb24sTnQudGJvZHk9TnQudGZvb3Q9TnQuY29sZ3JvdXA9TnQuY2FwdGlvbj1OdC50aGVhZCxOdC50aD1OdC50ZCx2LnN1cHBvcnQuaHRtbFNlcmlhbGl6ZXx8KE50Ll9kZWZhdWx0PVsxLCJYPGRpdj4iLCI8L2Rpdj4iXSksdi5mbi5leHRlbmQoe3RleHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHYuYWNjZXNzKHRoaXMsZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10P3YudGV4dCh0aGlzKTp0aGlzLmVtcHR5KCkuYXBwZW5kKCh0aGlzWzBdJiZ0aGlzWzBdLm93bmVyRG9jdW1lbnR8fGkpLmNyZWF0ZVRleHROb2RlKGUpKX0sbnVsbCxlLGFyZ3VtZW50cy5sZW5ndGgpfSx3cmFwQWxsOmZ1bmN0aW9uKGUpe2lmKHYuaXNGdW5jdGlvbihlKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKHQpe3YodGhpcykud3JhcEFsbChlLmNhbGwodGhpcyx0KSl9KTtpZih0aGlzWzBdKXt2YXIgdD12KGUsdGhpc1swXS5vd25lckRvY3VtZW50KS5lcSgwKS5jbG9uZSghMCk7dGhpc1swXS5wYXJlbnROb2RlJiZ0Lmluc2VydEJlZm9yZSh0aGlzWzBdKSx0Lm1hcChmdW5jdGlvbigpe3ZhciBlPXRoaXM7d2hpbGUoZS5maXJzdENoaWxkJiZlLmZpcnN0Q2hpbGQubm9kZVR5cGU9PT0xKWU9ZS5maXJzdENoaWxkO3JldHVybiBlfSkuYXBwZW5kKHRoaXMpfXJldHVybiB0aGlzfSx3cmFwSW5uZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIHYuaXNGdW5jdGlvbihlKT90aGlzLmVhY2goZnVuY3Rpb24odCl7dih0aGlzKS53cmFwSW5uZXIoZS5jYWxsKHRoaXMsdCkpfSk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9dih0aGlzKSxuPXQuY29udGVudHMoKTtuLmxlbmd0aD9uLndyYXBBbGwoZSk6dC5hcHBlbmQoZSl9KX0sd3JhcDpmdW5jdGlvbihlKXt2YXIgdD12LmlzRnVuY3Rpb24oZSk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihuKXt2KHRoaXMpLndyYXBBbGwodD9lLmNhbGwodGhpcyxuKTplKX0pfSx1bndyYXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnQoKS5lYWNoKGZ1bmN0aW9uKCl7di5ub2RlTmFtZSh0aGlzLCJib2R5Iil8fHYodGhpcykucmVwbGFjZVdpdGgodGhpcy5jaGlsZE5vZGVzKX0pLmVuZCgpfSxhcHBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsITAsZnVuY3Rpb24oZSl7KHRoaXMubm9kZVR5cGU9PT0xfHx0aGlzLm5vZGVUeXBlPT09MTEpJiZ0aGlzLmFwcGVuZENoaWxkKGUpfSl9LHByZXBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsITAsZnVuY3Rpb24oZSl7KHRoaXMubm9kZVR5cGU9PT0xfHx0aGlzLm5vZGVUeXBlPT09MTEpJiZ0aGlzLmluc2VydEJlZm9yZShlLHRoaXMuZmlyc3RDaGlsZCl9KX0sYmVmb3JlOmZ1bmN0aW9uKCl7aWYoIXV0KHRoaXNbMF0pKXJldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cywhMSxmdW5jdGlvbihlKXt0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGUsdGhpcyl9KTtpZihhcmd1bWVudHMubGVuZ3RoKXt2YXIgZT12LmNsZWFuKGFyZ3VtZW50cyk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHYubWVyZ2UoZSx0aGlzKSwiYmVmb3JlIix0aGlzLnNlbGVjdG9yKX19LGFmdGVyOmZ1bmN0aW9uKCl7aWYoIXV0KHRoaXNbMF0pKXJldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cywhMSxmdW5jdGlvbihlKXt0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGUsdGhpcy5uZXh0U2libGluZyl9KTtpZihhcmd1bWVudHMubGVuZ3RoKXt2YXIgZT12LmNsZWFuKGFyZ3VtZW50cyk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHYubWVyZ2UodGhpcyxlKSwiYWZ0ZXIiLHRoaXMuc2VsZWN0b3IpfX0scmVtb3ZlOmZ1bmN0aW9uKGUsdCl7dmFyIG4scj0wO2Zvcig7KG49dGhpc1tyXSkhPW51bGw7cisrKWlmKCFlfHx2LmZpbHRlcihlLFtuXSkubGVuZ3RoKSF0JiZuLm5vZGVUeXBlPT09MSYmKHYuY2xlYW5EYXRhKG4uZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKSksdi5jbGVhbkRhdGEoW25dKSksbi5wYXJlbnROb2RlJiZuLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobik7cmV0dXJuIHRoaXN9LGVtcHR5OmZ1bmN0aW9uKCl7dmFyIGUsdD0wO2Zvcig7KGU9dGhpc1t0XSkhPW51bGw7dCsrKXtlLm5vZGVUeXBlPT09MSYmdi5jbGVhbkRhdGEoZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpKTt3aGlsZShlLmZpcnN0Q2hpbGQpZS5yZW1vdmVDaGlsZChlLmZpcnN0Q2hpbGQpfXJldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbihlLHQpe3JldHVybiBlPWU9PW51bGw/ITE6ZSx0PXQ9PW51bGw/ZTp0LHRoaXMubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIHYuY2xvbmUodGhpcyxlLHQpfSl9LGh0bWw6ZnVuY3Rpb24oZSl7cmV0dXJuIHYuYWNjZXNzKHRoaXMsZnVuY3Rpb24oZSl7dmFyIG49dGhpc1swXXx8e30scj0wLGk9dGhpcy5sZW5ndGg7aWYoZT09PXQpcmV0dXJuIG4ubm9kZVR5cGU9PT0xP24uaW5uZXJIVE1MLnJlcGxhY2UoaHQsIiIpOnQ7aWYodHlwZW9mIGU9PSJzdHJpbmciJiYheXQudGVzdChlKSYmKHYuc3VwcG9ydC5odG1sU2VyaWFsaXplfHwhd3QudGVzdChlKSkmJih2LnN1cHBvcnQubGVhZGluZ1doaXRlc3BhY2V8fCFwdC50ZXN0KGUpKSYmIU50Wyh2dC5leGVjKGUpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpXSl7ZT1lLnJlcGxhY2UoZHQsIjwkMT48LyQyPiIpO3RyeXtmb3IoO3I8aTtyKyspbj10aGlzW3JdfHx7fSxuLm5vZGVUeXBlPT09MSYmKHYuY2xlYW5EYXRhKG4uZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKSksbi5pbm5lckhUTUw9ZSk7bj0wfWNhdGNoKHMpe319biYmdGhpcy5lbXB0eSgpLmFwcGVuZChlKX0sbnVsbCxlLGFyZ3VtZW50cy5sZW5ndGgpfSxyZXBsYWNlV2l0aDpmdW5jdGlvbihlKXtyZXR1cm4gdXQodGhpc1swXSk/dGhpcy5sZW5ndGg/dGhpcy5wdXNoU3RhY2sodih2LmlzRnVuY3Rpb24oZSk/ZSgpOmUpLCJyZXBsYWNlV2l0aCIsZSk6dGhpczp2LmlzRnVuY3Rpb24oZSk/dGhpcy5lYWNoKGZ1bmN0aW9uKHQpe3ZhciBuPXYodGhpcykscj1uLmh0bWwoKTtuLnJlcGxhY2VXaXRoKGUuY2FsbCh0aGlzLHQscikpfSk6KHR5cGVvZiBlIT0ic3RyaW5nIiYmKGU9dihlKS5kZXRhY2goKSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5uZXh0U2libGluZyxuPXRoaXMucGFyZW50Tm9kZTt2KHRoaXMpLnJlbW92ZSgpLHQ/dih0KS5iZWZvcmUoZSk6dihuKS5hcHBlbmQoZSl9KSl9LGRldGFjaDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yZW1vdmUoZSwhMCl9LGRvbU1hbmlwOmZ1bmN0aW9uKGUsbixyKXtlPVtdLmNvbmNhdC5hcHBseShbXSxlKTt2YXIgaSxzLG8sdSxhPTAsZj1lWzBdLGw9W10sYz10aGlzLmxlbmd0aDtpZighdi5zdXBwb3J0LmNoZWNrQ2xvbmUmJmM+MSYmdHlwZW9mIGY9PSJzdHJpbmciJiZTdC50ZXN0KGYpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2KHRoaXMpLmRvbU1hbmlwKGUsbixyKX0pO2lmKHYuaXNGdW5jdGlvbihmKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGkpe3ZhciBzPXYodGhpcyk7ZVswXT1mLmNhbGwodGhpcyxpLG4/cy5odG1sKCk6dCkscy5kb21NYW5pcChlLG4scil9KTtpZih0aGlzWzBdKXtpPXYuYnVpbGRGcmFnbWVudChlLHRoaXMsbCksbz1pLmZyYWdtZW50LHM9by5maXJzdENoaWxkLG8uY2hpbGROb2Rlcy5sZW5ndGg9PT0xJiYobz1zKTtpZihzKXtuPW4mJnYubm9kZU5hbWUocywidHIiKTtmb3IodT1pLmNhY2hlYWJsZXx8Yy0xO2E8YzthKyspci5jYWxsKG4mJnYubm9kZU5hbWUodGhpc1thXSwidGFibGUiKT9MdCh0aGlzW2FdLCJ0Ym9keSIpOnRoaXNbYV0sYT09PXU/bzp2LmNsb25lKG8sITAsITApKX1vPXM9bnVsbCxsLmxlbmd0aCYmdi5lYWNoKGwsZnVuY3Rpb24oZSx0KXt0LnNyYz92LmFqYXg/di5hamF4KHt1cmw6dC5zcmMsdHlwZToiR0VUIixkYXRhVHlwZToic2NyaXB0Iixhc3luYzohMSxnbG9iYWw6ITEsInRocm93cyI6ITB9KTp2LmVycm9yKCJubyBhamF4Iik6di5nbG9iYWxFdmFsKCh0LnRleHR8fHQudGV4dENvbnRlbnR8fHQuaW5uZXJIVE1MfHwiIikucmVwbGFjZShUdCwiIikpLHQucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpfSl9cmV0dXJuIHRoaXN9fSksdi5idWlsZEZyYWdtZW50PWZ1bmN0aW9uKGUsbixyKXt2YXIgcyxvLHUsYT1lWzBdO3JldHVybiBuPW58fGksbj0hbi5ub2RlVHlwZSYmblswXXx8bixuPW4ub3duZXJEb2N1bWVudHx8bixlLmxlbmd0aD09PTEmJnR5cGVvZiBhPT0ic3RyaW5nIiYmYS5sZW5ndGg8NTEyJiZuPT09aSYmYS5jaGFyQXQoMCk9PT0iPCImJiFidC50ZXN0KGEpJiYodi5zdXBwb3J0LmNoZWNrQ2xvbmV8fCFTdC50ZXN0KGEpKSYmKHYuc3VwcG9ydC5odG1sNUNsb25lfHwhd3QudGVzdChhKSkmJihvPSEwLHM9di5mcmFnbWVudHNbYV0sdT1zIT09dCksc3x8KHM9bi5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksdi5jbGVhbihlLG4scyxyKSxvJiYodi5mcmFnbWVudHNbYV09dSYmcykpLHtmcmFnbWVudDpzLGNhY2hlYWJsZTpvfX0sdi5mcmFnbWVudHM9e30sdi5lYWNoKHthcHBlbmRUbzoiYXBwZW5kIixwcmVwZW5kVG86InByZXBlbmQiLGluc2VydEJlZm9yZToiYmVmb3JlIixpbnNlcnRBZnRlcjoiYWZ0ZXIiLHJlcGxhY2VBbGw6InJlcGxhY2VXaXRoIn0sZnVuY3Rpb24oZSx0KXt2LmZuW2VdPWZ1bmN0aW9uKG4pe3ZhciByLGk9MCxzPVtdLG89dihuKSx1PW8ubGVuZ3RoLGE9dGhpcy5sZW5ndGg9PT0xJiZ0aGlzWzBdLnBhcmVudE5vZGU7aWYoKGE9PW51bGx8fGEmJmEubm9kZVR5cGU9PT0xMSYmYS5jaGlsZE5vZGVzLmxlbmd0aD09PTEpJiZ1PT09MSlyZXR1cm4gb1t0XSh0aGlzWzBdKSx0aGlzO2Zvcig7aTx1O2krKylyPShpPjA/dGhpcy5jbG9uZSghMCk6dGhpcykuZ2V0KCksdihvW2ldKVt0XShyKSxzPXMuY29uY2F0KHIpO3JldHVybiB0aGlzLnB1c2hTdGFjayhzLGUsby5zZWxlY3Rvcil9fSksdi5leHRlbmQoe2Nsb25lOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLHMsbzt2LnN1cHBvcnQuaHRtbDVDbG9uZXx8di5pc1hNTERvYyhlKXx8IXd0LnRlc3QoIjwiK2Uubm9kZU5hbWUrIj4iKT9vPWUuY2xvbmVOb2RlKCEwKTooa3QuaW5uZXJIVE1MPWUub3V0ZXJIVE1MLGt0LnJlbW92ZUNoaWxkKG89a3QuZmlyc3RDaGlsZCkpO2lmKCghdi5zdXBwb3J0Lm5vQ2xvbmVFdmVudHx8IXYuc3VwcG9ydC5ub0Nsb25lQ2hlY2tlZCkmJihlLm5vZGVUeXBlPT09MXx8ZS5ub2RlVHlwZT09PTExKSYmIXYuaXNYTUxEb2MoZSkpe090KGUsbykscj1NdChlKSxpPU10KG8pO2ZvcihzPTA7cltzXTsrK3MpaVtzXSYmT3QocltzXSxpW3NdKX1pZih0KXtBdChlLG8pO2lmKG4pe3I9TXQoZSksaT1NdChvKTtmb3Iocz0wO3Jbc107KytzKUF0KHJbc10saVtzXSl9fXJldHVybiByPWk9bnVsbCxvfSxjbGVhbjpmdW5jdGlvbihlLHQsbixyKXt2YXIgcyxvLHUsYSxmLGwsYyxoLHAsZCxtLGcseT10PT09aSYmQ3QsYj1bXTtpZighdHx8dHlwZW9mIHQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudD09InVuZGVmaW5lZCIpdD1pO2ZvcihzPTA7KHU9ZVtzXSkhPW51bGw7cysrKXt0eXBlb2YgdT09Im51bWJlciImJih1Kz0iIik7aWYoIXUpY29udGludWU7aWYodHlwZW9mIHU9PSJzdHJpbmciKWlmKCFndC50ZXN0KHUpKXU9dC5jcmVhdGVUZXh0Tm9kZSh1KTtlbHNle3k9eXx8bHQodCksYz10LmNyZWF0ZUVsZW1lbnQoImRpdiIpLHkuYXBwZW5kQ2hpbGQoYyksdT11LnJlcGxhY2UoZHQsIjwkMT48LyQyPiIpLGE9KHZ0LmV4ZWModSl8fFsiIiwiIl0pWzFdLnRvTG93ZXJDYXNlKCksZj1OdFthXXx8TnQuX2RlZmF1bHQsbD1mWzBdLGMuaW5uZXJIVE1MPWZbMV0rdStmWzJdO3doaWxlKGwtLSljPWMubGFzdENoaWxkO2lmKCF2LnN1cHBvcnQudGJvZHkpe2g9bXQudGVzdCh1KSxwPWE9PT0idGFibGUiJiYhaD9jLmZpcnN0Q2hpbGQmJmMuZmlyc3RDaGlsZC5jaGlsZE5vZGVzOmZbMV09PT0iPHRhYmxlPiImJiFoP2MuY2hpbGROb2RlczpbXTtmb3Iobz1wLmxlbmd0aC0xO28+PTA7LS1vKXYubm9kZU5hbWUocFtvXSwidGJvZHkiKSYmIXBbb10uY2hpbGROb2Rlcy5sZW5ndGgmJnBbb10ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChwW29dKX0hdi5zdXBwb3J0LmxlYWRpbmdXaGl0ZXNwYWNlJiZwdC50ZXN0KHUpJiZjLmluc2VydEJlZm9yZSh0LmNyZWF0ZVRleHROb2RlKHB0LmV4ZWModSlbMF0pLGMuZmlyc3RDaGlsZCksdT1jLmNoaWxkTm9kZXMsYy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGMpfXUubm9kZVR5cGU/Yi5wdXNoKHUpOnYubWVyZ2UoYix1KX1jJiYodT1jPXk9bnVsbCk7aWYoIXYuc3VwcG9ydC5hcHBlbmRDaGVja2VkKWZvcihzPTA7KHU9YltzXSkhPW51bGw7cysrKXYubm9kZU5hbWUodSwiaW5wdXQiKT9fdCh1KTp0eXBlb2YgdS5nZXRFbGVtZW50c0J5VGFnTmFtZSE9InVuZGVmaW5lZCImJnYuZ3JlcCh1LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJpbnB1dCIpLF90KTtpZihuKXttPWZ1bmN0aW9uKGUpe2lmKCFlLnR5cGV8fHh0LnRlc3QoZS50eXBlKSlyZXR1cm4gcj9yLnB1c2goZS5wYXJlbnROb2RlP2UucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlKTplKTpuLmFwcGVuZENoaWxkKGUpfTtmb3Iocz0wOyh1PWJbc10pIT1udWxsO3MrKylpZighdi5ub2RlTmFtZSh1LCJzY3JpcHQiKXx8IW0odSkpbi5hcHBlbmRDaGlsZCh1KSx0eXBlb2YgdS5nZXRFbGVtZW50c0J5VGFnTmFtZSE9InVuZGVmaW5lZCImJihnPXYuZ3JlcCh2Lm1lcmdlKFtdLHUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInNjcmlwdCIpKSxtKSxiLnNwbGljZS5hcHBseShiLFtzKzEsMF0uY29uY2F0KGcpKSxzKz1nLmxlbmd0aCl9cmV0dXJuIGJ9LGNsZWFuRGF0YTpmdW5jdGlvbihlLHQpe3ZhciBuLHIsaSxzLG89MCx1PXYuZXhwYW5kbyxhPXYuY2FjaGUsZj12LnN1cHBvcnQuZGVsZXRlRXhwYW5kbyxsPXYuZXZlbnQuc3BlY2lhbDtmb3IoOyhpPWVbb10pIT1udWxsO28rKylpZih0fHx2LmFjY2VwdERhdGEoaSkpe3I9aVt1XSxuPXImJmFbcl07aWYobil7aWYobi5ldmVudHMpZm9yKHMgaW4gbi5ldmVudHMpbFtzXT92LmV2ZW50LnJlbW92ZShpLHMpOnYucmVtb3ZlRXZlbnQoaSxzLG4uaGFuZGxlKTthW3JdJiYoZGVsZXRlIGFbcl0sZj9kZWxldGUgaVt1XTppLnJlbW92ZUF0dHJpYnV0ZT9pLnJlbW92ZUF0dHJpYnV0ZSh1KTppW3VdPW51bGwsdi5kZWxldGVkSWRzLnB1c2gocikpfX19fSksZnVuY3Rpb24oKXt2YXIgZSx0O3YudWFNYXRjaD1mdW5jdGlvbihlKXtlPWUudG9Mb3dlckNhc2UoKTt2YXIgdD0vKGNocm9tZSlbIFwvXShbXHcuXSspLy5leGVjKGUpfHwvKHdlYmtpdClbIFwvXShbXHcuXSspLy5leGVjKGUpfHwvKG9wZXJhKSg/Oi4qdmVyc2lvbnwpWyBcL10oW1x3Ll0rKS8uZXhlYyhlKXx8Lyhtc2llKSAoW1x3Ll0rKS8uZXhlYyhlKXx8ZS5pbmRleE9mKCJjb21wYXRpYmxlIik8MCYmLyhtb3ppbGxhKSg/Oi4qPyBydjooW1x3Ll0rKXwpLy5leGVjKGUpfHxbXTtyZXR1cm57YnJvd3Nlcjp0WzFdfHwiIix2ZXJzaW9uOnRbMl18fCIwIn19LGU9di51YU1hdGNoKG8udXNlckFnZW50KSx0PXt9LGUuYnJvd3NlciYmKHRbZS5icm93c2VyXT0hMCx0LnZlcnNpb249ZS52ZXJzaW9uKSx0LmNocm9tZT90LndlYmtpdD0hMDp0LndlYmtpdCYmKHQuc2FmYXJpPSEwKSx2LmJyb3dzZXI9dCx2LnN1Yj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxuKXtyZXR1cm4gbmV3IGUuZm4uaW5pdCh0LG4pfXYuZXh0ZW5kKCEwLGUsdGhpcyksZS5zdXBlcmNsYXNzPXRoaXMsZS5mbj1lLnByb3RvdHlwZT10aGlzKCksZS5mbi5jb25zdHJ1Y3Rvcj1lLGUuc3ViPXRoaXMuc3ViLGUuZm4uaW5pdD1mdW5jdGlvbihyLGkpe3JldHVybiBpJiZpIGluc3RhbmNlb2YgdiYmIShpIGluc3RhbmNlb2YgZSkmJihpPWUoaSkpLHYuZm4uaW5pdC5jYWxsKHRoaXMscixpLHQpfSxlLmZuLmluaXQucHJvdG90eXBlPWUuZm47dmFyIHQ9ZShpKTtyZXR1cm4gZX19KCk7dmFyIER0LFB0LEh0LEJ0PS9hbHBoYVwoW14pXSpcKS9pLGp0PS9vcGFjaXR5PShbXildKikvLEZ0PS9eKHRvcHxyaWdodHxib3R0b218bGVmdCkkLyxJdD0vXihub25lfHRhYmxlKD8hLWNbZWFdKS4rKS8scXQ9L15tYXJnaW4vLFJ0PW5ldyBSZWdFeHAoIl4oIittKyIpKC4qKSQiLCJpIiksVXQ9bmV3IFJlZ0V4cCgiXigiK20rIikoPyFweClbYS16JV0rJCIsImkiKSx6dD1uZXcgUmVnRXhwKCJeKFstK10pPSgiK20rIikiLCJpIiksV3Q9e0JPRFk6ImJsb2NrIn0sWHQ9e3Bvc2l0aW9uOiJhYnNvbHV0ZSIsdmlzaWJpbGl0eToiaGlkZGVuIixkaXNwbGF5OiJibG9jayJ9LFZ0PXtsZXR0ZXJTcGFjaW5nOjAsZm9udFdlaWdodDo0MDB9LCR0PVsiVG9wIiwiUmlnaHQiLCJCb3R0b20iLCJMZWZ0Il0sSnQ9WyJXZWJraXQiLCJPIiwiTW96IiwibXMiXSxLdD12LmZuLnRvZ2dsZTt2LmZuLmV4dGVuZCh7Y3NzOmZ1bmN0aW9uKGUsbil7cmV0dXJuIHYuYWNjZXNzKHRoaXMsZnVuY3Rpb24oZSxuLHIpe3JldHVybiByIT09dD92LnN0eWxlKGUsbixyKTp2LmNzcyhlLG4pfSxlLG4sYXJndW1lbnRzLmxlbmd0aD4xKX0sc2hvdzpmdW5jdGlvbigpe3JldHVybiBZdCh0aGlzLCEwKX0saGlkZTpmdW5jdGlvbigpe3JldHVybiBZdCh0aGlzKX0sdG9nZ2xlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dHlwZW9mIGU9PSJib29sZWFuIjtyZXR1cm4gdi5pc0Z1bmN0aW9uKGUpJiZ2LmlzRnVuY3Rpb24odCk/S3QuYXBwbHkodGhpcyxhcmd1bWVudHMpOnRoaXMuZWFjaChmdW5jdGlvbigpeyhuP2U6R3QodGhpcykpP3YodGhpcykuc2hvdygpOnYodGhpcykuaGlkZSgpfSl9fSksdi5leHRlbmQoe2Nzc0hvb2tzOntvcGFjaXR5OntnZXQ6ZnVuY3Rpb24oZSx0KXtpZih0KXt2YXIgbj1EdChlLCJvcGFjaXR5Iik7cmV0dXJuIG49PT0iIj8iMSI6bn19fX0sY3NzTnVtYmVyOntmaWxsT3BhY2l0eTohMCxmb250V2VpZ2h0OiEwLGxpbmVIZWlnaHQ6ITAsb3BhY2l0eTohMCxvcnBoYW5zOiEwLHdpZG93czohMCx6SW5kZXg6ITAsem9vbTohMH0sY3NzUHJvcHM6eyJmbG9hdCI6di5zdXBwb3J0LmNzc0Zsb2F0PyJjc3NGbG9hdCI6InN0eWxlRmxvYXQifSxzdHlsZTpmdW5jdGlvbihlLG4scixpKXtpZighZXx8ZS5ub2RlVHlwZT09PTN8fGUubm9kZVR5cGU9PT04fHwhZS5zdHlsZSlyZXR1cm47dmFyIHMsbyx1LGE9di5jYW1lbENhc2UobiksZj1lLnN0eWxlO249di5jc3NQcm9wc1thXXx8KHYuY3NzUHJvcHNbYV09UXQoZixhKSksdT12LmNzc0hvb2tzW25dfHx2LmNzc0hvb2tzW2FdO2lmKHI9PT10KXJldHVybiB1JiYiZ2V0ImluIHUmJihzPXUuZ2V0KGUsITEsaSkpIT09dD9zOmZbbl07bz10eXBlb2YgcixvPT09InN0cmluZyImJihzPXp0LmV4ZWMocikpJiYocj0oc1sxXSsxKSpzWzJdK3BhcnNlRmxvYXQodi5jc3MoZSxuKSksbz0ibnVtYmVyIik7aWYocj09bnVsbHx8bz09PSJudW1iZXIiJiZpc05hTihyKSlyZXR1cm47bz09PSJudW1iZXIiJiYhdi5jc3NOdW1iZXJbYV0mJihyKz0icHgiKTtpZighdXx8ISgic2V0ImluIHUpfHwocj11LnNldChlLHIsaSkpIT09dCl0cnl7ZltuXT1yfWNhdGNoKGwpe319LGNzczpmdW5jdGlvbihlLG4scixpKXt2YXIgcyxvLHUsYT12LmNhbWVsQ2FzZShuKTtyZXR1cm4gbj12LmNzc1Byb3BzW2FdfHwodi5jc3NQcm9wc1thXT1RdChlLnN0eWxlLGEpKSx1PXYuY3NzSG9va3Nbbl18fHYuY3NzSG9va3NbYV0sdSYmImdldCJpbiB1JiYocz11LmdldChlLCEwLGkpKSxzPT09dCYmKHM9RHQoZSxuKSkscz09PSJub3JtYWwiJiZuIGluIFZ0JiYocz1WdFtuXSkscnx8aSE9PXQ/KG89cGFyc2VGbG9hdChzKSxyfHx2LmlzTnVtZXJpYyhvKT9vfHwwOnMpOnN9LHN3YXA6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGkscz17fTtmb3IoaSBpbiB0KXNbaV09ZS5zdHlsZVtpXSxlLnN0eWxlW2ldPXRbaV07cj1uLmNhbGwoZSk7Zm9yKGkgaW4gdCllLnN0eWxlW2ldPXNbaV07cmV0dXJuIHJ9fSksZS5nZXRDb21wdXRlZFN0eWxlP0R0PWZ1bmN0aW9uKHQsbil7dmFyIHIsaSxzLG8sdT1lLmdldENvbXB1dGVkU3R5bGUodCxudWxsKSxhPXQuc3R5bGU7cmV0dXJuIHUmJihyPXUuZ2V0UHJvcGVydHlWYWx1ZShuKXx8dVtuXSxyPT09IiImJiF2LmNvbnRhaW5zKHQub3duZXJEb2N1bWVudCx0KSYmKHI9di5zdHlsZSh0LG4pKSxVdC50ZXN0KHIpJiZxdC50ZXN0KG4pJiYoaT1hLndpZHRoLHM9YS5taW5XaWR0aCxvPWEubWF4V2lkdGgsYS5taW5XaWR0aD1hLm1heFdpZHRoPWEud2lkdGg9cixyPXUud2lkdGgsYS53aWR0aD1pLGEubWluV2lkdGg9cyxhLm1heFdpZHRoPW8pKSxyfTppLmRvY3VtZW50RWxlbWVudC5jdXJyZW50U3R5bGUmJihEdD1mdW5jdGlvbihlLHQpe3ZhciBuLHIsaT1lLmN1cnJlbnRTdHlsZSYmZS5jdXJyZW50U3R5bGVbdF0scz1lLnN0eWxlO3JldHVybiBpPT1udWxsJiZzJiZzW3RdJiYoaT1zW3RdKSxVdC50ZXN0KGkpJiYhRnQudGVzdCh0KSYmKG49cy5sZWZ0LHI9ZS5ydW50aW1lU3R5bGUmJmUucnVudGltZVN0eWxlLmxlZnQsciYmKGUucnVudGltZVN0eWxlLmxlZnQ9ZS5jdXJyZW50U3R5bGUubGVmdCkscy5sZWZ0PXQ9PT0iZm9udFNpemUiPyIxZW0iOmksaT1zLnBpeGVsTGVmdCsicHgiLHMubGVmdD1uLHImJihlLnJ1bnRpbWVTdHlsZS5sZWZ0PXIpKSxpPT09IiI/ImF1dG8iOml9KSx2LmVhY2goWyJoZWlnaHQiLCJ3aWR0aCJdLGZ1bmN0aW9uKGUsdCl7di5jc3NIb29rc1t0XT17Z2V0OmZ1bmN0aW9uKGUsbixyKXtpZihuKXJldHVybiBlLm9mZnNldFdpZHRoPT09MCYmSXQudGVzdChEdChlLCJkaXNwbGF5IikpP3Yuc3dhcChlLFh0LGZ1bmN0aW9uKCl7cmV0dXJuIHRuKGUsdCxyKX0pOnRuKGUsdCxyKX0sc2V0OmZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gWnQoZSxuLHI/ZW4oZSx0LHIsdi5zdXBwb3J0LmJveFNpemluZyYmdi5jc3MoZSwiYm94U2l6aW5nIik9PT0iYm9yZGVyLWJveCIpOjApfX19KSx2LnN1cHBvcnQub3BhY2l0eXx8KHYuY3NzSG9va3Mub3BhY2l0eT17Z2V0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGp0LnRlc3QoKHQmJmUuY3VycmVudFN0eWxlP2UuY3VycmVudFN0eWxlLmZpbHRlcjplLnN0eWxlLmZpbHRlcil8fCIiKT8uMDEqcGFyc2VGbG9hdChSZWdFeHAuJDEpKyIiOnQ/IjEiOiIifSxzZXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLnN0eWxlLHI9ZS5jdXJyZW50U3R5bGUsaT12LmlzTnVtZXJpYyh0KT8iYWxwaGEob3BhY2l0eT0iK3QqMTAwKyIpIjoiIixzPXImJnIuZmlsdGVyfHxuLmZpbHRlcnx8IiI7bi56b29tPTE7aWYodD49MSYmdi50cmltKHMucmVwbGFjZShCdCwiIikpPT09IiImJm4ucmVtb3ZlQXR0cmlidXRlKXtuLnJlbW92ZUF0dHJpYnV0ZSgiZmlsdGVyIik7aWYociYmIXIuZmlsdGVyKXJldHVybn1uLmZpbHRlcj1CdC50ZXN0KHMpP3MucmVwbGFjZShCdCxpKTpzKyIgIitpfX0pLHYoZnVuY3Rpb24oKXt2LnN1cHBvcnQucmVsaWFibGVNYXJnaW5SaWdodHx8KHYuY3NzSG9va3MubWFyZ2luUmlnaHQ9e2dldDpmdW5jdGlvbihlLHQpe3JldHVybiB2LnN3YXAoZSx7ZGlzcGxheToiaW5saW5lLWJsb2NrIn0sZnVuY3Rpb24oKXtpZih0KXJldHVybiBEdChlLCJtYXJnaW5SaWdodCIpfSl9fSksIXYuc3VwcG9ydC5waXhlbFBvc2l0aW9uJiZ2LmZuLnBvc2l0aW9uJiZ2LmVhY2goWyJ0b3AiLCJsZWZ0Il0sZnVuY3Rpb24oZSx0KXt2LmNzc0hvb2tzW3RdPXtnZXQ6ZnVuY3Rpb24oZSxuKXtpZihuKXt2YXIgcj1EdChlLHQpO3JldHVybiBVdC50ZXN0KHIpP3YoZSkucG9zaXRpb24oKVt0XSsicHgiOnJ9fX19KX0pLHYuZXhwciYmdi5leHByLmZpbHRlcnMmJih2LmV4cHIuZmlsdGVycy5oaWRkZW49ZnVuY3Rpb24oZSl7cmV0dXJuIGUub2Zmc2V0V2lkdGg9PT0wJiZlLm9mZnNldEhlaWdodD09PTB8fCF2LnN1cHBvcnQucmVsaWFibGVIaWRkZW5PZmZzZXRzJiYoZS5zdHlsZSYmZS5zdHlsZS5kaXNwbGF5fHxEdChlLCJkaXNwbGF5IikpPT09Im5vbmUifSx2LmV4cHIuZmlsdGVycy52aXNpYmxlPWZ1bmN0aW9uKGUpe3JldHVybiF2LmV4cHIuZmlsdGVycy5oaWRkZW4oZSl9KSx2LmVhY2goe21hcmdpbjoiIixwYWRkaW5nOiIiLGJvcmRlcjoiV2lkdGgifSxmdW5jdGlvbihlLHQpe3YuY3NzSG9va3NbZSt0XT17ZXhwYW5kOmZ1bmN0aW9uKG4pe3ZhciByLGk9dHlwZW9mIG49PSJzdHJpbmciP24uc3BsaXQoIiAiKTpbbl0scz17fTtmb3Iocj0wO3I8NDtyKyspc1tlKyR0W3JdK3RdPWlbcl18fGlbci0yXXx8aVswXTtyZXR1cm4gc319LHF0LnRlc3QoZSl8fCh2LmNzc0hvb2tzW2UrdF0uc2V0PVp0KX0pO3ZhciBybj0vJTIwL2csc249L1xbXF0kLyxvbj0vXHI/XG4vZyx1bj0vXig/OmNvbG9yfGRhdGV8ZGF0ZXRpbWV8ZGF0ZXRpbWUtbG9jYWx8ZW1haWx8aGlkZGVufG1vbnRofG51bWJlcnxwYXNzd29yZHxyYW5nZXxzZWFyY2h8dGVsfHRleHR8dGltZXx1cmx8d2VlaykkL2ksYW49L14oPzpzZWxlY3R8dGV4dGFyZWEpL2k7di5mbi5leHRlbmQoe3NlcmlhbGl6ZTpmdW5jdGlvbigpe3JldHVybiB2LnBhcmFtKHRoaXMuc2VyaWFsaXplQXJyYXkoKSl9LHNlcmlhbGl6ZUFycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWxlbWVudHM/di5tYWtlQXJyYXkodGhpcy5lbGVtZW50cyk6dGhpc30pLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiB0aGlzLm5hbWUmJiF0aGlzLmRpc2FibGVkJiYodGhpcy5jaGVja2VkfHxhbi50ZXN0KHRoaXMubm9kZU5hbWUpfHx1bi50ZXN0KHRoaXMudHlwZSkpfSkubWFwKGZ1bmN0aW9uKGUsdCl7dmFyIG49dih0aGlzKS52YWwoKTtyZXR1cm4gbj09bnVsbD9udWxsOnYuaXNBcnJheShuKT92Lm1hcChuLGZ1bmN0aW9uKGUsbil7cmV0dXJue25hbWU6dC5uYW1lLHZhbHVlOmUucmVwbGFjZShvbiwiXHJcbiIpfX0pOntuYW1lOnQubmFtZSx2YWx1ZTpuLnJlcGxhY2Uob24sIlxyXG4iKX19KS5nZXQoKX19KSx2LnBhcmFtPWZ1bmN0aW9uKGUsbil7dmFyIHIsaT1bXSxzPWZ1bmN0aW9uKGUsdCl7dD12LmlzRnVuY3Rpb24odCk/dCgpOnQ9PW51bGw/IiI6dCxpW2kubGVuZ3RoXT1lbmNvZGVVUklDb21wb25lbnQoZSkrIj0iK2VuY29kZVVSSUNvbXBvbmVudCh0KX07bj09PXQmJihuPXYuYWpheFNldHRpbmdzJiZ2LmFqYXhTZXR0aW5ncy50cmFkaXRpb25hbCk7aWYodi5pc0FycmF5KGUpfHxlLmpxdWVyeSYmIXYuaXNQbGFpbk9iamVjdChlKSl2LmVhY2goZSxmdW5jdGlvbigpe3ModGhpcy5uYW1lLHRoaXMudmFsdWUpfSk7ZWxzZSBmb3IociBpbiBlKWZuKHIsZVtyXSxuLHMpO3JldHVybiBpLmpvaW4oIiYiKS5yZXBsYWNlKHJuLCIrIil9O3ZhciBsbixjbixobj0vIy4qJC8scG49L14oLio/KTpbIFx0XSooW15cclxuXSopXHI/JC9tZyxkbj0vXig/OmFib3V0fGFwcHxhcHBcLXN0b3JhZ2V8LitcLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLHZuPS9eKD86R0VUfEhFQUQpJC8sbW49L15cL1wvLyxnbj0vXD8vLHluPS88c2NyaXB0XGJbXjxdKig/Oig/ITxcL3NjcmlwdD4pPFtePF0qKSo8XC9zY3JpcHQ+L2dpLGJuPS8oWz8mXSlfPVteJl0qLyx3bj0vXihbXHdcK1wuXC1dKzopKD86XC9cLyhbXlwvPyM6XSopKD86OihcZCspfCl8KS8sRW49di5mbi5sb2FkLFNuPXt9LHhuPXt9LFRuPVsiKi8iXStbIioiXTt0cnl7Y249cy5ocmVmfWNhdGNoKE5uKXtjbj1pLmNyZWF0ZUVsZW1lbnQoImEiKSxjbi5ocmVmPSIiLGNuPWNuLmhyZWZ9bG49d24uZXhlYyhjbi50b0xvd2VyQ2FzZSgpKXx8W10sdi5mbi5sb2FkPWZ1bmN0aW9uKGUsbixyKXtpZih0eXBlb2YgZSE9InN0cmluZyImJkVuKXJldHVybiBFbi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYoIXRoaXMubGVuZ3RoKXJldHVybiB0aGlzO3ZhciBpLHMsbyx1PXRoaXMsYT1lLmluZGV4T2YoIiAiKTtyZXR1cm4gYT49MCYmKGk9ZS5zbGljZShhLGUubGVuZ3RoKSxlPWUuc2xpY2UoMCxhKSksdi5pc0Z1bmN0aW9uKG4pPyhyPW4sbj10KTpuJiZ0eXBlb2Ygbj09Im9iamVjdCImJihzPSJQT1NUIiksdi5hamF4KHt1cmw6ZSx0eXBlOnMsZGF0YVR5cGU6Imh0bWwiLGRhdGE6bixjb21wbGV0ZTpmdW5jdGlvbihlLHQpe3ImJnUuZWFjaChyLG98fFtlLnJlc3BvbnNlVGV4dCx0LGVdKX19KS5kb25lKGZ1bmN0aW9uKGUpe289YXJndW1lbnRzLHUuaHRtbChpP3YoIjxkaXY+IikuYXBwZW5kKGUucmVwbGFjZSh5biwiIikpLmZpbmQoaSk6ZSl9KSx0aGlzfSx2LmVhY2goImFqYXhTdGFydCBhamF4U3RvcCBhamF4Q29tcGxldGUgYWpheEVycm9yIGFqYXhTdWNjZXNzIGFqYXhTZW5kIi5zcGxpdCgiICIpLGZ1bmN0aW9uKGUsdCl7di5mblt0XT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5vbih0LGUpfX0pLHYuZWFjaChbImdldCIsInBvc3QiXSxmdW5jdGlvbihlLG4pe3Zbbl09ZnVuY3Rpb24oZSxyLGkscyl7cmV0dXJuIHYuaXNGdW5jdGlvbihyKSYmKHM9c3x8aSxpPXIscj10KSx2LmFqYXgoe3R5cGU6bix1cmw6ZSxkYXRhOnIsc3VjY2VzczppLGRhdGFUeXBlOnN9KX19KSx2LmV4dGVuZCh7Z2V0U2NyaXB0OmZ1bmN0aW9uKGUsbil7cmV0dXJuIHYuZ2V0KGUsdCxuLCJzY3JpcHQiKX0sZ2V0SlNPTjpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHYuZ2V0KGUsdCxuLCJqc29uIil9LGFqYXhTZXR1cDpmdW5jdGlvbihlLHQpe3JldHVybiB0P0xuKGUsdi5hamF4U2V0dGluZ3MpOih0PWUsZT12LmFqYXhTZXR0aW5ncyksTG4oZSx0KSxlfSxhamF4U2V0dGluZ3M6e3VybDpjbixpc0xvY2FsOmRuLnRlc3QobG5bMV0pLGdsb2JhbDohMCx0eXBlOiJHRVQiLGNvbnRlbnRUeXBlOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgiLHByb2Nlc3NEYXRhOiEwLGFzeW5jOiEwLGFjY2VwdHM6e3htbDoiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbCIsaHRtbDoidGV4dC9odG1sIix0ZXh0OiJ0ZXh0L3BsYWluIixqc29uOiJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHQiLCIqIjpUbn0sY29udGVudHM6e3htbDoveG1sLyxodG1sOi9odG1sLyxqc29uOi9qc29uL30scmVzcG9uc2VGaWVsZHM6e3htbDoicmVzcG9uc2VYTUwiLHRleHQ6InJlc3BvbnNlVGV4dCJ9LGNvbnZlcnRlcnM6eyIqIHRleHQiOmUuU3RyaW5nLCJ0ZXh0IGh0bWwiOiEwLCJ0ZXh0IGpzb24iOnYucGFyc2VKU09OLCJ0ZXh0IHhtbCI6di5wYXJzZVhNTH0sZmxhdE9wdGlvbnM6e2NvbnRleHQ6ITAsdXJsOiEwfX0sYWpheFByZWZpbHRlcjpDbihTbiksYWpheFRyYW5zcG9ydDpDbih4biksYWpheDpmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIFQoZSxuLHMsYSl7dmFyIGwseSxiLHcsUyxUPW47aWYoRT09PTIpcmV0dXJuO0U9Mix1JiZjbGVhclRpbWVvdXQodSksbz10LGk9YXx8IiIseC5yZWFkeVN0YXRlPWU+MD80OjAscyYmKHc9QW4oYyx4LHMpKTtpZihlPj0yMDAmJmU8MzAwfHxlPT09MzA0KWMuaWZNb2RpZmllZCYmKFM9eC5nZXRSZXNwb25zZUhlYWRlcigiTGFzdC1Nb2RpZmllZCIpLFMmJih2Lmxhc3RNb2RpZmllZFtyXT1TKSxTPXguZ2V0UmVzcG9uc2VIZWFkZXIoIkV0YWciKSxTJiYodi5ldGFnW3JdPVMpKSxlPT09MzA0PyhUPSJub3Rtb2RpZmllZCIsbD0hMCk6KGw9T24oYyx3KSxUPWwuc3RhdGUseT1sLmRhdGEsYj1sLmVycm9yLGw9IWIpO2Vsc2V7Yj1UO2lmKCFUfHxlKVQ9ImVycm9yIixlPDAmJihlPTApfXguc3RhdHVzPWUseC5zdGF0dXNUZXh0PShufHxUKSsiIixsP2QucmVzb2x2ZVdpdGgoaCxbeSxULHhdKTpkLnJlamVjdFdpdGgoaCxbeCxULGJdKSx4LnN0YXR1c0NvZGUoZyksZz10LGYmJnAudHJpZ2dlcigiYWpheCIrKGw/IlN1Y2Nlc3MiOiJFcnJvciIpLFt4LGMsbD95OmJdKSxtLmZpcmVXaXRoKGgsW3gsVF0pLGYmJihwLnRyaWdnZXIoImFqYXhDb21wbGV0ZSIsW3gsY10pLC0tdi5hY3RpdmV8fHYuZXZlbnQudHJpZ2dlcigiYWpheFN0b3AiKSl9dHlwZW9mIGU9PSJvYmplY3QiJiYobj1lLGU9dCksbj1ufHx7fTt2YXIgcixpLHMsbyx1LGEsZixsLGM9di5hamF4U2V0dXAoe30sbiksaD1jLmNvbnRleHR8fGMscD1oIT09YyYmKGgubm9kZVR5cGV8fGggaW5zdGFuY2VvZiB2KT92KGgpOnYuZXZlbnQsZD12LkRlZmVycmVkKCksbT12LkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSxnPWMuc3RhdHVzQ29kZXx8e30sYj17fSx3PXt9LEU9MCxTPSJjYW5jZWxlZCIseD17cmVhZHlTdGF0ZTowLHNldFJlcXVlc3RIZWFkZXI6ZnVuY3Rpb24oZSx0KXtpZighRSl7dmFyIG49ZS50b0xvd2VyQ2FzZSgpO2U9d1tuXT13W25dfHxlLGJbZV09dH1yZXR1cm4gdGhpc30sZ2V0QWxsUmVzcG9uc2VIZWFkZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIEU9PT0yP2k6bnVsbH0sZ2V0UmVzcG9uc2VIZWFkZXI6ZnVuY3Rpb24oZSl7dmFyIG47aWYoRT09PTIpe2lmKCFzKXtzPXt9O3doaWxlKG49cG4uZXhlYyhpKSlzW25bMV0udG9Mb3dlckNhc2UoKV09blsyXX1uPXNbZS50b0xvd2VyQ2FzZSgpXX1yZXR1cm4gbj09PXQ/bnVsbDpufSxvdmVycmlkZU1pbWVUeXBlOmZ1bmN0aW9uKGUpe3JldHVybiBFfHwoYy5taW1lVHlwZT1lKSx0aGlzfSxhYm9ydDpmdW5jdGlvbihlKXtyZXR1cm4gZT1lfHxTLG8mJm8uYWJvcnQoZSksVCgwLGUpLHRoaXN9fTtkLnByb21pc2UoeCkseC5zdWNjZXNzPXguZG9uZSx4LmVycm9yPXguZmFpbCx4LmNvbXBsZXRlPW0uYWRkLHguc3RhdHVzQ29kZT1mdW5jdGlvbihlKXtpZihlKXt2YXIgdDtpZihFPDIpZm9yKHQgaW4gZSlnW3RdPVtnW3RdLGVbdF1dO2Vsc2UgdD1lW3guc3RhdHVzXSx4LmFsd2F5cyh0KX1yZXR1cm4gdGhpc30sYy51cmw9KChlfHxjLnVybCkrIiIpLnJlcGxhY2UoaG4sIiIpLnJlcGxhY2UobW4sbG5bMV0rIi8vIiksYy5kYXRhVHlwZXM9di50cmltKGMuZGF0YVR5cGV8fCIqIikudG9Mb3dlckNhc2UoKS5zcGxpdCh5KSxjLmNyb3NzRG9tYWluPT1udWxsJiYoYT13bi5leGVjKGMudXJsLnRvTG93ZXJDYXNlKCkpLGMuY3Jvc3NEb21haW49ISghYXx8YVsxXT09PWxuWzFdJiZhWzJdPT09bG5bMl0mJihhWzNdfHwoYVsxXT09PSJodHRwOiI/ODA6NDQzKSk9PShsblszXXx8KGxuWzFdPT09Imh0dHA6Ij84MDo0NDMpKSkpLGMuZGF0YSYmYy5wcm9jZXNzRGF0YSYmdHlwZW9mIGMuZGF0YSE9InN0cmluZyImJihjLmRhdGE9di5wYXJhbShjLmRhdGEsYy50cmFkaXRpb25hbCkpLGtuKFNuLGMsbix4KTtpZihFPT09MilyZXR1cm4geDtmPWMuZ2xvYmFsLGMudHlwZT1jLnR5cGUudG9VcHBlckNhc2UoKSxjLmhhc0NvbnRlbnQ9IXZuLnRlc3QoYy50eXBlKSxmJiZ2LmFjdGl2ZSsrPT09MCYmdi5ldmVudC50cmlnZ2VyKCJhamF4U3RhcnQiKTtpZighYy5oYXNDb250ZW50KXtjLmRhdGEmJihjLnVybCs9KGduLnRlc3QoYy51cmwpPyImIjoiPyIpK2MuZGF0YSxkZWxldGUgYy5kYXRhKSxyPWMudXJsO2lmKGMuY2FjaGU9PT0hMSl7dmFyIE49di5ub3coKSxDPWMudXJsLnJlcGxhY2UoYm4sIiQxXz0iK04pO2MudXJsPUMrKEM9PT1jLnVybD8oZ24udGVzdChjLnVybCk/IiYiOiI/IikrIl89IitOOiIiKX19KGMuZGF0YSYmYy5oYXNDb250ZW50JiZjLmNvbnRlbnRUeXBlIT09ITF8fG4uY29udGVudFR5cGUpJiZ4LnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsYy5jb250ZW50VHlwZSksYy5pZk1vZGlmaWVkJiYocj1yfHxjLnVybCx2Lmxhc3RNb2RpZmllZFtyXSYmeC5zZXRSZXF1ZXN0SGVhZGVyKCJJZi1Nb2RpZmllZC1TaW5jZSIsdi5sYXN0TW9kaWZpZWRbcl0pLHYuZXRhZ1tyXSYmeC5zZXRSZXF1ZXN0SGVhZGVyKCJJZi1Ob25lLU1hdGNoIix2LmV0YWdbcl0pKSx4LnNldFJlcXVlc3RIZWFkZXIoIkFjY2VwdCIsYy5kYXRhVHlwZXNbMF0mJmMuYWNjZXB0c1tjLmRhdGFUeXBlc1swXV0/Yy5hY2NlcHRzW2MuZGF0YVR5cGVzWzBdXSsoYy5kYXRhVHlwZXNbMF0hPT0iKiI/IiwgIitUbisiOyBxPTAuMDEiOiIiKTpjLmFjY2VwdHNbIioiXSk7Zm9yKGwgaW4gYy5oZWFkZXJzKXguc2V0UmVxdWVzdEhlYWRlcihsLGMuaGVhZGVyc1tsXSk7aWYoIWMuYmVmb3JlU2VuZHx8Yy5iZWZvcmVTZW5kLmNhbGwoaCx4LGMpIT09ITEmJkUhPT0yKXtTPSJhYm9ydCI7Zm9yKGwgaW57c3VjY2VzczoxLGVycm9yOjEsY29tcGxldGU6MX0peFtsXShjW2xdKTtvPWtuKHhuLGMsbix4KTtpZighbylUKC0xLCJObyBUcmFuc3BvcnQiKTtlbHNle3gucmVhZHlTdGF0ZT0xLGYmJnAudHJpZ2dlcigiYWpheFNlbmQiLFt4LGNdKSxjLmFzeW5jJiZjLnRpbWVvdXQ+MCYmKHU9c2V0VGltZW91dChmdW5jdGlvbigpe3guYWJvcnQoInRpbWVvdXQiKX0sYy50aW1lb3V0KSk7dHJ5e0U9MSxvLnNlbmQoYixUKX1jYXRjaChrKXtpZighKEU8MikpdGhyb3cgaztUKC0xLGspfX1yZXR1cm4geH1yZXR1cm4geC5hYm9ydCgpfSxhY3RpdmU6MCxsYXN0TW9kaWZpZWQ6e30sZXRhZzp7fX0pO3ZhciBNbj1bXSxfbj0vXD8vLERuPS8oPSlcPyg/PSZ8JCl8XD9cPy8sUG49di5ub3coKTt2LmFqYXhTZXR1cCh7anNvbnA6ImNhbGxiYWNrIixqc29ucENhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGU9TW4ucG9wKCl8fHYuZXhwYW5kbysiXyIrUG4rKztyZXR1cm4gdGhpc1tlXT0hMCxlfX0pLHYuYWpheFByZWZpbHRlcigianNvbiBqc29ucCIsZnVuY3Rpb24obixyLGkpe3ZhciBzLG8sdSxhPW4uZGF0YSxmPW4udXJsLGw9bi5qc29ucCE9PSExLGM9bCYmRG4udGVzdChmKSxoPWwmJiFjJiZ0eXBlb2YgYT09InN0cmluZyImJiEobi5jb250ZW50VHlwZXx8IiIpLmluZGV4T2YoImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpJiZEbi50ZXN0KGEpO2lmKG4uZGF0YVR5cGVzWzBdPT09Impzb25wInx8Y3x8aClyZXR1cm4gcz1uLmpzb25wQ2FsbGJhY2s9di5pc0Z1bmN0aW9uKG4uanNvbnBDYWxsYmFjayk/bi5qc29ucENhbGxiYWNrKCk6bi5qc29ucENhbGxiYWNrLG89ZVtzXSxjP24udXJsPWYucmVwbGFjZShEbiwiJDEiK3MpOmg/bi5kYXRhPWEucmVwbGFjZShEbiwiJDEiK3MpOmwmJihuLnVybCs9KF9uLnRlc3QoZik/IiYiOiI/Iikrbi5qc29ucCsiPSIrcyksbi5jb252ZXJ0ZXJzWyJzY3JpcHQganNvbiJdPWZ1bmN0aW9uKCl7cmV0dXJuIHV8fHYuZXJyb3IocysiIHdhcyBub3QgY2FsbGVkIiksdVswXX0sbi5kYXRhVHlwZXNbMF09Impzb24iLGVbc109ZnVuY3Rpb24oKXt1PWFyZ3VtZW50c30saS5hbHdheXMoZnVuY3Rpb24oKXtlW3NdPW8sbltzXSYmKG4uanNvbnBDYWxsYmFjaz1yLmpzb25wQ2FsbGJhY2ssTW4ucHVzaChzKSksdSYmdi5pc0Z1bmN0aW9uKG8pJiZvKHVbMF0pLHU9bz10fSksInNjcmlwdCJ9KSx2LmFqYXhTZXR1cCh7YWNjZXB0czp7c2NyaXB0OiJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdCJ9LGNvbnRlbnRzOntzY3JpcHQ6L2phdmFzY3JpcHR8ZWNtYXNjcmlwdC99LGNvbnZlcnRlcnM6eyJ0ZXh0IHNjcmlwdCI6ZnVuY3Rpb24oZSl7cmV0dXJuIHYuZ2xvYmFsRXZhbChlKSxlfX19KSx2LmFqYXhQcmVmaWx0ZXIoInNjcmlwdCIsZnVuY3Rpb24oZSl7ZS5jYWNoZT09PXQmJihlLmNhY2hlPSExKSxlLmNyb3NzRG9tYWluJiYoZS50eXBlPSJHRVQiLGUuZ2xvYmFsPSExKX0pLHYuYWpheFRyYW5zcG9ydCgic2NyaXB0IixmdW5jdGlvbihlKXtpZihlLmNyb3NzRG9tYWluKXt2YXIgbixyPWkuaGVhZHx8aS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdfHxpLmRvY3VtZW50RWxlbWVudDtyZXR1cm57c2VuZDpmdW5jdGlvbihzLG8pe249aS5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKSxuLmFzeW5jPSJhc3luYyIsZS5zY3JpcHRDaGFyc2V0JiYobi5jaGFyc2V0PWUuc2NyaXB0Q2hhcnNldCksbi5zcmM9ZS51cmwsbi5vbmxvYWQ9bi5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oZSxpKXtpZihpfHwhbi5yZWFkeVN0YXRlfHwvbG9hZGVkfGNvbXBsZXRlLy50ZXN0KG4ucmVhZHlTdGF0ZSkpbi5vbmxvYWQ9bi5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbCxyJiZuLnBhcmVudE5vZGUmJnIucmVtb3ZlQ2hpbGQobiksbj10LGl8fG8oMjAwLCJzdWNjZXNzIil9LHIuaW5zZXJ0QmVmb3JlKG4sci5maXJzdENoaWxkKX0sYWJvcnQ6ZnVuY3Rpb24oKXtuJiZuLm9ubG9hZCgwLDEpfX19fSk7dmFyIEhuLEJuPWUuQWN0aXZlWE9iamVjdD9mdW5jdGlvbigpe2Zvcih2YXIgZSBpbiBIbilIbltlXSgwLDEpfTohMSxqbj0wO3YuYWpheFNldHRpbmdzLnhocj1lLkFjdGl2ZVhPYmplY3Q/ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5pc0xvY2FsJiZGbigpfHxJbigpfTpGbixmdW5jdGlvbihlKXt2LmV4dGVuZCh2LnN1cHBvcnQse2FqYXg6ISFlLGNvcnM6ISFlJiYid2l0aENyZWRlbnRpYWxzImluIGV9KX0odi5hamF4U2V0dGluZ3MueGhyKCkpLHYuc3VwcG9ydC5hamF4JiZ2LmFqYXhUcmFuc3BvcnQoZnVuY3Rpb24obil7aWYoIW4uY3Jvc3NEb21haW58fHYuc3VwcG9ydC5jb3JzKXt2YXIgcjtyZXR1cm57c2VuZDpmdW5jdGlvbihpLHMpe3ZhciBvLHUsYT1uLnhocigpO24udXNlcm5hbWU/YS5vcGVuKG4udHlwZSxuLnVybCxuLmFzeW5jLG4udXNlcm5hbWUsbi5wYXNzd29yZCk6YS5vcGVuKG4udHlwZSxuLnVybCxuLmFzeW5jKTtpZihuLnhockZpZWxkcylmb3IodSBpbiBuLnhockZpZWxkcylhW3VdPW4ueGhyRmllbGRzW3VdO24ubWltZVR5cGUmJmEub3ZlcnJpZGVNaW1lVHlwZSYmYS5vdmVycmlkZU1pbWVUeXBlKG4ubWltZVR5cGUpLCFuLmNyb3NzRG9tYWluJiYhaVsiWC1SZXF1ZXN0ZWQtV2l0aCJdJiYoaVsiWC1SZXF1ZXN0ZWQtV2l0aCJdPSJYTUxIdHRwUmVxdWVzdCIpO3RyeXtmb3IodSBpbiBpKWEuc2V0UmVxdWVzdEhlYWRlcih1LGlbdV0pfWNhdGNoKGYpe31hLnNlbmQobi5oYXNDb250ZW50JiZuLmRhdGF8fG51bGwpLHI9ZnVuY3Rpb24oZSxpKXt2YXIgdSxmLGwsYyxoO3RyeXtpZihyJiYoaXx8YS5yZWFkeVN0YXRlPT09NCkpe3I9dCxvJiYoYS5vbnJlYWR5c3RhdGVjaGFuZ2U9di5ub29wLEJuJiZkZWxldGUgSG5bb10pO2lmKGkpYS5yZWFkeVN0YXRlIT09NCYmYS5hYm9ydCgpO2Vsc2V7dT1hLnN0YXR1cyxsPWEuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCksYz17fSxoPWEucmVzcG9uc2VYTUwsaCYmaC5kb2N1bWVudEVsZW1lbnQmJihjLnhtbD1oKTt0cnl7Yy50ZXh0PWEucmVzcG9uc2VUZXh0fWNhdGNoKHApe310cnl7Zj1hLnN0YXR1c1RleHR9Y2F0Y2gocCl7Zj0iIn0hdSYmbi5pc0xvY2FsJiYhbi5jcm9zc0RvbWFpbj91PWMudGV4dD8yMDA6NDA0OnU9PT0xMjIzJiYodT0yMDQpfX19Y2F0Y2goZCl7aXx8cygtMSxkKX1jJiZzKHUsZixjLGwpfSxuLmFzeW5jP2EucmVhZHlTdGF0ZT09PTQ/c2V0VGltZW91dChyLDApOihvPSsram4sQm4mJihIbnx8KEhuPXt9LHYoZSkudW5sb2FkKEJuKSksSG5bb109ciksYS5vbnJlYWR5c3RhdGVjaGFuZ2U9cik6cigpfSxhYm9ydDpmdW5jdGlvbigpe3ImJnIoMCwxKX19fX0pO3ZhciBxbixSbixVbj0vXig/OnRvZ2dsZXxzaG93fGhpZGUpJC8sem49bmV3IFJlZ0V4cCgiXig/OihbLStdKT18KSgiK20rIikoW2EteiVdKikkIiwiaSIpLFduPS9xdWV1ZUhvb2tzJC8sWG49W0duXSxWbj17IioiOltmdW5jdGlvbihlLHQpe3ZhciBuLHIsaT10aGlzLmNyZWF0ZVR3ZWVuKGUsdCkscz16bi5leGVjKHQpLG89aS5jdXIoKSx1PStvfHwwLGE9MSxmPTIwO2lmKHMpe249K3NbMl0scj1zWzNdfHwodi5jc3NOdW1iZXJbZV0/IiI6InB4Iik7aWYociE9PSJweCImJnUpe3U9di5jc3MoaS5lbGVtLGUsITApfHxufHwxO2RvIGE9YXx8Ii41Iix1Lz1hLHYuc3R5bGUoaS5lbGVtLGUsdStyKTt3aGlsZShhIT09KGE9aS5jdXIoKS9vKSYmYSE9PTEmJi0tZil9aS51bml0PXIsaS5zdGFydD11LGkuZW5kPXNbMV0/dSsoc1sxXSsxKSpuOm59cmV0dXJuIGl9XX07di5BbmltYXRpb249di5leHRlbmQoS24se3R3ZWVuZXI6ZnVuY3Rpb24oZSx0KXt2LmlzRnVuY3Rpb24oZSk/KHQ9ZSxlPVsiKiJdKTplPWUuc3BsaXQoIiAiKTt2YXIgbixyPTAsaT1lLmxlbmd0aDtmb3IoO3I8aTtyKyspbj1lW3JdLFZuW25dPVZuW25dfHxbXSxWbltuXS51bnNoaWZ0KHQpfSxwcmVmaWx0ZXI6ZnVuY3Rpb24oZSx0KXt0P1huLnVuc2hpZnQoZSk6WG4ucHVzaChlKX19KSx2LlR3ZWVuPVluLFluLnByb3RvdHlwZT17Y29uc3RydWN0b3I6WW4saW5pdDpmdW5jdGlvbihlLHQsbixyLGkscyl7dGhpcy5lbGVtPWUsdGhpcy5wcm9wPW4sdGhpcy5lYXNpbmc9aXx8InN3aW5nIix0aGlzLm9wdGlvbnM9dCx0aGlzLnN0YXJ0PXRoaXMubm93PXRoaXMuY3VyKCksdGhpcy5lbmQ9cix0aGlzLnVuaXQ9c3x8KHYuY3NzTnVtYmVyW25dPyIiOiJweCIpfSxjdXI6ZnVuY3Rpb24oKXt2YXIgZT1Zbi5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gZSYmZS5nZXQ/ZS5nZXQodGhpcyk6WW4ucHJvcEhvb2tzLl9kZWZhdWx0LmdldCh0aGlzKX0scnVuOmZ1bmN0aW9uKGUpe3ZhciB0LG49WW4ucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIHRoaXMub3B0aW9ucy5kdXJhdGlvbj90aGlzLnBvcz10PXYuZWFzaW5nW3RoaXMuZWFzaW5nXShlLHRoaXMub3B0aW9ucy5kdXJhdGlvbiplLDAsMSx0aGlzLm9wdGlvbnMuZHVyYXRpb24pOnRoaXMucG9zPXQ9ZSx0aGlzLm5vdz0odGhpcy5lbmQtdGhpcy5zdGFydCkqdCt0aGlzLnN0YXJ0LHRoaXMub3B0aW9ucy5zdGVwJiZ0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKHRoaXMuZWxlbSx0aGlzLm5vdyx0aGlzKSxuJiZuLnNldD9uLnNldCh0aGlzKTpZbi5wcm9wSG9va3MuX2RlZmF1bHQuc2V0KHRoaXMpLHRoaXN9fSxZbi5wcm90b3R5cGUuaW5pdC5wcm90b3R5cGU9WW4ucHJvdG90eXBlLFluLnByb3BIb29rcz17X2RlZmF1bHQ6e2dldDpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gZS5lbGVtW2UucHJvcF09PW51bGx8fCEhZS5lbGVtLnN0eWxlJiZlLmVsZW0uc3R5bGVbZS5wcm9wXSE9bnVsbD8odD12LmNzcyhlLmVsZW0sZS5wcm9wLCExLCIiKSwhdHx8dD09PSJhdXRvIj8wOnQpOmUuZWxlbVtlLnByb3BdfSxzZXQ6ZnVuY3Rpb24oZSl7di5meC5zdGVwW2UucHJvcF0/di5meC5zdGVwW2UucHJvcF0oZSk6ZS5lbGVtLnN0eWxlJiYoZS5lbGVtLnN0eWxlW3YuY3NzUHJvcHNbZS5wcm9wXV0hPW51bGx8fHYuY3NzSG9va3NbZS5wcm9wXSk/di5zdHlsZShlLmVsZW0sZS5wcm9wLGUubm93K2UudW5pdCk6ZS5lbGVtW2UucHJvcF09ZS5ub3d9fX0sWW4ucHJvcEhvb2tzLnNjcm9sbFRvcD1Zbi5wcm9wSG9va3Muc2Nyb2xsTGVmdD17c2V0OmZ1bmN0aW9uKGUpe2UuZWxlbS5ub2RlVHlwZSYmZS5lbGVtLnBhcmVudE5vZGUmJihlLmVsZW1bZS5wcm9wXT1lLm5vdyl9fSx2LmVhY2goWyJ0b2dnbGUiLCJzaG93IiwiaGlkZSJdLGZ1bmN0aW9uKGUsdCl7dmFyIG49di5mblt0XTt2LmZuW3RdPWZ1bmN0aW9uKHIsaSxzKXtyZXR1cm4gcj09bnVsbHx8dHlwZW9mIHI9PSJib29sZWFuInx8IWUmJnYuaXNGdW5jdGlvbihyKSYmdi5pc0Z1bmN0aW9uKGkpP24uYXBwbHkodGhpcyxhcmd1bWVudHMpOnRoaXMuYW5pbWF0ZShabih0LCEwKSxyLGkscyl9fSksdi5mbi5leHRlbmQoe2ZhZGVUbzpmdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gdGhpcy5maWx0ZXIoR3QpLmNzcygib3BhY2l0eSIsMCkuc2hvdygpLmVuZCgpLmFuaW1hdGUoe29wYWNpdHk6dH0sZSxuLHIpfSxhbmltYXRlOmZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpPXYuaXNFbXB0eU9iamVjdChlKSxzPXYuc3BlZWQodCxuLHIpLG89ZnVuY3Rpb24oKXt2YXIgdD1Lbih0aGlzLHYuZXh0ZW5kKHt9LGUpLHMpO2kmJnQuc3RvcCghMCl9O3JldHVybiBpfHxzLnF1ZXVlPT09ITE/dGhpcy5lYWNoKG8pOnRoaXMucXVldWUocy5xdWV1ZSxvKX0sc3RvcDpmdW5jdGlvbihlLG4scil7dmFyIGk9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zdG9wO2RlbGV0ZSBlLnN0b3AsdChyKX07cmV0dXJuIHR5cGVvZiBlIT0ic3RyaW5nIiYmKHI9bixuPWUsZT10KSxuJiZlIT09ITEmJnRoaXMucXVldWUoZXx8ImZ4IixbXSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9ITAsbj1lIT1udWxsJiZlKyJxdWV1ZUhvb2tzIixzPXYudGltZXJzLG89di5fZGF0YSh0aGlzKTtpZihuKW9bbl0mJm9bbl0uc3RvcCYmaShvW25dKTtlbHNlIGZvcihuIGluIG8pb1tuXSYmb1tuXS5zdG9wJiZXbi50ZXN0KG4pJiZpKG9bbl0pO2ZvcihuPXMubGVuZ3RoO24tLTspc1tuXS5lbGVtPT09dGhpcyYmKGU9PW51bGx8fHNbbl0ucXVldWU9PT1lKSYmKHNbbl0uYW5pbS5zdG9wKHIpLHQ9ITEscy5zcGxpY2UobiwxKSk7KHR8fCFyKSYmdi5kZXF1ZXVlKHRoaXMsZSl9KX19KSx2LmVhY2goe3NsaWRlRG93bjpabigic2hvdyIpLHNsaWRlVXA6Wm4oImhpZGUiKSxzbGlkZVRvZ2dsZTpabigidG9nZ2xlIiksZmFkZUluOntvcGFjaXR5OiJzaG93In0sZmFkZU91dDp7b3BhY2l0eToiaGlkZSJ9LGZhZGVUb2dnbGU6e29wYWNpdHk6InRvZ2dsZSJ9fSxmdW5jdGlvbihlLHQpe3YuZm5bZV09ZnVuY3Rpb24oZSxuLHIpe3JldHVybiB0aGlzLmFuaW1hdGUodCxlLG4scil9fSksdi5zcGVlZD1mdW5jdGlvbihlLHQsbil7dmFyIHI9ZSYmdHlwZW9mIGU9PSJvYmplY3QiP3YuZXh0ZW5kKHt9LGUpOntjb21wbGV0ZTpufHwhbiYmdHx8di5pc0Z1bmN0aW9uKGUpJiZlLGR1cmF0aW9uOmUsZWFzaW5nOm4mJnR8fHQmJiF2LmlzRnVuY3Rpb24odCkmJnR9O3IuZHVyYXRpb249di5meC5vZmY/MDp0eXBlb2Ygci5kdXJhdGlvbj09Im51bWJlciI/ci5kdXJhdGlvbjpyLmR1cmF0aW9uIGluIHYuZnguc3BlZWRzP3YuZnguc3BlZWRzW3IuZHVyYXRpb25dOnYuZnguc3BlZWRzLl9kZWZhdWx0O2lmKHIucXVldWU9PW51bGx8fHIucXVldWU9PT0hMClyLnF1ZXVlPSJmeCI7cmV0dXJuIHIub2xkPXIuY29tcGxldGUsci5jb21wbGV0ZT1mdW5jdGlvbigpe3YuaXNGdW5jdGlvbihyLm9sZCkmJnIub2xkLmNhbGwodGhpcyksci5xdWV1ZSYmdi5kZXF1ZXVlKHRoaXMsci5xdWV1ZSl9LHJ9LHYuZWFzaW5nPXtsaW5lYXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LHN3aW5nOmZ1bmN0aW9uKGUpe3JldHVybi41LU1hdGguY29zKGUqTWF0aC5QSSkvMn19LHYudGltZXJzPVtdLHYuZng9WW4ucHJvdG90eXBlLmluaXQsdi5meC50aWNrPWZ1bmN0aW9uKCl7dmFyIGUsbj12LnRpbWVycyxyPTA7cW49di5ub3coKTtmb3IoO3I8bi5sZW5ndGg7cisrKWU9bltyXSwhZSgpJiZuW3JdPT09ZSYmbi5zcGxpY2Uoci0tLDEpO24ubGVuZ3RofHx2LmZ4LnN0b3AoKSxxbj10fSx2LmZ4LnRpbWVyPWZ1bmN0aW9uKGUpe2UoKSYmdi50aW1lcnMucHVzaChlKSYmIVJuJiYoUm49c2V0SW50ZXJ2YWwodi5meC50aWNrLHYuZnguaW50ZXJ2YWwpKX0sdi5meC5pbnRlcnZhbD0xMyx2LmZ4LnN0b3A9ZnVuY3Rpb24oKXtjbGVhckludGVydmFsKFJuKSxSbj1udWxsfSx2LmZ4LnNwZWVkcz17c2xvdzo2MDAsZmFzdDoyMDAsX2RlZmF1bHQ6NDAwfSx2LmZ4LnN0ZXA9e30sdi5leHByJiZ2LmV4cHIuZmlsdGVycyYmKHYuZXhwci5maWx0ZXJzLmFuaW1hdGVkPWZ1bmN0aW9uKGUpe3JldHVybiB2LmdyZXAodi50aW1lcnMsZnVuY3Rpb24odCl7cmV0dXJuIGU9PT10LmVsZW19KS5sZW5ndGh9KTt2YXIgZXI9L14oPzpib2R5fGh0bWwpJC9pO3YuZm4ub2Zmc2V0PWZ1bmN0aW9uKGUpe2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGU9PT10P3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKHQpe3Yub2Zmc2V0LnNldE9mZnNldCh0aGlzLGUsdCl9KTt2YXIgbixyLGkscyxvLHUsYSxmPXt0b3A6MCxsZWZ0OjB9LGw9dGhpc1swXSxjPWwmJmwub3duZXJEb2N1bWVudDtpZighYylyZXR1cm47cmV0dXJuKHI9Yy5ib2R5KT09PWw/di5vZmZzZXQuYm9keU9mZnNldChsKToobj1jLmRvY3VtZW50RWxlbWVudCx2LmNvbnRhaW5zKG4sbCk/KHR5cGVvZiBsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCE9InVuZGVmaW5lZCImJihmPWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpLGk9dHIoYykscz1uLmNsaWVudFRvcHx8ci5jbGllbnRUb3B8fDAsbz1uLmNsaWVudExlZnR8fHIuY2xpZW50TGVmdHx8MCx1PWkucGFnZVlPZmZzZXR8fG4uc2Nyb2xsVG9wLGE9aS5wYWdlWE9mZnNldHx8bi5zY3JvbGxMZWZ0LHt0b3A6Zi50b3ArdS1zLGxlZnQ6Zi5sZWZ0K2Etb30pOmYpfSx2Lm9mZnNldD17Ym9keU9mZnNldDpmdW5jdGlvbihlKXt2YXIgdD1lLm9mZnNldFRvcCxuPWUub2Zmc2V0TGVmdDtyZXR1cm4gdi5zdXBwb3J0LmRvZXNOb3RJbmNsdWRlTWFyZ2luSW5Cb2R5T2Zmc2V0JiYodCs9cGFyc2VGbG9hdCh2LmNzcyhlLCJtYXJnaW5Ub3AiKSl8fDAsbis9cGFyc2VGbG9hdCh2LmNzcyhlLCJtYXJnaW5MZWZ0IikpfHwwKSx7dG9wOnQsbGVmdDpufX0sc2V0T2Zmc2V0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj12LmNzcyhlLCJwb3NpdGlvbiIpO3I9PT0ic3RhdGljIiYmKGUuc3R5bGUucG9zaXRpb249InJlbGF0aXZlIik7dmFyIGk9dihlKSxzPWkub2Zmc2V0KCksbz12LmNzcyhlLCJ0b3AiKSx1PXYuY3NzKGUsImxlZnQiKSxhPShyPT09ImFic29sdXRlInx8cj09PSJmaXhlZCIpJiZ2LmluQXJyYXkoImF1dG8iLFtvLHVdKT4tMSxmPXt9LGw9e30sYyxoO2E/KGw9aS5wb3NpdGlvbigpLGM9bC50b3AsaD1sLmxlZnQpOihjPXBhcnNlRmxvYXQobyl8fDAsaD1wYXJzZUZsb2F0KHUpfHwwKSx2LmlzRnVuY3Rpb24odCkmJih0PXQuY2FsbChlLG4scykpLHQudG9wIT1udWxsJiYoZi50b3A9dC50b3Atcy50b3ArYyksdC5sZWZ0IT1udWxsJiYoZi5sZWZ0PXQubGVmdC1zLmxlZnQraCksInVzaW5nImluIHQ/dC51c2luZy5jYWxsKGUsZik6aS5jc3MoZil9fSx2LmZuLmV4dGVuZCh7cG9zaXRpb246ZnVuY3Rpb24oKXtpZighdGhpc1swXSlyZXR1cm47dmFyIGU9dGhpc1swXSx0PXRoaXMub2Zmc2V0UGFyZW50KCksbj10aGlzLm9mZnNldCgpLHI9ZXIudGVzdCh0WzBdLm5vZGVOYW1lKT97dG9wOjAsbGVmdDowfTp0Lm9mZnNldCgpO3JldHVybiBuLnRvcC09cGFyc2VGbG9hdCh2LmNzcyhlLCJtYXJnaW5Ub3AiKSl8fDAsbi5sZWZ0LT1wYXJzZUZsb2F0KHYuY3NzKGUsIm1hcmdpbkxlZnQiKSl8fDAsci50b3ArPXBhcnNlRmxvYXQodi5jc3ModFswXSwiYm9yZGVyVG9wV2lkdGgiKSl8fDAsci5sZWZ0Kz1wYXJzZUZsb2F0KHYuY3NzKHRbMF0sImJvcmRlckxlZnRXaWR0aCIpKXx8MCx7dG9wOm4udG9wLXIudG9wLGxlZnQ6bi5sZWZ0LXIubGVmdH19LG9mZnNldFBhcmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBlPXRoaXMub2Zmc2V0UGFyZW50fHxpLmJvZHk7d2hpbGUoZSYmIWVyLnRlc3QoZS5ub2RlTmFtZSkmJnYuY3NzKGUsInBvc2l0aW9uIik9PT0ic3RhdGljIillPWUub2Zmc2V0UGFyZW50O3JldHVybiBlfHxpLmJvZHl9KX19KSx2LmVhY2goe3Njcm9sbExlZnQ6InBhZ2VYT2Zmc2V0IixzY3JvbGxUb3A6InBhZ2VZT2Zmc2V0In0sZnVuY3Rpb24oZSxuKXt2YXIgcj0vWS8udGVzdChuKTt2LmZuW2VdPWZ1bmN0aW9uKGkpe3JldHVybiB2LmFjY2Vzcyh0aGlzLGZ1bmN0aW9uKGUsaSxzKXt2YXIgbz10cihlKTtpZihzPT09dClyZXR1cm4gbz9uIGluIG8/b1tuXTpvLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFtpXTplW2ldO28/by5zY3JvbGxUbyhyP3Yobykuc2Nyb2xsTGVmdCgpOnMscj9zOnYobykuc2Nyb2xsVG9wKCkpOmVbaV09c30sZSxpLGFyZ3VtZW50cy5sZW5ndGgsbnVsbCl9fSksdi5lYWNoKHtIZWlnaHQ6ImhlaWdodCIsV2lkdGg6IndpZHRoIn0sZnVuY3Rpb24oZSxuKXt2LmVhY2goe3BhZGRpbmc6ImlubmVyIitlLGNvbnRlbnQ6biwiIjoib3V0ZXIiK2V9LGZ1bmN0aW9uKHIsaSl7di5mbltpXT1mdW5jdGlvbihpLHMpe3ZhciBvPWFyZ3VtZW50cy5sZW5ndGgmJihyfHx0eXBlb2YgaSE9ImJvb2xlYW4iKSx1PXJ8fChpPT09ITB8fHM9PT0hMD8ibWFyZ2luIjoiYm9yZGVyIik7cmV0dXJuIHYuYWNjZXNzKHRoaXMsZnVuY3Rpb24obixyLGkpe3ZhciBzO3JldHVybiB2LmlzV2luZG93KG4pP24uZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50WyJjbGllbnQiK2VdOm4ubm9kZVR5cGU9PT05PyhzPW4uZG9jdW1lbnRFbGVtZW50LE1hdGgubWF4KG4uYm9keVsic2Nyb2xsIitlXSxzWyJzY3JvbGwiK2VdLG4uYm9keVsib2Zmc2V0IitlXSxzWyJvZmZzZXQiK2VdLHNbImNsaWVudCIrZV0pKTppPT09dD92LmNzcyhuLHIsaSx1KTp2LnN0eWxlKG4scixpLHUpfSxuLG8/aTp0LG8sbnVsbCl9fSl9KSxlLmpRdWVyeT1lLiQ9dix0eXBlb2YgZGVmaW5lPT0iZnVuY3Rpb24iJiZkZWZpbmUuYW1kJiZkZWZpbmUuYW1kLmpRdWVyeSYmZGVmaW5lKCJqcXVlcnkiLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIHZ9KX0pKHdpbmRvdyk7"},{"name":"jquery","src":"LyoKICogalF1ZXJ5IFRlbXBsYXRlcyBQbHVnaW4gMS4wLjBwcmUKICogaHR0cDovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS10bXBsCiAqIFJlcXVpcmVzIGpRdWVyeSAxLjQuMgogKgogKiBDb3B5cmlnaHQgMjAxMSwgU29mdHdhcmUgRnJlZWRvbSBDb25zZXJ2YW5jeSwgSW5jLgogKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgb3IgR1BMIFZlcnNpb24gMiBsaWNlbnNlcy4KICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQogKi8KKGZ1bmN0aW9uKGEpe3ZhciByPWEuZm4uZG9tTWFuaXAsZD0iX3RtcGxpdGVtIixxPS9eW148XSooPFtcd1xXXSs+KVtePl0qJHxce1x7XCEgLyxiPXt9LGY9e30sZSxwPXtrZXk6MCxkYXRhOnt9fSxpPTAsYz0wLGw9W107ZnVuY3Rpb24gZyhnLGQsaCxlKXt2YXIgYz17ZGF0YTplfHwoZT09PTB8fGU9PT1mYWxzZSk/ZTpkP2QuZGF0YTp7fSxfd3JhcDpkP2QuX3dyYXA6bnVsbCx0bXBsOm51bGwscGFyZW50OmR8fG51bGwsbm9kZXM6W10sY2FsbHM6dSxuZXN0Oncsd3JhcDp4LGh0bWw6dix1cGRhdGU6dH07ZyYmYS5leHRlbmQoYyxnLHtub2RlczpbXSxwYXJlbnQ6ZH0pO2lmKGgpe2MudG1wbD1oO2MuX2N0bnQ9Yy5fY3RudHx8Yy50bXBsKGEsYyk7Yy5rZXk9KytpOyhsLmxlbmd0aD9mOmIpW2ldPWN9cmV0dXJuIGN9YS5lYWNoKHthcHBlbmRUbzoiYXBwZW5kIixwcmVwZW5kVG86InByZXBlbmQiLGluc2VydEJlZm9yZToiYmVmb3JlIixpbnNlcnRBZnRlcjoiYWZ0ZXIiLHJlcGxhY2VBbGw6InJlcGxhY2VXaXRoIn0sZnVuY3Rpb24oZixkKXthLmZuW2ZdPWZ1bmN0aW9uKG4pe3ZhciBnPVtdLGk9YShuKSxrLGgsbSxsLGo9dGhpcy5sZW5ndGg9PT0xJiZ0aGlzWzBdLnBhcmVudE5vZGU7ZT1ifHx7fTtpZihqJiZqLm5vZGVUeXBlPT09MTEmJmouY2hpbGROb2Rlcy5sZW5ndGg9PT0xJiZpLmxlbmd0aD09PTEpe2lbZF0odGhpc1swXSk7Zz10aGlzfWVsc2V7Zm9yKGg9MCxtPWkubGVuZ3RoO2g8bTtoKyspe2M9aDtrPShoPjA/dGhpcy5jbG9uZSh0cnVlKTp0aGlzKS5nZXQoKTthKGlbaF0pW2RdKGspO2c9Zy5jb25jYXQoayl9Yz0wO2c9dGhpcy5wdXNoU3RhY2soZyxmLGkuc2VsZWN0b3IpfWw9ZTtlPW51bGw7YS50bXBsLmNvbXBsZXRlKGwpO3JldHVybiBnfX0pO2EuZm4uZXh0ZW5kKHt0bXBsOmZ1bmN0aW9uKGQsYyxiKXtyZXR1cm4gYS50bXBsKHRoaXNbMF0sZCxjLGIpfSx0bXBsSXRlbTpmdW5jdGlvbigpe3JldHVybiBhLnRtcGxJdGVtKHRoaXNbMF0pfSx0ZW1wbGF0ZTpmdW5jdGlvbihiKXtyZXR1cm4gYS50ZW1wbGF0ZShiLHRoaXNbMF0pfSxkb21NYW5pcDpmdW5jdGlvbihkLG0sayl7aWYoZFswXSYmYS5pc0FycmF5KGRbMF0pKXt2YXIgZz1hLm1ha2VBcnJheShhcmd1bWVudHMpLGg9ZFswXSxqPWgubGVuZ3RoLGk9MCxmO3doaWxlKGk8aiYmIShmPWEuZGF0YShoW2krK10sInRtcGxJdGVtIikpKTtpZihmJiZjKWdbMl09ZnVuY3Rpb24oYil7YS50bXBsLmFmdGVyTWFuaXAodGhpcyxiLGspfTtyLmFwcGx5KHRoaXMsZyl9ZWxzZSByLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtjPTA7IWUmJmEudG1wbC5jb21wbGV0ZShiKTtyZXR1cm4gdGhpc319KTthLmV4dGVuZCh7dG1wbDpmdW5jdGlvbihkLGgsZSxjKXt2YXIgaSxrPSFjO2lmKGspe2M9cDtkPWEudGVtcGxhdGVbZF18fGEudGVtcGxhdGUobnVsbCxkKTtmPXt9fWVsc2UgaWYoIWQpe2Q9Yy50bXBsO2JbYy5rZXldPWM7Yy5ub2Rlcz1bXTtjLndyYXBwZWQmJm4oYyxjLndyYXBwZWQpO3JldHVybiBhKGooYyxudWxsLGMudG1wbChhLGMpKSl9aWYoIWQpcmV0dXJuW107aWYodHlwZW9mIGg9PT0iZnVuY3Rpb24iKWg9aC5jYWxsKGN8fHt9KTtlJiZlLndyYXBwZWQmJm4oZSxlLndyYXBwZWQpO2k9YS5pc0FycmF5KGgpP2EubWFwKGgsZnVuY3Rpb24oYSl7cmV0dXJuIGE/ZyhlLGMsZCxhKTpudWxsfSk6W2coZSxjLGQsaCldO3JldHVybiBrP2EoaihjLG51bGwsaSkpOml9LHRtcGxJdGVtOmZ1bmN0aW9uKGIpe3ZhciBjO2lmKGIgaW5zdGFuY2VvZiBhKWI9YlswXTt3aGlsZShiJiZiLm5vZGVUeXBlPT09MSYmIShjPWEuZGF0YShiLCJ0bXBsSXRlbSIpKSYmKGI9Yi5wYXJlbnROb2RlKSk7cmV0dXJuIGN8fHB9LHRlbXBsYXRlOmZ1bmN0aW9uKGMsYil7aWYoYil7aWYodHlwZW9mIGI9PT0ic3RyaW5nIiliPW8oYik7ZWxzZSBpZihiIGluc3RhbmNlb2YgYSliPWJbMF18fHt9O2lmKGIubm9kZVR5cGUpYj1hLmRhdGEoYiwidG1wbCIpfHxhLmRhdGEoYiwidG1wbCIsbyhiLmlubmVySFRNTCkpO3JldHVybiB0eXBlb2YgYz09PSJzdHJpbmciPyhhLnRlbXBsYXRlW2NdPWIpOmJ9cmV0dXJuIGM/dHlwZW9mIGMhPT0ic3RyaW5nIj9hLnRlbXBsYXRlKG51bGwsYyk6YS50ZW1wbGF0ZVtjXXx8YS50ZW1wbGF0ZShudWxsLHEudGVzdChjKT9jOmEoYykpOm51bGx9LGVuY29kZTpmdW5jdGlvbihhKXtyZXR1cm4oIiIrYSkuc3BsaXQoIjwiKS5qb2luKCImbHQ7Iikuc3BsaXQoIj4iKS5qb2luKCImZ3Q7Iikuc3BsaXQoJyInKS5qb2luKCImIzM0OyIpLnNwbGl0KCInIikuam9pbigiJiMzOTsiKX19KTthLmV4dGVuZChhLnRtcGwse3RhZzp7dG1wbDp7X2RlZmF1bHQ6eyQyOiJudWxsIn0sb3BlbjoiaWYoJG5vdG51bGxfMSl7X189X18uY29uY2F0KCRpdGVtLm5lc3QoJDEsJDIpKTt9In0sd3JhcDp7X2RlZmF1bHQ6eyQyOiJudWxsIn0sb3BlbjoiJGl0ZW0uY2FsbHMoX18sJDEsJDIpO19fPVtdOyIsY2xvc2U6ImNhbGw9JGl0ZW0uY2FsbHMoKTtfXz1jYWxsLl8uY29uY2F0KCRpdGVtLndyYXAoY2FsbCxfXykpOyJ9LGVhY2g6e19kZWZhdWx0OnskMjoiJGluZGV4LCAkdmFsdWUifSxvcGVuOiJpZigkbm90bnVsbF8xKXskLmVhY2goJDFhLGZ1bmN0aW9uKCQyKXt3aXRoKHRoaXMpeyIsY2xvc2U6In19KTt9In0sImlmIjp7b3BlbjoiaWYoKCRub3RudWxsXzEpICYmICQxYSl7IixjbG9zZToifSJ9LCJlbHNlIjp7X2RlZmF1bHQ6eyQxOiJ0cnVlIn0sb3BlbjoifWVsc2UgaWYoKCRub3RudWxsXzEpICYmICQxYSl7In0saHRtbDp7b3BlbjoiaWYoJG5vdG51bGxfMSl7X18ucHVzaCgkMWEpO30ifSwiPSI6e19kZWZhdWx0OnskMToiJGRhdGEifSxvcGVuOiJpZigkbm90bnVsbF8xKXtfXy5wdXNoKCQuZW5jb2RlKCQxYSkpO30ifSwiISI6e29wZW46IiJ9fSxjb21wbGV0ZTpmdW5jdGlvbigpe2I9e319LGFmdGVyTWFuaXA6ZnVuY3Rpb24oZixiLGQpe3ZhciBlPWIubm9kZVR5cGU9PT0xMT9hLm1ha2VBcnJheShiLmNoaWxkTm9kZXMpOmIubm9kZVR5cGU9PT0xP1tiXTpbXTtkLmNhbGwoZixiKTttKGUpO2MrK319KTtmdW5jdGlvbiBqKGUsZyxmKXt2YXIgYixjPWY/YS5tYXAoZixmdW5jdGlvbihhKXtyZXR1cm4gdHlwZW9mIGE9PT0ic3RyaW5nIj9lLmtleT9hLnJlcGxhY2UoLyg8XHcrKSg/PVtccz5dKSg/IVtePl0qX3RtcGxpdGVtKShbXj5dKikvZywiJDEgIitkKyc9IicrZS5rZXkrJyIgJDInKTphOmooYSxlLGEuX2N0bnQpfSk6ZTtpZihnKXJldHVybiBjO2M9Yy5qb2luKCIiKTtjLnJlcGxhY2UoL15ccyooW148XHNdW148XSopPyg8W1x3XFddKz4pKFtePl0qW14+XHNdKT9ccyokLyxmdW5jdGlvbihmLGMsZSxkKXtiPWEoZSkuZ2V0KCk7bShiKTtpZihjKWI9ayhjKS5jb25jYXQoYik7aWYoZCliPWIuY29uY2F0KGsoZCkpfSk7cmV0dXJuIGI/YjprKGMpfWZ1bmN0aW9uIGsoYyl7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7Yi5pbm5lckhUTUw9YztyZXR1cm4gYS5tYWtlQXJyYXkoYi5jaGlsZE5vZGVzKX1mdW5jdGlvbiBvKGIpe3JldHVybiBuZXcgRnVuY3Rpb24oImpRdWVyeSIsIiRpdGVtIiwidmFyICQ9alF1ZXJ5LGNhbGwsX189W10sJGRhdGE9JGl0ZW0uZGF0YTt3aXRoKCRkYXRhKXtfXy5wdXNoKCciK2EudHJpbShiKS5yZXBsYWNlKC8oW1xcJ10pL2csIlxcJDEiKS5yZXBsYWNlKC9bXHJcdFxuXS9nLCIgIikucmVwbGFjZSgvXCRceyhbXlx9XSopXH0vZywie3s9ICQxfX0iKS5yZXBsYWNlKC9ce1x7KFwvPykoXHcrfC4pKD86XCgoKD86W15cfV18XH0oPyFcfSkpKj8pP1wpKT8oPzpccysoLio/KT8pPyhcKCgoPzpbXlx9XXxcfSg/IVx9KSkqPylcKSk/XHMqXH1cfS9nLGZ1bmN0aW9uKG0sbCxrLGcsYixjLGQpe3ZhciBqPWEudG1wbC50YWdba10saSxlLGY7aWYoIWopdGhyb3ciVW5rbm93biB0ZW1wbGF0ZSB0YWc6ICIraztpPWouX2RlZmF1bHR8fFtdO2lmKGMmJiEvXHckLy50ZXN0KGIpKXtiKz1jO2M9IiJ9aWYoYil7Yj1oKGIpO2Q9ZD8iLCIraChkKSsiKSI6Yz8iKSI6IiI7ZT1jP2IuaW5kZXhPZigiLiIpPi0xP2IraChjKToiKCIrYisiKS5jYWxsKCRpdGVtIitkOmI7Zj1jP2U6Iih0eXBlb2YoIitiKyIpPT09J2Z1bmN0aW9uJz8oIitiKyIpLmNhbGwoJGl0ZW0pOigiK2IrIikpIn1lbHNlIGY9ZT1pLiQxfHwibnVsbCI7Zz1oKGcpO3JldHVybiInKTsiK2pbbD8iY2xvc2UiOiJvcGVuIl0uc3BsaXQoIiRub3RudWxsXzEiKS5qb2luKGI/InR5cGVvZigiK2IrIikhPT0ndW5kZWZpbmVkJyAmJiAoIitiKyIpIT1udWxsIjoidHJ1ZSIpLnNwbGl0KCIkMWEiKS5qb2luKGYpLnNwbGl0KCIkMSIpLmpvaW4oZSkuc3BsaXQoIiQyIikuam9pbihnfHxpLiQyfHwiIikrIl9fLnB1c2goJyJ9KSsiJyk7fXJldHVybiBfXzsiKX1mdW5jdGlvbiBuKGMsYil7Yy5fd3JhcD1qKGMsdHJ1ZSxhLmlzQXJyYXkoYik/YjpbcS50ZXN0KGIpP2I6YShiKS5odG1sKCldKS5qb2luKCIiKX1mdW5jdGlvbiBoKGEpe3JldHVybiBhP2EucmVwbGFjZSgvXFwnL2csIiciKS5yZXBsYWNlKC9cXFxcL2csIlxcIik6bnVsbH1mdW5jdGlvbiBzKGIpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2EuYXBwZW5kQ2hpbGQoYi5jbG9uZU5vZGUodHJ1ZSkpO3JldHVybiBhLmlubmVySFRNTH1mdW5jdGlvbiBtKG8pe3ZhciBuPSJfIitjLGssaixsPXt9LGUscCxoO2ZvcihlPTAscD1vLmxlbmd0aDtlPHA7ZSsrKXtpZigoaz1vW2VdKS5ub2RlVHlwZSE9PTEpY29udGludWU7aj1rLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIik7Zm9yKGg9ai5sZW5ndGgtMTtoPj0wO2gtLSltKGpbaF0pO20oayl9ZnVuY3Rpb24gbShqKXt2YXIgcCxoPWosayxlLG07aWYobT1qLmdldEF0dHJpYnV0ZShkKSl7d2hpbGUoaC5wYXJlbnROb2RlJiYoaD1oLnBhcmVudE5vZGUpLm5vZGVUeXBlPT09MSYmIShwPWguZ2V0QXR0cmlidXRlKGQpKSk7aWYocCE9PW0pe2g9aC5wYXJlbnROb2RlP2gubm9kZVR5cGU9PT0xMT8wOmguZ2V0QXR0cmlidXRlKGQpfHwwOjA7aWYoIShlPWJbbV0pKXtlPWZbbV07ZT1nKGUsYltoXXx8ZltoXSk7ZS5rZXk9KytpO2JbaV09ZX1jJiZvKG0pfWoucmVtb3ZlQXR0cmlidXRlKGQpfWVsc2UgaWYoYyYmKGU9YS5kYXRhKGosInRtcGxJdGVtIikpKXtvKGUua2V5KTtiW2Uua2V5XT1lO2g9YS5kYXRhKGoucGFyZW50Tm9kZSwidG1wbEl0ZW0iKTtoPWg/aC5rZXk6MH1pZihlKXtrPWU7d2hpbGUoayYmay5rZXkhPWgpe2subm9kZXMucHVzaChqKTtrPWsucGFyZW50fWRlbGV0ZSBlLl9jdG50O2RlbGV0ZSBlLl93cmFwO2EuZGF0YShqLCJ0bXBsSXRlbSIsZSl9ZnVuY3Rpb24gbyhhKXthPWErbjtlPWxbYV09bFthXXx8ZyhlLGJbZS5wYXJlbnQua2V5K25dfHxlLnBhcmVudCl9fX1mdW5jdGlvbiB1KGEsZCxjLGIpe2lmKCFhKXJldHVybiBsLnBvcCgpO2wucHVzaCh7XzphLHRtcGw6ZCxpdGVtOnRoaXMsZGF0YTpjLG9wdGlvbnM6Yn0pfWZ1bmN0aW9uIHcoZCxjLGIpe3JldHVybiBhLnRtcGwoYS50ZW1wbGF0ZShkKSxjLGIsdGhpcyl9ZnVuY3Rpb24geChiLGQpe3ZhciBjPWIub3B0aW9uc3x8e307Yy53cmFwcGVkPWQ7cmV0dXJuIGEudG1wbChhLnRlbXBsYXRlKGIudG1wbCksYi5kYXRhLGMsYi5pdGVtKX1mdW5jdGlvbiB2KGQsYyl7dmFyIGI9dGhpcy5fd3JhcDtyZXR1cm4gYS5tYXAoYShhLmlzQXJyYXkoYik/Yi5qb2luKCIiKTpiKS5maWx0ZXIoZHx8IioiKSxmdW5jdGlvbihhKXtyZXR1cm4gYz9hLmlubmVyVGV4dHx8YS50ZXh0Q29udGVudDphLm91dGVySFRNTHx8cyhhKX0pfWZ1bmN0aW9uIHQoKXt2YXIgYj10aGlzLm5vZGVzO2EudG1wbChudWxsLG51bGwsbnVsbCx0aGlzKS5pbnNlcnRCZWZvcmUoYlswXSk7YShiKS5yZW1vdmUoKX19KShqUXVlcnkpOw=="},{"name":"jquery-ui-1","src":"LyohIGpRdWVyeSBVSSAtIHYxLjkuMiAtIDIwMTItMTItMDgKKiBodHRwOi8vanF1ZXJ5dWkuY29tCiogSW5jbHVkZXM6IGpxdWVyeS51aS5jb3JlLmpzLCBqcXVlcnkudWkud2lkZ2V0LmpzLCBqcXVlcnkudWkubW91c2UuanMsIGpxdWVyeS51aS5wb3NpdGlvbi5qcywganF1ZXJ5LnVpLmRyYWdnYWJsZS5qcywganF1ZXJ5LnVpLmRyb3BwYWJsZS5qcywganF1ZXJ5LnVpLnJlc2l6YWJsZS5qcywganF1ZXJ5LnVpLnNlbGVjdGFibGUuanMsIGpxdWVyeS51aS5zb3J0YWJsZS5qcywganF1ZXJ5LnVpLmFjY29yZGlvbi5qcywganF1ZXJ5LnVpLmF1dG9jb21wbGV0ZS5qcywganF1ZXJ5LnVpLmJ1dHRvbi5qcywganF1ZXJ5LnVpLmRhdGVwaWNrZXIuanMsIGpxdWVyeS51aS5kaWFsb2cuanMsIGpxdWVyeS51aS5tZW51LmpzLCBqcXVlcnkudWkucHJvZ3Jlc3NiYXIuanMsIGpxdWVyeS51aS5zbGlkZXIuanMsIGpxdWVyeS51aS5zcGlubmVyLmpzLCBqcXVlcnkudWkudGFicy5qcywganF1ZXJ5LnVpLnRvb2x0aXAuanMsIGpxdWVyeS51aS5lZmZlY3QuanMsIGpxdWVyeS51aS5lZmZlY3QtYmxpbmQuanMsIGpxdWVyeS51aS5lZmZlY3QtYm91bmNlLmpzLCBqcXVlcnkudWkuZWZmZWN0LWNsaXAuanMsIGpxdWVyeS51aS5lZmZlY3QtZHJvcC5qcywganF1ZXJ5LnVpLmVmZmVjdC1leHBsb2RlLmpzLCBqcXVlcnkudWkuZWZmZWN0LWZhZGUuanMsIGpxdWVyeS51aS5lZmZlY3QtZm9sZC5qcywganF1ZXJ5LnVpLmVmZmVjdC1oaWdobGlnaHQuanMsIGpxdWVyeS51aS5lZmZlY3QtcHVsc2F0ZS5qcywganF1ZXJ5LnVpLmVmZmVjdC1zY2FsZS5qcywganF1ZXJ5LnVpLmVmZmVjdC1zaGFrZS5qcywganF1ZXJ5LnVpLmVmZmVjdC1zbGlkZS5qcywganF1ZXJ5LnVpLmVmZmVjdC10cmFuc2Zlci5qcwoqIENvcHlyaWdodCAoYykgMjAxMiBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIExpY2Vuc2VkIE1JVCAqLwoKKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7Cgp2YXIgdXVpZCA9IDAsCglydW5pcXVlSWQgPSAvXnVpLWlkLVxkKyQvOwoKLy8gcHJldmVudCBkdXBsaWNhdGUgbG9hZGluZwovLyB0aGlzIGlzIG9ubHkgYSBwcm9ibGVtIGJlY2F1c2Ugd2UgcHJveHkgZXhpc3RpbmcgZnVuY3Rpb25zCi8vIGFuZCB3ZSBkb24ndCB3YW50IHRvIGRvdWJsZSBwcm94eSB0aGVtCiQudWkgPSAkLnVpIHx8IHt9OwppZiAoICQudWkudmVyc2lvbiApIHsKCXJldHVybjsKfQoKJC5leHRlbmQoICQudWksIHsKCXZlcnNpb246ICIxLjkuMiIsCgoJa2V5Q29kZTogewoJCUJBQ0tTUEFDRTogOCwKCQlDT01NQTogMTg4LAoJCURFTEVURTogNDYsCgkJRE9XTjogNDAsCgkJRU5EOiAzNSwKCQlFTlRFUjogMTMsCgkJRVNDQVBFOiAyNywKCQlIT01FOiAzNiwKCQlMRUZUOiAzNywKCQlOVU1QQURfQUREOiAxMDcsCgkJTlVNUEFEX0RFQ0lNQUw6IDExMCwKCQlOVU1QQURfRElWSURFOiAxMTEsCgkJTlVNUEFEX0VOVEVSOiAxMDgsCgkJTlVNUEFEX01VTFRJUExZOiAxMDYsCgkJTlVNUEFEX1NVQlRSQUNUOiAxMDksCgkJUEFHRV9ET1dOOiAzNCwKCQlQQUdFX1VQOiAzMywKCQlQRVJJT0Q6IDE5MCwKCQlSSUdIVDogMzksCgkJU1BBQ0U6IDMyLAoJCVRBQjogOSwKCQlVUDogMzgKCX0KfSk7CgovLyBwbHVnaW5zCiQuZm4uZXh0ZW5kKHsKCV9mb2N1czogJC5mbi5mb2N1cywKCWZvY3VzOiBmdW5jdGlvbiggZGVsYXksIGZuICkgewoJCXJldHVybiB0eXBlb2YgZGVsYXkgPT09ICJudW1iZXIiID8KCQkJdGhpcy5lYWNoKGZ1bmN0aW9uKCkgewoJCQkJdmFyIGVsZW0gPSB0aGlzOwoJCQkJc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCQkkKCBlbGVtICkuZm9jdXMoKTsKCQkJCQlpZiAoIGZuICkgewoJCQkJCQlmbi5jYWxsKCBlbGVtICk7CgkJCQkJfQoJCQkJfSwgZGVsYXkgKTsKCQkJfSkgOgoJCQl0aGlzLl9mb2N1cy5hcHBseSggdGhpcywgYXJndW1lbnRzICk7Cgl9LAoKCXNjcm9sbFBhcmVudDogZnVuY3Rpb24oKSB7CgkJdmFyIHNjcm9sbFBhcmVudDsKCQlpZiAoKCQudWkuaWUgJiYgKC8oc3RhdGljfHJlbGF0aXZlKS8pLnRlc3QodGhpcy5jc3MoJ3Bvc2l0aW9uJykpKSB8fCAoL2Fic29sdXRlLykudGVzdCh0aGlzLmNzcygncG9zaXRpb24nKSkpIHsKCQkJc2Nyb2xsUGFyZW50ID0gdGhpcy5wYXJlbnRzKCkuZmlsdGVyKGZ1bmN0aW9uKCkgewoJCQkJcmV0dXJuICgvKHJlbGF0aXZlfGFic29sdXRlfGZpeGVkKS8pLnRlc3QoJC5jc3ModGhpcywncG9zaXRpb24nKSkgJiYgKC8oYXV0b3xzY3JvbGwpLykudGVzdCgkLmNzcyh0aGlzLCdvdmVyZmxvdycpKyQuY3NzKHRoaXMsJ292ZXJmbG93LXknKSskLmNzcyh0aGlzLCdvdmVyZmxvdy14JykpOwoJCQl9KS5lcSgwKTsKCQl9IGVsc2UgewoJCQlzY3JvbGxQYXJlbnQgPSB0aGlzLnBhcmVudHMoKS5maWx0ZXIoZnVuY3Rpb24oKSB7CgkJCQlyZXR1cm4gKC8oYXV0b3xzY3JvbGwpLykudGVzdCgkLmNzcyh0aGlzLCdvdmVyZmxvdycpKyQuY3NzKHRoaXMsJ292ZXJmbG93LXknKSskLmNzcyh0aGlzLCdvdmVyZmxvdy14JykpOwoJCQl9KS5lcSgwKTsKCQl9CgoJCXJldHVybiAoL2ZpeGVkLykudGVzdCh0aGlzLmNzcygncG9zaXRpb24nKSkgfHwgIXNjcm9sbFBhcmVudC5sZW5ndGggPyAkKGRvY3VtZW50KSA6IHNjcm9sbFBhcmVudDsKCX0sCgoJekluZGV4OiBmdW5jdGlvbiggekluZGV4ICkgewoJCWlmICggekluZGV4ICE9PSB1bmRlZmluZWQgKSB7CgkJCXJldHVybiB0aGlzLmNzcyggInpJbmRleCIsIHpJbmRleCApOwoJCX0KCgkJaWYgKCB0aGlzLmxlbmd0aCApIHsKCQkJdmFyIGVsZW0gPSAkKCB0aGlzWyAwIF0gKSwgcG9zaXRpb24sIHZhbHVlOwoJCQl3aGlsZSAoIGVsZW0ubGVuZ3RoICYmIGVsZW1bIDAgXSAhPT0gZG9jdW1lbnQgKSB7CgkJCQkvLyBJZ25vcmUgei1pbmRleCBpZiBwb3NpdGlvbiBpcyBzZXQgdG8gYSB2YWx1ZSB3aGVyZSB6LWluZGV4IGlzIGlnbm9yZWQgYnkgdGhlIGJyb3dzZXIKCQkJCS8vIFRoaXMgbWFrZXMgYmVoYXZpb3Igb2YgdGhpcyBmdW5jdGlvbiBjb25zaXN0ZW50IGFjcm9zcyBicm93c2VycwoJCQkJLy8gV2ViS2l0IGFsd2F5cyByZXR1cm5zIGF1dG8gaWYgdGhlIGVsZW1lbnQgaXMgcG9zaXRpb25lZAoJCQkJcG9zaXRpb24gPSBlbGVtLmNzcyggInBvc2l0aW9uIiApOwoJCQkJaWYgKCBwb3NpdGlvbiA9PT0gImFic29sdXRlIiB8fCBwb3NpdGlvbiA9PT0gInJlbGF0aXZlIiB8fCBwb3NpdGlvbiA9PT0gImZpeGVkIiApIHsKCQkJCQkvLyBJRSByZXR1cm5zIDAgd2hlbiB6SW5kZXggaXMgbm90IHNwZWNpZmllZAoJCQkJCS8vIG90aGVyIGJyb3dzZXJzIHJldHVybiBhIHN0cmluZwoJCQkJCS8vIHdlIGlnbm9yZSB0aGUgY2FzZSBvZiBuZXN0ZWQgZWxlbWVudHMgd2l0aCBhbiBleHBsaWNpdCB2YWx1ZSBvZiAwCgkJCQkJLy8gPGRpdiBzdHlsZT0iei1pbmRleDogLTEwOyI+PGRpdiBzdHlsZT0iei1pbmRleDogMDsiPjwvZGl2PjwvZGl2PgoJCQkJCXZhbHVlID0gcGFyc2VJbnQoIGVsZW0uY3NzKCAiekluZGV4IiApLCAxMCApOwoJCQkJCWlmICggIWlzTmFOKCB2YWx1ZSApICYmIHZhbHVlICE9PSAwICkgewoJCQkJCQlyZXR1cm4gdmFsdWU7CgkJCQkJfQoJCQkJfQoJCQkJZWxlbSA9IGVsZW0ucGFyZW50KCk7CgkJCX0KCQl9CgoJCXJldHVybiAwOwoJfSwKCgl1bmlxdWVJZDogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHsKCQkJaWYgKCAhdGhpcy5pZCApIHsKCQkJCXRoaXMuaWQgPSAidWktaWQtIiArICgrK3V1aWQpOwoJCQl9CgkJfSk7Cgl9LAoKCXJlbW92ZVVuaXF1ZUlkOiBmdW5jdGlvbigpIHsKCQlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkgewoJCQlpZiAoIHJ1bmlxdWVJZC50ZXN0KCB0aGlzLmlkICkgKSB7CgkJCQkkKCB0aGlzICkucmVtb3ZlQXR0ciggImlkIiApOwoJCQl9CgkJfSk7Cgl9Cn0pOwoKLy8gc2VsZWN0b3JzCmZ1bmN0aW9uIGZvY3VzYWJsZSggZWxlbWVudCwgaXNUYWJJbmRleE5vdE5hTiApIHsKCXZhciBtYXAsIG1hcE5hbWUsIGltZywKCQlub2RlTmFtZSA9IGVsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsKCWlmICggImFyZWEiID09PSBub2RlTmFtZSApIHsKCQltYXAgPSBlbGVtZW50LnBhcmVudE5vZGU7CgkJbWFwTmFtZSA9IG1hcC5uYW1lOwoJCWlmICggIWVsZW1lbnQuaHJlZiB8fCAhbWFwTmFtZSB8fCBtYXAubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAhPT0gIm1hcCIgKSB7CgkJCXJldHVybiBmYWxzZTsKCQl9CgkJaW1nID0gJCggImltZ1t1c2VtYXA9IyIgKyBtYXBOYW1lICsgIl0iIClbMF07CgkJcmV0dXJuICEhaW1nICYmIHZpc2libGUoIGltZyApOwoJfQoJcmV0dXJuICggL2lucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b258b2JqZWN0Ly50ZXN0KCBub2RlTmFtZSApID8KCQkhZWxlbWVudC5kaXNhYmxlZCA6CgkJImEiID09PSBub2RlTmFtZSA/CgkJCWVsZW1lbnQuaHJlZiB8fCBpc1RhYkluZGV4Tm90TmFOIDoKCQkJaXNUYWJJbmRleE5vdE5hTikgJiYKCQkvLyB0aGUgZWxlbWVudCBhbmQgYWxsIG9mIGl0cyBhbmNlc3RvcnMgbXVzdCBiZSB2aXNpYmxlCgkJdmlzaWJsZSggZWxlbWVudCApOwp9CgpmdW5jdGlvbiB2aXNpYmxlKCBlbGVtZW50ICkgewoJcmV0dXJuICQuZXhwci5maWx0ZXJzLnZpc2libGUoIGVsZW1lbnQgKSAmJgoJCSEkKCBlbGVtZW50ICkucGFyZW50cygpLmFuZFNlbGYoKS5maWx0ZXIoZnVuY3Rpb24oKSB7CgkJCXJldHVybiAkLmNzcyggdGhpcywgInZpc2liaWxpdHkiICkgPT09ICJoaWRkZW4iOwoJCX0pLmxlbmd0aDsKfQoKJC5leHRlbmQoICQuZXhwclsgIjoiIF0sIHsKCWRhdGE6ICQuZXhwci5jcmVhdGVQc2V1ZG8gPwoJCSQuZXhwci5jcmVhdGVQc2V1ZG8oZnVuY3Rpb24oIGRhdGFOYW1lICkgewoJCQlyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQlyZXR1cm4gISEkLmRhdGEoIGVsZW0sIGRhdGFOYW1lICk7CgkJCX07CgkJfSkgOgoJCS8vIHN1cHBvcnQ6IGpRdWVyeSA8MS44CgkJZnVuY3Rpb24oIGVsZW0sIGksIG1hdGNoICkgewoJCQlyZXR1cm4gISEkLmRhdGEoIGVsZW0sIG1hdGNoWyAzIF0gKTsKCQl9LAoKCWZvY3VzYWJsZTogZnVuY3Rpb24oIGVsZW1lbnQgKSB7CgkJcmV0dXJuIGZvY3VzYWJsZSggZWxlbWVudCwgIWlzTmFOKCAkLmF0dHIoIGVsZW1lbnQsICJ0YWJpbmRleCIgKSApICk7Cgl9LAoKCXRhYmJhYmxlOiBmdW5jdGlvbiggZWxlbWVudCApIHsKCQl2YXIgdGFiSW5kZXggPSAkLmF0dHIoIGVsZW1lbnQsICJ0YWJpbmRleCIgKSwKCQkJaXNUYWJJbmRleE5hTiA9IGlzTmFOKCB0YWJJbmRleCApOwoJCXJldHVybiAoIGlzVGFiSW5kZXhOYU4gfHwgdGFiSW5kZXggPj0gMCApICYmIGZvY3VzYWJsZSggZWxlbWVudCwgIWlzVGFiSW5kZXhOYU4gKTsKCX0KfSk7CgovLyBzdXBwb3J0CiQoZnVuY3Rpb24oKSB7Cgl2YXIgYm9keSA9IGRvY3VtZW50LmJvZHksCgkJZGl2ID0gYm9keS5hcHBlbmRDaGlsZCggZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImRpdiIgKSApOwoKCS8vIGFjY2VzcyBvZmZzZXRIZWlnaHQgYmVmb3JlIHNldHRpbmcgdGhlIHN0eWxlIHRvIHByZXZlbnQgYSBsYXlvdXQgYnVnCgkvLyBpbiBJRSA5IHdoaWNoIGNhdXNlcyB0aGUgZWxlbWVudCB0byBjb250aW51ZSB0byB0YWtlIHVwIHNwYWNlIGV2ZW4KCS8vIGFmdGVyIGl0IGlzIHJlbW92ZWQgZnJvbSB0aGUgRE9NICgjODAyNikKCWRpdi5vZmZzZXRIZWlnaHQ7CgoJJC5leHRlbmQoIGRpdi5zdHlsZSwgewoJCW1pbkhlaWdodDogIjEwMHB4IiwKCQloZWlnaHQ6ICJhdXRvIiwKCQlwYWRkaW5nOiAwLAoJCWJvcmRlcldpZHRoOiAwCgl9KTsKCgkkLnN1cHBvcnQubWluSGVpZ2h0ID0gZGl2Lm9mZnNldEhlaWdodCA9PT0gMTAwOwoJJC5zdXBwb3J0LnNlbGVjdHN0YXJ0ID0gIm9uc2VsZWN0c3RhcnQiIGluIGRpdjsKCgkvLyBzZXQgZGlzcGxheSB0byBub25lIHRvIGF2b2lkIGEgbGF5b3V0IGJ1ZyBpbiBJRQoJLy8gaHR0cDovL2Rldi5qcXVlcnkuY29tL3RpY2tldC80MDE0Cglib2R5LnJlbW92ZUNoaWxkKCBkaXYgKS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwp9KTsKCi8vIHN1cHBvcnQ6IGpRdWVyeSA8MS44CmlmICggISQoICI8YT4iICkub3V0ZXJXaWR0aCggMSApLmpxdWVyeSApIHsKCSQuZWFjaCggWyAiV2lkdGgiLCAiSGVpZ2h0IiBdLCBmdW5jdGlvbiggaSwgbmFtZSApIHsKCQl2YXIgc2lkZSA9IG5hbWUgPT09ICJXaWR0aCIgPyBbICJMZWZ0IiwgIlJpZ2h0IiBdIDogWyAiVG9wIiwgIkJvdHRvbSIgXSwKCQkJdHlwZSA9IG5hbWUudG9Mb3dlckNhc2UoKSwKCQkJb3JpZyA9IHsKCQkJCWlubmVyV2lkdGg6ICQuZm4uaW5uZXJXaWR0aCwKCQkJCWlubmVySGVpZ2h0OiAkLmZuLmlubmVySGVpZ2h0LAoJCQkJb3V0ZXJXaWR0aDogJC5mbi5vdXRlcldpZHRoLAoJCQkJb3V0ZXJIZWlnaHQ6ICQuZm4ub3V0ZXJIZWlnaHQKCQkJfTsKCgkJZnVuY3Rpb24gcmVkdWNlKCBlbGVtLCBzaXplLCBib3JkZXIsIG1hcmdpbiApIHsKCQkJJC5lYWNoKCBzaWRlLCBmdW5jdGlvbigpIHsKCQkJCXNpemUgLT0gcGFyc2VGbG9hdCggJC5jc3MoIGVsZW0sICJwYWRkaW5nIiArIHRoaXMgKSApIHx8IDA7CgkJCQlpZiAoIGJvcmRlciApIHsKCQkJCQlzaXplIC09IHBhcnNlRmxvYXQoICQuY3NzKCBlbGVtLCAiYm9yZGVyIiArIHRoaXMgKyAiV2lkdGgiICkgKSB8fCAwOwoJCQkJfQoJCQkJaWYgKCBtYXJnaW4gKSB7CgkJCQkJc2l6ZSAtPSBwYXJzZUZsb2F0KCAkLmNzcyggZWxlbSwgIm1hcmdpbiIgKyB0aGlzICkgKSB8fCAwOwoJCQkJfQoJCQl9KTsKCQkJcmV0dXJuIHNpemU7CgkJfQoKCQkkLmZuWyAiaW5uZXIiICsgbmFtZSBdID0gZnVuY3Rpb24oIHNpemUgKSB7CgkJCWlmICggc2l6ZSA9PT0gdW5kZWZpbmVkICkgewoJCQkJcmV0dXJuIG9yaWdbICJpbm5lciIgKyBuYW1lIF0uY2FsbCggdGhpcyApOwoJCQl9CgoJCQlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkgewoJCQkJJCggdGhpcyApLmNzcyggdHlwZSwgcmVkdWNlKCB0aGlzLCBzaXplICkgKyAicHgiICk7CgkJCX0pOwoJCX07CgoJCSQuZm5bICJvdXRlciIgKyBuYW1lXSA9IGZ1bmN0aW9uKCBzaXplLCBtYXJnaW4gKSB7CgkJCWlmICggdHlwZW9mIHNpemUgIT09ICJudW1iZXIiICkgewoJCQkJcmV0dXJuIG9yaWdbICJvdXRlciIgKyBuYW1lIF0uY2FsbCggdGhpcywgc2l6ZSApOwoJCQl9CgoJCQlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkgewoJCQkJJCggdGhpcykuY3NzKCB0eXBlLCByZWR1Y2UoIHRoaXMsIHNpemUsIHRydWUsIG1hcmdpbiApICsgInB4IiApOwoJCQl9KTsKCQl9OwoJfSk7Cn0KCi8vIHN1cHBvcnQ6IGpRdWVyeSAxLjYuMSwgMS42LjIgKGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0Lzk0MTMpCmlmICggJCggIjxhPiIgKS5kYXRhKCAiYS1iIiwgImEiICkucmVtb3ZlRGF0YSggImEtYiIgKS5kYXRhKCAiYS1iIiApICkgewoJJC5mbi5yZW1vdmVEYXRhID0gKGZ1bmN0aW9uKCByZW1vdmVEYXRhICkgewoJCXJldHVybiBmdW5jdGlvbigga2V5ICkgewoJCQlpZiAoIGFyZ3VtZW50cy5sZW5ndGggKSB7CgkJCQlyZXR1cm4gcmVtb3ZlRGF0YS5jYWxsKCB0aGlzLCAkLmNhbWVsQ2FzZSgga2V5ICkgKTsKCQkJfSBlbHNlIHsKCQkJCXJldHVybiByZW1vdmVEYXRhLmNhbGwoIHRoaXMgKTsKCQkJfQoJCX07Cgl9KSggJC5mbi5yZW1vdmVEYXRhICk7Cn0KCgoKCgovLyBkZXByZWNhdGVkCgooZnVuY3Rpb24oKSB7Cgl2YXIgdWFNYXRjaCA9IC9tc2llIChbXHcuXSspLy5leGVjKCBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkgKSB8fCBbXTsKCSQudWkuaWUgPSB1YU1hdGNoLmxlbmd0aCA/IHRydWUgOiBmYWxzZTsKCSQudWkuaWU2ID0gcGFyc2VGbG9hdCggdWFNYXRjaFsgMSBdLCAxMCApID09PSA2Owp9KSgpOwoKJC5mbi5leHRlbmQoewoJZGlzYWJsZVNlbGVjdGlvbjogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHRoaXMuYmluZCggKCAkLnN1cHBvcnQuc2VsZWN0c3RhcnQgPyAic2VsZWN0c3RhcnQiIDogIm1vdXNlZG93biIgKSArCgkJCSIudWktZGlzYWJsZVNlbGVjdGlvbiIsIGZ1bmN0aW9uKCBldmVudCApIHsKCQkJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgkJCX0pOwoJfSwKCgllbmFibGVTZWxlY3Rpb246IGZ1bmN0aW9uKCkgewoJCXJldHVybiB0aGlzLnVuYmluZCggIi51aS1kaXNhYmxlU2VsZWN0aW9uIiApOwoJfQp9KTsKCiQuZXh0ZW5kKCAkLnVpLCB7CgkvLyAkLnVpLnBsdWdpbiBpcyBkZXByZWNhdGVkLiAgVXNlIHRoZSBwcm94eSBwYXR0ZXJuIGluc3RlYWQuCglwbHVnaW46IHsKCQlhZGQ6IGZ1bmN0aW9uKCBtb2R1bGUsIG9wdGlvbiwgc2V0ICkgewoJCQl2YXIgaSwKCQkJCXByb3RvID0gJC51aVsgbW9kdWxlIF0ucHJvdG90eXBlOwoJCQlmb3IgKCBpIGluIHNldCApIHsKCQkJCXByb3RvLnBsdWdpbnNbIGkgXSA9IHByb3RvLnBsdWdpbnNbIGkgXSB8fCBbXTsKCQkJCXByb3RvLnBsdWdpbnNbIGkgXS5wdXNoKCBbIG9wdGlvbiwgc2V0WyBpIF0gXSApOwoJCQl9CgkJfSwKCQljYWxsOiBmdW5jdGlvbiggaW5zdGFuY2UsIG5hbWUsIGFyZ3MgKSB7CgkJCXZhciBpLAoJCQkJc2V0ID0gaW5zdGFuY2UucGx1Z2luc1sgbmFtZSBdOwoJCQlpZiAoICFzZXQgfHwgIWluc3RhbmNlLmVsZW1lbnRbIDAgXS5wYXJlbnROb2RlIHx8IGluc3RhbmNlLmVsZW1lbnRbIDAgXS5wYXJlbnROb2RlLm5vZGVUeXBlID09PSAxMSApIHsKCQkJCXJldHVybjsKCQkJfQoKCQkJZm9yICggaSA9IDA7IGkgPCBzZXQubGVuZ3RoOyBpKysgKSB7CgkJCQlpZiAoIGluc3RhbmNlLm9wdGlvbnNbIHNldFsgaSBdWyAwIF0gXSApIHsKCQkJCQlzZXRbIGkgXVsgMSBdLmFwcGx5KCBpbnN0YW5jZS5lbGVtZW50LCBhcmdzICk7CgkJCQl9CgkJCX0KCQl9Cgl9LAoKCWNvbnRhaW5zOiAkLmNvbnRhaW5zLAoKCS8vIG9ubHkgdXNlZCBieSByZXNpemFibGUKCWhhc1Njcm9sbDogZnVuY3Rpb24oIGVsLCBhICkgewoKCQkvL0lmIG92ZXJmbG93IGlzIGhpZGRlbiwgdGhlIGVsZW1lbnQgbWlnaHQgaGF2ZSBleHRyYSBjb250ZW50LCBidXQgdGhlIHVzZXIgd2FudHMgdG8gaGlkZSBpdAoJCWlmICggJCggZWwgKS5jc3MoICJvdmVyZmxvdyIgKSA9PT0gImhpZGRlbiIpIHsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCgkJdmFyIHNjcm9sbCA9ICggYSAmJiBhID09PSAibGVmdCIgKSA/ICJzY3JvbGxMZWZ0IiA6ICJzY3JvbGxUb3AiLAoJCQloYXMgPSBmYWxzZTsKCgkJaWYgKCBlbFsgc2Nyb2xsIF0gPiAwICkgewoJCQlyZXR1cm4gdHJ1ZTsKCQl9CgoJCS8vIFRPRE86IGRldGVybWluZSB3aGljaCBjYXNlcyBhY3R1YWxseSBjYXVzZSB0aGlzIHRvIGhhcHBlbgoJCS8vIGlmIHRoZSBlbGVtZW50IGRvZXNuJ3QgaGF2ZSB0aGUgc2Nyb2xsIHNldCwgc2VlIGlmIGl0J3MgcG9zc2libGUgdG8KCQkvLyBzZXQgdGhlIHNjcm9sbAoJCWVsWyBzY3JvbGwgXSA9IDE7CgkJaGFzID0gKCBlbFsgc2Nyb2xsIF0gPiAwICk7CgkJZWxbIHNjcm9sbCBdID0gMDsKCQlyZXR1cm4gaGFzOwoJfSwKCgkvLyB0aGVzZSBhcmUgb2RkIGZ1bmN0aW9ucywgZml4IHRoZSBBUEkgb3IgbW92ZSBpbnRvIGluZGl2aWR1YWwgcGx1Z2lucwoJaXNPdmVyQXhpczogZnVuY3Rpb24oIHgsIHJlZmVyZW5jZSwgc2l6ZSApIHsKCQkvL0RldGVybWluZXMgd2hlbiB4IGNvb3JkaW5hdGUgaXMgb3ZlciAiYiIgZWxlbWVudCBheGlzCgkJcmV0dXJuICggeCA+IHJlZmVyZW5jZSApICYmICggeCA8ICggcmVmZXJlbmNlICsgc2l6ZSApICk7Cgl9LAoJaXNPdmVyOiBmdW5jdGlvbiggeSwgeCwgdG9wLCBsZWZ0LCBoZWlnaHQsIHdpZHRoICkgewoJCS8vRGV0ZXJtaW5lcyB3aGVuIHgsIHkgY29vcmRpbmF0ZXMgaXMgb3ZlciAiYiIgZWxlbWVudAoJCXJldHVybiAkLnVpLmlzT3ZlckF4aXMoIHksIHRvcCwgaGVpZ2h0ICkgJiYgJC51aS5pc092ZXJBeGlzKCB4LCBsZWZ0LCB3aWR0aCApOwoJfQp9KTsKCn0pKCBqUXVlcnkgKTsKKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7Cgp2YXIgdXVpZCA9IDAsCglzbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZSwKCV9jbGVhbkRhdGEgPSAkLmNsZWFuRGF0YTsKJC5jbGVhbkRhdGEgPSBmdW5jdGlvbiggZWxlbXMgKSB7Cglmb3IgKCB2YXIgaSA9IDAsIGVsZW07IChlbGVtID0gZWxlbXNbaV0pICE9IG51bGw7IGkrKyApIHsKCQl0cnkgewoJCQkkKCBlbGVtICkudHJpZ2dlckhhbmRsZXIoICJyZW1vdmUiICk7CgkJLy8gaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvODIzNQoJCX0gY2F0Y2goIGUgKSB7fQoJfQoJX2NsZWFuRGF0YSggZWxlbXMgKTsKfTsKCiQud2lkZ2V0ID0gZnVuY3Rpb24oIG5hbWUsIGJhc2UsIHByb3RvdHlwZSApIHsKCXZhciBmdWxsTmFtZSwgZXhpc3RpbmdDb25zdHJ1Y3RvciwgY29uc3RydWN0b3IsIGJhc2VQcm90b3R5cGUsCgkJbmFtZXNwYWNlID0gbmFtZS5zcGxpdCggIi4iIClbIDAgXTsKCgluYW1lID0gbmFtZS5zcGxpdCggIi4iIClbIDEgXTsKCWZ1bGxOYW1lID0gbmFtZXNwYWNlICsgIi0iICsgbmFtZTsKCglpZiAoICFwcm90b3R5cGUgKSB7CgkJcHJvdG90eXBlID0gYmFzZTsKCQliYXNlID0gJC5XaWRnZXQ7Cgl9CgoJLy8gY3JlYXRlIHNlbGVjdG9yIGZvciBwbHVnaW4KCSQuZXhwclsgIjoiIF1bIGZ1bGxOYW1lLnRvTG93ZXJDYXNlKCkgXSA9IGZ1bmN0aW9uKCBlbGVtICkgewoJCXJldHVybiAhISQuZGF0YSggZWxlbSwgZnVsbE5hbWUgKTsKCX07CgoJJFsgbmFtZXNwYWNlIF0gPSAkWyBuYW1lc3BhY2UgXSB8fCB7fTsKCWV4aXN0aW5nQ29uc3RydWN0b3IgPSAkWyBuYW1lc3BhY2UgXVsgbmFtZSBdOwoJY29uc3RydWN0b3IgPSAkWyBuYW1lc3BhY2UgXVsgbmFtZSBdID0gZnVuY3Rpb24oIG9wdGlvbnMsIGVsZW1lbnQgKSB7CgkJLy8gYWxsb3cgaW5zdGFudGlhdGlvbiB3aXRob3V0ICJuZXciIGtleXdvcmQKCQlpZiAoICF0aGlzLl9jcmVhdGVXaWRnZXQgKSB7CgkJCXJldHVybiBuZXcgY29uc3RydWN0b3IoIG9wdGlvbnMsIGVsZW1lbnQgKTsKCQl9CgoJCS8vIGFsbG93IGluc3RhbnRpYXRpb24gd2l0aG91dCBpbml0aWFsaXppbmcgZm9yIHNpbXBsZSBpbmhlcml0YW5jZQoJCS8vIG11c3QgdXNlICJuZXciIGtleXdvcmQgKHRoZSBjb2RlIGFib3ZlIGFsd2F5cyBwYXNzZXMgYXJncykKCQlpZiAoIGFyZ3VtZW50cy5sZW5ndGggKSB7CgkJCXRoaXMuX2NyZWF0ZVdpZGdldCggb3B0aW9ucywgZWxlbWVudCApOwoJCX0KCX07CgkvLyBleHRlbmQgd2l0aCB0aGUgZXhpc3RpbmcgY29uc3RydWN0b3IgdG8gY2Fycnkgb3ZlciBhbnkgc3RhdGljIHByb3BlcnRpZXMKCSQuZXh0ZW5kKCBjb25zdHJ1Y3RvciwgZXhpc3RpbmdDb25zdHJ1Y3RvciwgewoJCXZlcnNpb246IHByb3RvdHlwZS52ZXJzaW9uLAoJCS8vIGNvcHkgdGhlIG9iamVjdCB1c2VkIHRvIGNyZWF0ZSB0aGUgcHJvdG90eXBlIGluIGNhc2Ugd2UgbmVlZCB0bwoJCS8vIHJlZGVmaW5lIHRoZSB3aWRnZXQgbGF0ZXIKCQlfcHJvdG86ICQuZXh0ZW5kKCB7fSwgcHJvdG90eXBlICksCgkJLy8gdHJhY2sgd2lkZ2V0cyB0aGF0IGluaGVyaXQgZnJvbSB0aGlzIHdpZGdldCBpbiBjYXNlIHRoaXMgd2lkZ2V0IGlzCgkJLy8gcmVkZWZpbmVkIGFmdGVyIGEgd2lkZ2V0IGluaGVyaXRzIGZyb20gaXQKCQlfY2hpbGRDb25zdHJ1Y3RvcnM6IFtdCgl9KTsKCgliYXNlUHJvdG90eXBlID0gbmV3IGJhc2UoKTsKCS8vIHdlIG5lZWQgdG8gbWFrZSB0aGUgb3B0aW9ucyBoYXNoIGEgcHJvcGVydHkgZGlyZWN0bHkgb24gdGhlIG5ldyBpbnN0YW5jZQoJLy8gb3RoZXJ3aXNlIHdlJ2xsIG1vZGlmeSB0aGUgb3B0aW9ucyBoYXNoIG9uIHRoZSBwcm90b3R5cGUgdGhhdCB3ZSdyZQoJLy8gaW5oZXJpdGluZyBmcm9tCgliYXNlUHJvdG90eXBlLm9wdGlvbnMgPSAkLndpZGdldC5leHRlbmQoIHt9LCBiYXNlUHJvdG90eXBlLm9wdGlvbnMgKTsKCSQuZWFjaCggcHJvdG90eXBlLCBmdW5jdGlvbiggcHJvcCwgdmFsdWUgKSB7CgkJaWYgKCAkLmlzRnVuY3Rpb24oIHZhbHVlICkgKSB7CgkJCXByb3RvdHlwZVsgcHJvcCBdID0gKGZ1bmN0aW9uKCkgewoJCQkJdmFyIF9zdXBlciA9IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXR1cm4gYmFzZS5wcm90b3R5cGVbIHByb3AgXS5hcHBseSggdGhpcywgYXJndW1lbnRzICk7CgkJCQkJfSwKCQkJCQlfc3VwZXJBcHBseSA9IGZ1bmN0aW9uKCBhcmdzICkgewoJCQkJCQlyZXR1cm4gYmFzZS5wcm90b3R5cGVbIHByb3AgXS5hcHBseSggdGhpcywgYXJncyApOwoJCQkJCX07CgkJCQlyZXR1cm4gZnVuY3Rpb24oKSB7CgkJCQkJdmFyIF9fc3VwZXIgPSB0aGlzLl9zdXBlciwKCQkJCQkJX19zdXBlckFwcGx5ID0gdGhpcy5fc3VwZXJBcHBseSwKCQkJCQkJcmV0dXJuVmFsdWU7CgoJCQkJCXRoaXMuX3N1cGVyID0gX3N1cGVyOwoJCQkJCXRoaXMuX3N1cGVyQXBwbHkgPSBfc3VwZXJBcHBseTsKCgkJCQkJcmV0dXJuVmFsdWUgPSB2YWx1ZS5hcHBseSggdGhpcywgYXJndW1lbnRzICk7CgoJCQkJCXRoaXMuX3N1cGVyID0gX19zdXBlcjsKCQkJCQl0aGlzLl9zdXBlckFwcGx5ID0gX19zdXBlckFwcGx5OwoKCQkJCQlyZXR1cm4gcmV0dXJuVmFsdWU7CgkJCQl9OwoJCQl9KSgpOwoJCX0KCX0pOwoJY29uc3RydWN0b3IucHJvdG90eXBlID0gJC53aWRnZXQuZXh0ZW5kKCBiYXNlUHJvdG90eXBlLCB7CgkJLy8gVE9ETzogcmVtb3ZlIHN1cHBvcnQgZm9yIHdpZGdldEV2ZW50UHJlZml4CgkJLy8gYWx3YXlzIHVzZSB0aGUgbmFtZSArIGEgY29sb24gYXMgdGhlIHByZWZpeCwgZS5nLiwgZHJhZ2dhYmxlOnN0YXJ0CgkJLy8gZG9uJ3QgcHJlZml4IGZvciB3aWRnZXRzIHRoYXQgYXJlbid0IERPTS1iYXNlZAoJCXdpZGdldEV2ZW50UHJlZml4OiBleGlzdGluZ0NvbnN0cnVjdG9yID8gYmFzZVByb3RvdHlwZS53aWRnZXRFdmVudFByZWZpeCA6IG5hbWUKCX0sIHByb3RvdHlwZSwgewoJCWNvbnN0cnVjdG9yOiBjb25zdHJ1Y3RvciwKCQluYW1lc3BhY2U6IG5hbWVzcGFjZSwKCQl3aWRnZXROYW1lOiBuYW1lLAoJCS8vIFRPRE8gcmVtb3ZlIHdpZGdldEJhc2VDbGFzcywgc2VlICM4MTU1CgkJd2lkZ2V0QmFzZUNsYXNzOiBmdWxsTmFtZSwKCQl3aWRnZXRGdWxsTmFtZTogZnVsbE5hbWUKCX0pOwoKCS8vIElmIHRoaXMgd2lkZ2V0IGlzIGJlaW5nIHJlZGVmaW5lZCB0aGVuIHdlIG5lZWQgdG8gZmluZCBhbGwgd2lkZ2V0cyB0aGF0CgkvLyBhcmUgaW5oZXJpdGluZyBmcm9tIGl0IGFuZCByZWRlZmluZSBhbGwgb2YgdGhlbSBzbyB0aGF0IHRoZXkgaW5oZXJpdCBmcm9tCgkvLyB0aGUgbmV3IHZlcnNpb24gb2YgdGhpcyB3aWRnZXQuIFdlJ3JlIGVzc2VudGlhbGx5IHRyeWluZyB0byByZXBsYWNlIG9uZQoJLy8gbGV2ZWwgaW4gdGhlIHByb3RvdHlwZSBjaGFpbi4KCWlmICggZXhpc3RpbmdDb25zdHJ1Y3RvciApIHsKCQkkLmVhY2goIGV4aXN0aW5nQ29uc3RydWN0b3IuX2NoaWxkQ29uc3RydWN0b3JzLCBmdW5jdGlvbiggaSwgY2hpbGQgKSB7CgkJCXZhciBjaGlsZFByb3RvdHlwZSA9IGNoaWxkLnByb3RvdHlwZTsKCgkJCS8vIHJlZGVmaW5lIHRoZSBjaGlsZCB3aWRnZXQgdXNpbmcgdGhlIHNhbWUgcHJvdG90eXBlIHRoYXQgd2FzCgkJCS8vIG9yaWdpbmFsbHkgdXNlZCwgYnV0IGluaGVyaXQgZnJvbSB0aGUgbmV3IHZlcnNpb24gb2YgdGhlIGJhc2UKCQkJJC53aWRnZXQoIGNoaWxkUHJvdG90eXBlLm5hbWVzcGFjZSArICIuIiArIGNoaWxkUHJvdG90eXBlLndpZGdldE5hbWUsIGNvbnN0cnVjdG9yLCBjaGlsZC5fcHJvdG8gKTsKCQl9KTsKCQkvLyByZW1vdmUgdGhlIGxpc3Qgb2YgZXhpc3RpbmcgY2hpbGQgY29uc3RydWN0b3JzIGZyb20gdGhlIG9sZCBjb25zdHJ1Y3RvcgoJCS8vIHNvIHRoZSBvbGQgY2hpbGQgY29uc3RydWN0b3JzIGNhbiBiZSBnYXJiYWdlIGNvbGxlY3RlZAoJCWRlbGV0ZSBleGlzdGluZ0NvbnN0cnVjdG9yLl9jaGlsZENvbnN0cnVjdG9yczsKCX0gZWxzZSB7CgkJYmFzZS5fY2hpbGRDb25zdHJ1Y3RvcnMucHVzaCggY29uc3RydWN0b3IgKTsKCX0KCgkkLndpZGdldC5icmlkZ2UoIG5hbWUsIGNvbnN0cnVjdG9yICk7Cn07CgokLndpZGdldC5leHRlbmQgPSBmdW5jdGlvbiggdGFyZ2V0ICkgewoJdmFyIGlucHV0ID0gc2xpY2UuY2FsbCggYXJndW1lbnRzLCAxICksCgkJaW5wdXRJbmRleCA9IDAsCgkJaW5wdXRMZW5ndGggPSBpbnB1dC5sZW5ndGgsCgkJa2V5LAoJCXZhbHVlOwoJZm9yICggOyBpbnB1dEluZGV4IDwgaW5wdXRMZW5ndGg7IGlucHV0SW5kZXgrKyApIHsKCQlmb3IgKCBrZXkgaW4gaW5wdXRbIGlucHV0SW5kZXggXSApIHsKCQkJdmFsdWUgPSBpbnB1dFsgaW5wdXRJbmRleCBdWyBrZXkgXTsKCQkJaWYgKCBpbnB1dFsgaW5wdXRJbmRleCBdLmhhc093blByb3BlcnR5KCBrZXkgKSAmJiB2YWx1ZSAhPT0gdW5kZWZpbmVkICkgewoJCQkJLy8gQ2xvbmUgb2JqZWN0cwoJCQkJaWYgKCAkLmlzUGxhaW5PYmplY3QoIHZhbHVlICkgKSB7CgkJCQkJdGFyZ2V0WyBrZXkgXSA9ICQuaXNQbGFpbk9iamVjdCggdGFyZ2V0WyBrZXkgXSApID8KCQkJCQkJJC53aWRnZXQuZXh0ZW5kKCB7fSwgdGFyZ2V0WyBrZXkgXSwgdmFsdWUgKSA6CgkJCQkJCS8vIERvbid0IGV4dGVuZCBzdHJpbmdzLCBhcnJheXMsIGV0Yy4gd2l0aCBvYmplY3RzCgkJCQkJCSQud2lkZ2V0LmV4dGVuZCgge30sIHZhbHVlICk7CgkJCQkvLyBDb3B5IGV2ZXJ5dGhpbmcgZWxzZSBieSByZWZlcmVuY2UKCQkJCX0gZWxzZSB7CgkJCQkJdGFyZ2V0WyBrZXkgXSA9IHZhbHVlOwoJCQkJfQoJCQl9CgkJfQoJfQoJcmV0dXJuIHRhcmdldDsKfTsKCiQud2lkZ2V0LmJyaWRnZSA9IGZ1bmN0aW9uKCBuYW1lLCBvYmplY3QgKSB7Cgl2YXIgZnVsbE5hbWUgPSBvYmplY3QucHJvdG90eXBlLndpZGdldEZ1bGxOYW1lIHx8IG5hbWU7CgkkLmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggb3B0aW9ucyApIHsKCQl2YXIgaXNNZXRob2RDYWxsID0gdHlwZW9mIG9wdGlvbnMgPT09ICJzdHJpbmciLAoJCQlhcmdzID0gc2xpY2UuY2FsbCggYXJndW1lbnRzLCAxICksCgkJCXJldHVyblZhbHVlID0gdGhpczsKCgkJLy8gYWxsb3cgbXVsdGlwbGUgaGFzaGVzIHRvIGJlIHBhc3NlZCBvbiBpbml0CgkJb3B0aW9ucyA9ICFpc01ldGhvZENhbGwgJiYgYXJncy5sZW5ndGggPwoJCQkkLndpZGdldC5leHRlbmQuYXBwbHkoIG51bGwsIFsgb3B0aW9ucyBdLmNvbmNhdChhcmdzKSApIDoKCQkJb3B0aW9uczsKCgkJaWYgKCBpc01ldGhvZENhbGwgKSB7CgkJCXRoaXMuZWFjaChmdW5jdGlvbigpIHsKCQkJCXZhciBtZXRob2RWYWx1ZSwKCQkJCQlpbnN0YW5jZSA9ICQuZGF0YSggdGhpcywgZnVsbE5hbWUgKTsKCQkJCWlmICggIWluc3RhbmNlICkgewoJCQkJCXJldHVybiAkLmVycm9yKCAiY2Fubm90IGNhbGwgbWV0aG9kcyBvbiAiICsgbmFtZSArICIgcHJpb3IgdG8gaW5pdGlhbGl6YXRpb247ICIgKwoJCQkJCQkiYXR0ZW1wdGVkIHRvIGNhbGwgbWV0aG9kICciICsgb3B0aW9ucyArICInIiApOwoJCQkJfQoJCQkJaWYgKCAhJC5pc0Z1bmN0aW9uKCBpbnN0YW5jZVtvcHRpb25zXSApIHx8IG9wdGlvbnMuY2hhckF0KCAwICkgPT09ICJfIiApIHsKCQkJCQlyZXR1cm4gJC5lcnJvciggIm5vIHN1Y2ggbWV0aG9kICciICsgb3B0aW9ucyArICInIGZvciAiICsgbmFtZSArICIgd2lkZ2V0IGluc3RhbmNlIiApOwoJCQkJfQoJCQkJbWV0aG9kVmFsdWUgPSBpbnN0YW5jZVsgb3B0aW9ucyBdLmFwcGx5KCBpbnN0YW5jZSwgYXJncyApOwoJCQkJaWYgKCBtZXRob2RWYWx1ZSAhPT0gaW5zdGFuY2UgJiYgbWV0aG9kVmFsdWUgIT09IHVuZGVmaW5lZCApIHsKCQkJCQlyZXR1cm5WYWx1ZSA9IG1ldGhvZFZhbHVlICYmIG1ldGhvZFZhbHVlLmpxdWVyeSA/CgkJCQkJCXJldHVyblZhbHVlLnB1c2hTdGFjayggbWV0aG9kVmFsdWUuZ2V0KCkgKSA6CgkJCQkJCW1ldGhvZFZhbHVlOwoJCQkJCXJldHVybiBmYWxzZTsKCQkJCX0KCQkJfSk7CgkJfSBlbHNlIHsKCQkJdGhpcy5lYWNoKGZ1bmN0aW9uKCkgewoJCQkJdmFyIGluc3RhbmNlID0gJC5kYXRhKCB0aGlzLCBmdWxsTmFtZSApOwoJCQkJaWYgKCBpbnN0YW5jZSApIHsKCQkJCQlpbnN0YW5jZS5vcHRpb24oIG9wdGlvbnMgfHwge30gKS5faW5pdCgpOwoJCQkJfSBlbHNlIHsKCQkJCQkkLmRhdGEoIHRoaXMsIGZ1bGxOYW1lLCBuZXcgb2JqZWN0KCBvcHRpb25zLCB0aGlzICkgKTsKCQkJCX0KCQkJfSk7CgkJfQoKCQlyZXR1cm4gcmV0dXJuVmFsdWU7Cgl9Owp9OwoKJC5XaWRnZXQgPSBmdW5jdGlvbiggLyogb3B0aW9ucywgZWxlbWVudCAqLyApIHt9OwokLldpZGdldC5fY2hpbGRDb25zdHJ1Y3RvcnMgPSBbXTsKCiQuV2lkZ2V0LnByb3RvdHlwZSA9IHsKCXdpZGdldE5hbWU6ICJ3aWRnZXQiLAoJd2lkZ2V0RXZlbnRQcmVmaXg6ICIiLAoJZGVmYXVsdEVsZW1lbnQ6ICI8ZGl2PiIsCglvcHRpb25zOiB7CgkJZGlzYWJsZWQ6IGZhbHNlLAoKCQkvLyBjYWxsYmFja3MKCQljcmVhdGU6IG51bGwKCX0sCglfY3JlYXRlV2lkZ2V0OiBmdW5jdGlvbiggb3B0aW9ucywgZWxlbWVudCApIHsKCQllbGVtZW50ID0gJCggZWxlbWVudCB8fCB0aGlzLmRlZmF1bHRFbGVtZW50IHx8IHRoaXMgKVsgMCBdOwoJCXRoaXMuZWxlbWVudCA9ICQoIGVsZW1lbnQgKTsKCQl0aGlzLnV1aWQgPSB1dWlkKys7CgkJdGhpcy5ldmVudE5hbWVzcGFjZSA9ICIuIiArIHRoaXMud2lkZ2V0TmFtZSArIHRoaXMudXVpZDsKCQl0aGlzLm9wdGlvbnMgPSAkLndpZGdldC5leHRlbmQoIHt9LAoJCQl0aGlzLm9wdGlvbnMsCgkJCXRoaXMuX2dldENyZWF0ZU9wdGlvbnMoKSwKCQkJb3B0aW9ucyApOwoKCQl0aGlzLmJpbmRpbmdzID0gJCgpOwoJCXRoaXMuaG92ZXJhYmxlID0gJCgpOwoJCXRoaXMuZm9jdXNhYmxlID0gJCgpOwoKCQlpZiAoIGVsZW1lbnQgIT09IHRoaXMgKSB7CgkJCS8vIDEuOSBCQyBmb3IgIzc4MTAKCQkJLy8gVE9ETyByZW1vdmUgZHVhbCBzdG9yYWdlCgkJCSQuZGF0YSggZWxlbWVudCwgdGhpcy53aWRnZXROYW1lLCB0aGlzICk7CgkJCSQuZGF0YSggZWxlbWVudCwgdGhpcy53aWRnZXRGdWxsTmFtZSwgdGhpcyApOwoJCQl0aGlzLl9vbiggdHJ1ZSwgdGhpcy5lbGVtZW50LCB7CgkJCQlyZW1vdmU6IGZ1bmN0aW9uKCBldmVudCApIHsKCQkJCQlpZiAoIGV2ZW50LnRhcmdldCA9PT0gZWxlbWVudCApIHsKCQkJCQkJdGhpcy5kZXN0cm95KCk7CgkJCQkJfQoJCQkJfQoJCQl9KTsKCQkJdGhpcy5kb2N1bWVudCA9ICQoIGVsZW1lbnQuc3R5bGUgPwoJCQkJLy8gZWxlbWVudCB3aXRoaW4gdGhlIGRvY3VtZW50CgkJCQllbGVtZW50Lm93bmVyRG9jdW1lbnQgOgoJCQkJLy8gZWxlbWVudCBpcyB3aW5kb3cgb3IgZG9jdW1lbnQKCQkJCWVsZW1lbnQuZG9jdW1lbnQgfHwgZWxlbWVudCApOwoJCQl0aGlzLndpbmRvdyA9ICQoIHRoaXMuZG9jdW1lbnRbMF0uZGVmYXVsdFZpZXcgfHwgdGhpcy5kb2N1bWVudFswXS5wYXJlbnRXaW5kb3cgKTsKCQl9CgoJCXRoaXMuX2NyZWF0ZSgpOwoJCXRoaXMuX3RyaWdnZXIoICJjcmVhdGUiLCBudWxsLCB0aGlzLl9nZXRDcmVhdGVFdmVudERhdGEoKSApOwoJCXRoaXMuX2luaXQoKTsKCX0sCglfZ2V0Q3JlYXRlT3B0aW9uczogJC5ub29wLAoJX2dldENyZWF0ZUV2ZW50RGF0YTogJC5ub29wLAoJX2NyZWF0ZTogJC5ub29wLAoJX2luaXQ6ICQubm9vcCwKCglkZXN0cm95OiBmdW5jdGlvbigpIHsKCQl0aGlzLl9kZXN0cm95KCk7CgkJLy8gd2UgY2FuIHByb2JhYmx5IHJlbW92ZSB0aGUgdW5iaW5kIGNhbGxzIGluIDIuMAoJCS8vIGFsbCBldmVudCBiaW5kaW5ncyBzaG91bGQgZ28gdGhyb3VnaCB0aGlzLl9vbigpCgkJdGhpcy5lbGVtZW50CgkJCS51bmJpbmQoIHRoaXMuZXZlbnROYW1lc3BhY2UgKQoJCQkvLyAxLjkgQkMgZm9yICM3ODEwCgkJCS8vIFRPRE8gcmVtb3ZlIGR1YWwgc3RvcmFnZQoJCQkucmVtb3ZlRGF0YSggdGhpcy53aWRnZXROYW1lICkKCQkJLnJlbW92ZURhdGEoIHRoaXMud2lkZ2V0RnVsbE5hbWUgKQoJCQkvLyBzdXBwb3J0OiBqcXVlcnkgPDEuNi4zCgkJCS8vIGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0Lzk0MTMKCQkJLnJlbW92ZURhdGEoICQuY2FtZWxDYXNlKCB0aGlzLndpZGdldEZ1bGxOYW1lICkgKTsKCQl0aGlzLndpZGdldCgpCgkJCS51bmJpbmQoIHRoaXMuZXZlbnROYW1lc3BhY2UgKQoJCQkucmVtb3ZlQXR0ciggImFyaWEtZGlzYWJsZWQiICkKCQkJLnJlbW92ZUNsYXNzKAoJCQkJdGhpcy53aWRnZXRGdWxsTmFtZSArICItZGlzYWJsZWQgIiArCgkJCQkidWktc3RhdGUtZGlzYWJsZWQiICk7CgoJCS8vIGNsZWFuIHVwIGV2ZW50cyBhbmQgc3RhdGVzCgkJdGhpcy5iaW5kaW5ncy51bmJpbmQoIHRoaXMuZXZlbnROYW1lc3BhY2UgKTsKCQl0aGlzLmhvdmVyYWJsZS5yZW1vdmVDbGFzcyggInVpLXN0YXRlLWhvdmVyIiApOwoJCXRoaXMuZm9jdXNhYmxlLnJlbW92ZUNsYXNzKCAidWktc3RhdGUtZm9jdXMiICk7Cgl9LAoJX2Rlc3Ryb3k6ICQubm9vcCwKCgl3aWRnZXQ6IGZ1bmN0aW9uKCkgewoJCXJldHVybiB0aGlzLmVsZW1lbnQ7Cgl9LAoKCW9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7CgkJdmFyIG9wdGlvbnMgPSBrZXksCgkJCXBhcnRzLAoJCQljdXJPcHRpb24sCgkJCWk7CgoJCWlmICggYXJndW1lbnRzLmxlbmd0aCA9PT0gMCApIHsKCQkJLy8gZG9uJ3QgcmV0dXJuIGEgcmVmZXJlbmNlIHRvIHRoZSBpbnRlcm5hbCBoYXNoCgkJCXJldHVybiAkLndpZGdldC5leHRlbmQoIHt9LCB0aGlzLm9wdGlvbnMgKTsKCQl9CgoJCWlmICggdHlwZW9mIGtleSA9PT0gInN0cmluZyIgKSB7CgkJCS8vIGhhbmRsZSBuZXN0ZWQga2V5cywgZS5nLiwgImZvby5iYXIiID0+IHsgZm9vOiB7IGJhcjogX19fIH0gfQoJCQlvcHRpb25zID0ge307CgkJCXBhcnRzID0ga2V5LnNwbGl0KCAiLiIgKTsKCQkJa2V5ID0gcGFydHMuc2hpZnQoKTsKCQkJaWYgKCBwYXJ0cy5sZW5ndGggKSB7CgkJCQljdXJPcHRpb24gPSBvcHRpb25zWyBrZXkgXSA9ICQud2lkZ2V0LmV4dGVuZCgge30sIHRoaXMub3B0aW9uc1sga2V5IF0gKTsKCQkJCWZvciAoIGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoIC0gMTsgaSsrICkgewoJCQkJCWN1ck9wdGlvblsgcGFydHNbIGkgXSBdID0gY3VyT3B0aW9uWyBwYXJ0c1sgaSBdIF0gfHwge307CgkJCQkJY3VyT3B0aW9uID0gY3VyT3B0aW9uWyBwYXJ0c1sgaSBdIF07CgkJCQl9CgkJCQlrZXkgPSBwYXJ0cy5wb3AoKTsKCQkJCWlmICggdmFsdWUgPT09IHVuZGVmaW5lZCApIHsKCQkJCQlyZXR1cm4gY3VyT3B0aW9uWyBrZXkgXSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IGN1ck9wdGlvblsga2V5IF07CgkJCQl9CgkJCQljdXJPcHRpb25bIGtleSBdID0gdmFsdWU7CgkJCX0gZWxzZSB7CgkJCQlpZiAoIHZhbHVlID09PSB1bmRlZmluZWQgKSB7CgkJCQkJcmV0dXJuIHRoaXMub3B0aW9uc1sga2V5IF0gPT09IHVuZGVmaW5lZCA/IG51bGwgOiB0aGlzLm9wdGlvbnNbIGtleSBdOwoJCQkJfQoJCQkJb3B0aW9uc1sga2V5IF0gPSB2YWx1ZTsKCQkJfQoJCX0KCgkJdGhpcy5fc2V0T3B0aW9ucyggb3B0aW9ucyApOwoKCQlyZXR1cm4gdGhpczsKCX0sCglfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7CgkJdmFyIGtleTsKCgkJZm9yICgga2V5IGluIG9wdGlvbnMgKSB7CgkJCXRoaXMuX3NldE9wdGlvbigga2V5LCBvcHRpb25zWyBrZXkgXSApOwoJCX0KCgkJcmV0dXJuIHRoaXM7Cgl9LAoJX3NldE9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7CgkJdGhpcy5vcHRpb25zWyBrZXkgXSA9IHZhbHVlOwoKCQlpZiAoIGtleSA9PT0gImRpc2FibGVkIiApIHsKCQkJdGhpcy53aWRnZXQoKQoJCQkJLnRvZ2dsZUNsYXNzKCB0aGlzLndpZGdldEZ1bGxOYW1lICsgIi1kaXNhYmxlZCB1aS1zdGF0ZS1kaXNhYmxlZCIsICEhdmFsdWUgKQoJCQkJLmF0dHIoICJhcmlhLWRpc2FibGVkIiwgdmFsdWUgKTsKCQkJdGhpcy5ob3ZlcmFibGUucmVtb3ZlQ2xhc3MoICJ1aS1zdGF0ZS1ob3ZlciIgKTsKCQkJdGhpcy5mb2N1c2FibGUucmVtb3ZlQ2xhc3MoICJ1aS1zdGF0ZS1mb2N1cyIgKTsKCQl9CgoJCXJldHVybiB0aGlzOwoJfSwKCgllbmFibGU6IGZ1bmN0aW9uKCkgewoJCXJldHVybiB0aGlzLl9zZXRPcHRpb24oICJkaXNhYmxlZCIsIGZhbHNlICk7Cgl9LAoJZGlzYWJsZTogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHRoaXMuX3NldE9wdGlvbiggImRpc2FibGVkIiwgdHJ1ZSApOwoJfSwKCglfb246IGZ1bmN0aW9uKCBzdXBwcmVzc0Rpc2FibGVkQ2hlY2ssIGVsZW1lbnQsIGhhbmRsZXJzICkgewoJCXZhciBkZWxlZ2F0ZUVsZW1lbnQsCgkJCWluc3RhbmNlID0gdGhpczsKCgkJLy8gbm8gc3VwcHJlc3NEaXNhYmxlZENoZWNrIGZsYWcsIHNodWZmbGUgYXJndW1lbnRzCgkJaWYgKCB0eXBlb2Ygc3VwcHJlc3NEaXNhYmxlZENoZWNrICE9PSAiYm9vbGVhbiIgKSB7CgkJCWhhbmRsZXJzID0gZWxlbWVudDsKCQkJZWxlbWVudCA9IHN1cHByZXNzRGlzYWJsZWRDaGVjazsKCQkJc3VwcHJlc3NEaXNhYmxlZENoZWNrID0gZmFsc2U7CgkJfQoKCQkvLyBubyBlbGVtZW50IGFyZ3VtZW50LCBzaHVmZmxlIGFuZCB1c2UgdGhpcy5lbGVtZW50CgkJaWYgKCAhaGFuZGxlcnMgKSB7CgkJCWhhbmRsZXJzID0gZWxlbWVudDsKCQkJZWxlbWVudCA9IHRoaXMuZWxlbWVudDsKCQkJZGVsZWdhdGVFbGVtZW50ID0gdGhpcy53aWRnZXQoKTsKCQl9IGVsc2UgewoJCQkvLyBhY2NlcHQgc2VsZWN0b3JzLCBET00gZWxlbWVudHMKCQkJZWxlbWVudCA9IGRlbGVnYXRlRWxlbWVudCA9ICQoIGVsZW1lbnQgKTsKCQkJdGhpcy5iaW5kaW5ncyA9IHRoaXMuYmluZGluZ3MuYWRkKCBlbGVtZW50ICk7CgkJfQoKCQkkLmVhY2goIGhhbmRsZXJzLCBmdW5jdGlvbiggZXZlbnQsIGhhbmRsZXIgKSB7CgkJCWZ1bmN0aW9uIGhhbmRsZXJQcm94eSgpIHsKCQkJCS8vIGFsbG93IHdpZGdldHMgdG8gY3VzdG9taXplIHRoZSBkaXNhYmxlZCBoYW5kbGluZwoJCQkJLy8gLSBkaXNhYmxlZCBhcyBhbiBhcnJheSBpbnN0ZWFkIG9mIGJvb2xlYW4KCQkJCS8vIC0gZGlzYWJsZWQgY2xhc3MgYXMgbWV0aG9kIGZvciBkaXNhYmxpbmcgaW5kaXZpZHVhbCBwYXJ0cwoJCQkJaWYgKCAhc3VwcHJlc3NEaXNhYmxlZENoZWNrICYmCgkJCQkJCSggaW5zdGFuY2Uub3B0aW9ucy5kaXNhYmxlZCA9PT0gdHJ1ZSB8fAoJCQkJCQkJJCggdGhpcyApLmhhc0NsYXNzKCAidWktc3RhdGUtZGlzYWJsZWQiICkgKSApIHsKCQkJCQlyZXR1cm47CgkJCQl9CgkJCQlyZXR1cm4gKCB0eXBlb2YgaGFuZGxlciA9PT0gInN0cmluZyIgPyBpbnN0YW5jZVsgaGFuZGxlciBdIDogaGFuZGxlciApCgkJCQkJLmFwcGx5KCBpbnN0YW5jZSwgYXJndW1lbnRzICk7CgkJCX0KCgkJCS8vIGNvcHkgdGhlIGd1aWQgc28gZGlyZWN0IHVuYmluZGluZyB3b3JrcwoJCQlpZiAoIHR5cGVvZiBoYW5kbGVyICE9PSAic3RyaW5nIiApIHsKCQkJCWhhbmRsZXJQcm94eS5ndWlkID0gaGFuZGxlci5ndWlkID0KCQkJCQloYW5kbGVyLmd1aWQgfHwgaGFuZGxlclByb3h5Lmd1aWQgfHwgJC5ndWlkKys7CgkJCX0KCgkJCXZhciBtYXRjaCA9IGV2ZW50Lm1hdGNoKCAvXihcdyspXHMqKC4qKSQvICksCgkJCQlldmVudE5hbWUgPSBtYXRjaFsxXSArIGluc3RhbmNlLmV2ZW50TmFtZXNwYWNlLAoJCQkJc2VsZWN0b3IgPSBtYXRjaFsyXTsKCQkJaWYgKCBzZWxlY3RvciApIHsKCQkJCWRlbGVnYXRlRWxlbWVudC5kZWxlZ2F0ZSggc2VsZWN0b3IsIGV2ZW50TmFtZSwgaGFuZGxlclByb3h5ICk7CgkJCX0gZWxzZSB7CgkJCQllbGVtZW50LmJpbmQoIGV2ZW50TmFtZSwgaGFuZGxlclByb3h5ICk7CgkJCX0KCQl9KTsKCX0sCgoJX29mZjogZnVuY3Rpb24oIGVsZW1lbnQsIGV2ZW50TmFtZSApIHsKCQlldmVudE5hbWUgPSAoZXZlbnROYW1lIHx8ICIiKS5zcGxpdCggIiAiICkuam9pbiggdGhpcy5ldmVudE5hbWVzcGFjZSArICIgIiApICsgdGhpcy5ldmVudE5hbWVzcGFjZTsKCQllbGVtZW50LnVuYmluZCggZXZlbnROYW1lICkudW5kZWxlZ2F0ZSggZXZlbnROYW1lICk7Cgl9LAoKCV9kZWxheTogZnVuY3Rpb24oIGhhbmRsZXIsIGRlbGF5ICkgewoJCWZ1bmN0aW9uIGhhbmRsZXJQcm94eSgpIHsKCQkJcmV0dXJuICggdHlwZW9mIGhhbmRsZXIgPT09ICJzdHJpbmciID8gaW5zdGFuY2VbIGhhbmRsZXIgXSA6IGhhbmRsZXIgKQoJCQkJLmFwcGx5KCBpbnN0YW5jZSwgYXJndW1lbnRzICk7CgkJfQoJCXZhciBpbnN0YW5jZSA9IHRoaXM7CgkJcmV0dXJuIHNldFRpbWVvdXQoIGhhbmRsZXJQcm94eSwgZGVsYXkgfHwgMCApOwoJfSwKCglfaG92ZXJhYmxlOiBmdW5jdGlvbiggZWxlbWVudCApIHsKCQl0aGlzLmhvdmVyYWJsZSA9IHRoaXMuaG92ZXJhYmxlLmFkZCggZWxlbWVudCApOwoJCXRoaXMuX29uKCBlbGVtZW50LCB7CgkJCW1vdXNlZW50ZXI6IGZ1bmN0aW9uKCBldmVudCApIHsKCQkJCSQoIGV2ZW50LmN1cnJlbnRUYXJnZXQgKS5hZGRDbGFzcyggInVpLXN0YXRlLWhvdmVyIiApOwoJCQl9LAoJCQltb3VzZWxlYXZlOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJCQkkKCBldmVudC5jdXJyZW50VGFyZ2V0ICkucmVtb3ZlQ2xhc3MoICJ1aS1zdGF0ZS1ob3ZlciIgKTsKCQkJfQoJCX0pOwoJfSwKCglfZm9jdXNhYmxlOiBmdW5jdGlvbiggZWxlbWVudCApIHsKCQl0aGlzLmZvY3VzYWJsZSA9IHRoaXMuZm9jdXNhYmxlLmFkZCggZWxlbWVudCApOwoJCXRoaXMuX29uKCBlbGVtZW50LCB7CgkJCWZvY3VzaW46IGZ1bmN0aW9uKCBldmVudCApIHsKCQkJCSQoIGV2ZW50LmN1cnJlbnRUYXJnZXQgKS5hZGRDbGFzcyggInVpLXN0YXRlLWZvY3VzIiApOwoJCQl9LAoJCQlmb2N1c291dDogZnVuY3Rpb24oIGV2ZW50ICkgewoJCQkJJCggZXZlbnQuY3VycmVudFRhcmdldCApLnJlbW92ZUNsYXNzKCAidWktc3RhdGUtZm9jdXMiICk7CgkJCX0KCQl9KTsKCX0sCgoJX3RyaWdnZXI6IGZ1bmN0aW9uKCB0eXBlLCBldmVudCwgZGF0YSApIHsKCQl2YXIgcHJvcCwgb3JpZywKCQkJY2FsbGJhY2sgPSB0aGlzLm9wdGlvbnNbIHR5cGUgXTsKCgkJZGF0YSA9IGRhdGEgfHwge307CgkJZXZlbnQgPSAkLkV2ZW50KCBldmVudCApOwoJCWV2ZW50LnR5cGUgPSAoIHR5cGUgPT09IHRoaXMud2lkZ2V0RXZlbnRQcmVmaXggPwoJCQl0eXBlIDoKCQkJdGhpcy53aWRnZXRFdmVudFByZWZpeCArIHR5cGUgKS50b0xvd2VyQ2FzZSgpOwoJCS8vIHRoZSBvcmlnaW5hbCBldmVudCBtYXkgY29tZSBmcm9tIGFueSBlbGVtZW50CgkJLy8gc28gd2UgbmVlZCB0byByZXNldCB0aGUgdGFyZ2V0IG9uIHRoZSBuZXcgZXZlbnQKCQlldmVudC50YXJnZXQgPSB0aGlzLmVsZW1lbnRbIDAgXTsKCgkJLy8gY29weSBvcmlnaW5hbCBldmVudCBwcm9wZXJ0aWVzIG92ZXIgdG8gdGhlIG5ldyBldmVudAoJCW9yaWcgPSBldmVudC5vcmlnaW5hbEV2ZW50OwoJCWlmICggb3JpZyApIHsKCQkJZm9yICggcHJvcCBpbiBvcmlnICkgewoJCQkJaWYgKCAhKCBwcm9wIGluIGV2ZW50ICkgKSB7CgkJCQkJZXZlbnRbIHByb3AgXSA9IG9yaWdbIHByb3AgXTsKCQkJCX0KCQkJfQoJCX0KCgkJdGhpcy5lbGVtZW50LnRyaWdnZXIoIGV2ZW50LCBkYXRhICk7CgkJcmV0dXJuICEoICQuaXNGdW5jdGlvbiggY2FsbGJhY2sgKSAmJgoJCQljYWxsYmFjay5hcHBseSggdGhpcy5lbGVtZW50WzBdLCBbIGV2ZW50IF0uY29uY2F0KCBkYXRhICkgKSA9PT0gZmFsc2UgfHwKCQkJZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKTsKCX0KfTsKCiQuZWFjaCggeyBzaG93OiAiZmFkZUluIiwgaGlkZTogImZhZGVPdXQiIH0sIGZ1bmN0aW9uKCBtZXRob2QsIGRlZmF1bHRFZmZlY3QgKSB7CgkkLldpZGdldC5wcm90b3R5cGVbICJfIiArIG1ldGhvZCBdID0gZnVuY3Rpb24oIGVsZW1lbnQsIG9wdGlvbnMsIGNhbGxiYWNrICkgewoJCWlmICggdHlwZW9mIG9wdGlvbnMgPT09ICJzdHJpbmciICkgewoJCQlvcHRpb25zID0geyBlZmZlY3Q6IG9wdGlvbnMgfTsKCQl9CgkJdmFyIGhhc09wdGlvbnMsCgkJCWVmZmVjdE5hbWUgPSAhb3B0aW9ucyA/CgkJCQltZXRob2QgOgoJCQkJb3B0aW9ucyA9PT0gdHJ1ZSB8fCB0eXBlb2Ygb3B0aW9ucyA9PT0gIm51bWJlciIgPwoJCQkJCWRlZmF1bHRFZmZlY3QgOgoJCQkJCW9wdGlvbnMuZWZmZWN0IHx8IGRlZmF1bHRFZmZlY3Q7CgkJb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CgkJaWYgKCB0eXBlb2Ygb3B0aW9ucyA9PT0gIm51bWJlciIgKSB7CgkJCW9wdGlvbnMgPSB7IGR1cmF0aW9uOiBvcHRpb25zIH07CgkJfQoJCWhhc09wdGlvbnMgPSAhJC5pc0VtcHR5T2JqZWN0KCBvcHRpb25zICk7CgkJb3B0aW9ucy5jb21wbGV0ZSA9IGNhbGxiYWNrOwoJCWlmICggb3B0aW9ucy5kZWxheSApIHsKCQkJZWxlbWVudC5kZWxheSggb3B0aW9ucy5kZWxheSApOwoJCX0KCQlpZiAoIGhhc09wdGlvbnMgJiYgJC5lZmZlY3RzICYmICggJC5lZmZlY3RzLmVmZmVjdFsgZWZmZWN0TmFtZSBdIHx8ICQudWlCYWNrQ29tcGF0ICE9PSBmYWxzZSAmJiAkLmVmZmVjdHNbIGVmZmVjdE5hbWUgXSApICkgewoJCQllbGVtZW50WyBtZXRob2QgXSggb3B0aW9ucyApOwoJCX0gZWxzZSBpZiAoIGVmZmVjdE5hbWUgIT09IG1ldGhvZCAmJiBlbGVtZW50WyBlZmZlY3ROYW1lIF0gKSB7CgkJCWVsZW1lbnRbIGVmZmVjdE5hbWUgXSggb3B0aW9ucy5kdXJhdGlvbiwgb3B0aW9ucy5lYXNpbmcsIGNhbGxiYWNrICk7CgkJfSBlbHNlIHsKCQkJZWxlbWVudC5xdWV1ZShmdW5jdGlvbiggbmV4dCApIHsKCQkJCSQoIHRoaXMgKVsgbWV0aG9kIF0oKTsKCQkJCWlmICggY2FsbGJhY2sgKSB7CgkJCQkJY2FsbGJhY2suY2FsbCggZWxlbWVudFsgMCBdICk7CgkJCQl9CgkJCQluZXh0KCk7CgkJCX0pOwoJCX0KCX07Cn0pOwoKLy8gREVQUkVDQVRFRAppZiAoICQudWlCYWNrQ29tcGF0ICE9PSBmYWxzZSApIHsKCSQuV2lkZ2V0LnByb3RvdHlwZS5fZ2V0Q3JlYXRlT3B0aW9ucyA9IGZ1bmN0aW9uKCkgewoJCXJldHVybiAkLm1ldGFkYXRhICYmICQubWV0YWRhdGEuZ2V0KCB0aGlzLmVsZW1lbnRbMF0gKVsgdGhpcy53aWRnZXROYW1lIF07Cgl9Owp9Cgp9KSggalF1ZXJ5ICk7CihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkgewoKdmFyIG1vdXNlSGFuZGxlZCA9IGZhbHNlOwokKCBkb2N1bWVudCApLm1vdXNldXAoIGZ1bmN0aW9uKCBlICkgewoJbW91c2VIYW5kbGVkID0gZmFsc2U7Cn0pOwoKJC53aWRnZXQoInVpLm1vdXNlIiwgewoJdmVyc2lvbjogIjEuOS4yIiwKCW9wdGlvbnM6IHsKCQljYW5jZWw6ICdpbnB1dCx0ZXh0YXJlYSxidXR0b24sc2VsZWN0LG9wdGlvbicsCgkJZGlzdGFuY2U6IDEsCgkJZGVsYXk6IDAKCX0sCglfbW91c2VJbml0OiBmdW5jdGlvbigpIHsKCQl2YXIgdGhhdCA9IHRoaXM7CgoJCXRoaXMuZWxlbWVudAoJCQkuYmluZCgnbW91c2Vkb3duLicrdGhpcy53aWRnZXROYW1lLCBmdW5jdGlvbihldmVudCkgewoJCQkJcmV0dXJuIHRoYXQuX21vdXNlRG93bihldmVudCk7CgkJCX0pCgkJCS5iaW5kKCdjbGljay4nK3RoaXMud2lkZ2V0TmFtZSwgZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWlmICh0cnVlID09PSAkLmRhdGEoZXZlbnQudGFyZ2V0LCB0aGF0LndpZGdldE5hbWUgKyAnLnByZXZlbnRDbGlja0V2ZW50JykpIHsKCQkJCQkkLnJlbW92ZURhdGEoZXZlbnQudGFyZ2V0LCB0aGF0LndpZGdldE5hbWUgKyAnLnByZXZlbnRDbGlja0V2ZW50Jyk7CgkJCQkJZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7CgkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJfQoJCQl9KTsKCgkJdGhpcy5zdGFydGVkID0gZmFsc2U7Cgl9LAoKCS8vIFRPRE86IG1ha2Ugc3VyZSBkZXN0cm95aW5nIG9uZSBpbnN0YW5jZSBvZiBtb3VzZSBkb2Vzbid0IG1lc3Mgd2l0aAoJLy8gb3RoZXIgaW5zdGFuY2VzIG9mIG1vdXNlCglfbW91c2VEZXN0cm95OiBmdW5jdGlvbigpIHsKCQl0aGlzLmVsZW1lbnQudW5iaW5kKCcuJyt0aGlzLndpZGdldE5hbWUpOwoJCWlmICggdGhpcy5fbW91c2VNb3ZlRGVsZWdhdGUgKSB7CgkJCSQoZG9jdW1lbnQpCgkJCQkudW5iaW5kKCdtb3VzZW1vdmUuJyt0aGlzLndpZGdldE5hbWUsIHRoaXMuX21vdXNlTW92ZURlbGVnYXRlKQoJCQkJLnVuYmluZCgnbW91c2V1cC4nK3RoaXMud2lkZ2V0TmFtZSwgdGhpcy5fbW91c2VVcERlbGVnYXRlKTsKCQl9Cgl9LAoKCV9tb3VzZURvd246IGZ1bmN0aW9uKGV2ZW50KSB7CgkJLy8gZG9uJ3QgbGV0IG1vcmUgdGhhbiBvbmUgd2lkZ2V0IGhhbmRsZSBtb3VzZVN0YXJ0CgkJaWYoIG1vdXNlSGFuZGxlZCApIHsgcmV0dXJuOyB9CgoJCS8vIHdlIG1heSBoYXZlIG1pc3NlZCBtb3VzZXVwIChvdXQgb2Ygd2luZG93KQoJCSh0aGlzLl9tb3VzZVN0YXJ0ZWQgJiYgdGhpcy5fbW91c2VVcChldmVudCkpOwoKCQl0aGlzLl9tb3VzZURvd25FdmVudCA9IGV2ZW50OwoKCQl2YXIgdGhhdCA9IHRoaXMsCgkJCWJ0bklzTGVmdCA9IChldmVudC53aGljaCA9PT0gMSksCgkJCS8vIGV2ZW50LnRhcmdldC5ub2RlTmFtZSB3b3JrcyBhcm91bmQgYSBidWcgaW4gSUUgOCB3aXRoCgkJCS8vIGRpc2FibGVkIGlucHV0cyAoIzc2MjApCgkJCWVsSXNDYW5jZWwgPSAodHlwZW9mIHRoaXMub3B0aW9ucy5jYW5jZWwgPT09ICJzdHJpbmciICYmIGV2ZW50LnRhcmdldC5ub2RlTmFtZSA/ICQoZXZlbnQudGFyZ2V0KS5jbG9zZXN0KHRoaXMub3B0aW9ucy5jYW5jZWwpLmxlbmd0aCA6IGZhbHNlKTsKCQlpZiAoIWJ0bklzTGVmdCB8fCBlbElzQ2FuY2VsIHx8ICF0aGlzLl9tb3VzZUNhcHR1cmUoZXZlbnQpKSB7CgkJCXJldHVybiB0cnVlOwoJCX0KCgkJdGhpcy5tb3VzZURlbGF5TWV0ID0gIXRoaXMub3B0aW9ucy5kZWxheTsKCQlpZiAoIXRoaXMubW91c2VEZWxheU1ldCkgewoJCQl0aGlzLl9tb3VzZURlbGF5VGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewoJCQkJdGhhdC5tb3VzZURlbGF5TWV0ID0gdHJ1ZTsKCQkJfSwgdGhpcy5vcHRpb25zLmRlbGF5KTsKCQl9CgoJCWlmICh0aGlzLl9tb3VzZURpc3RhbmNlTWV0KGV2ZW50KSAmJiB0aGlzLl9tb3VzZURlbGF5TWV0KGV2ZW50KSkgewoJCQl0aGlzLl9tb3VzZVN0YXJ0ZWQgPSAodGhpcy5fbW91c2VTdGFydChldmVudCkgIT09IGZhbHNlKTsKCQkJaWYgKCF0aGlzLl9tb3VzZVN0YXJ0ZWQpIHsKCQkJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgkJCQlyZXR1cm4gdHJ1ZTsKCQkJfQoJCX0KCgkJLy8gQ2xpY2sgZXZlbnQgbWF5IG5ldmVyIGhhdmUgZmlyZWQgKEdlY2tvICYgT3BlcmEpCgkJaWYgKHRydWUgPT09ICQuZGF0YShldmVudC50YXJnZXQsIHRoaXMud2lkZ2V0TmFtZSArICcucHJldmVudENsaWNrRXZlbnQnKSkgewoJCQkkLnJlbW92ZURhdGEoZXZlbnQudGFyZ2V0LCB0aGlzLndpZGdldE5hbWUgKyAnLnByZXZlbnRDbGlja0V2ZW50Jyk7CgkJfQoKCQkvLyB0aGVzZSBkZWxlZ2F0ZXMgYXJlIHJlcXVpcmVkIHRvIGtlZXAgY29udGV4dAoJCXRoaXMuX21vdXNlTW92ZURlbGVnYXRlID0gZnVuY3Rpb24oZXZlbnQpIHsKCQkJcmV0dXJuIHRoYXQuX21vdXNlTW92ZShldmVudCk7CgkJfTsKCQl0aGlzLl9tb3VzZVVwRGVsZWdhdGUgPSBmdW5jdGlvbihldmVudCkgewoJCQlyZXR1cm4gdGhhdC5fbW91c2VVcChldmVudCk7CgkJfTsKCQkkKGRvY3VtZW50KQoJCQkuYmluZCgnbW91c2Vtb3ZlLicrdGhpcy53aWRnZXROYW1lLCB0aGlzLl9tb3VzZU1vdmVEZWxlZ2F0ZSkKCQkJLmJpbmQoJ21vdXNldXAuJyt0aGlzLndpZGdldE5hbWUsIHRoaXMuX21vdXNlVXBEZWxlZ2F0ZSk7CgoJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgoJCW1vdXNlSGFuZGxlZCA9IHRydWU7CgkJcmV0dXJuIHRydWU7Cgl9LAoKCV9tb3VzZU1vdmU6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJLy8gSUUgbW91c2V1cCBjaGVjayAtIG1vdXNldXAgaGFwcGVuZWQgd2hlbiBtb3VzZSB3YXMgb3V0IG9mIHdpbmRvdwoJCWlmICgkLnVpLmllICYmICEoZG9jdW1lbnQuZG9jdW1lbnRNb2RlID49IDkpICYmICFldmVudC5idXR0b24pIHsKCQkJcmV0dXJuIHRoaXMuX21vdXNlVXAoZXZlbnQpOwoJCX0KCgkJaWYgKHRoaXMuX21vdXNlU3RhcnRlZCkgewoJCQl0aGlzLl9tb3VzZURyYWcoZXZlbnQpOwoJCQlyZXR1cm4gZXZlbnQucHJldmVudERlZmF1bHQoKTsKCQl9CgoJCWlmICh0aGlzLl9tb3VzZURpc3RhbmNlTWV0KGV2ZW50KSAmJiB0aGlzLl9tb3VzZURlbGF5TWV0KGV2ZW50KSkgewoJCQl0aGlzLl9tb3VzZVN0YXJ0ZWQgPQoJCQkJKHRoaXMuX21vdXNlU3RhcnQodGhpcy5fbW91c2VEb3duRXZlbnQsIGV2ZW50KSAhPT0gZmFsc2UpOwoJCQkodGhpcy5fbW91c2VTdGFydGVkID8gdGhpcy5fbW91c2VEcmFnKGV2ZW50KSA6IHRoaXMuX21vdXNlVXAoZXZlbnQpKTsKCQl9CgoJCXJldHVybiAhdGhpcy5fbW91c2VTdGFydGVkOwoJfSwKCglfbW91c2VVcDogZnVuY3Rpb24oZXZlbnQpIHsKCQkkKGRvY3VtZW50KQoJCQkudW5iaW5kKCdtb3VzZW1vdmUuJyt0aGlzLndpZGdldE5hbWUsIHRoaXMuX21vdXNlTW92ZURlbGVnYXRlKQoJCQkudW5iaW5kKCdtb3VzZXVwLicrdGhpcy53aWRnZXROYW1lLCB0aGlzLl9tb3VzZVVwRGVsZWdhdGUpOwoKCQlpZiAodGhpcy5fbW91c2VTdGFydGVkKSB7CgkJCXRoaXMuX21vdXNlU3RhcnRlZCA9IGZhbHNlOwoKCQkJaWYgKGV2ZW50LnRhcmdldCA9PT0gdGhpcy5fbW91c2VEb3duRXZlbnQudGFyZ2V0KSB7CgkJCQkkLmRhdGEoZXZlbnQudGFyZ2V0LCB0aGlzLndpZGdldE5hbWUgKyAnLnByZXZlbnRDbGlja0V2ZW50JywgdHJ1ZSk7CgkJCX0KCgkJCXRoaXMuX21vdXNlU3RvcChldmVudCk7CgkJfQoKCQlyZXR1cm4gZmFsc2U7Cgl9LAoKCV9tb3VzZURpc3RhbmNlTWV0OiBmdW5jdGlvbihldmVudCkgewoJCXJldHVybiAoTWF0aC5tYXgoCgkJCQlNYXRoLmFicyh0aGlzLl9tb3VzZURvd25FdmVudC5wYWdlWCAtIGV2ZW50LnBhZ2VYKSwKCQkJCU1hdGguYWJzKHRoaXMuX21vdXNlRG93bkV2ZW50LnBhZ2VZIC0gZXZlbnQucGFnZVkpCgkJCSkgPj0gdGhpcy5vcHRpb25zLmRpc3RhbmNlCgkJKTsKCX0sCgoJX21vdXNlRGVsYXlNZXQ6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJcmV0dXJuIHRoaXMubW91c2VEZWxheU1ldDsKCX0sCgoJLy8gVGhlc2UgYXJlIHBsYWNlaG9sZGVyIG1ldGhvZHMsIHRvIGJlIG92ZXJyaWRlbiBieSBleHRlbmRpbmcgcGx1Z2luCglfbW91c2VTdGFydDogZnVuY3Rpb24oZXZlbnQpIHt9LAoJX21vdXNlRHJhZzogZnVuY3Rpb24oZXZlbnQpIHt9LAoJX21vdXNlU3RvcDogZnVuY3Rpb24oZXZlbnQpIHt9LAoJX21vdXNlQ2FwdHVyZTogZnVuY3Rpb24oZXZlbnQpIHsgcmV0dXJuIHRydWU7IH0KfSk7Cgp9KShqUXVlcnkpOwooZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHsKCiQudWkgPSAkLnVpIHx8IHt9OwoKdmFyIGNhY2hlZFNjcm9sbGJhcldpZHRoLAoJbWF4ID0gTWF0aC5tYXgsCglhYnMgPSBNYXRoLmFicywKCXJvdW5kID0gTWF0aC5yb3VuZCwKCXJob3Jpem9udGFsID0gL2xlZnR8Y2VudGVyfHJpZ2h0LywKCXJ2ZXJ0aWNhbCA9IC90b3B8Y2VudGVyfGJvdHRvbS8sCglyb2Zmc2V0ID0gL1tcK1wtXVxkKyU/LywKCXJwb3NpdGlvbiA9IC9eXHcrLywKCXJwZXJjZW50ID0gLyUkLywKCV9wb3NpdGlvbiA9ICQuZm4ucG9zaXRpb247CgpmdW5jdGlvbiBnZXRPZmZzZXRzKCBvZmZzZXRzLCB3aWR0aCwgaGVpZ2h0ICkgewoJcmV0dXJuIFsKCQlwYXJzZUludCggb2Zmc2V0c1sgMCBdLCAxMCApICogKCBycGVyY2VudC50ZXN0KCBvZmZzZXRzWyAwIF0gKSA/IHdpZHRoIC8gMTAwIDogMSApLAoJCXBhcnNlSW50KCBvZmZzZXRzWyAxIF0sIDEwICkgKiAoIHJwZXJjZW50LnRlc3QoIG9mZnNldHNbIDEgXSApID8gaGVpZ2h0IC8gMTAwIDogMSApCgldOwp9CmZ1bmN0aW9uIHBhcnNlQ3NzKCBlbGVtZW50LCBwcm9wZXJ0eSApIHsKCXJldHVybiBwYXJzZUludCggJC5jc3MoIGVsZW1lbnQsIHByb3BlcnR5ICksIDEwICkgfHwgMDsKfQoKJC5wb3NpdGlvbiA9IHsKCXNjcm9sbGJhcldpZHRoOiBmdW5jdGlvbigpIHsKCQlpZiAoIGNhY2hlZFNjcm9sbGJhcldpZHRoICE9PSB1bmRlZmluZWQgKSB7CgkJCXJldHVybiBjYWNoZWRTY3JvbGxiYXJXaWR0aDsKCQl9CgkJdmFyIHcxLCB3MiwKCQkJZGl2ID0gJCggIjxkaXYgc3R5bGU9J2Rpc3BsYXk6YmxvY2s7d2lkdGg6NTBweDtoZWlnaHQ6NTBweDtvdmVyZmxvdzpoaWRkZW47Jz48ZGl2IHN0eWxlPSdoZWlnaHQ6MTAwcHg7d2lkdGg6YXV0bzsnPjwvZGl2PjwvZGl2PiIgKSwKCQkJaW5uZXJEaXYgPSBkaXYuY2hpbGRyZW4oKVswXTsKCgkJJCggImJvZHkiICkuYXBwZW5kKCBkaXYgKTsKCQl3MSA9IGlubmVyRGl2Lm9mZnNldFdpZHRoOwoJCWRpdi5jc3MoICJvdmVyZmxvdyIsICJzY3JvbGwiICk7CgoJCXcyID0gaW5uZXJEaXYub2Zmc2V0V2lkdGg7CgoJCWlmICggdzEgPT09IHcyICkgewoJCQl3MiA9IGRpdlswXS5jbGllbnRXaWR0aDsKCQl9CgoJCWRpdi5yZW1vdmUoKTsKCgkJcmV0dXJuIChjYWNoZWRTY3JvbGxiYXJXaWR0aCA9IHcxIC0gdzIpOwoJfSwKCWdldFNjcm9sbEluZm86IGZ1bmN0aW9uKCB3aXRoaW4gKSB7CgkJdmFyIG92ZXJmbG93WCA9IHdpdGhpbi5pc1dpbmRvdyA/ICIiIDogd2l0aGluLmVsZW1lbnQuY3NzKCAib3ZlcmZsb3cteCIgKSwKCQkJb3ZlcmZsb3dZID0gd2l0aGluLmlzV2luZG93ID8gIiIgOiB3aXRoaW4uZWxlbWVudC5jc3MoICJvdmVyZmxvdy15IiApLAoJCQloYXNPdmVyZmxvd1ggPSBvdmVyZmxvd1ggPT09ICJzY3JvbGwiIHx8CgkJCQkoIG92ZXJmbG93WCA9PT0gImF1dG8iICYmIHdpdGhpbi53aWR0aCA8IHdpdGhpbi5lbGVtZW50WzBdLnNjcm9sbFdpZHRoICksCgkJCWhhc092ZXJmbG93WSA9IG92ZXJmbG93WSA9PT0gInNjcm9sbCIgfHwKCQkJCSggb3ZlcmZsb3dZID09PSAiYXV0byIgJiYgd2l0aGluLmhlaWdodCA8IHdpdGhpbi5lbGVtZW50WzBdLnNjcm9sbEhlaWdodCApOwoJCXJldHVybiB7CgkJCXdpZHRoOiBoYXNPdmVyZmxvd1ggPyAkLnBvc2l0aW9uLnNjcm9sbGJhcldpZHRoKCkgOiAwLAoJCQloZWlnaHQ6IGhhc092ZXJmbG93WSA/ICQucG9zaXRpb24uc2Nyb2xsYmFyV2lkdGgoKSA6IDAKCQl9OwoJfSwKCWdldFdpdGhpbkluZm86IGZ1bmN0aW9uKCBlbGVtZW50ICkgewoJCXZhciB3aXRoaW5FbGVtZW50ID0gJCggZWxlbWVudCB8fCB3aW5kb3cgKSwKCQkJaXNXaW5kb3cgPSAkLmlzV2luZG93KCB3aXRoaW5FbGVtZW50WzBdICk7CgkJcmV0dXJuIHsKCQkJZWxlbWVudDogd2l0aGluRWxlbWVudCwKCQkJaXNXaW5kb3c6IGlzV2luZG93LAoJCQlvZmZzZXQ6IHdpdGhpbkVsZW1lbnQub2Zmc2V0KCkgfHwgeyBsZWZ0OiAwLCB0b3A6IDAgfSwKCQkJc2Nyb2xsTGVmdDogd2l0aGluRWxlbWVudC5zY3JvbGxMZWZ0KCksCgkJCXNjcm9sbFRvcDogd2l0aGluRWxlbWVudC5zY3JvbGxUb3AoKSwKCQkJd2lkdGg6IGlzV2luZG93ID8gd2l0aGluRWxlbWVudC53aWR0aCgpIDogd2l0aGluRWxlbWVudC5vdXRlcldpZHRoKCksCgkJCWhlaWdodDogaXNXaW5kb3cgPyB3aXRoaW5FbGVtZW50LmhlaWdodCgpIDogd2l0aGluRWxlbWVudC5vdXRlckhlaWdodCgpCgkJfTsKCX0KfTsKCiQuZm4ucG9zaXRpb24gPSBmdW5jdGlvbiggb3B0aW9ucyApIHsKCWlmICggIW9wdGlvbnMgfHwgIW9wdGlvbnMub2YgKSB7CgkJcmV0dXJuIF9wb3NpdGlvbi5hcHBseSggdGhpcywgYXJndW1lbnRzICk7Cgl9CgoJLy8gbWFrZSBhIGNvcHksIHdlIGRvbid0IHdhbnQgdG8gbW9kaWZ5IGFyZ3VtZW50cwoJb3B0aW9ucyA9ICQuZXh0ZW5kKCB7fSwgb3B0aW9ucyApOwoKCXZhciBhdE9mZnNldCwgdGFyZ2V0V2lkdGgsIHRhcmdldEhlaWdodCwgdGFyZ2V0T2Zmc2V0LCBiYXNlUG9zaXRpb24sCgkJdGFyZ2V0ID0gJCggb3B0aW9ucy5vZiApLAoJCXdpdGhpbiA9ICQucG9zaXRpb24uZ2V0V2l0aGluSW5mbyggb3B0aW9ucy53aXRoaW4gKSwKCQlzY3JvbGxJbmZvID0gJC5wb3NpdGlvbi5nZXRTY3JvbGxJbmZvKCB3aXRoaW4gKSwKCQl0YXJnZXRFbGVtID0gdGFyZ2V0WzBdLAoJCWNvbGxpc2lvbiA9ICggb3B0aW9ucy5jb2xsaXNpb24gfHwgImZsaXAiICkuc3BsaXQoICIgIiApLAoJCW9mZnNldHMgPSB7fTsKCglpZiAoIHRhcmdldEVsZW0ubm9kZVR5cGUgPT09IDkgKSB7CgkJdGFyZ2V0V2lkdGggPSB0YXJnZXQud2lkdGgoKTsKCQl0YXJnZXRIZWlnaHQgPSB0YXJnZXQuaGVpZ2h0KCk7CgkJdGFyZ2V0T2Zmc2V0ID0geyB0b3A6IDAsIGxlZnQ6IDAgfTsKCX0gZWxzZSBpZiAoICQuaXNXaW5kb3coIHRhcmdldEVsZW0gKSApIHsKCQl0YXJnZXRXaWR0aCA9IHRhcmdldC53aWR0aCgpOwoJCXRhcmdldEhlaWdodCA9IHRhcmdldC5oZWlnaHQoKTsKCQl0YXJnZXRPZmZzZXQgPSB7IHRvcDogdGFyZ2V0LnNjcm9sbFRvcCgpLCBsZWZ0OiB0YXJnZXQuc2Nyb2xsTGVmdCgpIH07Cgl9IGVsc2UgaWYgKCB0YXJnZXRFbGVtLnByZXZlbnREZWZhdWx0ICkgewoJCS8vIGZvcmNlIGxlZnQgdG9wIHRvIGFsbG93IGZsaXBwaW5nCgkJb3B0aW9ucy5hdCA9ICJsZWZ0IHRvcCI7CgkJdGFyZ2V0V2lkdGggPSB0YXJnZXRIZWlnaHQgPSAwOwoJCXRhcmdldE9mZnNldCA9IHsgdG9wOiB0YXJnZXRFbGVtLnBhZ2VZLCBsZWZ0OiB0YXJnZXRFbGVtLnBhZ2VYIH07Cgl9IGVsc2UgewoJCXRhcmdldFdpZHRoID0gdGFyZ2V0Lm91dGVyV2lkdGgoKTsKCQl0YXJnZXRIZWlnaHQgPSB0YXJnZXQub3V0ZXJIZWlnaHQoKTsKCQl0YXJnZXRPZmZzZXQgPSB0YXJnZXQub2Zmc2V0KCk7Cgl9CgkvLyBjbG9uZSB0byByZXVzZSBvcmlnaW5hbCB0YXJnZXRPZmZzZXQgbGF0ZXIKCWJhc2VQb3NpdGlvbiA9ICQuZXh0ZW5kKCB7fSwgdGFyZ2V0T2Zmc2V0ICk7CgoJLy8gZm9yY2UgbXkgYW5kIGF0IHRvIGhhdmUgdmFsaWQgaG9yaXpvbnRhbCBhbmQgdmVydGljYWwgcG9zaXRpb25zCgkvLyBpZiBhIHZhbHVlIGlzIG1pc3Npbmcgb3IgaW52YWxpZCwgaXQgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gY2VudGVyCgkkLmVhY2goIFsgIm15IiwgImF0IiBdLCBmdW5jdGlvbigpIHsKCQl2YXIgcG9zID0gKCBvcHRpb25zWyB0aGlzIF0gfHwgIiIgKS5zcGxpdCggIiAiICksCgkJCWhvcml6b250YWxPZmZzZXQsCgkJCXZlcnRpY2FsT2Zmc2V0OwoKCQlpZiAoIHBvcy5sZW5ndGggPT09IDEpIHsKCQkJcG9zID0gcmhvcml6b250YWwudGVzdCggcG9zWyAwIF0gKSA/CgkJCQlwb3MuY29uY2F0KCBbICJjZW50ZXIiIF0gKSA6CgkJCQlydmVydGljYWwudGVzdCggcG9zWyAwIF0gKSA/CgkJCQkJWyAiY2VudGVyIiBdLmNvbmNhdCggcG9zICkgOgoJCQkJCVsgImNlbnRlciIsICJjZW50ZXIiIF07CgkJfQoJCXBvc1sgMCBdID0gcmhvcml6b250YWwudGVzdCggcG9zWyAwIF0gKSA/IHBvc1sgMCBdIDogImNlbnRlciI7CgkJcG9zWyAxIF0gPSBydmVydGljYWwudGVzdCggcG9zWyAxIF0gKSA/IHBvc1sgMSBdIDogImNlbnRlciI7CgoJCS8vIGNhbGN1bGF0ZSBvZmZzZXRzCgkJaG9yaXpvbnRhbE9mZnNldCA9IHJvZmZzZXQuZXhlYyggcG9zWyAwIF0gKTsKCQl2ZXJ0aWNhbE9mZnNldCA9IHJvZmZzZXQuZXhlYyggcG9zWyAxIF0gKTsKCQlvZmZzZXRzWyB0aGlzIF0gPSBbCgkJCWhvcml6b250YWxPZmZzZXQgPyBob3Jpem9udGFsT2Zmc2V0WyAwIF0gOiAwLAoJCQl2ZXJ0aWNhbE9mZnNldCA/IHZlcnRpY2FsT2Zmc2V0WyAwIF0gOiAwCgkJXTsKCgkJLy8gcmVkdWNlIHRvIGp1c3QgdGhlIHBvc2l0aW9ucyB3aXRob3V0IHRoZSBvZmZzZXRzCgkJb3B0aW9uc1sgdGhpcyBdID0gWwoJCQlycG9zaXRpb24uZXhlYyggcG9zWyAwIF0gKVsgMCBdLAoJCQlycG9zaXRpb24uZXhlYyggcG9zWyAxIF0gKVsgMCBdCgkJXTsKCX0pOwoKCS8vIG5vcm1hbGl6ZSBjb2xsaXNpb24gb3B0aW9uCglpZiAoIGNvbGxpc2lvbi5sZW5ndGggPT09IDEgKSB7CgkJY29sbGlzaW9uWyAxIF0gPSBjb2xsaXNpb25bIDAgXTsKCX0KCglpZiAoIG9wdGlvbnMuYXRbIDAgXSA9PT0gInJpZ2h0IiApIHsKCQliYXNlUG9zaXRpb24ubGVmdCArPSB0YXJnZXRXaWR0aDsKCX0gZWxzZSBpZiAoIG9wdGlvbnMuYXRbIDAgXSA9PT0gImNlbnRlciIgKSB7CgkJYmFzZVBvc2l0aW9uLmxlZnQgKz0gdGFyZ2V0V2lkdGggLyAyOwoJfQoKCWlmICggb3B0aW9ucy5hdFsgMSBdID09PSAiYm90dG9tIiApIHsKCQliYXNlUG9zaXRpb24udG9wICs9IHRhcmdldEhlaWdodDsKCX0gZWxzZSBpZiAoIG9wdGlvbnMuYXRbIDEgXSA9PT0gImNlbnRlciIgKSB7CgkJYmFzZVBvc2l0aW9uLnRvcCArPSB0YXJnZXRIZWlnaHQgLyAyOwoJfQoKCWF0T2Zmc2V0ID0gZ2V0T2Zmc2V0cyggb2Zmc2V0cy5hdCwgdGFyZ2V0V2lkdGgsIHRhcmdldEhlaWdodCApOwoJYmFzZVBvc2l0aW9uLmxlZnQgKz0gYXRPZmZzZXRbIDAgXTsKCWJhc2VQb3NpdGlvbi50b3AgKz0gYXRPZmZzZXRbIDEgXTsKCglyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkgewoJCXZhciBjb2xsaXNpb25Qb3NpdGlvbiwgdXNpbmcsCgkJCWVsZW0gPSAkKCB0aGlzICksCgkJCWVsZW1XaWR0aCA9IGVsZW0ub3V0ZXJXaWR0aCgpLAoJCQllbGVtSGVpZ2h0ID0gZWxlbS5vdXRlckhlaWdodCgpLAoJCQltYXJnaW5MZWZ0ID0gcGFyc2VDc3MoIHRoaXMsICJtYXJnaW5MZWZ0IiApLAoJCQltYXJnaW5Ub3AgPSBwYXJzZUNzcyggdGhpcywgIm1hcmdpblRvcCIgKSwKCQkJY29sbGlzaW9uV2lkdGggPSBlbGVtV2lkdGggKyBtYXJnaW5MZWZ0ICsgcGFyc2VDc3MoIHRoaXMsICJtYXJnaW5SaWdodCIgKSArIHNjcm9sbEluZm8ud2lkdGgsCgkJCWNvbGxpc2lvbkhlaWdodCA9IGVsZW1IZWlnaHQgKyBtYXJnaW5Ub3AgKyBwYXJzZUNzcyggdGhpcywgIm1hcmdpbkJvdHRvbSIgKSArIHNjcm9sbEluZm8uaGVpZ2h0LAoJCQlwb3NpdGlvbiA9ICQuZXh0ZW5kKCB7fSwgYmFzZVBvc2l0aW9uICksCgkJCW15T2Zmc2V0ID0gZ2V0T2Zmc2V0cyggb2Zmc2V0cy5teSwgZWxlbS5vdXRlcldpZHRoKCksIGVsZW0ub3V0ZXJIZWlnaHQoKSApOwoKCQlpZiAoIG9wdGlvbnMubXlbIDAgXSA9PT0gInJpZ2h0IiApIHsKCQkJcG9zaXRpb24ubGVmdCAtPSBlbGVtV2lkdGg7CgkJfSBlbHNlIGlmICggb3B0aW9ucy5teVsgMCBdID09PSAiY2VudGVyIiApIHsKCQkJcG9zaXRpb24ubGVmdCAtPSBlbGVtV2lkdGggLyAyOwoJCX0KCgkJaWYgKCBvcHRpb25zLm15WyAxIF0gPT09ICJib3R0b20iICkgewoJCQlwb3NpdGlvbi50b3AgLT0gZWxlbUhlaWdodDsKCQl9IGVsc2UgaWYgKCBvcHRpb25zLm15WyAxIF0gPT09ICJjZW50ZXIiICkgewoJCQlwb3NpdGlvbi50b3AgLT0gZWxlbUhlaWdodCAvIDI7CgkJfQoKCQlwb3NpdGlvbi5sZWZ0ICs9IG15T2Zmc2V0WyAwIF07CgkJcG9zaXRpb24udG9wICs9IG15T2Zmc2V0WyAxIF07CgoJCS8vIGlmIHRoZSBicm93c2VyIGRvZXNuJ3Qgc3VwcG9ydCBmcmFjdGlvbnMsIHRoZW4gcm91bmQgZm9yIGNvbnNpc3RlbnQgcmVzdWx0cwoJCWlmICggISQuc3VwcG9ydC5vZmZzZXRGcmFjdGlvbnMgKSB7CgkJCXBvc2l0aW9uLmxlZnQgPSByb3VuZCggcG9zaXRpb24ubGVmdCApOwoJCQlwb3NpdGlvbi50b3AgPSByb3VuZCggcG9zaXRpb24udG9wICk7CgkJfQoKCQljb2xsaXNpb25Qb3NpdGlvbiA9IHsKCQkJbWFyZ2luTGVmdDogbWFyZ2luTGVmdCwKCQkJbWFyZ2luVG9wOiBtYXJnaW5Ub3AKCQl9OwoKCQkkLmVhY2goIFsgImxlZnQiLCAidG9wIiBdLCBmdW5jdGlvbiggaSwgZGlyICkgewoJCQlpZiAoICQudWkucG9zaXRpb25bIGNvbGxpc2lvblsgaSBdIF0gKSB7CgkJCQkkLnVpLnBvc2l0aW9uWyBjb2xsaXNpb25bIGkgXSBdWyBkaXIgXSggcG9zaXRpb24sIHsKCQkJCQl0YXJnZXRXaWR0aDogdGFyZ2V0V2lkdGgsCgkJCQkJdGFyZ2V0SGVpZ2h0OiB0YXJnZXRIZWlnaHQsCgkJCQkJZWxlbVdpZHRoOiBlbGVtV2lkdGgsCgkJCQkJZWxlbUhlaWdodDogZWxlbUhlaWdodCwKCQkJCQljb2xsaXNpb25Qb3NpdGlvbjogY29sbGlzaW9uUG9zaXRpb24sCgkJCQkJY29sbGlzaW9uV2lkdGg6IGNvbGxpc2lvbldpZHRoLAoJCQkJCWNvbGxpc2lvbkhlaWdodDogY29sbGlzaW9uSGVpZ2h0LAoJCQkJCW9mZnNldDogWyBhdE9mZnNldFsgMCBdICsgbXlPZmZzZXRbIDAgXSwgYXRPZmZzZXQgWyAxIF0gKyBteU9mZnNldFsgMSBdIF0sCgkJCQkJbXk6IG9wdGlvbnMubXksCgkJCQkJYXQ6IG9wdGlvbnMuYXQsCgkJCQkJd2l0aGluOiB3aXRoaW4sCgkJCQkJZWxlbSA6IGVsZW0KCQkJCX0pOwoJCQl9CgkJfSk7CgoJCWlmICggJC5mbi5iZ2lmcmFtZSApIHsKCQkJZWxlbS5iZ2lmcmFtZSgpOwoJCX0KCgkJaWYgKCBvcHRpb25zLnVzaW5nICkgewoJCQkvLyBhZGRzIGZlZWRiYWNrIGFzIHNlY29uZCBhcmd1bWVudCB0byB1c2luZyBjYWxsYmFjaywgaWYgcHJlc2VudAoJCQl1c2luZyA9IGZ1bmN0aW9uKCBwcm9wcyApIHsKCQkJCXZhciBsZWZ0ID0gdGFyZ2V0T2Zmc2V0LmxlZnQgLSBwb3NpdGlvbi5sZWZ0LAoJCQkJCXJpZ2h0ID0gbGVmdCArIHRhcmdldFdpZHRoIC0gZWxlbVdpZHRoLAoJCQkJCXRvcCA9IHRhcmdldE9mZnNldC50b3AgLSBwb3NpdGlvbi50b3AsCgkJCQkJYm90dG9tID0gdG9wICsgdGFyZ2V0SGVpZ2h0IC0gZWxlbUhlaWdodCwKCQkJCQlmZWVkYmFjayA9IHsKCQkJCQkJdGFyZ2V0OiB7CgkJCQkJCQllbGVtZW50OiB0YXJnZXQsCgkJCQkJCQlsZWZ0OiB0YXJnZXRPZmZzZXQubGVmdCwKCQkJCQkJCXRvcDogdGFyZ2V0T2Zmc2V0LnRvcCwKCQkJCQkJCXdpZHRoOiB0YXJnZXRXaWR0aCwKCQkJCQkJCWhlaWdodDogdGFyZ2V0SGVpZ2h0CgkJCQkJCX0sCgkJCQkJCWVsZW1lbnQ6IHsKCQkJCQkJCWVsZW1lbnQ6IGVsZW0sCgkJCQkJCQlsZWZ0OiBwb3NpdGlvbi5sZWZ0LAoJCQkJCQkJdG9wOiBwb3NpdGlvbi50b3AsCgkJCQkJCQl3aWR0aDogZWxlbVdpZHRoLAoJCQkJCQkJaGVpZ2h0OiBlbGVtSGVpZ2h0CgkJCQkJCX0sCgkJCQkJCWhvcml6b250YWw6IHJpZ2h0IDwgMCA/ICJsZWZ0IiA6IGxlZnQgPiAwID8gInJpZ2h0IiA6ICJjZW50ZXIiLAoJCQkJCQl2ZXJ0aWNhbDogYm90dG9tIDwgMCA/ICJ0b3AiIDogdG9wID4gMCA/ICJib3R0b20iIDogIm1pZGRsZSIKCQkJCQl9OwoJCQkJaWYgKCB0YXJnZXRXaWR0aCA8IGVsZW1XaWR0aCAmJiBhYnMoIGxlZnQgKyByaWdodCApIDwgdGFyZ2V0V2lkdGggKSB7CgkJCQkJZmVlZGJhY2suaG9yaXpvbnRhbCA9ICJjZW50ZXIiOwoJCQkJfQoJCQkJaWYgKCB0YXJnZXRIZWlnaHQgPCBlbGVtSGVpZ2h0ICYmIGFicyggdG9wICsgYm90dG9tICkgPCB0YXJnZXRIZWlnaHQgKSB7CgkJCQkJZmVlZGJhY2sudmVydGljYWwgPSAibWlkZGxlIjsKCQkJCX0KCQkJCWlmICggbWF4KCBhYnMoIGxlZnQgKSwgYWJzKCByaWdodCApICkgPiBtYXgoIGFicyggdG9wICksIGFicyggYm90dG9tICkgKSApIHsKCQkJCQlmZWVkYmFjay5pbXBvcnRhbnQgPSAiaG9yaXpvbnRhbCI7CgkJCQl9IGVsc2UgewoJCQkJCWZlZWRiYWNrLmltcG9ydGFudCA9ICJ2ZXJ0aWNhbCI7CgkJCQl9CgkJCQlvcHRpb25zLnVzaW5nLmNhbGwoIHRoaXMsIHByb3BzLCBmZWVkYmFjayApOwoJCQl9OwoJCX0KCgkJZWxlbS5vZmZzZXQoICQuZXh0ZW5kKCBwb3NpdGlvbiwgeyB1c2luZzogdXNpbmcgfSApICk7Cgl9KTsKfTsKCiQudWkucG9zaXRpb24gPSB7CglmaXQ6IHsKCQlsZWZ0OiBmdW5jdGlvbiggcG9zaXRpb24sIGRhdGEgKSB7CgkJCXZhciB3aXRoaW4gPSBkYXRhLndpdGhpbiwKCQkJCXdpdGhpbk9mZnNldCA9IHdpdGhpbi5pc1dpbmRvdyA/IHdpdGhpbi5zY3JvbGxMZWZ0IDogd2l0aGluLm9mZnNldC5sZWZ0LAoJCQkJb3V0ZXJXaWR0aCA9IHdpdGhpbi53aWR0aCwKCQkJCWNvbGxpc2lvblBvc0xlZnQgPSBwb3NpdGlvbi5sZWZ0IC0gZGF0YS5jb2xsaXNpb25Qb3NpdGlvbi5tYXJnaW5MZWZ0LAoJCQkJb3ZlckxlZnQgPSB3aXRoaW5PZmZzZXQgLSBjb2xsaXNpb25Qb3NMZWZ0LAoJCQkJb3ZlclJpZ2h0ID0gY29sbGlzaW9uUG9zTGVmdCArIGRhdGEuY29sbGlzaW9uV2lkdGggLSBvdXRlcldpZHRoIC0gd2l0aGluT2Zmc2V0LAoJCQkJbmV3T3ZlclJpZ2h0OwoKCQkJLy8gZWxlbWVudCBpcyB3aWRlciB0aGFuIHdpdGhpbgoJCQlpZiAoIGRhdGEuY29sbGlzaW9uV2lkdGggPiBvdXRlcldpZHRoICkgewoJCQkJLy8gZWxlbWVudCBpcyBpbml0aWFsbHkgb3ZlciB0aGUgbGVmdCBzaWRlIG9mIHdpdGhpbgoJCQkJaWYgKCBvdmVyTGVmdCA+IDAgJiYgb3ZlclJpZ2h0IDw9IDAgKSB7CgkJCQkJbmV3T3ZlclJpZ2h0ID0gcG9zaXRpb24ubGVmdCArIG92ZXJMZWZ0ICsgZGF0YS5jb2xsaXNpb25XaWR0aCAtIG91dGVyV2lkdGggLSB3aXRoaW5PZmZzZXQ7CgkJCQkJcG9zaXRpb24ubGVmdCArPSBvdmVyTGVmdCAtIG5ld092ZXJSaWdodDsKCQkJCS8vIGVsZW1lbnQgaXMgaW5pdGlhbGx5IG92ZXIgcmlnaHQgc2lkZSBvZiB3aXRoaW4KCQkJCX0gZWxzZSBpZiAoIG92ZXJSaWdodCA+IDAgJiYgb3ZlckxlZnQgPD0gMCApIHsKCQkJCQlwb3NpdGlvbi5sZWZ0ID0gd2l0aGluT2Zmc2V0OwoJCQkJLy8gZWxlbWVudCBpcyBpbml0aWFsbHkgb3ZlciBib3RoIGxlZnQgYW5kIHJpZ2h0IHNpZGVzIG9mIHdpdGhpbgoJCQkJfSBlbHNlIHsKCQkJCQlpZiAoIG92ZXJMZWZ0ID4gb3ZlclJpZ2h0ICkgewoJCQkJCQlwb3NpdGlvbi5sZWZ0ID0gd2l0aGluT2Zmc2V0ICsgb3V0ZXJXaWR0aCAtIGRhdGEuY29sbGlzaW9uV2lkdGg7CgkJCQkJfSBlbHNlIHsKCQkJCQkJcG9zaXRpb24ubGVmdCA9IHdpdGhpbk9mZnNldDsKCQkJCQl9CgkJCQl9CgkJCS8vIHRvbyBmYXIgbGVmdCAtPiBhbGlnbiB3aXRoIGxlZnQgZWRnZQoJCQl9IGVsc2UgaWYgKCBvdmVyTGVmdCA+IDAgKSB7CgkJCQlwb3NpdGlvbi5sZWZ0ICs9IG92ZXJMZWZ0OwoJCQkvLyB0b28gZmFyIHJpZ2h0IC0+IGFsaWduIHdpdGggcmlnaHQgZWRnZQoJCQl9IGVsc2UgaWYgKCBvdmVyUmlnaHQgPiAwICkgewoJCQkJcG9zaXRpb24ubGVmdCAtPSBvdmVyUmlnaHQ7CgkJCS8vIGFkanVzdCBiYXNlZCBvbiBwb3NpdGlvbiBhbmQgbWFyZ2luCgkJCX0gZWxzZSB7CgkJCQlwb3NpdGlvbi5sZWZ0ID0gbWF4KCBwb3NpdGlvbi5sZWZ0IC0gY29sbGlzaW9uUG9zTGVmdCwgcG9zaXRpb24ubGVmdCApOwoJCQl9CgkJfSwKCQl0b3A6IGZ1bmN0aW9uKCBwb3NpdGlvbiwgZGF0YSApIHsKCQkJdmFyIHdpdGhpbiA9IGRhdGEud2l0aGluLAoJCQkJd2l0aGluT2Zmc2V0ID0gd2l0aGluLmlzV2luZG93ID8gd2l0aGluLnNjcm9sbFRvcCA6IHdpdGhpbi5vZmZzZXQudG9wLAoJCQkJb3V0ZXJIZWlnaHQgPSBkYXRhLndpdGhpbi5oZWlnaHQsCgkJCQljb2xsaXNpb25Qb3NUb3AgPSBwb3NpdGlvbi50b3AgLSBkYXRhLmNvbGxpc2lvblBvc2l0aW9uLm1hcmdpblRvcCwKCQkJCW92ZXJUb3AgPSB3aXRoaW5PZmZzZXQgLSBjb2xsaXNpb25Qb3NUb3AsCgkJCQlvdmVyQm90dG9tID0gY29sbGlzaW9uUG9zVG9wICsgZGF0YS5jb2xsaXNpb25IZWlnaHQgLSBvdXRlckhlaWdodCAtIHdpdGhpbk9mZnNldCwKCQkJCW5ld092ZXJCb3R0b207CgoJCQkvLyBlbGVtZW50IGlzIHRhbGxlciB0aGFuIHdpdGhpbgoJCQlpZiAoIGRhdGEuY29sbGlzaW9uSGVpZ2h0ID4gb3V0ZXJIZWlnaHQgKSB7CgkJCQkvLyBlbGVtZW50IGlzIGluaXRpYWxseSBvdmVyIHRoZSB0b3Agb2Ygd2l0aGluCgkJCQlpZiAoIG92ZXJUb3AgPiAwICYmIG92ZXJCb3R0b20gPD0gMCApIHsKCQkJCQluZXdPdmVyQm90dG9tID0gcG9zaXRpb24udG9wICsgb3ZlclRvcCArIGRhdGEuY29sbGlzaW9uSGVpZ2h0IC0gb3V0ZXJIZWlnaHQgLSB3aXRoaW5PZmZzZXQ7CgkJCQkJcG9zaXRpb24udG9wICs9IG92ZXJUb3AgLSBuZXdPdmVyQm90dG9tOwoJCQkJLy8gZWxlbWVudCBpcyBpbml0aWFsbHkgb3ZlciBib3R0b20gb2Ygd2l0aGluCgkJCQl9IGVsc2UgaWYgKCBvdmVyQm90dG9tID4gMCAmJiBvdmVyVG9wIDw9IDAgKSB7CgkJCQkJcG9zaXRpb24udG9wID0gd2l0aGluT2Zmc2V0OwoJCQkJLy8gZWxlbWVudCBpcyBpbml0aWFsbHkgb3ZlciBib3RoIHRvcCBhbmQgYm90dG9tIG9mIHdpdGhpbgoJCQkJfSBlbHNlIHsKCQkJCQlpZiAoIG92ZXJUb3AgPiBvdmVyQm90dG9tICkgewoJCQkJCQlwb3NpdGlvbi50b3AgPSB3aXRoaW5PZmZzZXQgKyBvdXRlckhlaWdodCAtIGRhdGEuY29sbGlzaW9uSGVpZ2h0OwoJCQkJCX0gZWxzZSB7CgkJCQkJCXBvc2l0aW9uLnRvcCA9IHdpdGhpbk9mZnNldDsKCQkJCQl9CgkJCQl9CgkJCS8vIHRvbyBmYXIgdXAgLT4gYWxpZ24gd2l0aCB0b3AKCQkJfSBlbHNlIGlmICggb3ZlclRvcCA+IDAgKSB7CgkJCQlwb3NpdGlvbi50b3AgKz0gb3ZlclRvcDsKCQkJLy8gdG9vIGZhciBkb3duIC0+IGFsaWduIHdpdGggYm90dG9tIGVkZ2UKCQkJfSBlbHNlIGlmICggb3ZlckJvdHRvbSA+IDAgKSB7CgkJCQlwb3NpdGlvbi50b3AgLT0gb3ZlckJvdHRvbTsKCQkJLy8gYWRqdXN0IGJhc2VkIG9uIHBvc2l0aW9uIGFuZCBtYXJnaW4KCQkJfSBlbHNlIHsKCQkJCXBvc2l0aW9uLnRvcCA9IG1heCggcG9zaXRpb24udG9wIC0gY29sbGlzaW9uUG9zVG9wLCBwb3NpdGlvbi50b3AgKTsKCQkJfQoJCX0KCX0sCglmbGlwOiB7CgkJbGVmdDogZnVuY3Rpb24oIHBvc2l0aW9uLCBkYXRhICkgewoJCQl2YXIgd2l0aGluID0gZGF0YS53aXRoaW4sCgkJCQl3aXRoaW5PZmZzZXQgPSB3aXRoaW4ub2Zmc2V0LmxlZnQgKyB3aXRoaW4uc2Nyb2xsTGVmdCwKCQkJCW91dGVyV2lkdGggPSB3aXRoaW4ud2lkdGgsCgkJCQlvZmZzZXRMZWZ0ID0gd2l0aGluLmlzV2luZG93ID8gd2l0aGluLnNjcm9sbExlZnQgOiB3aXRoaW4ub2Zmc2V0LmxlZnQsCgkJCQljb2xsaXNpb25Qb3NMZWZ0ID0gcG9zaXRpb24ubGVmdCAtIGRhdGEuY29sbGlzaW9uUG9zaXRpb24ubWFyZ2luTGVmdCwKCQkJCW92ZXJMZWZ0ID0gY29sbGlzaW9uUG9zTGVmdCAtIG9mZnNldExlZnQsCgkJCQlvdmVyUmlnaHQgPSBjb2xsaXNpb25Qb3NMZWZ0ICsgZGF0YS5jb2xsaXNpb25XaWR0aCAtIG91dGVyV2lkdGggLSBvZmZzZXRMZWZ0LAoJCQkJbXlPZmZzZXQgPSBkYXRhLm15WyAwIF0gPT09ICJsZWZ0IiA/CgkJCQkJLWRhdGEuZWxlbVdpZHRoIDoKCQkJCQlkYXRhLm15WyAwIF0gPT09ICJyaWdodCIgPwoJCQkJCQlkYXRhLmVsZW1XaWR0aCA6CgkJCQkJCTAsCgkJCQlhdE9mZnNldCA9IGRhdGEuYXRbIDAgXSA9PT0gImxlZnQiID8KCQkJCQlkYXRhLnRhcmdldFdpZHRoIDoKCQkJCQlkYXRhLmF0WyAwIF0gPT09ICJyaWdodCIgPwoJCQkJCQktZGF0YS50YXJnZXRXaWR0aCA6CgkJCQkJCTAsCgkJCQlvZmZzZXQgPSAtMiAqIGRhdGEub2Zmc2V0WyAwIF0sCgkJCQluZXdPdmVyUmlnaHQsCgkJCQluZXdPdmVyTGVmdDsKCgkJCWlmICggb3ZlckxlZnQgPCAwICkgewoJCQkJbmV3T3ZlclJpZ2h0ID0gcG9zaXRpb24ubGVmdCArIG15T2Zmc2V0ICsgYXRPZmZzZXQgKyBvZmZzZXQgKyBkYXRhLmNvbGxpc2lvbldpZHRoIC0gb3V0ZXJXaWR0aCAtIHdpdGhpbk9mZnNldDsKCQkJCWlmICggbmV3T3ZlclJpZ2h0IDwgMCB8fCBuZXdPdmVyUmlnaHQgPCBhYnMoIG92ZXJMZWZ0ICkgKSB7CgkJCQkJcG9zaXRpb24ubGVmdCArPSBteU9mZnNldCArIGF0T2Zmc2V0ICsgb2Zmc2V0OwoJCQkJfQoJCQl9CgkJCWVsc2UgaWYgKCBvdmVyUmlnaHQgPiAwICkgewoJCQkJbmV3T3ZlckxlZnQgPSBwb3NpdGlvbi5sZWZ0IC0gZGF0YS5jb2xsaXNpb25Qb3NpdGlvbi5tYXJnaW5MZWZ0ICsgbXlPZmZzZXQgKyBhdE9mZnNldCArIG9mZnNldCAtIG9mZnNldExlZnQ7CgkJCQlpZiAoIG5ld092ZXJMZWZ0ID4gMCB8fCBhYnMoIG5ld092ZXJMZWZ0ICkgPCBvdmVyUmlnaHQgKSB7CgkJCQkJcG9zaXRpb24ubGVmdCArPSBteU9mZnNldCArIGF0T2Zmc2V0ICsgb2Zmc2V0OwoJCQkJfQoJCQl9CgkJfSwKCQl0b3A6IGZ1bmN0aW9uKCBwb3NpdGlvbiwgZGF0YSApIHsKCQkJdmFyIHdpdGhpbiA9IGRhdGEud2l0aGluLAoJCQkJd2l0aGluT2Zmc2V0ID0gd2l0aGluLm9mZnNldC50b3AgKyB3aXRoaW4uc2Nyb2xsVG9wLAoJCQkJb3V0ZXJIZWlnaHQgPSB3aXRoaW4uaGVpZ2h0LAoJCQkJb2Zmc2V0VG9wID0gd2l0aGluLmlzV2luZG93ID8gd2l0aGluLnNjcm9sbFRvcCA6IHdpdGhpbi5vZmZzZXQudG9wLAoJCQkJY29sbGlzaW9uUG9zVG9wID0gcG9zaXRpb24udG9wIC0gZGF0YS5jb2xsaXNpb25Qb3NpdGlvbi5tYXJnaW5Ub3AsCgkJCQlvdmVyVG9wID0gY29sbGlzaW9uUG9zVG9wIC0gb2Zmc2V0VG9wLAoJCQkJb3ZlckJvdHRvbSA9IGNvbGxpc2lvblBvc1RvcCArIGRhdGEuY29sbGlzaW9uSGVpZ2h0IC0gb3V0ZXJIZWlnaHQgLSBvZmZzZXRUb3AsCgkJCQl0b3AgPSBkYXRhLm15WyAxIF0gPT09ICJ0b3AiLAoJCQkJbXlPZmZzZXQgPSB0b3AgPwoJCQkJCS1kYXRhLmVsZW1IZWlnaHQgOgoJCQkJCWRhdGEubXlbIDEgXSA9PT0gImJvdHRvbSIgPwoJCQkJCQlkYXRhLmVsZW1IZWlnaHQgOgoJCQkJCQkwLAoJCQkJYXRPZmZzZXQgPSBkYXRhLmF0WyAxIF0gPT09ICJ0b3AiID8KCQkJCQlkYXRhLnRhcmdldEhlaWdodCA6CgkJCQkJZGF0YS5hdFsgMSBdID09PSAiYm90dG9tIiA/CgkJCQkJCS1kYXRhLnRhcmdldEhlaWdodCA6CgkJCQkJCTAsCgkJCQlvZmZzZXQgPSAtMiAqIGRhdGEub2Zmc2V0WyAxIF0sCgkJCQluZXdPdmVyVG9wLAoJCQkJbmV3T3ZlckJvdHRvbTsKCQkJaWYgKCBvdmVyVG9wIDwgMCApIHsKCQkJCW5ld092ZXJCb3R0b20gPSBwb3NpdGlvbi50b3AgKyBteU9mZnNldCArIGF0T2Zmc2V0ICsgb2Zmc2V0ICsgZGF0YS5jb2xsaXNpb25IZWlnaHQgLSBvdXRlckhlaWdodCAtIHdpdGhpbk9mZnNldDsKCQkJCWlmICggKCBwb3NpdGlvbi50b3AgKyBteU9mZnNldCArIGF0T2Zmc2V0ICsgb2Zmc2V0KSA+IG92ZXJUb3AgJiYgKCBuZXdPdmVyQm90dG9tIDwgMCB8fCBuZXdPdmVyQm90dG9tIDwgYWJzKCBvdmVyVG9wICkgKSApIHsKCQkJCQlwb3NpdGlvbi50b3AgKz0gbXlPZmZzZXQgKyBhdE9mZnNldCArIG9mZnNldDsKCQkJCX0KCQkJfQoJCQllbHNlIGlmICggb3ZlckJvdHRvbSA+IDAgKSB7CgkJCQluZXdPdmVyVG9wID0gcG9zaXRpb24udG9wIC0gIGRhdGEuY29sbGlzaW9uUG9zaXRpb24ubWFyZ2luVG9wICsgbXlPZmZzZXQgKyBhdE9mZnNldCArIG9mZnNldCAtIG9mZnNldFRvcDsKCQkJCWlmICggKCBwb3NpdGlvbi50b3AgKyBteU9mZnNldCArIGF0T2Zmc2V0ICsgb2Zmc2V0KSA+IG92ZXJCb3R0b20gJiYgKCBuZXdPdmVyVG9wID4gMCB8fCBhYnMoIG5ld092ZXJUb3AgKSA8IG92ZXJCb3R0b20gKSApIHsKCQkJCQlwb3NpdGlvbi50b3AgKz0gbXlPZmZzZXQgKyBhdE9mZnNldCArIG9mZnNldDsKCQkJCX0KCQkJfQoJCX0KCX0sCglmbGlwZml0OiB7CgkJbGVmdDogZnVuY3Rpb24oKSB7CgkJCSQudWkucG9zaXRpb24uZmxpcC5sZWZ0LmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTsKCQkJJC51aS5wb3NpdGlvbi5maXQubGVmdC5hcHBseSggdGhpcywgYXJndW1lbnRzICk7CgkJfSwKCQl0b3A6IGZ1bmN0aW9uKCkgewoJCQkkLnVpLnBvc2l0aW9uLmZsaXAudG9wLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTsKCQkJJC51aS5wb3NpdGlvbi5maXQudG9wLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTsKCQl9Cgl9Cn07CgovLyBmcmFjdGlvbiBzdXBwb3J0IHRlc3QKKGZ1bmN0aW9uICgpIHsKCXZhciB0ZXN0RWxlbWVudCwgdGVzdEVsZW1lbnRQYXJlbnQsIHRlc3RFbGVtZW50U3R5bGUsIG9mZnNldExlZnQsIGksCgkJYm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCAiYm9keSIgKVsgMCBdLAoJCWRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICJkaXYiICk7CgoJLy9DcmVhdGUgYSAiZmFrZSBib2R5IiBmb3IgdGVzdGluZyBiYXNlZCBvbiBtZXRob2QgdXNlZCBpbiBqUXVlcnkuc3VwcG9ydAoJdGVzdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBib2R5ID8gImRpdiIgOiAiYm9keSIgKTsKCXRlc3RFbGVtZW50U3R5bGUgPSB7CgkJdmlzaWJpbGl0eTogImhpZGRlbiIsCgkJd2lkdGg6IDAsCgkJaGVpZ2h0OiAwLAoJCWJvcmRlcjogMCwKCQltYXJnaW46IDAsCgkJYmFja2dyb3VuZDogIm5vbmUiCgl9OwoJaWYgKCBib2R5ICkgewoJCSQuZXh0ZW5kKCB0ZXN0RWxlbWVudFN0eWxlLCB7CgkJCXBvc2l0aW9uOiAiYWJzb2x1dGUiLAoJCQlsZWZ0OiAiLTEwMDBweCIsCgkJCXRvcDogIi0xMDAwcHgiCgkJfSk7Cgl9Cglmb3IgKCBpIGluIHRlc3RFbGVtZW50U3R5bGUgKSB7CgkJdGVzdEVsZW1lbnQuc3R5bGVbIGkgXSA9IHRlc3RFbGVtZW50U3R5bGVbIGkgXTsKCX0KCXRlc3RFbGVtZW50LmFwcGVuZENoaWxkKCBkaXYgKTsKCXRlc3RFbGVtZW50UGFyZW50ID0gYm9keSB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7Cgl0ZXN0RWxlbWVudFBhcmVudC5pbnNlcnRCZWZvcmUoIHRlc3RFbGVtZW50LCB0ZXN0RWxlbWVudFBhcmVudC5maXJzdENoaWxkICk7CgoJZGl2LnN0eWxlLmNzc1RleHQgPSAicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMC43NDMyMjIycHg7IjsKCglvZmZzZXRMZWZ0ID0gJCggZGl2ICkub2Zmc2V0KCkubGVmdDsKCSQuc3VwcG9ydC5vZmZzZXRGcmFjdGlvbnMgPSBvZmZzZXRMZWZ0ID4gMTAgJiYgb2Zmc2V0TGVmdCA8IDExOwoKCXRlc3RFbGVtZW50LmlubmVySFRNTCA9ICIiOwoJdGVzdEVsZW1lbnRQYXJlbnQucmVtb3ZlQ2hpbGQoIHRlc3RFbGVtZW50ICk7Cn0pKCk7CgovLyBERVBSRUNBVEVECmlmICggJC51aUJhY2tDb21wYXQgIT09IGZhbHNlICkgewoJLy8gb2Zmc2V0IG9wdGlvbgoJKGZ1bmN0aW9uKCAkICkgewoJCXZhciBfcG9zaXRpb24gPSAkLmZuLnBvc2l0aW9uOwoJCSQuZm4ucG9zaXRpb24gPSBmdW5jdGlvbiggb3B0aW9ucyApIHsKCQkJaWYgKCAhb3B0aW9ucyB8fCAhb3B0aW9ucy5vZmZzZXQgKSB7CgkJCQlyZXR1cm4gX3Bvc2l0aW9uLmNhbGwoIHRoaXMsIG9wdGlvbnMgKTsKCQkJfQoJCQl2YXIgb2Zmc2V0ID0gb3B0aW9ucy5vZmZzZXQuc3BsaXQoICIgIiApLAoJCQkJYXQgPSBvcHRpb25zLmF0LnNwbGl0KCAiICIgKTsKCQkJaWYgKCBvZmZzZXQubGVuZ3RoID09PSAxICkgewoJCQkJb2Zmc2V0WyAxIF0gPSBvZmZzZXRbIDAgXTsKCQkJfQoJCQlpZiAoIC9eXGQvLnRlc3QoIG9mZnNldFsgMCBdICkgKSB7CgkJCQlvZmZzZXRbIDAgXSA9ICIrIiArIG9mZnNldFsgMCBdOwoJCQl9CgkJCWlmICggL15cZC8udGVzdCggb2Zmc2V0WyAxIF0gKSApIHsKCQkJCW9mZnNldFsgMSBdID0gIisiICsgb2Zmc2V0WyAxIF07CgkJCX0KCQkJaWYgKCBhdC5sZW5ndGggPT09IDEgKSB7CgkJCQlpZiAoIC9sZWZ0fGNlbnRlcnxyaWdodC8udGVzdCggYXRbIDAgXSApICkgewoJCQkJCWF0WyAxIF0gPSAiY2VudGVyIjsKCQkJCX0gZWxzZSB7CgkJCQkJYXRbIDEgXSA9IGF0WyAwIF07CgkJCQkJYXRbIDAgXSA9ICJjZW50ZXIiOwoJCQkJfQoJCQl9CgkJCXJldHVybiBfcG9zaXRpb24uY2FsbCggdGhpcywgJC5leHRlbmQoIG9wdGlvbnMsIHsKCQkJCWF0OiBhdFsgMCBdICsgb2Zmc2V0WyAwIF0gKyAiICIgKyBhdFsgMSBdICsgb2Zmc2V0WyAxIF0sCgkJCQlvZmZzZXQ6IHVuZGVmaW5lZAoJCQl9ICkgKTsKCQl9OwoJfSggalF1ZXJ5ICkgKTsKfQoKfSggalF1ZXJ5ICkgKTsKKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7CgokLndpZGdldCgidWkuZHJhZ2dhYmxlIiwgJC51aS5tb3VzZSwgewoJdmVyc2lvbjogIjEuOS4yIiwKCXdpZGdldEV2ZW50UHJlZml4OiAiZHJhZyIsCglvcHRpb25zOiB7CgkJYWRkQ2xhc3NlczogdHJ1ZSwKCQlhcHBlbmRUbzogInBhcmVudCIsCgkJYXhpczogZmFsc2UsCgkJY29ubmVjdFRvU29ydGFibGU6IGZhbHNlLAoJCWNvbnRhaW5tZW50OiBmYWxzZSwKCQljdXJzb3I6ICJhdXRvIiwKCQljdXJzb3JBdDogZmFsc2UsCgkJZ3JpZDogZmFsc2UsCgkJaGFuZGxlOiBmYWxzZSwKCQloZWxwZXI6ICJvcmlnaW5hbCIsCgkJaWZyYW1lRml4OiBmYWxzZSwKCQlvcGFjaXR5OiBmYWxzZSwKCQlyZWZyZXNoUG9zaXRpb25zOiBmYWxzZSwKCQlyZXZlcnQ6IGZhbHNlLAoJCXJldmVydER1cmF0aW9uOiA1MDAsCgkJc2NvcGU6ICJkZWZhdWx0IiwKCQlzY3JvbGw6IHRydWUsCgkJc2Nyb2xsU2Vuc2l0aXZpdHk6IDIwLAoJCXNjcm9sbFNwZWVkOiAyMCwKCQlzbmFwOiBmYWxzZSwKCQlzbmFwTW9kZTogImJvdGgiLAoJCXNuYXBUb2xlcmFuY2U6IDIwLAoJCXN0YWNrOiBmYWxzZSwKCQl6SW5kZXg6IGZhbHNlCgl9LAoJX2NyZWF0ZTogZnVuY3Rpb24oKSB7CgoJCWlmICh0aGlzLm9wdGlvbnMuaGVscGVyID09ICdvcmlnaW5hbCcgJiYgISgvXig/OnJ8YXxmKS8pLnRlc3QodGhpcy5lbGVtZW50LmNzcygicG9zaXRpb24iKSkpCgkJCXRoaXMuZWxlbWVudFswXS5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7CgoJCSh0aGlzLm9wdGlvbnMuYWRkQ2xhc3NlcyAmJiB0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoInVpLWRyYWdnYWJsZSIpKTsKCQkodGhpcy5vcHRpb25zLmRpc2FibGVkICYmIHRoaXMuZWxlbWVudC5hZGRDbGFzcygidWktZHJhZ2dhYmxlLWRpc2FibGVkIikpOwoKCQl0aGlzLl9tb3VzZUluaXQoKTsKCgl9LAoKCV9kZXN0cm95OiBmdW5jdGlvbigpIHsKCQl0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoICJ1aS1kcmFnZ2FibGUgdWktZHJhZ2dhYmxlLWRyYWdnaW5nIHVpLWRyYWdnYWJsZS1kaXNhYmxlZCIgKTsKCQl0aGlzLl9tb3VzZURlc3Ryb3koKTsKCX0sCgoJX21vdXNlQ2FwdHVyZTogZnVuY3Rpb24oZXZlbnQpIHsKCgkJdmFyIG8gPSB0aGlzLm9wdGlvbnM7CgoJCS8vIGFtb25nIG90aGVycywgcHJldmVudCBhIGRyYWcgb24gYSByZXNpemFibGUtaGFuZGxlCgkJaWYgKHRoaXMuaGVscGVyIHx8IG8uZGlzYWJsZWQgfHwgJChldmVudC50YXJnZXQpLmlzKCcudWktcmVzaXphYmxlLWhhbmRsZScpKQoJCQlyZXR1cm4gZmFsc2U7CgoJCS8vUXVpdCBpZiB3ZSdyZSBub3Qgb24gYSB2YWxpZCBoYW5kbGUKCQl0aGlzLmhhbmRsZSA9IHRoaXMuX2dldEhhbmRsZShldmVudCk7CgkJaWYgKCF0aGlzLmhhbmRsZSkKCQkJcmV0dXJuIGZhbHNlOwoKCQkkKG8uaWZyYW1lRml4ID09PSB0cnVlID8gImlmcmFtZSIgOiBvLmlmcmFtZUZpeCkuZWFjaChmdW5jdGlvbigpIHsKCQkJJCgnPGRpdiBjbGFzcz0idWktZHJhZ2dhYmxlLWlmcmFtZUZpeCIgc3R5bGU9ImJhY2tncm91bmQ6ICNmZmY7Ij48L2Rpdj4nKQoJCQkuY3NzKHsKCQkJCXdpZHRoOiB0aGlzLm9mZnNldFdpZHRoKyJweCIsIGhlaWdodDogdGhpcy5vZmZzZXRIZWlnaHQrInB4IiwKCQkJCXBvc2l0aW9uOiAiYWJzb2x1dGUiLCBvcGFjaXR5OiAiMC4wMDEiLCB6SW5kZXg6IDEwMDAKCQkJfSkKCQkJLmNzcygkKHRoaXMpLm9mZnNldCgpKQoJCQkuYXBwZW5kVG8oImJvZHkiKTsKCQl9KTsKCgkJcmV0dXJuIHRydWU7CgoJfSwKCglfbW91c2VTdGFydDogZnVuY3Rpb24oZXZlbnQpIHsKCgkJdmFyIG8gPSB0aGlzLm9wdGlvbnM7CgoJCS8vQ3JlYXRlIGFuZCBhcHBlbmQgdGhlIHZpc2libGUgaGVscGVyCgkJdGhpcy5oZWxwZXIgPSB0aGlzLl9jcmVhdGVIZWxwZXIoZXZlbnQpOwoKCQl0aGlzLmhlbHBlci5hZGRDbGFzcygidWktZHJhZ2dhYmxlLWRyYWdnaW5nIik7CgoJCS8vQ2FjaGUgdGhlIGhlbHBlciBzaXplCgkJdGhpcy5fY2FjaGVIZWxwZXJQcm9wb3J0aW9ucygpOwoKCQkvL0lmIGRkbWFuYWdlciBpcyB1c2VkIGZvciBkcm9wcGFibGVzLCBzZXQgdGhlIGdsb2JhbCBkcmFnZ2FibGUKCQlpZigkLnVpLmRkbWFuYWdlcikKCQkJJC51aS5kZG1hbmFnZXIuY3VycmVudCA9IHRoaXM7CgoJCS8qCgkJICogLSBQb3NpdGlvbiBnZW5lcmF0aW9uIC0KCQkgKiBUaGlzIGJsb2NrIGdlbmVyYXRlcyBldmVyeXRoaW5nIHBvc2l0aW9uIHJlbGF0ZWQgLSBpdCdzIHRoZSBjb3JlIG9mIGRyYWdnYWJsZXMuCgkJICovCgoJCS8vQ2FjaGUgdGhlIG1hcmdpbnMgb2YgdGhlIG9yaWdpbmFsIGVsZW1lbnQKCQl0aGlzLl9jYWNoZU1hcmdpbnMoKTsKCgkJLy9TdG9yZSB0aGUgaGVscGVyJ3MgY3NzIHBvc2l0aW9uCgkJdGhpcy5jc3NQb3NpdGlvbiA9IHRoaXMuaGVscGVyLmNzcygicG9zaXRpb24iKTsKCQl0aGlzLnNjcm9sbFBhcmVudCA9IHRoaXMuaGVscGVyLnNjcm9sbFBhcmVudCgpOwoKCQkvL1RoZSBlbGVtZW50J3MgYWJzb2x1dGUgcG9zaXRpb24gb24gdGhlIHBhZ2UgbWludXMgbWFyZ2lucwoJCXRoaXMub2Zmc2V0ID0gdGhpcy5wb3NpdGlvbkFicyA9IHRoaXMuZWxlbWVudC5vZmZzZXQoKTsKCQl0aGlzLm9mZnNldCA9IHsKCQkJdG9wOiB0aGlzLm9mZnNldC50b3AgLSB0aGlzLm1hcmdpbnMudG9wLAoJCQlsZWZ0OiB0aGlzLm9mZnNldC5sZWZ0IC0gdGhpcy5tYXJnaW5zLmxlZnQKCQl9OwoKCQkkLmV4dGVuZCh0aGlzLm9mZnNldCwgewoJCQljbGljazogeyAvL1doZXJlIHRoZSBjbGljayBoYXBwZW5lZCwgcmVsYXRpdmUgdG8gdGhlIGVsZW1lbnQKCQkJCWxlZnQ6IGV2ZW50LnBhZ2VYIC0gdGhpcy5vZmZzZXQubGVmdCwKCQkJCXRvcDogZXZlbnQucGFnZVkgLSB0aGlzLm9mZnNldC50b3AKCQkJfSwKCQkJcGFyZW50OiB0aGlzLl9nZXRQYXJlbnRPZmZzZXQoKSwKCQkJcmVsYXRpdmU6IHRoaXMuX2dldFJlbGF0aXZlT2Zmc2V0KCkgLy9UaGlzIGlzIGEgcmVsYXRpdmUgdG8gYWJzb2x1dGUgcG9zaXRpb24gbWludXMgdGhlIGFjdHVhbCBwb3NpdGlvbiBjYWxjdWxhdGlvbiAtIG9ubHkgdXNlZCBmb3IgcmVsYXRpdmUgcG9zaXRpb25lZCBoZWxwZXIKCQl9KTsKCgkJLy9HZW5lcmF0ZSB0aGUgb3JpZ2luYWwgcG9zaXRpb24KCQl0aGlzLm9yaWdpbmFsUG9zaXRpb24gPSB0aGlzLnBvc2l0aW9uID0gdGhpcy5fZ2VuZXJhdGVQb3NpdGlvbihldmVudCk7CgkJdGhpcy5vcmlnaW5hbFBhZ2VYID0gZXZlbnQucGFnZVg7CgkJdGhpcy5vcmlnaW5hbFBhZ2VZID0gZXZlbnQucGFnZVk7CgoJCS8vQWRqdXN0IHRoZSBtb3VzZSBvZmZzZXQgcmVsYXRpdmUgdG8gdGhlIGhlbHBlciBpZiAnY3Vyc29yQXQnIGlzIHN1cHBsaWVkCgkJKG8uY3Vyc29yQXQgJiYgdGhpcy5fYWRqdXN0T2Zmc2V0RnJvbUhlbHBlcihvLmN1cnNvckF0KSk7CgoJCS8vU2V0IGEgY29udGFpbm1lbnQgaWYgZ2l2ZW4gaW4gdGhlIG9wdGlvbnMKCQlpZihvLmNvbnRhaW5tZW50KQoJCQl0aGlzLl9zZXRDb250YWlubWVudCgpOwoKCQkvL1RyaWdnZXIgZXZlbnQgKyBjYWxsYmFja3MKCQlpZih0aGlzLl90cmlnZ2VyKCJzdGFydCIsIGV2ZW50KSA9PT0gZmFsc2UpIHsKCQkJdGhpcy5fY2xlYXIoKTsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCgkJLy9SZWNhY2hlIHRoZSBoZWxwZXIgc2l6ZQoJCXRoaXMuX2NhY2hlSGVscGVyUHJvcG9ydGlvbnMoKTsKCgkJLy9QcmVwYXJlIHRoZSBkcm9wcGFibGUgb2Zmc2V0cwoJCWlmICgkLnVpLmRkbWFuYWdlciAmJiAhby5kcm9wQmVoYXZpb3VyKQoJCQkkLnVpLmRkbWFuYWdlci5wcmVwYXJlT2Zmc2V0cyh0aGlzLCBldmVudCk7CgoKCQl0aGlzLl9tb3VzZURyYWcoZXZlbnQsIHRydWUpOyAvL0V4ZWN1dGUgdGhlIGRyYWcgb25jZSAtIHRoaXMgY2F1c2VzIHRoZSBoZWxwZXIgbm90IHRvIGJlIHZpc2libGUgYmVmb3JlIGdldHRpbmcgaXRzIGNvcnJlY3QgcG9zaXRpb24KCgkJLy9JZiB0aGUgZGRtYW5hZ2VyIGlzIHVzZWQgZm9yIGRyb3BwYWJsZXMsIGluZm9ybSB0aGUgbWFuYWdlciB0aGF0IGRyYWdnaW5nIGhhcyBzdGFydGVkIChzZWUgIzUwMDMpCgkJaWYgKCAkLnVpLmRkbWFuYWdlciApICQudWkuZGRtYW5hZ2VyLmRyYWdTdGFydCh0aGlzLCBldmVudCk7CgoJCXJldHVybiB0cnVlOwoJfSwKCglfbW91c2VEcmFnOiBmdW5jdGlvbihldmVudCwgbm9Qcm9wYWdhdGlvbikgewoKCQkvL0NvbXB1dGUgdGhlIGhlbHBlcnMgcG9zaXRpb24KCQl0aGlzLnBvc2l0aW9uID0gdGhpcy5fZ2VuZXJhdGVQb3NpdGlvbihldmVudCk7CgkJdGhpcy5wb3NpdGlvbkFicyA9IHRoaXMuX2NvbnZlcnRQb3NpdGlvblRvKCJhYnNvbHV0ZSIpOwoKCQkvL0NhbGwgcGx1Z2lucyBhbmQgY2FsbGJhY2tzIGFuZCB1c2UgdGhlIHJlc3VsdGluZyBwb3NpdGlvbiBpZiBzb21ldGhpbmcgaXMgcmV0dXJuZWQKCQlpZiAoIW5vUHJvcGFnYXRpb24pIHsKCQkJdmFyIHVpID0gdGhpcy5fdWlIYXNoKCk7CgkJCWlmKHRoaXMuX3RyaWdnZXIoJ2RyYWcnLCBldmVudCwgdWkpID09PSBmYWxzZSkgewoJCQkJdGhpcy5fbW91c2VVcCh7fSk7CgkJCQlyZXR1cm4gZmFsc2U7CgkJCX0KCQkJdGhpcy5wb3NpdGlvbiA9IHVpLnBvc2l0aW9uOwoJCX0KCgkJaWYoIXRoaXMub3B0aW9ucy5heGlzIHx8IHRoaXMub3B0aW9ucy5heGlzICE9ICJ5IikgdGhpcy5oZWxwZXJbMF0uc3R5bGUubGVmdCA9IHRoaXMucG9zaXRpb24ubGVmdCsncHgnOwoJCWlmKCF0aGlzLm9wdGlvbnMuYXhpcyB8fCB0aGlzLm9wdGlvbnMuYXhpcyAhPSAieCIpIHRoaXMuaGVscGVyWzBdLnN0eWxlLnRvcCA9IHRoaXMucG9zaXRpb24udG9wKydweCc7CgkJaWYoJC51aS5kZG1hbmFnZXIpICQudWkuZGRtYW5hZ2VyLmRyYWcodGhpcywgZXZlbnQpOwoKCQlyZXR1cm4gZmFsc2U7Cgl9LAoKCV9tb3VzZVN0b3A6IGZ1bmN0aW9uKGV2ZW50KSB7CgoJCS8vSWYgd2UgYXJlIHVzaW5nIGRyb3BwYWJsZXMsIGluZm9ybSB0aGUgbWFuYWdlciBhYm91dCB0aGUgZHJvcAoJCXZhciBkcm9wcGVkID0gZmFsc2U7CgkJaWYgKCQudWkuZGRtYW5hZ2VyICYmICF0aGlzLm9wdGlvbnMuZHJvcEJlaGF2aW91cikKCQkJZHJvcHBlZCA9ICQudWkuZGRtYW5hZ2VyLmRyb3AodGhpcywgZXZlbnQpOwoKCQkvL2lmIGEgZHJvcCBjb21lcyBmcm9tIG91dHNpZGUgKGEgc29ydGFibGUpCgkJaWYodGhpcy5kcm9wcGVkKSB7CgkJCWRyb3BwZWQgPSB0aGlzLmRyb3BwZWQ7CgkJCXRoaXMuZHJvcHBlZCA9IGZhbHNlOwoJCX0KCgkJLy9pZiB0aGUgb3JpZ2luYWwgZWxlbWVudCBpcyBubyBsb25nZXIgaW4gdGhlIERPTSBkb24ndCBib3RoZXIgdG8gY29udGludWUgKHNlZSAjODI2OSkKCQl2YXIgZWxlbWVudCA9IHRoaXMuZWxlbWVudFswXSwgZWxlbWVudEluRG9tID0gZmFsc2U7CgkJd2hpbGUgKCBlbGVtZW50ICYmIChlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlKSApIHsKCQkJaWYgKGVsZW1lbnQgPT0gZG9jdW1lbnQgKSB7CgkJCQllbGVtZW50SW5Eb20gPSB0cnVlOwoJCQl9CgkJfQoJCWlmICggIWVsZW1lbnRJbkRvbSAmJiB0aGlzLm9wdGlvbnMuaGVscGVyID09PSAib3JpZ2luYWwiICkKCQkJcmV0dXJuIGZhbHNlOwoKCQlpZigodGhpcy5vcHRpb25zLnJldmVydCA9PSAiaW52YWxpZCIgJiYgIWRyb3BwZWQpIHx8ICh0aGlzLm9wdGlvbnMucmV2ZXJ0ID09ICJ2YWxpZCIgJiYgZHJvcHBlZCkgfHwgdGhpcy5vcHRpb25zLnJldmVydCA9PT0gdHJ1ZSB8fCAoJC5pc0Z1bmN0aW9uKHRoaXMub3B0aW9ucy5yZXZlcnQpICYmIHRoaXMub3B0aW9ucy5yZXZlcnQuY2FsbCh0aGlzLmVsZW1lbnQsIGRyb3BwZWQpKSkgewoJCQl2YXIgdGhhdCA9IHRoaXM7CgkJCSQodGhpcy5oZWxwZXIpLmFuaW1hdGUodGhpcy5vcmlnaW5hbFBvc2l0aW9uLCBwYXJzZUludCh0aGlzLm9wdGlvbnMucmV2ZXJ0RHVyYXRpb24sIDEwKSwgZnVuY3Rpb24oKSB7CgkJCQlpZih0aGF0Ll90cmlnZ2VyKCJzdG9wIiwgZXZlbnQpICE9PSBmYWxzZSkgewoJCQkJCXRoYXQuX2NsZWFyKCk7CgkJCQl9CgkJCX0pOwoJCX0gZWxzZSB7CgkJCWlmKHRoaXMuX3RyaWdnZXIoInN0b3AiLCBldmVudCkgIT09IGZhbHNlKSB7CgkJCQl0aGlzLl9jbGVhcigpOwoJCQl9CgkJfQoKCQlyZXR1cm4gZmFsc2U7Cgl9LAoKCV9tb3VzZVVwOiBmdW5jdGlvbihldmVudCkgewoJCS8vUmVtb3ZlIGZyYW1lIGhlbHBlcnMKCQkkKCJkaXYudWktZHJhZ2dhYmxlLWlmcmFtZUZpeCIpLmVhY2goZnVuY3Rpb24oKSB7CgkJCXRoaXMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzKTsKCQl9KTsKCgkJLy9JZiB0aGUgZGRtYW5hZ2VyIGlzIHVzZWQgZm9yIGRyb3BwYWJsZXMsIGluZm9ybSB0aGUgbWFuYWdlciB0aGF0IGRyYWdnaW5nIGhhcyBzdG9wcGVkIChzZWUgIzUwMDMpCgkJaWYoICQudWkuZGRtYW5hZ2VyICkgJC51aS5kZG1hbmFnZXIuZHJhZ1N0b3AodGhpcywgZXZlbnQpOwoKCQlyZXR1cm4gJC51aS5tb3VzZS5wcm90b3R5cGUuX21vdXNlVXAuY2FsbCh0aGlzLCBldmVudCk7Cgl9LAoKCWNhbmNlbDogZnVuY3Rpb24oKSB7CgoJCWlmKHRoaXMuaGVscGVyLmlzKCIudWktZHJhZ2dhYmxlLWRyYWdnaW5nIikpIHsKCQkJdGhpcy5fbW91c2VVcCh7fSk7CgkJfSBlbHNlIHsKCQkJdGhpcy5fY2xlYXIoKTsKCQl9CgoJCXJldHVybiB0aGlzOwoKCX0sCgoJX2dldEhhbmRsZTogZnVuY3Rpb24oZXZlbnQpIHsKCgkJdmFyIGhhbmRsZSA9ICF0aGlzLm9wdGlvbnMuaGFuZGxlIHx8ICEkKHRoaXMub3B0aW9ucy5oYW5kbGUsIHRoaXMuZWxlbWVudCkubGVuZ3RoID8gdHJ1ZSA6IGZhbHNlOwoJCSQodGhpcy5vcHRpb25zLmhhbmRsZSwgdGhpcy5lbGVtZW50KQoJCQkuZmluZCgiKiIpCgkJCS5hbmRTZWxmKCkKCQkJLmVhY2goZnVuY3Rpb24oKSB7CgkJCQlpZih0aGlzID09IGV2ZW50LnRhcmdldCkgaGFuZGxlID0gdHJ1ZTsKCQkJfSk7CgoJCXJldHVybiBoYW5kbGU7CgoJfSwKCglfY3JlYXRlSGVscGVyOiBmdW5jdGlvbihldmVudCkgewoKCQl2YXIgbyA9IHRoaXMub3B0aW9uczsKCQl2YXIgaGVscGVyID0gJC5pc0Z1bmN0aW9uKG8uaGVscGVyKSA/ICQoby5oZWxwZXIuYXBwbHkodGhpcy5lbGVtZW50WzBdLCBbZXZlbnRdKSkgOiAoby5oZWxwZXIgPT0gJ2Nsb25lJyA/IHRoaXMuZWxlbWVudC5jbG9uZSgpLnJlbW92ZUF0dHIoJ2lkJykgOiB0aGlzLmVsZW1lbnQpOwoKCQlpZighaGVscGVyLnBhcmVudHMoJ2JvZHknKS5sZW5ndGgpCgkJCWhlbHBlci5hcHBlbmRUbygoby5hcHBlbmRUbyA9PSAncGFyZW50JyA/IHRoaXMuZWxlbWVudFswXS5wYXJlbnROb2RlIDogby5hcHBlbmRUbykpOwoKCQlpZihoZWxwZXJbMF0gIT0gdGhpcy5lbGVtZW50WzBdICYmICEoLyhmaXhlZHxhYnNvbHV0ZSkvKS50ZXN0KGhlbHBlci5jc3MoInBvc2l0aW9uIikpKQoJCQloZWxwZXIuY3NzKCJwb3NpdGlvbiIsICJhYnNvbHV0ZSIpOwoKCQlyZXR1cm4gaGVscGVyOwoKCX0sCgoJX2FkanVzdE9mZnNldEZyb21IZWxwZXI6IGZ1bmN0aW9uKG9iaikgewoJCWlmICh0eXBlb2Ygb2JqID09ICdzdHJpbmcnKSB7CgkJCW9iaiA9IG9iai5zcGxpdCgnICcpOwoJCX0KCQlpZiAoJC5pc0FycmF5KG9iaikpIHsKCQkJb2JqID0ge2xlZnQ6ICtvYmpbMF0sIHRvcDogK29ialsxXSB8fCAwfTsKCQl9CgkJaWYgKCdsZWZ0JyBpbiBvYmopIHsKCQkJdGhpcy5vZmZzZXQuY2xpY2subGVmdCA9IG9iai5sZWZ0ICsgdGhpcy5tYXJnaW5zLmxlZnQ7CgkJfQoJCWlmICgncmlnaHQnIGluIG9iaikgewoJCQl0aGlzLm9mZnNldC5jbGljay5sZWZ0ID0gdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aCAtIG9iai5yaWdodCArIHRoaXMubWFyZ2lucy5sZWZ0OwoJCX0KCQlpZiAoJ3RvcCcgaW4gb2JqKSB7CgkJCXRoaXMub2Zmc2V0LmNsaWNrLnRvcCA9IG9iai50b3AgKyB0aGlzLm1hcmdpbnMudG9wOwoJCX0KCQlpZiAoJ2JvdHRvbScgaW4gb2JqKSB7CgkJCXRoaXMub2Zmc2V0LmNsaWNrLnRvcCA9IHRoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0IC0gb2JqLmJvdHRvbSArIHRoaXMubWFyZ2lucy50b3A7CgkJfQoJfSwKCglfZ2V0UGFyZW50T2Zmc2V0OiBmdW5jdGlvbigpIHsKCgkJLy9HZXQgdGhlIG9mZnNldFBhcmVudCBhbmQgY2FjaGUgaXRzIHBvc2l0aW9uCgkJdGhpcy5vZmZzZXRQYXJlbnQgPSB0aGlzLmhlbHBlci5vZmZzZXRQYXJlbnQoKTsKCQl2YXIgcG8gPSB0aGlzLm9mZnNldFBhcmVudC5vZmZzZXQoKTsKCgkJLy8gVGhpcyBpcyBhIHNwZWNpYWwgY2FzZSB3aGVyZSB3ZSBuZWVkIHRvIG1vZGlmeSBhIG9mZnNldCBjYWxjdWxhdGVkIG9uIHN0YXJ0LCBzaW5jZSB0aGUgZm9sbG93aW5nIGhhcHBlbmVkOgoJCS8vIDEuIFRoZSBwb3NpdGlvbiBvZiB0aGUgaGVscGVyIGlzIGFic29sdXRlLCBzbyBpdCdzIHBvc2l0aW9uIGlzIGNhbGN1bGF0ZWQgYmFzZWQgb24gdGhlIG5leHQgcG9zaXRpb25lZCBwYXJlbnQKCQkvLyAyLiBUaGUgYWN0dWFsIG9mZnNldCBwYXJlbnQgaXMgYSBjaGlsZCBvZiB0aGUgc2Nyb2xsIHBhcmVudCwgYW5kIHRoZSBzY3JvbGwgcGFyZW50IGlzbid0IHRoZSBkb2N1bWVudCwgd2hpY2ggbWVhbnMgdGhhdAoJCS8vICAgIHRoZSBzY3JvbGwgaXMgaW5jbHVkZWQgaW4gdGhlIGluaXRpYWwgY2FsY3VsYXRpb24gb2YgdGhlIG9mZnNldCBvZiB0aGUgcGFyZW50LCBhbmQgbmV2ZXIgcmVjYWxjdWxhdGVkIHVwb24gZHJhZwoJCWlmKHRoaXMuY3NzUG9zaXRpb24gPT0gJ2Fic29sdXRlJyAmJiB0aGlzLnNjcm9sbFBhcmVudFswXSAhPSBkb2N1bWVudCAmJiAkLmNvbnRhaW5zKHRoaXMuc2Nyb2xsUGFyZW50WzBdLCB0aGlzLm9mZnNldFBhcmVudFswXSkpIHsKCQkJcG8ubGVmdCArPSB0aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0KCk7CgkJCXBvLnRvcCArPSB0aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKTsKCQl9CgoJCWlmKCh0aGlzLm9mZnNldFBhcmVudFswXSA9PSBkb2N1bWVudC5ib2R5KSAvL1RoaXMgbmVlZHMgdG8gYmUgYWN0dWFsbHkgZG9uZSBmb3IgYWxsIGJyb3dzZXJzLCBzaW5jZSBwYWdlWC9wYWdlWSBpbmNsdWRlcyB0aGlzIGluZm9ybWF0aW9uCgkJfHwgKHRoaXMub2Zmc2V0UGFyZW50WzBdLnRhZ05hbWUgJiYgdGhpcy5vZmZzZXRQYXJlbnRbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpID09ICdodG1sJyAmJiAkLnVpLmllKSkgLy9VZ2x5IElFIGZpeAoJCQlwbyA9IHsgdG9wOiAwLCBsZWZ0OiAwIH07CgoJCXJldHVybiB7CgkJCXRvcDogcG8udG9wICsgKHBhcnNlSW50KHRoaXMub2Zmc2V0UGFyZW50LmNzcygiYm9yZGVyVG9wV2lkdGgiKSwxMCkgfHwgMCksCgkJCWxlZnQ6IHBvLmxlZnQgKyAocGFyc2VJbnQodGhpcy5vZmZzZXRQYXJlbnQuY3NzKCJib3JkZXJMZWZ0V2lkdGgiKSwxMCkgfHwgMCkKCQl9OwoKCX0sCgoJX2dldFJlbGF0aXZlT2Zmc2V0OiBmdW5jdGlvbigpIHsKCgkJaWYodGhpcy5jc3NQb3NpdGlvbiA9PSAicmVsYXRpdmUiKSB7CgkJCXZhciBwID0gdGhpcy5lbGVtZW50LnBvc2l0aW9uKCk7CgkJCXJldHVybiB7CgkJCQl0b3A6IHAudG9wIC0gKHBhcnNlSW50KHRoaXMuaGVscGVyLmNzcygidG9wIiksMTApIHx8IDApICsgdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsVG9wKCksCgkJCQlsZWZ0OiBwLmxlZnQgLSAocGFyc2VJbnQodGhpcy5oZWxwZXIuY3NzKCJsZWZ0IiksMTApIHx8IDApICsgdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpCgkJCX07CgkJfSBlbHNlIHsKCQkJcmV0dXJuIHsgdG9wOiAwLCBsZWZ0OiAwIH07CgkJfQoKCX0sCgoJX2NhY2hlTWFyZ2luczogZnVuY3Rpb24oKSB7CgkJdGhpcy5tYXJnaW5zID0gewoJCQlsZWZ0OiAocGFyc2VJbnQodGhpcy5lbGVtZW50LmNzcygibWFyZ2luTGVmdCIpLDEwKSB8fCAwKSwKCQkJdG9wOiAocGFyc2VJbnQodGhpcy5lbGVtZW50LmNzcygibWFyZ2luVG9wIiksMTApIHx8IDApLAoJCQlyaWdodDogKHBhcnNlSW50KHRoaXMuZWxlbWVudC5jc3MoIm1hcmdpblJpZ2h0IiksMTApIHx8IDApLAoJCQlib3R0b206IChwYXJzZUludCh0aGlzLmVsZW1lbnQuY3NzKCJtYXJnaW5Cb3R0b20iKSwxMCkgfHwgMCkKCQl9OwoJfSwKCglfY2FjaGVIZWxwZXJQcm9wb3J0aW9uczogZnVuY3Rpb24oKSB7CgkJdGhpcy5oZWxwZXJQcm9wb3J0aW9ucyA9IHsKCQkJd2lkdGg6IHRoaXMuaGVscGVyLm91dGVyV2lkdGgoKSwKCQkJaGVpZ2h0OiB0aGlzLmhlbHBlci5vdXRlckhlaWdodCgpCgkJfTsKCX0sCgoJX3NldENvbnRhaW5tZW50OiBmdW5jdGlvbigpIHsKCgkJdmFyIG8gPSB0aGlzLm9wdGlvbnM7CgkJaWYoby5jb250YWlubWVudCA9PSAncGFyZW50Jykgby5jb250YWlubWVudCA9IHRoaXMuaGVscGVyWzBdLnBhcmVudE5vZGU7CgkJaWYoby5jb250YWlubWVudCA9PSAnZG9jdW1lbnQnIHx8IG8uY29udGFpbm1lbnQgPT0gJ3dpbmRvdycpIHRoaXMuY29udGFpbm1lbnQgPSBbCgkJCW8uY29udGFpbm1lbnQgPT0gJ2RvY3VtZW50JyA/IDAgOiAkKHdpbmRvdykuc2Nyb2xsTGVmdCgpIC0gdGhpcy5vZmZzZXQucmVsYXRpdmUubGVmdCAtIHRoaXMub2Zmc2V0LnBhcmVudC5sZWZ0LAoJCQlvLmNvbnRhaW5tZW50ID09ICdkb2N1bWVudCcgPyAwIDogJCh3aW5kb3cpLnNjcm9sbFRvcCgpIC0gdGhpcy5vZmZzZXQucmVsYXRpdmUudG9wIC0gdGhpcy5vZmZzZXQucGFyZW50LnRvcCwKCQkJKG8uY29udGFpbm1lbnQgPT0gJ2RvY3VtZW50JyA/IDAgOiAkKHdpbmRvdykuc2Nyb2xsTGVmdCgpKSArICQoby5jb250YWlubWVudCA9PSAnZG9jdW1lbnQnID8gZG9jdW1lbnQgOiB3aW5kb3cpLndpZHRoKCkgLSB0aGlzLmhlbHBlclByb3BvcnRpb25zLndpZHRoIC0gdGhpcy5tYXJnaW5zLmxlZnQsCgkJCShvLmNvbnRhaW5tZW50ID09ICdkb2N1bWVudCcgPyAwIDogJCh3aW5kb3cpLnNjcm9sbFRvcCgpKSArICgkKG8uY29udGFpbm1lbnQgPT0gJ2RvY3VtZW50JyA/IGRvY3VtZW50IDogd2luZG93KS5oZWlnaHQoKSB8fCBkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUuc2Nyb2xsSGVpZ2h0KSAtIHRoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0IC0gdGhpcy5tYXJnaW5zLnRvcAoJCV07CgoJCWlmKCEoL14oZG9jdW1lbnR8d2luZG93fHBhcmVudCkkLykudGVzdChvLmNvbnRhaW5tZW50KSAmJiBvLmNvbnRhaW5tZW50LmNvbnN0cnVjdG9yICE9IEFycmF5KSB7CgkJCXZhciBjID0gJChvLmNvbnRhaW5tZW50KTsKCQkJdmFyIGNlID0gY1swXTsgaWYoIWNlKSByZXR1cm47CgkJCXZhciBjbyA9IGMub2Zmc2V0KCk7CgkJCXZhciBvdmVyID0gKCQoY2UpLmNzcygib3ZlcmZsb3ciKSAhPSAnaGlkZGVuJyk7CgoJCQl0aGlzLmNvbnRhaW5tZW50ID0gWwoJCQkJKHBhcnNlSW50KCQoY2UpLmNzcygiYm9yZGVyTGVmdFdpZHRoIiksMTApIHx8IDApICsgKHBhcnNlSW50KCQoY2UpLmNzcygicGFkZGluZ0xlZnQiKSwxMCkgfHwgMCksCgkJCQkocGFyc2VJbnQoJChjZSkuY3NzKCJib3JkZXJUb3BXaWR0aCIpLDEwKSB8fCAwKSArIChwYXJzZUludCgkKGNlKS5jc3MoInBhZGRpbmdUb3AiKSwxMCkgfHwgMCksCgkJCQkob3ZlciA/IE1hdGgubWF4KGNlLnNjcm9sbFdpZHRoLGNlLm9mZnNldFdpZHRoKSA6IGNlLm9mZnNldFdpZHRoKSAtIChwYXJzZUludCgkKGNlKS5jc3MoImJvcmRlckxlZnRXaWR0aCIpLDEwKSB8fCAwKSAtIChwYXJzZUludCgkKGNlKS5jc3MoInBhZGRpbmdSaWdodCIpLDEwKSB8fCAwKSAtIHRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGggLSB0aGlzLm1hcmdpbnMubGVmdCAtIHRoaXMubWFyZ2lucy5yaWdodCwKCQkJCShvdmVyID8gTWF0aC5tYXgoY2Uuc2Nyb2xsSGVpZ2h0LGNlLm9mZnNldEhlaWdodCkgOiBjZS5vZmZzZXRIZWlnaHQpIC0gKHBhcnNlSW50KCQoY2UpLmNzcygiYm9yZGVyVG9wV2lkdGgiKSwxMCkgfHwgMCkgLSAocGFyc2VJbnQoJChjZSkuY3NzKCJwYWRkaW5nQm90dG9tIiksMTApIHx8IDApIC0gdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQgLSB0aGlzLm1hcmdpbnMudG9wICAtIHRoaXMubWFyZ2lucy5ib3R0b20KCQkJXTsKCQkJdGhpcy5yZWxhdGl2ZV9jb250YWluZXIgPSBjOwoKCQl9IGVsc2UgaWYoby5jb250YWlubWVudC5jb25zdHJ1Y3RvciA9PSBBcnJheSkgewoJCQl0aGlzLmNvbnRhaW5tZW50ID0gby5jb250YWlubWVudDsKCQl9CgoJfSwKCglfY29udmVydFBvc2l0aW9uVG86IGZ1bmN0aW9uKGQsIHBvcykgewoKCQlpZighcG9zKSBwb3MgPSB0aGlzLnBvc2l0aW9uOwoJCXZhciBtb2QgPSBkID09ICJhYnNvbHV0ZSIgPyAxIDogLTE7CgkJdmFyIG8gPSB0aGlzLm9wdGlvbnMsIHNjcm9sbCA9IHRoaXMuY3NzUG9zaXRpb24gPT0gJ2Fic29sdXRlJyAmJiAhKHRoaXMuc2Nyb2xsUGFyZW50WzBdICE9IGRvY3VtZW50ICYmICQuY29udGFpbnModGhpcy5zY3JvbGxQYXJlbnRbMF0sIHRoaXMub2Zmc2V0UGFyZW50WzBdKSkgPyB0aGlzLm9mZnNldFBhcmVudCA6IHRoaXMuc2Nyb2xsUGFyZW50LCBzY3JvbGxJc1Jvb3ROb2RlID0gKC8oaHRtbHxib2R5KS9pKS50ZXN0KHNjcm9sbFswXS50YWdOYW1lKTsKCgkJcmV0dXJuIHsKCQkJdG9wOiAoCgkJCQlwb3MudG9wCQkJCQkJCQkJCQkJCQkJCQkvLyBUaGUgYWJzb2x1dGUgbW91c2UgcG9zaXRpb24KCQkJCSsgdGhpcy5vZmZzZXQucmVsYXRpdmUudG9wICogbW9kCQkJCQkJCQkJCS8vIE9ubHkgZm9yIHJlbGF0aXZlIHBvc2l0aW9uZWQgbm9kZXM6IFJlbGF0aXZlIG9mZnNldCBmcm9tIGVsZW1lbnQgdG8gb2Zmc2V0IHBhcmVudAoJCQkJKyB0aGlzLm9mZnNldC5wYXJlbnQudG9wICogbW9kCQkJCQkJCQkJCQkvLyBUaGUgb2Zmc2V0UGFyZW50J3Mgb2Zmc2V0IHdpdGhvdXQgYm9yZGVycyAob2Zmc2V0ICsgYm9yZGVyKQoJCQkJLSAoICggdGhpcy5jc3NQb3NpdGlvbiA9PSAnZml4ZWQnID8gLXRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpIDogKCBzY3JvbGxJc1Jvb3ROb2RlID8gMCA6IHNjcm9sbC5zY3JvbGxUb3AoKSApICkgKiBtb2QpCgkJCSksCgkJCWxlZnQ6ICgKCQkJCXBvcy5sZWZ0CQkJCQkJCQkJCQkJCQkJCS8vIFRoZSBhYnNvbHV0ZSBtb3VzZSBwb3NpdGlvbgoJCQkJKyB0aGlzLm9mZnNldC5yZWxhdGl2ZS5sZWZ0ICogbW9kCQkJCQkJCQkJCS8vIE9ubHkgZm9yIHJlbGF0aXZlIHBvc2l0aW9uZWQgbm9kZXM6IFJlbGF0aXZlIG9mZnNldCBmcm9tIGVsZW1lbnQgdG8gb2Zmc2V0IHBhcmVudAoJCQkJKyB0aGlzLm9mZnNldC5wYXJlbnQubGVmdCAqIG1vZAkJCQkJCQkJCQkJLy8gVGhlIG9mZnNldFBhcmVudCdzIG9mZnNldCB3aXRob3V0IGJvcmRlcnMgKG9mZnNldCArIGJvcmRlcikKCQkJCS0gKCAoIHRoaXMuY3NzUG9zaXRpb24gPT0gJ2ZpeGVkJyA/IC10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0KCkgOiBzY3JvbGxJc1Jvb3ROb2RlID8gMCA6IHNjcm9sbC5zY3JvbGxMZWZ0KCkgKSAqIG1vZCkKCQkJKQoJCX07CgoJfSwKCglfZ2VuZXJhdGVQb3NpdGlvbjogZnVuY3Rpb24oZXZlbnQpIHsKCgkJdmFyIG8gPSB0aGlzLm9wdGlvbnMsIHNjcm9sbCA9IHRoaXMuY3NzUG9zaXRpb24gPT0gJ2Fic29sdXRlJyAmJiAhKHRoaXMuc2Nyb2xsUGFyZW50WzBdICE9IGRvY3VtZW50ICYmICQuY29udGFpbnModGhpcy5zY3JvbGxQYXJlbnRbMF0sIHRoaXMub2Zmc2V0UGFyZW50WzBdKSkgPyB0aGlzLm9mZnNldFBhcmVudCA6IHRoaXMuc2Nyb2xsUGFyZW50LCBzY3JvbGxJc1Jvb3ROb2RlID0gKC8oaHRtbHxib2R5KS9pKS50ZXN0KHNjcm9sbFswXS50YWdOYW1lKTsKCQl2YXIgcGFnZVggPSBldmVudC5wYWdlWDsKCQl2YXIgcGFnZVkgPSBldmVudC5wYWdlWTsKCgkJLyoKCQkgKiAtIFBvc2l0aW9uIGNvbnN0cmFpbmluZyAtCgkJICogQ29uc3RyYWluIHRoZSBwb3NpdGlvbiB0byBhIG1peCBvZiBncmlkLCBjb250YWlubWVudC4KCQkgKi8KCgkJaWYodGhpcy5vcmlnaW5hbFBvc2l0aW9uKSB7IC8vSWYgd2UgYXJlIG5vdCBkcmFnZ2luZyB5ZXQsIHdlIHdvbid0IGNoZWNrIGZvciBvcHRpb25zCgkJCXZhciBjb250YWlubWVudDsKCQkJaWYodGhpcy5jb250YWlubWVudCkgewoJCQlpZiAodGhpcy5yZWxhdGl2ZV9jb250YWluZXIpewoJCQkJdmFyIGNvID0gdGhpcy5yZWxhdGl2ZV9jb250YWluZXIub2Zmc2V0KCk7CgkJCQljb250YWlubWVudCA9IFsgdGhpcy5jb250YWlubWVudFswXSArIGNvLmxlZnQsCgkJCQkJdGhpcy5jb250YWlubWVudFsxXSArIGNvLnRvcCwKCQkJCQl0aGlzLmNvbnRhaW5tZW50WzJdICsgY28ubGVmdCwKCQkJCQl0aGlzLmNvbnRhaW5tZW50WzNdICsgY28udG9wIF07CgkJCX0KCQkJZWxzZSB7CgkJCQljb250YWlubWVudCA9IHRoaXMuY29udGFpbm1lbnQ7CgkJCX0KCgkJCQlpZihldmVudC5wYWdlWCAtIHRoaXMub2Zmc2V0LmNsaWNrLmxlZnQgPCBjb250YWlubWVudFswXSkgcGFnZVggPSBjb250YWlubWVudFswXSArIHRoaXMub2Zmc2V0LmNsaWNrLmxlZnQ7CgkJCQlpZihldmVudC5wYWdlWSAtIHRoaXMub2Zmc2V0LmNsaWNrLnRvcCA8IGNvbnRhaW5tZW50WzFdKSBwYWdlWSA9IGNvbnRhaW5tZW50WzFdICsgdGhpcy5vZmZzZXQuY2xpY2sudG9wOwoJCQkJaWYoZXZlbnQucGFnZVggLSB0aGlzLm9mZnNldC5jbGljay5sZWZ0ID4gY29udGFpbm1lbnRbMl0pIHBhZ2VYID0gY29udGFpbm1lbnRbMl0gKyB0aGlzLm9mZnNldC5jbGljay5sZWZ0OwoJCQkJaWYoZXZlbnQucGFnZVkgLSB0aGlzLm9mZnNldC5jbGljay50b3AgPiBjb250YWlubWVudFszXSkgcGFnZVkgPSBjb250YWlubWVudFszXSArIHRoaXMub2Zmc2V0LmNsaWNrLnRvcDsKCQkJfQoKCQkJaWYoby5ncmlkKSB7CgkJCQkvL0NoZWNrIGZvciBncmlkIGVsZW1lbnRzIHNldCB0byAwIHRvIHByZXZlbnQgZGl2aWRlIGJ5IDAgZXJyb3IgY2F1c2luZyBpbnZhbGlkIGFyZ3VtZW50IGVycm9ycyBpbiBJRSAoc2VlIHRpY2tldCAjNjk1MCkKCQkJCXZhciB0b3AgPSBvLmdyaWRbMV0gPyB0aGlzLm9yaWdpbmFsUGFnZVkgKyBNYXRoLnJvdW5kKChwYWdlWSAtIHRoaXMub3JpZ2luYWxQYWdlWSkgLyBvLmdyaWRbMV0pICogby5ncmlkWzFdIDogdGhpcy5vcmlnaW5hbFBhZ2VZOwoJCQkJcGFnZVkgPSBjb250YWlubWVudCA/ICghKHRvcCAtIHRoaXMub2Zmc2V0LmNsaWNrLnRvcCA8IGNvbnRhaW5tZW50WzFdIHx8IHRvcCAtIHRoaXMub2Zmc2V0LmNsaWNrLnRvcCA+IGNvbnRhaW5tZW50WzNdKSA/IHRvcCA6ICghKHRvcCAtIHRoaXMub2Zmc2V0LmNsaWNrLnRvcCA8IGNvbnRhaW5tZW50WzFdKSA/IHRvcCAtIG8uZ3JpZFsxXSA6IHRvcCArIG8uZ3JpZFsxXSkpIDogdG9wOwoKCQkJCXZhciBsZWZ0ID0gby5ncmlkWzBdID8gdGhpcy5vcmlnaW5hbFBhZ2VYICsgTWF0aC5yb3VuZCgocGFnZVggLSB0aGlzLm9yaWdpbmFsUGFnZVgpIC8gby5ncmlkWzBdKSAqIG8uZ3JpZFswXSA6IHRoaXMub3JpZ2luYWxQYWdlWDsKCQkJCXBhZ2VYID0gY29udGFpbm1lbnQgPyAoIShsZWZ0IC0gdGhpcy5vZmZzZXQuY2xpY2subGVmdCA8IGNvbnRhaW5tZW50WzBdIHx8IGxlZnQgLSB0aGlzLm9mZnNldC5jbGljay5sZWZ0ID4gY29udGFpbm1lbnRbMl0pID8gbGVmdCA6ICghKGxlZnQgLSB0aGlzLm9mZnNldC5jbGljay5sZWZ0IDwgY29udGFpbm1lbnRbMF0pID8gbGVmdCAtIG8uZ3JpZFswXSA6IGxlZnQgKyBvLmdyaWRbMF0pKSA6IGxlZnQ7CgkJCX0KCgkJfQoKCQlyZXR1cm4gewoJCQl0b3A6ICgKCQkJCXBhZ2VZCQkJCQkJCQkJCQkJCQkJCS8vIFRoZSBhYnNvbHV0ZSBtb3VzZSBwb3NpdGlvbgoJCQkJLSB0aGlzLm9mZnNldC5jbGljay50b3AJCQkJCQkJCQkJCQkJLy8gQ2xpY2sgb2Zmc2V0IChyZWxhdGl2ZSB0byB0aGUgZWxlbWVudCkKCQkJCS0gdGhpcy5vZmZzZXQucmVsYXRpdmUudG9wCQkJCQkJCQkJCQkJLy8gT25seSBmb3IgcmVsYXRpdmUgcG9zaXRpb25lZCBub2RlczogUmVsYXRpdmUgb2Zmc2V0IGZyb20gZWxlbWVudCB0byBvZmZzZXQgcGFyZW50CgkJCQktIHRoaXMub2Zmc2V0LnBhcmVudC50b3AJCQkJCQkJCQkJCQkvLyBUaGUgb2Zmc2V0UGFyZW50J3Mgb2Zmc2V0IHdpdGhvdXQgYm9yZGVycyAob2Zmc2V0ICsgYm9yZGVyKQoJCQkJKyAoICggdGhpcy5jc3NQb3NpdGlvbiA9PSAnZml4ZWQnID8gLXRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpIDogKCBzY3JvbGxJc1Jvb3ROb2RlID8gMCA6IHNjcm9sbC5zY3JvbGxUb3AoKSApICkpCgkJCSksCgkJCWxlZnQ6ICgKCQkJCXBhZ2VYCQkJCQkJCQkJCQkJCQkJCS8vIFRoZSBhYnNvbHV0ZSBtb3VzZSBwb3NpdGlvbgoJCQkJLSB0aGlzLm9mZnNldC5jbGljay5sZWZ0CQkJCQkJCQkJCQkJLy8gQ2xpY2sgb2Zmc2V0IChyZWxhdGl2ZSB0byB0aGUgZWxlbWVudCkKCQkJCS0gdGhpcy5vZmZzZXQucmVsYXRpdmUubGVmdAkJCQkJCQkJCQkJCS8vIE9ubHkgZm9yIHJlbGF0aXZlIHBvc2l0aW9uZWQgbm9kZXM6IFJlbGF0aXZlIG9mZnNldCBmcm9tIGVsZW1lbnQgdG8gb2Zmc2V0IHBhcmVudAoJCQkJLSB0aGlzLm9mZnNldC5wYXJlbnQubGVmdAkJCQkJCQkJCQkJCS8vIFRoZSBvZmZzZXRQYXJlbnQncyBvZmZzZXQgd2l0aG91dCBib3JkZXJzIChvZmZzZXQgKyBib3JkZXIpCgkJCQkrICggKCB0aGlzLmNzc1Bvc2l0aW9uID09ICdmaXhlZCcgPyAtdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpIDogc2Nyb2xsSXNSb290Tm9kZSA/IDAgOiBzY3JvbGwuc2Nyb2xsTGVmdCgpICkpCgkJCSkKCQl9OwoKCX0sCgoJX2NsZWFyOiBmdW5jdGlvbigpIHsKCQl0aGlzLmhlbHBlci5yZW1vdmVDbGFzcygidWktZHJhZ2dhYmxlLWRyYWdnaW5nIik7CgkJaWYodGhpcy5oZWxwZXJbMF0gIT0gdGhpcy5lbGVtZW50WzBdICYmICF0aGlzLmNhbmNlbEhlbHBlclJlbW92YWwpIHRoaXMuaGVscGVyLnJlbW92ZSgpOwoJCS8vaWYoJC51aS5kZG1hbmFnZXIpICQudWkuZGRtYW5hZ2VyLmN1cnJlbnQgPSBudWxsOwoJCXRoaXMuaGVscGVyID0gbnVsbDsKCQl0aGlzLmNhbmNlbEhlbHBlclJlbW92YWwgPSBmYWxzZTsKCX0sCgoJLy8gRnJvbSBub3cgb24gYnVsayBzdHVmZiAtIG1haW5seSBoZWxwZXJzCgoJX3RyaWdnZXI6IGZ1bmN0aW9uKHR5cGUsIGV2ZW50LCB1aSkgewoJCXVpID0gdWkgfHwgdGhpcy5fdWlIYXNoKCk7CgkJJC51aS5wbHVnaW4uY2FsbCh0aGlzLCB0eXBlLCBbZXZlbnQsIHVpXSk7CgkJaWYodHlwZSA9PSAiZHJhZyIpIHRoaXMucG9zaXRpb25BYnMgPSB0aGlzLl9jb252ZXJ0UG9zaXRpb25UbygiYWJzb2x1dGUiKTsgLy9UaGUgYWJzb2x1dGUgcG9zaXRpb24gaGFzIHRvIGJlIHJlY2FsY3VsYXRlZCBhZnRlciBwbHVnaW5zCgkJcmV0dXJuICQuV2lkZ2V0LnByb3RvdHlwZS5fdHJpZ2dlci5jYWxsKHRoaXMsIHR5cGUsIGV2ZW50LCB1aSk7Cgl9LAoKCXBsdWdpbnM6IHt9LAoKCV91aUhhc2g6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJcmV0dXJuIHsKCQkJaGVscGVyOiB0aGlzLmhlbHBlciwKCQkJcG9zaXRpb246IHRoaXMucG9zaXRpb24sCgkJCW9yaWdpbmFsUG9zaXRpb246IHRoaXMub3JpZ2luYWxQb3NpdGlvbiwKCQkJb2Zmc2V0OiB0aGlzLnBvc2l0aW9uQWJzCgkJfTsKCX0KCn0pOwoKJC51aS5wbHVnaW4uYWRkKCJkcmFnZ2FibGUiLCAiY29ubmVjdFRvU29ydGFibGUiLCB7CglzdGFydDogZnVuY3Rpb24oZXZlbnQsIHVpKSB7CgoJCXZhciBpbnN0ID0gJCh0aGlzKS5kYXRhKCJkcmFnZ2FibGUiKSwgbyA9IGluc3Qub3B0aW9ucywKCQkJdWlTb3J0YWJsZSA9ICQuZXh0ZW5kKHt9LCB1aSwgeyBpdGVtOiBpbnN0LmVsZW1lbnQgfSk7CgkJaW5zdC5zb3J0YWJsZXMgPSBbXTsKCQkkKG8uY29ubmVjdFRvU29ydGFibGUpLmVhY2goZnVuY3Rpb24oKSB7CgkJCXZhciBzb3J0YWJsZSA9ICQuZGF0YSh0aGlzLCAnc29ydGFibGUnKTsKCQkJaWYgKHNvcnRhYmxlICYmICFzb3J0YWJsZS5vcHRpb25zLmRpc2FibGVkKSB7CgkJCQlpbnN0LnNvcnRhYmxlcy5wdXNoKHsKCQkJCQlpbnN0YW5jZTogc29ydGFibGUsCgkJCQkJc2hvdWxkUmV2ZXJ0OiBzb3J0YWJsZS5vcHRpb25zLnJldmVydAoJCQkJfSk7CgkJCQlzb3J0YWJsZS5yZWZyZXNoUG9zaXRpb25zKCk7CS8vIENhbGwgdGhlIHNvcnRhYmxlJ3MgcmVmcmVzaFBvc2l0aW9ucyBhdCBkcmFnIHN0YXJ0IHRvIHJlZnJlc2ggdGhlIGNvbnRhaW5lckNhY2hlIHNpbmNlIHRoZSBzb3J0YWJsZSBjb250YWluZXIgY2FjaGUgaXMgdXNlZCBpbiBkcmFnIGFuZCBuZWVkcyB0byBiZSB1cCB0byBkYXRlICh0aGlzIHdpbGwgZW5zdXJlIGl0J3MgaW5pdGlhbGlzZWQgYXMgd2VsbCBhcyBiZWluZyBrZXB0IGluIHN0ZXAgd2l0aCBhbnkgY2hhbmdlcyB0aGF0IG1pZ2h0IGhhdmUgaGFwcGVuZWQgb24gdGhlIHBhZ2UpLgoJCQkJc29ydGFibGUuX3RyaWdnZXIoImFjdGl2YXRlIiwgZXZlbnQsIHVpU29ydGFibGUpOwoJCQl9CgkJfSk7CgoJfSwKCXN0b3A6IGZ1bmN0aW9uKGV2ZW50LCB1aSkgewoKCQkvL0lmIHdlIGFyZSBzdGlsbCBvdmVyIHRoZSBzb3J0YWJsZSwgd2UgZmFrZSB0aGUgc3RvcCBldmVudCBvZiB0aGUgc29ydGFibGUsIGJ1dCBhbHNvIHJlbW92ZSBoZWxwZXIKCQl2YXIgaW5zdCA9ICQodGhpcykuZGF0YSgiZHJhZ2dhYmxlIiksCgkJCXVpU29ydGFibGUgPSAkLmV4dGVuZCh7fSwgdWksIHsgaXRlbTogaW5zdC5lbGVtZW50IH0pOwoKCQkkLmVhY2goaW5zdC5zb3J0YWJsZXMsIGZ1bmN0aW9uKCkgewoJCQlpZih0aGlzLmluc3RhbmNlLmlzT3ZlcikgewoKCQkJCXRoaXMuaW5zdGFuY2UuaXNPdmVyID0gMDsKCgkJCQlpbnN0LmNhbmNlbEhlbHBlclJlbW92YWwgPSB0cnVlOyAvL0Rvbid0IHJlbW92ZSB0aGUgaGVscGVyIGluIHRoZSBkcmFnZ2FibGUgaW5zdGFuY2UKCQkJCXRoaXMuaW5zdGFuY2UuY2FuY2VsSGVscGVyUmVtb3ZhbCA9IGZhbHNlOyAvL1JlbW92ZSBpdCBpbiB0aGUgc29ydGFibGUgaW5zdGFuY2UgKHNvIHNvcnRhYmxlIHBsdWdpbnMgbGlrZSByZXZlcnQgc3RpbGwgd29yaykKCgkJCQkvL1RoZSBzb3J0YWJsZSByZXZlcnQgaXMgc3VwcG9ydGVkLCBhbmQgd2UgaGF2ZSB0byBzZXQgYSB0ZW1wb3JhcnkgZHJvcHBlZCB2YXJpYWJsZSBvbiB0aGUgZHJhZ2dhYmxlIHRvIHN1cHBvcnQgcmV2ZXJ0OiAndmFsaWQvaW52YWxpZCcKCQkJCWlmKHRoaXMuc2hvdWxkUmV2ZXJ0KSB0aGlzLmluc3RhbmNlLm9wdGlvbnMucmV2ZXJ0ID0gdHJ1ZTsKCgkJCQkvL1RyaWdnZXIgdGhlIHN0b3Agb2YgdGhlIHNvcnRhYmxlCgkJCQl0aGlzLmluc3RhbmNlLl9tb3VzZVN0b3AoZXZlbnQpOwoKCQkJCXRoaXMuaW5zdGFuY2Uub3B0aW9ucy5oZWxwZXIgPSB0aGlzLmluc3RhbmNlLm9wdGlvbnMuX2hlbHBlcjsKCgkJCQkvL0lmIHRoZSBoZWxwZXIgaGFzIGJlZW4gdGhlIG9yaWdpbmFsIGl0ZW0sIHJlc3RvcmUgcHJvcGVydGllcyBpbiB0aGUgc29ydGFibGUKCQkJCWlmKGluc3Qub3B0aW9ucy5oZWxwZXIgPT0gJ29yaWdpbmFsJykKCQkJCQl0aGlzLmluc3RhbmNlLmN1cnJlbnRJdGVtLmNzcyh7IHRvcDogJ2F1dG8nLCBsZWZ0OiAnYXV0bycgfSk7CgoJCQl9IGVsc2UgewoJCQkJdGhpcy5pbnN0YW5jZS5jYW5jZWxIZWxwZXJSZW1vdmFsID0gZmFsc2U7IC8vUmVtb3ZlIHRoZSBoZWxwZXIgaW4gdGhlIHNvcnRhYmxlIGluc3RhbmNlCgkJCQl0aGlzLmluc3RhbmNlLl90cmlnZ2VyKCJkZWFjdGl2YXRlIiwgZXZlbnQsIHVpU29ydGFibGUpOwoJCQl9CgoJCX0pOwoKCX0sCglkcmFnOiBmdW5jdGlvbihldmVudCwgdWkpIHsKCgkJdmFyIGluc3QgPSAkKHRoaXMpLmRhdGEoImRyYWdnYWJsZSIpLCB0aGF0ID0gdGhpczsKCgkJdmFyIGNoZWNrUG9zID0gZnVuY3Rpb24obykgewoJCQl2YXIgZHlDbGljayA9IHRoaXMub2Zmc2V0LmNsaWNrLnRvcCwgZHhDbGljayA9IHRoaXMub2Zmc2V0LmNsaWNrLmxlZnQ7CgkJCXZhciBoZWxwZXJUb3AgPSB0aGlzLnBvc2l0aW9uQWJzLnRvcCwgaGVscGVyTGVmdCA9IHRoaXMucG9zaXRpb25BYnMubGVmdDsKCQkJdmFyIGl0ZW1IZWlnaHQgPSBvLmhlaWdodCwgaXRlbVdpZHRoID0gby53aWR0aDsKCQkJdmFyIGl0ZW1Ub3AgPSBvLnRvcCwgaXRlbUxlZnQgPSBvLmxlZnQ7CgoJCQlyZXR1cm4gJC51aS5pc092ZXIoaGVscGVyVG9wICsgZHlDbGljaywgaGVscGVyTGVmdCArIGR4Q2xpY2ssIGl0ZW1Ub3AsIGl0ZW1MZWZ0LCBpdGVtSGVpZ2h0LCBpdGVtV2lkdGgpOwoJCX07CgoJCSQuZWFjaChpbnN0LnNvcnRhYmxlcywgZnVuY3Rpb24oaSkgewoKCQkJdmFyIGlubmVybW9zdEludGVyc2VjdGluZyA9IGZhbHNlOwoJCQl2YXIgdGhpc1NvcnRhYmxlID0gdGhpczsKCQkJLy9Db3B5IG92ZXIgc29tZSB2YXJpYWJsZXMgdG8gYWxsb3cgY2FsbGluZyB0aGUgc29ydGFibGUncyBuYXRpdmUgX2ludGVyc2VjdHNXaXRoCgkJCXRoaXMuaW5zdGFuY2UucG9zaXRpb25BYnMgPSBpbnN0LnBvc2l0aW9uQWJzOwoJCQl0aGlzLmluc3RhbmNlLmhlbHBlclByb3BvcnRpb25zID0gaW5zdC5oZWxwZXJQcm9wb3J0aW9uczsKCQkJdGhpcy5pbnN0YW5jZS5vZmZzZXQuY2xpY2sgPSBpbnN0Lm9mZnNldC5jbGljazsKCgkJCWlmKHRoaXMuaW5zdGFuY2UuX2ludGVyc2VjdHNXaXRoKHRoaXMuaW5zdGFuY2UuY29udGFpbmVyQ2FjaGUpKSB7CgkJCQlpbm5lcm1vc3RJbnRlcnNlY3RpbmcgPSB0cnVlOwoJCQkJJC5lYWNoKGluc3Quc29ydGFibGVzLCBmdW5jdGlvbiAoKSB7CgkJCQkJdGhpcy5pbnN0YW5jZS5wb3NpdGlvbkFicyA9IGluc3QucG9zaXRpb25BYnM7CgkJCQkJdGhpcy5pbnN0YW5jZS5oZWxwZXJQcm9wb3J0aW9ucyA9IGluc3QuaGVscGVyUHJvcG9ydGlvbnM7CgkJCQkJdGhpcy5pbnN0YW5jZS5vZmZzZXQuY2xpY2sgPSBpbnN0Lm9mZnNldC5jbGljazsKCQkJCQlpZiAgKHRoaXMgIT0gdGhpc1NvcnRhYmxlCgkJCQkJCSYmIHRoaXMuaW5zdGFuY2UuX2ludGVyc2VjdHNXaXRoKHRoaXMuaW5zdGFuY2UuY29udGFpbmVyQ2FjaGUpCgkJCQkJCSYmICQudWkuY29udGFpbnModGhpc1NvcnRhYmxlLmluc3RhbmNlLmVsZW1lbnRbMF0sIHRoaXMuaW5zdGFuY2UuZWxlbWVudFswXSkpCgkJCQkJCWlubmVybW9zdEludGVyc2VjdGluZyA9IGZhbHNlOwoJCQkJCQlyZXR1cm4gaW5uZXJtb3N0SW50ZXJzZWN0aW5nOwoJCQkJfSk7CgkJCX0KCgoJCQlpZihpbm5lcm1vc3RJbnRlcnNlY3RpbmcpIHsKCQkJCS8vSWYgaXQgaW50ZXJzZWN0cywgd2UgdXNlIGEgbGl0dGxlIGlzT3ZlciB2YXJpYWJsZSBhbmQgc2V0IGl0IG9uY2UsIHNvIG91ciBtb3ZlLWluIHN0dWZmIGdldHMgZmlyZWQgb25seSBvbmNlCgkJCQlpZighdGhpcy5pbnN0YW5jZS5pc092ZXIpIHsKCgkJCQkJdGhpcy5pbnN0YW5jZS5pc092ZXIgPSAxOwoJCQkJCS8vTm93IHdlIGZha2UgdGhlIHN0YXJ0IG9mIGRyYWdnaW5nIGZvciB0aGUgc29ydGFibGUgaW5zdGFuY2UsCgkJCQkJLy9ieSBjbG9uaW5nIHRoZSBsaXN0IGdyb3VwIGl0ZW0sIGFwcGVuZGluZyBpdCB0byB0aGUgc29ydGFibGUgYW5kIHVzaW5nIGl0IGFzIGluc3QuY3VycmVudEl0ZW0KCQkJCQkvL1dlIGNhbiB0aGVuIGZpcmUgdGhlIHN0YXJ0IGV2ZW50IG9mIHRoZSBzb3J0YWJsZSB3aXRoIG91ciBwYXNzZWQgYnJvd3NlciBldmVudCwgYW5kIG91ciBvd24gaGVscGVyIChzbyBpdCBkb2Vzbid0IGNyZWF0ZSBhIG5ldyBvbmUpCgkJCQkJdGhpcy5pbnN0YW5jZS5jdXJyZW50SXRlbSA9ICQodGhhdCkuY2xvbmUoKS5yZW1vdmVBdHRyKCdpZCcpLmFwcGVuZFRvKHRoaXMuaW5zdGFuY2UuZWxlbWVudCkuZGF0YSgic29ydGFibGUtaXRlbSIsIHRydWUpOwoJCQkJCXRoaXMuaW5zdGFuY2Uub3B0aW9ucy5faGVscGVyID0gdGhpcy5pbnN0YW5jZS5vcHRpb25zLmhlbHBlcjsgLy9TdG9yZSBoZWxwZXIgb3B0aW9uIHRvIGxhdGVyIHJlc3RvcmUgaXQKCQkJCQl0aGlzLmluc3RhbmNlLm9wdGlvbnMuaGVscGVyID0gZnVuY3Rpb24oKSB7IHJldHVybiB1aS5oZWxwZXJbMF07IH07CgoJCQkJCWV2ZW50LnRhcmdldCA9IHRoaXMuaW5zdGFuY2UuY3VycmVudEl0ZW1bMF07CgkJCQkJdGhpcy5pbnN0YW5jZS5fbW91c2VDYXB0dXJlKGV2ZW50LCB0cnVlKTsKCQkJCQl0aGlzLmluc3RhbmNlLl9tb3VzZVN0YXJ0KGV2ZW50LCB0cnVlLCB0cnVlKTsKCgkJCQkJLy9CZWNhdXNlIHRoZSBicm93c2VyIGV2ZW50IGlzIHdheSBvZmYgdGhlIG5ldyBhcHBlbmRlZCBwb3J0bGV0LCB3ZSBtb2RpZnkgYSBjb3VwbGUgb2YgdmFyaWFibGVzIHRvIHJlZmxlY3QgdGhlIGNoYW5nZXMKCQkJCQl0aGlzLmluc3RhbmNlLm9mZnNldC5jbGljay50b3AgPSBpbnN0Lm9mZnNldC5jbGljay50b3A7CgkJCQkJdGhpcy5pbnN0YW5jZS5vZmZzZXQuY2xpY2subGVmdCA9IGluc3Qub2Zmc2V0LmNsaWNrLmxlZnQ7CgkJCQkJdGhpcy5pbnN0YW5jZS5vZmZzZXQucGFyZW50LmxlZnQgLT0gaW5zdC5vZmZzZXQucGFyZW50LmxlZnQgLSB0aGlzLmluc3RhbmNlLm9mZnNldC5wYXJlbnQubGVmdDsKCQkJCQl0aGlzLmluc3RhbmNlLm9mZnNldC5wYXJlbnQudG9wIC09IGluc3Qub2Zmc2V0LnBhcmVudC50b3AgLSB0aGlzLmluc3RhbmNlLm9mZnNldC5wYXJlbnQudG9wOwoKCQkJCQlpbnN0Ll90cmlnZ2VyKCJ0b1NvcnRhYmxlIiwgZXZlbnQpOwoJCQkJCWluc3QuZHJvcHBlZCA9IHRoaXMuaW5zdGFuY2UuZWxlbWVudDsgLy9kcmFnZ2FibGUgcmV2ZXJ0IG5lZWRzIHRoYXQKCQkJCQkvL2hhY2sgc28gcmVjZWl2ZS91cGRhdGUgY2FsbGJhY2tzIHdvcmsgKG1vc3RseSkKCQkJCQlpbnN0LmN1cnJlbnRJdGVtID0gaW5zdC5lbGVtZW50OwoJCQkJCXRoaXMuaW5zdGFuY2UuZnJvbU91dHNpZGUgPSBpbnN0OwoKCQkJCX0KCgkJCQkvL1Byb3ZpZGVkIHdlIGRpZCBhbGwgdGhlIHByZXZpb3VzIHN0ZXBzLCB3ZSBjYW4gZmlyZSB0aGUgZHJhZyBldmVudCBvZiB0aGUgc29ydGFibGUgb24gZXZlcnkgZHJhZ2dhYmxlIGRyYWcsIHdoZW4gaXQgaW50ZXJzZWN0cyB3aXRoIHRoZSBzb3J0YWJsZQoJCQkJaWYodGhpcy5pbnN0YW5jZS5jdXJyZW50SXRlbSkgdGhpcy5pbnN0YW5jZS5fbW91c2VEcmFnKGV2ZW50KTsKCgkJCX0gZWxzZSB7CgoJCQkJLy9JZiBpdCBkb2Vzbid0IGludGVyc2VjdCB3aXRoIHRoZSBzb3J0YWJsZSwgYW5kIGl0IGludGVyc2VjdGVkIGJlZm9yZSwKCQkJCS8vd2UgZmFrZSB0aGUgZHJhZyBzdG9wIG9mIHRoZSBzb3J0YWJsZSwgYnV0IG1ha2Ugc3VyZSBpdCBkb2Vzbid0IHJlbW92ZSB0aGUgaGVscGVyIGJ5IHVzaW5nIGNhbmNlbEhlbHBlclJlbW92YWwKCQkJCWlmKHRoaXMuaW5zdGFuY2UuaXNPdmVyKSB7CgoJCQkJCXRoaXMuaW5zdGFuY2UuaXNPdmVyID0gMDsKCQkJCQl0aGlzLmluc3RhbmNlLmNhbmNlbEhlbHBlclJlbW92YWwgPSB0cnVlOwoKCQkJCQkvL1ByZXZlbnQgcmV2ZXJ0aW5nIG9uIHRoaXMgZm9yY2VkIHN0b3AKCQkJCQl0aGlzLmluc3RhbmNlLm9wdGlvbnMucmV2ZXJ0ID0gZmFsc2U7CgoJCQkJCS8vIFRoZSBvdXQgZXZlbnQgbmVlZHMgdG8gYmUgdHJpZ2dlcmVkIGluZGVwZW5kZW50bHkKCQkJCQl0aGlzLmluc3RhbmNlLl90cmlnZ2VyKCdvdXQnLCBldmVudCwgdGhpcy5pbnN0YW5jZS5fdWlIYXNoKHRoaXMuaW5zdGFuY2UpKTsKCgkJCQkJdGhpcy5pbnN0YW5jZS5fbW91c2VTdG9wKGV2ZW50LCB0cnVlKTsKCQkJCQl0aGlzLmluc3RhbmNlLm9wdGlvbnMuaGVscGVyID0gdGhpcy5pbnN0YW5jZS5vcHRpb25zLl9oZWxwZXI7CgoJCQkJCS8vTm93IHdlIHJlbW92ZSBvdXIgY3VycmVudEl0ZW0sIHRoZSBsaXN0IGdyb3VwIGNsb25lIGFnYWluLCBhbmQgdGhlIHBsYWNlaG9sZGVyLCBhbmQgYW5pbWF0ZSB0aGUgaGVscGVyIGJhY2sgdG8gaXQncyBvcmlnaW5hbCBzaXplCgkJCQkJdGhpcy5pbnN0YW5jZS5jdXJyZW50SXRlbS5yZW1vdmUoKTsKCQkJCQlpZih0aGlzLmluc3RhbmNlLnBsYWNlaG9sZGVyKSB0aGlzLmluc3RhbmNlLnBsYWNlaG9sZGVyLnJlbW92ZSgpOwoKCQkJCQlpbnN0Ll90cmlnZ2VyKCJmcm9tU29ydGFibGUiLCBldmVudCk7CgkJCQkJaW5zdC5kcm9wcGVkID0gZmFsc2U7IC8vZHJhZ2dhYmxlIHJldmVydCBuZWVkcyB0aGF0CgkJCQl9CgoJCQl9OwoKCQl9KTsKCgl9Cn0pOwoKJC51aS5wbHVnaW4uYWRkKCJkcmFnZ2FibGUiLCAiY3Vyc29yIiwgewoJc3RhcnQ6IGZ1bmN0aW9uKGV2ZW50LCB1aSkgewoJCXZhciB0ID0gJCgnYm9keScpLCBvID0gJCh0aGlzKS5kYXRhKCdkcmFnZ2FibGUnKS5vcHRpb25zOwoJCWlmICh0LmNzcygiY3Vyc29yIikpIG8uX2N1cnNvciA9IHQuY3NzKCJjdXJzb3IiKTsKCQl0LmNzcygiY3Vyc29yIiwgby5jdXJzb3IpOwoJfSwKCXN0b3A6IGZ1bmN0aW9uKGV2ZW50LCB1aSkgewoJCXZhciBvID0gJCh0aGlzKS5kYXRhKCdkcmFnZ2FibGUnKS5vcHRpb25zOwoJCWlmIChvLl9jdXJzb3IpICQoJ2JvZHknKS5jc3MoImN1cnNvciIsIG8uX2N1cnNvcik7Cgl9Cn0pOwoKJC51aS5wbHVnaW4uYWRkKCJkcmFnZ2FibGUiLCAib3BhY2l0eSIsIHsKCXN0YXJ0OiBmdW5jdGlvbihldmVudCwgdWkpIHsKCQl2YXIgdCA9ICQodWkuaGVscGVyKSwgbyA9ICQodGhpcykuZGF0YSgnZHJhZ2dhYmxlJykub3B0aW9uczsKCQlpZih0LmNzcygib3BhY2l0eSIpKSBvLl9vcGFjaXR5ID0gdC5jc3MoIm9wYWNpdHkiKTsKCQl0LmNzcygnb3BhY2l0eScsIG8ub3BhY2l0eSk7Cgl9LAoJc3RvcDogZnVuY3Rpb24oZXZlbnQsIHVpKSB7CgkJdmFyIG8gPSAkKHRoaXMpLmRhdGEoJ2RyYWdnYWJsZScpLm9wdGlvbnM7CgkJaWYoby5fb3BhY2l0eSkgJCh1aS5oZWxwZXIpLmNzcygnb3BhY2l0eScsIG8uX29wYWNpdHkpOwoJfQp9KTsKCiQudWkucGx1Z2luLmFkZCgiZHJhZ2dhYmxlIiwgInNjcm9sbCIsIHsKCXN0YXJ0OiBmdW5jdGlvbihldmVudCwgdWkpIHsKCQl2YXIgaSA9ICQodGhpcykuZGF0YSgiZHJhZ2dhYmxlIik7CgkJaWYoaS5zY3JvbGxQYXJlbnRbMF0gIT0gZG9jdW1lbnQgJiYgaS5zY3JvbGxQYXJlbnRbMF0udGFnTmFtZSAhPSAnSFRNTCcpIGkub3ZlcmZsb3dPZmZzZXQgPSBpLnNjcm9sbFBhcmVudC5vZmZzZXQoKTsKCX0sCglkcmFnOiBmdW5jdGlvbihldmVudCwgdWkpIHsKCgkJdmFyIGkgPSAkKHRoaXMpLmRhdGEoImRyYWdnYWJsZSIpLCBvID0gaS5vcHRpb25zLCBzY3JvbGxlZCA9IGZhbHNlOwoKCQlpZihpLnNjcm9sbFBhcmVudFswXSAhPSBkb2N1bWVudCAmJiBpLnNjcm9sbFBhcmVudFswXS50YWdOYW1lICE9ICdIVE1MJykgewoKCQkJaWYoIW8uYXhpcyB8fCBvLmF4aXMgIT0gJ3gnKSB7CgkJCQlpZigoaS5vdmVyZmxvd09mZnNldC50b3AgKyBpLnNjcm9sbFBhcmVudFswXS5vZmZzZXRIZWlnaHQpIC0gZXZlbnQucGFnZVkgPCBvLnNjcm9sbFNlbnNpdGl2aXR5KQoJCQkJCWkuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbFRvcCA9IHNjcm9sbGVkID0gaS5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsVG9wICsgby5zY3JvbGxTcGVlZDsKCQkJCWVsc2UgaWYoZXZlbnQucGFnZVkgLSBpLm92ZXJmbG93T2Zmc2V0LnRvcCA8IG8uc2Nyb2xsU2Vuc2l0aXZpdHkpCgkJCQkJaS5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsVG9wID0gc2Nyb2xsZWQgPSBpLnNjcm9sbFBhcmVudFswXS5zY3JvbGxUb3AgLSBvLnNjcm9sbFNwZWVkOwoJCQl9CgoJCQlpZighby5heGlzIHx8IG8uYXhpcyAhPSAneScpIHsKCQkJCWlmKChpLm92ZXJmbG93T2Zmc2V0LmxlZnQgKyBpLnNjcm9sbFBhcmVudFswXS5vZmZzZXRXaWR0aCkgLSBldmVudC5wYWdlWCA8IG8uc2Nyb2xsU2Vuc2l0aXZpdHkpCgkJCQkJaS5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsTGVmdCA9IHNjcm9sbGVkID0gaS5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsTGVmdCArIG8uc2Nyb2xsU3BlZWQ7CgkJCQllbHNlIGlmKGV2ZW50LnBhZ2VYIC0gaS5vdmVyZmxvd09mZnNldC5sZWZ0IDwgby5zY3JvbGxTZW5zaXRpdml0eSkKCQkJCQlpLnNjcm9sbFBhcmVudFswXS5zY3JvbGxMZWZ0ID0gc2Nyb2xsZWQgPSBpLnNjcm9sbFBhcmVudFswXS5zY3JvbGxMZWZ0IC0gby5zY3JvbGxTcGVlZDsKCQkJfQoKCQl9IGVsc2UgewoKCQkJaWYoIW8uYXhpcyB8fCBvLmF4aXMgIT0gJ3gnKSB7CgkJCQlpZihldmVudC5wYWdlWSAtICQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpIDwgby5zY3JvbGxTZW5zaXRpdml0eSkKCQkJCQlzY3JvbGxlZCA9ICQoZG9jdW1lbnQpLnNjcm9sbFRvcCgkKGRvY3VtZW50KS5zY3JvbGxUb3AoKSAtIG8uc2Nyb2xsU3BlZWQpOwoJCQkJZWxzZSBpZigkKHdpbmRvdykuaGVpZ2h0KCkgLSAoZXZlbnQucGFnZVkgLSAkKGRvY3VtZW50KS5zY3JvbGxUb3AoKSkgPCBvLnNjcm9sbFNlbnNpdGl2aXR5KQoJCQkJCXNjcm9sbGVkID0gJChkb2N1bWVudCkuc2Nyb2xsVG9wKCQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpICsgby5zY3JvbGxTcGVlZCk7CgkJCX0KCgkJCWlmKCFvLmF4aXMgfHwgby5heGlzICE9ICd5JykgewoJCQkJaWYoZXZlbnQucGFnZVggLSAkKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCkgPCBvLnNjcm9sbFNlbnNpdGl2aXR5KQoJCQkJCXNjcm9sbGVkID0gJChkb2N1bWVudCkuc2Nyb2xsTGVmdCgkKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCkgLSBvLnNjcm9sbFNwZWVkKTsKCQkJCWVsc2UgaWYoJCh3aW5kb3cpLndpZHRoKCkgLSAoZXZlbnQucGFnZVggLSAkKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCkpIDwgby5zY3JvbGxTZW5zaXRpdml0eSkKCQkJCQlzY3JvbGxlZCA9ICQoZG9jdW1lbnQpLnNjcm9sbExlZnQoJChkb2N1bWVudCkuc2Nyb2xsTGVmdCgpICsgby5zY3JvbGxTcGVlZCk7CgkJCX0KCgkJfQoKCQlpZihzY3JvbGxlZCAhPT0gZmFsc2UgJiYgJC51aS5kZG1hbmFnZXIgJiYgIW8uZHJvcEJlaGF2aW91cikKCQkJJC51aS5kZG1hbmFnZXIucHJlcGFyZU9mZnNldHMoaSwgZXZlbnQpOwoKCX0KfSk7CgokLnVpLnBsdWdpbi5hZGQoImRyYWdnYWJsZSIsICJzbmFwIiwgewoJc3RhcnQ6IGZ1bmN0aW9uKGV2ZW50LCB1aSkgewoKCQl2YXIgaSA9ICQodGhpcykuZGF0YSgiZHJhZ2dhYmxlIiksIG8gPSBpLm9wdGlvbnM7CgkJaS5zbmFwRWxlbWVudHMgPSBbXTsKCgkJJChvLnNuYXAuY29uc3RydWN0b3IgIT0gU3RyaW5nID8gKCBvLnNuYXAuaXRlbXMgfHwgJzpkYXRhKGRyYWdnYWJsZSknICkgOiBvLnNuYXApLmVhY2goZnVuY3Rpb24oKSB7CgkJCXZhciAkdCA9ICQodGhpcyk7IHZhciAkbyA9ICR0Lm9mZnNldCgpOwoJCQlpZih0aGlzICE9IGkuZWxlbWVudFswXSkgaS5zbmFwRWxlbWVudHMucHVzaCh7CgkJCQlpdGVtOiB0aGlzLAoJCQkJd2lkdGg6ICR0Lm91dGVyV2lkdGgoKSwgaGVpZ2h0OiAkdC5vdXRlckhlaWdodCgpLAoJCQkJdG9wOiAkby50b3AsIGxlZnQ6ICRvLmxlZnQKCQkJfSk7CgkJfSk7CgoJfSwKCWRyYWc6IGZ1bmN0aW9uKGV2ZW50LCB1aSkgewoKCQl2YXIgaW5zdCA9ICQodGhpcykuZGF0YSgiZHJhZ2dhYmxlIiksIG8gPSBpbnN0Lm9wdGlvbnM7CgkJdmFyIGQgPSBvLnNuYXBUb2xlcmFuY2U7CgoJCXZhciB4MSA9IHVpLm9mZnNldC5sZWZ0LCB4MiA9IHgxICsgaW5zdC5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aCwKCQkJeTEgPSB1aS5vZmZzZXQudG9wLCB5MiA9IHkxICsgaW5zdC5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQ7CgoJCWZvciAodmFyIGkgPSBpbnN0LnNuYXBFbGVtZW50cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSl7CgoJCQl2YXIgbCA9IGluc3Quc25hcEVsZW1lbnRzW2ldLmxlZnQsIHIgPSBsICsgaW5zdC5zbmFwRWxlbWVudHNbaV0ud2lkdGgsCgkJCQl0ID0gaW5zdC5zbmFwRWxlbWVudHNbaV0udG9wLCBiID0gdCArIGluc3Quc25hcEVsZW1lbnRzW2ldLmhlaWdodDsKCgkJCS8vWWVzLCBJIGtub3csIHRoaXMgaXMgaW5zYW5lIDspCgkJCWlmKCEoKGwtZCA8IHgxICYmIHgxIDwgcitkICYmIHQtZCA8IHkxICYmIHkxIDwgYitkKSB8fCAobC1kIDwgeDEgJiYgeDEgPCByK2QgJiYgdC1kIDwgeTIgJiYgeTIgPCBiK2QpIHx8IChsLWQgPCB4MiAmJiB4MiA8IHIrZCAmJiB0LWQgPCB5MSAmJiB5MSA8IGIrZCkgfHwgKGwtZCA8IHgyICYmIHgyIDwgcitkICYmIHQtZCA8IHkyICYmIHkyIDwgYitkKSkpIHsKCQkJCWlmKGluc3Quc25hcEVsZW1lbnRzW2ldLnNuYXBwaW5nKSAoaW5zdC5vcHRpb25zLnNuYXAucmVsZWFzZSAmJiBpbnN0Lm9wdGlvbnMuc25hcC5yZWxlYXNlLmNhbGwoaW5zdC5lbGVtZW50LCBldmVudCwgJC5leHRlbmQoaW5zdC5fdWlIYXNoKCksIHsgc25hcEl0ZW06IGluc3Quc25hcEVsZW1lbnRzW2ldLml0ZW0gfSkpKTsKCQkJCWluc3Quc25hcEVsZW1lbnRzW2ldLnNuYXBwaW5nID0gZmFsc2U7CgkJCQljb250aW51ZTsKCQkJfQoKCQkJaWYoby5zbmFwTW9kZSAhPSAnaW5uZXInKSB7CgkJCQl2YXIgdHMgPSBNYXRoLmFicyh0IC0geTIpIDw9IGQ7CgkJCQl2YXIgYnMgPSBNYXRoLmFicyhiIC0geTEpIDw9IGQ7CgkJCQl2YXIgbHMgPSBNYXRoLmFicyhsIC0geDIpIDw9IGQ7CgkJCQl2YXIgcnMgPSBNYXRoLmFicyhyIC0geDEpIDw9IGQ7CgkJCQlpZih0cykgdWkucG9zaXRpb24udG9wID0gaW5zdC5fY29udmVydFBvc2l0aW9uVG8oInJlbGF0aXZlIiwgeyB0b3A6IHQgLSBpbnN0LmhlbHBlclByb3BvcnRpb25zLmhlaWdodCwgbGVmdDogMCB9KS50b3AgLSBpbnN0Lm1hcmdpbnMudG9wOwoJCQkJaWYoYnMpIHVpLnBvc2l0aW9uLnRvcCA9IGluc3QuX2NvbnZlcnRQb3NpdGlvblRvKCJyZWxhdGl2ZSIsIHsgdG9wOiBiLCBsZWZ0OiAwIH0pLnRvcCAtIGluc3QubWFyZ2lucy50b3A7CgkJCQlpZihscykgdWkucG9zaXRpb24ubGVmdCA9IGluc3QuX2NvbnZlcnRQb3NpdGlvblRvKCJyZWxhdGl2ZSIsIHsgdG9wOiAwLCBsZWZ0OiBsIC0gaW5zdC5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aCB9KS5sZWZ0IC0gaW5zdC5tYXJnaW5zLmxlZnQ7CgkJCQlpZihycykgdWkucG9zaXRpb24ubGVmdCA9IGluc3QuX2NvbnZlcnRQb3NpdGlvblRvKCJyZWxhdGl2ZSIsIHsgdG9wOiAwLCBsZWZ0OiByIH0pLmxlZnQgLSBpbnN0Lm1hcmdpbnMubGVmdDsKCQkJfQoKCQkJdmFyIGZpcnN0ID0gKHRzIHx8IGJzIHx8IGxzIHx8IHJzKTsKCgkJCWlmKG8uc25hcE1vZGUgIT0gJ291dGVyJykgewoJCQkJdmFyIHRzID0gTWF0aC5hYnModCAtIHkxKSA8PSBkOwoJCQkJdmFyIGJzID0gTWF0aC5hYnMoYiAtIHkyKSA8PSBkOwoJCQkJdmFyIGxzID0gTWF0aC5hYnMobCAtIHgxKSA8PSBkOwoJCQkJdmFyIHJzID0gTWF0aC5hYnMociAtIHgyKSA8PSBkOwoJCQkJaWYodHMpIHVpLnBvc2l0aW9uLnRvcCA9IGluc3QuX2NvbnZlcnRQb3NpdGlvblRvKCJyZWxhdGl2ZSIsIHsgdG9wOiB0LCBsZWZ0OiAwIH0pLnRvcCAtIGluc3QubWFyZ2lucy50b3A7CgkJCQlpZihicykgdWkucG9zaXRpb24udG9wID0gaW5zdC5fY29udmVydFBvc2l0aW9uVG8oInJlbGF0aXZlIiwgeyB0b3A6IGIgLSBpbnN0LmhlbHBlclByb3BvcnRpb25zLmhlaWdodCwgbGVmdDogMCB9KS50b3AgLSBpbnN0Lm1hcmdpbnMudG9wOwoJCQkJaWYobHMpIHVpLnBvc2l0aW9uLmxlZnQgPSBpbnN0Ll9jb252ZXJ0UG9zaXRpb25UbygicmVsYXRpdmUiLCB7IHRvcDogMCwgbGVmdDogbCB9KS5sZWZ0IC0gaW5zdC5tYXJnaW5zLmxlZnQ7CgkJCQlpZihycykgdWkucG9zaXRpb24ubGVmdCA9IGluc3QuX2NvbnZlcnRQb3NpdGlvblRvKCJyZWxhdGl2ZSIsIHsgdG9wOiAwLCBsZWZ0OiByIC0gaW5zdC5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aCB9KS5sZWZ0IC0gaW5zdC5tYXJnaW5zLmxlZnQ7CgkJCX0KCgkJCWlmKCFpbnN0LnNuYXBFbGVtZW50c1tpXS5zbmFwcGluZyAmJiAodHMgfHwgYnMgfHwgbHMgfHwgcnMgfHwgZmlyc3QpKQoJCQkJKGluc3Qub3B0aW9ucy5zbmFwLnNuYXAgJiYgaW5zdC5vcHRpb25zLnNuYXAuc25hcC5jYWxsKGluc3QuZWxlbWVudCwgZXZlbnQsICQuZXh0ZW5kKGluc3QuX3VpSGFzaCgpLCB7IHNuYXBJdGVtOiBpbnN0LnNuYXBFbGVtZW50c1tpXS5pdGVtIH0pKSk7CgkJCWluc3Quc25hcEVsZW1lbnRzW2ldLnNuYXBwaW5nID0gKHRzIHx8IGJzIHx8IGxzIHx8IHJzIHx8IGZpcnN0KTsKCgkJfTsKCgl9Cn0pOwoKJC51aS5wbHVnaW4uYWRkKCJkcmFnZ2FibGUiLCAic3RhY2siLCB7CglzdGFydDogZnVuY3Rpb24oZXZlbnQsIHVpKSB7CgoJCXZhciBvID0gJCh0aGlzKS5kYXRhKCJkcmFnZ2FibGUiKS5vcHRpb25zOwoKCQl2YXIgZ3JvdXAgPSAkLm1ha2VBcnJheSgkKG8uc3RhY2spKS5zb3J0KGZ1bmN0aW9uKGEsYikgewoJCQlyZXR1cm4gKHBhcnNlSW50KCQoYSkuY3NzKCJ6SW5kZXgiKSwxMCkgfHwgMCkgLSAocGFyc2VJbnQoJChiKS5jc3MoInpJbmRleCIpLDEwKSB8fCAwKTsKCQl9KTsKCQlpZiAoIWdyb3VwLmxlbmd0aCkgeyByZXR1cm47IH0KCgkJdmFyIG1pbiA9IHBhcnNlSW50KGdyb3VwWzBdLnN0eWxlLnpJbmRleCkgfHwgMDsKCQkkKGdyb3VwKS5lYWNoKGZ1bmN0aW9uKGkpIHsKCQkJdGhpcy5zdHlsZS56SW5kZXggPSBtaW4gKyBpOwoJCX0pOwoKCQl0aGlzWzBdLnN0eWxlLnpJbmRleCA9IG1pbiArIGdyb3VwLmxlbmd0aDsKCgl9Cn0pOwoKJC51aS5wbHVnaW4uYWRkKCJkcmFnZ2FibGUiLCAiekluZGV4IiwgewoJc3RhcnQ6IGZ1bmN0aW9uKGV2ZW50LCB1aSkgewoJCXZhciB0ID0gJCh1aS5oZWxwZXIpLCBvID0gJCh0aGlzKS5kYXRhKCJkcmFnZ2FibGUiKS5vcHRpb25zOwoJCWlmKHQuY3NzKCJ6SW5kZXgiKSkgby5fekluZGV4ID0gdC5jc3MoInpJbmRleCIpOwoJCXQuY3NzKCd6SW5kZXgnLCBvLnpJbmRleCk7Cgl9LAoJc3RvcDogZnVuY3Rpb24oZXZlbnQsIHVpKSB7CgkJdmFyIG8gPSAkKHRoaXMpLmRhdGEoImRyYWdnYWJsZSIpLm9wdGlvbnM7CgkJaWYoby5fekluZGV4KSAkKHVpLmhlbHBlcikuY3NzKCd6SW5kZXgnLCBvLl96SW5kZXgpOwoJfQp9KTsKCn0pKGpRdWVyeSk7CihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkgewoKJC53aWRnZXQoInVpLmRyb3BwYWJsZSIsIHsKCXZlcnNpb246ICIxLjkuMiIsCgl3aWRnZXRFdmVudFByZWZpeDogImRyb3AiLAoJb3B0aW9uczogewoJCWFjY2VwdDogJyonLAoJCWFjdGl2ZUNsYXNzOiBmYWxzZSwKCQlhZGRDbGFzc2VzOiB0cnVlLAoJCWdyZWVkeTogZmFsc2UsCgkJaG92ZXJDbGFzczogZmFsc2UsCgkJc2NvcGU6ICdkZWZhdWx0JywKCQl0b2xlcmFuY2U6ICdpbnRlcnNlY3QnCgl9LAoJX2NyZWF0ZTogZnVuY3Rpb24oKSB7CgoJCXZhciBvID0gdGhpcy5vcHRpb25zLCBhY2NlcHQgPSBvLmFjY2VwdDsKCQl0aGlzLmlzb3ZlciA9IDA7IHRoaXMuaXNvdXQgPSAxOwoKCQl0aGlzLmFjY2VwdCA9ICQuaXNGdW5jdGlvbihhY2NlcHQpID8gYWNjZXB0IDogZnVuY3Rpb24oZCkgewoJCQlyZXR1cm4gZC5pcyhhY2NlcHQpOwoJCX07CgoJCS8vU3RvcmUgdGhlIGRyb3BwYWJsZSdzIHByb3BvcnRpb25zCgkJdGhpcy5wcm9wb3J0aW9ucyA9IHsgd2lkdGg6IHRoaXMuZWxlbWVudFswXS5vZmZzZXRXaWR0aCwgaGVpZ2h0OiB0aGlzLmVsZW1lbnRbMF0ub2Zmc2V0SGVpZ2h0IH07CgoJCS8vIEFkZCB0aGUgcmVmZXJlbmNlIGFuZCBwb3NpdGlvbnMgdG8gdGhlIG1hbmFnZXIKCQkkLnVpLmRkbWFuYWdlci5kcm9wcGFibGVzW28uc2NvcGVdID0gJC51aS5kZG1hbmFnZXIuZHJvcHBhYmxlc1tvLnNjb3BlXSB8fCBbXTsKCQkkLnVpLmRkbWFuYWdlci5kcm9wcGFibGVzW28uc2NvcGVdLnB1c2godGhpcyk7CgoJCShvLmFkZENsYXNzZXMgJiYgdGhpcy5lbGVtZW50LmFkZENsYXNzKCJ1aS1kcm9wcGFibGUiKSk7CgoJfSwKCglfZGVzdHJveTogZnVuY3Rpb24oKSB7CgkJdmFyIGRyb3AgPSAkLnVpLmRkbWFuYWdlci5kcm9wcGFibGVzW3RoaXMub3B0aW9ucy5zY29wZV07CgkJZm9yICggdmFyIGkgPSAwOyBpIDwgZHJvcC5sZW5ndGg7IGkrKyApCgkJCWlmICggZHJvcFtpXSA9PSB0aGlzICkKCQkJCWRyb3Auc3BsaWNlKGksIDEpOwoKCQl0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoInVpLWRyb3BwYWJsZSB1aS1kcm9wcGFibGUtZGlzYWJsZWQiKTsKCX0sCgoJX3NldE9wdGlvbjogZnVuY3Rpb24oa2V5LCB2YWx1ZSkgewoKCQlpZihrZXkgPT0gJ2FjY2VwdCcpIHsKCQkJdGhpcy5hY2NlcHQgPSAkLmlzRnVuY3Rpb24odmFsdWUpID8gdmFsdWUgOiBmdW5jdGlvbihkKSB7CgkJCQlyZXR1cm4gZC5pcyh2YWx1ZSk7CgkJCX07CgkJfQoJCSQuV2lkZ2V0LnByb3RvdHlwZS5fc2V0T3B0aW9uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cgl9LAoKCV9hY3RpdmF0ZTogZnVuY3Rpb24oZXZlbnQpIHsKCQl2YXIgZHJhZ2dhYmxlID0gJC51aS5kZG1hbmFnZXIuY3VycmVudDsKCQlpZih0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MpIHRoaXMuZWxlbWVudC5hZGRDbGFzcyh0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MpOwoJCShkcmFnZ2FibGUgJiYgdGhpcy5fdHJpZ2dlcignYWN0aXZhdGUnLCBldmVudCwgdGhpcy51aShkcmFnZ2FibGUpKSk7Cgl9LAoKCV9kZWFjdGl2YXRlOiBmdW5jdGlvbihldmVudCkgewoJCXZhciBkcmFnZ2FibGUgPSAkLnVpLmRkbWFuYWdlci5jdXJyZW50OwoJCWlmKHRoaXMub3B0aW9ucy5hY3RpdmVDbGFzcykgdGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKHRoaXMub3B0aW9ucy5hY3RpdmVDbGFzcyk7CgkJKGRyYWdnYWJsZSAmJiB0aGlzLl90cmlnZ2VyKCdkZWFjdGl2YXRlJywgZXZlbnQsIHRoaXMudWkoZHJhZ2dhYmxlKSkpOwoJfSwKCglfb3ZlcjogZnVuY3Rpb24oZXZlbnQpIHsKCgkJdmFyIGRyYWdnYWJsZSA9ICQudWkuZGRtYW5hZ2VyLmN1cnJlbnQ7CgkJaWYgKCFkcmFnZ2FibGUgfHwgKGRyYWdnYWJsZS5jdXJyZW50SXRlbSB8fCBkcmFnZ2FibGUuZWxlbWVudClbMF0gPT0gdGhpcy5lbGVtZW50WzBdKSByZXR1cm47IC8vIEJhaWwgaWYgZHJhZ2dhYmxlIGFuZCBkcm9wcGFibGUgYXJlIHNhbWUgZWxlbWVudAoKCQlpZiAodGhpcy5hY2NlcHQuY2FsbCh0aGlzLmVsZW1lbnRbMF0sKGRyYWdnYWJsZS5jdXJyZW50SXRlbSB8fCBkcmFnZ2FibGUuZWxlbWVudCkpKSB7CgkJCWlmKHRoaXMub3B0aW9ucy5ob3ZlckNsYXNzKSB0aGlzLmVsZW1lbnQuYWRkQ2xhc3ModGhpcy5vcHRpb25zLmhvdmVyQ2xhc3MpOwoJCQl0aGlzLl90cmlnZ2VyKCdvdmVyJywgZXZlbnQsIHRoaXMudWkoZHJhZ2dhYmxlKSk7CgkJfQoKCX0sCgoJX291dDogZnVuY3Rpb24oZXZlbnQpIHsKCgkJdmFyIGRyYWdnYWJsZSA9ICQudWkuZGRtYW5hZ2VyLmN1cnJlbnQ7CgkJaWYgKCFkcmFnZ2FibGUgfHwgKGRyYWdnYWJsZS5jdXJyZW50SXRlbSB8fCBkcmFnZ2FibGUuZWxlbWVudClbMF0gPT0gdGhpcy5lbGVtZW50WzBdKSByZXR1cm47IC8vIEJhaWwgaWYgZHJhZ2dhYmxlIGFuZCBkcm9wcGFibGUgYXJlIHNhbWUgZWxlbWVudAoKCQlpZiAodGhpcy5hY2NlcHQuY2FsbCh0aGlzLmVsZW1lbnRbMF0sKGRyYWdnYWJsZS5jdXJyZW50SXRlbSB8fCBkcmFnZ2FibGUuZWxlbWVudCkpKSB7CgkJCWlmKHRoaXMub3B0aW9ucy5ob3ZlckNsYXNzKSB0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmhvdmVyQ2xhc3MpOwoJCQl0aGlzLl90cmlnZ2VyKCdvdXQnLCBldmVudCwgdGhpcy51aShkcmFnZ2FibGUpKTsKCQl9CgoJfSwKCglfZHJvcDogZnVuY3Rpb24oZXZlbnQsY3VzdG9tKSB7CgoJCXZhciBkcmFnZ2FibGUgPSBjdXN0b20gfHwgJC51aS5kZG1hbmFnZXIuY3VycmVudDsKCQlpZiAoIWRyYWdnYWJsZSB8fCAoZHJhZ2dhYmxlLmN1cnJlbnRJdGVtIHx8IGRyYWdnYWJsZS5lbGVtZW50KVswXSA9PSB0aGlzLmVsZW1lbnRbMF0pIHJldHVybiBmYWxzZTsgLy8gQmFpbCBpZiBkcmFnZ2FibGUgYW5kIGRyb3BwYWJsZSBhcmUgc2FtZSBlbGVtZW50CgoJCXZhciBjaGlsZHJlbkludGVyc2VjdGlvbiA9IGZhbHNlOwoJCXRoaXMuZWxlbWVudC5maW5kKCI6ZGF0YShkcm9wcGFibGUpIikubm90KCIudWktZHJhZ2dhYmxlLWRyYWdnaW5nIikuZWFjaChmdW5jdGlvbigpIHsKCQkJdmFyIGluc3QgPSAkLmRhdGEodGhpcywgJ2Ryb3BwYWJsZScpOwoJCQlpZigKCQkJCWluc3Qub3B0aW9ucy5ncmVlZHkKCQkJCSYmICFpbnN0Lm9wdGlvbnMuZGlzYWJsZWQKCQkJCSYmIGluc3Qub3B0aW9ucy5zY29wZSA9PSBkcmFnZ2FibGUub3B0aW9ucy5zY29wZQoJCQkJJiYgaW5zdC5hY2NlcHQuY2FsbChpbnN0LmVsZW1lbnRbMF0sIChkcmFnZ2FibGUuY3VycmVudEl0ZW0gfHwgZHJhZ2dhYmxlLmVsZW1lbnQpKQoJCQkJJiYgJC51aS5pbnRlcnNlY3QoZHJhZ2dhYmxlLCAkLmV4dGVuZChpbnN0LCB7IG9mZnNldDogaW5zdC5lbGVtZW50Lm9mZnNldCgpIH0pLCBpbnN0Lm9wdGlvbnMudG9sZXJhbmNlKQoJCQkpIHsgY2hpbGRyZW5JbnRlcnNlY3Rpb24gPSB0cnVlOyByZXR1cm4gZmFsc2U7IH0KCQl9KTsKCQlpZihjaGlsZHJlbkludGVyc2VjdGlvbikgcmV0dXJuIGZhbHNlOwoKCQlpZih0aGlzLmFjY2VwdC5jYWxsKHRoaXMuZWxlbWVudFswXSwoZHJhZ2dhYmxlLmN1cnJlbnRJdGVtIHx8IGRyYWdnYWJsZS5lbGVtZW50KSkpIHsKCQkJaWYodGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzKSB0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzKTsKCQkJaWYodGhpcy5vcHRpb25zLmhvdmVyQ2xhc3MpIHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMuaG92ZXJDbGFzcyk7CgkJCXRoaXMuX3RyaWdnZXIoJ2Ryb3AnLCBldmVudCwgdGhpcy51aShkcmFnZ2FibGUpKTsKCQkJcmV0dXJuIHRoaXMuZWxlbWVudDsKCQl9CgoJCXJldHVybiBmYWxzZTsKCgl9LAoKCXVpOiBmdW5jdGlvbihjKSB7CgkJcmV0dXJuIHsKCQkJZHJhZ2dhYmxlOiAoYy5jdXJyZW50SXRlbSB8fCBjLmVsZW1lbnQpLAoJCQloZWxwZXI6IGMuaGVscGVyLAoJCQlwb3NpdGlvbjogYy5wb3NpdGlvbiwKCQkJb2Zmc2V0OiBjLnBvc2l0aW9uQWJzCgkJfTsKCX0KCn0pOwoKJC51aS5pbnRlcnNlY3QgPSBmdW5jdGlvbihkcmFnZ2FibGUsIGRyb3BwYWJsZSwgdG9sZXJhbmNlTW9kZSkgewoKCWlmICghZHJvcHBhYmxlLm9mZnNldCkgcmV0dXJuIGZhbHNlOwoKCXZhciB4MSA9IChkcmFnZ2FibGUucG9zaXRpb25BYnMgfHwgZHJhZ2dhYmxlLnBvc2l0aW9uLmFic29sdXRlKS5sZWZ0LCB4MiA9IHgxICsgZHJhZ2dhYmxlLmhlbHBlclByb3BvcnRpb25zLndpZHRoLAoJCXkxID0gKGRyYWdnYWJsZS5wb3NpdGlvbkFicyB8fCBkcmFnZ2FibGUucG9zaXRpb24uYWJzb2x1dGUpLnRvcCwgeTIgPSB5MSArIGRyYWdnYWJsZS5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQ7Cgl2YXIgbCA9IGRyb3BwYWJsZS5vZmZzZXQubGVmdCwgciA9IGwgKyBkcm9wcGFibGUucHJvcG9ydGlvbnMud2lkdGgsCgkJdCA9IGRyb3BwYWJsZS5vZmZzZXQudG9wLCBiID0gdCArIGRyb3BwYWJsZS5wcm9wb3J0aW9ucy5oZWlnaHQ7CgoJc3dpdGNoICh0b2xlcmFuY2VNb2RlKSB7CgkJY2FzZSAnZml0JzoKCQkJcmV0dXJuIChsIDw9IHgxICYmIHgyIDw9IHIKCQkJCSYmIHQgPD0geTEgJiYgeTIgPD0gYik7CgkJCWJyZWFrOwoJCWNhc2UgJ2ludGVyc2VjdCc6CgkJCXJldHVybiAobCA8IHgxICsgKGRyYWdnYWJsZS5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aCAvIDIpIC8vIFJpZ2h0IEhhbGYKCQkJCSYmIHgyIC0gKGRyYWdnYWJsZS5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aCAvIDIpIDwgciAvLyBMZWZ0IEhhbGYKCQkJCSYmIHQgPCB5MSArIChkcmFnZ2FibGUuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0IC8gMikgLy8gQm90dG9tIEhhbGYKCQkJCSYmIHkyIC0gKGRyYWdnYWJsZS5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQgLyAyKSA8IGIgKTsgLy8gVG9wIEhhbGYKCQkJYnJlYWs7CgkJY2FzZSAncG9pbnRlcic6CgkJCXZhciBkcmFnZ2FibGVMZWZ0ID0gKChkcmFnZ2FibGUucG9zaXRpb25BYnMgfHwgZHJhZ2dhYmxlLnBvc2l0aW9uLmFic29sdXRlKS5sZWZ0ICsgKGRyYWdnYWJsZS5jbGlja09mZnNldCB8fCBkcmFnZ2FibGUub2Zmc2V0LmNsaWNrKS5sZWZ0KSwKCQkJCWRyYWdnYWJsZVRvcCA9ICgoZHJhZ2dhYmxlLnBvc2l0aW9uQWJzIHx8IGRyYWdnYWJsZS5wb3NpdGlvbi5hYnNvbHV0ZSkudG9wICsgKGRyYWdnYWJsZS5jbGlja09mZnNldCB8fCBkcmFnZ2FibGUub2Zmc2V0LmNsaWNrKS50b3ApLAoJCQkJaXNPdmVyID0gJC51aS5pc092ZXIoZHJhZ2dhYmxlVG9wLCBkcmFnZ2FibGVMZWZ0LCB0LCBsLCBkcm9wcGFibGUucHJvcG9ydGlvbnMuaGVpZ2h0LCBkcm9wcGFibGUucHJvcG9ydGlvbnMud2lkdGgpOwoJCQlyZXR1cm4gaXNPdmVyOwoJCQlicmVhazsKCQljYXNlICd0b3VjaCc6CgkJCXJldHVybiAoCgkJCQkJKHkxID49IHQgJiYgeTEgPD0gYikgfHwJLy8gVG9wIGVkZ2UgdG91Y2hpbmcKCQkJCQkoeTIgPj0gdCAmJiB5MiA8PSBiKSB8fAkvLyBCb3R0b20gZWRnZSB0b3VjaGluZwoJCQkJCSh5MSA8IHQgJiYgeTIgPiBiKQkJLy8gU3Vycm91bmRlZCB2ZXJ0aWNhbGx5CgkJCQkpICYmICgKCQkJCQkoeDEgPj0gbCAmJiB4MSA8PSByKSB8fAkvLyBMZWZ0IGVkZ2UgdG91Y2hpbmcKCQkJCQkoeDIgPj0gbCAmJiB4MiA8PSByKSB8fAkvLyBSaWdodCBlZGdlIHRvdWNoaW5nCgkJCQkJKHgxIDwgbCAmJiB4MiA+IHIpCQkvLyBTdXJyb3VuZGVkIGhvcml6b250YWxseQoJCQkJKTsKCQkJYnJlYWs7CgkJZGVmYXVsdDoKCQkJcmV0dXJuIGZhbHNlOwoJCQlicmVhazsKCQl9Cgp9OwoKLyoKCVRoaXMgbWFuYWdlciB0cmFja3Mgb2Zmc2V0cyBvZiBkcmFnZ2FibGVzIGFuZCBkcm9wcGFibGVzCiovCiQudWkuZGRtYW5hZ2VyID0gewoJY3VycmVudDogbnVsbCwKCWRyb3BwYWJsZXM6IHsgJ2RlZmF1bHQnOiBbXSB9LAoJcHJlcGFyZU9mZnNldHM6IGZ1bmN0aW9uKHQsIGV2ZW50KSB7CgoJCXZhciBtID0gJC51aS5kZG1hbmFnZXIuZHJvcHBhYmxlc1t0Lm9wdGlvbnMuc2NvcGVdIHx8IFtdOwoJCXZhciB0eXBlID0gZXZlbnQgPyBldmVudC50eXBlIDogbnVsbDsgLy8gd29ya2Fyb3VuZCBmb3IgIzIzMTcKCQl2YXIgbGlzdCA9ICh0LmN1cnJlbnRJdGVtIHx8IHQuZWxlbWVudCkuZmluZCgiOmRhdGEoZHJvcHBhYmxlKSIpLmFuZFNlbGYoKTsKCgkJZHJvcHBhYmxlc0xvb3A6IGZvciAodmFyIGkgPSAwOyBpIDwgbS5sZW5ndGg7IGkrKykgewoKCQkJaWYobVtpXS5vcHRpb25zLmRpc2FibGVkIHx8ICh0ICYmICFtW2ldLmFjY2VwdC5jYWxsKG1baV0uZWxlbWVudFswXSwodC5jdXJyZW50SXRlbSB8fCB0LmVsZW1lbnQpKSkpIGNvbnRpbnVlOwkvL05vIGRpc2FibGVkIGFuZCBub24tYWNjZXB0ZWQKCQkJZm9yICh2YXIgaj0wOyBqIDwgbGlzdC5sZW5ndGg7IGorKykgeyBpZihsaXN0W2pdID09IG1baV0uZWxlbWVudFswXSkgeyBtW2ldLnByb3BvcnRpb25zLmhlaWdodCA9IDA7IGNvbnRpbnVlIGRyb3BwYWJsZXNMb29wOyB9IH07IC8vRmlsdGVyIG91dCBlbGVtZW50cyBpbiB0aGUgY3VycmVudCBkcmFnZ2VkIGl0ZW0KCQkJbVtpXS52aXNpYmxlID0gbVtpXS5lbGVtZW50LmNzcygiZGlzcGxheSIpICE9ICJub25lIjsgaWYoIW1baV0udmlzaWJsZSkgY29udGludWU7IAkJCQkJCQkJCS8vSWYgdGhlIGVsZW1lbnQgaXMgbm90IHZpc2libGUsIGNvbnRpbnVlCgoJCQlpZih0eXBlID09ICJtb3VzZWRvd24iKSBtW2ldLl9hY3RpdmF0ZS5jYWxsKG1baV0sIGV2ZW50KTsgLy9BY3RpdmF0ZSB0aGUgZHJvcHBhYmxlIGlmIHVzZWQgZGlyZWN0bHkgZnJvbSBkcmFnZ2FibGVzCgoJCQltW2ldLm9mZnNldCA9IG1baV0uZWxlbWVudC5vZmZzZXQoKTsKCQkJbVtpXS5wcm9wb3J0aW9ucyA9IHsgd2lkdGg6IG1baV0uZWxlbWVudFswXS5vZmZzZXRXaWR0aCwgaGVpZ2h0OiBtW2ldLmVsZW1lbnRbMF0ub2Zmc2V0SGVpZ2h0IH07CgoJCX0KCgl9LAoJZHJvcDogZnVuY3Rpb24oZHJhZ2dhYmxlLCBldmVudCkgewoKCQl2YXIgZHJvcHBlZCA9IGZhbHNlOwoJCSQuZWFjaCgkLnVpLmRkbWFuYWdlci5kcm9wcGFibGVzW2RyYWdnYWJsZS5vcHRpb25zLnNjb3BlXSB8fCBbXSwgZnVuY3Rpb24oKSB7CgoJCQlpZighdGhpcy5vcHRpb25zKSByZXR1cm47CgkJCWlmICghdGhpcy5vcHRpb25zLmRpc2FibGVkICYmIHRoaXMudmlzaWJsZSAmJiAkLnVpLmludGVyc2VjdChkcmFnZ2FibGUsIHRoaXMsIHRoaXMub3B0aW9ucy50b2xlcmFuY2UpKQoJCQkJZHJvcHBlZCA9IHRoaXMuX2Ryb3AuY2FsbCh0aGlzLCBldmVudCkgfHwgZHJvcHBlZDsKCgkJCWlmICghdGhpcy5vcHRpb25zLmRpc2FibGVkICYmIHRoaXMudmlzaWJsZSAmJiB0aGlzLmFjY2VwdC5jYWxsKHRoaXMuZWxlbWVudFswXSwoZHJhZ2dhYmxlLmN1cnJlbnRJdGVtIHx8IGRyYWdnYWJsZS5lbGVtZW50KSkpIHsKCQkJCXRoaXMuaXNvdXQgPSAxOyB0aGlzLmlzb3ZlciA9IDA7CgkJCQl0aGlzLl9kZWFjdGl2YXRlLmNhbGwodGhpcywgZXZlbnQpOwoJCQl9CgoJCX0pOwoJCXJldHVybiBkcm9wcGVkOwoKCX0sCglkcmFnU3RhcnQ6IGZ1bmN0aW9uKCBkcmFnZ2FibGUsIGV2ZW50ICkgewoJCS8vTGlzdGVuIGZvciBzY3JvbGxpbmcgc28gdGhhdCBpZiB0aGUgZHJhZ2dpbmcgY2F1c2VzIHNjcm9sbGluZyB0aGUgcG9zaXRpb24gb2YgdGhlIGRyb3BwYWJsZXMgY2FuIGJlIHJlY2FsY3VsYXRlZCAoc2VlICM1MDAzKQoJCWRyYWdnYWJsZS5lbGVtZW50LnBhcmVudHNVbnRpbCggImJvZHkiICkuYmluZCggInNjcm9sbC5kcm9wcGFibGUiLCBmdW5jdGlvbigpIHsKCQkJaWYoICFkcmFnZ2FibGUub3B0aW9ucy5yZWZyZXNoUG9zaXRpb25zICkgJC51aS5kZG1hbmFnZXIucHJlcGFyZU9mZnNldHMoIGRyYWdnYWJsZSwgZXZlbnQgKTsKCQl9KTsKCX0sCglkcmFnOiBmdW5jdGlvbihkcmFnZ2FibGUsIGV2ZW50KSB7CgoJCS8vSWYgeW91IGhhdmUgYSBoaWdobHkgZHluYW1pYyBwYWdlLCB5b3UgbWlnaHQgdHJ5IHRoaXMgb3B0aW9uLiBJdCByZW5kZXJzIHBvc2l0aW9ucyBldmVyeSB0aW1lIHlvdSBtb3ZlIHRoZSBtb3VzZS4KCQlpZihkcmFnZ2FibGUub3B0aW9ucy5yZWZyZXNoUG9zaXRpb25zKSAkLnVpLmRkbWFuYWdlci5wcmVwYXJlT2Zmc2V0cyhkcmFnZ2FibGUsIGV2ZW50KTsKCgkJLy9SdW4gdGhyb3VnaCBhbGwgZHJvcHBhYmxlcyBhbmQgY2hlY2sgdGhlaXIgcG9zaXRpb25zIGJhc2VkIG9uIHNwZWNpZmljIHRvbGVyYW5jZSBvcHRpb25zCgkJJC5lYWNoKCQudWkuZGRtYW5hZ2VyLmRyb3BwYWJsZXNbZHJhZ2dhYmxlLm9wdGlvbnMuc2NvcGVdIHx8IFtdLCBmdW5jdGlvbigpIHsKCgkJCWlmKHRoaXMub3B0aW9ucy5kaXNhYmxlZCB8fCB0aGlzLmdyZWVkeUNoaWxkIHx8ICF0aGlzLnZpc2libGUpIHJldHVybjsKCQkJdmFyIGludGVyc2VjdHMgPSAkLnVpLmludGVyc2VjdChkcmFnZ2FibGUsIHRoaXMsIHRoaXMub3B0aW9ucy50b2xlcmFuY2UpOwoKCQkJdmFyIGMgPSAhaW50ZXJzZWN0cyAmJiB0aGlzLmlzb3ZlciA9PSAxID8gJ2lzb3V0JyA6IChpbnRlcnNlY3RzICYmIHRoaXMuaXNvdmVyID09IDAgPyAnaXNvdmVyJyA6IG51bGwpOwoJCQlpZighYykgcmV0dXJuOwoKCQkJdmFyIHBhcmVudEluc3RhbmNlOwoJCQlpZiAodGhpcy5vcHRpb25zLmdyZWVkeSkgewoJCQkJLy8gZmluZCBkcm9wcGFibGUgcGFyZW50cyB3aXRoIHNhbWUgc2NvcGUKCQkJCXZhciBzY29wZSA9IHRoaXMub3B0aW9ucy5zY29wZTsKCQkJCXZhciBwYXJlbnQgPSB0aGlzLmVsZW1lbnQucGFyZW50cygnOmRhdGEoZHJvcHBhYmxlKScpLmZpbHRlcihmdW5jdGlvbiAoKSB7CgkJCQkJcmV0dXJuICQuZGF0YSh0aGlzLCAnZHJvcHBhYmxlJykub3B0aW9ucy5zY29wZSA9PT0gc2NvcGU7CgkJCQl9KTsKCgkJCQlpZiAocGFyZW50Lmxlbmd0aCkgewoJCQkJCXBhcmVudEluc3RhbmNlID0gJC5kYXRhKHBhcmVudFswXSwgJ2Ryb3BwYWJsZScpOwoJCQkJCXBhcmVudEluc3RhbmNlLmdyZWVkeUNoaWxkID0gKGMgPT0gJ2lzb3ZlcicgPyAxIDogMCk7CgkJCQl9CgkJCX0KCgkJCS8vIHdlIGp1c3QgbW92ZWQgaW50byBhIGdyZWVkeSBjaGlsZAoJCQlpZiAocGFyZW50SW5zdGFuY2UgJiYgYyA9PSAnaXNvdmVyJykgewoJCQkJcGFyZW50SW5zdGFuY2VbJ2lzb3ZlciddID0gMDsKCQkJCXBhcmVudEluc3RhbmNlWydpc291dCddID0gMTsKCQkJCXBhcmVudEluc3RhbmNlLl9vdXQuY2FsbChwYXJlbnRJbnN0YW5jZSwgZXZlbnQpOwoJCQl9CgoJCQl0aGlzW2NdID0gMTsgdGhpc1tjID09ICdpc291dCcgPyAnaXNvdmVyJyA6ICdpc291dCddID0gMDsKCQkJdGhpc1tjID09ICJpc292ZXIiID8gIl9vdmVyIiA6ICJfb3V0Il0uY2FsbCh0aGlzLCBldmVudCk7CgoJCQkvLyB3ZSBqdXN0IG1vdmVkIG91dCBvZiBhIGdyZWVkeSBjaGlsZAoJCQlpZiAocGFyZW50SW5zdGFuY2UgJiYgYyA9PSAnaXNvdXQnKSB7CgkJCQlwYXJlbnRJbnN0YW5jZVsnaXNvdXQnXSA9IDA7CgkJCQlwYXJlbnRJbnN0YW5jZVsnaXNvdmVyJ10gPSAxOwoJCQkJcGFyZW50SW5zdGFuY2UuX292ZXIuY2FsbChwYXJlbnRJbnN0YW5jZSwgZXZlbnQpOwoJCQl9CgkJfSk7CgoJfSwKCWRyYWdTdG9wOiBmdW5jdGlvbiggZHJhZ2dhYmxlLCBldmVudCApIHsKCQlkcmFnZ2FibGUuZWxlbWVudC5wYXJlbnRzVW50aWwoICJib2R5IiApLnVuYmluZCggInNjcm9sbC5kcm9wcGFibGUiICk7CgkJLy9DYWxsIHByZXBhcmVPZmZzZXRzIG9uZSBmaW5hbCB0aW1lIHNpbmNlIElFIGRvZXMgbm90IGZpcmUgcmV0dXJuIHNjcm9sbCBldmVudHMgd2hlbiBvdmVyZmxvdyB3YXMgY2F1c2VkIGJ5IGRyYWcgKHNlZSAjNTAwMykKCQlpZiggIWRyYWdnYWJsZS5vcHRpb25zLnJlZnJlc2hQb3NpdGlvbnMgKSAkLnVpLmRkbWFuYWdlci5wcmVwYXJlT2Zmc2V0cyggZHJhZ2dhYmxlLCBldmVudCApOwoJfQp9OwoKfSkoalF1ZXJ5KTsKKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7CgokLndpZGdldCgidWkucmVzaXphYmxlIiwgJC51aS5tb3VzZSwgewoJdmVyc2lvbjogIjEuOS4yIiwKCXdpZGdldEV2ZW50UHJlZml4OiAicmVzaXplIiwKCW9wdGlvbnM6IHsKCQlhbHNvUmVzaXplOiBmYWxzZSwKCQlhbmltYXRlOiBmYWxzZSwKCQlhbmltYXRlRHVyYXRpb246ICJzbG93IiwKCQlhbmltYXRlRWFzaW5nOiAic3dpbmciLAoJCWFzcGVjdFJhdGlvOiBmYWxzZSwKCQlhdXRvSGlkZTogZmFsc2UsCgkJY29udGFpbm1lbnQ6IGZhbHNlLAoJCWdob3N0OiBmYWxzZSwKCQlncmlkOiBmYWxzZSwKCQloYW5kbGVzOiAiZSxzLHNlIiwKCQloZWxwZXI6IGZhbHNlLAoJCW1heEhlaWdodDogbnVsbCwKCQltYXhXaWR0aDogbnVsbCwKCQltaW5IZWlnaHQ6IDEwLAoJCW1pbldpZHRoOiAxMCwKCQl6SW5kZXg6IDEwMDAKCX0sCglfY3JlYXRlOiBmdW5jdGlvbigpIHsKCgkJdmFyIHRoYXQgPSB0aGlzLCBvID0gdGhpcy5vcHRpb25zOwoJCXRoaXMuZWxlbWVudC5hZGRDbGFzcygidWktcmVzaXphYmxlIik7CgoJCSQuZXh0ZW5kKHRoaXMsIHsKCQkJX2FzcGVjdFJhdGlvOiAhIShvLmFzcGVjdFJhdGlvKSwKCQkJYXNwZWN0UmF0aW86IG8uYXNwZWN0UmF0aW8sCgkJCW9yaWdpbmFsRWxlbWVudDogdGhpcy5lbGVtZW50LAoJCQlfcHJvcG9ydGlvbmFsbHlSZXNpemVFbGVtZW50czogW10sCgkJCV9oZWxwZXI6IG8uaGVscGVyIHx8IG8uZ2hvc3QgfHwgby5hbmltYXRlID8gby5oZWxwZXIgfHwgJ3VpLXJlc2l6YWJsZS1oZWxwZXInIDogbnVsbAoJCX0pOwoKCQkvL1dyYXAgdGhlIGVsZW1lbnQgaWYgaXQgY2Fubm90IGhvbGQgY2hpbGQgbm9kZXMKCQlpZih0aGlzLmVsZW1lbnRbMF0ubm9kZU5hbWUubWF0Y2goL2NhbnZhc3x0ZXh0YXJlYXxpbnB1dHxzZWxlY3R8YnV0dG9ufGltZy9pKSkgewoKCQkJLy9DcmVhdGUgYSB3cmFwcGVyIGVsZW1lbnQgYW5kIHNldCB0aGUgd3JhcHBlciB0byB0aGUgbmV3IGN1cnJlbnQgaW50ZXJuYWwgZWxlbWVudAoJCQl0aGlzLmVsZW1lbnQud3JhcCgKCQkJCSQoJzxkaXYgY2xhc3M9InVpLXdyYXBwZXIiIHN0eWxlPSJvdmVyZmxvdzogaGlkZGVuOyI+PC9kaXY+JykuY3NzKHsKCQkJCQlwb3NpdGlvbjogdGhpcy5lbGVtZW50LmNzcygncG9zaXRpb24nKSwKCQkJCQl3aWR0aDogdGhpcy5lbGVtZW50Lm91dGVyV2lkdGgoKSwKCQkJCQloZWlnaHQ6IHRoaXMuZWxlbWVudC5vdXRlckhlaWdodCgpLAoJCQkJCXRvcDogdGhpcy5lbGVtZW50LmNzcygndG9wJyksCgkJCQkJbGVmdDogdGhpcy5lbGVtZW50LmNzcygnbGVmdCcpCgkJCQl9KQoJCQkpOwoKCQkJLy9PdmVyd3JpdGUgdGhlIG9yaWdpbmFsIHRoaXMuZWxlbWVudAoJCQl0aGlzLmVsZW1lbnQgPSB0aGlzLmVsZW1lbnQucGFyZW50KCkuZGF0YSgKCQkJCSJyZXNpemFibGUiLCB0aGlzLmVsZW1lbnQuZGF0YSgncmVzaXphYmxlJykKCQkJKTsKCgkJCXRoaXMuZWxlbWVudElzV3JhcHBlciA9IHRydWU7CgoJCQkvL01vdmUgbWFyZ2lucyB0byB0aGUgd3JhcHBlcgoJCQl0aGlzLmVsZW1lbnQuY3NzKHsgbWFyZ2luTGVmdDogdGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKCJtYXJnaW5MZWZ0IiksIG1hcmdpblRvcDogdGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKCJtYXJnaW5Ub3AiKSwgbWFyZ2luUmlnaHQ6IHRoaXMub3JpZ2luYWxFbGVtZW50LmNzcygibWFyZ2luUmlnaHQiKSwgbWFyZ2luQm90dG9tOiB0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3MoIm1hcmdpbkJvdHRvbSIpIH0pOwoJCQl0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3MoeyBtYXJnaW5MZWZ0OiAwLCBtYXJnaW5Ub3A6IDAsIG1hcmdpblJpZ2h0OiAwLCBtYXJnaW5Cb3R0b206IDB9KTsKCgkJCS8vUHJldmVudCBTYWZhcmkgdGV4dGFyZWEgcmVzaXplCgkJCXRoaXMub3JpZ2luYWxSZXNpemVTdHlsZSA9IHRoaXMub3JpZ2luYWxFbGVtZW50LmNzcygncmVzaXplJyk7CgkJCXRoaXMub3JpZ2luYWxFbGVtZW50LmNzcygncmVzaXplJywgJ25vbmUnKTsKCgkJCS8vUHVzaCB0aGUgYWN0dWFsIGVsZW1lbnQgdG8gb3VyIHByb3BvcnRpb25hbGx5UmVzaXplIGludGVybmFsIGFycmF5CgkJCXRoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplRWxlbWVudHMucHVzaCh0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3MoeyBwb3NpdGlvbjogJ3N0YXRpYycsIHpvb206IDEsIGRpc3BsYXk6ICdibG9jaycgfSkpOwoKCQkJLy8gYXZvaWQgSUUganVtcCAoaGFyZCBzZXQgdGhlIG1hcmdpbikKCQkJdGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKHsgbWFyZ2luOiB0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3MoJ21hcmdpbicpIH0pOwoKCQkJLy8gZml4IGhhbmRsZXJzIG9mZnNldAoJCQl0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZSgpOwoKCQl9CgoJCXRoaXMuaGFuZGxlcyA9IG8uaGFuZGxlcyB8fCAoISQoJy51aS1yZXNpemFibGUtaGFuZGxlJywgdGhpcy5lbGVtZW50KS5sZW5ndGggPyAiZSxzLHNlIiA6IHsgbjogJy51aS1yZXNpemFibGUtbicsIGU6ICcudWktcmVzaXphYmxlLWUnLCBzOiAnLnVpLXJlc2l6YWJsZS1zJywgdzogJy51aS1yZXNpemFibGUtdycsIHNlOiAnLnVpLXJlc2l6YWJsZS1zZScsIHN3OiAnLnVpLXJlc2l6YWJsZS1zdycsIG5lOiAnLnVpLXJlc2l6YWJsZS1uZScsIG53OiAnLnVpLXJlc2l6YWJsZS1udycgfSk7CgkJaWYodGhpcy5oYW5kbGVzLmNvbnN0cnVjdG9yID09IFN0cmluZykgewoKCQkJaWYodGhpcy5oYW5kbGVzID09ICdhbGwnKSB0aGlzLmhhbmRsZXMgPSAnbixlLHMsdyxzZSxzdyxuZSxudyc7CgkJCXZhciBuID0gdGhpcy5oYW5kbGVzLnNwbGl0KCIsIik7IHRoaXMuaGFuZGxlcyA9IHt9OwoKCQkJZm9yKHZhciBpID0gMDsgaSA8IG4ubGVuZ3RoOyBpKyspIHsKCgkJCQl2YXIgaGFuZGxlID0gJC50cmltKG5baV0pLCBobmFtZSA9ICd1aS1yZXNpemFibGUtJytoYW5kbGU7CgkJCQl2YXIgYXhpcyA9ICQoJzxkaXYgY2xhc3M9InVpLXJlc2l6YWJsZS1oYW5kbGUgJyArIGhuYW1lICsgJyI+PC9kaXY+Jyk7CgoJCQkJLy8gQXBwbHkgekluZGV4IHRvIGFsbCBoYW5kbGVzIC0gc2VlICM3OTYwCgkJCQlheGlzLmNzcyh7IHpJbmRleDogby56SW5kZXggfSk7CgoJCQkJLy9UT0RPIDogV2hhdCdzIGdvaW5nIG9uIGhlcmU/CgkJCQlpZiAoJ3NlJyA9PSBoYW5kbGUpIHsKCQkJCQlheGlzLmFkZENsYXNzKCd1aS1pY29uIHVpLWljb24tZ3JpcHNtYWxsLWRpYWdvbmFsLXNlJyk7CgkJCQl9OwoKCQkJCS8vSW5zZXJ0IGludG8gaW50ZXJuYWwgaGFuZGxlcyBvYmplY3QgYW5kIGFwcGVuZCB0byBlbGVtZW50CgkJCQl0aGlzLmhhbmRsZXNbaGFuZGxlXSA9ICcudWktcmVzaXphYmxlLScraGFuZGxlOwoJCQkJdGhpcy5lbGVtZW50LmFwcGVuZChheGlzKTsKCQkJfQoKCQl9CgoJCXRoaXMuX3JlbmRlckF4aXMgPSBmdW5jdGlvbih0YXJnZXQpIHsKCgkJCXRhcmdldCA9IHRhcmdldCB8fCB0aGlzLmVsZW1lbnQ7CgoJCQlmb3IodmFyIGkgaW4gdGhpcy5oYW5kbGVzKSB7CgoJCQkJaWYodGhpcy5oYW5kbGVzW2ldLmNvbnN0cnVjdG9yID09IFN0cmluZykKCQkJCQl0aGlzLmhhbmRsZXNbaV0gPSAkKHRoaXMuaGFuZGxlc1tpXSwgdGhpcy5lbGVtZW50KS5zaG93KCk7CgoJCQkJLy9BcHBseSBwYWQgdG8gd3JhcHBlciBlbGVtZW50LCBuZWVkZWQgdG8gZml4IGF4aXMgcG9zaXRpb24gKHRleHRhcmVhLCBpbnB1dHMsIHNjcm9sbHMpCgkJCQlpZiAodGhpcy5lbGVtZW50SXNXcmFwcGVyICYmIHRoaXMub3JpZ2luYWxFbGVtZW50WzBdLm5vZGVOYW1lLm1hdGNoKC90ZXh0YXJlYXxpbnB1dHxzZWxlY3R8YnV0dG9uL2kpKSB7CgoJCQkJCXZhciBheGlzID0gJCh0aGlzLmhhbmRsZXNbaV0sIHRoaXMuZWxlbWVudCksIHBhZFdyYXBwZXIgPSAwOwoKCQkJCQkvL0NoZWNraW5nIHRoZSBjb3JyZWN0IHBhZCBhbmQgYm9yZGVyCgkJCQkJcGFkV3JhcHBlciA9IC9zd3xuZXxud3xzZXxufHMvLnRlc3QoaSkgPyBheGlzLm91dGVySGVpZ2h0KCkgOiBheGlzLm91dGVyV2lkdGgoKTsKCgkJCQkJLy9UaGUgcGFkZGluZyB0eXBlIGkgaGF2ZSB0byBhcHBseS4uLgoJCQkJCXZhciBwYWRQb3MgPSBbICdwYWRkaW5nJywKCQkJCQkJL25lfG53fG4vLnRlc3QoaSkgPyAnVG9wJyA6CgkJCQkJCS9zZXxzd3xzLy50ZXN0KGkpID8gJ0JvdHRvbScgOgoJCQkJCQkvXmUkLy50ZXN0KGkpID8gJ1JpZ2h0JyA6ICdMZWZ0JyBdLmpvaW4oIiIpOwoKCQkJCQl0YXJnZXQuY3NzKHBhZFBvcywgcGFkV3JhcHBlcik7CgoJCQkJCXRoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplKCk7CgoJCQkJfQoKCQkJCS8vVE9ETzogV2hhdCdzIHRoYXQgZ29vZCBmb3I/IFRoZXJlJ3Mgbm90IGFueXRoaW5nIHRvIGJlIGV4ZWN1dGVkIGxlZnQKCQkJCWlmKCEkKHRoaXMuaGFuZGxlc1tpXSkubGVuZ3RoKQoJCQkJCWNvbnRpbnVlOwoKCQkJfQoJCX07CgoJCS8vVE9ETzogbWFrZSByZW5kZXJBeGlzIGEgcHJvdG90eXBlIGZ1bmN0aW9uCgkJdGhpcy5fcmVuZGVyQXhpcyh0aGlzLmVsZW1lbnQpOwoKCQl0aGlzLl9oYW5kbGVzID0gJCgnLnVpLXJlc2l6YWJsZS1oYW5kbGUnLCB0aGlzLmVsZW1lbnQpCgkJCS5kaXNhYmxlU2VsZWN0aW9uKCk7CgoJCS8vTWF0Y2hpbmcgYXhpcyBuYW1lCgkJdGhpcy5faGFuZGxlcy5tb3VzZW92ZXIoZnVuY3Rpb24oKSB7CgkJCWlmICghdGhhdC5yZXNpemluZykgewoJCQkJaWYgKHRoaXMuY2xhc3NOYW1lKQoJCQkJCXZhciBheGlzID0gdGhpcy5jbGFzc05hbWUubWF0Y2goL3VpLXJlc2l6YWJsZS0oc2V8c3d8bmV8bnd8bnxlfHN8dykvaSk7CgkJCQkvL0F4aXMsIGRlZmF1bHQgPSBzZQoJCQkJdGhhdC5heGlzID0gYXhpcyAmJiBheGlzWzFdID8gYXhpc1sxXSA6ICdzZSc7CgkJCX0KCQl9KTsKCgkJLy9JZiB3ZSB3YW50IHRvIGF1dG8gaGlkZSB0aGUgZWxlbWVudHMKCQlpZiAoby5hdXRvSGlkZSkgewoJCQl0aGlzLl9oYW5kbGVzLmhpZGUoKTsKCQkJJCh0aGlzLmVsZW1lbnQpCgkJCQkuYWRkQ2xhc3MoInVpLXJlc2l6YWJsZS1hdXRvaGlkZSIpCgkJCQkubW91c2VlbnRlcihmdW5jdGlvbigpIHsKCQkJCQlpZiAoby5kaXNhYmxlZCkgcmV0dXJuOwoJCQkJCSQodGhpcykucmVtb3ZlQ2xhc3MoInVpLXJlc2l6YWJsZS1hdXRvaGlkZSIpOwoJCQkJCXRoYXQuX2hhbmRsZXMuc2hvdygpOwoJCQkJfSkKCQkJCS5tb3VzZWxlYXZlKGZ1bmN0aW9uKCl7CgkJCQkJaWYgKG8uZGlzYWJsZWQpIHJldHVybjsKCQkJCQlpZiAoIXRoYXQucmVzaXppbmcpIHsKCQkJCQkJJCh0aGlzKS5hZGRDbGFzcygidWktcmVzaXphYmxlLWF1dG9oaWRlIik7CgkJCQkJCXRoYXQuX2hhbmRsZXMuaGlkZSgpOwoJCQkJCX0KCQkJCX0pOwoJCX0KCgkJLy9Jbml0aWFsaXplIHRoZSBtb3VzZSBpbnRlcmFjdGlvbgoJCXRoaXMuX21vdXNlSW5pdCgpOwoKCX0sCgoJX2Rlc3Ryb3k6IGZ1bmN0aW9uKCkgewoKCQl0aGlzLl9tb3VzZURlc3Ryb3koKTsKCgkJdmFyIF9kZXN0cm95ID0gZnVuY3Rpb24oZXhwKSB7CgkJCSQoZXhwKS5yZW1vdmVDbGFzcygidWktcmVzaXphYmxlIHVpLXJlc2l6YWJsZS1kaXNhYmxlZCB1aS1yZXNpemFibGUtcmVzaXppbmciKQoJCQkJLnJlbW92ZURhdGEoInJlc2l6YWJsZSIpLnJlbW92ZURhdGEoInVpLXJlc2l6YWJsZSIpLnVuYmluZCgiLnJlc2l6YWJsZSIpLmZpbmQoJy51aS1yZXNpemFibGUtaGFuZGxlJykucmVtb3ZlKCk7CgkJfTsKCgkJLy9UT0RPOiBVbndyYXAgYXQgc2FtZSBET00gcG9zaXRpb24KCQlpZiAodGhpcy5lbGVtZW50SXNXcmFwcGVyKSB7CgkJCV9kZXN0cm95KHRoaXMuZWxlbWVudCk7CgkJCXZhciB3cmFwcGVyID0gdGhpcy5lbGVtZW50OwoJCQl0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3MoewoJCQkJcG9zaXRpb246IHdyYXBwZXIuY3NzKCdwb3NpdGlvbicpLAoJCQkJd2lkdGg6IHdyYXBwZXIub3V0ZXJXaWR0aCgpLAoJCQkJaGVpZ2h0OiB3cmFwcGVyLm91dGVySGVpZ2h0KCksCgkJCQl0b3A6IHdyYXBwZXIuY3NzKCd0b3AnKSwKCQkJCWxlZnQ6IHdyYXBwZXIuY3NzKCdsZWZ0JykKCQkJfSkuaW5zZXJ0QWZ0ZXIoIHdyYXBwZXIgKTsKCQkJd3JhcHBlci5yZW1vdmUoKTsKCQl9CgoJCXRoaXMub3JpZ2luYWxFbGVtZW50LmNzcygncmVzaXplJywgdGhpcy5vcmlnaW5hbFJlc2l6ZVN0eWxlKTsKCQlfZGVzdHJveSh0aGlzLm9yaWdpbmFsRWxlbWVudCk7CgoJCXJldHVybiB0aGlzOwoJfSwKCglfbW91c2VDYXB0dXJlOiBmdW5jdGlvbihldmVudCkgewoJCXZhciBoYW5kbGUgPSBmYWxzZTsKCQlmb3IgKHZhciBpIGluIHRoaXMuaGFuZGxlcykgewoJCQlpZiAoJCh0aGlzLmhhbmRsZXNbaV0pWzBdID09IGV2ZW50LnRhcmdldCkgewoJCQkJaGFuZGxlID0gdHJ1ZTsKCQkJfQoJCX0KCgkJcmV0dXJuICF0aGlzLm9wdGlvbnMuZGlzYWJsZWQgJiYgaGFuZGxlOwoJfSwKCglfbW91c2VTdGFydDogZnVuY3Rpb24oZXZlbnQpIHsKCgkJdmFyIG8gPSB0aGlzLm9wdGlvbnMsIGluaVBvcyA9IHRoaXMuZWxlbWVudC5wb3NpdGlvbigpLCBlbCA9IHRoaXMuZWxlbWVudDsKCgkJdGhpcy5yZXNpemluZyA9IHRydWU7CgkJdGhpcy5kb2N1bWVudFNjcm9sbCA9IHsgdG9wOiAkKGRvY3VtZW50KS5zY3JvbGxUb3AoKSwgbGVmdDogJChkb2N1bWVudCkuc2Nyb2xsTGVmdCgpIH07CgoJCS8vIGJ1Z2ZpeCBmb3IgaHR0cDovL2Rldi5qcXVlcnkuY29tL3RpY2tldC8xNzQ5CgkJaWYgKGVsLmlzKCcudWktZHJhZ2dhYmxlJykgfHwgKC9hYnNvbHV0ZS8pLnRlc3QoZWwuY3NzKCdwb3NpdGlvbicpKSkgewoJCQllbC5jc3MoeyBwb3NpdGlvbjogJ2Fic29sdXRlJywgdG9wOiBpbmlQb3MudG9wLCBsZWZ0OiBpbmlQb3MubGVmdCB9KTsKCQl9CgoJCXRoaXMuX3JlbmRlclByb3h5KCk7CgoJCXZhciBjdXJsZWZ0ID0gbnVtKHRoaXMuaGVscGVyLmNzcygnbGVmdCcpKSwgY3VydG9wID0gbnVtKHRoaXMuaGVscGVyLmNzcygndG9wJykpOwoKCQlpZiAoby5jb250YWlubWVudCkgewoJCQljdXJsZWZ0ICs9ICQoby5jb250YWlubWVudCkuc2Nyb2xsTGVmdCgpIHx8IDA7CgkJCWN1cnRvcCArPSAkKG8uY29udGFpbm1lbnQpLnNjcm9sbFRvcCgpIHx8IDA7CgkJfQoKCQkvL1N0b3JlIG5lZWRlZCB2YXJpYWJsZXMKCQl0aGlzLm9mZnNldCA9IHRoaXMuaGVscGVyLm9mZnNldCgpOwoJCXRoaXMucG9zaXRpb24gPSB7IGxlZnQ6IGN1cmxlZnQsIHRvcDogY3VydG9wIH07CgkJdGhpcy5zaXplID0gdGhpcy5faGVscGVyID8geyB3aWR0aDogZWwub3V0ZXJXaWR0aCgpLCBoZWlnaHQ6IGVsLm91dGVySGVpZ2h0KCkgfSA6IHsgd2lkdGg6IGVsLndpZHRoKCksIGhlaWdodDogZWwuaGVpZ2h0KCkgfTsKCQl0aGlzLm9yaWdpbmFsU2l6ZSA9IHRoaXMuX2hlbHBlciA/IHsgd2lkdGg6IGVsLm91dGVyV2lkdGgoKSwgaGVpZ2h0OiBlbC5vdXRlckhlaWdodCgpIH0gOiB7IHdpZHRoOiBlbC53aWR0aCgpLCBoZWlnaHQ6IGVsLmhlaWdodCgpIH07CgkJdGhpcy5vcmlnaW5hbFBvc2l0aW9uID0geyBsZWZ0OiBjdXJsZWZ0LCB0b3A6IGN1cnRvcCB9OwoJCXRoaXMuc2l6ZURpZmYgPSB7IHdpZHRoOiBlbC5vdXRlcldpZHRoKCkgLSBlbC53aWR0aCgpLCBoZWlnaHQ6IGVsLm91dGVySGVpZ2h0KCkgLSBlbC5oZWlnaHQoKSB9OwoJCXRoaXMub3JpZ2luYWxNb3VzZVBvc2l0aW9uID0geyBsZWZ0OiBldmVudC5wYWdlWCwgdG9wOiBldmVudC5wYWdlWSB9OwoKCQkvL0FzcGVjdCBSYXRpbwoJCXRoaXMuYXNwZWN0UmF0aW8gPSAodHlwZW9mIG8uYXNwZWN0UmF0aW8gPT0gJ251bWJlcicpID8gby5hc3BlY3RSYXRpbyA6ICgodGhpcy5vcmlnaW5hbFNpemUud2lkdGggLyB0aGlzLm9yaWdpbmFsU2l6ZS5oZWlnaHQpIHx8IDEpOwoKCQl2YXIgY3Vyc29yID0gJCgnLnVpLXJlc2l6YWJsZS0nICsgdGhpcy5heGlzKS5jc3MoJ2N1cnNvcicpOwoJCSQoJ2JvZHknKS5jc3MoJ2N1cnNvcicsIGN1cnNvciA9PSAnYXV0bycgPyB0aGlzLmF4aXMgKyAnLXJlc2l6ZScgOiBjdXJzb3IpOwoKCQllbC5hZGRDbGFzcygidWktcmVzaXphYmxlLXJlc2l6aW5nIik7CgkJdGhpcy5fcHJvcGFnYXRlKCJzdGFydCIsIGV2ZW50KTsKCQlyZXR1cm4gdHJ1ZTsKCX0sCgoJX21vdXNlRHJhZzogZnVuY3Rpb24oZXZlbnQpIHsKCgkJLy9JbmNyZWFzZSBwZXJmb3JtYW5jZSwgYXZvaWQgcmVnZXgKCQl2YXIgZWwgPSB0aGlzLmhlbHBlciwgbyA9IHRoaXMub3B0aW9ucywgcHJvcHMgPSB7fSwKCQkJdGhhdCA9IHRoaXMsIHNtcCA9IHRoaXMub3JpZ2luYWxNb3VzZVBvc2l0aW9uLCBhID0gdGhpcy5heGlzOwoKCQl2YXIgZHggPSAoZXZlbnQucGFnZVgtc21wLmxlZnQpfHwwLCBkeSA9IChldmVudC5wYWdlWS1zbXAudG9wKXx8MDsKCQl2YXIgdHJpZ2dlciA9IHRoaXMuX2NoYW5nZVthXTsKCQlpZiAoIXRyaWdnZXIpIHJldHVybiBmYWxzZTsKCgkJLy8gQ2FsY3VsYXRlIHRoZSBhdHRycyB0aGF0IHdpbGwgYmUgY2hhbmdlCgkJdmFyIGRhdGEgPSB0cmlnZ2VyLmFwcGx5KHRoaXMsIFtldmVudCwgZHgsIGR5XSk7CgoJCS8vIFB1dCB0aGlzIGluIHRoZSBtb3VzZURyYWcgaGFuZGxlciBzaW5jZSB0aGUgdXNlciBjYW4gc3RhcnQgcHJlc3Npbmcgc2hpZnQgd2hpbGUgcmVzaXppbmcKCQl0aGlzLl91cGRhdGVWaXJ0dWFsQm91bmRhcmllcyhldmVudC5zaGlmdEtleSk7CgkJaWYgKHRoaXMuX2FzcGVjdFJhdGlvIHx8IGV2ZW50LnNoaWZ0S2V5KQoJCQlkYXRhID0gdGhpcy5fdXBkYXRlUmF0aW8oZGF0YSwgZXZlbnQpOwoKCQlkYXRhID0gdGhpcy5fcmVzcGVjdFNpemUoZGF0YSwgZXZlbnQpOwoKCQkvLyBwbHVnaW5zIGNhbGxiYWNrcyBuZWVkIHRvIGJlIGNhbGxlZCBmaXJzdAoJCXRoaXMuX3Byb3BhZ2F0ZSgicmVzaXplIiwgZXZlbnQpOwoKCQllbC5jc3MoewoJCQl0b3A6IHRoaXMucG9zaXRpb24udG9wICsgInB4IiwgbGVmdDogdGhpcy5wb3NpdGlvbi5sZWZ0ICsgInB4IiwKCQkJd2lkdGg6IHRoaXMuc2l6ZS53aWR0aCArICJweCIsIGhlaWdodDogdGhpcy5zaXplLmhlaWdodCArICJweCIKCQl9KTsKCgkJaWYgKCF0aGlzLl9oZWxwZXIgJiYgdGhpcy5fcHJvcG9ydGlvbmFsbHlSZXNpemVFbGVtZW50cy5sZW5ndGgpCgkJCXRoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplKCk7CgoJCXRoaXMuX3VwZGF0ZUNhY2hlKGRhdGEpOwoKCQkvLyBjYWxsaW5nIHRoZSB1c2VyIGNhbGxiYWNrIGF0IHRoZSBlbmQKCQl0aGlzLl90cmlnZ2VyKCdyZXNpemUnLCBldmVudCwgdGhpcy51aSgpKTsKCgkJcmV0dXJuIGZhbHNlOwoJfSwKCglfbW91c2VTdG9wOiBmdW5jdGlvbihldmVudCkgewoKCQl0aGlzLnJlc2l6aW5nID0gZmFsc2U7CgkJdmFyIG8gPSB0aGlzLm9wdGlvbnMsIHRoYXQgPSB0aGlzOwoKCQlpZih0aGlzLl9oZWxwZXIpIHsKCQkJdmFyIHByID0gdGhpcy5fcHJvcG9ydGlvbmFsbHlSZXNpemVFbGVtZW50cywgaXN0YSA9IHByLmxlbmd0aCAmJiAoL3RleHRhcmVhL2kpLnRlc3QocHJbMF0ubm9kZU5hbWUpLAoJCQkJc29mZnNldGggPSBpc3RhICYmICQudWkuaGFzU2Nyb2xsKHByWzBdLCAnbGVmdCcpIC8qIFRPRE8gLSBqdW1wIGhlaWdodCAqLyA/IDAgOiB0aGF0LnNpemVEaWZmLmhlaWdodCwKCQkJCXNvZmZzZXR3ID0gaXN0YSA/IDAgOiB0aGF0LnNpemVEaWZmLndpZHRoOwoKCQkJdmFyIHMgPSB7IHdpZHRoOiAodGhhdC5oZWxwZXIud2lkdGgoKSAgLSBzb2Zmc2V0dyksIGhlaWdodDogKHRoYXQuaGVscGVyLmhlaWdodCgpIC0gc29mZnNldGgpIH0sCgkJCQlsZWZ0ID0gKHBhcnNlSW50KHRoYXQuZWxlbWVudC5jc3MoJ2xlZnQnKSwgMTApICsgKHRoYXQucG9zaXRpb24ubGVmdCAtIHRoYXQub3JpZ2luYWxQb3NpdGlvbi5sZWZ0KSkgfHwgbnVsbCwKCQkJCXRvcCA9IChwYXJzZUludCh0aGF0LmVsZW1lbnQuY3NzKCd0b3AnKSwgMTApICsgKHRoYXQucG9zaXRpb24udG9wIC0gdGhhdC5vcmlnaW5hbFBvc2l0aW9uLnRvcCkpIHx8IG51bGw7CgoJCQlpZiAoIW8uYW5pbWF0ZSkKCQkJCXRoaXMuZWxlbWVudC5jc3MoJC5leHRlbmQocywgeyB0b3A6IHRvcCwgbGVmdDogbGVmdCB9KSk7CgoJCQl0aGF0LmhlbHBlci5oZWlnaHQodGhhdC5zaXplLmhlaWdodCk7CgkJCXRoYXQuaGVscGVyLndpZHRoKHRoYXQuc2l6ZS53aWR0aCk7CgoJCQlpZiAodGhpcy5faGVscGVyICYmICFvLmFuaW1hdGUpIHRoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplKCk7CgkJfQoKCQkkKCdib2R5JykuY3NzKCdjdXJzb3InLCAnYXV0bycpOwoKCQl0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoInVpLXJlc2l6YWJsZS1yZXNpemluZyIpOwoKCQl0aGlzLl9wcm9wYWdhdGUoInN0b3AiLCBldmVudCk7CgoJCWlmICh0aGlzLl9oZWxwZXIpIHRoaXMuaGVscGVyLnJlbW92ZSgpOwoJCXJldHVybiBmYWxzZTsKCgl9LAoKCV91cGRhdGVWaXJ0dWFsQm91bmRhcmllczogZnVuY3Rpb24oZm9yY2VBc3BlY3RSYXRpbykgewoJCXZhciBvID0gdGhpcy5vcHRpb25zLCBwTWluV2lkdGgsIHBNYXhXaWR0aCwgcE1pbkhlaWdodCwgcE1heEhlaWdodCwgYjsKCgkJYiA9IHsKCQkJbWluV2lkdGg6IGlzTnVtYmVyKG8ubWluV2lkdGgpID8gby5taW5XaWR0aCA6IDAsCgkJCW1heFdpZHRoOiBpc051bWJlcihvLm1heFdpZHRoKSA/IG8ubWF4V2lkdGggOiBJbmZpbml0eSwKCQkJbWluSGVpZ2h0OiBpc051bWJlcihvLm1pbkhlaWdodCkgPyBvLm1pbkhlaWdodCA6IDAsCgkJCW1heEhlaWdodDogaXNOdW1iZXIoby5tYXhIZWlnaHQpID8gby5tYXhIZWlnaHQgOiBJbmZpbml0eQoJCX07CgoJCWlmKHRoaXMuX2FzcGVjdFJhdGlvIHx8IGZvcmNlQXNwZWN0UmF0aW8pIHsKCQkJLy8gV2Ugd2FudCB0byBjcmVhdGUgYW4gZW5jbG9zaW5nIGJveCB3aG9zZSBhc3BlY3QgcmF0aW9uIGlzIHRoZSByZXF1ZXN0ZWQgb25lCgkJCS8vIEZpcnN0LCBjb21wdXRlIHRoZSAicHJvamVjdGVkIiBzaXplIGZvciBlYWNoIGRpbWVuc2lvbiBiYXNlZCBvbiB0aGUgYXNwZWN0IHJhdGlvIGFuZCBvdGhlciBkaW1lbnNpb24KCQkJcE1pbldpZHRoID0gYi5taW5IZWlnaHQgKiB0aGlzLmFzcGVjdFJhdGlvOwoJCQlwTWluSGVpZ2h0ID0gYi5taW5XaWR0aCAvIHRoaXMuYXNwZWN0UmF0aW87CgkJCXBNYXhXaWR0aCA9IGIubWF4SGVpZ2h0ICogdGhpcy5hc3BlY3RSYXRpbzsKCQkJcE1heEhlaWdodCA9IGIubWF4V2lkdGggLyB0aGlzLmFzcGVjdFJhdGlvOwoKCQkJaWYocE1pbldpZHRoID4gYi5taW5XaWR0aCkgYi5taW5XaWR0aCA9IHBNaW5XaWR0aDsKCQkJaWYocE1pbkhlaWdodCA+IGIubWluSGVpZ2h0KSBiLm1pbkhlaWdodCA9IHBNaW5IZWlnaHQ7CgkJCWlmKHBNYXhXaWR0aCA8IGIubWF4V2lkdGgpIGIubWF4V2lkdGggPSBwTWF4V2lkdGg7CgkJCWlmKHBNYXhIZWlnaHQgPCBiLm1heEhlaWdodCkgYi5tYXhIZWlnaHQgPSBwTWF4SGVpZ2h0OwoJCX0KCQl0aGlzLl92Qm91bmRhcmllcyA9IGI7Cgl9LAoKCV91cGRhdGVDYWNoZTogZnVuY3Rpb24oZGF0YSkgewoJCXZhciBvID0gdGhpcy5vcHRpb25zOwoJCXRoaXMub2Zmc2V0ID0gdGhpcy5oZWxwZXIub2Zmc2V0KCk7CgkJaWYgKGlzTnVtYmVyKGRhdGEubGVmdCkpIHRoaXMucG9zaXRpb24ubGVmdCA9IGRhdGEubGVmdDsKCQlpZiAoaXNOdW1iZXIoZGF0YS50b3ApKSB0aGlzLnBvc2l0aW9uLnRvcCA9IGRhdGEudG9wOwoJCWlmIChpc051bWJlcihkYXRhLmhlaWdodCkpIHRoaXMuc2l6ZS5oZWlnaHQgPSBkYXRhLmhlaWdodDsKCQlpZiAoaXNOdW1iZXIoZGF0YS53aWR0aCkpIHRoaXMuc2l6ZS53aWR0aCA9IGRhdGEud2lkdGg7Cgl9LAoKCV91cGRhdGVSYXRpbzogZnVuY3Rpb24oZGF0YSwgZXZlbnQpIHsKCgkJdmFyIG8gPSB0aGlzLm9wdGlvbnMsIGNwb3MgPSB0aGlzLnBvc2l0aW9uLCBjc2l6ZSA9IHRoaXMuc2l6ZSwgYSA9IHRoaXMuYXhpczsKCgkJaWYgKGlzTnVtYmVyKGRhdGEuaGVpZ2h0KSkgZGF0YS53aWR0aCA9IChkYXRhLmhlaWdodCAqIHRoaXMuYXNwZWN0UmF0aW8pOwoJCWVsc2UgaWYgKGlzTnVtYmVyKGRhdGEud2lkdGgpKSBkYXRhLmhlaWdodCA9IChkYXRhLndpZHRoIC8gdGhpcy5hc3BlY3RSYXRpbyk7CgoJCWlmIChhID09ICdzdycpIHsKCQkJZGF0YS5sZWZ0ID0gY3Bvcy5sZWZ0ICsgKGNzaXplLndpZHRoIC0gZGF0YS53aWR0aCk7CgkJCWRhdGEudG9wID0gbnVsbDsKCQl9CgkJaWYgKGEgPT0gJ253JykgewoJCQlkYXRhLnRvcCA9IGNwb3MudG9wICsgKGNzaXplLmhlaWdodCAtIGRhdGEuaGVpZ2h0KTsKCQkJZGF0YS5sZWZ0ID0gY3Bvcy5sZWZ0ICsgKGNzaXplLndpZHRoIC0gZGF0YS53aWR0aCk7CgkJfQoKCQlyZXR1cm4gZGF0YTsKCX0sCgoJX3Jlc3BlY3RTaXplOiBmdW5jdGlvbihkYXRhLCBldmVudCkgewoKCQl2YXIgZWwgPSB0aGlzLmhlbHBlciwgbyA9IHRoaXMuX3ZCb3VuZGFyaWVzLCBwUmF0aW8gPSB0aGlzLl9hc3BlY3RSYXRpbyB8fCBldmVudC5zaGlmdEtleSwgYSA9IHRoaXMuYXhpcywKCQkJCWlzbWF4dyA9IGlzTnVtYmVyKGRhdGEud2lkdGgpICYmIG8ubWF4V2lkdGggJiYgKG8ubWF4V2lkdGggPCBkYXRhLndpZHRoKSwgaXNtYXhoID0gaXNOdW1iZXIoZGF0YS5oZWlnaHQpICYmIG8ubWF4SGVpZ2h0ICYmIChvLm1heEhlaWdodCA8IGRhdGEuaGVpZ2h0KSwKCQkJCQlpc21pbncgPSBpc051bWJlcihkYXRhLndpZHRoKSAmJiBvLm1pbldpZHRoICYmIChvLm1pbldpZHRoID4gZGF0YS53aWR0aCksIGlzbWluaCA9IGlzTnVtYmVyKGRhdGEuaGVpZ2h0KSAmJiBvLm1pbkhlaWdodCAmJiAoby5taW5IZWlnaHQgPiBkYXRhLmhlaWdodCk7CgoJCWlmIChpc21pbncpIGRhdGEud2lkdGggPSBvLm1pbldpZHRoOwoJCWlmIChpc21pbmgpIGRhdGEuaGVpZ2h0ID0gby5taW5IZWlnaHQ7CgkJaWYgKGlzbWF4dykgZGF0YS53aWR0aCA9IG8ubWF4V2lkdGg7CgkJaWYgKGlzbWF4aCkgZGF0YS5oZWlnaHQgPSBvLm1heEhlaWdodDsKCgkJdmFyIGR3ID0gdGhpcy5vcmlnaW5hbFBvc2l0aW9uLmxlZnQgKyB0aGlzLm9yaWdpbmFsU2l6ZS53aWR0aCwgZGggPSB0aGlzLnBvc2l0aW9uLnRvcCArIHRoaXMuc2l6ZS5oZWlnaHQ7CgkJdmFyIGN3ID0gL3N3fG53fHcvLnRlc3QoYSksIGNoID0gL253fG5lfG4vLnRlc3QoYSk7CgoJCWlmIChpc21pbncgJiYgY3cpIGRhdGEubGVmdCA9IGR3IC0gby5taW5XaWR0aDsKCQlpZiAoaXNtYXh3ICYmIGN3KSBkYXRhLmxlZnQgPSBkdyAtIG8ubWF4V2lkdGg7CgkJaWYgKGlzbWluaCAmJiBjaCkJZGF0YS50b3AgPSBkaCAtIG8ubWluSGVpZ2h0OwoJCWlmIChpc21heGggJiYgY2gpCWRhdGEudG9wID0gZGggLSBvLm1heEhlaWdodDsKCgkJLy8gZml4aW5nIGp1bXAgZXJyb3Igb24gdG9wL2xlZnQgLSBidWcgIzIzMzAKCQl2YXIgaXNOb3R3aCA9ICFkYXRhLndpZHRoICYmICFkYXRhLmhlaWdodDsKCQlpZiAoaXNOb3R3aCAmJiAhZGF0YS5sZWZ0ICYmIGRhdGEudG9wKSBkYXRhLnRvcCA9IG51bGw7CgkJZWxzZSBpZiAoaXNOb3R3aCAmJiAhZGF0YS50b3AgJiYgZGF0YS5sZWZ0KSBkYXRhLmxlZnQgPSBudWxsOwoKCQlyZXR1cm4gZGF0YTsKCX0sCgoJX3Byb3BvcnRpb25hbGx5UmVzaXplOiBmdW5jdGlvbigpIHsKCgkJdmFyIG8gPSB0aGlzLm9wdGlvbnM7CgkJaWYgKCF0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZUVsZW1lbnRzLmxlbmd0aCkgcmV0dXJuOwoJCXZhciBlbGVtZW50ID0gdGhpcy5oZWxwZXIgfHwgdGhpcy5lbGVtZW50OwoKCQlmb3IgKHZhciBpPTA7IGkgPCB0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZUVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7CgoJCQl2YXIgcHJlbCA9IHRoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplRWxlbWVudHNbaV07CgoJCQlpZiAoIXRoaXMuYm9yZGVyRGlmKSB7CgkJCQl2YXIgYiA9IFtwcmVsLmNzcygnYm9yZGVyVG9wV2lkdGgnKSwgcHJlbC5jc3MoJ2JvcmRlclJpZ2h0V2lkdGgnKSwgcHJlbC5jc3MoJ2JvcmRlckJvdHRvbVdpZHRoJyksIHByZWwuY3NzKCdib3JkZXJMZWZ0V2lkdGgnKV0sCgkJCQkJcCA9IFtwcmVsLmNzcygncGFkZGluZ1RvcCcpLCBwcmVsLmNzcygncGFkZGluZ1JpZ2h0JyksIHByZWwuY3NzKCdwYWRkaW5nQm90dG9tJyksIHByZWwuY3NzKCdwYWRkaW5nTGVmdCcpXTsKCgkJCQl0aGlzLmJvcmRlckRpZiA9ICQubWFwKGIsIGZ1bmN0aW9uKHYsIGkpIHsKCQkJCQl2YXIgYm9yZGVyID0gcGFyc2VJbnQodiwxMCl8fDAsIHBhZGRpbmcgPSBwYXJzZUludChwW2ldLDEwKXx8MDsKCQkJCQlyZXR1cm4gYm9yZGVyICsgcGFkZGluZzsKCQkJCX0pOwoJCQl9CgoJCQlwcmVsLmNzcyh7CgkJCQloZWlnaHQ6IChlbGVtZW50LmhlaWdodCgpIC0gdGhpcy5ib3JkZXJEaWZbMF0gLSB0aGlzLmJvcmRlckRpZlsyXSkgfHwgMCwKCQkJCXdpZHRoOiAoZWxlbWVudC53aWR0aCgpIC0gdGhpcy5ib3JkZXJEaWZbMV0gLSB0aGlzLmJvcmRlckRpZlszXSkgfHwgMAoJCQl9KTsKCgkJfTsKCgl9LAoKCV9yZW5kZXJQcm94eTogZnVuY3Rpb24oKSB7CgoJCXZhciBlbCA9IHRoaXMuZWxlbWVudCwgbyA9IHRoaXMub3B0aW9uczsKCQl0aGlzLmVsZW1lbnRPZmZzZXQgPSBlbC5vZmZzZXQoKTsKCgkJaWYodGhpcy5faGVscGVyKSB7CgoJCQl0aGlzLmhlbHBlciA9IHRoaXMuaGVscGVyIHx8ICQoJzxkaXYgc3R5bGU9Im92ZXJmbG93OmhpZGRlbjsiPjwvZGl2PicpOwoKCQkJLy8gZml4IGllNiBvZmZzZXQgVE9ETzogVGhpcyBzZWVtcyBicm9rZW4KCQkJdmFyIGllNm9mZnNldCA9ICgkLnVpLmllNiA/IDEgOiAwKSwKCQkJcHh5b2Zmc2V0ID0gKCAkLnVpLmllNiA/IDIgOiAtMSApOwoKCQkJdGhpcy5oZWxwZXIuYWRkQ2xhc3ModGhpcy5faGVscGVyKS5jc3MoewoJCQkJd2lkdGg6IHRoaXMuZWxlbWVudC5vdXRlcldpZHRoKCkgKyBweHlvZmZzZXQsCgkJCQloZWlnaHQ6IHRoaXMuZWxlbWVudC5vdXRlckhlaWdodCgpICsgcHh5b2Zmc2V0LAoJCQkJcG9zaXRpb246ICdhYnNvbHV0ZScsCgkJCQlsZWZ0OiB0aGlzLmVsZW1lbnRPZmZzZXQubGVmdCAtIGllNm9mZnNldCArJ3B4JywKCQkJCXRvcDogdGhpcy5lbGVtZW50T2Zmc2V0LnRvcCAtIGllNm9mZnNldCArJ3B4JywKCQkJCXpJbmRleDogKytvLnpJbmRleCAvL1RPRE86IERvbid0IG1vZGlmeSBvcHRpb24KCQkJfSk7CgoJCQl0aGlzLmhlbHBlcgoJCQkJLmFwcGVuZFRvKCJib2R5IikKCQkJCS5kaXNhYmxlU2VsZWN0aW9uKCk7CgoJCX0gZWxzZSB7CgkJCXRoaXMuaGVscGVyID0gdGhpcy5lbGVtZW50OwoJCX0KCgl9LAoKCV9jaGFuZ2U6IHsKCQllOiBmdW5jdGlvbihldmVudCwgZHgsIGR5KSB7CgkJCXJldHVybiB7IHdpZHRoOiB0aGlzLm9yaWdpbmFsU2l6ZS53aWR0aCArIGR4IH07CgkJfSwKCQl3OiBmdW5jdGlvbihldmVudCwgZHgsIGR5KSB7CgkJCXZhciBvID0gdGhpcy5vcHRpb25zLCBjcyA9IHRoaXMub3JpZ2luYWxTaXplLCBzcCA9IHRoaXMub3JpZ2luYWxQb3NpdGlvbjsKCQkJcmV0dXJuIHsgbGVmdDogc3AubGVmdCArIGR4LCB3aWR0aDogY3Mud2lkdGggLSBkeCB9OwoJCX0sCgkJbjogZnVuY3Rpb24oZXZlbnQsIGR4LCBkeSkgewoJCQl2YXIgbyA9IHRoaXMub3B0aW9ucywgY3MgPSB0aGlzLm9yaWdpbmFsU2l6ZSwgc3AgPSB0aGlzLm9yaWdpbmFsUG9zaXRpb247CgkJCXJldHVybiB7IHRvcDogc3AudG9wICsgZHksIGhlaWdodDogY3MuaGVpZ2h0IC0gZHkgfTsKCQl9LAoJCXM6IGZ1bmN0aW9uKGV2ZW50LCBkeCwgZHkpIHsKCQkJcmV0dXJuIHsgaGVpZ2h0OiB0aGlzLm9yaWdpbmFsU2l6ZS5oZWlnaHQgKyBkeSB9OwoJCX0sCgkJc2U6IGZ1bmN0aW9uKGV2ZW50LCBkeCwgZHkpIHsKCQkJcmV0dXJuICQuZXh0ZW5kKHRoaXMuX2NoYW5nZS5zLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksIHRoaXMuX2NoYW5nZS5lLmFwcGx5KHRoaXMsIFtldmVudCwgZHgsIGR5XSkpOwoJCX0sCgkJc3c6IGZ1bmN0aW9uKGV2ZW50LCBkeCwgZHkpIHsKCQkJcmV0dXJuICQuZXh0ZW5kKHRoaXMuX2NoYW5nZS5zLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksIHRoaXMuX2NoYW5nZS53LmFwcGx5KHRoaXMsIFtldmVudCwgZHgsIGR5XSkpOwoJCX0sCgkJbmU6IGZ1bmN0aW9uKGV2ZW50LCBkeCwgZHkpIHsKCQkJcmV0dXJuICQuZXh0ZW5kKHRoaXMuX2NoYW5nZS5uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksIHRoaXMuX2NoYW5nZS5lLmFwcGx5KHRoaXMsIFtldmVudCwgZHgsIGR5XSkpOwoJCX0sCgkJbnc6IGZ1bmN0aW9uKGV2ZW50LCBkeCwgZHkpIHsKCQkJcmV0dXJuICQuZXh0ZW5kKHRoaXMuX2NoYW5nZS5uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksIHRoaXMuX2NoYW5nZS53LmFwcGx5KHRoaXMsIFtldmVudCwgZHgsIGR5XSkpOwoJCX0KCX0sCgoJX3Byb3BhZ2F0ZTogZnVuY3Rpb24obiwgZXZlbnQpIHsKCQkkLnVpLnBsdWdpbi5jYWxsKHRoaXMsIG4sIFtldmVudCwgdGhpcy51aSgpXSk7CgkJKG4gIT0gInJlc2l6ZSIgJiYgdGhpcy5fdHJpZ2dlcihuLCBldmVudCwgdGhpcy51aSgpKSk7Cgl9LAoKCXBsdWdpbnM6IHt9LAoKCXVpOiBmdW5jdGlvbigpIHsKCQlyZXR1cm4gewoJCQlvcmlnaW5hbEVsZW1lbnQ6IHRoaXMub3JpZ2luYWxFbGVtZW50LAoJCQllbGVtZW50OiB0aGlzLmVsZW1lbnQsCgkJCWhlbHBlcjogdGhpcy5oZWxwZXIsCgkJCXBvc2l0aW9uOiB0aGlzLnBvc2l0aW9uLAoJCQlzaXplOiB0aGlzLnNpemUsCgkJCW9yaWdpbmFsU2l6ZTogdGhpcy5vcmlnaW5hbFNpemUsCgkJCW9yaWdpbmFsUG9zaXRpb246IHRoaXMub3JpZ2luYWxQb3NpdGlvbgoJCX07Cgl9Cgp9KTsKCi8qCiAqIFJlc2l6YWJsZSBFeHRlbnNpb25zCiAqLwoKJC51aS5wbHVnaW4uYWRkKCJyZXNpemFibGUiLCAiYWxzb1Jlc2l6ZSIsIHsKCglzdGFydDogZnVuY3Rpb24gKGV2ZW50LCB1aSkgewoJCXZhciB0aGF0ID0gJCh0aGlzKS5kYXRhKCJyZXNpemFibGUiKSwgbyA9IHRoYXQub3B0aW9uczsKCgkJdmFyIF9zdG9yZSA9IGZ1bmN0aW9uIChleHApIHsKCQkJJChleHApLmVhY2goZnVuY3Rpb24oKSB7CgkJCQl2YXIgZWwgPSAkKHRoaXMpOwoJCQkJZWwuZGF0YSgicmVzaXphYmxlLWFsc29yZXNpemUiLCB7CgkJCQkJd2lkdGg6IHBhcnNlSW50KGVsLndpZHRoKCksIDEwKSwgaGVpZ2h0OiBwYXJzZUludChlbC5oZWlnaHQoKSwgMTApLAoJCQkJCWxlZnQ6IHBhcnNlSW50KGVsLmNzcygnbGVmdCcpLCAxMCksIHRvcDogcGFyc2VJbnQoZWwuY3NzKCd0b3AnKSwgMTApCgkJCQl9KTsKCQkJfSk7CgkJfTsKCgkJaWYgKHR5cGVvZihvLmFsc29SZXNpemUpID09ICdvYmplY3QnICYmICFvLmFsc29SZXNpemUucGFyZW50Tm9kZSkgewoJCQlpZiAoby5hbHNvUmVzaXplLmxlbmd0aCkgeyBvLmFsc29SZXNpemUgPSBvLmFsc29SZXNpemVbMF07IF9zdG9yZShvLmFsc29SZXNpemUpOyB9CgkJCWVsc2UgeyAkLmVhY2goby5hbHNvUmVzaXplLCBmdW5jdGlvbiAoZXhwKSB7IF9zdG9yZShleHApOyB9KTsgfQoJCX1lbHNlewoJCQlfc3RvcmUoby5hbHNvUmVzaXplKTsKCQl9Cgl9LAoKCXJlc2l6ZTogZnVuY3Rpb24gKGV2ZW50LCB1aSkgewoJCXZhciB0aGF0ID0gJCh0aGlzKS5kYXRhKCJyZXNpemFibGUiKSwgbyA9IHRoYXQub3B0aW9ucywgb3MgPSB0aGF0Lm9yaWdpbmFsU2l6ZSwgb3AgPSB0aGF0Lm9yaWdpbmFsUG9zaXRpb247CgoJCXZhciBkZWx0YSA9IHsKCQkJaGVpZ2h0OiAodGhhdC5zaXplLmhlaWdodCAtIG9zLmhlaWdodCkgfHwgMCwgd2lkdGg6ICh0aGF0LnNpemUud2lkdGggLSBvcy53aWR0aCkgfHwgMCwKCQkJdG9wOiAodGhhdC5wb3NpdGlvbi50b3AgLSBvcC50b3ApIHx8IDAsIGxlZnQ6ICh0aGF0LnBvc2l0aW9uLmxlZnQgLSBvcC5sZWZ0KSB8fCAwCgkJfSwKCgkJX2Fsc29SZXNpemUgPSBmdW5jdGlvbiAoZXhwLCBjKSB7CgkJCSQoZXhwKS5lYWNoKGZ1bmN0aW9uKCkgewoJCQkJdmFyIGVsID0gJCh0aGlzKSwgc3RhcnQgPSAkKHRoaXMpLmRhdGEoInJlc2l6YWJsZS1hbHNvcmVzaXplIiksIHN0eWxlID0ge30sCgkJCQkJY3NzID0gYyAmJiBjLmxlbmd0aCA/IGMgOiBlbC5wYXJlbnRzKHVpLm9yaWdpbmFsRWxlbWVudFswXSkubGVuZ3RoID8gWyd3aWR0aCcsICdoZWlnaHQnXSA6IFsnd2lkdGgnLCAnaGVpZ2h0JywgJ3RvcCcsICdsZWZ0J107CgoJCQkJJC5lYWNoKGNzcywgZnVuY3Rpb24gKGksIHByb3ApIHsKCQkJCQl2YXIgc3VtID0gKHN0YXJ0W3Byb3BdfHwwKSArIChkZWx0YVtwcm9wXXx8MCk7CgkJCQkJaWYgKHN1bSAmJiBzdW0gPj0gMCkKCQkJCQkJc3R5bGVbcHJvcF0gPSBzdW0gfHwgbnVsbDsKCQkJCX0pOwoKCQkJCWVsLmNzcyhzdHlsZSk7CgkJCX0pOwoJCX07CgoJCWlmICh0eXBlb2Yoby5hbHNvUmVzaXplKSA9PSAnb2JqZWN0JyAmJiAhby5hbHNvUmVzaXplLm5vZGVUeXBlKSB7CgkJCSQuZWFjaChvLmFsc29SZXNpemUsIGZ1bmN0aW9uIChleHAsIGMpIHsgX2Fsc29SZXNpemUoZXhwLCBjKTsgfSk7CgkJfWVsc2V7CgkJCV9hbHNvUmVzaXplKG8uYWxzb1Jlc2l6ZSk7CgkJfQoJfSwKCglzdG9wOiBmdW5jdGlvbiAoZXZlbnQsIHVpKSB7CgkJJCh0aGlzKS5yZW1vdmVEYXRhKCJyZXNpemFibGUtYWxzb3Jlc2l6ZSIpOwoJfQp9KTsKCiQudWkucGx1Z2luLmFkZCgicmVzaXphYmxlIiwgImFuaW1hdGUiLCB7CgoJc3RvcDogZnVuY3Rpb24oZXZlbnQsIHVpKSB7CgkJdmFyIHRoYXQgPSAkKHRoaXMpLmRhdGEoInJlc2l6YWJsZSIpLCBvID0gdGhhdC5vcHRpb25zOwoKCQl2YXIgcHIgPSB0aGF0Ll9wcm9wb3J0aW9uYWxseVJlc2l6ZUVsZW1lbnRzLCBpc3RhID0gcHIubGVuZ3RoICYmICgvdGV4dGFyZWEvaSkudGVzdChwclswXS5ub2RlTmFtZSksCgkJCQkJc29mZnNldGggPSBpc3RhICYmICQudWkuaGFzU2Nyb2xsKHByWzBdLCAnbGVmdCcpIC8qIFRPRE8gLSBqdW1wIGhlaWdodCAqLyA/IDAgOiB0aGF0LnNpemVEaWZmLmhlaWdodCwKCQkJCQkJc29mZnNldHcgPSBpc3RhID8gMCA6IHRoYXQuc2l6ZURpZmYud2lkdGg7CgoJCXZhciBzdHlsZSA9IHsgd2lkdGg6ICh0aGF0LnNpemUud2lkdGggLSBzb2Zmc2V0dyksIGhlaWdodDogKHRoYXQuc2l6ZS5oZWlnaHQgLSBzb2Zmc2V0aCkgfSwKCQkJCQlsZWZ0ID0gKHBhcnNlSW50KHRoYXQuZWxlbWVudC5jc3MoJ2xlZnQnKSwgMTApICsgKHRoYXQucG9zaXRpb24ubGVmdCAtIHRoYXQub3JpZ2luYWxQb3NpdGlvbi5sZWZ0KSkgfHwgbnVsbCwKCQkJCQkJdG9wID0gKHBhcnNlSW50KHRoYXQuZWxlbWVudC5jc3MoJ3RvcCcpLCAxMCkgKyAodGhhdC5wb3NpdGlvbi50b3AgLSB0aGF0Lm9yaWdpbmFsUG9zaXRpb24udG9wKSkgfHwgbnVsbDsKCgkJdGhhdC5lbGVtZW50LmFuaW1hdGUoCgkJCSQuZXh0ZW5kKHN0eWxlLCB0b3AgJiYgbGVmdCA/IHsgdG9wOiB0b3AsIGxlZnQ6IGxlZnQgfSA6IHt9KSwgewoJCQkJZHVyYXRpb246IG8uYW5pbWF0ZUR1cmF0aW9uLAoJCQkJZWFzaW5nOiBvLmFuaW1hdGVFYXNpbmcsCgkJCQlzdGVwOiBmdW5jdGlvbigpIHsKCgkJCQkJdmFyIGRhdGEgPSB7CgkJCQkJCXdpZHRoOiBwYXJzZUludCh0aGF0LmVsZW1lbnQuY3NzKCd3aWR0aCcpLCAxMCksCgkJCQkJCWhlaWdodDogcGFyc2VJbnQodGhhdC5lbGVtZW50LmNzcygnaGVpZ2h0JyksIDEwKSwKCQkJCQkJdG9wOiBwYXJzZUludCh0aGF0LmVsZW1lbnQuY3NzKCd0b3AnKSwgMTApLAoJCQkJCQlsZWZ0OiBwYXJzZUludCh0aGF0LmVsZW1lbnQuY3NzKCdsZWZ0JyksIDEwKQoJCQkJCX07CgoJCQkJCWlmIChwciAmJiBwci5sZW5ndGgpICQocHJbMF0pLmNzcyh7IHdpZHRoOiBkYXRhLndpZHRoLCBoZWlnaHQ6IGRhdGEuaGVpZ2h0IH0pOwoKCQkJCQkvLyBwcm9wYWdhdGluZyByZXNpemUsIGFuZCB1cGRhdGluZyB2YWx1ZXMgZm9yIGVhY2ggYW5pbWF0aW9uIHN0ZXAKCQkJCQl0aGF0Ll91cGRhdGVDYWNoZShkYXRhKTsKCQkJCQl0aGF0Ll9wcm9wYWdhdGUoInJlc2l6ZSIsIGV2ZW50KTsKCgkJCQl9CgkJCX0KCQkpOwoJfQoKfSk7CgokLnVpLnBsdWdpbi5hZGQoInJlc2l6YWJsZSIsICJjb250YWlubWVudCIsIHsKCglzdGFydDogZnVuY3Rpb24oZXZlbnQsIHVpKSB7CgkJdmFyIHRoYXQgPSAkKHRoaXMpLmRhdGEoInJlc2l6YWJsZSIpLCBvID0gdGhhdC5vcHRpb25zLCBlbCA9IHRoYXQuZWxlbWVudDsKCQl2YXIgb2MgPSBvLmNvbnRhaW5tZW50LAljZSA9IChvYyBpbnN0YW5jZW9mICQpID8gb2MuZ2V0KDApIDogKC9wYXJlbnQvLnRlc3Qob2MpKSA/IGVsLnBhcmVudCgpLmdldCgwKSA6IG9jOwoJCWlmICghY2UpIHJldHVybjsKCgkJdGhhdC5jb250YWluZXJFbGVtZW50ID0gJChjZSk7CgoJCWlmICgvZG9jdW1lbnQvLnRlc3Qob2MpIHx8IG9jID09IGRvY3VtZW50KSB7CgkJCXRoYXQuY29udGFpbmVyT2Zmc2V0ID0geyBsZWZ0OiAwLCB0b3A6IDAgfTsKCQkJdGhhdC5jb250YWluZXJQb3NpdGlvbiA9IHsgbGVmdDogMCwgdG9wOiAwIH07CgoJCQl0aGF0LnBhcmVudERhdGEgPSB7CgkJCQllbGVtZW50OiAkKGRvY3VtZW50KSwgbGVmdDogMCwgdG9wOiAwLAoJCQkJd2lkdGg6ICQoZG9jdW1lbnQpLndpZHRoKCksIGhlaWdodDogJChkb2N1bWVudCkuaGVpZ2h0KCkgfHwgZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlLnNjcm9sbEhlaWdodAoJCQl9OwoJCX0KCgkJLy8gaSdtIGEgbm9kZSwgc28gY29tcHV0ZSB0b3AsIGxlZnQsIHJpZ2h0LCBib3R0b20KCQllbHNlIHsKCQkJdmFyIGVsZW1lbnQgPSAkKGNlKSwgcCA9IFtdOwoJCQkkKFsgIlRvcCIsICJSaWdodCIsICJMZWZ0IiwgIkJvdHRvbSIgXSkuZWFjaChmdW5jdGlvbihpLCBuYW1lKSB7IHBbaV0gPSBudW0oZWxlbWVudC5jc3MoInBhZGRpbmciICsgbmFtZSkpOyB9KTsKCgkJCXRoYXQuY29udGFpbmVyT2Zmc2V0ID0gZWxlbWVudC5vZmZzZXQoKTsKCQkJdGhhdC5jb250YWluZXJQb3NpdGlvbiA9IGVsZW1lbnQucG9zaXRpb24oKTsKCQkJdGhhdC5jb250YWluZXJTaXplID0geyBoZWlnaHQ6IChlbGVtZW50LmlubmVySGVpZ2h0KCkgLSBwWzNdKSwgd2lkdGg6IChlbGVtZW50LmlubmVyV2lkdGgoKSAtIHBbMV0pIH07CgoJCQl2YXIgY28gPSB0aGF0LmNvbnRhaW5lck9mZnNldCwgY2ggPSB0aGF0LmNvbnRhaW5lclNpemUuaGVpZ2h0LAljdyA9IHRoYXQuY29udGFpbmVyU2l6ZS53aWR0aCwKCQkJCQkJd2lkdGggPSAoJC51aS5oYXNTY3JvbGwoY2UsICJsZWZ0IikgPyBjZS5zY3JvbGxXaWR0aCA6IGN3ICksIGhlaWdodCA9ICgkLnVpLmhhc1Njcm9sbChjZSkgPyBjZS5zY3JvbGxIZWlnaHQgOiBjaCk7CgoJCQl0aGF0LnBhcmVudERhdGEgPSB7CgkJCQllbGVtZW50OiBjZSwgbGVmdDogY28ubGVmdCwgdG9wOiBjby50b3AsIHdpZHRoOiB3aWR0aCwgaGVpZ2h0OiBoZWlnaHQKCQkJfTsKCQl9Cgl9LAoKCXJlc2l6ZTogZnVuY3Rpb24oZXZlbnQsIHVpKSB7CgkJdmFyIHRoYXQgPSAkKHRoaXMpLmRhdGEoInJlc2l6YWJsZSIpLCBvID0gdGhhdC5vcHRpb25zLAoJCQkJcHMgPSB0aGF0LmNvbnRhaW5lclNpemUsIGNvID0gdGhhdC5jb250YWluZXJPZmZzZXQsIGNzID0gdGhhdC5zaXplLCBjcCA9IHRoYXQucG9zaXRpb24sCgkJCQlwUmF0aW8gPSB0aGF0Ll9hc3BlY3RSYXRpbyB8fCBldmVudC5zaGlmdEtleSwgY29wID0geyB0b3A6MCwgbGVmdDowIH0sIGNlID0gdGhhdC5jb250YWluZXJFbGVtZW50OwoKCQlpZiAoY2VbMF0gIT0gZG9jdW1lbnQgJiYgKC9zdGF0aWMvKS50ZXN0KGNlLmNzcygncG9zaXRpb24nKSkpIGNvcCA9IGNvOwoKCQlpZiAoY3AubGVmdCA8ICh0aGF0Ll9oZWxwZXIgPyBjby5sZWZ0IDogMCkpIHsKCQkJdGhhdC5zaXplLndpZHRoID0gdGhhdC5zaXplLndpZHRoICsgKHRoYXQuX2hlbHBlciA/ICh0aGF0LnBvc2l0aW9uLmxlZnQgLSBjby5sZWZ0KSA6ICh0aGF0LnBvc2l0aW9uLmxlZnQgLSBjb3AubGVmdCkpOwoJCQlpZiAocFJhdGlvKSB0aGF0LnNpemUuaGVpZ2h0ID0gdGhhdC5zaXplLndpZHRoIC8gdGhhdC5hc3BlY3RSYXRpbzsKCQkJdGhhdC5wb3NpdGlvbi5sZWZ0ID0gby5oZWxwZXIgPyBjby5sZWZ0IDogMDsKCQl9CgoJCWlmIChjcC50b3AgPCAodGhhdC5faGVscGVyID8gY28udG9wIDogMCkpIHsKCQkJdGhhdC5zaXplLmhlaWdodCA9IHRoYXQuc2l6ZS5oZWlnaHQgKyAodGhhdC5faGVscGVyID8gKHRoYXQucG9zaXRpb24udG9wIC0gY28udG9wKSA6IHRoYXQucG9zaXRpb24udG9wKTsKCQkJaWYgKHBSYXRpbykgdGhhdC5zaXplLndpZHRoID0gdGhhdC5zaXplLmhlaWdodCAqIHRoYXQuYXNwZWN0UmF0aW87CgkJCXRoYXQucG9zaXRpb24udG9wID0gdGhhdC5faGVscGVyID8gY28udG9wIDogMDsKCQl9CgoJCXRoYXQub2Zmc2V0LmxlZnQgPSB0aGF0LnBhcmVudERhdGEubGVmdCt0aGF0LnBvc2l0aW9uLmxlZnQ7CgkJdGhhdC5vZmZzZXQudG9wID0gdGhhdC5wYXJlbnREYXRhLnRvcCt0aGF0LnBvc2l0aW9uLnRvcDsKCgkJdmFyIHdvc2V0ID0gTWF0aC5hYnMoICh0aGF0Ll9oZWxwZXIgPyB0aGF0Lm9mZnNldC5sZWZ0IC0gY29wLmxlZnQgOiAodGhhdC5vZmZzZXQubGVmdCAtIGNvcC5sZWZ0KSkgKyB0aGF0LnNpemVEaWZmLndpZHRoICksCgkJCQkJaG9zZXQgPSBNYXRoLmFicyggKHRoYXQuX2hlbHBlciA/IHRoYXQub2Zmc2V0LnRvcCAtIGNvcC50b3AgOiAodGhhdC5vZmZzZXQudG9wIC0gY28udG9wKSkgKyB0aGF0LnNpemVEaWZmLmhlaWdodCApOwoKCQl2YXIgaXNQYXJlbnQgPSB0aGF0LmNvbnRhaW5lckVsZW1lbnQuZ2V0KDApID09IHRoYXQuZWxlbWVudC5wYXJlbnQoKS5nZXQoMCksCgkJCWlzT2Zmc2V0UmVsYXRpdmUgPSAvcmVsYXRpdmV8YWJzb2x1dGUvLnRlc3QodGhhdC5jb250YWluZXJFbGVtZW50LmNzcygncG9zaXRpb24nKSk7CgoJCWlmKGlzUGFyZW50ICYmIGlzT2Zmc2V0UmVsYXRpdmUpIHdvc2V0IC09IHRoYXQucGFyZW50RGF0YS5sZWZ0OwoKCQlpZiAod29zZXQgKyB0aGF0LnNpemUud2lkdGggPj0gdGhhdC5wYXJlbnREYXRhLndpZHRoKSB7CgkJCXRoYXQuc2l6ZS53aWR0aCA9IHRoYXQucGFyZW50RGF0YS53aWR0aCAtIHdvc2V0OwoJCQlpZiAocFJhdGlvKSB0aGF0LnNpemUuaGVpZ2h0ID0gdGhhdC5zaXplLndpZHRoIC8gdGhhdC5hc3BlY3RSYXRpbzsKCQl9CgoJCWlmIChob3NldCArIHRoYXQuc2l6ZS5oZWlnaHQgPj0gdGhhdC5wYXJlbnREYXRhLmhlaWdodCkgewoJCQl0aGF0LnNpemUuaGVpZ2h0ID0gdGhhdC5wYXJlbnREYXRhLmhlaWdodCAtIGhvc2V0OwoJCQlpZiAocFJhdGlvKSB0aGF0LnNpemUud2lkdGggPSB0aGF0LnNpemUuaGVpZ2h0ICogdGhhdC5hc3BlY3RSYXRpbzsKCQl9Cgl9LAoKCXN0b3A6IGZ1bmN0aW9uKGV2ZW50LCB1aSl7CgkJdmFyIHRoYXQgPSAkKHRoaXMpLmRhdGEoInJlc2l6YWJsZSIpLCBvID0gdGhhdC5vcHRpb25zLCBjcCA9IHRoYXQucG9zaXRpb24sCgkJCQljbyA9IHRoYXQuY29udGFpbmVyT2Zmc2V0LCBjb3AgPSB0aGF0LmNvbnRhaW5lclBvc2l0aW9uLCBjZSA9IHRoYXQuY29udGFpbmVyRWxlbWVudDsKCgkJdmFyIGhlbHBlciA9ICQodGhhdC5oZWxwZXIpLCBobyA9IGhlbHBlci5vZmZzZXQoKSwgdyA9IGhlbHBlci5vdXRlcldpZHRoKCkgLSB0aGF0LnNpemVEaWZmLndpZHRoLCBoID0gaGVscGVyLm91dGVySGVpZ2h0KCkgLSB0aGF0LnNpemVEaWZmLmhlaWdodDsKCgkJaWYgKHRoYXQuX2hlbHBlciAmJiAhby5hbmltYXRlICYmICgvcmVsYXRpdmUvKS50ZXN0KGNlLmNzcygncG9zaXRpb24nKSkpCgkJCSQodGhpcykuY3NzKHsgbGVmdDogaG8ubGVmdCAtIGNvcC5sZWZ0IC0gY28ubGVmdCwgd2lkdGg6IHcsIGhlaWdodDogaCB9KTsKCgkJaWYgKHRoYXQuX2hlbHBlciAmJiAhby5hbmltYXRlICYmICgvc3RhdGljLykudGVzdChjZS5jc3MoJ3Bvc2l0aW9uJykpKQoJCQkkKHRoaXMpLmNzcyh7IGxlZnQ6IGhvLmxlZnQgLSBjb3AubGVmdCAtIGNvLmxlZnQsIHdpZHRoOiB3LCBoZWlnaHQ6IGggfSk7CgoJfQp9KTsKCiQudWkucGx1Z2luLmFkZCgicmVzaXphYmxlIiwgImdob3N0IiwgewoKCXN0YXJ0OiBmdW5jdGlvbihldmVudCwgdWkpIHsKCgkJdmFyIHRoYXQgPSAkKHRoaXMpLmRhdGEoInJlc2l6YWJsZSIpLCBvID0gdGhhdC5vcHRpb25zLCBjcyA9IHRoYXQuc2l6ZTsKCgkJdGhhdC5naG9zdCA9IHRoYXQub3JpZ2luYWxFbGVtZW50LmNsb25lKCk7CgkJdGhhdC5naG9zdAoJCQkuY3NzKHsgb3BhY2l0eTogLjI1LCBkaXNwbGF5OiAnYmxvY2snLCBwb3NpdGlvbjogJ3JlbGF0aXZlJywgaGVpZ2h0OiBjcy5oZWlnaHQsIHdpZHRoOiBjcy53aWR0aCwgbWFyZ2luOiAwLCBsZWZ0OiAwLCB0b3A6IDAgfSkKCQkJLmFkZENsYXNzKCd1aS1yZXNpemFibGUtZ2hvc3QnKQoJCQkuYWRkQ2xhc3ModHlwZW9mIG8uZ2hvc3QgPT0gJ3N0cmluZycgPyBvLmdob3N0IDogJycpOwoKCQl0aGF0Lmdob3N0LmFwcGVuZFRvKHRoYXQuaGVscGVyKTsKCgl9LAoKCXJlc2l6ZTogZnVuY3Rpb24oZXZlbnQsIHVpKXsKCQl2YXIgdGhhdCA9ICQodGhpcykuZGF0YSgicmVzaXphYmxlIiksIG8gPSB0aGF0Lm9wdGlvbnM7CgkJaWYgKHRoYXQuZ2hvc3QpIHRoYXQuZ2hvc3QuY3NzKHsgcG9zaXRpb246ICdyZWxhdGl2ZScsIGhlaWdodDogdGhhdC5zaXplLmhlaWdodCwgd2lkdGg6IHRoYXQuc2l6ZS53aWR0aCB9KTsKCX0sCgoJc3RvcDogZnVuY3Rpb24oZXZlbnQsIHVpKXsKCQl2YXIgdGhhdCA9ICQodGhpcykuZGF0YSgicmVzaXphYmxlIiksIG8gPSB0aGF0Lm9wdGlvbnM7CgkJaWYgKHRoYXQuZ2hvc3QgJiYgdGhhdC5oZWxwZXIpIHRoYXQuaGVscGVyLmdldCgwKS5yZW1vdmVDaGlsZCh0aGF0Lmdob3N0LmdldCgwKSk7Cgl9Cgp9KTsKCiQudWkucGx1Z2luLmFkZCgicmVzaXphYmxlIiwgImdyaWQiLCB7CgoJcmVzaXplOiBmdW5jdGlvbihldmVudCwgdWkpIHsKCQl2YXIgdGhhdCA9ICQodGhpcykuZGF0YSgicmVzaXphYmxlIiksIG8gPSB0aGF0Lm9wdGlvbnMsIGNzID0gdGhhdC5zaXplLCBvcyA9IHRoYXQub3JpZ2luYWxTaXplLCBvcCA9IHRoYXQub3JpZ2luYWxQb3NpdGlvbiwgYSA9IHRoYXQuYXhpcywgcmF0aW8gPSBvLl9hc3BlY3RSYXRpbyB8fCBldmVudC5zaGlmdEtleTsKCQlvLmdyaWQgPSB0eXBlb2Ygby5ncmlkID09ICJudW1iZXIiID8gW28uZ3JpZCwgby5ncmlkXSA6IG8uZ3JpZDsKCQl2YXIgb3ggPSBNYXRoLnJvdW5kKChjcy53aWR0aCAtIG9zLndpZHRoKSAvIChvLmdyaWRbMF18fDEpKSAqIChvLmdyaWRbMF18fDEpLCBveSA9IE1hdGgucm91bmQoKGNzLmhlaWdodCAtIG9zLmhlaWdodCkgLyAoby5ncmlkWzFdfHwxKSkgKiAoby5ncmlkWzFdfHwxKTsKCgkJaWYgKC9eKHNlfHN8ZSkkLy50ZXN0KGEpKSB7CgkJCXRoYXQuc2l6ZS53aWR0aCA9IG9zLndpZHRoICsgb3g7CgkJCXRoYXQuc2l6ZS5oZWlnaHQgPSBvcy5oZWlnaHQgKyBveTsKCQl9CgkJZWxzZSBpZiAoL14obmUpJC8udGVzdChhKSkgewoJCQl0aGF0LnNpemUud2lkdGggPSBvcy53aWR0aCArIG94OwoJCQl0aGF0LnNpemUuaGVpZ2h0ID0gb3MuaGVpZ2h0ICsgb3k7CgkJCXRoYXQucG9zaXRpb24udG9wID0gb3AudG9wIC0gb3k7CgkJfQoJCWVsc2UgaWYgKC9eKHN3KSQvLnRlc3QoYSkpIHsKCQkJdGhhdC5zaXplLndpZHRoID0gb3Mud2lkdGggKyBveDsKCQkJdGhhdC5zaXplLmhlaWdodCA9IG9zLmhlaWdodCArIG95OwoJCQl0aGF0LnBvc2l0aW9uLmxlZnQgPSBvcC5sZWZ0IC0gb3g7CgkJfQoJCWVsc2UgewoJCQl0aGF0LnNpemUud2lkdGggPSBvcy53aWR0aCArIG94OwoJCQl0aGF0LnNpemUuaGVpZ2h0ID0gb3MuaGVpZ2h0ICsgb3k7CgkJCXRoYXQucG9zaXRpb24udG9wID0gb3AudG9wIC0gb3k7CgkJCXRoYXQucG9zaXRpb24ubGVmdCA9IG9wLmxlZnQgLSBveDsKCQl9Cgl9Cgp9KTsKCnZhciBudW0gPSBmdW5jdGlvbih2KSB7CglyZXR1cm4gcGFyc2VJbnQodiwgMTApIHx8IDA7Cn07Cgp2YXIgaXNOdW1iZXIgPSBmdW5jdGlvbih2YWx1ZSkgewoJcmV0dXJuICFpc05hTihwYXJzZUludCh2YWx1ZSwgMTApKTsKfTsKCn0pKGpRdWVyeSk7CihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkgewoKJC53aWRnZXQoInVpLnNlbGVjdGFibGUiLCAkLnVpLm1vdXNlLCB7Cgl2ZXJzaW9uOiAiMS45LjIiLAoJb3B0aW9uczogewoJCWFwcGVuZFRvOiAnYm9keScsCgkJYXV0b1JlZnJlc2g6IHRydWUsCgkJZGlzdGFuY2U6IDAsCgkJZmlsdGVyOiAnKicsCgkJdG9sZXJhbmNlOiAndG91Y2gnCgl9LAoJX2NyZWF0ZTogZnVuY3Rpb24oKSB7CgkJdmFyIHRoYXQgPSB0aGlzOwoKCQl0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoInVpLXNlbGVjdGFibGUiKTsKCgkJdGhpcy5kcmFnZ2VkID0gZmFsc2U7CgoJCS8vIGNhY2hlIHNlbGVjdGVlIGNoaWxkcmVuIGJhc2VkIG9uIGZpbHRlcgoJCXZhciBzZWxlY3RlZXM7CgkJdGhpcy5yZWZyZXNoID0gZnVuY3Rpb24oKSB7CgkJCXNlbGVjdGVlcyA9ICQodGhhdC5vcHRpb25zLmZpbHRlciwgdGhhdC5lbGVtZW50WzBdKTsKCQkJc2VsZWN0ZWVzLmFkZENsYXNzKCJ1aS1zZWxlY3RlZSIpOwoJCQlzZWxlY3RlZXMuZWFjaChmdW5jdGlvbigpIHsKCQkJCXZhciAkdGhpcyA9ICQodGhpcyk7CgkJCQl2YXIgcG9zID0gJHRoaXMub2Zmc2V0KCk7CgkJCQkkLmRhdGEodGhpcywgInNlbGVjdGFibGUtaXRlbSIsIHsKCQkJCQllbGVtZW50OiB0aGlzLAoJCQkJCSRlbGVtZW50OiAkdGhpcywKCQkJCQlsZWZ0OiBwb3MubGVmdCwKCQkJCQl0b3A6IHBvcy50b3AsCgkJCQkJcmlnaHQ6IHBvcy5sZWZ0ICsgJHRoaXMub3V0ZXJXaWR0aCgpLAoJCQkJCWJvdHRvbTogcG9zLnRvcCArICR0aGlzLm91dGVySGVpZ2h0KCksCgkJCQkJc3RhcnRzZWxlY3RlZDogZmFsc2UsCgkJCQkJc2VsZWN0ZWQ6ICR0aGlzLmhhc0NsYXNzKCd1aS1zZWxlY3RlZCcpLAoJCQkJCXNlbGVjdGluZzogJHRoaXMuaGFzQ2xhc3MoJ3VpLXNlbGVjdGluZycpLAoJCQkJCXVuc2VsZWN0aW5nOiAkdGhpcy5oYXNDbGFzcygndWktdW5zZWxlY3RpbmcnKQoJCQkJfSk7CgkJCX0pOwoJCX07CgkJdGhpcy5yZWZyZXNoKCk7CgoJCXRoaXMuc2VsZWN0ZWVzID0gc2VsZWN0ZWVzLmFkZENsYXNzKCJ1aS1zZWxlY3RlZSIpOwoKCQl0aGlzLl9tb3VzZUluaXQoKTsKCgkJdGhpcy5oZWxwZXIgPSAkKCI8ZGl2IGNsYXNzPSd1aS1zZWxlY3RhYmxlLWhlbHBlcic+PC9kaXY+Iik7Cgl9LAoKCV9kZXN0cm95OiBmdW5jdGlvbigpIHsKCQl0aGlzLnNlbGVjdGVlcwoJCQkucmVtb3ZlQ2xhc3MoInVpLXNlbGVjdGVlIikKCQkJLnJlbW92ZURhdGEoInNlbGVjdGFibGUtaXRlbSIpOwoJCXRoaXMuZWxlbWVudAoJCQkucmVtb3ZlQ2xhc3MoInVpLXNlbGVjdGFibGUgdWktc2VsZWN0YWJsZS1kaXNhYmxlZCIpOwoJCXRoaXMuX21vdXNlRGVzdHJveSgpOwoJfSwKCglfbW91c2VTdGFydDogZnVuY3Rpb24oZXZlbnQpIHsKCQl2YXIgdGhhdCA9IHRoaXM7CgoJCXRoaXMub3BvcyA9IFtldmVudC5wYWdlWCwgZXZlbnQucGFnZVldOwoKCQlpZiAodGhpcy5vcHRpb25zLmRpc2FibGVkKQoJCQlyZXR1cm47CgoJCXZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zOwoKCQl0aGlzLnNlbGVjdGVlcyA9ICQob3B0aW9ucy5maWx0ZXIsIHRoaXMuZWxlbWVudFswXSk7CgoJCXRoaXMuX3RyaWdnZXIoInN0YXJ0IiwgZXZlbnQpOwoKCQkkKG9wdGlvbnMuYXBwZW5kVG8pLmFwcGVuZCh0aGlzLmhlbHBlcik7CgkJLy8gcG9zaXRpb24gaGVscGVyIChsYXNzbykKCQl0aGlzLmhlbHBlci5jc3MoewoJCQkibGVmdCI6IGV2ZW50LmNsaWVudFgsCgkJCSJ0b3AiOiBldmVudC5jbGllbnRZLAoJCQkid2lkdGgiOiAwLAoJCQkiaGVpZ2h0IjogMAoJCX0pOwoKCQlpZiAob3B0aW9ucy5hdXRvUmVmcmVzaCkgewoJCQl0aGlzLnJlZnJlc2goKTsKCQl9CgoJCXRoaXMuc2VsZWN0ZWVzLmZpbHRlcignLnVpLXNlbGVjdGVkJykuZWFjaChmdW5jdGlvbigpIHsKCQkJdmFyIHNlbGVjdGVlID0gJC5kYXRhKHRoaXMsICJzZWxlY3RhYmxlLWl0ZW0iKTsKCQkJc2VsZWN0ZWUuc3RhcnRzZWxlY3RlZCA9IHRydWU7CgkJCWlmICghZXZlbnQubWV0YUtleSAmJiAhZXZlbnQuY3RybEtleSkgewoJCQkJc2VsZWN0ZWUuJGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ3VpLXNlbGVjdGVkJyk7CgkJCQlzZWxlY3RlZS5zZWxlY3RlZCA9IGZhbHNlOwoJCQkJc2VsZWN0ZWUuJGVsZW1lbnQuYWRkQ2xhc3MoJ3VpLXVuc2VsZWN0aW5nJyk7CgkJCQlzZWxlY3RlZS51bnNlbGVjdGluZyA9IHRydWU7CgkJCQkvLyBzZWxlY3RhYmxlIFVOU0VMRUNUSU5HIGNhbGxiYWNrCgkJCQl0aGF0Ll90cmlnZ2VyKCJ1bnNlbGVjdGluZyIsIGV2ZW50LCB7CgkJCQkJdW5zZWxlY3Rpbmc6IHNlbGVjdGVlLmVsZW1lbnQKCQkJCX0pOwoJCQl9CgkJfSk7CgoJCSQoZXZlbnQudGFyZ2V0KS5wYXJlbnRzKCkuYW5kU2VsZigpLmVhY2goZnVuY3Rpb24oKSB7CgkJCXZhciBzZWxlY3RlZSA9ICQuZGF0YSh0aGlzLCAic2VsZWN0YWJsZS1pdGVtIik7CgkJCWlmIChzZWxlY3RlZSkgewoJCQkJdmFyIGRvU2VsZWN0ID0gKCFldmVudC5tZXRhS2V5ICYmICFldmVudC5jdHJsS2V5KSB8fCAhc2VsZWN0ZWUuJGVsZW1lbnQuaGFzQ2xhc3MoJ3VpLXNlbGVjdGVkJyk7CgkJCQlzZWxlY3RlZS4kZWxlbWVudAoJCQkJCS5yZW1vdmVDbGFzcyhkb1NlbGVjdCA/ICJ1aS11bnNlbGVjdGluZyIgOiAidWktc2VsZWN0ZWQiKQoJCQkJCS5hZGRDbGFzcyhkb1NlbGVjdCA/ICJ1aS1zZWxlY3RpbmciIDogInVpLXVuc2VsZWN0aW5nIik7CgkJCQlzZWxlY3RlZS51bnNlbGVjdGluZyA9ICFkb1NlbGVjdDsKCQkJCXNlbGVjdGVlLnNlbGVjdGluZyA9IGRvU2VsZWN0OwoJCQkJc2VsZWN0ZWUuc2VsZWN0ZWQgPSBkb1NlbGVjdDsKCQkJCS8vIHNlbGVjdGFibGUgKFVOKVNFTEVDVElORyBjYWxsYmFjawoJCQkJaWYgKGRvU2VsZWN0KSB7CgkJCQkJdGhhdC5fdHJpZ2dlcigic2VsZWN0aW5nIiwgZXZlbnQsIHsKCQkJCQkJc2VsZWN0aW5nOiBzZWxlY3RlZS5lbGVtZW50CgkJCQkJfSk7CgkJCQl9IGVsc2UgewoJCQkJCXRoYXQuX3RyaWdnZXIoInVuc2VsZWN0aW5nIiwgZXZlbnQsIHsKCQkJCQkJdW5zZWxlY3Rpbmc6IHNlbGVjdGVlLmVsZW1lbnQKCQkJCQl9KTsKCQkJCX0KCQkJCXJldHVybiBmYWxzZTsKCQkJfQoJCX0pOwoKCX0sCgoJX21vdXNlRHJhZzogZnVuY3Rpb24oZXZlbnQpIHsKCQl2YXIgdGhhdCA9IHRoaXM7CgkJdGhpcy5kcmFnZ2VkID0gdHJ1ZTsKCgkJaWYgKHRoaXMub3B0aW9ucy5kaXNhYmxlZCkKCQkJcmV0dXJuOwoKCQl2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9uczsKCgkJdmFyIHgxID0gdGhpcy5vcG9zWzBdLCB5MSA9IHRoaXMub3Bvc1sxXSwgeDIgPSBldmVudC5wYWdlWCwgeTIgPSBldmVudC5wYWdlWTsKCQlpZiAoeDEgPiB4MikgeyB2YXIgdG1wID0geDI7IHgyID0geDE7IHgxID0gdG1wOyB9CgkJaWYgKHkxID4geTIpIHsgdmFyIHRtcCA9IHkyOyB5MiA9IHkxOyB5MSA9IHRtcDsgfQoJCXRoaXMuaGVscGVyLmNzcyh7bGVmdDogeDEsIHRvcDogeTEsIHdpZHRoOiB4Mi14MSwgaGVpZ2h0OiB5Mi15MX0pOwoKCQl0aGlzLnNlbGVjdGVlcy5lYWNoKGZ1bmN0aW9uKCkgewoJCQl2YXIgc2VsZWN0ZWUgPSAkLmRhdGEodGhpcywgInNlbGVjdGFibGUtaXRlbSIpOwoJCQkvL3ByZXZlbnQgaGVscGVyIGZyb20gYmVpbmcgc2VsZWN0ZWQgaWYgYXBwZW5kVG86IHNlbGVjdGFibGUKCQkJaWYgKCFzZWxlY3RlZSB8fCBzZWxlY3RlZS5lbGVtZW50ID09IHRoYXQuZWxlbWVudFswXSkKCQkJCXJldHVybjsKCQkJdmFyIGhpdCA9IGZhbHNlOwoJCQlpZiAob3B0aW9ucy50b2xlcmFuY2UgPT0gJ3RvdWNoJykgewoJCQkJaGl0ID0gKCAhKHNlbGVjdGVlLmxlZnQgPiB4MiB8fCBzZWxlY3RlZS5yaWdodCA8IHgxIHx8IHNlbGVjdGVlLnRvcCA+IHkyIHx8IHNlbGVjdGVlLmJvdHRvbSA8IHkxKSApOwoJCQl9IGVsc2UgaWYgKG9wdGlvbnMudG9sZXJhbmNlID09ICdmaXQnKSB7CgkJCQloaXQgPSAoc2VsZWN0ZWUubGVmdCA+IHgxICYmIHNlbGVjdGVlLnJpZ2h0IDwgeDIgJiYgc2VsZWN0ZWUudG9wID4geTEgJiYgc2VsZWN0ZWUuYm90dG9tIDwgeTIpOwoJCQl9CgoJCQlpZiAoaGl0KSB7CgkJCQkvLyBTRUxFQ1QKCQkJCWlmIChzZWxlY3RlZS5zZWxlY3RlZCkgewoJCQkJCXNlbGVjdGVlLiRlbGVtZW50LnJlbW92ZUNsYXNzKCd1aS1zZWxlY3RlZCcpOwoJCQkJCXNlbGVjdGVlLnNlbGVjdGVkID0gZmFsc2U7CgkJCQl9CgkJCQlpZiAoc2VsZWN0ZWUudW5zZWxlY3RpbmcpIHsKCQkJCQlzZWxlY3RlZS4kZWxlbWVudC5yZW1vdmVDbGFzcygndWktdW5zZWxlY3RpbmcnKTsKCQkJCQlzZWxlY3RlZS51bnNlbGVjdGluZyA9IGZhbHNlOwoJCQkJfQoJCQkJaWYgKCFzZWxlY3RlZS5zZWxlY3RpbmcpIHsKCQkJCQlzZWxlY3RlZS4kZWxlbWVudC5hZGRDbGFzcygndWktc2VsZWN0aW5nJyk7CgkJCQkJc2VsZWN0ZWUuc2VsZWN0aW5nID0gdHJ1ZTsKCQkJCQkvLyBzZWxlY3RhYmxlIFNFTEVDVElORyBjYWxsYmFjawoJCQkJCXRoYXQuX3RyaWdnZXIoInNlbGVjdGluZyIsIGV2ZW50LCB7CgkJCQkJCXNlbGVjdGluZzogc2VsZWN0ZWUuZWxlbWVudAoJCQkJCX0pOwoJCQkJfQoJCQl9IGVsc2UgewoJCQkJLy8gVU5TRUxFQ1QKCQkJCWlmIChzZWxlY3RlZS5zZWxlY3RpbmcpIHsKCQkJCQlpZiAoKGV2ZW50Lm1ldGFLZXkgfHwgZXZlbnQuY3RybEtleSkgJiYgc2VsZWN0ZWUuc3RhcnRzZWxlY3RlZCkgewoJCQkJCQlzZWxlY3RlZS4kZWxlbWVudC5yZW1vdmVDbGFzcygndWktc2VsZWN0aW5nJyk7CgkJCQkJCXNlbGVjdGVlLnNlbGVjdGluZyA9IGZhbHNlOwoJCQkJCQlzZWxlY3RlZS4kZWxlbWVudC5hZGRDbGFzcygndWktc2VsZWN0ZWQnKTsKCQkJCQkJc2VsZWN0ZWUuc2VsZWN0ZWQgPSB0cnVlOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXNlbGVjdGVlLiRlbGVtZW50LnJlbW92ZUNsYXNzKCd1aS1zZWxlY3RpbmcnKTsKCQkJCQkJc2VsZWN0ZWUuc2VsZWN0aW5nID0gZmFsc2U7CgkJCQkJCWlmIChzZWxlY3RlZS5zdGFydHNlbGVjdGVkKSB7CgkJCQkJCQlzZWxlY3RlZS4kZWxlbWVudC5hZGRDbGFzcygndWktdW5zZWxlY3RpbmcnKTsKCQkJCQkJCXNlbGVjdGVlLnVuc2VsZWN0aW5nID0gdHJ1ZTsKCQkJCQkJfQoJCQkJCQkvLyBzZWxlY3RhYmxlIFVOU0VMRUNUSU5HIGNhbGxiYWNrCgkJCQkJCXRoYXQuX3RyaWdnZXIoInVuc2VsZWN0aW5nIiwgZXZlbnQsIHsKCQkJCQkJCXVuc2VsZWN0aW5nOiBzZWxlY3RlZS5lbGVtZW50CgkJCQkJCX0pOwoJCQkJCX0KCQkJCX0KCQkJCWlmIChzZWxlY3RlZS5zZWxlY3RlZCkgewoJCQkJCWlmICghZXZlbnQubWV0YUtleSAmJiAhZXZlbnQuY3RybEtleSAmJiAhc2VsZWN0ZWUuc3RhcnRzZWxlY3RlZCkgewoJCQkJCQlzZWxlY3RlZS4kZWxlbWVudC5yZW1vdmVDbGFzcygndWktc2VsZWN0ZWQnKTsKCQkJCQkJc2VsZWN0ZWUuc2VsZWN0ZWQgPSBmYWxzZTsKCgkJCQkJCXNlbGVjdGVlLiRlbGVtZW50LmFkZENsYXNzKCd1aS11bnNlbGVjdGluZycpOwoJCQkJCQlzZWxlY3RlZS51bnNlbGVjdGluZyA9IHRydWU7CgkJCQkJCS8vIHNlbGVjdGFibGUgVU5TRUxFQ1RJTkcgY2FsbGJhY2sKCQkJCQkJdGhhdC5fdHJpZ2dlcigidW5zZWxlY3RpbmciLCBldmVudCwgewoJCQkJCQkJdW5zZWxlY3Rpbmc6IHNlbGVjdGVlLmVsZW1lbnQKCQkJCQkJfSk7CgkJCQkJfQoJCQkJfQoJCQl9CgkJfSk7CgoJCXJldHVybiBmYWxzZTsKCX0sCgoJX21vdXNlU3RvcDogZnVuY3Rpb24oZXZlbnQpIHsKCQl2YXIgdGhhdCA9IHRoaXM7CgoJCXRoaXMuZHJhZ2dlZCA9IGZhbHNlOwoKCQl2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9uczsKCgkJJCgnLnVpLXVuc2VsZWN0aW5nJywgdGhpcy5lbGVtZW50WzBdKS5lYWNoKGZ1bmN0aW9uKCkgewoJCQl2YXIgc2VsZWN0ZWUgPSAkLmRhdGEodGhpcywgInNlbGVjdGFibGUtaXRlbSIpOwoJCQlzZWxlY3RlZS4kZWxlbWVudC5yZW1vdmVDbGFzcygndWktdW5zZWxlY3RpbmcnKTsKCQkJc2VsZWN0ZWUudW5zZWxlY3RpbmcgPSBmYWxzZTsKCQkJc2VsZWN0ZWUuc3RhcnRzZWxlY3RlZCA9IGZhbHNlOwoJCQl0aGF0Ll90cmlnZ2VyKCJ1bnNlbGVjdGVkIiwgZXZlbnQsIHsKCQkJCXVuc2VsZWN0ZWQ6IHNlbGVjdGVlLmVsZW1lbnQKCQkJfSk7CgkJfSk7CgkJJCgnLnVpLXNlbGVjdGluZycsIHRoaXMuZWxlbWVudFswXSkuZWFjaChmdW5jdGlvbigpIHsKCQkJdmFyIHNlbGVjdGVlID0gJC5kYXRhKHRoaXMsICJzZWxlY3RhYmxlLWl0ZW0iKTsKCQkJc2VsZWN0ZWUuJGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ3VpLXNlbGVjdGluZycpLmFkZENsYXNzKCd1aS1zZWxlY3RlZCcpOwoJCQlzZWxlY3RlZS5zZWxlY3RpbmcgPSBmYWxzZTsKCQkJc2VsZWN0ZWUuc2VsZWN0ZWQgPSB0cnVlOwoJCQlzZWxlY3RlZS5zdGFydHNlbGVjdGVkID0gdHJ1ZTsKCQkJdGhhdC5fdHJpZ2dlcigic2VsZWN0ZWQiLCBldmVudCwgewoJCQkJc2VsZWN0ZWQ6IHNlbGVjdGVlLmVsZW1lbnQKCQkJfSk7CgkJfSk7CgkJdGhpcy5fdHJpZ2dlcigic3RvcCIsIGV2ZW50KTsKCgkJdGhpcy5oZWxwZXIucmVtb3ZlKCk7CgoJCXJldHVybiBmYWxzZTsKCX0KCn0pOwoKfSkoalF1ZXJ5KTsKKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7CgokLndpZGdldCgidWkuc29ydGFibGUiLCAkLnVpLm1vdXNlLCB7Cgl2ZXJzaW9uOiAiMS45LjIiLAoJd2lkZ2V0RXZlbnRQcmVmaXg6ICJzb3J0IiwKCXJlYWR5OiBmYWxzZSwKCW9wdGlvbnM6IHsKCQlhcHBlbmRUbzogInBhcmVudCIsCgkJYXhpczogZmFsc2UsCgkJY29ubmVjdFdpdGg6IGZhbHNlLAoJCWNvbnRhaW5tZW50OiBmYWxzZSwKCQljdXJzb3I6ICdhdXRvJywKCQljdXJzb3JBdDogZmFsc2UsCgkJZHJvcE9uRW1wdHk6IHRydWUsCgkJZm9yY2VQbGFjZWhvbGRlclNpemU6IGZhbHNlLAoJCWZvcmNlSGVscGVyU2l6ZTogZmFsc2UsCgkJZ3JpZDogZmFsc2UsCgkJaGFuZGxlOiBmYWxzZSwKCQloZWxwZXI6ICJvcmlnaW5hbCIsCgkJaXRlbXM6ICc+IConLAoJCW9wYWNpdHk6IGZhbHNlLAoJCXBsYWNlaG9sZGVyOiBmYWxzZSwKCQlyZXZlcnQ6IGZhbHNlLAoJCXNjcm9sbDogdHJ1ZSwKCQlzY3JvbGxTZW5zaXRpdml0eTogMjAsCgkJc2Nyb2xsU3BlZWQ6IDIwLAoJCXNjb3BlOiAiZGVmYXVsdCIsCgkJdG9sZXJhbmNlOiAiaW50ZXJzZWN0IiwKCQl6SW5kZXg6IDEwMDAKCX0sCglfY3JlYXRlOiBmdW5jdGlvbigpIHsKCgkJdmFyIG8gPSB0aGlzLm9wdGlvbnM7CgkJdGhpcy5jb250YWluZXJDYWNoZSA9IHt9OwoJCXRoaXMuZWxlbWVudC5hZGRDbGFzcygidWktc29ydGFibGUiKTsKCgkJLy9HZXQgdGhlIGl0ZW1zCgkJdGhpcy5yZWZyZXNoKCk7CgoJCS8vTGV0J3MgZGV0ZXJtaW5lIGlmIHRoZSBpdGVtcyBhcmUgYmVpbmcgZGlzcGxheWVkIGhvcml6b250YWxseQoJCXRoaXMuZmxvYXRpbmcgPSB0aGlzLml0ZW1zLmxlbmd0aCA/IG8uYXhpcyA9PT0gJ3gnIHx8ICgvbGVmdHxyaWdodC8pLnRlc3QodGhpcy5pdGVtc1swXS5pdGVtLmNzcygnZmxvYXQnKSkgfHwgKC9pbmxpbmV8dGFibGUtY2VsbC8pLnRlc3QodGhpcy5pdGVtc1swXS5pdGVtLmNzcygnZGlzcGxheScpKSA6IGZhbHNlOwoKCQkvL0xldCdzIGRldGVybWluZSB0aGUgcGFyZW50J3Mgb2Zmc2V0CgkJdGhpcy5vZmZzZXQgPSB0aGlzLmVsZW1lbnQub2Zmc2V0KCk7CgoJCS8vSW5pdGlhbGl6ZSBtb3VzZSBldmVudHMgZm9yIGludGVyYWN0aW9uCgkJdGhpcy5fbW91c2VJbml0KCk7CgoJCS8vV2UncmUgcmVhZHkgdG8gZ28KCQl0aGlzLnJlYWR5ID0gdHJ1ZQoKCX0sCgoJX2Rlc3Ryb3k6IGZ1bmN0aW9uKCkgewoJCXRoaXMuZWxlbWVudAoJCQkucmVtb3ZlQ2xhc3MoInVpLXNvcnRhYmxlIHVpLXNvcnRhYmxlLWRpc2FibGVkIik7CgkJdGhpcy5fbW91c2VEZXN0cm95KCk7CgoJCWZvciAoIHZhciBpID0gdGhpcy5pdGVtcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSApCgkJCXRoaXMuaXRlbXNbaV0uaXRlbS5yZW1vdmVEYXRhKHRoaXMud2lkZ2V0TmFtZSArICItaXRlbSIpOwoKCQlyZXR1cm4gdGhpczsKCX0sCgoJX3NldE9wdGlvbjogZnVuY3Rpb24oa2V5LCB2YWx1ZSl7CgkJaWYgKCBrZXkgPT09ICJkaXNhYmxlZCIgKSB7CgkJCXRoaXMub3B0aW9uc1sga2V5IF0gPSB2YWx1ZTsKCgkJCXRoaXMud2lkZ2V0KCkudG9nZ2xlQ2xhc3MoICJ1aS1zb3J0YWJsZS1kaXNhYmxlZCIsICEhdmFsdWUgKTsKCQl9IGVsc2UgewoJCQkvLyBEb24ndCBjYWxsIHdpZGdldCBiYXNlIF9zZXRPcHRpb24gZm9yIGRpc2FibGUgYXMgaXQgYWRkcyB1aS1zdGF0ZS1kaXNhYmxlZCBjbGFzcwoJCQkkLldpZGdldC5wcm90b3R5cGUuX3NldE9wdGlvbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwoJCX0KCX0sCgoJX21vdXNlQ2FwdHVyZTogZnVuY3Rpb24oZXZlbnQsIG92ZXJyaWRlSGFuZGxlKSB7CgkJdmFyIHRoYXQgPSB0aGlzOwoKCQlpZiAodGhpcy5yZXZlcnRpbmcpIHsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCgkJaWYodGhpcy5vcHRpb25zLmRpc2FibGVkIHx8IHRoaXMub3B0aW9ucy50eXBlID09ICdzdGF0aWMnKSByZXR1cm4gZmFsc2U7CgoJCS8vV2UgaGF2ZSB0byByZWZyZXNoIHRoZSBpdGVtcyBkYXRhIG9uY2UgZmlyc3QKCQl0aGlzLl9yZWZyZXNoSXRlbXMoZXZlbnQpOwoKCQkvL0ZpbmQgb3V0IGlmIHRoZSBjbGlja2VkIG5vZGUgKG9yIG9uZSBvZiBpdHMgcGFyZW50cykgaXMgYSBhY3R1YWwgaXRlbSBpbiB0aGlzLml0ZW1zCgkJdmFyIGN1cnJlbnRJdGVtID0gbnVsbCwgbm9kZXMgPSAkKGV2ZW50LnRhcmdldCkucGFyZW50cygpLmVhY2goZnVuY3Rpb24oKSB7CgkJCWlmKCQuZGF0YSh0aGlzLCB0aGF0LndpZGdldE5hbWUgKyAnLWl0ZW0nKSA9PSB0aGF0KSB7CgkJCQljdXJyZW50SXRlbSA9ICQodGhpcyk7CgkJCQlyZXR1cm4gZmFsc2U7CgkJCX0KCQl9KTsKCQlpZigkLmRhdGEoZXZlbnQudGFyZ2V0LCB0aGF0LndpZGdldE5hbWUgKyAnLWl0ZW0nKSA9PSB0aGF0KSBjdXJyZW50SXRlbSA9ICQoZXZlbnQudGFyZ2V0KTsKCgkJaWYoIWN1cnJlbnRJdGVtKSByZXR1cm4gZmFsc2U7CgkJaWYodGhpcy5vcHRpb25zLmhhbmRsZSAmJiAhb3ZlcnJpZGVIYW5kbGUpIHsKCQkJdmFyIHZhbGlkSGFuZGxlID0gZmFsc2U7CgoJCQkkKHRoaXMub3B0aW9ucy5oYW5kbGUsIGN1cnJlbnRJdGVtKS5maW5kKCIqIikuYW5kU2VsZigpLmVhY2goZnVuY3Rpb24oKSB7IGlmKHRoaXMgPT0gZXZlbnQudGFyZ2V0KSB2YWxpZEhhbmRsZSA9IHRydWU7IH0pOwoJCQlpZighdmFsaWRIYW5kbGUpIHJldHVybiBmYWxzZTsKCQl9CgoJCXRoaXMuY3VycmVudEl0ZW0gPSBjdXJyZW50SXRlbTsKCQl0aGlzLl9yZW1vdmVDdXJyZW50c0Zyb21JdGVtcygpOwoJCXJldHVybiB0cnVlOwoKCX0sCgoJX21vdXNlU3RhcnQ6IGZ1bmN0aW9uKGV2ZW50LCBvdmVycmlkZUhhbmRsZSwgbm9BY3RpdmF0aW9uKSB7CgoJCXZhciBvID0gdGhpcy5vcHRpb25zOwoJCXRoaXMuY3VycmVudENvbnRhaW5lciA9IHRoaXM7CgoJCS8vV2Ugb25seSBuZWVkIHRvIGNhbGwgcmVmcmVzaFBvc2l0aW9ucywgYmVjYXVzZSB0aGUgcmVmcmVzaEl0ZW1zIGNhbGwgaGFzIGJlZW4gbW92ZWQgdG8gbW91c2VDYXB0dXJlCgkJdGhpcy5yZWZyZXNoUG9zaXRpb25zKCk7CgoJCS8vQ3JlYXRlIGFuZCBhcHBlbmQgdGhlIHZpc2libGUgaGVscGVyCgkJdGhpcy5oZWxwZXIgPSB0aGlzLl9jcmVhdGVIZWxwZXIoZXZlbnQpOwoKCQkvL0NhY2hlIHRoZSBoZWxwZXIgc2l6ZQoJCXRoaXMuX2NhY2hlSGVscGVyUHJvcG9ydGlvbnMoKTsKCgkJLyoKCQkgKiAtIFBvc2l0aW9uIGdlbmVyYXRpb24gLQoJCSAqIFRoaXMgYmxvY2sgZ2VuZXJhdGVzIGV2ZXJ5dGhpbmcgcG9zaXRpb24gcmVsYXRlZCAtIGl0J3MgdGhlIGNvcmUgb2YgZHJhZ2dhYmxlcy4KCQkgKi8KCgkJLy9DYWNoZSB0aGUgbWFyZ2lucyBvZiB0aGUgb3JpZ2luYWwgZWxlbWVudAoJCXRoaXMuX2NhY2hlTWFyZ2lucygpOwoKCQkvL0dldCB0aGUgbmV4dCBzY3JvbGxpbmcgcGFyZW50CgkJdGhpcy5zY3JvbGxQYXJlbnQgPSB0aGlzLmhlbHBlci5zY3JvbGxQYXJlbnQoKTsKCgkJLy9UaGUgZWxlbWVudCdzIGFic29sdXRlIHBvc2l0aW9uIG9uIHRoZSBwYWdlIG1pbnVzIG1hcmdpbnMKCQl0aGlzLm9mZnNldCA9IHRoaXMuY3VycmVudEl0ZW0ub2Zmc2V0KCk7CgkJdGhpcy5vZmZzZXQgPSB7CgkJCXRvcDogdGhpcy5vZmZzZXQudG9wIC0gdGhpcy5tYXJnaW5zLnRvcCwKCQkJbGVmdDogdGhpcy5vZmZzZXQubGVmdCAtIHRoaXMubWFyZ2lucy5sZWZ0CgkJfTsKCgkJJC5leHRlbmQodGhpcy5vZmZzZXQsIHsKCQkJY2xpY2s6IHsgLy9XaGVyZSB0aGUgY2xpY2sgaGFwcGVuZWQsIHJlbGF0aXZlIHRvIHRoZSBlbGVtZW50CgkJCQlsZWZ0OiBldmVudC5wYWdlWCAtIHRoaXMub2Zmc2V0LmxlZnQsCgkJCQl0b3A6IGV2ZW50LnBhZ2VZIC0gdGhpcy5vZmZzZXQudG9wCgkJCX0sCgkJCXBhcmVudDogdGhpcy5fZ2V0UGFyZW50T2Zmc2V0KCksCgkJCXJlbGF0aXZlOiB0aGlzLl9nZXRSZWxhdGl2ZU9mZnNldCgpIC8vVGhpcyBpcyBhIHJlbGF0aXZlIHRvIGFic29sdXRlIHBvc2l0aW9uIG1pbnVzIHRoZSBhY3R1YWwgcG9zaXRpb24gY2FsY3VsYXRpb24gLSBvbmx5IHVzZWQgZm9yIHJlbGF0aXZlIHBvc2l0aW9uZWQgaGVscGVyCgkJfSk7CgoJCS8vIE9ubHkgYWZ0ZXIgd2UgZ290IHRoZSBvZmZzZXQsIHdlIGNhbiBjaGFuZ2UgdGhlIGhlbHBlcidzIHBvc2l0aW9uIHRvIGFic29sdXRlCgkJLy8gVE9ETzogU3RpbGwgbmVlZCB0byBmaWd1cmUgb3V0IGEgd2F5IHRvIG1ha2UgcmVsYXRpdmUgc29ydGluZyBwb3NzaWJsZQoJCXRoaXMuaGVscGVyLmNzcygicG9zaXRpb24iLCAiYWJzb2x1dGUiKTsKCQl0aGlzLmNzc1Bvc2l0aW9uID0gdGhpcy5oZWxwZXIuY3NzKCJwb3NpdGlvbiIpOwoKCQkvL0dlbmVyYXRlIHRoZSBvcmlnaW5hbCBwb3NpdGlvbgoJCXRoaXMub3JpZ2luYWxQb3NpdGlvbiA9IHRoaXMuX2dlbmVyYXRlUG9zaXRpb24oZXZlbnQpOwoJCXRoaXMub3JpZ2luYWxQYWdlWCA9IGV2ZW50LnBhZ2VYOwoJCXRoaXMub3JpZ2luYWxQYWdlWSA9IGV2ZW50LnBhZ2VZOwoKCQkvL0FkanVzdCB0aGUgbW91c2Ugb2Zmc2V0IHJlbGF0aXZlIHRvIHRoZSBoZWxwZXIgaWYgJ2N1cnNvckF0JyBpcyBzdXBwbGllZAoJCShvLmN1cnNvckF0ICYmIHRoaXMuX2FkanVzdE9mZnNldEZyb21IZWxwZXIoby5jdXJzb3JBdCkpOwoKCQkvL0NhY2hlIHRoZSBmb3JtZXIgRE9NIHBvc2l0aW9uCgkJdGhpcy5kb21Qb3NpdGlvbiA9IHsgcHJldjogdGhpcy5jdXJyZW50SXRlbS5wcmV2KClbMF0sIHBhcmVudDogdGhpcy5jdXJyZW50SXRlbS5wYXJlbnQoKVswXSB9OwoKCQkvL0lmIHRoZSBoZWxwZXIgaXMgbm90IHRoZSBvcmlnaW5hbCwgaGlkZSB0aGUgb3JpZ2luYWwgc28gaXQncyBub3QgcGxheWluZyBhbnkgcm9sZSBkdXJpbmcgdGhlIGRyYWcsIHdvbid0IGNhdXNlIGFueXRoaW5nIGJhZCB0aGlzIHdheQoJCWlmKHRoaXMuaGVscGVyWzBdICE9IHRoaXMuY3VycmVudEl0ZW1bMF0pIHsKCQkJdGhpcy5jdXJyZW50SXRlbS5oaWRlKCk7CgkJfQoKCQkvL0NyZWF0ZSB0aGUgcGxhY2Vob2xkZXIKCQl0aGlzLl9jcmVhdGVQbGFjZWhvbGRlcigpOwoKCQkvL1NldCBhIGNvbnRhaW5tZW50IGlmIGdpdmVuIGluIHRoZSBvcHRpb25zCgkJaWYoby5jb250YWlubWVudCkKCQkJdGhpcy5fc2V0Q29udGFpbm1lbnQoKTsKCgkJaWYoby5jdXJzb3IpIHsgLy8gY3Vyc29yIG9wdGlvbgoJCQlpZiAoJCgnYm9keScpLmNzcygiY3Vyc29yIikpIHRoaXMuX3N0b3JlZEN1cnNvciA9ICQoJ2JvZHknKS5jc3MoImN1cnNvciIpOwoJCQkkKCdib2R5JykuY3NzKCJjdXJzb3IiLCBvLmN1cnNvcik7CgkJfQoKCQlpZihvLm9wYWNpdHkpIHsgLy8gb3BhY2l0eSBvcHRpb24KCQkJaWYgKHRoaXMuaGVscGVyLmNzcygib3BhY2l0eSIpKSB0aGlzLl9zdG9yZWRPcGFjaXR5ID0gdGhpcy5oZWxwZXIuY3NzKCJvcGFjaXR5Iik7CgkJCXRoaXMuaGVscGVyLmNzcygib3BhY2l0eSIsIG8ub3BhY2l0eSk7CgkJfQoKCQlpZihvLnpJbmRleCkgeyAvLyB6SW5kZXggb3B0aW9uCgkJCWlmICh0aGlzLmhlbHBlci5jc3MoInpJbmRleCIpKSB0aGlzLl9zdG9yZWRaSW5kZXggPSB0aGlzLmhlbHBlci5jc3MoInpJbmRleCIpOwoJCQl0aGlzLmhlbHBlci5jc3MoInpJbmRleCIsIG8uekluZGV4KTsKCQl9CgoJCS8vUHJlcGFyZSBzY3JvbGxpbmcKCQlpZih0aGlzLnNjcm9sbFBhcmVudFswXSAhPSBkb2N1bWVudCAmJiB0aGlzLnNjcm9sbFBhcmVudFswXS50YWdOYW1lICE9ICdIVE1MJykKCQkJdGhpcy5vdmVyZmxvd09mZnNldCA9IHRoaXMuc2Nyb2xsUGFyZW50Lm9mZnNldCgpOwoKCQkvL0NhbGwgY2FsbGJhY2tzCgkJdGhpcy5fdHJpZ2dlcigic3RhcnQiLCBldmVudCwgdGhpcy5fdWlIYXNoKCkpOwoKCQkvL1JlY2FjaGUgdGhlIGhlbHBlciBzaXplCgkJaWYoIXRoaXMuX3ByZXNlcnZlSGVscGVyUHJvcG9ydGlvbnMpCgkJCXRoaXMuX2NhY2hlSGVscGVyUHJvcG9ydGlvbnMoKTsKCgoJCS8vUG9zdCAnYWN0aXZhdGUnIGV2ZW50cyB0byBwb3NzaWJsZSBjb250YWluZXJzCgkJaWYoIW5vQWN0aXZhdGlvbikgewoJCQkgZm9yICh2YXIgaSA9IHRoaXMuY29udGFpbmVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgeyB0aGlzLmNvbnRhaW5lcnNbaV0uX3RyaWdnZXIoImFjdGl2YXRlIiwgZXZlbnQsIHRoaXMuX3VpSGFzaCh0aGlzKSk7IH0KCQl9CgoJCS8vUHJlcGFyZSBwb3NzaWJsZSBkcm9wcGFibGVzCgkJaWYoJC51aS5kZG1hbmFnZXIpCgkJCSQudWkuZGRtYW5hZ2VyLmN1cnJlbnQgPSB0aGlzOwoKCQlpZiAoJC51aS5kZG1hbmFnZXIgJiYgIW8uZHJvcEJlaGF2aW91cikKCQkJJC51aS5kZG1hbmFnZXIucHJlcGFyZU9mZnNldHModGhpcywgZXZlbnQpOwoKCQl0aGlzLmRyYWdnaW5nID0gdHJ1ZTsKCgkJdGhpcy5oZWxwZXIuYWRkQ2xhc3MoInVpLXNvcnRhYmxlLWhlbHBlciIpOwoJCXRoaXMuX21vdXNlRHJhZyhldmVudCk7IC8vRXhlY3V0ZSB0aGUgZHJhZyBvbmNlIC0gdGhpcyBjYXVzZXMgdGhlIGhlbHBlciBub3QgdG8gYmUgdmlzaWJsZSBiZWZvcmUgZ2V0dGluZyBpdHMgY29ycmVjdCBwb3NpdGlvbgoJCXJldHVybiB0cnVlOwoKCX0sCgoJX21vdXNlRHJhZzogZnVuY3Rpb24oZXZlbnQpIHsKCgkJLy9Db21wdXRlIHRoZSBoZWxwZXJzIHBvc2l0aW9uCgkJdGhpcy5wb3NpdGlvbiA9IHRoaXMuX2dlbmVyYXRlUG9zaXRpb24oZXZlbnQpOwoJCXRoaXMucG9zaXRpb25BYnMgPSB0aGlzLl9jb252ZXJ0UG9zaXRpb25UbygiYWJzb2x1dGUiKTsKCgkJaWYgKCF0aGlzLmxhc3RQb3NpdGlvbkFicykgewoJCQl0aGlzLmxhc3RQb3NpdGlvbkFicyA9IHRoaXMucG9zaXRpb25BYnM7CgkJfQoKCQkvL0RvIHNjcm9sbGluZwoJCWlmKHRoaXMub3B0aW9ucy5zY3JvbGwpIHsKCQkJdmFyIG8gPSB0aGlzLm9wdGlvbnMsIHNjcm9sbGVkID0gZmFsc2U7CgkJCWlmKHRoaXMuc2Nyb2xsUGFyZW50WzBdICE9IGRvY3VtZW50ICYmIHRoaXMuc2Nyb2xsUGFyZW50WzBdLnRhZ05hbWUgIT0gJ0hUTUwnKSB7CgoJCQkJaWYoKHRoaXMub3ZlcmZsb3dPZmZzZXQudG9wICsgdGhpcy5zY3JvbGxQYXJlbnRbMF0ub2Zmc2V0SGVpZ2h0KSAtIGV2ZW50LnBhZ2VZIDwgby5zY3JvbGxTZW5zaXRpdml0eSkKCQkJCQl0aGlzLnNjcm9sbFBhcmVudFswXS5zY3JvbGxUb3AgPSBzY3JvbGxlZCA9IHRoaXMuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbFRvcCArIG8uc2Nyb2xsU3BlZWQ7CgkJCQllbHNlIGlmKGV2ZW50LnBhZ2VZIC0gdGhpcy5vdmVyZmxvd09mZnNldC50b3AgPCBvLnNjcm9sbFNlbnNpdGl2aXR5KQoJCQkJCXRoaXMuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbFRvcCA9IHNjcm9sbGVkID0gdGhpcy5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsVG9wIC0gby5zY3JvbGxTcGVlZDsKCgkJCQlpZigodGhpcy5vdmVyZmxvd09mZnNldC5sZWZ0ICsgdGhpcy5zY3JvbGxQYXJlbnRbMF0ub2Zmc2V0V2lkdGgpIC0gZXZlbnQucGFnZVggPCBvLnNjcm9sbFNlbnNpdGl2aXR5KQoJCQkJCXRoaXMuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbExlZnQgPSBzY3JvbGxlZCA9IHRoaXMuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbExlZnQgKyBvLnNjcm9sbFNwZWVkOwoJCQkJZWxzZSBpZihldmVudC5wYWdlWCAtIHRoaXMub3ZlcmZsb3dPZmZzZXQubGVmdCA8IG8uc2Nyb2xsU2Vuc2l0aXZpdHkpCgkJCQkJdGhpcy5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsTGVmdCA9IHNjcm9sbGVkID0gdGhpcy5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsTGVmdCAtIG8uc2Nyb2xsU3BlZWQ7CgoJCQl9IGVsc2UgewoKCQkJCWlmKGV2ZW50LnBhZ2VZIC0gJChkb2N1bWVudCkuc2Nyb2xsVG9wKCkgPCBvLnNjcm9sbFNlbnNpdGl2aXR5KQoJCQkJCXNjcm9sbGVkID0gJChkb2N1bWVudCkuc2Nyb2xsVG9wKCQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpIC0gby5zY3JvbGxTcGVlZCk7CgkJCQllbHNlIGlmKCQod2luZG93KS5oZWlnaHQoKSAtIChldmVudC5wYWdlWSAtICQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpKSA8IG8uc2Nyb2xsU2Vuc2l0aXZpdHkpCgkJCQkJc2Nyb2xsZWQgPSAkKGRvY3VtZW50KS5zY3JvbGxUb3AoJChkb2N1bWVudCkuc2Nyb2xsVG9wKCkgKyBvLnNjcm9sbFNwZWVkKTsKCgkJCQlpZihldmVudC5wYWdlWCAtICQoZG9jdW1lbnQpLnNjcm9sbExlZnQoKSA8IG8uc2Nyb2xsU2Vuc2l0aXZpdHkpCgkJCQkJc2Nyb2xsZWQgPSAkKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCQoZG9jdW1lbnQpLnNjcm9sbExlZnQoKSAtIG8uc2Nyb2xsU3BlZWQpOwoJCQkJZWxzZSBpZigkKHdpbmRvdykud2lkdGgoKSAtIChldmVudC5wYWdlWCAtICQoZG9jdW1lbnQpLnNjcm9sbExlZnQoKSkgPCBvLnNjcm9sbFNlbnNpdGl2aXR5KQoJCQkJCXNjcm9sbGVkID0gJChkb2N1bWVudCkuc2Nyb2xsTGVmdCgkKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCkgKyBvLnNjcm9sbFNwZWVkKTsKCgkJCX0KCgkJCWlmKHNjcm9sbGVkICE9PSBmYWxzZSAmJiAkLnVpLmRkbWFuYWdlciAmJiAhby5kcm9wQmVoYXZpb3VyKQoJCQkJJC51aS5kZG1hbmFnZXIucHJlcGFyZU9mZnNldHModGhpcywgZXZlbnQpOwoJCX0KCgkJLy9SZWdlbmVyYXRlIHRoZSBhYnNvbHV0ZSBwb3NpdGlvbiB1c2VkIGZvciBwb3NpdGlvbiBjaGVja3MKCQl0aGlzLnBvc2l0aW9uQWJzID0gdGhpcy5fY29udmVydFBvc2l0aW9uVG8oImFic29sdXRlIik7CgoJCS8vU2V0IHRoZSBoZWxwZXIgcG9zaXRpb24KCQlpZighdGhpcy5vcHRpb25zLmF4aXMgfHwgdGhpcy5vcHRpb25zLmF4aXMgIT0gInkiKSB0aGlzLmhlbHBlclswXS5zdHlsZS5sZWZ0ID0gdGhpcy5wb3NpdGlvbi5sZWZ0KydweCc7CgkJaWYoIXRoaXMub3B0aW9ucy5heGlzIHx8IHRoaXMub3B0aW9ucy5heGlzICE9ICJ4IikgdGhpcy5oZWxwZXJbMF0uc3R5bGUudG9wID0gdGhpcy5wb3NpdGlvbi50b3ArJ3B4JzsKCgkJLy9SZWFycmFuZ2UKCQlmb3IgKHZhciBpID0gdGhpcy5pdGVtcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewoKCQkJLy9DYWNoZSB2YXJpYWJsZXMgYW5kIGludGVyc2VjdGlvbiwgY29udGludWUgaWYgbm8gaW50ZXJzZWN0aW9uCgkJCXZhciBpdGVtID0gdGhpcy5pdGVtc1tpXSwgaXRlbUVsZW1lbnQgPSBpdGVtLml0ZW1bMF0sIGludGVyc2VjdGlvbiA9IHRoaXMuX2ludGVyc2VjdHNXaXRoUG9pbnRlcihpdGVtKTsKCQkJaWYgKCFpbnRlcnNlY3Rpb24pIGNvbnRpbnVlOwoKCQkJLy8gT25seSBwdXQgdGhlIHBsYWNlaG9sZGVyIGluc2lkZSB0aGUgY3VycmVudCBDb250YWluZXIsIHNraXAgYWxsCgkJCS8vIGl0ZW1zIGZvcm0gb3RoZXIgY29udGFpbmVycy4gVGhpcyB3b3JrcyBiZWNhdXNlIHdoZW4gbW92aW5nCgkJCS8vIGFuIGl0ZW0gZnJvbSBvbmUgY29udGFpbmVyIHRvIGFub3RoZXIgdGhlCgkJCS8vIGN1cnJlbnRDb250YWluZXIgaXMgc3dpdGNoZWQgYmVmb3JlIHRoZSBwbGFjZWhvbGRlciBpcyBtb3ZlZC4KCQkJLy8KCQkJLy8gV2l0aG91dCB0aGlzIG1vdmluZyBpdGVtcyBpbiAic3ViLXNvcnRhYmxlcyIgY2FuIGNhdXNlIHRoZSBwbGFjZWhvbGRlciB0byBqaXR0ZXIKCQkJLy8gYmVldHdlZW4gdGhlIG91dGVyIGFuZCBpbm5lciBjb250YWluZXIuCgkJCWlmIChpdGVtLmluc3RhbmNlICE9PSB0aGlzLmN1cnJlbnRDb250YWluZXIpIGNvbnRpbnVlOwoKCQkJaWYgKGl0ZW1FbGVtZW50ICE9IHRoaXMuY3VycmVudEl0ZW1bMF0gLy9jYW5ub3QgaW50ZXJzZWN0IHdpdGggaXRzZWxmCgkJCQkmJgl0aGlzLnBsYWNlaG9sZGVyW2ludGVyc2VjdGlvbiA9PSAxID8gIm5leHQiIDogInByZXYiXSgpWzBdICE9IGl0ZW1FbGVtZW50IC8vbm8gdXNlbGVzcyBhY3Rpb25zIHRoYXQgaGF2ZSBiZWVuIGRvbmUgYmVmb3JlCgkJCQkmJgkhJC5jb250YWlucyh0aGlzLnBsYWNlaG9sZGVyWzBdLCBpdGVtRWxlbWVudCkgLy9ubyBhY3Rpb24gaWYgdGhlIGl0ZW0gbW92ZWQgaXMgdGhlIHBhcmVudCBvZiB0aGUgaXRlbSBjaGVja2VkCgkJCQkmJiAodGhpcy5vcHRpb25zLnR5cGUgPT0gJ3NlbWktZHluYW1pYycgPyAhJC5jb250YWlucyh0aGlzLmVsZW1lbnRbMF0sIGl0ZW1FbGVtZW50KSA6IHRydWUpCgkJCQkvLyYmIGl0ZW1FbGVtZW50LnBhcmVudE5vZGUgPT0gdGhpcy5wbGFjZWhvbGRlclswXS5wYXJlbnROb2RlIC8vIG9ubHkgcmVhcnJhbmdlIGl0ZW1zIHdpdGhpbiB0aGUgc2FtZSBjb250YWluZXIKCQkJKSB7CgoJCQkJdGhpcy5kaXJlY3Rpb24gPSBpbnRlcnNlY3Rpb24gPT0gMSA/ICJkb3duIiA6ICJ1cCI7CgoJCQkJaWYgKHRoaXMub3B0aW9ucy50b2xlcmFuY2UgPT0gInBvaW50ZXIiIHx8IHRoaXMuX2ludGVyc2VjdHNXaXRoU2lkZXMoaXRlbSkpIHsKCQkJCQl0aGlzLl9yZWFycmFuZ2UoZXZlbnQsIGl0ZW0pOwoJCQkJfSBlbHNlIHsKCQkJCQlicmVhazsKCQkJCX0KCgkJCQl0aGlzLl90cmlnZ2VyKCJjaGFuZ2UiLCBldmVudCwgdGhpcy5fdWlIYXNoKCkpOwoJCQkJYnJlYWs7CgkJCX0KCQl9CgoJCS8vUG9zdCBldmVudHMgdG8gY29udGFpbmVycwoJCXRoaXMuX2NvbnRhY3RDb250YWluZXJzKGV2ZW50KTsKCgkJLy9JbnRlcmNvbm5lY3Qgd2l0aCBkcm9wcGFibGVzCgkJaWYoJC51aS5kZG1hbmFnZXIpICQudWkuZGRtYW5hZ2VyLmRyYWcodGhpcywgZXZlbnQpOwoKCQkvL0NhbGwgY2FsbGJhY2tzCgkJdGhpcy5fdHJpZ2dlcignc29ydCcsIGV2ZW50LCB0aGlzLl91aUhhc2goKSk7CgoJCXRoaXMubGFzdFBvc2l0aW9uQWJzID0gdGhpcy5wb3NpdGlvbkFiczsKCQlyZXR1cm4gZmFsc2U7CgoJfSwKCglfbW91c2VTdG9wOiBmdW5jdGlvbihldmVudCwgbm9Qcm9wYWdhdGlvbikgewoKCQlpZighZXZlbnQpIHJldHVybjsKCgkJLy9JZiB3ZSBhcmUgdXNpbmcgZHJvcHBhYmxlcywgaW5mb3JtIHRoZSBtYW5hZ2VyIGFib3V0IHRoZSBkcm9wCgkJaWYgKCQudWkuZGRtYW5hZ2VyICYmICF0aGlzLm9wdGlvbnMuZHJvcEJlaGF2aW91cikKCQkJJC51aS5kZG1hbmFnZXIuZHJvcCh0aGlzLCBldmVudCk7CgoJCWlmKHRoaXMub3B0aW9ucy5yZXZlcnQpIHsKCQkJdmFyIHRoYXQgPSB0aGlzOwoJCQl2YXIgY3VyID0gdGhpcy5wbGFjZWhvbGRlci5vZmZzZXQoKTsKCgkJCXRoaXMucmV2ZXJ0aW5nID0gdHJ1ZTsKCgkJCSQodGhpcy5oZWxwZXIpLmFuaW1hdGUoewoJCQkJbGVmdDogY3VyLmxlZnQgLSB0aGlzLm9mZnNldC5wYXJlbnQubGVmdCAtIHRoaXMubWFyZ2lucy5sZWZ0ICsgKHRoaXMub2Zmc2V0UGFyZW50WzBdID09IGRvY3VtZW50LmJvZHkgPyAwIDogdGhpcy5vZmZzZXRQYXJlbnRbMF0uc2Nyb2xsTGVmdCksCgkJCQl0b3A6IGN1ci50b3AgLSB0aGlzLm9mZnNldC5wYXJlbnQudG9wIC0gdGhpcy5tYXJnaW5zLnRvcCArICh0aGlzLm9mZnNldFBhcmVudFswXSA9PSBkb2N1bWVudC5ib2R5ID8gMCA6IHRoaXMub2Zmc2V0UGFyZW50WzBdLnNjcm9sbFRvcCkKCQkJfSwgcGFyc2VJbnQodGhpcy5vcHRpb25zLnJldmVydCwgMTApIHx8IDUwMCwgZnVuY3Rpb24oKSB7CgkJCQl0aGF0Ll9jbGVhcihldmVudCk7CgkJCX0pOwoJCX0gZWxzZSB7CgkJCXRoaXMuX2NsZWFyKGV2ZW50LCBub1Byb3BhZ2F0aW9uKTsKCQl9CgoJCXJldHVybiBmYWxzZTsKCgl9LAoKCWNhbmNlbDogZnVuY3Rpb24oKSB7CgoJCWlmKHRoaXMuZHJhZ2dpbmcpIHsKCgkJCXRoaXMuX21vdXNlVXAoeyB0YXJnZXQ6IG51bGwgfSk7CgoJCQlpZih0aGlzLm9wdGlvbnMuaGVscGVyID09ICJvcmlnaW5hbCIpCgkJCQl0aGlzLmN1cnJlbnRJdGVtLmNzcyh0aGlzLl9zdG9yZWRDU1MpLnJlbW92ZUNsYXNzKCJ1aS1zb3J0YWJsZS1oZWxwZXIiKTsKCQkJZWxzZQoJCQkJdGhpcy5jdXJyZW50SXRlbS5zaG93KCk7CgoJCQkvL1Bvc3QgZGVhY3RpdmF0aW5nIGV2ZW50cyB0byBjb250YWluZXJzCgkJCWZvciAodmFyIGkgPSB0aGlzLmNvbnRhaW5lcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pewoJCQkJdGhpcy5jb250YWluZXJzW2ldLl90cmlnZ2VyKCJkZWFjdGl2YXRlIiwgbnVsbCwgdGhpcy5fdWlIYXNoKHRoaXMpKTsKCQkJCWlmKHRoaXMuY29udGFpbmVyc1tpXS5jb250YWluZXJDYWNoZS5vdmVyKSB7CgkJCQkJdGhpcy5jb250YWluZXJzW2ldLl90cmlnZ2VyKCJvdXQiLCBudWxsLCB0aGlzLl91aUhhc2godGhpcykpOwoJCQkJCXRoaXMuY29udGFpbmVyc1tpXS5jb250YWluZXJDYWNoZS5vdmVyID0gMDsKCQkJCX0KCQkJfQoKCQl9CgoJCWlmICh0aGlzLnBsYWNlaG9sZGVyKSB7CgkJCS8vJCh0aGlzLnBsYWNlaG9sZGVyWzBdKS5yZW1vdmUoKTsgd291bGQgaGF2ZSBiZWVuIHRoZSBqUXVlcnkgd2F5IC0gdW5mb3J0dW5hdGVseSwgaXQgdW5iaW5kcyBBTEwgZXZlbnRzIGZyb20gdGhlIG9yaWdpbmFsIG5vZGUhCgkJCWlmKHRoaXMucGxhY2Vob2xkZXJbMF0ucGFyZW50Tm9kZSkgdGhpcy5wbGFjZWhvbGRlclswXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMucGxhY2Vob2xkZXJbMF0pOwoJCQlpZih0aGlzLm9wdGlvbnMuaGVscGVyICE9ICJvcmlnaW5hbCIgJiYgdGhpcy5oZWxwZXIgJiYgdGhpcy5oZWxwZXJbMF0ucGFyZW50Tm9kZSkgdGhpcy5oZWxwZXIucmVtb3ZlKCk7CgoJCQkkLmV4dGVuZCh0aGlzLCB7CgkJCQloZWxwZXI6IG51bGwsCgkJCQlkcmFnZ2luZzogZmFsc2UsCgkJCQlyZXZlcnRpbmc6IGZhbHNlLAoJCQkJX25vRmluYWxTb3J0OiBudWxsCgkJCX0pOwoKCQkJaWYodGhpcy5kb21Qb3NpdGlvbi5wcmV2KSB7CgkJCQkkKHRoaXMuZG9tUG9zaXRpb24ucHJldikuYWZ0ZXIodGhpcy5jdXJyZW50SXRlbSk7CgkJCX0gZWxzZSB7CgkJCQkkKHRoaXMuZG9tUG9zaXRpb24ucGFyZW50KS5wcmVwZW5kKHRoaXMuY3VycmVudEl0ZW0pOwoJCQl9CgkJfQoKCQlyZXR1cm4gdGhpczsKCgl9LAoKCXNlcmlhbGl6ZTogZnVuY3Rpb24obykgewoKCQl2YXIgaXRlbXMgPSB0aGlzLl9nZXRJdGVtc0FzalF1ZXJ5KG8gJiYgby5jb25uZWN0ZWQpOwoJCXZhciBzdHIgPSBbXTsgbyA9IG8gfHwge307CgoJCSQoaXRlbXMpLmVhY2goZnVuY3Rpb24oKSB7CgkJCXZhciByZXMgPSAoJChvLml0ZW0gfHwgdGhpcykuYXR0cihvLmF0dHJpYnV0ZSB8fCAnaWQnKSB8fCAnJykubWF0Y2goby5leHByZXNzaW9uIHx8ICgvKC4rKVstPV9dKC4rKS8pKTsKCQkJaWYocmVzKSBzdHIucHVzaCgoby5rZXkgfHwgcmVzWzFdKydbXScpKyc9Jysoby5rZXkgJiYgby5leHByZXNzaW9uID8gcmVzWzFdIDogcmVzWzJdKSk7CgkJfSk7CgoJCWlmKCFzdHIubGVuZ3RoICYmIG8ua2V5KSB7CgkJCXN0ci5wdXNoKG8ua2V5ICsgJz0nKTsKCQl9CgoJCXJldHVybiBzdHIuam9pbignJicpOwoKCX0sCgoJdG9BcnJheTogZnVuY3Rpb24obykgewoKCQl2YXIgaXRlbXMgPSB0aGlzLl9nZXRJdGVtc0FzalF1ZXJ5KG8gJiYgby5jb25uZWN0ZWQpOwoJCXZhciByZXQgPSBbXTsgbyA9IG8gfHwge307CgoJCWl0ZW1zLmVhY2goZnVuY3Rpb24oKSB7IHJldC5wdXNoKCQoby5pdGVtIHx8IHRoaXMpLmF0dHIoby5hdHRyaWJ1dGUgfHwgJ2lkJykgfHwgJycpOyB9KTsKCQlyZXR1cm4gcmV0OwoKCX0sCgoJLyogQmUgY2FyZWZ1bCB3aXRoIHRoZSBmb2xsb3dpbmcgY29yZSBmdW5jdGlvbnMgKi8KCV9pbnRlcnNlY3RzV2l0aDogZnVuY3Rpb24oaXRlbSkgewoKCQl2YXIgeDEgPSB0aGlzLnBvc2l0aW9uQWJzLmxlZnQsCgkJCXgyID0geDEgKyB0aGlzLmhlbHBlclByb3BvcnRpb25zLndpZHRoLAoJCQl5MSA9IHRoaXMucG9zaXRpb25BYnMudG9wLAoJCQl5MiA9IHkxICsgdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQ7CgoJCXZhciBsID0gaXRlbS5sZWZ0LAoJCQlyID0gbCArIGl0ZW0ud2lkdGgsCgkJCXQgPSBpdGVtLnRvcCwKCQkJYiA9IHQgKyBpdGVtLmhlaWdodDsKCgkJdmFyIGR5Q2xpY2sgPSB0aGlzLm9mZnNldC5jbGljay50b3AsCgkJCWR4Q2xpY2sgPSB0aGlzLm9mZnNldC5jbGljay5sZWZ0OwoKCQl2YXIgaXNPdmVyRWxlbWVudCA9ICh5MSArIGR5Q2xpY2spID4gdCAmJiAoeTEgKyBkeUNsaWNrKSA8IGIgJiYgKHgxICsgZHhDbGljaykgPiBsICYmICh4MSArIGR4Q2xpY2spIDwgcjsKCgkJaWYoCSAgIHRoaXMub3B0aW9ucy50b2xlcmFuY2UgPT0gInBvaW50ZXIiCgkJCXx8IHRoaXMub3B0aW9ucy5mb3JjZVBvaW50ZXJGb3JDb250YWluZXJzCgkJCXx8ICh0aGlzLm9wdGlvbnMudG9sZXJhbmNlICE9ICJwb2ludGVyIiAmJiB0aGlzLmhlbHBlclByb3BvcnRpb25zW3RoaXMuZmxvYXRpbmcgPyAnd2lkdGgnIDogJ2hlaWdodCddID4gaXRlbVt0aGlzLmZsb2F0aW5nID8gJ3dpZHRoJyA6ICdoZWlnaHQnXSkKCQkpIHsKCQkJcmV0dXJuIGlzT3ZlckVsZW1lbnQ7CgkJfSBlbHNlIHsKCgkJCXJldHVybiAobCA8IHgxICsgKHRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGggLyAyKSAvLyBSaWdodCBIYWxmCgkJCQkmJiB4MiAtICh0aGlzLmhlbHBlclByb3BvcnRpb25zLndpZHRoIC8gMikgPCByIC8vIExlZnQgSGFsZgoJCQkJJiYgdCA8IHkxICsgKHRoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0IC8gMikgLy8gQm90dG9tIEhhbGYKCQkJCSYmIHkyIC0gKHRoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0IC8gMikgPCBiICk7IC8vIFRvcCBIYWxmCgoJCX0KCX0sCgoJX2ludGVyc2VjdHNXaXRoUG9pbnRlcjogZnVuY3Rpb24oaXRlbSkgewoKCQl2YXIgaXNPdmVyRWxlbWVudEhlaWdodCA9ICh0aGlzLm9wdGlvbnMuYXhpcyA9PT0gJ3gnKSB8fCAkLnVpLmlzT3ZlckF4aXModGhpcy5wb3NpdGlvbkFicy50b3AgKyB0aGlzLm9mZnNldC5jbGljay50b3AsIGl0ZW0udG9wLCBpdGVtLmhlaWdodCksCgkJCWlzT3ZlckVsZW1lbnRXaWR0aCA9ICh0aGlzLm9wdGlvbnMuYXhpcyA9PT0gJ3knKSB8fCAkLnVpLmlzT3ZlckF4aXModGhpcy5wb3NpdGlvbkFicy5sZWZ0ICsgdGhpcy5vZmZzZXQuY2xpY2subGVmdCwgaXRlbS5sZWZ0LCBpdGVtLndpZHRoKSwKCQkJaXNPdmVyRWxlbWVudCA9IGlzT3ZlckVsZW1lbnRIZWlnaHQgJiYgaXNPdmVyRWxlbWVudFdpZHRoLAoJCQl2ZXJ0aWNhbERpcmVjdGlvbiA9IHRoaXMuX2dldERyYWdWZXJ0aWNhbERpcmVjdGlvbigpLAoJCQlob3Jpem9udGFsRGlyZWN0aW9uID0gdGhpcy5fZ2V0RHJhZ0hvcml6b250YWxEaXJlY3Rpb24oKTsKCgkJaWYgKCFpc092ZXJFbGVtZW50KQoJCQlyZXR1cm4gZmFsc2U7CgoJCXJldHVybiB0aGlzLmZsb2F0aW5nID8KCQkJKCAoKGhvcml6b250YWxEaXJlY3Rpb24gJiYgaG9yaXpvbnRhbERpcmVjdGlvbiA9PSAicmlnaHQiKSB8fCB2ZXJ0aWNhbERpcmVjdGlvbiA9PSAiZG93biIpID8gMiA6IDEgKQoJCQk6ICggdmVydGljYWxEaXJlY3Rpb24gJiYgKHZlcnRpY2FsRGlyZWN0aW9uID09ICJkb3duIiA/IDIgOiAxKSApOwoKCX0sCgoJX2ludGVyc2VjdHNXaXRoU2lkZXM6IGZ1bmN0aW9uKGl0ZW0pIHsKCgkJdmFyIGlzT3ZlckJvdHRvbUhhbGYgPSAkLnVpLmlzT3ZlckF4aXModGhpcy5wb3NpdGlvbkFicy50b3AgKyB0aGlzLm9mZnNldC5jbGljay50b3AsIGl0ZW0udG9wICsgKGl0ZW0uaGVpZ2h0LzIpLCBpdGVtLmhlaWdodCksCgkJCWlzT3ZlclJpZ2h0SGFsZiA9ICQudWkuaXNPdmVyQXhpcyh0aGlzLnBvc2l0aW9uQWJzLmxlZnQgKyB0aGlzLm9mZnNldC5jbGljay5sZWZ0LCBpdGVtLmxlZnQgKyAoaXRlbS53aWR0aC8yKSwgaXRlbS53aWR0aCksCgkJCXZlcnRpY2FsRGlyZWN0aW9uID0gdGhpcy5fZ2V0RHJhZ1ZlcnRpY2FsRGlyZWN0aW9uKCksCgkJCWhvcml6b250YWxEaXJlY3Rpb24gPSB0aGlzLl9nZXREcmFnSG9yaXpvbnRhbERpcmVjdGlvbigpOwoKCQlpZiAodGhpcy5mbG9hdGluZyAmJiBob3Jpem9udGFsRGlyZWN0aW9uKSB7CgkJCXJldHVybiAoKGhvcml6b250YWxEaXJlY3Rpb24gPT0gInJpZ2h0IiAmJiBpc092ZXJSaWdodEhhbGYpIHx8IChob3Jpem9udGFsRGlyZWN0aW9uID09ICJsZWZ0IiAmJiAhaXNPdmVyUmlnaHRIYWxmKSk7CgkJfSBlbHNlIHsKCQkJcmV0dXJuIHZlcnRpY2FsRGlyZWN0aW9uICYmICgodmVydGljYWxEaXJlY3Rpb24gPT0gImRvd24iICYmIGlzT3ZlckJvdHRvbUhhbGYpIHx8ICh2ZXJ0aWNhbERpcmVjdGlvbiA9PSAidXAiICYmICFpc092ZXJCb3R0b21IYWxmKSk7CgkJfQoKCX0sCgoJX2dldERyYWdWZXJ0aWNhbERpcmVjdGlvbjogZnVuY3Rpb24oKSB7CgkJdmFyIGRlbHRhID0gdGhpcy5wb3NpdGlvbkFicy50b3AgLSB0aGlzLmxhc3RQb3NpdGlvbkFicy50b3A7CgkJcmV0dXJuIGRlbHRhICE9IDAgJiYgKGRlbHRhID4gMCA/ICJkb3duIiA6ICJ1cCIpOwoJfSwKCglfZ2V0RHJhZ0hvcml6b250YWxEaXJlY3Rpb246IGZ1bmN0aW9uKCkgewoJCXZhciBkZWx0YSA9IHRoaXMucG9zaXRpb25BYnMubGVmdCAtIHRoaXMubGFzdFBvc2l0aW9uQWJzLmxlZnQ7CgkJcmV0dXJuIGRlbHRhICE9IDAgJiYgKGRlbHRhID4gMCA/ICJyaWdodCIgOiAibGVmdCIpOwoJfSwKCglyZWZyZXNoOiBmdW5jdGlvbihldmVudCkgewoJCXRoaXMuX3JlZnJlc2hJdGVtcyhldmVudCk7CgkJdGhpcy5yZWZyZXNoUG9zaXRpb25zKCk7CgkJcmV0dXJuIHRoaXM7Cgl9LAoKCV9jb25uZWN0V2l0aDogZnVuY3Rpb24oKSB7CgkJdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7CgkJcmV0dXJuIG9wdGlvbnMuY29ubmVjdFdpdGguY29uc3RydWN0b3IgPT0gU3RyaW5nCgkJCT8gW29wdGlvbnMuY29ubmVjdFdpdGhdCgkJCTogb3B0aW9ucy5jb25uZWN0V2l0aDsKCX0sCgoJX2dldEl0ZW1zQXNqUXVlcnk6IGZ1bmN0aW9uKGNvbm5lY3RlZCkgewoKCQl2YXIgaXRlbXMgPSBbXTsKCQl2YXIgcXVlcmllcyA9IFtdOwoJCXZhciBjb25uZWN0V2l0aCA9IHRoaXMuX2Nvbm5lY3RXaXRoKCk7CgoJCWlmKGNvbm5lY3RXaXRoICYmIGNvbm5lY3RlZCkgewoJCQlmb3IgKHZhciBpID0gY29ubmVjdFdpdGgubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pewoJCQkJdmFyIGN1ciA9ICQoY29ubmVjdFdpdGhbaV0pOwoJCQkJZm9yICh2YXIgaiA9IGN1ci5sZW5ndGggLSAxOyBqID49IDA7IGotLSl7CgkJCQkJdmFyIGluc3QgPSAkLmRhdGEoY3VyW2pdLCB0aGlzLndpZGdldE5hbWUpOwoJCQkJCWlmKGluc3QgJiYgaW5zdCAhPSB0aGlzICYmICFpbnN0Lm9wdGlvbnMuZGlzYWJsZWQpIHsKCQkJCQkJcXVlcmllcy5wdXNoKFskLmlzRnVuY3Rpb24oaW5zdC5vcHRpb25zLml0ZW1zKSA/IGluc3Qub3B0aW9ucy5pdGVtcy5jYWxsKGluc3QuZWxlbWVudCkgOiAkKGluc3Qub3B0aW9ucy5pdGVtcywgaW5zdC5lbGVtZW50KS5ub3QoIi51aS1zb3J0YWJsZS1oZWxwZXIiKS5ub3QoJy51aS1zb3J0YWJsZS1wbGFjZWhvbGRlcicpLCBpbnN0XSk7CgkJCQkJfQoJCQkJfTsKCQkJfTsKCQl9CgoJCXF1ZXJpZXMucHVzaChbJC5pc0Z1bmN0aW9uKHRoaXMub3B0aW9ucy5pdGVtcykgPyB0aGlzLm9wdGlvbnMuaXRlbXMuY2FsbCh0aGlzLmVsZW1lbnQsIG51bGwsIHsgb3B0aW9uczogdGhpcy5vcHRpb25zLCBpdGVtOiB0aGlzLmN1cnJlbnRJdGVtIH0pIDogJCh0aGlzLm9wdGlvbnMuaXRlbXMsIHRoaXMuZWxlbWVudCkubm90KCIudWktc29ydGFibGUtaGVscGVyIikubm90KCcudWktc29ydGFibGUtcGxhY2Vob2xkZXInKSwgdGhpc10pOwoKCQlmb3IgKHZhciBpID0gcXVlcmllcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSl7CgkJCXF1ZXJpZXNbaV1bMF0uZWFjaChmdW5jdGlvbigpIHsKCQkJCWl0ZW1zLnB1c2godGhpcyk7CgkJCX0pOwoJCX07CgoJCXJldHVybiAkKGl0ZW1zKTsKCgl9LAoKCV9yZW1vdmVDdXJyZW50c0Zyb21JdGVtczogZnVuY3Rpb24oKSB7CgoJCXZhciBsaXN0ID0gdGhpcy5jdXJyZW50SXRlbS5maW5kKCI6ZGF0YSgiICsgdGhpcy53aWRnZXROYW1lICsgIi1pdGVtKSIpOwoKCQl0aGlzLml0ZW1zID0gJC5ncmVwKHRoaXMuaXRlbXMsIGZ1bmN0aW9uIChpdGVtKSB7CgkJCWZvciAodmFyIGo9MDsgaiA8IGxpc3QubGVuZ3RoOyBqKyspIHsKCQkJCWlmKGxpc3Rbal0gPT0gaXRlbS5pdGVtWzBdKQoJCQkJCXJldHVybiBmYWxzZTsKCQkJfTsKCQkJcmV0dXJuIHRydWU7CgkJfSk7CgoJfSwKCglfcmVmcmVzaEl0ZW1zOiBmdW5jdGlvbihldmVudCkgewoKCQl0aGlzLml0ZW1zID0gW107CgkJdGhpcy5jb250YWluZXJzID0gW3RoaXNdOwoJCXZhciBpdGVtcyA9IHRoaXMuaXRlbXM7CgkJdmFyIHF1ZXJpZXMgPSBbWyQuaXNGdW5jdGlvbih0aGlzLm9wdGlvbnMuaXRlbXMpID8gdGhpcy5vcHRpb25zLml0ZW1zLmNhbGwodGhpcy5lbGVtZW50WzBdLCBldmVudCwgeyBpdGVtOiB0aGlzLmN1cnJlbnRJdGVtIH0pIDogJCh0aGlzLm9wdGlvbnMuaXRlbXMsIHRoaXMuZWxlbWVudCksIHRoaXNdXTsKCQl2YXIgY29ubmVjdFdpdGggPSB0aGlzLl9jb25uZWN0V2l0aCgpOwoKCQlpZihjb25uZWN0V2l0aCAmJiB0aGlzLnJlYWR5KSB7IC8vU2hvdWxkbid0IGJlIHJ1biB0aGUgZmlyc3QgdGltZSB0aHJvdWdoIGR1ZSB0byBtYXNzaXZlIHNsb3ctZG93bgoJCQlmb3IgKHZhciBpID0gY29ubmVjdFdpdGgubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pewoJCQkJdmFyIGN1ciA9ICQoY29ubmVjdFdpdGhbaV0pOwoJCQkJZm9yICh2YXIgaiA9IGN1ci5sZW5ndGggLSAxOyBqID49IDA7IGotLSl7CgkJCQkJdmFyIGluc3QgPSAkLmRhdGEoY3VyW2pdLCB0aGlzLndpZGdldE5hbWUpOwoJCQkJCWlmKGluc3QgJiYgaW5zdCAhPSB0aGlzICYmICFpbnN0Lm9wdGlvbnMuZGlzYWJsZWQpIHsKCQkJCQkJcXVlcmllcy5wdXNoKFskLmlzRnVuY3Rpb24oaW5zdC5vcHRpb25zLml0ZW1zKSA/IGluc3Qub3B0aW9ucy5pdGVtcy5jYWxsKGluc3QuZWxlbWVudFswXSwgZXZlbnQsIHsgaXRlbTogdGhpcy5jdXJyZW50SXRlbSB9KSA6ICQoaW5zdC5vcHRpb25zLml0ZW1zLCBpbnN0LmVsZW1lbnQpLCBpbnN0XSk7CgkJCQkJCXRoaXMuY29udGFpbmVycy5wdXNoKGluc3QpOwoJCQkJCX0KCQkJCX07CgkJCX07CgkJfQoKCQlmb3IgKHZhciBpID0gcXVlcmllcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewoJCQl2YXIgdGFyZ2V0RGF0YSA9IHF1ZXJpZXNbaV1bMV07CgkJCXZhciBfcXVlcmllcyA9IHF1ZXJpZXNbaV1bMF07CgoJCQlmb3IgKHZhciBqPTAsIHF1ZXJpZXNMZW5ndGggPSBfcXVlcmllcy5sZW5ndGg7IGogPCBxdWVyaWVzTGVuZ3RoOyBqKyspIHsKCQkJCXZhciBpdGVtID0gJChfcXVlcmllc1tqXSk7CgoJCQkJaXRlbS5kYXRhKHRoaXMud2lkZ2V0TmFtZSArICctaXRlbScsIHRhcmdldERhdGEpOyAvLyBEYXRhIGZvciB0YXJnZXQgY2hlY2tpbmcgKG1vdXNlIG1hbmFnZXIpCgoJCQkJaXRlbXMucHVzaCh7CgkJCQkJaXRlbTogaXRlbSwKCQkJCQlpbnN0YW5jZTogdGFyZ2V0RGF0YSwKCQkJCQl3aWR0aDogMCwgaGVpZ2h0OiAwLAoJCQkJCWxlZnQ6IDAsIHRvcDogMAoJCQkJfSk7CgkJCX07CgkJfTsKCgl9LAoKCXJlZnJlc2hQb3NpdGlvbnM6IGZ1bmN0aW9uKGZhc3QpIHsKCgkJLy9UaGlzIGhhcyB0byBiZSByZWRvbmUgYmVjYXVzZSBkdWUgdG8gdGhlIGl0ZW0gYmVpbmcgbW92ZWQgb3V0L2ludG8gdGhlIG9mZnNldFBhcmVudCwgdGhlIG9mZnNldFBhcmVudCdzIHBvc2l0aW9uIHdpbGwgY2hhbmdlCgkJaWYodGhpcy5vZmZzZXRQYXJlbnQgJiYgdGhpcy5oZWxwZXIpIHsKCQkJdGhpcy5vZmZzZXQucGFyZW50ID0gdGhpcy5fZ2V0UGFyZW50T2Zmc2V0KCk7CgkJfQoKCQlmb3IgKHZhciBpID0gdGhpcy5pdGVtcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSl7CgkJCXZhciBpdGVtID0gdGhpcy5pdGVtc1tpXTsKCgkJCS8vV2UgaWdub3JlIGNhbGN1bGF0aW5nIHBvc2l0aW9ucyBvZiBhbGwgY29ubmVjdGVkIGNvbnRhaW5lcnMgd2hlbiB3ZSdyZSBub3Qgb3ZlciB0aGVtCgkJCWlmKGl0ZW0uaW5zdGFuY2UgIT0gdGhpcy5jdXJyZW50Q29udGFpbmVyICYmIHRoaXMuY3VycmVudENvbnRhaW5lciAmJiBpdGVtLml0ZW1bMF0gIT0gdGhpcy5jdXJyZW50SXRlbVswXSkKCQkJCWNvbnRpbnVlOwoKCQkJdmFyIHQgPSB0aGlzLm9wdGlvbnMudG9sZXJhbmNlRWxlbWVudCA/ICQodGhpcy5vcHRpb25zLnRvbGVyYW5jZUVsZW1lbnQsIGl0ZW0uaXRlbSkgOiBpdGVtLml0ZW07CgoJCQlpZiAoIWZhc3QpIHsKCQkJCWl0ZW0ud2lkdGggPSB0Lm91dGVyV2lkdGgoKTsKCQkJCWl0ZW0uaGVpZ2h0ID0gdC5vdXRlckhlaWdodCgpOwoJCQl9CgoJCQl2YXIgcCA9IHQub2Zmc2V0KCk7CgkJCWl0ZW0ubGVmdCA9IHAubGVmdDsKCQkJaXRlbS50b3AgPSBwLnRvcDsKCQl9OwoKCQlpZih0aGlzLm9wdGlvbnMuY3VzdG9tICYmIHRoaXMub3B0aW9ucy5jdXN0b20ucmVmcmVzaENvbnRhaW5lcnMpIHsKCQkJdGhpcy5vcHRpb25zLmN1c3RvbS5yZWZyZXNoQ29udGFpbmVycy5jYWxsKHRoaXMpOwoJCX0gZWxzZSB7CgkJCWZvciAodmFyIGkgPSB0aGlzLmNvbnRhaW5lcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pewoJCQkJdmFyIHAgPSB0aGlzLmNvbnRhaW5lcnNbaV0uZWxlbWVudC5vZmZzZXQoKTsKCQkJCXRoaXMuY29udGFpbmVyc1tpXS5jb250YWluZXJDYWNoZS5sZWZ0ID0gcC5sZWZ0OwoJCQkJdGhpcy5jb250YWluZXJzW2ldLmNvbnRhaW5lckNhY2hlLnRvcCA9IHAudG9wOwoJCQkJdGhpcy5jb250YWluZXJzW2ldLmNvbnRhaW5lckNhY2hlLndpZHRoCT0gdGhpcy5jb250YWluZXJzW2ldLmVsZW1lbnQub3V0ZXJXaWR0aCgpOwoJCQkJdGhpcy5jb250YWluZXJzW2ldLmNvbnRhaW5lckNhY2hlLmhlaWdodCA9IHRoaXMuY29udGFpbmVyc1tpXS5lbGVtZW50Lm91dGVySGVpZ2h0KCk7CgkJCX07CgkJfQoKCQlyZXR1cm4gdGhpczsKCX0sCgoJX2NyZWF0ZVBsYWNlaG9sZGVyOiBmdW5jdGlvbih0aGF0KSB7CgkJdGhhdCA9IHRoYXQgfHwgdGhpczsKCQl2YXIgbyA9IHRoYXQub3B0aW9uczsKCgkJaWYoIW8ucGxhY2Vob2xkZXIgfHwgby5wbGFjZWhvbGRlci5jb25zdHJ1Y3RvciA9PSBTdHJpbmcpIHsKCQkJdmFyIGNsYXNzTmFtZSA9IG8ucGxhY2Vob2xkZXI7CgkJCW8ucGxhY2Vob2xkZXIgPSB7CgkJCQllbGVtZW50OiBmdW5jdGlvbigpIHsKCgkJCQkJdmFyIGVsID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRoYXQuY3VycmVudEl0ZW1bMF0ubm9kZU5hbWUpKQoJCQkJCQkuYWRkQ2xhc3MoY2xhc3NOYW1lIHx8IHRoYXQuY3VycmVudEl0ZW1bMF0uY2xhc3NOYW1lKyIgdWktc29ydGFibGUtcGxhY2Vob2xkZXIiKQoJCQkJCQkucmVtb3ZlQ2xhc3MoInVpLXNvcnRhYmxlLWhlbHBlciIpWzBdOwoKCQkJCQlpZighY2xhc3NOYW1lKQoJCQkJCQllbC5zdHlsZS52aXNpYmlsaXR5ID0gImhpZGRlbiI7CgoJCQkJCXJldHVybiBlbDsKCQkJCX0sCgkJCQl1cGRhdGU6IGZ1bmN0aW9uKGNvbnRhaW5lciwgcCkgewoKCQkJCQkvLyAxLiBJZiBhIGNsYXNzTmFtZSBpcyBzZXQgYXMgJ3BsYWNlaG9sZGVyIG9wdGlvbiwgd2UgZG9uJ3QgZm9yY2Ugc2l6ZXMgLSB0aGUgY2xhc3MgaXMgcmVzcG9uc2libGUgZm9yIHRoYXQKCQkJCQkvLyAyLiBUaGUgb3B0aW9uICdmb3JjZVBsYWNlaG9sZGVyU2l6ZSBjYW4gYmUgZW5hYmxlZCB0byBmb3JjZSBpdCBldmVuIGlmIGEgY2xhc3MgbmFtZSBpcyBzcGVjaWZpZWQKCQkJCQlpZihjbGFzc05hbWUgJiYgIW8uZm9yY2VQbGFjZWhvbGRlclNpemUpIHJldHVybjsKCgkJCQkJLy9JZiB0aGUgZWxlbWVudCBkb2Vzbid0IGhhdmUgYSBhY3R1YWwgaGVpZ2h0IGJ5IGl0c2VsZiAod2l0aG91dCBzdHlsZXMgY29taW5nIGZyb20gYSBzdHlsZXNoZWV0KSwgaXQgcmVjZWl2ZXMgdGhlIGlubGluZSBoZWlnaHQgZnJvbSB0aGUgZHJhZ2dlZCBpdGVtCgkJCQkJaWYoIXAuaGVpZ2h0KCkpIHsgcC5oZWlnaHQodGhhdC5jdXJyZW50SXRlbS5pbm5lckhlaWdodCgpIC0gcGFyc2VJbnQodGhhdC5jdXJyZW50SXRlbS5jc3MoJ3BhZGRpbmdUb3AnKXx8MCwgMTApIC0gcGFyc2VJbnQodGhhdC5jdXJyZW50SXRlbS5jc3MoJ3BhZGRpbmdCb3R0b20nKXx8MCwgMTApKTsgfTsKCQkJCQlpZighcC53aWR0aCgpKSB7IHAud2lkdGgodGhhdC5jdXJyZW50SXRlbS5pbm5lcldpZHRoKCkgLSBwYXJzZUludCh0aGF0LmN1cnJlbnRJdGVtLmNzcygncGFkZGluZ0xlZnQnKXx8MCwgMTApIC0gcGFyc2VJbnQodGhhdC5jdXJyZW50SXRlbS5jc3MoJ3BhZGRpbmdSaWdodCcpfHwwLCAxMCkpOyB9OwoJCQkJfQoJCQl9OwoJCX0KCgkJLy9DcmVhdGUgdGhlIHBsYWNlaG9sZGVyCgkJdGhhdC5wbGFjZWhvbGRlciA9ICQoby5wbGFjZWhvbGRlci5lbGVtZW50LmNhbGwodGhhdC5lbGVtZW50LCB0aGF0LmN1cnJlbnRJdGVtKSk7CgoJCS8vQXBwZW5kIGl0IGFmdGVyIHRoZSBhY3R1YWwgY3VycmVudCBpdGVtCgkJdGhhdC5jdXJyZW50SXRlbS5hZnRlcih0aGF0LnBsYWNlaG9sZGVyKTsKCgkJLy9VcGRhdGUgdGhlIHNpemUgb2YgdGhlIHBsYWNlaG9sZGVyIChUT0RPOiBMb2dpYyB0byBmdXp6eSwgc2VlIGxpbmUgMzE2LzMxNykKCQlvLnBsYWNlaG9sZGVyLnVwZGF0ZSh0aGF0LCB0aGF0LnBsYWNlaG9sZGVyKTsKCgl9LAoKCV9jb250YWN0Q29udGFpbmVyczogZnVuY3Rpb24oZXZlbnQpIHsKCgkJLy8gZ2V0IGlubmVybW9zdCBjb250YWluZXIgdGhhdCBpbnRlcnNlY3RzIHdpdGggaXRlbQoJCXZhciBpbm5lcm1vc3RDb250YWluZXIgPSBudWxsLCBpbm5lcm1vc3RJbmRleCA9IG51bGw7CgoKCQlmb3IgKHZhciBpID0gdGhpcy5jb250YWluZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKXsKCgkJCS8vIG5ldmVyIGNvbnNpZGVyIGEgY29udGFpbmVyIHRoYXQncyBsb2NhdGVkIHdpdGhpbiB0aGUgaXRlbSBpdHNlbGYKCQkJaWYoJC5jb250YWlucyh0aGlzLmN1cnJlbnRJdGVtWzBdLCB0aGlzLmNvbnRhaW5lcnNbaV0uZWxlbWVudFswXSkpCgkJCQljb250aW51ZTsKCgkJCWlmKHRoaXMuX2ludGVyc2VjdHNXaXRoKHRoaXMuY29udGFpbmVyc1tpXS5jb250YWluZXJDYWNoZSkpIHsKCgkJCQkvLyBpZiB3ZSd2ZSBhbHJlYWR5IGZvdW5kIGEgY29udGFpbmVyIGFuZCBpdCdzIG1vcmUgImlubmVyIiB0aGFuIHRoaXMsIHRoZW4gY29udGludWUKCQkJCWlmKGlubmVybW9zdENvbnRhaW5lciAmJiAkLmNvbnRhaW5zKHRoaXMuY29udGFpbmVyc1tpXS5lbGVtZW50WzBdLCBpbm5lcm1vc3RDb250YWluZXIuZWxlbWVudFswXSkpCgkJCQkJY29udGludWU7CgoJCQkJaW5uZXJtb3N0Q29udGFpbmVyID0gdGhpcy5jb250YWluZXJzW2ldOwoJCQkJaW5uZXJtb3N0SW5kZXggPSBpOwoKCQkJfSBlbHNlIHsKCQkJCS8vIGNvbnRhaW5lciBkb2Vzbid0IGludGVyc2VjdC4gdHJpZ2dlciAib3V0IiBldmVudCBpZiBuZWNlc3NhcnkKCQkJCWlmKHRoaXMuY29udGFpbmVyc1tpXS5jb250YWluZXJDYWNoZS5vdmVyKSB7CgkJCQkJdGhpcy5jb250YWluZXJzW2ldLl90cmlnZ2VyKCJvdXQiLCBldmVudCwgdGhpcy5fdWlIYXNoKHRoaXMpKTsKCQkJCQl0aGlzLmNvbnRhaW5lcnNbaV0uY29udGFpbmVyQ2FjaGUub3ZlciA9IDA7CgkJCQl9CgkJCX0KCgkJfQoKCQkvLyBpZiBubyBpbnRlcnNlY3RpbmcgY29udGFpbmVycyBmb3VuZCwgcmV0dXJuCgkJaWYoIWlubmVybW9zdENvbnRhaW5lcikgcmV0dXJuOwoKCQkvLyBtb3ZlIHRoZSBpdGVtIGludG8gdGhlIGNvbnRhaW5lciBpZiBpdCdzIG5vdCB0aGVyZSBhbHJlYWR5CgkJaWYodGhpcy5jb250YWluZXJzLmxlbmd0aCA9PT0gMSkgewoJCQl0aGlzLmNvbnRhaW5lcnNbaW5uZXJtb3N0SW5kZXhdLl90cmlnZ2VyKCJvdmVyIiwgZXZlbnQsIHRoaXMuX3VpSGFzaCh0aGlzKSk7CgkJCXRoaXMuY29udGFpbmVyc1tpbm5lcm1vc3RJbmRleF0uY29udGFpbmVyQ2FjaGUub3ZlciA9IDE7CgkJfSBlbHNlIHsKCgkJCS8vV2hlbiBlbnRlcmluZyBhIG5ldyBjb250YWluZXIsIHdlIHdpbGwgZmluZCB0aGUgaXRlbSB3aXRoIHRoZSBsZWFzdCBkaXN0YW5jZSBhbmQgYXBwZW5kIG91ciBpdGVtIG5lYXIgaXQKCQkJdmFyIGRpc3QgPSAxMDAwMDsgdmFyIGl0ZW1XaXRoTGVhc3REaXN0YW5jZSA9IG51bGw7CgkJCXZhciBwb3NQcm9wZXJ0eSA9IHRoaXMuY29udGFpbmVyc1tpbm5lcm1vc3RJbmRleF0uZmxvYXRpbmcgPyAnbGVmdCcgOiAndG9wJzsKCQkJdmFyIHNpemVQcm9wZXJ0eSA9IHRoaXMuY29udGFpbmVyc1tpbm5lcm1vc3RJbmRleF0uZmxvYXRpbmcgPyAnd2lkdGgnIDogJ2hlaWdodCc7CgkJCXZhciBiYXNlID0gdGhpcy5wb3NpdGlvbkFic1twb3NQcm9wZXJ0eV0gKyB0aGlzLm9mZnNldC5jbGlja1twb3NQcm9wZXJ0eV07CgkJCWZvciAodmFyIGogPSB0aGlzLml0ZW1zLmxlbmd0aCAtIDE7IGogPj0gMDsgai0tKSB7CgkJCQlpZighJC5jb250YWlucyh0aGlzLmNvbnRhaW5lcnNbaW5uZXJtb3N0SW5kZXhdLmVsZW1lbnRbMF0sIHRoaXMuaXRlbXNbal0uaXRlbVswXSkpIGNvbnRpbnVlOwoJCQkJaWYodGhpcy5pdGVtc1tqXS5pdGVtWzBdID09IHRoaXMuY3VycmVudEl0ZW1bMF0pIGNvbnRpbnVlOwoJCQkJdmFyIGN1ciA9IHRoaXMuaXRlbXNbal0uaXRlbS5vZmZzZXQoKVtwb3NQcm9wZXJ0eV07CgkJCQl2YXIgbmVhckJvdHRvbSA9IGZhbHNlOwoJCQkJaWYoTWF0aC5hYnMoY3VyIC0gYmFzZSkgPiBNYXRoLmFicyhjdXIgKyB0aGlzLml0ZW1zW2pdW3NpemVQcm9wZXJ0eV0gLSBiYXNlKSl7CgkJCQkJbmVhckJvdHRvbSA9IHRydWU7CgkJCQkJY3VyICs9IHRoaXMuaXRlbXNbal1bc2l6ZVByb3BlcnR5XTsKCQkJCX0KCgkJCQlpZihNYXRoLmFicyhjdXIgLSBiYXNlKSA8IGRpc3QpIHsKCQkJCQlkaXN0ID0gTWF0aC5hYnMoY3VyIC0gYmFzZSk7IGl0ZW1XaXRoTGVhc3REaXN0YW5jZSA9IHRoaXMuaXRlbXNbal07CgkJCQkJdGhpcy5kaXJlY3Rpb24gPSBuZWFyQm90dG9tID8gInVwIjogImRvd24iOwoJCQkJfQoJCQl9CgoJCQlpZighaXRlbVdpdGhMZWFzdERpc3RhbmNlICYmICF0aGlzLm9wdGlvbnMuZHJvcE9uRW1wdHkpIC8vQ2hlY2sgaWYgZHJvcE9uRW1wdHkgaXMgZW5hYmxlZAoJCQkJcmV0dXJuOwoKCQkJdGhpcy5jdXJyZW50Q29udGFpbmVyID0gdGhpcy5jb250YWluZXJzW2lubmVybW9zdEluZGV4XTsKCQkJaXRlbVdpdGhMZWFzdERpc3RhbmNlID8gdGhpcy5fcmVhcnJhbmdlKGV2ZW50LCBpdGVtV2l0aExlYXN0RGlzdGFuY2UsIG51bGwsIHRydWUpIDogdGhpcy5fcmVhcnJhbmdlKGV2ZW50LCBudWxsLCB0aGlzLmNvbnRhaW5lcnNbaW5uZXJtb3N0SW5kZXhdLmVsZW1lbnQsIHRydWUpOwoJCQl0aGlzLl90cmlnZ2VyKCJjaGFuZ2UiLCBldmVudCwgdGhpcy5fdWlIYXNoKCkpOwoJCQl0aGlzLmNvbnRhaW5lcnNbaW5uZXJtb3N0SW5kZXhdLl90cmlnZ2VyKCJjaGFuZ2UiLCBldmVudCwgdGhpcy5fdWlIYXNoKHRoaXMpKTsKCgkJCS8vVXBkYXRlIHRoZSBwbGFjZWhvbGRlcgoJCQl0aGlzLm9wdGlvbnMucGxhY2Vob2xkZXIudXBkYXRlKHRoaXMuY3VycmVudENvbnRhaW5lciwgdGhpcy5wbGFjZWhvbGRlcik7CgoJCQl0aGlzLmNvbnRhaW5lcnNbaW5uZXJtb3N0SW5kZXhdLl90cmlnZ2VyKCJvdmVyIiwgZXZlbnQsIHRoaXMuX3VpSGFzaCh0aGlzKSk7CgkJCXRoaXMuY29udGFpbmVyc1tpbm5lcm1vc3RJbmRleF0uY29udGFpbmVyQ2FjaGUub3ZlciA9IDE7CgkJfQoKCgl9LAoKCV9jcmVhdGVIZWxwZXI6IGZ1bmN0aW9uKGV2ZW50KSB7CgoJCXZhciBvID0gdGhpcy5vcHRpb25zOwoJCXZhciBoZWxwZXIgPSAkLmlzRnVuY3Rpb24oby5oZWxwZXIpID8gJChvLmhlbHBlci5hcHBseSh0aGlzLmVsZW1lbnRbMF0sIFtldmVudCwgdGhpcy5jdXJyZW50SXRlbV0pKSA6IChvLmhlbHBlciA9PSAnY2xvbmUnID8gdGhpcy5jdXJyZW50SXRlbS5jbG9uZSgpIDogdGhpcy5jdXJyZW50SXRlbSk7CgoJCWlmKCFoZWxwZXIucGFyZW50cygnYm9keScpLmxlbmd0aCkgLy9BZGQgdGhlIGhlbHBlciB0byB0aGUgRE9NIGlmIHRoYXQgZGlkbid0IGhhcHBlbiBhbHJlYWR5CgkJCSQoby5hcHBlbmRUbyAhPSAncGFyZW50JyA/IG8uYXBwZW5kVG8gOiB0aGlzLmN1cnJlbnRJdGVtWzBdLnBhcmVudE5vZGUpWzBdLmFwcGVuZENoaWxkKGhlbHBlclswXSk7CgoJCWlmKGhlbHBlclswXSA9PSB0aGlzLmN1cnJlbnRJdGVtWzBdKQoJCQl0aGlzLl9zdG9yZWRDU1MgPSB7IHdpZHRoOiB0aGlzLmN1cnJlbnRJdGVtWzBdLnN0eWxlLndpZHRoLCBoZWlnaHQ6IHRoaXMuY3VycmVudEl0ZW1bMF0uc3R5bGUuaGVpZ2h0LCBwb3NpdGlvbjogdGhpcy5jdXJyZW50SXRlbS5jc3MoInBvc2l0aW9uIiksIHRvcDogdGhpcy5jdXJyZW50SXRlbS5jc3MoInRvcCIpLCBsZWZ0OiB0aGlzLmN1cnJlbnRJdGVtLmNzcygibGVmdCIpIH07CgoJCWlmKGhlbHBlclswXS5zdHlsZS53aWR0aCA9PSAnJyB8fCBvLmZvcmNlSGVscGVyU2l6ZSkgaGVscGVyLndpZHRoKHRoaXMuY3VycmVudEl0ZW0ud2lkdGgoKSk7CgkJaWYoaGVscGVyWzBdLnN0eWxlLmhlaWdodCA9PSAnJyB8fCBvLmZvcmNlSGVscGVyU2l6ZSkgaGVscGVyLmhlaWdodCh0aGlzLmN1cnJlbnRJdGVtLmhlaWdodCgpKTsKCgkJcmV0dXJuIGhlbHBlcjsKCgl9LAoKCV9hZGp1c3RPZmZzZXRGcm9tSGVscGVyOiBmdW5jdGlvbihvYmopIHsKCQlpZiAodHlwZW9mIG9iaiA9PSAnc3RyaW5nJykgewoJCQlvYmogPSBvYmouc3BsaXQoJyAnKTsKCQl9CgkJaWYgKCQuaXNBcnJheShvYmopKSB7CgkJCW9iaiA9IHtsZWZ0OiArb2JqWzBdLCB0b3A6ICtvYmpbMV0gfHwgMH07CgkJfQoJCWlmICgnbGVmdCcgaW4gb2JqKSB7CgkJCXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQgPSBvYmoubGVmdCArIHRoaXMubWFyZ2lucy5sZWZ0OwoJCX0KCQlpZiAoJ3JpZ2h0JyBpbiBvYmopIHsKCQkJdGhpcy5vZmZzZXQuY2xpY2subGVmdCA9IHRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGggLSBvYmoucmlnaHQgKyB0aGlzLm1hcmdpbnMubGVmdDsKCQl9CgkJaWYgKCd0b3AnIGluIG9iaikgewoJCQl0aGlzLm9mZnNldC5jbGljay50b3AgPSBvYmoudG9wICsgdGhpcy5tYXJnaW5zLnRvcDsKCQl9CgkJaWYgKCdib3R0b20nIGluIG9iaikgewoJCQl0aGlzLm9mZnNldC5jbGljay50b3AgPSB0aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodCAtIG9iai5ib3R0b20gKyB0aGlzLm1hcmdpbnMudG9wOwoJCX0KCX0sCgoJX2dldFBhcmVudE9mZnNldDogZnVuY3Rpb24oKSB7CgoKCQkvL0dldCB0aGUgb2Zmc2V0UGFyZW50IGFuZCBjYWNoZSBpdHMgcG9zaXRpb24KCQl0aGlzLm9mZnNldFBhcmVudCA9IHRoaXMuaGVscGVyLm9mZnNldFBhcmVudCgpOwoJCXZhciBwbyA9IHRoaXMub2Zmc2V0UGFyZW50Lm9mZnNldCgpOwoKCQkvLyBUaGlzIGlzIGEgc3BlY2lhbCBjYXNlIHdoZXJlIHdlIG5lZWQgdG8gbW9kaWZ5IGEgb2Zmc2V0IGNhbGN1bGF0ZWQgb24gc3RhcnQsIHNpbmNlIHRoZSBmb2xsb3dpbmcgaGFwcGVuZWQ6CgkJLy8gMS4gVGhlIHBvc2l0aW9uIG9mIHRoZSBoZWxwZXIgaXMgYWJzb2x1dGUsIHNvIGl0J3MgcG9zaXRpb24gaXMgY2FsY3VsYXRlZCBiYXNlZCBvbiB0aGUgbmV4dCBwb3NpdGlvbmVkIHBhcmVudAoJCS8vIDIuIFRoZSBhY3R1YWwgb2Zmc2V0IHBhcmVudCBpcyBhIGNoaWxkIG9mIHRoZSBzY3JvbGwgcGFyZW50LCBhbmQgdGhlIHNjcm9sbCBwYXJlbnQgaXNuJ3QgdGhlIGRvY3VtZW50LCB3aGljaCBtZWFucyB0aGF0CgkJLy8gICAgdGhlIHNjcm9sbCBpcyBpbmNsdWRlZCBpbiB0aGUgaW5pdGlhbCBjYWxjdWxhdGlvbiBvZiB0aGUgb2Zmc2V0IG9mIHRoZSBwYXJlbnQsIGFuZCBuZXZlciByZWNhbGN1bGF0ZWQgdXBvbiBkcmFnCgkJaWYodGhpcy5jc3NQb3NpdGlvbiA9PSAnYWJzb2x1dGUnICYmIHRoaXMuc2Nyb2xsUGFyZW50WzBdICE9IGRvY3VtZW50ICYmICQuY29udGFpbnModGhpcy5zY3JvbGxQYXJlbnRbMF0sIHRoaXMub2Zmc2V0UGFyZW50WzBdKSkgewoJCQlwby5sZWZ0ICs9IHRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbExlZnQoKTsKCQkJcG8udG9wICs9IHRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpOwoJCX0KCgkJaWYoKHRoaXMub2Zmc2V0UGFyZW50WzBdID09IGRvY3VtZW50LmJvZHkpIC8vVGhpcyBuZWVkcyB0byBiZSBhY3R1YWxseSBkb25lIGZvciBhbGwgYnJvd3NlcnMsIHNpbmNlIHBhZ2VYL3BhZ2VZIGluY2x1ZGVzIHRoaXMgaW5mb3JtYXRpb24KCQl8fCAodGhpcy5vZmZzZXRQYXJlbnRbMF0udGFnTmFtZSAmJiB0aGlzLm9mZnNldFBhcmVudFswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT0gJ2h0bWwnICYmICQudWkuaWUpKSAvL1VnbHkgSUUgZml4CgkJCXBvID0geyB0b3A6IDAsIGxlZnQ6IDAgfTsKCgkJcmV0dXJuIHsKCQkJdG9wOiBwby50b3AgKyAocGFyc2VJbnQodGhpcy5vZmZzZXRQYXJlbnQuY3NzKCJib3JkZXJUb3BXaWR0aCIpLDEwKSB8fCAwKSwKCQkJbGVmdDogcG8ubGVmdCArIChwYXJzZUludCh0aGlzLm9mZnNldFBhcmVudC5jc3MoImJvcmRlckxlZnRXaWR0aCIpLDEwKSB8fCAwKQoJCX07CgoJfSwKCglfZ2V0UmVsYXRpdmVPZmZzZXQ6IGZ1bmN0aW9uKCkgewoKCQlpZih0aGlzLmNzc1Bvc2l0aW9uID09ICJyZWxhdGl2ZSIpIHsKCQkJdmFyIHAgPSB0aGlzLmN1cnJlbnRJdGVtLnBvc2l0aW9uKCk7CgkJCXJldHVybiB7CgkJCQl0b3A6IHAudG9wIC0gKHBhcnNlSW50KHRoaXMuaGVscGVyLmNzcygidG9wIiksMTApIHx8IDApICsgdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsVG9wKCksCgkJCQlsZWZ0OiBwLmxlZnQgLSAocGFyc2VJbnQodGhpcy5oZWxwZXIuY3NzKCJsZWZ0IiksMTApIHx8IDApICsgdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpCgkJCX07CgkJfSBlbHNlIHsKCQkJcmV0dXJuIHsgdG9wOiAwLCBsZWZ0OiAwIH07CgkJfQoKCX0sCgoJX2NhY2hlTWFyZ2luczogZnVuY3Rpb24oKSB7CgkJdGhpcy5tYXJnaW5zID0gewoJCQlsZWZ0OiAocGFyc2VJbnQodGhpcy5jdXJyZW50SXRlbS5jc3MoIm1hcmdpbkxlZnQiKSwxMCkgfHwgMCksCgkJCXRvcDogKHBhcnNlSW50KHRoaXMuY3VycmVudEl0ZW0uY3NzKCJtYXJnaW5Ub3AiKSwxMCkgfHwgMCkKCQl9OwoJfSwKCglfY2FjaGVIZWxwZXJQcm9wb3J0aW9uczogZnVuY3Rpb24oKSB7CgkJdGhpcy5oZWxwZXJQcm9wb3J0aW9ucyA9IHsKCQkJd2lkdGg6IHRoaXMuaGVscGVyLm91dGVyV2lkdGgoKSwKCQkJaGVpZ2h0OiB0aGlzLmhlbHBlci5vdXRlckhlaWdodCgpCgkJfTsKCX0sCgoJX3NldENvbnRhaW5tZW50OiBmdW5jdGlvbigpIHsKCgkJdmFyIG8gPSB0aGlzLm9wdGlvbnM7CgkJaWYoby5jb250YWlubWVudCA9PSAncGFyZW50Jykgby5jb250YWlubWVudCA9IHRoaXMuaGVscGVyWzBdLnBhcmVudE5vZGU7CgkJaWYoby5jb250YWlubWVudCA9PSAnZG9jdW1lbnQnIHx8IG8uY29udGFpbm1lbnQgPT0gJ3dpbmRvdycpIHRoaXMuY29udGFpbm1lbnQgPSBbCgkJCTAgLSB0aGlzLm9mZnNldC5yZWxhdGl2ZS5sZWZ0IC0gdGhpcy5vZmZzZXQucGFyZW50LmxlZnQsCgkJCTAgLSB0aGlzLm9mZnNldC5yZWxhdGl2ZS50b3AgLSB0aGlzLm9mZnNldC5wYXJlbnQudG9wLAoJCQkkKG8uY29udGFpbm1lbnQgPT0gJ2RvY3VtZW50JyA/IGRvY3VtZW50IDogd2luZG93KS53aWR0aCgpIC0gdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aCAtIHRoaXMubWFyZ2lucy5sZWZ0LAoJCQkoJChvLmNvbnRhaW5tZW50ID09ICdkb2N1bWVudCcgPyBkb2N1bWVudCA6IHdpbmRvdykuaGVpZ2h0KCkgfHwgZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlLnNjcm9sbEhlaWdodCkgLSB0aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodCAtIHRoaXMubWFyZ2lucy50b3AKCQldOwoKCQlpZighKC9eKGRvY3VtZW50fHdpbmRvd3xwYXJlbnQpJC8pLnRlc3Qoby5jb250YWlubWVudCkpIHsKCQkJdmFyIGNlID0gJChvLmNvbnRhaW5tZW50KVswXTsKCQkJdmFyIGNvID0gJChvLmNvbnRhaW5tZW50KS5vZmZzZXQoKTsKCQkJdmFyIG92ZXIgPSAoJChjZSkuY3NzKCJvdmVyZmxvdyIpICE9ICdoaWRkZW4nKTsKCgkJCXRoaXMuY29udGFpbm1lbnQgPSBbCgkJCQljby5sZWZ0ICsgKHBhcnNlSW50KCQoY2UpLmNzcygiYm9yZGVyTGVmdFdpZHRoIiksMTApIHx8IDApICsgKHBhcnNlSW50KCQoY2UpLmNzcygicGFkZGluZ0xlZnQiKSwxMCkgfHwgMCkgLSB0aGlzLm1hcmdpbnMubGVmdCwKCQkJCWNvLnRvcCArIChwYXJzZUludCgkKGNlKS5jc3MoImJvcmRlclRvcFdpZHRoIiksMTApIHx8IDApICsgKHBhcnNlSW50KCQoY2UpLmNzcygicGFkZGluZ1RvcCIpLDEwKSB8fCAwKSAtIHRoaXMubWFyZ2lucy50b3AsCgkJCQljby5sZWZ0KyhvdmVyID8gTWF0aC5tYXgoY2Uuc2Nyb2xsV2lkdGgsY2Uub2Zmc2V0V2lkdGgpIDogY2Uub2Zmc2V0V2lkdGgpIC0gKHBhcnNlSW50KCQoY2UpLmNzcygiYm9yZGVyTGVmdFdpZHRoIiksMTApIHx8IDApIC0gKHBhcnNlSW50KCQoY2UpLmNzcygicGFkZGluZ1JpZ2h0IiksMTApIHx8IDApIC0gdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aCAtIHRoaXMubWFyZ2lucy5sZWZ0LAoJCQkJY28udG9wKyhvdmVyID8gTWF0aC5tYXgoY2Uuc2Nyb2xsSGVpZ2h0LGNlLm9mZnNldEhlaWdodCkgOiBjZS5vZmZzZXRIZWlnaHQpIC0gKHBhcnNlSW50KCQoY2UpLmNzcygiYm9yZGVyVG9wV2lkdGgiKSwxMCkgfHwgMCkgLSAocGFyc2VJbnQoJChjZSkuY3NzKCJwYWRkaW5nQm90dG9tIiksMTApIHx8IDApIC0gdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQgLSB0aGlzLm1hcmdpbnMudG9wCgkJCV07CgkJfQoKCX0sCgoJX2NvbnZlcnRQb3NpdGlvblRvOiBmdW5jdGlvbihkLCBwb3MpIHsKCgkJaWYoIXBvcykgcG9zID0gdGhpcy5wb3NpdGlvbjsKCQl2YXIgbW9kID0gZCA9PSAiYWJzb2x1dGUiID8gMSA6IC0xOwoJCXZhciBvID0gdGhpcy5vcHRpb25zLCBzY3JvbGwgPSB0aGlzLmNzc1Bvc2l0aW9uID09ICdhYnNvbHV0ZScgJiYgISh0aGlzLnNjcm9sbFBhcmVudFswXSAhPSBkb2N1bWVudCAmJiAkLmNvbnRhaW5zKHRoaXMuc2Nyb2xsUGFyZW50WzBdLCB0aGlzLm9mZnNldFBhcmVudFswXSkpID8gdGhpcy5vZmZzZXRQYXJlbnQgOiB0aGlzLnNjcm9sbFBhcmVudCwgc2Nyb2xsSXNSb290Tm9kZSA9ICgvKGh0bWx8Ym9keSkvaSkudGVzdChzY3JvbGxbMF0udGFnTmFtZSk7CgoJCXJldHVybiB7CgkJCXRvcDogKAoJCQkJcG9zLnRvcAkJCQkJCQkJCQkJCQkJCQkJLy8gVGhlIGFic29sdXRlIG1vdXNlIHBvc2l0aW9uCgkJCQkrIHRoaXMub2Zmc2V0LnJlbGF0aXZlLnRvcCAqIG1vZAkJCQkJCQkJCQkvLyBPbmx5IGZvciByZWxhdGl2ZSBwb3NpdGlvbmVkIG5vZGVzOiBSZWxhdGl2ZSBvZmZzZXQgZnJvbSBlbGVtZW50IHRvIG9mZnNldCBwYXJlbnQKCQkJCSsgdGhpcy5vZmZzZXQucGFyZW50LnRvcCAqIG1vZAkJCQkJCQkJCQkJLy8gVGhlIG9mZnNldFBhcmVudCdzIG9mZnNldCB3aXRob3V0IGJvcmRlcnMgKG9mZnNldCArIGJvcmRlcikKCQkJCS0gKCAoIHRoaXMuY3NzUG9zaXRpb24gPT0gJ2ZpeGVkJyA/IC10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKSA6ICggc2Nyb2xsSXNSb290Tm9kZSA/IDAgOiBzY3JvbGwuc2Nyb2xsVG9wKCkgKSApICogbW9kKQoJCQkpLAoJCQlsZWZ0OiAoCgkJCQlwb3MubGVmdAkJCQkJCQkJCQkJCQkJCQkvLyBUaGUgYWJzb2x1dGUgbW91c2UgcG9zaXRpb24KCQkJCSsgdGhpcy5vZmZzZXQucmVsYXRpdmUubGVmdCAqIG1vZAkJCQkJCQkJCQkvLyBPbmx5IGZvciByZWxhdGl2ZSBwb3NpdGlvbmVkIG5vZGVzOiBSZWxhdGl2ZSBvZmZzZXQgZnJvbSBlbGVtZW50IHRvIG9mZnNldCBwYXJlbnQKCQkJCSsgdGhpcy5vZmZzZXQucGFyZW50LmxlZnQgKiBtb2QJCQkJCQkJCQkJCS8vIFRoZSBvZmZzZXRQYXJlbnQncyBvZmZzZXQgd2l0aG91dCBib3JkZXJzIChvZmZzZXQgKyBib3JkZXIpCgkJCQktICggKCB0aGlzLmNzc1Bvc2l0aW9uID09ICdmaXhlZCcgPyAtdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpIDogc2Nyb2xsSXNSb290Tm9kZSA/IDAgOiBzY3JvbGwuc2Nyb2xsTGVmdCgpICkgKiBtb2QpCgkJCSkKCQl9OwoKCX0sCgoJX2dlbmVyYXRlUG9zaXRpb246IGZ1bmN0aW9uKGV2ZW50KSB7CgoJCXZhciBvID0gdGhpcy5vcHRpb25zLCBzY3JvbGwgPSB0aGlzLmNzc1Bvc2l0aW9uID09ICdhYnNvbHV0ZScgJiYgISh0aGlzLnNjcm9sbFBhcmVudFswXSAhPSBkb2N1bWVudCAmJiAkLmNvbnRhaW5zKHRoaXMuc2Nyb2xsUGFyZW50WzBdLCB0aGlzLm9mZnNldFBhcmVudFswXSkpID8gdGhpcy5vZmZzZXRQYXJlbnQgOiB0aGlzLnNjcm9sbFBhcmVudCwgc2Nyb2xsSXNSb290Tm9kZSA9ICgvKGh0bWx8Ym9keSkvaSkudGVzdChzY3JvbGxbMF0udGFnTmFtZSk7CgoJCS8vIFRoaXMgaXMgYW5vdGhlciB2ZXJ5IHdlaXJkIHNwZWNpYWwgY2FzZSB0aGF0IG9ubHkgaGFwcGVucyBmb3IgcmVsYXRpdmUgZWxlbWVudHM6CgkJLy8gMS4gSWYgdGhlIGNzcyBwb3NpdGlvbiBpcyByZWxhdGl2ZQoJCS8vIDIuIGFuZCB0aGUgc2Nyb2xsIHBhcmVudCBpcyB0aGUgZG9jdW1lbnQgb3Igc2ltaWxhciB0byB0aGUgb2Zmc2V0IHBhcmVudAoJCS8vIHdlIGhhdmUgdG8gcmVmcmVzaCB0aGUgcmVsYXRpdmUgb2Zmc2V0IGR1cmluZyB0aGUgc2Nyb2xsIHNvIHRoZXJlIGFyZSBubyBqdW1wcwoJCWlmKHRoaXMuY3NzUG9zaXRpb24gPT0gJ3JlbGF0aXZlJyAmJiAhKHRoaXMuc2Nyb2xsUGFyZW50WzBdICE9IGRvY3VtZW50ICYmIHRoaXMuc2Nyb2xsUGFyZW50WzBdICE9IHRoaXMub2Zmc2V0UGFyZW50WzBdKSkgewoJCQl0aGlzLm9mZnNldC5yZWxhdGl2ZSA9IHRoaXMuX2dldFJlbGF0aXZlT2Zmc2V0KCk7CgkJfQoKCQl2YXIgcGFnZVggPSBldmVudC5wYWdlWDsKCQl2YXIgcGFnZVkgPSBldmVudC5wYWdlWTsKCgkJLyoKCQkgKiAtIFBvc2l0aW9uIGNvbnN0cmFpbmluZyAtCgkJICogQ29uc3RyYWluIHRoZSBwb3NpdGlvbiB0byBhIG1peCBvZiBncmlkLCBjb250YWlubWVudC4KCQkgKi8KCgkJaWYodGhpcy5vcmlnaW5hbFBvc2l0aW9uKSB7IC8vSWYgd2UgYXJlIG5vdCBkcmFnZ2luZyB5ZXQsIHdlIHdvbid0IGNoZWNrIGZvciBvcHRpb25zCgoJCQlpZih0aGlzLmNvbnRhaW5tZW50KSB7CgkJCQlpZihldmVudC5wYWdlWCAtIHRoaXMub2Zmc2V0LmNsaWNrLmxlZnQgPCB0aGlzLmNvbnRhaW5tZW50WzBdKSBwYWdlWCA9IHRoaXMuY29udGFpbm1lbnRbMF0gKyB0aGlzLm9mZnNldC5jbGljay5sZWZ0OwoJCQkJaWYoZXZlbnQucGFnZVkgLSB0aGlzLm9mZnNldC5jbGljay50b3AgPCB0aGlzLmNvbnRhaW5tZW50WzFdKSBwYWdlWSA9IHRoaXMuY29udGFpbm1lbnRbMV0gKyB0aGlzLm9mZnNldC5jbGljay50b3A7CgkJCQlpZihldmVudC5wYWdlWCAtIHRoaXMub2Zmc2V0LmNsaWNrLmxlZnQgPiB0aGlzLmNvbnRhaW5tZW50WzJdKSBwYWdlWCA9IHRoaXMuY29udGFpbm1lbnRbMl0gKyB0aGlzLm9mZnNldC5jbGljay5sZWZ0OwoJCQkJaWYoZXZlbnQucGFnZVkgLSB0aGlzLm9mZnNldC5jbGljay50b3AgPiB0aGlzLmNvbnRhaW5tZW50WzNdKSBwYWdlWSA9IHRoaXMuY29udGFpbm1lbnRbM10gKyB0aGlzLm9mZnNldC5jbGljay50b3A7CgkJCX0KCgkJCWlmKG8uZ3JpZCkgewoJCQkJdmFyIHRvcCA9IHRoaXMub3JpZ2luYWxQYWdlWSArIE1hdGgucm91bmQoKHBhZ2VZIC0gdGhpcy5vcmlnaW5hbFBhZ2VZKSAvIG8uZ3JpZFsxXSkgKiBvLmdyaWRbMV07CgkJCQlwYWdlWSA9IHRoaXMuY29udGFpbm1lbnQgPyAoISh0b3AgLSB0aGlzLm9mZnNldC5jbGljay50b3AgPCB0aGlzLmNvbnRhaW5tZW50WzFdIHx8IHRvcCAtIHRoaXMub2Zmc2V0LmNsaWNrLnRvcCA+IHRoaXMuY29udGFpbm1lbnRbM10pID8gdG9wIDogKCEodG9wIC0gdGhpcy5vZmZzZXQuY2xpY2sudG9wIDwgdGhpcy5jb250YWlubWVudFsxXSkgPyB0b3AgLSBvLmdyaWRbMV0gOiB0b3AgKyBvLmdyaWRbMV0pKSA6IHRvcDsKCgkJCQl2YXIgbGVmdCA9IHRoaXMub3JpZ2luYWxQYWdlWCArIE1hdGgucm91bmQoKHBhZ2VYIC0gdGhpcy5vcmlnaW5hbFBhZ2VYKSAvIG8uZ3JpZFswXSkgKiBvLmdyaWRbMF07CgkJCQlwYWdlWCA9IHRoaXMuY29udGFpbm1lbnQgPyAoIShsZWZ0IC0gdGhpcy5vZmZzZXQuY2xpY2subGVmdCA8IHRoaXMuY29udGFpbm1lbnRbMF0gfHwgbGVmdCAtIHRoaXMub2Zmc2V0LmNsaWNrLmxlZnQgPiB0aGlzLmNvbnRhaW5tZW50WzJdKSA/IGxlZnQgOiAoIShsZWZ0IC0gdGhpcy5vZmZzZXQuY2xpY2subGVmdCA8IHRoaXMuY29udGFpbm1lbnRbMF0pID8gbGVmdCAtIG8uZ3JpZFswXSA6IGxlZnQgKyBvLmdyaWRbMF0pKSA6IGxlZnQ7CgkJCX0KCgkJfQoKCQlyZXR1cm4gewoJCQl0b3A6ICgKCQkJCXBhZ2VZCQkJCQkJCQkJCQkJCQkJCS8vIFRoZSBhYnNvbHV0ZSBtb3VzZSBwb3NpdGlvbgoJCQkJLSB0aGlzLm9mZnNldC5jbGljay50b3AJCQkJCQkJCQkJCQkJLy8gQ2xpY2sgb2Zmc2V0IChyZWxhdGl2ZSB0byB0aGUgZWxlbWVudCkKCQkJCS0gdGhpcy5vZmZzZXQucmVsYXRpdmUudG9wCQkJCQkJCQkJCQkJLy8gT25seSBmb3IgcmVsYXRpdmUgcG9zaXRpb25lZCBub2RlczogUmVsYXRpdmUgb2Zmc2V0IGZyb20gZWxlbWVudCB0byBvZmZzZXQgcGFyZW50CgkJCQktIHRoaXMub2Zmc2V0LnBhcmVudC50b3AJCQkJCQkJCQkJCQkvLyBUaGUgb2Zmc2V0UGFyZW50J3Mgb2Zmc2V0IHdpdGhvdXQgYm9yZGVycyAob2Zmc2V0ICsgYm9yZGVyKQoJCQkJKyAoICggdGhpcy5jc3NQb3NpdGlvbiA9PSAnZml4ZWQnID8gLXRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpIDogKCBzY3JvbGxJc1Jvb3ROb2RlID8gMCA6IHNjcm9sbC5zY3JvbGxUb3AoKSApICkpCgkJCSksCgkJCWxlZnQ6ICgKCQkJCXBhZ2VYCQkJCQkJCQkJCQkJCQkJCS8vIFRoZSBhYnNvbHV0ZSBtb3VzZSBwb3NpdGlvbgoJCQkJLSB0aGlzLm9mZnNldC5jbGljay5sZWZ0CQkJCQkJCQkJCQkJLy8gQ2xpY2sgb2Zmc2V0IChyZWxhdGl2ZSB0byB0aGUgZWxlbWVudCkKCQkJCS0gdGhpcy5vZmZzZXQucmVsYXRpdmUubGVmdAkJCQkJCQkJCQkJCS8vIE9ubHkgZm9yIHJlbGF0aXZlIHBvc2l0aW9uZWQgbm9kZXM6IFJlbGF0aXZlIG9mZnNldCBmcm9tIGVsZW1lbnQgdG8gb2Zmc2V0IHBhcmVudAoJCQkJLSB0aGlzLm9mZnNldC5wYXJlbnQubGVmdAkJCQkJCQkJCQkJCS8vIFRoZSBvZmZzZXRQYXJlbnQncyBvZmZzZXQgd2l0aG91dCBib3JkZXJzIChvZmZzZXQgKyBib3JkZXIpCgkJCQkrICggKCB0aGlzLmNzc1Bvc2l0aW9uID09ICdmaXhlZCcgPyAtdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpIDogc2Nyb2xsSXNSb290Tm9kZSA/IDAgOiBzY3JvbGwuc2Nyb2xsTGVmdCgpICkpCgkJCSkKCQl9OwoKCX0sCgoJX3JlYXJyYW5nZTogZnVuY3Rpb24oZXZlbnQsIGksIGEsIGhhcmRSZWZyZXNoKSB7CgoJCWEgPyBhWzBdLmFwcGVuZENoaWxkKHRoaXMucGxhY2Vob2xkZXJbMF0pIDogaS5pdGVtWzBdLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMucGxhY2Vob2xkZXJbMF0sICh0aGlzLmRpcmVjdGlvbiA9PSAnZG93bicgPyBpLml0ZW1bMF0gOiBpLml0ZW1bMF0ubmV4dFNpYmxpbmcpKTsKCgkJLy9WYXJpb3VzIHRoaW5ncyBkb25lIGhlcmUgdG8gaW1wcm92ZSB0aGUgcGVyZm9ybWFuY2U6CgkJLy8gMS4gd2UgY3JlYXRlIGEgc2V0VGltZW91dCwgdGhhdCBjYWxscyByZWZyZXNoUG9zaXRpb25zCgkJLy8gMi4gb24gdGhlIGluc3RhbmNlLCB3ZSBoYXZlIGEgY291bnRlciB2YXJpYWJsZSwgdGhhdCBnZXQncyBoaWdoZXIgYWZ0ZXIgZXZlcnkgYXBwZW5kCgkJLy8gMy4gb24gdGhlIGxvY2FsIHNjb3BlLCB3ZSBjb3B5IHRoZSBjb3VudGVyIHZhcmlhYmxlLCBhbmQgY2hlY2sgaW4gdGhlIHRpbWVvdXQsIGlmIGl0J3Mgc3RpbGwgdGhlIHNhbWUKCQkvLyA0LiB0aGlzIGxldHMgb25seSB0aGUgbGFzdCBhZGRpdGlvbiB0byB0aGUgdGltZW91dCBzdGFjayB0aHJvdWdoCgkJdGhpcy5jb3VudGVyID0gdGhpcy5jb3VudGVyID8gKyt0aGlzLmNvdW50ZXIgOiAxOwoJCXZhciBjb3VudGVyID0gdGhpcy5jb3VudGVyOwoKCQl0aGlzLl9kZWxheShmdW5jdGlvbigpIHsKCQkJaWYoY291bnRlciA9PSB0aGlzLmNvdW50ZXIpIHRoaXMucmVmcmVzaFBvc2l0aW9ucyghaGFyZFJlZnJlc2gpOyAvL1ByZWNvbXB1dGUgYWZ0ZXIgZWFjaCBET00gaW5zZXJ0aW9uLCBOT1Qgb24gbW91c2Vtb3ZlCgkJfSk7CgoJfSwKCglfY2xlYXI6IGZ1bmN0aW9uKGV2ZW50LCBub1Byb3BhZ2F0aW9uKSB7CgoJCXRoaXMucmV2ZXJ0aW5nID0gZmFsc2U7CgkJLy8gV2UgZGVsYXkgYWxsIGV2ZW50cyB0aGF0IGhhdmUgdG8gYmUgdHJpZ2dlcmVkIHRvIGFmdGVyIHRoZSBwb2ludCB3aGVyZSB0aGUgcGxhY2Vob2xkZXIgaGFzIGJlZW4gcmVtb3ZlZCBhbmQKCQkvLyBldmVyeXRoaW5nIGVsc2Ugbm9ybWFsaXplZCBhZ2FpbgoJCXZhciBkZWxheWVkVHJpZ2dlcnMgPSBbXTsKCgkJLy8gV2UgZmlyc3QgaGF2ZSB0byB1cGRhdGUgdGhlIGRvbSBwb3NpdGlvbiBvZiB0aGUgYWN0dWFsIGN1cnJlbnRJdGVtCgkJLy8gTm90ZTogZG9uJ3QgZG8gaXQgaWYgdGhlIGN1cnJlbnQgaXRlbSBpcyBhbHJlYWR5IHJlbW92ZWQgKGJ5IGEgdXNlciksIG9yIGl0IGdldHMgcmVhcHBlbmRlZCAoc2VlICM0MDg4KQoJCWlmKCF0aGlzLl9ub0ZpbmFsU29ydCAmJiB0aGlzLmN1cnJlbnRJdGVtLnBhcmVudCgpLmxlbmd0aCkgdGhpcy5wbGFjZWhvbGRlci5iZWZvcmUodGhpcy5jdXJyZW50SXRlbSk7CgkJdGhpcy5fbm9GaW5hbFNvcnQgPSBudWxsOwoKCQlpZih0aGlzLmhlbHBlclswXSA9PSB0aGlzLmN1cnJlbnRJdGVtWzBdKSB7CgkJCWZvcih2YXIgaSBpbiB0aGlzLl9zdG9yZWRDU1MpIHsKCQkJCWlmKHRoaXMuX3N0b3JlZENTU1tpXSA9PSAnYXV0bycgfHwgdGhpcy5fc3RvcmVkQ1NTW2ldID09ICdzdGF0aWMnKSB0aGlzLl9zdG9yZWRDU1NbaV0gPSAnJzsKCQkJfQoJCQl0aGlzLmN1cnJlbnRJdGVtLmNzcyh0aGlzLl9zdG9yZWRDU1MpLnJlbW92ZUNsYXNzKCJ1aS1zb3J0YWJsZS1oZWxwZXIiKTsKCQl9IGVsc2UgewoJCQl0aGlzLmN1cnJlbnRJdGVtLnNob3coKTsKCQl9CgoJCWlmKHRoaXMuZnJvbU91dHNpZGUgJiYgIW5vUHJvcGFnYXRpb24pIGRlbGF5ZWRUcmlnZ2Vycy5wdXNoKGZ1bmN0aW9uKGV2ZW50KSB7IHRoaXMuX3RyaWdnZXIoInJlY2VpdmUiLCBldmVudCwgdGhpcy5fdWlIYXNoKHRoaXMuZnJvbU91dHNpZGUpKTsgfSk7CgkJaWYoKHRoaXMuZnJvbU91dHNpZGUgfHwgdGhpcy5kb21Qb3NpdGlvbi5wcmV2ICE9IHRoaXMuY3VycmVudEl0ZW0ucHJldigpLm5vdCgiLnVpLXNvcnRhYmxlLWhlbHBlciIpWzBdIHx8IHRoaXMuZG9tUG9zaXRpb24ucGFyZW50ICE9IHRoaXMuY3VycmVudEl0ZW0ucGFyZW50KClbMF0pICYmICFub1Byb3BhZ2F0aW9uKSBkZWxheWVkVHJpZ2dlcnMucHVzaChmdW5jdGlvbihldmVudCkgeyB0aGlzLl90cmlnZ2VyKCJ1cGRhdGUiLCBldmVudCwgdGhpcy5fdWlIYXNoKCkpOyB9KTsgLy9UcmlnZ2VyIHVwZGF0ZSBjYWxsYmFjayBpZiB0aGUgRE9NIHBvc2l0aW9uIGhhcyBjaGFuZ2VkCgoJCS8vIENoZWNrIGlmIHRoZSBpdGVtcyBDb250YWluZXIgaGFzIENoYW5nZWQgYW5kIHRyaWdnZXIgYXBwcm9wcmlhdGUKCQkvLyBldmVudHMuCgkJaWYgKHRoaXMgIT09IHRoaXMuY3VycmVudENvbnRhaW5lcikgewoJCQlpZighbm9Qcm9wYWdhdGlvbikgewoJCQkJZGVsYXllZFRyaWdnZXJzLnB1c2goZnVuY3Rpb24oZXZlbnQpIHsgdGhpcy5fdHJpZ2dlcigicmVtb3ZlIiwgZXZlbnQsIHRoaXMuX3VpSGFzaCgpKTsgfSk7CgkJCQlkZWxheWVkVHJpZ2dlcnMucHVzaCgoZnVuY3Rpb24oYykgeyByZXR1cm4gZnVuY3Rpb24oZXZlbnQpIHsgYy5fdHJpZ2dlcigicmVjZWl2ZSIsIGV2ZW50LCB0aGlzLl91aUhhc2godGhpcykpOyB9OyAgfSkuY2FsbCh0aGlzLCB0aGlzLmN1cnJlbnRDb250YWluZXIpKTsKCQkJCWRlbGF5ZWRUcmlnZ2Vycy5wdXNoKChmdW5jdGlvbihjKSB7IHJldHVybiBmdW5jdGlvbihldmVudCkgeyBjLl90cmlnZ2VyKCJ1cGRhdGUiLCBldmVudCwgdGhpcy5fdWlIYXNoKHRoaXMpKTsgIH07IH0pLmNhbGwodGhpcywgdGhpcy5jdXJyZW50Q29udGFpbmVyKSk7CgkJCX0KCQl9CgoKCQkvL1Bvc3QgZXZlbnRzIHRvIGNvbnRhaW5lcnMKCQlmb3IgKHZhciBpID0gdGhpcy5jb250YWluZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKXsKCQkJaWYoIW5vUHJvcGFnYXRpb24pIGRlbGF5ZWRUcmlnZ2Vycy5wdXNoKChmdW5jdGlvbihjKSB7IHJldHVybiBmdW5jdGlvbihldmVudCkgeyBjLl90cmlnZ2VyKCJkZWFjdGl2YXRlIiwgZXZlbnQsIHRoaXMuX3VpSGFzaCh0aGlzKSk7IH07ICB9KS5jYWxsKHRoaXMsIHRoaXMuY29udGFpbmVyc1tpXSkpOwoJCQlpZih0aGlzLmNvbnRhaW5lcnNbaV0uY29udGFpbmVyQ2FjaGUub3ZlcikgewoJCQkJZGVsYXllZFRyaWdnZXJzLnB1c2goKGZ1bmN0aW9uKGMpIHsgcmV0dXJuIGZ1bmN0aW9uKGV2ZW50KSB7IGMuX3RyaWdnZXIoIm91dCIsIGV2ZW50LCB0aGlzLl91aUhhc2godGhpcykpOyB9OyAgfSkuY2FsbCh0aGlzLCB0aGlzLmNvbnRhaW5lcnNbaV0pKTsKCQkJCXRoaXMuY29udGFpbmVyc1tpXS5jb250YWluZXJDYWNoZS5vdmVyID0gMDsKCQkJfQoJCX0KCgkJLy9EbyB3aGF0IHdhcyBvcmlnaW5hbGx5IGluIHBsdWdpbnMKCQlpZih0aGlzLl9zdG9yZWRDdXJzb3IpICQoJ2JvZHknKS5jc3MoImN1cnNvciIsIHRoaXMuX3N0b3JlZEN1cnNvcik7IC8vUmVzZXQgY3Vyc29yCgkJaWYodGhpcy5fc3RvcmVkT3BhY2l0eSkgdGhpcy5oZWxwZXIuY3NzKCJvcGFjaXR5IiwgdGhpcy5fc3RvcmVkT3BhY2l0eSk7IC8vUmVzZXQgb3BhY2l0eQoJCWlmKHRoaXMuX3N0b3JlZFpJbmRleCkgdGhpcy5oZWxwZXIuY3NzKCJ6SW5kZXgiLCB0aGlzLl9zdG9yZWRaSW5kZXggPT0gJ2F1dG8nID8gJycgOiB0aGlzLl9zdG9yZWRaSW5kZXgpOyAvL1Jlc2V0IHotaW5kZXgKCgkJdGhpcy5kcmFnZ2luZyA9IGZhbHNlOwoJCWlmKHRoaXMuY2FuY2VsSGVscGVyUmVtb3ZhbCkgewoJCQlpZighbm9Qcm9wYWdhdGlvbikgewoJCQkJdGhpcy5fdHJpZ2dlcigiYmVmb3JlU3RvcCIsIGV2ZW50LCB0aGlzLl91aUhhc2goKSk7CgkJCQlmb3IgKHZhciBpPTA7IGkgPCBkZWxheWVkVHJpZ2dlcnMubGVuZ3RoOyBpKyspIHsgZGVsYXllZFRyaWdnZXJzW2ldLmNhbGwodGhpcywgZXZlbnQpOyB9OyAvL1RyaWdnZXIgYWxsIGRlbGF5ZWQgZXZlbnRzCgkJCQl0aGlzLl90cmlnZ2VyKCJzdG9wIiwgZXZlbnQsIHRoaXMuX3VpSGFzaCgpKTsKCQkJfQoKCQkJdGhpcy5mcm9tT3V0c2lkZSA9IGZhbHNlOwoJCQlyZXR1cm4gZmFsc2U7CgkJfQoKCQlpZighbm9Qcm9wYWdhdGlvbikgdGhpcy5fdHJpZ2dlcigiYmVmb3JlU3RvcCIsIGV2ZW50LCB0aGlzLl91aUhhc2goKSk7CgoJCS8vJCh0aGlzLnBsYWNlaG9sZGVyWzBdKS5yZW1vdmUoKTsgd291bGQgaGF2ZSBiZWVuIHRoZSBqUXVlcnkgd2F5IC0gdW5mb3J0dW5hdGVseSwgaXQgdW5iaW5kcyBBTEwgZXZlbnRzIGZyb20gdGhlIG9yaWdpbmFsIG5vZGUhCgkJdGhpcy5wbGFjZWhvbGRlclswXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMucGxhY2Vob2xkZXJbMF0pOwoKCQlpZih0aGlzLmhlbHBlclswXSAhPSB0aGlzLmN1cnJlbnRJdGVtWzBdKSB0aGlzLmhlbHBlci5yZW1vdmUoKTsgdGhpcy5oZWxwZXIgPSBudWxsOwoKCQlpZighbm9Qcm9wYWdhdGlvbikgewoJCQlmb3IgKHZhciBpPTA7IGkgPCBkZWxheWVkVHJpZ2dlcnMubGVuZ3RoOyBpKyspIHsgZGVsYXllZFRyaWdnZXJzW2ldLmNhbGwodGhpcywgZXZlbnQpOyB9OyAvL1RyaWdnZXIgYWxsIGRlbGF5ZWQgZXZlbnRzCgkJCXRoaXMuX3RyaWdnZXIoInN0b3AiLCBldmVudCwgdGhpcy5fdWlIYXNoKCkpOwoJCX0KCgkJdGhpcy5mcm9tT3V0c2lkZSA9IGZhbHNlOwoJCXJldHVybiB0cnVlOwoKCX0sCgoJX3RyaWdnZXI6IGZ1bmN0aW9uKCkgewoJCWlmICgkLldpZGdldC5wcm90b3R5cGUuX3RyaWdnZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSA9PT0gZmFsc2UpIHsKCQkJdGhpcy5jYW5jZWwoKTsKCQl9Cgl9LAoKCV91aUhhc2g6IGZ1bmN0aW9uKF9pbnN0KSB7CgkJdmFyIGluc3QgPSBfaW5zdCB8fCB0aGlzOwoJCXJldHVybiB7CgkJCWhlbHBlcjogaW5zdC5oZWxwZXIsCgkJCXBsYWNlaG9sZGVyOiBpbnN0LnBsYWNlaG9sZGVyIHx8ICQoW10pLAoJCQlwb3NpdGlvbjogaW5zdC5wb3NpdGlvbiwKCQkJb3JpZ2luYWxQb3NpdGlvbjogaW5zdC5vcmlnaW5hbFBvc2l0aW9uLAoJCQlvZmZzZXQ6IGluc3QucG9zaXRpb25BYnMsCgkJCWl0ZW06IGluc3QuY3VycmVudEl0ZW0sCgkJCXNlbmRlcjogX2luc3QgPyBfaW5zdC5lbGVtZW50IDogbnVsbAoJCX07Cgl9Cgp9KTsKCn0pKGpRdWVyeSk7CihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkgewoKdmFyIHVpZCA9IDAsCgloaWRlUHJvcHMgPSB7fSwKCXNob3dQcm9wcyA9IHt9OwoKaGlkZVByb3BzLmhlaWdodCA9IGhpZGVQcm9wcy5wYWRkaW5nVG9wID0gaGlkZVByb3BzLnBhZGRpbmdCb3R0b20gPQoJaGlkZVByb3BzLmJvcmRlclRvcFdpZHRoID0gaGlkZVByb3BzLmJvcmRlckJvdHRvbVdpZHRoID0gImhpZGUiOwpzaG93UHJvcHMuaGVpZ2h0ID0gc2hvd1Byb3BzLnBhZGRpbmdUb3AgPSBzaG93UHJvcHMucGFkZGluZ0JvdHRvbSA9CglzaG93UHJvcHMuYm9yZGVyVG9wV2lkdGggPSBzaG93UHJvcHMuYm9yZGVyQm90dG9tV2lkdGggPSAic2hvdyI7CgokLndpZGdldCggInVpLmFjY29yZGlvbiIsIHsKCXZlcnNpb246ICIxLjkuMiIsCglvcHRpb25zOiB7CgkJYWN0aXZlOiAwLAoJCWFuaW1hdGU6IHt9LAoJCWNvbGxhcHNpYmxlOiBmYWxzZSwKCQlldmVudDogImNsaWNrIiwKCQloZWFkZXI6ICI+IGxpID4gOmZpcnN0LWNoaWxkLD4gOm5vdChsaSk6ZXZlbiIsCgkJaGVpZ2h0U3R5bGU6ICJhdXRvIiwKCQlpY29uczogewoJCQlhY3RpdmVIZWFkZXI6ICJ1aS1pY29uLXRyaWFuZ2xlLTEtcyIsCgkJCWhlYWRlcjogInVpLWljb24tdHJpYW5nbGUtMS1lIgoJCX0sCgoJCS8vIGNhbGxiYWNrcwoJCWFjdGl2YXRlOiBudWxsLAoJCWJlZm9yZUFjdGl2YXRlOiBudWxsCgl9LAoKCV9jcmVhdGU6IGZ1bmN0aW9uKCkgewoJCXZhciBhY2NvcmRpb25JZCA9IHRoaXMuYWNjb3JkaW9uSWQgPSAidWktYWNjb3JkaW9uLSIgKwoJCQkJKHRoaXMuZWxlbWVudC5hdHRyKCAiaWQiICkgfHwgKyt1aWQpLAoJCQlvcHRpb25zID0gdGhpcy5vcHRpb25zOwoKCQl0aGlzLnByZXZTaG93ID0gdGhpcy5wcmV2SGlkZSA9ICQoKTsKCQl0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoICJ1aS1hY2NvcmRpb24gdWktd2lkZ2V0IHVpLWhlbHBlci1yZXNldCIgKTsKCgkJdGhpcy5oZWFkZXJzID0gdGhpcy5lbGVtZW50LmZpbmQoIG9wdGlvbnMuaGVhZGVyICkKCQkJLmFkZENsYXNzKCAidWktYWNjb3JkaW9uLWhlYWRlciB1aS1oZWxwZXItcmVzZXQgdWktc3RhdGUtZGVmYXVsdCB1aS1jb3JuZXItYWxsIiApOwoJCXRoaXMuX2hvdmVyYWJsZSggdGhpcy5oZWFkZXJzICk7CgkJdGhpcy5fZm9jdXNhYmxlKCB0aGlzLmhlYWRlcnMgKTsKCgkJdGhpcy5oZWFkZXJzLm5leHQoKQoJCQkuYWRkQ2xhc3MoICJ1aS1hY2NvcmRpb24tY29udGVudCB1aS1oZWxwZXItcmVzZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWJvdHRvbSIgKQoJCQkuaGlkZSgpOwoKCQkvLyBkb24ndCBhbGxvdyBjb2xsYXBzaWJsZTogZmFsc2UgYW5kIGFjdGl2ZTogZmFsc2UgLyBudWxsCgkJaWYgKCAhb3B0aW9ucy5jb2xsYXBzaWJsZSAmJiAob3B0aW9ucy5hY3RpdmUgPT09IGZhbHNlIHx8IG9wdGlvbnMuYWN0aXZlID09IG51bGwpICkgewoJCQlvcHRpb25zLmFjdGl2ZSA9IDA7CgkJfQoJCS8vIGhhbmRsZSBuZWdhdGl2ZSB2YWx1ZXMKCQlpZiAoIG9wdGlvbnMuYWN0aXZlIDwgMCApIHsKCQkJb3B0aW9ucy5hY3RpdmUgKz0gdGhpcy5oZWFkZXJzLmxlbmd0aDsKCQl9CgkJdGhpcy5hY3RpdmUgPSB0aGlzLl9maW5kQWN0aXZlKCBvcHRpb25zLmFjdGl2ZSApCgkJCS5hZGRDbGFzcyggInVpLWFjY29yZGlvbi1oZWFkZXItYWN0aXZlIHVpLXN0YXRlLWFjdGl2ZSIgKQoJCQkudG9nZ2xlQ2xhc3MoICJ1aS1jb3JuZXItYWxsIHVpLWNvcm5lci10b3AiICk7CgkJdGhpcy5hY3RpdmUubmV4dCgpCgkJCS5hZGRDbGFzcyggInVpLWFjY29yZGlvbi1jb250ZW50LWFjdGl2ZSIgKQoJCQkuc2hvdygpOwoKCQl0aGlzLl9jcmVhdGVJY29ucygpOwoJCXRoaXMucmVmcmVzaCgpOwoKCQkvLyBBUklBCgkJdGhpcy5lbGVtZW50LmF0dHIoICJyb2xlIiwgInRhYmxpc3QiICk7CgoJCXRoaXMuaGVhZGVycwoJCQkuYXR0ciggInJvbGUiLCAidGFiIiApCgkJCS5lYWNoKGZ1bmN0aW9uKCBpICkgewoJCQkJdmFyIGhlYWRlciA9ICQoIHRoaXMgKSwKCQkJCQloZWFkZXJJZCA9IGhlYWRlci5hdHRyKCAiaWQiICksCgkJCQkJcGFuZWwgPSBoZWFkZXIubmV4dCgpLAoJCQkJCXBhbmVsSWQgPSBwYW5lbC5hdHRyKCAiaWQiICk7CgkJCQlpZiAoICFoZWFkZXJJZCApIHsKCQkJCQloZWFkZXJJZCA9IGFjY29yZGlvbklkICsgIi1oZWFkZXItIiArIGk7CgkJCQkJaGVhZGVyLmF0dHIoICJpZCIsIGhlYWRlcklkICk7CgkJCQl9CgkJCQlpZiAoICFwYW5lbElkICkgewoJCQkJCXBhbmVsSWQgPSBhY2NvcmRpb25JZCArICItcGFuZWwtIiArIGk7CgkJCQkJcGFuZWwuYXR0ciggImlkIiwgcGFuZWxJZCApOwoJCQkJfQoJCQkJaGVhZGVyLmF0dHIoICJhcmlhLWNvbnRyb2xzIiwgcGFuZWxJZCApOwoJCQkJcGFuZWwuYXR0ciggImFyaWEtbGFiZWxsZWRieSIsIGhlYWRlcklkICk7CgkJCX0pCgkJCS5uZXh0KCkKCQkJCS5hdHRyKCAicm9sZSIsICJ0YWJwYW5lbCIgKTsKCgkJdGhpcy5oZWFkZXJzCgkJCS5ub3QoIHRoaXMuYWN0aXZlICkKCQkJLmF0dHIoewoJCQkJImFyaWEtc2VsZWN0ZWQiOiAiZmFsc2UiLAoJCQkJdGFiSW5kZXg6IC0xCgkJCX0pCgkJCS5uZXh0KCkKCQkJCS5hdHRyKHsKCQkJCQkiYXJpYS1leHBhbmRlZCI6ICJmYWxzZSIsCgkJCQkJImFyaWEtaGlkZGVuIjogInRydWUiCgkJCQl9KQoJCQkJLmhpZGUoKTsKCgkJLy8gbWFrZSBzdXJlIGF0IGxlYXN0IG9uZSBoZWFkZXIgaXMgaW4gdGhlIHRhYiBvcmRlcgoJCWlmICggIXRoaXMuYWN0aXZlLmxlbmd0aCApIHsKCQkJdGhpcy5oZWFkZXJzLmVxKCAwICkuYXR0ciggInRhYkluZGV4IiwgMCApOwoJCX0gZWxzZSB7CgkJCXRoaXMuYWN0aXZlLmF0dHIoewoJCQkJImFyaWEtc2VsZWN0ZWQiOiAidHJ1ZSIsCgkJCQl0YWJJbmRleDogMAoJCQl9KQoJCQkubmV4dCgpCgkJCQkuYXR0cih7CgkJCQkJImFyaWEtZXhwYW5kZWQiOiAidHJ1ZSIsCgkJCQkJImFyaWEtaGlkZGVuIjogImZhbHNlIgoJCQkJfSk7CgkJfQoKCQl0aGlzLl9vbiggdGhpcy5oZWFkZXJzLCB7IGtleWRvd246ICJfa2V5ZG93biIgfSk7CgkJdGhpcy5fb24oIHRoaXMuaGVhZGVycy5uZXh0KCksIHsga2V5ZG93bjogIl9wYW5lbEtleURvd24iIH0pOwoJCXRoaXMuX3NldHVwRXZlbnRzKCBvcHRpb25zLmV2ZW50ICk7Cgl9LAoKCV9nZXRDcmVhdGVFdmVudERhdGE6IGZ1bmN0aW9uKCkgewoJCXJldHVybiB7CgkJCWhlYWRlcjogdGhpcy5hY3RpdmUsCgkJCWNvbnRlbnQ6ICF0aGlzLmFjdGl2ZS5sZW5ndGggPyAkKCkgOiB0aGlzLmFjdGl2ZS5uZXh0KCkKCQl9OwoJfSwKCglfY3JlYXRlSWNvbnM6IGZ1bmN0aW9uKCkgewoJCXZhciBpY29ucyA9IHRoaXMub3B0aW9ucy5pY29uczsKCQlpZiAoIGljb25zICkgewoJCQkkKCAiPHNwYW4+IiApCgkJCQkuYWRkQ2xhc3MoICJ1aS1hY2NvcmRpb24taGVhZGVyLWljb24gdWktaWNvbiAiICsgaWNvbnMuaGVhZGVyICkKCQkJCS5wcmVwZW5kVG8oIHRoaXMuaGVhZGVycyApOwoJCQl0aGlzLmFjdGl2ZS5jaGlsZHJlbiggIi51aS1hY2NvcmRpb24taGVhZGVyLWljb24iICkKCQkJCS5yZW1vdmVDbGFzcyggaWNvbnMuaGVhZGVyICkKCQkJCS5hZGRDbGFzcyggaWNvbnMuYWN0aXZlSGVhZGVyICk7CgkJCXRoaXMuaGVhZGVycy5hZGRDbGFzcyggInVpLWFjY29yZGlvbi1pY29ucyIgKTsKCQl9Cgl9LAoKCV9kZXN0cm95SWNvbnM6IGZ1bmN0aW9uKCkgewoJCXRoaXMuaGVhZGVycwoJCQkucmVtb3ZlQ2xhc3MoICJ1aS1hY2NvcmRpb24taWNvbnMiICkKCQkJLmNoaWxkcmVuKCAiLnVpLWFjY29yZGlvbi1oZWFkZXItaWNvbiIgKQoJCQkJLnJlbW92ZSgpOwoJfSwKCglfZGVzdHJveTogZnVuY3Rpb24oKSB7CgkJdmFyIGNvbnRlbnRzOwoKCQkvLyBjbGVhbiB1cCBtYWluIGVsZW1lbnQKCQl0aGlzLmVsZW1lbnQKCQkJLnJlbW92ZUNsYXNzKCAidWktYWNjb3JkaW9uIHVpLXdpZGdldCB1aS1oZWxwZXItcmVzZXQiICkKCQkJLnJlbW92ZUF0dHIoICJyb2xlIiApOwoKCQkvLyBjbGVhbiB1cCBoZWFkZXJzCgkJdGhpcy5oZWFkZXJzCgkJCS5yZW1vdmVDbGFzcyggInVpLWFjY29yZGlvbi1oZWFkZXIgdWktYWNjb3JkaW9uLWhlYWRlci1hY3RpdmUgdWktaGVscGVyLXJlc2V0IHVpLXN0YXRlLWRlZmF1bHQgdWktY29ybmVyLWFsbCB1aS1zdGF0ZS1hY3RpdmUgdWktc3RhdGUtZGlzYWJsZWQgdWktY29ybmVyLXRvcCIgKQoJCQkucmVtb3ZlQXR0ciggInJvbGUiICkKCQkJLnJlbW92ZUF0dHIoICJhcmlhLXNlbGVjdGVkIiApCgkJCS5yZW1vdmVBdHRyKCAiYXJpYS1jb250cm9scyIgKQoJCQkucmVtb3ZlQXR0ciggInRhYkluZGV4IiApCgkJCS5lYWNoKGZ1bmN0aW9uKCkgewoJCQkJaWYgKCAvXnVpLWFjY29yZGlvbi8udGVzdCggdGhpcy5pZCApICkgewoJCQkJCXRoaXMucmVtb3ZlQXR0cmlidXRlKCAiaWQiICk7CgkJCQl9CgkJCX0pOwoJCXRoaXMuX2Rlc3Ryb3lJY29ucygpOwoKCQkvLyBjbGVhbiB1cCBjb250ZW50IHBhbmVscwoJCWNvbnRlbnRzID0gdGhpcy5oZWFkZXJzLm5leHQoKQoJCQkuY3NzKCAiZGlzcGxheSIsICIiICkKCQkJLnJlbW92ZUF0dHIoICJyb2xlIiApCgkJCS5yZW1vdmVBdHRyKCAiYXJpYS1leHBhbmRlZCIgKQoJCQkucmVtb3ZlQXR0ciggImFyaWEtaGlkZGVuIiApCgkJCS5yZW1vdmVBdHRyKCAiYXJpYS1sYWJlbGxlZGJ5IiApCgkJCS5yZW1vdmVDbGFzcyggInVpLWhlbHBlci1yZXNldCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYm90dG9tIHVpLWFjY29yZGlvbi1jb250ZW50IHVpLWFjY29yZGlvbi1jb250ZW50LWFjdGl2ZSB1aS1zdGF0ZS1kaXNhYmxlZCIgKQoJCQkuZWFjaChmdW5jdGlvbigpIHsKCQkJCWlmICggL151aS1hY2NvcmRpb24vLnRlc3QoIHRoaXMuaWQgKSApIHsKCQkJCQl0aGlzLnJlbW92ZUF0dHJpYnV0ZSggImlkIiApOwoJCQkJfQoJCQl9KTsKCQlpZiAoIHRoaXMub3B0aW9ucy5oZWlnaHRTdHlsZSAhPT0gImNvbnRlbnQiICkgewoJCQljb250ZW50cy5jc3MoICJoZWlnaHQiLCAiIiApOwoJCX0KCX0sCgoJX3NldE9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7CgkJaWYgKCBrZXkgPT09ICJhY3RpdmUiICkgewoJCQkvLyBfYWN0aXZhdGUoKSB3aWxsIGhhbmRsZSBpbnZhbGlkIHZhbHVlcyBhbmQgdXBkYXRlIHRoaXMub3B0aW9ucwoJCQl0aGlzLl9hY3RpdmF0ZSggdmFsdWUgKTsKCQkJcmV0dXJuOwoJCX0KCgkJaWYgKCBrZXkgPT09ICJldmVudCIgKSB7CgkJCWlmICggdGhpcy5vcHRpb25zLmV2ZW50ICkgewoJCQkJdGhpcy5fb2ZmKCB0aGlzLmhlYWRlcnMsIHRoaXMub3B0aW9ucy5ldmVudCApOwoJCQl9CgkJCXRoaXMuX3NldHVwRXZlbnRzKCB2YWx1ZSApOwoJCX0KCgkJdGhpcy5fc3VwZXIoIGtleSwgdmFsdWUgKTsKCgkJLy8gc2V0dGluZyBjb2xsYXBzaWJsZTogZmFsc2Ugd2hpbGUgY29sbGFwc2VkOyBvcGVuIGZpcnN0IHBhbmVsCgkJaWYgKCBrZXkgPT09ICJjb2xsYXBzaWJsZSIgJiYgIXZhbHVlICYmIHRoaXMub3B0aW9ucy5hY3RpdmUgPT09IGZhbHNlICkgewoJCQl0aGlzLl9hY3RpdmF0ZSggMCApOwoJCX0KCgkJaWYgKCBrZXkgPT09ICJpY29ucyIgKSB7CgkJCXRoaXMuX2Rlc3Ryb3lJY29ucygpOwoJCQlpZiAoIHZhbHVlICkgewoJCQkJdGhpcy5fY3JlYXRlSWNvbnMoKTsKCQkJfQoJCX0KCgkJLy8gIzUzMzIgLSBvcGFjaXR5IGRvZXNuJ3QgY2FzY2FkZSB0byBwb3NpdGlvbmVkIGVsZW1lbnRzIGluIElFCgkJLy8gc28gd2UgbmVlZCB0byBhZGQgdGhlIGRpc2FibGVkIGNsYXNzIHRvIHRoZSBoZWFkZXJzIGFuZCBwYW5lbHMKCQlpZiAoIGtleSA9PT0gImRpc2FibGVkIiApIHsKCQkJdGhpcy5oZWFkZXJzLmFkZCggdGhpcy5oZWFkZXJzLm5leHQoKSApCgkJCQkudG9nZ2xlQ2xhc3MoICJ1aS1zdGF0ZS1kaXNhYmxlZCIsICEhdmFsdWUgKTsKCQl9Cgl9LAoKCV9rZXlkb3duOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJaWYgKCBldmVudC5hbHRLZXkgfHwgZXZlbnQuY3RybEtleSApIHsKCQkJcmV0dXJuOwoJCX0KCgkJdmFyIGtleUNvZGUgPSAkLnVpLmtleUNvZGUsCgkJCWxlbmd0aCA9IHRoaXMuaGVhZGVycy5sZW5ndGgsCgkJCWN1cnJlbnRJbmRleCA9IHRoaXMuaGVhZGVycy5pbmRleCggZXZlbnQudGFyZ2V0ICksCgkJCXRvRm9jdXMgPSBmYWxzZTsKCgkJc3dpdGNoICggZXZlbnQua2V5Q29kZSApIHsKCQkJY2FzZSBrZXlDb2RlLlJJR0hUOgoJCQljYXNlIGtleUNvZGUuRE9XTjoKCQkJCXRvRm9jdXMgPSB0aGlzLmhlYWRlcnNbICggY3VycmVudEluZGV4ICsgMSApICUgbGVuZ3RoIF07CgkJCQlicmVhazsKCQkJY2FzZSBrZXlDb2RlLkxFRlQ6CgkJCWNhc2Uga2V5Q29kZS5VUDoKCQkJCXRvRm9jdXMgPSB0aGlzLmhlYWRlcnNbICggY3VycmVudEluZGV4IC0gMSArIGxlbmd0aCApICUgbGVuZ3RoIF07CgkJCQlicmVhazsKCQkJY2FzZSBrZXlDb2RlLlNQQUNFOgoJCQljYXNlIGtleUNvZGUuRU5URVI6CgkJCQl0aGlzLl9ldmVudEhhbmRsZXIoIGV2ZW50ICk7CgkJCQlicmVhazsKCQkJY2FzZSBrZXlDb2RlLkhPTUU6CgkJCQl0b0ZvY3VzID0gdGhpcy5oZWFkZXJzWyAwIF07CgkJCQlicmVhazsKCQkJY2FzZSBrZXlDb2RlLkVORDoKCQkJCXRvRm9jdXMgPSB0aGlzLmhlYWRlcnNbIGxlbmd0aCAtIDEgXTsKCQkJCWJyZWFrOwoJCX0KCgkJaWYgKCB0b0ZvY3VzICkgewoJCQkkKCBldmVudC50YXJnZXQgKS5hdHRyKCAidGFiSW5kZXgiLCAtMSApOwoJCQkkKCB0b0ZvY3VzICkuYXR0ciggInRhYkluZGV4IiwgMCApOwoJCQl0b0ZvY3VzLmZvY3VzKCk7CgkJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgkJfQoJfSwKCglfcGFuZWxLZXlEb3duIDogZnVuY3Rpb24oIGV2ZW50ICkgewoJCWlmICggZXZlbnQua2V5Q29kZSA9PT0gJC51aS5rZXlDb2RlLlVQICYmIGV2ZW50LmN0cmxLZXkgKSB7CgkJCSQoIGV2ZW50LmN1cnJlbnRUYXJnZXQgKS5wcmV2KCkuZm9jdXMoKTsKCQl9Cgl9LAoKCXJlZnJlc2g6IGZ1bmN0aW9uKCkgewoJCXZhciBtYXhIZWlnaHQsIG92ZXJmbG93LAoJCQloZWlnaHRTdHlsZSA9IHRoaXMub3B0aW9ucy5oZWlnaHRTdHlsZSwKCQkJcGFyZW50ID0gdGhpcy5lbGVtZW50LnBhcmVudCgpOwoKCgkJaWYgKCBoZWlnaHRTdHlsZSA9PT0gImZpbGwiICkgewoJCQkvLyBJRSA2IHRyZWF0cyBoZWlnaHQgbGlrZSBtaW5IZWlnaHQsIHNvIHdlIG5lZWQgdG8gdHVybiBvZmYgb3ZlcmZsb3cKCQkJLy8gaW4gb3JkZXIgdG8gZ2V0IGEgcmVsaWFibGUgaGVpZ2h0CgkJCS8vIHdlIHVzZSB0aGUgbWluSGVpZ2h0IHN1cHBvcnQgdGVzdCBiZWNhdXNlIHdlIGFzc3VtZSB0aGF0IG9ubHkKCQkJLy8gYnJvd3NlcnMgdGhhdCBkb24ndCBzdXBwb3J0IG1pbkhlaWdodCB3aWxsIHRyZWF0IGhlaWdodCBhcyBtaW5IZWlnaHQKCQkJaWYgKCAhJC5zdXBwb3J0Lm1pbkhlaWdodCApIHsKCQkJCW92ZXJmbG93ID0gcGFyZW50LmNzcyggIm92ZXJmbG93IiApOwoJCQkJcGFyZW50LmNzcyggIm92ZXJmbG93IiwgImhpZGRlbiIpOwoJCQl9CgkJCW1heEhlaWdodCA9IHBhcmVudC5oZWlnaHQoKTsKCQkJdGhpcy5lbGVtZW50LnNpYmxpbmdzKCAiOnZpc2libGUiICkuZWFjaChmdW5jdGlvbigpIHsKCQkJCXZhciBlbGVtID0gJCggdGhpcyApLAoJCQkJCXBvc2l0aW9uID0gZWxlbS5jc3MoICJwb3NpdGlvbiIgKTsKCgkJCQlpZiAoIHBvc2l0aW9uID09PSAiYWJzb2x1dGUiIHx8IHBvc2l0aW9uID09PSAiZml4ZWQiICkgewoJCQkJCXJldHVybjsKCQkJCX0KCQkJCW1heEhlaWdodCAtPSBlbGVtLm91dGVySGVpZ2h0KCB0cnVlICk7CgkJCX0pOwoJCQlpZiAoIG92ZXJmbG93ICkgewoJCQkJcGFyZW50LmNzcyggIm92ZXJmbG93Iiwgb3ZlcmZsb3cgKTsKCQkJfQoKCQkJdGhpcy5oZWFkZXJzLmVhY2goZnVuY3Rpb24oKSB7CgkJCQltYXhIZWlnaHQgLT0gJCggdGhpcyApLm91dGVySGVpZ2h0KCB0cnVlICk7CgkJCX0pOwoKCQkJdGhpcy5oZWFkZXJzLm5leHQoKQoJCQkJLmVhY2goZnVuY3Rpb24oKSB7CgkJCQkJJCggdGhpcyApLmhlaWdodCggTWF0aC5tYXgoIDAsIG1heEhlaWdodCAtCgkJCQkJCSQoIHRoaXMgKS5pbm5lckhlaWdodCgpICsgJCggdGhpcyApLmhlaWdodCgpICkgKTsKCQkJCX0pCgkJCQkuY3NzKCAib3ZlcmZsb3ciLCAiYXV0byIgKTsKCQl9IGVsc2UgaWYgKCBoZWlnaHRTdHlsZSA9PT0gImF1dG8iICkgewoJCQltYXhIZWlnaHQgPSAwOwoJCQl0aGlzLmhlYWRlcnMubmV4dCgpCgkJCQkuZWFjaChmdW5jdGlvbigpIHsKCQkJCQltYXhIZWlnaHQgPSBNYXRoLm1heCggbWF4SGVpZ2h0LCAkKCB0aGlzICkuY3NzKCAiaGVpZ2h0IiwgIiIgKS5oZWlnaHQoKSApOwoJCQkJfSkKCQkJCS5oZWlnaHQoIG1heEhlaWdodCApOwoJCX0KCX0sCgoJX2FjdGl2YXRlOiBmdW5jdGlvbiggaW5kZXggKSB7CgkJdmFyIGFjdGl2ZSA9IHRoaXMuX2ZpbmRBY3RpdmUoIGluZGV4IClbIDAgXTsKCgkJLy8gdHJ5aW5nIHRvIGFjdGl2YXRlIHRoZSBhbHJlYWR5IGFjdGl2ZSBwYW5lbAoJCWlmICggYWN0aXZlID09PSB0aGlzLmFjdGl2ZVsgMCBdICkgewoJCQlyZXR1cm47CgkJfQoKCQkvLyB0cnlpbmcgdG8gY29sbGFwc2UsIHNpbXVsYXRlIGEgY2xpY2sgb24gdGhlIGN1cnJlbnRseSBhY3RpdmUgaGVhZGVyCgkJYWN0aXZlID0gYWN0aXZlIHx8IHRoaXMuYWN0aXZlWyAwIF07CgoJCXRoaXMuX2V2ZW50SGFuZGxlcih7CgkJCXRhcmdldDogYWN0aXZlLAoJCQljdXJyZW50VGFyZ2V0OiBhY3RpdmUsCgkJCXByZXZlbnREZWZhdWx0OiAkLm5vb3AKCQl9KTsKCX0sCgoJX2ZpbmRBY3RpdmU6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHsKCQlyZXR1cm4gdHlwZW9mIHNlbGVjdG9yID09PSAibnVtYmVyIiA/IHRoaXMuaGVhZGVycy5lcSggc2VsZWN0b3IgKSA6ICQoKTsKCX0sCgoJX3NldHVwRXZlbnRzOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJdmFyIGV2ZW50cyA9IHt9OwoJCWlmICggIWV2ZW50ICkgewoJCQlyZXR1cm47CgkJfQoJCSQuZWFjaCggZXZlbnQuc3BsaXQoIiAiKSwgZnVuY3Rpb24oIGluZGV4LCBldmVudE5hbWUgKSB7CgkJCWV2ZW50c1sgZXZlbnROYW1lIF0gPSAiX2V2ZW50SGFuZGxlciI7CgkJfSk7CgkJdGhpcy5fb24oIHRoaXMuaGVhZGVycywgZXZlbnRzICk7Cgl9LAoKCV9ldmVudEhhbmRsZXI6IGZ1bmN0aW9uKCBldmVudCApIHsKCQl2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucywKCQkJYWN0aXZlID0gdGhpcy5hY3RpdmUsCgkJCWNsaWNrZWQgPSAkKCBldmVudC5jdXJyZW50VGFyZ2V0ICksCgkJCWNsaWNrZWRJc0FjdGl2ZSA9IGNsaWNrZWRbIDAgXSA9PT0gYWN0aXZlWyAwIF0sCgkJCWNvbGxhcHNpbmcgPSBjbGlja2VkSXNBY3RpdmUgJiYgb3B0aW9ucy5jb2xsYXBzaWJsZSwKCQkJdG9TaG93ID0gY29sbGFwc2luZyA/ICQoKSA6IGNsaWNrZWQubmV4dCgpLAoJCQl0b0hpZGUgPSBhY3RpdmUubmV4dCgpLAoJCQlldmVudERhdGEgPSB7CgkJCQlvbGRIZWFkZXI6IGFjdGl2ZSwKCQkJCW9sZFBhbmVsOiB0b0hpZGUsCgkJCQluZXdIZWFkZXI6IGNvbGxhcHNpbmcgPyAkKCkgOiBjbGlja2VkLAoJCQkJbmV3UGFuZWw6IHRvU2hvdwoJCQl9OwoKCQlldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoKCQlpZiAoCgkJCQkvLyBjbGljayBvbiBhY3RpdmUgaGVhZGVyLCBidXQgbm90IGNvbGxhcHNpYmxlCgkJCQkoIGNsaWNrZWRJc0FjdGl2ZSAmJiAhb3B0aW9ucy5jb2xsYXBzaWJsZSApIHx8CgkJCQkvLyBhbGxvdyBjYW5jZWxpbmcgYWN0aXZhdGlvbgoJCQkJKCB0aGlzLl90cmlnZ2VyKCAiYmVmb3JlQWN0aXZhdGUiLCBldmVudCwgZXZlbnREYXRhICkgPT09IGZhbHNlICkgKSB7CgkJCXJldHVybjsKCQl9CgoJCW9wdGlvbnMuYWN0aXZlID0gY29sbGFwc2luZyA/IGZhbHNlIDogdGhpcy5oZWFkZXJzLmluZGV4KCBjbGlja2VkICk7CgoJCS8vIHdoZW4gdGhlIGNhbGwgdG8gLl90b2dnbGUoKSBjb21lcyBhZnRlciB0aGUgY2xhc3MgY2hhbmdlcwoJCS8vIGl0IGNhdXNlcyBhIHZlcnkgb2RkIGJ1ZyBpbiBJRSA4IChzZWUgIzY3MjApCgkJdGhpcy5hY3RpdmUgPSBjbGlja2VkSXNBY3RpdmUgPyAkKCkgOiBjbGlja2VkOwoJCXRoaXMuX3RvZ2dsZSggZXZlbnREYXRhICk7CgoJCS8vIHN3aXRjaCBjbGFzc2VzCgkJLy8gY29ybmVyIGNsYXNzZXMgb24gdGhlIHByZXZpb3VzbHkgYWN0aXZlIGhlYWRlciBzdGF5IGFmdGVyIHRoZSBhbmltYXRpb24KCQlhY3RpdmUucmVtb3ZlQ2xhc3MoICJ1aS1hY2NvcmRpb24taGVhZGVyLWFjdGl2ZSB1aS1zdGF0ZS1hY3RpdmUiICk7CgkJaWYgKCBvcHRpb25zLmljb25zICkgewoJCQlhY3RpdmUuY2hpbGRyZW4oICIudWktYWNjb3JkaW9uLWhlYWRlci1pY29uIiApCgkJCQkucmVtb3ZlQ2xhc3MoIG9wdGlvbnMuaWNvbnMuYWN0aXZlSGVhZGVyICkKCQkJCS5hZGRDbGFzcyggb3B0aW9ucy5pY29ucy5oZWFkZXIgKTsKCQl9CgoJCWlmICggIWNsaWNrZWRJc0FjdGl2ZSApIHsKCQkJY2xpY2tlZAoJCQkJLnJlbW92ZUNsYXNzKCAidWktY29ybmVyLWFsbCIgKQoJCQkJLmFkZENsYXNzKCAidWktYWNjb3JkaW9uLWhlYWRlci1hY3RpdmUgdWktc3RhdGUtYWN0aXZlIHVpLWNvcm5lci10b3AiICk7CgkJCWlmICggb3B0aW9ucy5pY29ucyApIHsKCQkJCWNsaWNrZWQuY2hpbGRyZW4oICIudWktYWNjb3JkaW9uLWhlYWRlci1pY29uIiApCgkJCQkJLnJlbW92ZUNsYXNzKCBvcHRpb25zLmljb25zLmhlYWRlciApCgkJCQkJLmFkZENsYXNzKCBvcHRpb25zLmljb25zLmFjdGl2ZUhlYWRlciApOwoJCQl9CgoJCQljbGlja2VkCgkJCQkubmV4dCgpCgkJCQkuYWRkQ2xhc3MoICJ1aS1hY2NvcmRpb24tY29udGVudC1hY3RpdmUiICk7CgkJfQoJfSwKCglfdG9nZ2xlOiBmdW5jdGlvbiggZGF0YSApIHsKCQl2YXIgdG9TaG93ID0gZGF0YS5uZXdQYW5lbCwKCQkJdG9IaWRlID0gdGhpcy5wcmV2U2hvdy5sZW5ndGggPyB0aGlzLnByZXZTaG93IDogZGF0YS5vbGRQYW5lbDsKCgkJLy8gaGFuZGxlIGFjdGl2YXRpbmcgYSBwYW5lbCBkdXJpbmcgdGhlIGFuaW1hdGlvbiBmb3IgYW5vdGhlciBhY3RpdmF0aW9uCgkJdGhpcy5wcmV2U2hvdy5hZGQoIHRoaXMucHJldkhpZGUgKS5zdG9wKCB0cnVlLCB0cnVlICk7CgkJdGhpcy5wcmV2U2hvdyA9IHRvU2hvdzsKCQl0aGlzLnByZXZIaWRlID0gdG9IaWRlOwoKCQlpZiAoIHRoaXMub3B0aW9ucy5hbmltYXRlICkgewoJCQl0aGlzLl9hbmltYXRlKCB0b1Nob3csIHRvSGlkZSwgZGF0YSApOwoJCX0gZWxzZSB7CgkJCXRvSGlkZS5oaWRlKCk7CgkJCXRvU2hvdy5zaG93KCk7CgkJCXRoaXMuX3RvZ2dsZUNvbXBsZXRlKCBkYXRhICk7CgkJfQoKCQl0b0hpZGUuYXR0cih7CgkJCSJhcmlhLWV4cGFuZGVkIjogImZhbHNlIiwKCQkJImFyaWEtaGlkZGVuIjogInRydWUiCgkJfSk7CgkJdG9IaWRlLnByZXYoKS5hdHRyKCAiYXJpYS1zZWxlY3RlZCIsICJmYWxzZSIgKTsKCQkvLyBpZiB3ZSdyZSBzd2l0Y2hpbmcgcGFuZWxzLCByZW1vdmUgdGhlIG9sZCBoZWFkZXIgZnJvbSB0aGUgdGFiIG9yZGVyCgkJLy8gaWYgd2UncmUgb3BlbmluZyBmcm9tIGNvbGxhcHNlZCBzdGF0ZSwgcmVtb3ZlIHRoZSBwcmV2aW91cyBoZWFkZXIgZnJvbSB0aGUgdGFiIG9yZGVyCgkJLy8gaWYgd2UncmUgY29sbGFwc2luZywgdGhlbiBrZWVwIHRoZSBjb2xsYXBzaW5nIGhlYWRlciBpbiB0aGUgdGFiIG9yZGVyCgkJaWYgKCB0b1Nob3cubGVuZ3RoICYmIHRvSGlkZS5sZW5ndGggKSB7CgkJCXRvSGlkZS5wcmV2KCkuYXR0ciggInRhYkluZGV4IiwgLTEgKTsKCQl9IGVsc2UgaWYgKCB0b1Nob3cubGVuZ3RoICkgewoJCQl0aGlzLmhlYWRlcnMuZmlsdGVyKGZ1bmN0aW9uKCkgewoJCQkJcmV0dXJuICQoIHRoaXMgKS5hdHRyKCAidGFiSW5kZXgiICkgPT09IDA7CgkJCX0pCgkJCS5hdHRyKCAidGFiSW5kZXgiLCAtMSApOwoJCX0KCgkJdG9TaG93CgkJCS5hdHRyKHsKCQkJCSJhcmlhLWV4cGFuZGVkIjogInRydWUiLAoJCQkJImFyaWEtaGlkZGVuIjogImZhbHNlIgoJCQl9KQoJCQkucHJldigpCgkJCQkuYXR0cih7CgkJCQkJImFyaWEtc2VsZWN0ZWQiOiAidHJ1ZSIsCgkJCQkJdGFiSW5kZXg6IDAKCQkJCX0pOwoJfSwKCglfYW5pbWF0ZTogZnVuY3Rpb24oIHRvU2hvdywgdG9IaWRlLCBkYXRhICkgewoJCXZhciB0b3RhbCwgZWFzaW5nLCBkdXJhdGlvbiwKCQkJdGhhdCA9IHRoaXMsCgkJCWFkanVzdCA9IDAsCgkJCWRvd24gPSB0b1Nob3cubGVuZ3RoICYmCgkJCQkoICF0b0hpZGUubGVuZ3RoIHx8ICggdG9TaG93LmluZGV4KCkgPCB0b0hpZGUuaW5kZXgoKSApICksCgkJCWFuaW1hdGUgPSB0aGlzLm9wdGlvbnMuYW5pbWF0ZSB8fCB7fSwKCQkJb3B0aW9ucyA9IGRvd24gJiYgYW5pbWF0ZS5kb3duIHx8IGFuaW1hdGUsCgkJCWNvbXBsZXRlID0gZnVuY3Rpb24oKSB7CgkJCQl0aGF0Ll90b2dnbGVDb21wbGV0ZSggZGF0YSApOwoJCQl9OwoKCQlpZiAoIHR5cGVvZiBvcHRpb25zID09PSAibnVtYmVyIiApIHsKCQkJZHVyYXRpb24gPSBvcHRpb25zOwoJCX0KCQlpZiAoIHR5cGVvZiBvcHRpb25zID09PSAic3RyaW5nIiApIHsKCQkJZWFzaW5nID0gb3B0aW9uczsKCQl9CgkJLy8gZmFsbCBiYWNrIGZyb20gb3B0aW9ucyB0byBhbmltYXRpb24gaW4gY2FzZSBvZiBwYXJ0aWFsIGRvd24gc2V0dGluZ3MKCQllYXNpbmcgPSBlYXNpbmcgfHwgb3B0aW9ucy5lYXNpbmcgfHwgYW5pbWF0ZS5lYXNpbmc7CgkJZHVyYXRpb24gPSBkdXJhdGlvbiB8fCBvcHRpb25zLmR1cmF0aW9uIHx8IGFuaW1hdGUuZHVyYXRpb247CgoJCWlmICggIXRvSGlkZS5sZW5ndGggKSB7CgkJCXJldHVybiB0b1Nob3cuYW5pbWF0ZSggc2hvd1Byb3BzLCBkdXJhdGlvbiwgZWFzaW5nLCBjb21wbGV0ZSApOwoJCX0KCQlpZiAoICF0b1Nob3cubGVuZ3RoICkgewoJCQlyZXR1cm4gdG9IaWRlLmFuaW1hdGUoIGhpZGVQcm9wcywgZHVyYXRpb24sIGVhc2luZywgY29tcGxldGUgKTsKCQl9CgoJCXRvdGFsID0gdG9TaG93LnNob3coKS5vdXRlckhlaWdodCgpOwoJCXRvSGlkZS5hbmltYXRlKCBoaWRlUHJvcHMsIHsKCQkJZHVyYXRpb246IGR1cmF0aW9uLAoJCQllYXNpbmc6IGVhc2luZywKCQkJc3RlcDogZnVuY3Rpb24oIG5vdywgZnggKSB7CgkJCQlmeC5ub3cgPSBNYXRoLnJvdW5kKCBub3cgKTsKCQkJfQoJCX0pOwoJCXRvU2hvdwoJCQkuaGlkZSgpCgkJCS5hbmltYXRlKCBzaG93UHJvcHMsIHsKCQkJCWR1cmF0aW9uOiBkdXJhdGlvbiwKCQkJCWVhc2luZzogZWFzaW5nLAoJCQkJY29tcGxldGU6IGNvbXBsZXRlLAoJCQkJc3RlcDogZnVuY3Rpb24oIG5vdywgZnggKSB7CgkJCQkJZngubm93ID0gTWF0aC5yb3VuZCggbm93ICk7CgkJCQkJaWYgKCBmeC5wcm9wICE9PSAiaGVpZ2h0IiApIHsKCQkJCQkJYWRqdXN0ICs9IGZ4Lm5vdzsKCQkJCQl9IGVsc2UgaWYgKCB0aGF0Lm9wdGlvbnMuaGVpZ2h0U3R5bGUgIT09ICJjb250ZW50IiApIHsKCQkJCQkJZngubm93ID0gTWF0aC5yb3VuZCggdG90YWwgLSB0b0hpZGUub3V0ZXJIZWlnaHQoKSAtIGFkanVzdCApOwoJCQkJCQlhZGp1c3QgPSAwOwoJCQkJCX0KCQkJCX0KCQkJfSk7Cgl9LAoKCV90b2dnbGVDb21wbGV0ZTogZnVuY3Rpb24oIGRhdGEgKSB7CgkJdmFyIHRvSGlkZSA9IGRhdGEub2xkUGFuZWw7CgoJCXRvSGlkZQoJCQkucmVtb3ZlQ2xhc3MoICJ1aS1hY2NvcmRpb24tY29udGVudC1hY3RpdmUiICkKCQkJLnByZXYoKQoJCQkJLnJlbW92ZUNsYXNzKCAidWktY29ybmVyLXRvcCIgKQoJCQkJLmFkZENsYXNzKCAidWktY29ybmVyLWFsbCIgKTsKCgkJLy8gV29yayBhcm91bmQgZm9yIHJlbmRlcmluZyBidWcgaW4gSUUgKCM1NDIxKQoJCWlmICggdG9IaWRlLmxlbmd0aCApIHsKCQkJdG9IaWRlLnBhcmVudCgpWzBdLmNsYXNzTmFtZSA9IHRvSGlkZS5wYXJlbnQoKVswXS5jbGFzc05hbWU7CgkJfQoKCQl0aGlzLl90cmlnZ2VyKCAiYWN0aXZhdGUiLCBudWxsLCBkYXRhICk7Cgl9Cn0pOwoKCgovLyBERVBSRUNBVEVECmlmICggJC51aUJhY2tDb21wYXQgIT09IGZhbHNlICkgewoJLy8gbmF2aWdhdGlvbiBvcHRpb25zCgkoZnVuY3Rpb24oICQsIHByb3RvdHlwZSApIHsKCQkkLmV4dGVuZCggcHJvdG90eXBlLm9wdGlvbnMsIHsKCQkJbmF2aWdhdGlvbjogZmFsc2UsCgkJCW5hdmlnYXRpb25GaWx0ZXI6IGZ1bmN0aW9uKCkgewoJCQkJcmV0dXJuIHRoaXMuaHJlZi50b0xvd2VyQ2FzZSgpID09PSBsb2NhdGlvbi5ocmVmLnRvTG93ZXJDYXNlKCk7CgkJCX0KCQl9KTsKCgkJdmFyIF9jcmVhdGUgPSBwcm90b3R5cGUuX2NyZWF0ZTsKCQlwcm90b3R5cGUuX2NyZWF0ZSA9IGZ1bmN0aW9uKCkgewoJCQlpZiAoIHRoaXMub3B0aW9ucy5uYXZpZ2F0aW9uICkgewoJCQkJdmFyIHRoYXQgPSB0aGlzLAoJCQkJCWhlYWRlcnMgPSB0aGlzLmVsZW1lbnQuZmluZCggdGhpcy5vcHRpb25zLmhlYWRlciApLAoJCQkJCWNvbnRlbnQgPSBoZWFkZXJzLm5leHQoKSwKCQkJCQljdXJyZW50ID0gaGVhZGVycy5hZGQoIGNvbnRlbnQgKQoJCQkJCQkuZmluZCggImEiICkKCQkJCQkJLmZpbHRlciggdGhpcy5vcHRpb25zLm5hdmlnYXRpb25GaWx0ZXIgKQoJCQkJCQlbIDAgXTsKCQkJCWlmICggY3VycmVudCApIHsKCQkJCQloZWFkZXJzLmFkZCggY29udGVudCApLmVhY2goIGZ1bmN0aW9uKCBpbmRleCApIHsKCQkJCQkJaWYgKCAkLmNvbnRhaW5zKCB0aGlzLCBjdXJyZW50ICkgKSB7CgkJCQkJCQl0aGF0Lm9wdGlvbnMuYWN0aXZlID0gTWF0aC5mbG9vciggaW5kZXggLyAyICk7CgkJCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQkJCX0KCQkJCQl9KTsKCQkJCX0KCQkJfQoJCQlfY3JlYXRlLmNhbGwoIHRoaXMgKTsKCQl9OwoJfSggalF1ZXJ5LCBqUXVlcnkudWkuYWNjb3JkaW9uLnByb3RvdHlwZSApICk7CgoJLy8gaGVpZ2h0IG9wdGlvbnMKCShmdW5jdGlvbiggJCwgcHJvdG90eXBlICkgewoJCSQuZXh0ZW5kKCBwcm90b3R5cGUub3B0aW9ucywgewoJCQloZWlnaHRTdHlsZTogbnVsbCwgLy8gcmVtb3ZlIGRlZmF1bHQgc28gd2UgZmFsbCBiYWNrIHRvIG9sZCB2YWx1ZXMKCQkJYXV0b0hlaWdodDogdHJ1ZSwgLy8gdXNlIGhlaWdodFN0eWxlOiAiYXV0byIKCQkJY2xlYXJTdHlsZTogZmFsc2UsIC8vIHVzZSBoZWlnaHRTdHlsZTogImNvbnRlbnQiCgkJCWZpbGxTcGFjZTogZmFsc2UgLy8gdXNlIGhlaWdodFN0eWxlOiAiZmlsbCIKCQl9KTsKCgkJdmFyIF9jcmVhdGUgPSBwcm90b3R5cGUuX2NyZWF0ZSwKCQkJX3NldE9wdGlvbiA9IHByb3RvdHlwZS5fc2V0T3B0aW9uOwoKCQkkLmV4dGVuZCggcHJvdG90eXBlLCB7CgkJCV9jcmVhdGU6IGZ1bmN0aW9uKCkgewoJCQkJdGhpcy5vcHRpb25zLmhlaWdodFN0eWxlID0gdGhpcy5vcHRpb25zLmhlaWdodFN0eWxlIHx8CgkJCQkJdGhpcy5fbWVyZ2VIZWlnaHRTdHlsZSgpOwoKCQkJCV9jcmVhdGUuY2FsbCggdGhpcyApOwoJCQl9LAoKCQkJX3NldE9wdGlvbjogZnVuY3Rpb24oIGtleSApIHsKCQkJCWlmICgga2V5ID09PSAiYXV0b0hlaWdodCIgfHwga2V5ID09PSAiY2xlYXJTdHlsZSIgfHwga2V5ID09PSAiZmlsbFNwYWNlIiApIHsKCQkJCQl0aGlzLm9wdGlvbnMuaGVpZ2h0U3R5bGUgPSB0aGlzLl9tZXJnZUhlaWdodFN0eWxlKCk7CgkJCQl9CgkJCQlfc2V0T3B0aW9uLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTsKCQkJfSwKCgkJCV9tZXJnZUhlaWdodFN0eWxlOiBmdW5jdGlvbigpIHsKCQkJCXZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zOwoKCQkJCWlmICggb3B0aW9ucy5maWxsU3BhY2UgKSB7CgkJCQkJcmV0dXJuICJmaWxsIjsKCQkJCX0KCgkJCQlpZiAoIG9wdGlvbnMuY2xlYXJTdHlsZSApIHsKCQkJCQlyZXR1cm4gImNvbnRlbnQiOwoJCQkJfQoKCQkJCWlmICggb3B0aW9ucy5hdXRvSGVpZ2h0ICkgewoJCQkJCXJldHVybiAiYXV0byI7CgkJCQl9CgkJCX0KCQl9KTsKCX0oIGpRdWVyeSwgalF1ZXJ5LnVpLmFjY29yZGlvbi5wcm90b3R5cGUgKSApOwoKCS8vIGljb24gb3B0aW9ucwoJKGZ1bmN0aW9uKCAkLCBwcm90b3R5cGUgKSB7CgkJJC5leHRlbmQoIHByb3RvdHlwZS5vcHRpb25zLmljb25zLCB7CgkJCWFjdGl2ZUhlYWRlcjogbnVsbCwgLy8gcmVtb3ZlIGRlZmF1bHQgc28gd2UgZmFsbCBiYWNrIHRvIG9sZCB2YWx1ZXMKCQkJaGVhZGVyU2VsZWN0ZWQ6ICJ1aS1pY29uLXRyaWFuZ2xlLTEtcyIKCQl9KTsKCgkJdmFyIF9jcmVhdGVJY29ucyA9IHByb3RvdHlwZS5fY3JlYXRlSWNvbnM7CgkJcHJvdG90eXBlLl9jcmVhdGVJY29ucyA9IGZ1bmN0aW9uKCkgewoJCQlpZiAoIHRoaXMub3B0aW9ucy5pY29ucyApIHsKCQkJCXRoaXMub3B0aW9ucy5pY29ucy5hY3RpdmVIZWFkZXIgPSB0aGlzLm9wdGlvbnMuaWNvbnMuYWN0aXZlSGVhZGVyIHx8CgkJCQkJdGhpcy5vcHRpb25zLmljb25zLmhlYWRlclNlbGVjdGVkOwoJCQl9CgkJCV9jcmVhdGVJY29ucy5jYWxsKCB0aGlzICk7CgkJfTsKCX0oIGpRdWVyeSwgalF1ZXJ5LnVpLmFjY29yZGlvbi5wcm90b3R5cGUgKSApOwoKCS8vIGV4cGFuZGVkIGFjdGl2ZSBvcHRpb24sIGFjdGl2YXRlIG1ldGhvZAoJKGZ1bmN0aW9uKCAkLCBwcm90b3R5cGUgKSB7CgkJcHJvdG90eXBlLmFjdGl2YXRlID0gcHJvdG90eXBlLl9hY3RpdmF0ZTsKCgkJdmFyIF9maW5kQWN0aXZlID0gcHJvdG90eXBlLl9maW5kQWN0aXZlOwoJCXByb3RvdHlwZS5fZmluZEFjdGl2ZSA9IGZ1bmN0aW9uKCBpbmRleCApIHsKCQkJaWYgKCBpbmRleCA9PT0gLTEgKSB7CgkJCQlpbmRleCA9IGZhbHNlOwoJCQl9CgkJCWlmICggaW5kZXggJiYgdHlwZW9mIGluZGV4ICE9PSAibnVtYmVyIiApIHsKCQkJCWluZGV4ID0gdGhpcy5oZWFkZXJzLmluZGV4KCB0aGlzLmhlYWRlcnMuZmlsdGVyKCBpbmRleCApICk7CgkJCQlpZiAoIGluZGV4ID09PSAtMSApIHsKCQkJCQlpbmRleCA9IGZhbHNlOwoJCQkJfQoJCQl9CgkJCXJldHVybiBfZmluZEFjdGl2ZS5jYWxsKCB0aGlzLCBpbmRleCApOwoJCX07Cgl9KCBqUXVlcnksIGpRdWVyeS51aS5hY2NvcmRpb24ucHJvdG90eXBlICkgKTsKCgkvLyByZXNpemUgbWV0aG9kCglqUXVlcnkudWkuYWNjb3JkaW9uLnByb3RvdHlwZS5yZXNpemUgPSBqUXVlcnkudWkuYWNjb3JkaW9uLnByb3RvdHlwZS5yZWZyZXNoOwoKCS8vIGNoYW5nZSBldmVudHMKCShmdW5jdGlvbiggJCwgcHJvdG90eXBlICkgewoJCSQuZXh0ZW5kKCBwcm90b3R5cGUub3B0aW9ucywgewoJCQljaGFuZ2U6IG51bGwsCgkJCWNoYW5nZXN0YXJ0OiBudWxsCgkJfSk7CgoJCXZhciBfdHJpZ2dlciA9IHByb3RvdHlwZS5fdHJpZ2dlcjsKCQlwcm90b3R5cGUuX3RyaWdnZXIgPSBmdW5jdGlvbiggdHlwZSwgZXZlbnQsIGRhdGEgKSB7CgkJCXZhciByZXQgPSBfdHJpZ2dlci5hcHBseSggdGhpcywgYXJndW1lbnRzICk7CgkJCWlmICggIXJldCApIHsKCQkJCXJldHVybiBmYWxzZTsKCQkJfQoKCQkJaWYgKCB0eXBlID09PSAiYmVmb3JlQWN0aXZhdGUiICkgewoJCQkJcmV0ID0gX3RyaWdnZXIuY2FsbCggdGhpcywgImNoYW5nZXN0YXJ0IiwgZXZlbnQsIHsKCQkJCQlvbGRIZWFkZXI6IGRhdGEub2xkSGVhZGVyLAoJCQkJCW9sZENvbnRlbnQ6IGRhdGEub2xkUGFuZWwsCgkJCQkJbmV3SGVhZGVyOiBkYXRhLm5ld0hlYWRlciwKCQkJCQluZXdDb250ZW50OiBkYXRhLm5ld1BhbmVsCgkJCQl9KTsKCQkJfSBlbHNlIGlmICggdHlwZSA9PT0gImFjdGl2YXRlIiApIHsKCQkJCXJldCA9IF90cmlnZ2VyLmNhbGwoIHRoaXMsICJjaGFuZ2UiLCBldmVudCwgewoJCQkJCW9sZEhlYWRlcjogZGF0YS5vbGRIZWFkZXIsCgkJCQkJb2xkQ29udGVudDogZGF0YS5vbGRQYW5lbCwKCQkJCQluZXdIZWFkZXI6IGRhdGEubmV3SGVhZGVyLAoJCQkJCW5ld0NvbnRlbnQ6IGRhdGEubmV3UGFuZWwKCQkJCX0pOwoJCQl9CgkJCXJldHVybiByZXQ7CgkJfTsKCX0oIGpRdWVyeSwgalF1ZXJ5LnVpLmFjY29yZGlvbi5wcm90b3R5cGUgKSApOwoKCS8vIGFuaW1hdGVkIG9wdGlvbgoJLy8gTk9URTogdGhpcyBvbmx5IHByb3ZpZGVzIHN1cHBvcnQgZm9yICJzbGlkZSIsICJib3VuY2VzbGlkZSIsIGFuZCBlYXNpbmdzCgkvLyBub3QgdGhlIGZ1bGwgJC51aS5hY2NvcmRpb24uYW5pbWF0aW9ucyBBUEkKCShmdW5jdGlvbiggJCwgcHJvdG90eXBlICkgewoJCSQuZXh0ZW5kKCBwcm90b3R5cGUub3B0aW9ucywgewoJCQlhbmltYXRlOiBudWxsLAoJCQlhbmltYXRlZDogInNsaWRlIgoJCX0pOwoKCQl2YXIgX2NyZWF0ZSA9IHByb3RvdHlwZS5fY3JlYXRlOwoJCXByb3RvdHlwZS5fY3JlYXRlID0gZnVuY3Rpb24oKSB7CgkJCXZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zOwoJCQlpZiAoIG9wdGlvbnMuYW5pbWF0ZSA9PT0gbnVsbCApIHsKCQkJCWlmICggIW9wdGlvbnMuYW5pbWF0ZWQgKSB7CgkJCQkJb3B0aW9ucy5hbmltYXRlID0gZmFsc2U7CgkJCQl9IGVsc2UgaWYgKCBvcHRpb25zLmFuaW1hdGVkID09PSAic2xpZGUiICkgewoJCQkJCW9wdGlvbnMuYW5pbWF0ZSA9IDMwMDsKCQkJCX0gZWxzZSBpZiAoIG9wdGlvbnMuYW5pbWF0ZWQgPT09ICJib3VuY2VzbGlkZSIgKSB7CgkJCQkJb3B0aW9ucy5hbmltYXRlID0gewoJCQkJCQlkdXJhdGlvbjogMjAwLAoJCQkJCQlkb3duOiB7CgkJCQkJCQllYXNpbmc6ICJlYXNlT3V0Qm91bmNlIiwKCQkJCQkJCWR1cmF0aW9uOiAxMDAwCgkJCQkJCX0KCQkJCQl9OwoJCQkJfSBlbHNlIHsKCQkJCQlvcHRpb25zLmFuaW1hdGUgPSBvcHRpb25zLmFuaW1hdGVkOwoJCQkJfQoJCQl9CgoJCQlfY3JlYXRlLmNhbGwoIHRoaXMgKTsKCQl9OwoJfSggalF1ZXJ5LCBqUXVlcnkudWkuYWNjb3JkaW9uLnByb3RvdHlwZSApICk7Cn0KCn0pKCBqUXVlcnkgKTsKKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7CgovLyB1c2VkIHRvIHByZXZlbnQgcmFjZSBjb25kaXRpb25zIHdpdGggcmVtb3RlIGRhdGEgc291cmNlcwp2YXIgcmVxdWVzdEluZGV4ID0gMDsKCiQud2lkZ2V0KCAidWkuYXV0b2NvbXBsZXRlIiwgewoJdmVyc2lvbjogIjEuOS4yIiwKCWRlZmF1bHRFbGVtZW50OiAiPGlucHV0PiIsCglvcHRpb25zOiB7CgkJYXBwZW5kVG86ICJib2R5IiwKCQlhdXRvRm9jdXM6IGZhbHNlLAoJCWRlbGF5OiAzMDAsCgkJbWluTGVuZ3RoOiAxLAoJCXBvc2l0aW9uOiB7CgkJCW15OiAibGVmdCB0b3AiLAoJCQlhdDogImxlZnQgYm90dG9tIiwKCQkJY29sbGlzaW9uOiAibm9uZSIKCQl9LAoJCXNvdXJjZTogbnVsbCwKCgkJLy8gY2FsbGJhY2tzCgkJY2hhbmdlOiBudWxsLAoJCWNsb3NlOiBudWxsLAoJCWZvY3VzOiBudWxsLAoJCW9wZW46IG51bGwsCgkJcmVzcG9uc2U6IG51bGwsCgkJc2VhcmNoOiBudWxsLAoJCXNlbGVjdDogbnVsbAoJfSwKCglwZW5kaW5nOiAwLAoKCV9jcmVhdGU6IGZ1bmN0aW9uKCkgewoJCS8vIFNvbWUgYnJvd3NlcnMgb25seSByZXBlYXQga2V5ZG93biBldmVudHMsIG5vdCBrZXlwcmVzcyBldmVudHMsCgkJLy8gc28gd2UgdXNlIHRoZSBzdXBwcmVzc0tleVByZXNzIGZsYWcgdG8gZGV0ZXJtaW5lIGlmIHdlJ3ZlIGFscmVhZHkKCQkvLyBoYW5kbGVkIHRoZSBrZXlkb3duIGV2ZW50LiAjNzI2OQoJCS8vIFVuZm9ydHVuYXRlbHkgdGhlIGNvZGUgZm9yICYgaW4ga2V5cHJlc3MgaXMgdGhlIHNhbWUgYXMgdGhlIHVwIGFycm93LAoJCS8vIHNvIHdlIHVzZSB0aGUgc3VwcHJlc3NLZXlQcmVzc1JlcGVhdCBmbGFnIHRvIGF2b2lkIGhhbmRsaW5nIGtleXByZXNzCgkJLy8gZXZlbnRzIHdoZW4gd2Uga25vdyB0aGUga2V5ZG93biBldmVudCB3YXMgdXNlZCB0byBtb2RpZnkgdGhlCgkJLy8gc2VhcmNoIHRlcm0uICM3Nzk5CgkJdmFyIHN1cHByZXNzS2V5UHJlc3MsIHN1cHByZXNzS2V5UHJlc3NSZXBlYXQsIHN1cHByZXNzSW5wdXQ7CgoJCXRoaXMuaXNNdWx0aUxpbmUgPSB0aGlzLl9pc011bHRpTGluZSgpOwoJCXRoaXMudmFsdWVNZXRob2QgPSB0aGlzLmVsZW1lbnRbIHRoaXMuZWxlbWVudC5pcyggImlucHV0LHRleHRhcmVhIiApID8gInZhbCIgOiAidGV4dCIgXTsKCQl0aGlzLmlzTmV3TWVudSA9IHRydWU7CgoJCXRoaXMuZWxlbWVudAoJCQkuYWRkQ2xhc3MoICJ1aS1hdXRvY29tcGxldGUtaW5wdXQiICkKCQkJLmF0dHIoICJhdXRvY29tcGxldGUiLCAib2ZmIiApOwoKCQl0aGlzLl9vbiggdGhpcy5lbGVtZW50LCB7CgkJCWtleWRvd246IGZ1bmN0aW9uKCBldmVudCApIHsKCQkJCWlmICggdGhpcy5lbGVtZW50LnByb3AoICJyZWFkT25seSIgKSApIHsKCQkJCQlzdXBwcmVzc0tleVByZXNzID0gdHJ1ZTsKCQkJCQlzdXBwcmVzc0lucHV0ID0gdHJ1ZTsKCQkJCQlzdXBwcmVzc0tleVByZXNzUmVwZWF0ID0gdHJ1ZTsKCQkJCQlyZXR1cm47CgkJCQl9CgoJCQkJc3VwcHJlc3NLZXlQcmVzcyA9IGZhbHNlOwoJCQkJc3VwcHJlc3NJbnB1dCA9IGZhbHNlOwoJCQkJc3VwcHJlc3NLZXlQcmVzc1JlcGVhdCA9IGZhbHNlOwoJCQkJdmFyIGtleUNvZGUgPSAkLnVpLmtleUNvZGU7CgkJCQlzd2l0Y2goIGV2ZW50LmtleUNvZGUgKSB7CgkJCQljYXNlIGtleUNvZGUuUEFHRV9VUDoKCQkJCQlzdXBwcmVzc0tleVByZXNzID0gdHJ1ZTsKCQkJCQl0aGlzLl9tb3ZlKCAicHJldmlvdXNQYWdlIiwgZXZlbnQgKTsKCQkJCQlicmVhazsKCQkJCWNhc2Uga2V5Q29kZS5QQUdFX0RPV046CgkJCQkJc3VwcHJlc3NLZXlQcmVzcyA9IHRydWU7CgkJCQkJdGhpcy5fbW92ZSggIm5leHRQYWdlIiwgZXZlbnQgKTsKCQkJCQlicmVhazsKCQkJCWNhc2Uga2V5Q29kZS5VUDoKCQkJCQlzdXBwcmVzc0tleVByZXNzID0gdHJ1ZTsKCQkJCQl0aGlzLl9rZXlFdmVudCggInByZXZpb3VzIiwgZXZlbnQgKTsKCQkJCQlicmVhazsKCQkJCWNhc2Uga2V5Q29kZS5ET1dOOgoJCQkJCXN1cHByZXNzS2V5UHJlc3MgPSB0cnVlOwoJCQkJCXRoaXMuX2tleUV2ZW50KCAibmV4dCIsIGV2ZW50ICk7CgkJCQkJYnJlYWs7CgkJCQljYXNlIGtleUNvZGUuRU5URVI6CgkJCQljYXNlIGtleUNvZGUuTlVNUEFEX0VOVEVSOgoJCQkJCS8vIHdoZW4gbWVudSBpcyBvcGVuIGFuZCBoYXMgZm9jdXMKCQkJCQlpZiAoIHRoaXMubWVudS5hY3RpdmUgKSB7CgkJCQkJCS8vICM2MDU1IC0gT3BlcmEgc3RpbGwgYWxsb3dzIHRoZSBrZXlwcmVzcyB0byBvY2N1cgoJCQkJCQkvLyB3aGljaCBjYXVzZXMgZm9ybXMgdG8gc3VibWl0CgkJCQkJCXN1cHByZXNzS2V5UHJlc3MgPSB0cnVlOwoJCQkJCQlldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoJCQkJCQl0aGlzLm1lbnUuc2VsZWN0KCBldmVudCApOwoJCQkJCX0KCQkJCQlicmVhazsKCQkJCWNhc2Uga2V5Q29kZS5UQUI6CgkJCQkJaWYgKCB0aGlzLm1lbnUuYWN0aXZlICkgewoJCQkJCQl0aGlzLm1lbnUuc2VsZWN0KCBldmVudCApOwoJCQkJCX0KCQkJCQlicmVhazsKCQkJCWNhc2Uga2V5Q29kZS5FU0NBUEU6CgkJCQkJaWYgKCB0aGlzLm1lbnUuZWxlbWVudC5pcyggIjp2aXNpYmxlIiApICkgewoJCQkJCQl0aGlzLl92YWx1ZSggdGhpcy50ZXJtICk7CgkJCQkJCXRoaXMuY2xvc2UoIGV2ZW50ICk7CgkJCQkJCS8vIERpZmZlcmVudCBicm93c2VycyBoYXZlIGRpZmZlcmVudCBkZWZhdWx0IGJlaGF2aW9yIGZvciBlc2NhcGUKCQkJCQkJLy8gU2luZ2xlIHByZXNzIGNhbiBtZWFuIHVuZG8gb3IgY2xlYXIKCQkJCQkJLy8gRG91YmxlIHByZXNzIGluIElFIG1lYW5zIGNsZWFyIHRoZSB3aG9sZSBmb3JtCgkJCQkJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgkJCQkJfQoJCQkJCWJyZWFrOwoJCQkJZGVmYXVsdDoKCQkJCQlzdXBwcmVzc0tleVByZXNzUmVwZWF0ID0gdHJ1ZTsKCQkJCQkvLyBzZWFyY2ggdGltZW91dCBzaG91bGQgYmUgdHJpZ2dlcmVkIGJlZm9yZSB0aGUgaW5wdXQgdmFsdWUgaXMgY2hhbmdlZAoJCQkJCXRoaXMuX3NlYXJjaFRpbWVvdXQoIGV2ZW50ICk7CgkJCQkJYnJlYWs7CgkJCQl9CgkJCX0sCgkJCWtleXByZXNzOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJCQlpZiAoIHN1cHByZXNzS2V5UHJlc3MgKSB7CgkJCQkJc3VwcHJlc3NLZXlQcmVzcyA9IGZhbHNlOwoJCQkJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgkJCQkJcmV0dXJuOwoJCQkJfQoJCQkJaWYgKCBzdXBwcmVzc0tleVByZXNzUmVwZWF0ICkgewoJCQkJCXJldHVybjsKCQkJCX0KCgkJCQkvLyByZXBsaWNhdGUgc29tZSBrZXkgaGFuZGxlcnMgdG8gYWxsb3cgdGhlbSB0byByZXBlYXQgaW4gRmlyZWZveCBhbmQgT3BlcmEKCQkJCXZhciBrZXlDb2RlID0gJC51aS5rZXlDb2RlOwoJCQkJc3dpdGNoKCBldmVudC5rZXlDb2RlICkgewoJCQkJY2FzZSBrZXlDb2RlLlBBR0VfVVA6CgkJCQkJdGhpcy5fbW92ZSggInByZXZpb3VzUGFnZSIsIGV2ZW50ICk7CgkJCQkJYnJlYWs7CgkJCQljYXNlIGtleUNvZGUuUEFHRV9ET1dOOgoJCQkJCXRoaXMuX21vdmUoICJuZXh0UGFnZSIsIGV2ZW50ICk7CgkJCQkJYnJlYWs7CgkJCQljYXNlIGtleUNvZGUuVVA6CgkJCQkJdGhpcy5fa2V5RXZlbnQoICJwcmV2aW91cyIsIGV2ZW50ICk7CgkJCQkJYnJlYWs7CgkJCQljYXNlIGtleUNvZGUuRE9XTjoKCQkJCQl0aGlzLl9rZXlFdmVudCggIm5leHQiLCBldmVudCApOwoJCQkJCWJyZWFrOwoJCQkJfQoJCQl9LAoJCQlpbnB1dDogZnVuY3Rpb24oIGV2ZW50ICkgewoJCQkJaWYgKCBzdXBwcmVzc0lucHV0ICkgewoJCQkJCXN1cHByZXNzSW5wdXQgPSBmYWxzZTsKCQkJCQlldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoJCQkJCXJldHVybjsKCQkJCX0KCQkJCXRoaXMuX3NlYXJjaFRpbWVvdXQoIGV2ZW50ICk7CgkJCX0sCgkJCWZvY3VzOiBmdW5jdGlvbigpIHsKCQkJCXRoaXMuc2VsZWN0ZWRJdGVtID0gbnVsbDsKCQkJCXRoaXMucHJldmlvdXMgPSB0aGlzLl92YWx1ZSgpOwoJCQl9LAoJCQlibHVyOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJCQlpZiAoIHRoaXMuY2FuY2VsQmx1ciApIHsKCQkJCQlkZWxldGUgdGhpcy5jYW5jZWxCbHVyOwoJCQkJCXJldHVybjsKCQkJCX0KCgkJCQljbGVhclRpbWVvdXQoIHRoaXMuc2VhcmNoaW5nICk7CgkJCQl0aGlzLmNsb3NlKCBldmVudCApOwoJCQkJdGhpcy5fY2hhbmdlKCBldmVudCApOwoJCQl9CgkJfSk7CgoJCXRoaXMuX2luaXRTb3VyY2UoKTsKCQl0aGlzLm1lbnUgPSAkKCAiPHVsPiIgKQoJCQkuYWRkQ2xhc3MoICJ1aS1hdXRvY29tcGxldGUiICkKCQkJLmFwcGVuZFRvKCB0aGlzLmRvY3VtZW50LmZpbmQoIHRoaXMub3B0aW9ucy5hcHBlbmRUbyB8fCAiYm9keSIgKVsgMCBdICkKCQkJLm1lbnUoewoJCQkJLy8gY3VzdG9tIGtleSBoYW5kbGluZyBmb3Igbm93CgkJCQlpbnB1dDogJCgpLAoJCQkJLy8gZGlzYWJsZSBBUklBIHN1cHBvcnQsIHRoZSBsaXZlIHJlZ2lvbiB0YWtlcyBjYXJlIG9mIHRoYXQKCQkJCXJvbGU6IG51bGwKCQkJfSkKCQkJLnpJbmRleCggdGhpcy5lbGVtZW50LnpJbmRleCgpICsgMSApCgkJCS5oaWRlKCkKCQkJLmRhdGEoICJtZW51IiApOwoKCQl0aGlzLl9vbiggdGhpcy5tZW51LmVsZW1lbnQsIHsKCQkJbW91c2Vkb3duOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJCQkvLyBwcmV2ZW50IG1vdmluZyBmb2N1cyBvdXQgb2YgdGhlIHRleHQgZmllbGQKCQkJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgoJCQkJLy8gSUUgZG9lc24ndCBwcmV2ZW50IG1vdmluZyBmb2N1cyBldmVuIHdpdGggZXZlbnQucHJldmVudERlZmF1bHQoKQoJCQkJLy8gc28gd2Ugc2V0IGEgZmxhZyB0byBrbm93IHdoZW4gd2Ugc2hvdWxkIGlnbm9yZSB0aGUgYmx1ciBldmVudAoJCQkJdGhpcy5jYW5jZWxCbHVyID0gdHJ1ZTsKCQkJCXRoaXMuX2RlbGF5KGZ1bmN0aW9uKCkgewoJCQkJCWRlbGV0ZSB0aGlzLmNhbmNlbEJsdXI7CgkJCQl9KTsKCgkJCQkvLyBjbGlja2luZyBvbiB0aGUgc2Nyb2xsYmFyIGNhdXNlcyBmb2N1cyB0byBzaGlmdCB0byB0aGUgYm9keQoJCQkJLy8gYnV0IHdlIGNhbid0IGRldGVjdCBhIG1vdXNldXAgb3IgYSBjbGljayBpbW1lZGlhdGVseSBhZnRlcndhcmQKCQkJCS8vIHNvIHdlIGhhdmUgdG8gdHJhY2sgdGhlIG5leHQgbW91c2Vkb3duIGFuZCBjbG9zZSB0aGUgbWVudSBpZgoJCQkJLy8gdGhlIHVzZXIgY2xpY2tzIHNvbWV3aGVyZSBvdXRzaWRlIG9mIHRoZSBhdXRvY29tcGxldGUKCQkJCXZhciBtZW51RWxlbWVudCA9IHRoaXMubWVudS5lbGVtZW50WyAwIF07CgkJCQlpZiAoICEkKCBldmVudC50YXJnZXQgKS5jbG9zZXN0KCAiLnVpLW1lbnUtaXRlbSIgKS5sZW5ndGggKSB7CgkJCQkJdGhpcy5fZGVsYXkoZnVuY3Rpb24oKSB7CgkJCQkJCXZhciB0aGF0ID0gdGhpczsKCQkJCQkJdGhpcy5kb2N1bWVudC5vbmUoICJtb3VzZWRvd24iLCBmdW5jdGlvbiggZXZlbnQgKSB7CgkJCQkJCQlpZiAoIGV2ZW50LnRhcmdldCAhPT0gdGhhdC5lbGVtZW50WyAwIF0gJiYKCQkJCQkJCQkJZXZlbnQudGFyZ2V0ICE9PSBtZW51RWxlbWVudCAmJgoJCQkJCQkJCQkhJC5jb250YWlucyggbWVudUVsZW1lbnQsIGV2ZW50LnRhcmdldCApICkgewoJCQkJCQkJCXRoYXQuY2xvc2UoKTsKCQkJCQkJCX0KCQkJCQkJfSk7CgkJCQkJfSk7CgkJCQl9CgkJCX0sCgkJCW1lbnVmb2N1czogZnVuY3Rpb24oIGV2ZW50LCB1aSApIHsKCQkJCS8vICM3MDI0IC0gUHJldmVudCBhY2NpZGVudGFsIGFjdGl2YXRpb24gb2YgbWVudSBpdGVtcyBpbiBGaXJlZm94CgkJCQlpZiAoIHRoaXMuaXNOZXdNZW51ICkgewoJCQkJCXRoaXMuaXNOZXdNZW51ID0gZmFsc2U7CgkJCQkJaWYgKCBldmVudC5vcmlnaW5hbEV2ZW50ICYmIC9ebW91c2UvLnRlc3QoIGV2ZW50Lm9yaWdpbmFsRXZlbnQudHlwZSApICkgewoJCQkJCQl0aGlzLm1lbnUuYmx1cigpOwoKCQkJCQkJdGhpcy5kb2N1bWVudC5vbmUoICJtb3VzZW1vdmUiLCBmdW5jdGlvbigpIHsKCQkJCQkJCSQoIGV2ZW50LnRhcmdldCApLnRyaWdnZXIoIGV2ZW50Lm9yaWdpbmFsRXZlbnQgKTsKCQkJCQkJfSk7CgoJCQkJCQlyZXR1cm47CgkJCQkJfQoJCQkJfQoKCQkJCS8vIGJhY2sgY29tcGF0IGZvciBfcmVuZGVySXRlbSB1c2luZyBpdGVtLmF1dG9jb21wbGV0ZSwgdmlhICM3ODEwCgkJCQkvLyBUT0RPIHJlbW92ZSB0aGUgZmFsbGJhY2ssIHNlZSAjODE1NgoJCQkJdmFyIGl0ZW0gPSB1aS5pdGVtLmRhdGEoICJ1aS1hdXRvY29tcGxldGUtaXRlbSIgKSB8fCB1aS5pdGVtLmRhdGEoICJpdGVtLmF1dG9jb21wbGV0ZSIgKTsKCQkJCWlmICggZmFsc2UgIT09IHRoaXMuX3RyaWdnZXIoICJmb2N1cyIsIGV2ZW50LCB7IGl0ZW06IGl0ZW0gfSApICkgewoJCQkJCS8vIHVzZSB2YWx1ZSB0byBtYXRjaCB3aGF0IHdpbGwgZW5kIHVwIGluIHRoZSBpbnB1dCwgaWYgaXQgd2FzIGEga2V5IGV2ZW50CgkJCQkJaWYgKCBldmVudC5vcmlnaW5hbEV2ZW50ICYmIC9ea2V5Ly50ZXN0KCBldmVudC5vcmlnaW5hbEV2ZW50LnR5cGUgKSApIHsKCQkJCQkJdGhpcy5fdmFsdWUoIGl0ZW0udmFsdWUgKTsKCQkJCQl9CgkJCQl9IGVsc2UgewoJCQkJCS8vIE5vcm1hbGx5IHRoZSBpbnB1dCBpcyBwb3B1bGF0ZWQgd2l0aCB0aGUgaXRlbSdzIHZhbHVlIGFzIHRoZQoJCQkJCS8vIG1lbnUgaXMgbmF2aWdhdGVkLCBjYXVzaW5nIHNjcmVlbiByZWFkZXJzIHRvIG5vdGljZSBhIGNoYW5nZSBhbmQKCQkJCQkvLyBhbm5vdW5jZSB0aGUgaXRlbS4gU2luY2UgdGhlIGZvY3VzIGV2ZW50IHdhcyBjYW5jZWxlZCwgdGhpcyBkb2Vzbid0CgkJCQkJLy8gaGFwcGVuLCBzbyB3ZSB1cGRhdGUgdGhlIGxpdmUgcmVnaW9uIHNvIHRoYXQgc2NyZWVuIHJlYWRlcnMgY2FuCgkJCQkJLy8gc3RpbGwgbm90aWNlIHRoZSBjaGFuZ2UgYW5kIGFubm91bmNlIGl0LgoJCQkJCXRoaXMubGl2ZVJlZ2lvbi50ZXh0KCBpdGVtLnZhbHVlICk7CgkJCQl9CgkJCX0sCgkJCW1lbnVzZWxlY3Q6IGZ1bmN0aW9uKCBldmVudCwgdWkgKSB7CgkJCQkvLyBiYWNrIGNvbXBhdCBmb3IgX3JlbmRlckl0ZW0gdXNpbmcgaXRlbS5hdXRvY29tcGxldGUsIHZpYSAjNzgxMAoJCQkJLy8gVE9ETyByZW1vdmUgdGhlIGZhbGxiYWNrLCBzZWUgIzgxNTYKCQkJCXZhciBpdGVtID0gdWkuaXRlbS5kYXRhKCAidWktYXV0b2NvbXBsZXRlLWl0ZW0iICkgfHwgdWkuaXRlbS5kYXRhKCAiaXRlbS5hdXRvY29tcGxldGUiICksCgkJCQkJcHJldmlvdXMgPSB0aGlzLnByZXZpb3VzOwoKCQkJCS8vIG9ubHkgdHJpZ2dlciB3aGVuIGZvY3VzIHdhcyBsb3N0IChjbGljayBvbiBtZW51KQoJCQkJaWYgKCB0aGlzLmVsZW1lbnRbMF0gIT09IHRoaXMuZG9jdW1lbnRbMF0uYWN0aXZlRWxlbWVudCApIHsKCQkJCQl0aGlzLmVsZW1lbnQuZm9jdXMoKTsKCQkJCQl0aGlzLnByZXZpb3VzID0gcHJldmlvdXM7CgkJCQkJLy8gIzYxMDkgLSBJRSB0cmlnZ2VycyB0d28gZm9jdXMgZXZlbnRzIGFuZCB0aGUgc2Vjb25kCgkJCQkJLy8gaXMgYXN5bmNocm9ub3VzLCBzbyB3ZSBuZWVkIHRvIHJlc2V0IHRoZSBwcmV2aW91cwoJCQkJCS8vIHRlcm0gc3luY2hyb25vdXNseSBhbmQgYXN5bmNocm9ub3VzbHkgOi0oCgkJCQkJdGhpcy5fZGVsYXkoZnVuY3Rpb24oKSB7CgkJCQkJCXRoaXMucHJldmlvdXMgPSBwcmV2aW91czsKCQkJCQkJdGhpcy5zZWxlY3RlZEl0ZW0gPSBpdGVtOwoJCQkJCX0pOwoJCQkJfQoKCQkJCWlmICggZmFsc2UgIT09IHRoaXMuX3RyaWdnZXIoICJzZWxlY3QiLCBldmVudCwgeyBpdGVtOiBpdGVtIH0gKSApIHsKCQkJCQl0aGlzLl92YWx1ZSggaXRlbS52YWx1ZSApOwoJCQkJfQoJCQkJLy8gcmVzZXQgdGhlIHRlcm0gYWZ0ZXIgdGhlIHNlbGVjdCBldmVudAoJCQkJLy8gdGhpcyBhbGxvd3MgY3VzdG9tIHNlbGVjdCBoYW5kbGluZyB0byB3b3JrIHByb3Blcmx5CgkJCQl0aGlzLnRlcm0gPSB0aGlzLl92YWx1ZSgpOwoKCQkJCXRoaXMuY2xvc2UoIGV2ZW50ICk7CgkJCQl0aGlzLnNlbGVjdGVkSXRlbSA9IGl0ZW07CgkJCX0KCQl9KTsKCgkJdGhpcy5saXZlUmVnaW9uID0gJCggIjxzcGFuPiIsIHsKCQkJCXJvbGU6ICJzdGF0dXMiLAoJCQkJImFyaWEtbGl2ZSI6ICJwb2xpdGUiCgkJCX0pCgkJCS5hZGRDbGFzcyggInVpLWhlbHBlci1oaWRkZW4tYWNjZXNzaWJsZSIgKQoJCQkuaW5zZXJ0QWZ0ZXIoIHRoaXMuZWxlbWVudCApOwoKCQlpZiAoICQuZm4uYmdpZnJhbWUgKSB7CgkJCXRoaXMubWVudS5lbGVtZW50LmJnaWZyYW1lKCk7CgkJfQoKCQkvLyB0dXJuaW5nIG9mZiBhdXRvY29tcGxldGUgcHJldmVudHMgdGhlIGJyb3dzZXIgZnJvbSByZW1lbWJlcmluZyB0aGUKCQkvLyB2YWx1ZSB3aGVuIG5hdmlnYXRpbmcgdGhyb3VnaCBoaXN0b3J5LCBzbyB3ZSByZS1lbmFibGUgYXV0b2NvbXBsZXRlCgkJLy8gaWYgdGhlIHBhZ2UgaXMgdW5sb2FkZWQgYmVmb3JlIHRoZSB3aWRnZXQgaXMgZGVzdHJveWVkLiAjNzc5MAoJCXRoaXMuX29uKCB0aGlzLndpbmRvdywgewoJCQliZWZvcmV1bmxvYWQ6IGZ1bmN0aW9uKCkgewoJCQkJdGhpcy5lbGVtZW50LnJlbW92ZUF0dHIoICJhdXRvY29tcGxldGUiICk7CgkJCX0KCQl9KTsKCX0sCgoJX2Rlc3Ryb3k6IGZ1bmN0aW9uKCkgewoJCWNsZWFyVGltZW91dCggdGhpcy5zZWFyY2hpbmcgKTsKCQl0aGlzLmVsZW1lbnQKCQkJLnJlbW92ZUNsYXNzKCAidWktYXV0b2NvbXBsZXRlLWlucHV0IiApCgkJCS5yZW1vdmVBdHRyKCAiYXV0b2NvbXBsZXRlIiApOwoJCXRoaXMubWVudS5lbGVtZW50LnJlbW92ZSgpOwoJCXRoaXMubGl2ZVJlZ2lvbi5yZW1vdmUoKTsKCX0sCgoJX3NldE9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7CgkJdGhpcy5fc3VwZXIoIGtleSwgdmFsdWUgKTsKCQlpZiAoIGtleSA9PT0gInNvdXJjZSIgKSB7CgkJCXRoaXMuX2luaXRTb3VyY2UoKTsKCQl9CgkJaWYgKCBrZXkgPT09ICJhcHBlbmRUbyIgKSB7CgkJCXRoaXMubWVudS5lbGVtZW50LmFwcGVuZFRvKCB0aGlzLmRvY3VtZW50LmZpbmQoIHZhbHVlIHx8ICJib2R5IiApWzBdICk7CgkJfQoJCWlmICgga2V5ID09PSAiZGlzYWJsZWQiICYmIHZhbHVlICYmIHRoaXMueGhyICkgewoJCQl0aGlzLnhoci5hYm9ydCgpOwoJCX0KCX0sCgoJX2lzTXVsdGlMaW5lOiBmdW5jdGlvbigpIHsKCQkvLyBUZXh0YXJlYXMgYXJlIGFsd2F5cyBtdWx0aS1saW5lCgkJaWYgKCB0aGlzLmVsZW1lbnQuaXMoICJ0ZXh0YXJlYSIgKSApIHsKCQkJcmV0dXJuIHRydWU7CgkJfQoJCS8vIElucHV0cyBhcmUgYWx3YXlzIHNpbmdsZS1saW5lLCBldmVuIGlmIGluc2lkZSBhIGNvbnRlbnRFZGl0YWJsZSBlbGVtZW50CgkJLy8gSUUgYWxzbyB0cmVhdHMgaW5wdXRzIGFzIGNvbnRlbnRFZGl0YWJsZQoJCWlmICggdGhpcy5lbGVtZW50LmlzKCAiaW5wdXQiICkgKSB7CgkJCXJldHVybiBmYWxzZTsKCQl9CgkJLy8gQWxsIG90aGVyIGVsZW1lbnQgdHlwZXMgYXJlIGRldGVybWluZWQgYnkgd2hldGhlciBvciBub3QgdGhleSdyZSBjb250ZW50RWRpdGFibGUKCQlyZXR1cm4gdGhpcy5lbGVtZW50LnByb3AoICJpc0NvbnRlbnRFZGl0YWJsZSIgKTsKCX0sCgoJX2luaXRTb3VyY2U6IGZ1bmN0aW9uKCkgewoJCXZhciBhcnJheSwgdXJsLAoJCQl0aGF0ID0gdGhpczsKCQlpZiAoICQuaXNBcnJheSh0aGlzLm9wdGlvbnMuc291cmNlKSApIHsKCQkJYXJyYXkgPSB0aGlzLm9wdGlvbnMuc291cmNlOwoJCQl0aGlzLnNvdXJjZSA9IGZ1bmN0aW9uKCByZXF1ZXN0LCByZXNwb25zZSApIHsKCQkJCXJlc3BvbnNlKCAkLnVpLmF1dG9jb21wbGV0ZS5maWx0ZXIoIGFycmF5LCByZXF1ZXN0LnRlcm0gKSApOwoJCQl9OwoJCX0gZWxzZSBpZiAoIHR5cGVvZiB0aGlzLm9wdGlvbnMuc291cmNlID09PSAic3RyaW5nIiApIHsKCQkJdXJsID0gdGhpcy5vcHRpb25zLnNvdXJjZTsKCQkJdGhpcy5zb3VyY2UgPSBmdW5jdGlvbiggcmVxdWVzdCwgcmVzcG9uc2UgKSB7CgkJCQlpZiAoIHRoYXQueGhyICkgewoJCQkJCXRoYXQueGhyLmFib3J0KCk7CgkJCQl9CgkJCQl0aGF0LnhociA9ICQuYWpheCh7CgkJCQkJdXJsOiB1cmwsCgkJCQkJZGF0YTogcmVxdWVzdCwKCQkJCQlkYXRhVHlwZTogImpzb24iLAoJCQkJCXN1Y2Nlc3M6IGZ1bmN0aW9uKCBkYXRhICkgewoJCQkJCQlyZXNwb25zZSggZGF0YSApOwoJCQkJCX0sCgkJCQkJZXJyb3I6IGZ1bmN0aW9uKCkgewoJCQkJCQlyZXNwb25zZSggW10gKTsKCQkJCQl9CgkJCQl9KTsKCQkJfTsKCQl9IGVsc2UgewoJCQl0aGlzLnNvdXJjZSA9IHRoaXMub3B0aW9ucy5zb3VyY2U7CgkJfQoJfSwKCglfc2VhcmNoVGltZW91dDogZnVuY3Rpb24oIGV2ZW50ICkgewoJCWNsZWFyVGltZW91dCggdGhpcy5zZWFyY2hpbmcgKTsKCQl0aGlzLnNlYXJjaGluZyA9IHRoaXMuX2RlbGF5KGZ1bmN0aW9uKCkgewoJCQkvLyBvbmx5IHNlYXJjaCBpZiB0aGUgdmFsdWUgaGFzIGNoYW5nZWQKCQkJaWYgKCB0aGlzLnRlcm0gIT09IHRoaXMuX3ZhbHVlKCkgKSB7CgkJCQl0aGlzLnNlbGVjdGVkSXRlbSA9IG51bGw7CgkJCQl0aGlzLnNlYXJjaCggbnVsbCwgZXZlbnQgKTsKCQkJfQoJCX0sIHRoaXMub3B0aW9ucy5kZWxheSApOwoJfSwKCglzZWFyY2g6IGZ1bmN0aW9uKCB2YWx1ZSwgZXZlbnQgKSB7CgkJdmFsdWUgPSB2YWx1ZSAhPSBudWxsID8gdmFsdWUgOiB0aGlzLl92YWx1ZSgpOwoKCQkvLyBhbHdheXMgc2F2ZSB0aGUgYWN0dWFsIHZhbHVlLCBub3QgdGhlIG9uZSBwYXNzZWQgYXMgYW4gYXJndW1lbnQKCQl0aGlzLnRlcm0gPSB0aGlzLl92YWx1ZSgpOwoKCQlpZiAoIHZhbHVlLmxlbmd0aCA8IHRoaXMub3B0aW9ucy5taW5MZW5ndGggKSB7CgkJCXJldHVybiB0aGlzLmNsb3NlKCBldmVudCApOwoJCX0KCgkJaWYgKCB0aGlzLl90cmlnZ2VyKCAic2VhcmNoIiwgZXZlbnQgKSA9PT0gZmFsc2UgKSB7CgkJCXJldHVybjsKCQl9CgoJCXJldHVybiB0aGlzLl9zZWFyY2goIHZhbHVlICk7Cgl9LAoKCV9zZWFyY2g6IGZ1bmN0aW9uKCB2YWx1ZSApIHsKCQl0aGlzLnBlbmRpbmcrKzsKCQl0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoICJ1aS1hdXRvY29tcGxldGUtbG9hZGluZyIgKTsKCQl0aGlzLmNhbmNlbFNlYXJjaCA9IGZhbHNlOwoKCQl0aGlzLnNvdXJjZSggeyB0ZXJtOiB2YWx1ZSB9LCB0aGlzLl9yZXNwb25zZSgpICk7Cgl9LAoKCV9yZXNwb25zZTogZnVuY3Rpb24oKSB7CgkJdmFyIHRoYXQgPSB0aGlzLAoJCQlpbmRleCA9ICsrcmVxdWVzdEluZGV4OwoKCQlyZXR1cm4gZnVuY3Rpb24oIGNvbnRlbnQgKSB7CgkJCWlmICggaW5kZXggPT09IHJlcXVlc3RJbmRleCApIHsKCQkJCXRoYXQuX19yZXNwb25zZSggY29udGVudCApOwoJCQl9CgoJCQl0aGF0LnBlbmRpbmctLTsKCQkJaWYgKCAhdGhhdC5wZW5kaW5nICkgewoJCQkJdGhhdC5lbGVtZW50LnJlbW92ZUNsYXNzKCAidWktYXV0b2NvbXBsZXRlLWxvYWRpbmciICk7CgkJCX0KCQl9OwoJfSwKCglfX3Jlc3BvbnNlOiBmdW5jdGlvbiggY29udGVudCApIHsKCQlpZiAoIGNvbnRlbnQgKSB7CgkJCWNvbnRlbnQgPSB0aGlzLl9ub3JtYWxpemUoIGNvbnRlbnQgKTsKCQl9CgkJdGhpcy5fdHJpZ2dlciggInJlc3BvbnNlIiwgbnVsbCwgeyBjb250ZW50OiBjb250ZW50IH0gKTsKCQlpZiAoICF0aGlzLm9wdGlvbnMuZGlzYWJsZWQgJiYgY29udGVudCAmJiBjb250ZW50Lmxlbmd0aCAmJiAhdGhpcy5jYW5jZWxTZWFyY2ggKSB7CgkJCXRoaXMuX3N1Z2dlc3QoIGNvbnRlbnQgKTsKCQkJdGhpcy5fdHJpZ2dlciggIm9wZW4iICk7CgkJfSBlbHNlIHsKCQkJLy8gdXNlIC5fY2xvc2UoKSBpbnN0ZWFkIG9mIC5jbG9zZSgpIHNvIHdlIGRvbid0IGNhbmNlbCBmdXR1cmUgc2VhcmNoZXMKCQkJdGhpcy5fY2xvc2UoKTsKCQl9Cgl9LAoKCWNsb3NlOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJdGhpcy5jYW5jZWxTZWFyY2ggPSB0cnVlOwoJCXRoaXMuX2Nsb3NlKCBldmVudCApOwoJfSwKCglfY2xvc2U6IGZ1bmN0aW9uKCBldmVudCApIHsKCQlpZiAoIHRoaXMubWVudS5lbGVtZW50LmlzKCAiOnZpc2libGUiICkgKSB7CgkJCXRoaXMubWVudS5lbGVtZW50LmhpZGUoKTsKCQkJdGhpcy5tZW51LmJsdXIoKTsKCQkJdGhpcy5pc05ld01lbnUgPSB0cnVlOwoJCQl0aGlzLl90cmlnZ2VyKCAiY2xvc2UiLCBldmVudCApOwoJCX0KCX0sCgoJX2NoYW5nZTogZnVuY3Rpb24oIGV2ZW50ICkgewoJCWlmICggdGhpcy5wcmV2aW91cyAhPT0gdGhpcy5fdmFsdWUoKSApIHsKCQkJdGhpcy5fdHJpZ2dlciggImNoYW5nZSIsIGV2ZW50LCB7IGl0ZW06IHRoaXMuc2VsZWN0ZWRJdGVtIH0gKTsKCQl9Cgl9LAoKCV9ub3JtYWxpemU6IGZ1bmN0aW9uKCBpdGVtcyApIHsKCQkvLyBhc3N1bWUgYWxsIGl0ZW1zIGhhdmUgdGhlIHJpZ2h0IGZvcm1hdCB3aGVuIHRoZSBmaXJzdCBpdGVtIGlzIGNvbXBsZXRlCgkJaWYgKCBpdGVtcy5sZW5ndGggJiYgaXRlbXNbMF0ubGFiZWwgJiYgaXRlbXNbMF0udmFsdWUgKSB7CgkJCXJldHVybiBpdGVtczsKCQl9CgkJcmV0dXJuICQubWFwKCBpdGVtcywgZnVuY3Rpb24oIGl0ZW0gKSB7CgkJCWlmICggdHlwZW9mIGl0ZW0gPT09ICJzdHJpbmciICkgewoJCQkJcmV0dXJuIHsKCQkJCQlsYWJlbDogaXRlbSwKCQkJCQl2YWx1ZTogaXRlbQoJCQkJfTsKCQkJfQoJCQlyZXR1cm4gJC5leHRlbmQoewoJCQkJbGFiZWw6IGl0ZW0ubGFiZWwgfHwgaXRlbS52YWx1ZSwKCQkJCXZhbHVlOiBpdGVtLnZhbHVlIHx8IGl0ZW0ubGFiZWwKCQkJfSwgaXRlbSApOwoJCX0pOwoJfSwKCglfc3VnZ2VzdDogZnVuY3Rpb24oIGl0ZW1zICkgewoJCXZhciB1bCA9IHRoaXMubWVudS5lbGVtZW50CgkJCS5lbXB0eSgpCgkJCS56SW5kZXgoIHRoaXMuZWxlbWVudC56SW5kZXgoKSArIDEgKTsKCQl0aGlzLl9yZW5kZXJNZW51KCB1bCwgaXRlbXMgKTsKCQl0aGlzLm1lbnUucmVmcmVzaCgpOwoKCQkvLyBzaXplIGFuZCBwb3NpdGlvbiBtZW51CgkJdWwuc2hvdygpOwoJCXRoaXMuX3Jlc2l6ZU1lbnUoKTsKCQl1bC5wb3NpdGlvbiggJC5leHRlbmQoewoJCQlvZjogdGhpcy5lbGVtZW50CgkJfSwgdGhpcy5vcHRpb25zLnBvc2l0aW9uICkpOwoKCQlpZiAoIHRoaXMub3B0aW9ucy5hdXRvRm9jdXMgKSB7CgkJCXRoaXMubWVudS5uZXh0KCk7CgkJfQoJfSwKCglfcmVzaXplTWVudTogZnVuY3Rpb24oKSB7CgkJdmFyIHVsID0gdGhpcy5tZW51LmVsZW1lbnQ7CgkJdWwub3V0ZXJXaWR0aCggTWF0aC5tYXgoCgkJCS8vIEZpcmVmb3ggd3JhcHMgbG9uZyB0ZXh0IChwb3NzaWJseSBhIHJvdW5kaW5nIGJ1ZykKCQkJLy8gc28gd2UgYWRkIDFweCB0byBhdm9pZCB0aGUgd3JhcHBpbmcgKCM3NTEzKQoJCQl1bC53aWR0aCggIiIgKS5vdXRlcldpZHRoKCkgKyAxLAoJCQl0aGlzLmVsZW1lbnQub3V0ZXJXaWR0aCgpCgkJKSApOwoJfSwKCglfcmVuZGVyTWVudTogZnVuY3Rpb24oIHVsLCBpdGVtcyApIHsKCQl2YXIgdGhhdCA9IHRoaXM7CgkJJC5lYWNoKCBpdGVtcywgZnVuY3Rpb24oIGluZGV4LCBpdGVtICkgewoJCQl0aGF0Ll9yZW5kZXJJdGVtRGF0YSggdWwsIGl0ZW0gKTsKCQl9KTsKCX0sCgoJX3JlbmRlckl0ZW1EYXRhOiBmdW5jdGlvbiggdWwsIGl0ZW0gKSB7CgkJcmV0dXJuIHRoaXMuX3JlbmRlckl0ZW0oIHVsLCBpdGVtICkuZGF0YSggInVpLWF1dG9jb21wbGV0ZS1pdGVtIiwgaXRlbSApOwoJfSwKCglfcmVuZGVySXRlbTogZnVuY3Rpb24oIHVsLCBpdGVtICkgewoJCXJldHVybiAkKCAiPGxpPiIgKQoJCQkuYXBwZW5kKCAkKCAiPGE+IiApLnRleHQoIGl0ZW0ubGFiZWwgKSApCgkJCS5hcHBlbmRUbyggdWwgKTsKCX0sCgoJX21vdmU6IGZ1bmN0aW9uKCBkaXJlY3Rpb24sIGV2ZW50ICkgewoJCWlmICggIXRoaXMubWVudS5lbGVtZW50LmlzKCAiOnZpc2libGUiICkgKSB7CgkJCXRoaXMuc2VhcmNoKCBudWxsLCBldmVudCApOwoJCQlyZXR1cm47CgkJfQoJCWlmICggdGhpcy5tZW51LmlzRmlyc3RJdGVtKCkgJiYgL15wcmV2aW91cy8udGVzdCggZGlyZWN0aW9uICkgfHwKCQkJCXRoaXMubWVudS5pc0xhc3RJdGVtKCkgJiYgL15uZXh0Ly50ZXN0KCBkaXJlY3Rpb24gKSApIHsKCQkJdGhpcy5fdmFsdWUoIHRoaXMudGVybSApOwoJCQl0aGlzLm1lbnUuYmx1cigpOwoJCQlyZXR1cm47CgkJfQoJCXRoaXMubWVudVsgZGlyZWN0aW9uIF0oIGV2ZW50ICk7Cgl9LAoKCXdpZGdldDogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHRoaXMubWVudS5lbGVtZW50OwoJfSwKCglfdmFsdWU6IGZ1bmN0aW9uKCkgewoJCXJldHVybiB0aGlzLnZhbHVlTWV0aG9kLmFwcGx5KCB0aGlzLmVsZW1lbnQsIGFyZ3VtZW50cyApOwoJfSwKCglfa2V5RXZlbnQ6IGZ1bmN0aW9uKCBrZXlFdmVudCwgZXZlbnQgKSB7CgkJaWYgKCAhdGhpcy5pc011bHRpTGluZSB8fCB0aGlzLm1lbnUuZWxlbWVudC5pcyggIjp2aXNpYmxlIiApICkgewoJCQl0aGlzLl9tb3ZlKCBrZXlFdmVudCwgZXZlbnQgKTsKCgkJCS8vIHByZXZlbnRzIG1vdmluZyBjdXJzb3IgdG8gYmVnaW5uaW5nL2VuZCBvZiB0aGUgdGV4dCBmaWVsZCBpbiBzb21lIGJyb3dzZXJzCgkJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgkJfQoJfQp9KTsKCiQuZXh0ZW5kKCAkLnVpLmF1dG9jb21wbGV0ZSwgewoJZXNjYXBlUmVnZXg6IGZ1bmN0aW9uKCB2YWx1ZSApIHsKCQlyZXR1cm4gdmFsdWUucmVwbGFjZSgvW1wtXFtcXXt9KCkqKz8uLFxcXF4kfCNcc10vZywgIlxcJCYiKTsKCX0sCglmaWx0ZXI6IGZ1bmN0aW9uKGFycmF5LCB0ZXJtKSB7CgkJdmFyIG1hdGNoZXIgPSBuZXcgUmVnRXhwKCAkLnVpLmF1dG9jb21wbGV0ZS5lc2NhcGVSZWdleCh0ZXJtKSwgImkiICk7CgkJcmV0dXJuICQuZ3JlcCggYXJyYXksIGZ1bmN0aW9uKHZhbHVlKSB7CgkJCXJldHVybiBtYXRjaGVyLnRlc3QoIHZhbHVlLmxhYmVsIHx8IHZhbHVlLnZhbHVlIHx8IHZhbHVlICk7CgkJfSk7Cgl9Cn0pOwoKCi8vIGxpdmUgcmVnaW9uIGV4dGVuc2lvbiwgYWRkaW5nIGEgYG1lc3NhZ2VzYCBvcHRpb24KLy8gTk9URTogVGhpcyBpcyBhbiBleHBlcmltZW50YWwgQVBJLiBXZSBhcmUgc3RpbGwgaW52ZXN0aWdhdGluZwovLyBhIGZ1bGwgc29sdXRpb24gZm9yIHN0cmluZyBtYW5pcHVsYXRpb24gYW5kIGludGVybmF0aW9uYWxpemF0aW9uLgokLndpZGdldCggInVpLmF1dG9jb21wbGV0ZSIsICQudWkuYXV0b2NvbXBsZXRlLCB7CglvcHRpb25zOiB7CgkJbWVzc2FnZXM6IHsKCQkJbm9SZXN1bHRzOiAiTm8gc2VhcmNoIHJlc3VsdHMuIiwKCQkJcmVzdWx0czogZnVuY3Rpb24oIGFtb3VudCApIHsKCQkJCXJldHVybiBhbW91bnQgKyAoIGFtb3VudCA+IDEgPyAiIHJlc3VsdHMgYXJlIiA6ICIgcmVzdWx0IGlzIiApICsKCQkJCQkiIGF2YWlsYWJsZSwgdXNlIHVwIGFuZCBkb3duIGFycm93IGtleXMgdG8gbmF2aWdhdGUuIjsKCQkJfQoJCX0KCX0sCgoJX19yZXNwb25zZTogZnVuY3Rpb24oIGNvbnRlbnQgKSB7CgkJdmFyIG1lc3NhZ2U7CgkJdGhpcy5fc3VwZXJBcHBseSggYXJndW1lbnRzICk7CgkJaWYgKCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgfHwgdGhpcy5jYW5jZWxTZWFyY2ggKSB7CgkJCXJldHVybjsKCQl9CgkJaWYgKCBjb250ZW50ICYmIGNvbnRlbnQubGVuZ3RoICkgewoJCQltZXNzYWdlID0gdGhpcy5vcHRpb25zLm1lc3NhZ2VzLnJlc3VsdHMoIGNvbnRlbnQubGVuZ3RoICk7CgkJfSBlbHNlIHsKCQkJbWVzc2FnZSA9IHRoaXMub3B0aW9ucy5tZXNzYWdlcy5ub1Jlc3VsdHM7CgkJfQoJCXRoaXMubGl2ZVJlZ2lvbi50ZXh0KCBtZXNzYWdlICk7Cgl9Cn0pOwoKCn0oIGpRdWVyeSApKTsKKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7Cgp2YXIgbGFzdEFjdGl2ZSwgc3RhcnRYUG9zLCBzdGFydFlQb3MsIGNsaWNrRHJhZ2dlZCwKCWJhc2VDbGFzc2VzID0gInVpLWJ1dHRvbiB1aS13aWRnZXQgdWktc3RhdGUtZGVmYXVsdCB1aS1jb3JuZXItYWxsIiwKCXN0YXRlQ2xhc3NlcyA9ICJ1aS1zdGF0ZS1ob3ZlciB1aS1zdGF0ZS1hY3RpdmUgIiwKCXR5cGVDbGFzc2VzID0gInVpLWJ1dHRvbi1pY29ucy1vbmx5IHVpLWJ1dHRvbi1pY29uLW9ubHkgdWktYnV0dG9uLXRleHQtaWNvbnMgdWktYnV0dG9uLXRleHQtaWNvbi1wcmltYXJ5IHVpLWJ1dHRvbi10ZXh0LWljb24tc2Vjb25kYXJ5IHVpLWJ1dHRvbi10ZXh0LW9ubHkiLAoJZm9ybVJlc2V0SGFuZGxlciA9IGZ1bmN0aW9uKCkgewoJCXZhciBidXR0b25zID0gJCggdGhpcyApLmZpbmQoICI6dWktYnV0dG9uIiApOwoJCXNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CgkJCWJ1dHRvbnMuYnV0dG9uKCAicmVmcmVzaCIgKTsKCQl9LCAxICk7Cgl9LAoJcmFkaW9Hcm91cCA9IGZ1bmN0aW9uKCByYWRpbyApIHsKCQl2YXIgbmFtZSA9IHJhZGlvLm5hbWUsCgkJCWZvcm0gPSByYWRpby5mb3JtLAoJCQlyYWRpb3MgPSAkKCBbXSApOwoJCWlmICggbmFtZSApIHsKCQkJaWYgKCBmb3JtICkgewoJCQkJcmFkaW9zID0gJCggZm9ybSApLmZpbmQoICJbbmFtZT0nIiArIG5hbWUgKyAiJ10iICk7CgkJCX0gZWxzZSB7CgkJCQlyYWRpb3MgPSAkKCAiW25hbWU9JyIgKyBuYW1lICsgIiddIiwgcmFkaW8ub3duZXJEb2N1bWVudCApCgkJCQkJLmZpbHRlcihmdW5jdGlvbigpIHsKCQkJCQkJcmV0dXJuICF0aGlzLmZvcm07CgkJCQkJfSk7CgkJCX0KCQl9CgkJcmV0dXJuIHJhZGlvczsKCX07CgokLndpZGdldCggInVpLmJ1dHRvbiIsIHsKCXZlcnNpb246ICIxLjkuMiIsCglkZWZhdWx0RWxlbWVudDogIjxidXR0b24+IiwKCW9wdGlvbnM6IHsKCQlkaXNhYmxlZDogbnVsbCwKCQl0ZXh0OiB0cnVlLAoJCWxhYmVsOiBudWxsLAoJCWljb25zOiB7CgkJCXByaW1hcnk6IG51bGwsCgkJCXNlY29uZGFyeTogbnVsbAoJCX0KCX0sCglfY3JlYXRlOiBmdW5jdGlvbigpIHsKCQl0aGlzLmVsZW1lbnQuY2xvc2VzdCggImZvcm0iICkKCQkJLnVuYmluZCggInJlc2V0IiArIHRoaXMuZXZlbnROYW1lc3BhY2UgKQoJCQkuYmluZCggInJlc2V0IiArIHRoaXMuZXZlbnROYW1lc3BhY2UsIGZvcm1SZXNldEhhbmRsZXIgKTsKCgkJaWYgKCB0eXBlb2YgdGhpcy5vcHRpb25zLmRpc2FibGVkICE9PSAiYm9vbGVhbiIgKSB7CgkJCXRoaXMub3B0aW9ucy5kaXNhYmxlZCA9ICEhdGhpcy5lbGVtZW50LnByb3AoICJkaXNhYmxlZCIgKTsKCQl9IGVsc2UgewoJCQl0aGlzLmVsZW1lbnQucHJvcCggImRpc2FibGVkIiwgdGhpcy5vcHRpb25zLmRpc2FibGVkICk7CgkJfQoKCQl0aGlzLl9kZXRlcm1pbmVCdXR0b25UeXBlKCk7CgkJdGhpcy5oYXNUaXRsZSA9ICEhdGhpcy5idXR0b25FbGVtZW50LmF0dHIoICJ0aXRsZSIgKTsKCgkJdmFyIHRoYXQgPSB0aGlzLAoJCQlvcHRpb25zID0gdGhpcy5vcHRpb25zLAoJCQl0b2dnbGVCdXR0b24gPSB0aGlzLnR5cGUgPT09ICJjaGVja2JveCIgfHwgdGhpcy50eXBlID09PSAicmFkaW8iLAoJCQlhY3RpdmVDbGFzcyA9ICF0b2dnbGVCdXR0b24gPyAidWktc3RhdGUtYWN0aXZlIiA6ICIiLAoJCQlmb2N1c0NsYXNzID0gInVpLXN0YXRlLWZvY3VzIjsKCgkJaWYgKCBvcHRpb25zLmxhYmVsID09PSBudWxsICkgewoJCQlvcHRpb25zLmxhYmVsID0gKHRoaXMudHlwZSA9PT0gImlucHV0IiA/IHRoaXMuYnV0dG9uRWxlbWVudC52YWwoKSA6IHRoaXMuYnV0dG9uRWxlbWVudC5odG1sKCkpOwoJCX0KCgkJdGhpcy5faG92ZXJhYmxlKCB0aGlzLmJ1dHRvbkVsZW1lbnQgKTsKCgkJdGhpcy5idXR0b25FbGVtZW50CgkJCS5hZGRDbGFzcyggYmFzZUNsYXNzZXMgKQoJCQkuYXR0ciggInJvbGUiLCAiYnV0dG9uIiApCgkJCS5iaW5kKCAibW91c2VlbnRlciIgKyB0aGlzLmV2ZW50TmFtZXNwYWNlLCBmdW5jdGlvbigpIHsKCQkJCWlmICggb3B0aW9ucy5kaXNhYmxlZCApIHsKCQkJCQlyZXR1cm47CgkJCQl9CgkJCQlpZiAoIHRoaXMgPT09IGxhc3RBY3RpdmUgKSB7CgkJCQkJJCggdGhpcyApLmFkZENsYXNzKCAidWktc3RhdGUtYWN0aXZlIiApOwoJCQkJfQoJCQl9KQoJCQkuYmluZCggIm1vdXNlbGVhdmUiICsgdGhpcy5ldmVudE5hbWVzcGFjZSwgZnVuY3Rpb24oKSB7CgkJCQlpZiAoIG9wdGlvbnMuZGlzYWJsZWQgKSB7CgkJCQkJcmV0dXJuOwoJCQkJfQoJCQkJJCggdGhpcyApLnJlbW92ZUNsYXNzKCBhY3RpdmVDbGFzcyApOwoJCQl9KQoJCQkuYmluZCggImNsaWNrIiArIHRoaXMuZXZlbnROYW1lc3BhY2UsIGZ1bmN0aW9uKCBldmVudCApIHsKCQkJCWlmICggb3B0aW9ucy5kaXNhYmxlZCApIHsKCQkJCQlldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoJCQkJCWV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpOwoJCQkJfQoJCQl9KTsKCgkJdGhpcy5lbGVtZW50CgkJCS5iaW5kKCAiZm9jdXMiICsgdGhpcy5ldmVudE5hbWVzcGFjZSwgZnVuY3Rpb24oKSB7CgkJCQkvLyBubyBuZWVkIHRvIGNoZWNrIGRpc2FibGVkLCBmb2N1cyB3b24ndCBiZSB0cmlnZ2VyZWQgYW55d2F5CgkJCQl0aGF0LmJ1dHRvbkVsZW1lbnQuYWRkQ2xhc3MoIGZvY3VzQ2xhc3MgKTsKCQkJfSkKCQkJLmJpbmQoICJibHVyIiArIHRoaXMuZXZlbnROYW1lc3BhY2UsIGZ1bmN0aW9uKCkgewoJCQkJdGhhdC5idXR0b25FbGVtZW50LnJlbW92ZUNsYXNzKCBmb2N1c0NsYXNzICk7CgkJCX0pOwoKCQlpZiAoIHRvZ2dsZUJ1dHRvbiApIHsKCQkJdGhpcy5lbGVtZW50LmJpbmQoICJjaGFuZ2UiICsgdGhpcy5ldmVudE5hbWVzcGFjZSwgZnVuY3Rpb24oKSB7CgkJCQlpZiAoIGNsaWNrRHJhZ2dlZCApIHsKCQkJCQlyZXR1cm47CgkJCQl9CgkJCQl0aGF0LnJlZnJlc2goKTsKCQkJfSk7CgkJCS8vIGlmIG1vdXNlIG1vdmVzIGJldHdlZW4gbW91c2Vkb3duIGFuZCBtb3VzZXVwIChkcmFnKSBzZXQgY2xpY2tEcmFnZ2VkIGZsYWcKCQkJLy8gcHJldmVudHMgaXNzdWUgd2hlcmUgYnV0dG9uIHN0YXRlIGNoYW5nZXMgYnV0IGNoZWNrYm94L3JhZGlvIGNoZWNrZWQgc3RhdGUKCQkJLy8gZG9lcyBub3QgaW4gRmlyZWZveCAoc2VlIHRpY2tldCAjNjk3MCkKCQkJdGhpcy5idXR0b25FbGVtZW50CgkJCQkuYmluZCggIm1vdXNlZG93biIgKyB0aGlzLmV2ZW50TmFtZXNwYWNlLCBmdW5jdGlvbiggZXZlbnQgKSB7CgkJCQkJaWYgKCBvcHRpb25zLmRpc2FibGVkICkgewoJCQkJCQlyZXR1cm47CgkJCQkJfQoJCQkJCWNsaWNrRHJhZ2dlZCA9IGZhbHNlOwoJCQkJCXN0YXJ0WFBvcyA9IGV2ZW50LnBhZ2VYOwoJCQkJCXN0YXJ0WVBvcyA9IGV2ZW50LnBhZ2VZOwoJCQkJfSkKCQkJCS5iaW5kKCAibW91c2V1cCIgKyB0aGlzLmV2ZW50TmFtZXNwYWNlLCBmdW5jdGlvbiggZXZlbnQgKSB7CgkJCQkJaWYgKCBvcHRpb25zLmRpc2FibGVkICkgewoJCQkJCQlyZXR1cm47CgkJCQkJfQoJCQkJCWlmICggc3RhcnRYUG9zICE9PSBldmVudC5wYWdlWCB8fCBzdGFydFlQb3MgIT09IGV2ZW50LnBhZ2VZICkgewoJCQkJCQljbGlja0RyYWdnZWQgPSB0cnVlOwoJCQkJCX0KCQkJfSk7CgkJfQoKCQlpZiAoIHRoaXMudHlwZSA9PT0gImNoZWNrYm94IiApIHsKCQkJdGhpcy5idXR0b25FbGVtZW50LmJpbmQoICJjbGljayIgKyB0aGlzLmV2ZW50TmFtZXNwYWNlLCBmdW5jdGlvbigpIHsKCQkJCWlmICggb3B0aW9ucy5kaXNhYmxlZCB8fCBjbGlja0RyYWdnZWQgKSB7CgkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJfQoJCQkJJCggdGhpcyApLnRvZ2dsZUNsYXNzKCAidWktc3RhdGUtYWN0aXZlIiApOwoJCQkJdGhhdC5idXR0b25FbGVtZW50LmF0dHIoICJhcmlhLXByZXNzZWQiLCB0aGF0LmVsZW1lbnRbMF0uY2hlY2tlZCApOwoJCQl9KTsKCQl9IGVsc2UgaWYgKCB0aGlzLnR5cGUgPT09ICJyYWRpbyIgKSB7CgkJCXRoaXMuYnV0dG9uRWxlbWVudC5iaW5kKCAiY2xpY2siICsgdGhpcy5ldmVudE5hbWVzcGFjZSwgZnVuY3Rpb24oKSB7CgkJCQlpZiAoIG9wdGlvbnMuZGlzYWJsZWQgfHwgY2xpY2tEcmFnZ2VkICkgewoJCQkJCXJldHVybiBmYWxzZTsKCQkJCX0KCQkJCSQoIHRoaXMgKS5hZGRDbGFzcyggInVpLXN0YXRlLWFjdGl2ZSIgKTsKCQkJCXRoYXQuYnV0dG9uRWxlbWVudC5hdHRyKCAiYXJpYS1wcmVzc2VkIiwgInRydWUiICk7CgoJCQkJdmFyIHJhZGlvID0gdGhhdC5lbGVtZW50WyAwIF07CgkJCQlyYWRpb0dyb3VwKCByYWRpbyApCgkJCQkJLm5vdCggcmFkaW8gKQoJCQkJCS5tYXAoZnVuY3Rpb24oKSB7CgkJCQkJCXJldHVybiAkKCB0aGlzICkuYnV0dG9uKCAid2lkZ2V0IiApWyAwIF07CgkJCQkJfSkKCQkJCQkucmVtb3ZlQ2xhc3MoICJ1aS1zdGF0ZS1hY3RpdmUiICkKCQkJCQkuYXR0ciggImFyaWEtcHJlc3NlZCIsICJmYWxzZSIgKTsKCQkJfSk7CgkJfSBlbHNlIHsKCQkJdGhpcy5idXR0b25FbGVtZW50CgkJCQkuYmluZCggIm1vdXNlZG93biIgKyB0aGlzLmV2ZW50TmFtZXNwYWNlLCBmdW5jdGlvbigpIHsKCQkJCQlpZiAoIG9wdGlvbnMuZGlzYWJsZWQgKSB7CgkJCQkJCXJldHVybiBmYWxzZTsKCQkJCQl9CgkJCQkJJCggdGhpcyApLmFkZENsYXNzKCAidWktc3RhdGUtYWN0aXZlIiApOwoJCQkJCWxhc3RBY3RpdmUgPSB0aGlzOwoJCQkJCXRoYXQuZG9jdW1lbnQub25lKCAibW91c2V1cCIsIGZ1bmN0aW9uKCkgewoJCQkJCQlsYXN0QWN0aXZlID0gbnVsbDsKCQkJCQl9KTsKCQkJCX0pCgkJCQkuYmluZCggIm1vdXNldXAiICsgdGhpcy5ldmVudE5hbWVzcGFjZSwgZnVuY3Rpb24oKSB7CgkJCQkJaWYgKCBvcHRpb25zLmRpc2FibGVkICkgewoJCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQkJfQoJCQkJCSQoIHRoaXMgKS5yZW1vdmVDbGFzcyggInVpLXN0YXRlLWFjdGl2ZSIgKTsKCQkJCX0pCgkJCQkuYmluZCggImtleWRvd24iICsgdGhpcy5ldmVudE5hbWVzcGFjZSwgZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQlpZiAoIG9wdGlvbnMuZGlzYWJsZWQgKSB7CgkJCQkJCXJldHVybiBmYWxzZTsKCQkJCQl9CgkJCQkJaWYgKCBldmVudC5rZXlDb2RlID09PSAkLnVpLmtleUNvZGUuU1BBQ0UgfHwgZXZlbnQua2V5Q29kZSA9PT0gJC51aS5rZXlDb2RlLkVOVEVSICkgewoJCQkJCQkkKCB0aGlzICkuYWRkQ2xhc3MoICJ1aS1zdGF0ZS1hY3RpdmUiICk7CgkJCQkJfQoJCQkJfSkKCQkJCS5iaW5kKCAia2V5dXAiICsgdGhpcy5ldmVudE5hbWVzcGFjZSwgZnVuY3Rpb24oKSB7CgkJCQkJJCggdGhpcyApLnJlbW92ZUNsYXNzKCAidWktc3RhdGUtYWN0aXZlIiApOwoJCQkJfSk7CgoJCQlpZiAoIHRoaXMuYnV0dG9uRWxlbWVudC5pcygiYSIpICkgewoJCQkJdGhpcy5idXR0b25FbGVtZW50LmtleXVwKGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJaWYgKCBldmVudC5rZXlDb2RlID09PSAkLnVpLmtleUNvZGUuU1BBQ0UgKSB7CgkJCQkJCS8vIFRPRE8gcGFzcyB0aHJvdWdoIG9yaWdpbmFsIGV2ZW50IGNvcnJlY3RseSAoanVzdCBhcyAybmQgYXJndW1lbnQgZG9lc24ndCB3b3JrKQoJCQkJCQkkKCB0aGlzICkuY2xpY2soKTsKCQkJCQl9CgkJCQl9KTsKCQkJfQoJCX0KCgkJLy8gVE9ETzogcHVsbCBvdXQgJC5XaWRnZXQncyBoYW5kbGluZyBmb3IgdGhlIGRpc2FibGVkIG9wdGlvbiBpbnRvCgkJLy8gJC5XaWRnZXQucHJvdG90eXBlLl9zZXRPcHRpb25EaXNhYmxlZCBzbyBpdCdzIGVhc3kgdG8gcHJveHkgYW5kIGNhbgoJCS8vIGJlIG92ZXJyaWRkZW4gYnkgaW5kaXZpZHVhbCBwbHVnaW5zCgkJdGhpcy5fc2V0T3B0aW9uKCAiZGlzYWJsZWQiLCBvcHRpb25zLmRpc2FibGVkICk7CgkJdGhpcy5fcmVzZXRCdXR0b24oKTsKCX0sCgoJX2RldGVybWluZUJ1dHRvblR5cGU6IGZ1bmN0aW9uKCkgewoJCXZhciBhbmNlc3RvciwgbGFiZWxTZWxlY3RvciwgY2hlY2tlZDsKCgkJaWYgKCB0aGlzLmVsZW1lbnQuaXMoIlt0eXBlPWNoZWNrYm94XSIpICkgewoJCQl0aGlzLnR5cGUgPSAiY2hlY2tib3giOwoJCX0gZWxzZSBpZiAoIHRoaXMuZWxlbWVudC5pcygiW3R5cGU9cmFkaW9dIikgKSB7CgkJCXRoaXMudHlwZSA9ICJyYWRpbyI7CgkJfSBlbHNlIGlmICggdGhpcy5lbGVtZW50LmlzKCJpbnB1dCIpICkgewoJCQl0aGlzLnR5cGUgPSAiaW5wdXQiOwoJCX0gZWxzZSB7CgkJCXRoaXMudHlwZSA9ICJidXR0b24iOwoJCX0KCgkJaWYgKCB0aGlzLnR5cGUgPT09ICJjaGVja2JveCIgfHwgdGhpcy50eXBlID09PSAicmFkaW8iICkgewoJCQkvLyB3ZSBkb24ndCBzZWFyY2ggYWdhaW5zdCB0aGUgZG9jdW1lbnQgaW4gY2FzZSB0aGUgZWxlbWVudAoJCQkvLyBpcyBkaXNjb25uZWN0ZWQgZnJvbSB0aGUgRE9NCgkJCWFuY2VzdG9yID0gdGhpcy5lbGVtZW50LnBhcmVudHMoKS5sYXN0KCk7CgkJCWxhYmVsU2VsZWN0b3IgPSAibGFiZWxbZm9yPSciICsgdGhpcy5lbGVtZW50LmF0dHIoImlkIikgKyAiJ10iOwoJCQl0aGlzLmJ1dHRvbkVsZW1lbnQgPSBhbmNlc3Rvci5maW5kKCBsYWJlbFNlbGVjdG9yICk7CgkJCWlmICggIXRoaXMuYnV0dG9uRWxlbWVudC5sZW5ndGggKSB7CgkJCQlhbmNlc3RvciA9IGFuY2VzdG9yLmxlbmd0aCA/IGFuY2VzdG9yLnNpYmxpbmdzKCkgOiB0aGlzLmVsZW1lbnQuc2libGluZ3MoKTsKCQkJCXRoaXMuYnV0dG9uRWxlbWVudCA9IGFuY2VzdG9yLmZpbHRlciggbGFiZWxTZWxlY3RvciApOwoJCQkJaWYgKCAhdGhpcy5idXR0b25FbGVtZW50Lmxlbmd0aCApIHsKCQkJCQl0aGlzLmJ1dHRvbkVsZW1lbnQgPSBhbmNlc3Rvci5maW5kKCBsYWJlbFNlbGVjdG9yICk7CgkJCQl9CgkJCX0KCQkJdGhpcy5lbGVtZW50LmFkZENsYXNzKCAidWktaGVscGVyLWhpZGRlbi1hY2Nlc3NpYmxlIiApOwoKCQkJY2hlY2tlZCA9IHRoaXMuZWxlbWVudC5pcyggIjpjaGVja2VkIiApOwoJCQlpZiAoIGNoZWNrZWQgKSB7CgkJCQl0aGlzLmJ1dHRvbkVsZW1lbnQuYWRkQ2xhc3MoICJ1aS1zdGF0ZS1hY3RpdmUiICk7CgkJCX0KCQkJdGhpcy5idXR0b25FbGVtZW50LnByb3AoICJhcmlhLXByZXNzZWQiLCBjaGVja2VkICk7CgkJfSBlbHNlIHsKCQkJdGhpcy5idXR0b25FbGVtZW50ID0gdGhpcy5lbGVtZW50OwoJCX0KCX0sCgoJd2lkZ2V0OiBmdW5jdGlvbigpIHsKCQlyZXR1cm4gdGhpcy5idXR0b25FbGVtZW50OwoJfSwKCglfZGVzdHJveTogZnVuY3Rpb24oKSB7CgkJdGhpcy5lbGVtZW50CgkJCS5yZW1vdmVDbGFzcyggInVpLWhlbHBlci1oaWRkZW4tYWNjZXNzaWJsZSIgKTsKCQl0aGlzLmJ1dHRvbkVsZW1lbnQKCQkJLnJlbW92ZUNsYXNzKCBiYXNlQ2xhc3NlcyArICIgIiArIHN0YXRlQ2xhc3NlcyArICIgIiArIHR5cGVDbGFzc2VzICkKCQkJLnJlbW92ZUF0dHIoICJyb2xlIiApCgkJCS5yZW1vdmVBdHRyKCAiYXJpYS1wcmVzc2VkIiApCgkJCS5odG1sKCB0aGlzLmJ1dHRvbkVsZW1lbnQuZmluZCgiLnVpLWJ1dHRvbi10ZXh0IikuaHRtbCgpICk7CgoJCWlmICggIXRoaXMuaGFzVGl0bGUgKSB7CgkJCXRoaXMuYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyKCAidGl0bGUiICk7CgkJfQoJfSwKCglfc2V0T3B0aW9uOiBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHsKCQl0aGlzLl9zdXBlcigga2V5LCB2YWx1ZSApOwoJCWlmICgga2V5ID09PSAiZGlzYWJsZWQiICkgewoJCQlpZiAoIHZhbHVlICkgewoJCQkJdGhpcy5lbGVtZW50LnByb3AoICJkaXNhYmxlZCIsIHRydWUgKTsKCQkJfSBlbHNlIHsKCQkJCXRoaXMuZWxlbWVudC5wcm9wKCAiZGlzYWJsZWQiLCBmYWxzZSApOwoJCQl9CgkJCXJldHVybjsKCQl9CgkJdGhpcy5fcmVzZXRCdXR0b24oKTsKCX0sCgoJcmVmcmVzaDogZnVuY3Rpb24oKSB7CgkJLy9TZWUgIzgyMzcgJiAjODgyOAoJCXZhciBpc0Rpc2FibGVkID0gdGhpcy5lbGVtZW50LmlzKCAiaW5wdXQsIGJ1dHRvbiIgKSA/IHRoaXMuZWxlbWVudC5pcyggIjpkaXNhYmxlZCIgKSA6IHRoaXMuZWxlbWVudC5oYXNDbGFzcyggInVpLWJ1dHRvbi1kaXNhYmxlZCIgKTsKCgkJaWYgKCBpc0Rpc2FibGVkICE9PSB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgKSB7CgkJCXRoaXMuX3NldE9wdGlvbiggImRpc2FibGVkIiwgaXNEaXNhYmxlZCApOwoJCX0KCQlpZiAoIHRoaXMudHlwZSA9PT0gInJhZGlvIiApIHsKCQkJcmFkaW9Hcm91cCggdGhpcy5lbGVtZW50WzBdICkuZWFjaChmdW5jdGlvbigpIHsKCQkJCWlmICggJCggdGhpcyApLmlzKCAiOmNoZWNrZWQiICkgKSB7CgkJCQkJJCggdGhpcyApLmJ1dHRvbiggIndpZGdldCIgKQoJCQkJCQkuYWRkQ2xhc3MoICJ1aS1zdGF0ZS1hY3RpdmUiICkKCQkJCQkJLmF0dHIoICJhcmlhLXByZXNzZWQiLCAidHJ1ZSIgKTsKCQkJCX0gZWxzZSB7CgkJCQkJJCggdGhpcyApLmJ1dHRvbiggIndpZGdldCIgKQoJCQkJCQkucmVtb3ZlQ2xhc3MoICJ1aS1zdGF0ZS1hY3RpdmUiICkKCQkJCQkJLmF0dHIoICJhcmlhLXByZXNzZWQiLCAiZmFsc2UiICk7CgkJCQl9CgkJCX0pOwoJCX0gZWxzZSBpZiAoIHRoaXMudHlwZSA9PT0gImNoZWNrYm94IiApIHsKCQkJaWYgKCB0aGlzLmVsZW1lbnQuaXMoICI6Y2hlY2tlZCIgKSApIHsKCQkJCXRoaXMuYnV0dG9uRWxlbWVudAoJCQkJCS5hZGRDbGFzcyggInVpLXN0YXRlLWFjdGl2ZSIgKQoJCQkJCS5hdHRyKCAiYXJpYS1wcmVzc2VkIiwgInRydWUiICk7CgkJCX0gZWxzZSB7CgkJCQl0aGlzLmJ1dHRvbkVsZW1lbnQKCQkJCQkucmVtb3ZlQ2xhc3MoICJ1aS1zdGF0ZS1hY3RpdmUiICkKCQkJCQkuYXR0ciggImFyaWEtcHJlc3NlZCIsICJmYWxzZSIgKTsKCQkJfQoJCX0KCX0sCgoJX3Jlc2V0QnV0dG9uOiBmdW5jdGlvbigpIHsKCQlpZiAoIHRoaXMudHlwZSA9PT0gImlucHV0IiApIHsKCQkJaWYgKCB0aGlzLm9wdGlvbnMubGFiZWwgKSB7CgkJCQl0aGlzLmVsZW1lbnQudmFsKCB0aGlzLm9wdGlvbnMubGFiZWwgKTsKCQkJfQoJCQlyZXR1cm47CgkJfQoJCXZhciBidXR0b25FbGVtZW50ID0gdGhpcy5idXR0b25FbGVtZW50LnJlbW92ZUNsYXNzKCB0eXBlQ2xhc3NlcyApLAoJCQlidXR0b25UZXh0ID0gJCggIjxzcGFuPjwvc3Bhbj4iLCB0aGlzLmRvY3VtZW50WzBdICkKCQkJCS5hZGRDbGFzcyggInVpLWJ1dHRvbi10ZXh0IiApCgkJCQkuaHRtbCggdGhpcy5vcHRpb25zLmxhYmVsICkKCQkJCS5hcHBlbmRUbyggYnV0dG9uRWxlbWVudC5lbXB0eSgpICkKCQkJCS50ZXh0KCksCgkJCWljb25zID0gdGhpcy5vcHRpb25zLmljb25zLAoJCQltdWx0aXBsZUljb25zID0gaWNvbnMucHJpbWFyeSAmJiBpY29ucy5zZWNvbmRhcnksCgkJCWJ1dHRvbkNsYXNzZXMgPSBbXTsKCgkJaWYgKCBpY29ucy5wcmltYXJ5IHx8IGljb25zLnNlY29uZGFyeSApIHsKCQkJaWYgKCB0aGlzLm9wdGlvbnMudGV4dCApIHsKCQkJCWJ1dHRvbkNsYXNzZXMucHVzaCggInVpLWJ1dHRvbi10ZXh0LWljb24iICsgKCBtdWx0aXBsZUljb25zID8gInMiIDogKCBpY29ucy5wcmltYXJ5ID8gIi1wcmltYXJ5IiA6ICItc2Vjb25kYXJ5IiApICkgKTsKCQkJfQoKCQkJaWYgKCBpY29ucy5wcmltYXJ5ICkgewoJCQkJYnV0dG9uRWxlbWVudC5wcmVwZW5kKCAiPHNwYW4gY2xhc3M9J3VpLWJ1dHRvbi1pY29uLXByaW1hcnkgdWktaWNvbiAiICsgaWNvbnMucHJpbWFyeSArICInPjwvc3Bhbj4iICk7CgkJCX0KCgkJCWlmICggaWNvbnMuc2Vjb25kYXJ5ICkgewoJCQkJYnV0dG9uRWxlbWVudC5hcHBlbmQoICI8c3BhbiBjbGFzcz0ndWktYnV0dG9uLWljb24tc2Vjb25kYXJ5IHVpLWljb24gIiArIGljb25zLnNlY29uZGFyeSArICInPjwvc3Bhbj4iICk7CgkJCX0KCgkJCWlmICggIXRoaXMub3B0aW9ucy50ZXh0ICkgewoJCQkJYnV0dG9uQ2xhc3Nlcy5wdXNoKCBtdWx0aXBsZUljb25zID8gInVpLWJ1dHRvbi1pY29ucy1vbmx5IiA6ICJ1aS1idXR0b24taWNvbi1vbmx5IiApOwoKCQkJCWlmICggIXRoaXMuaGFzVGl0bGUgKSB7CgkJCQkJYnV0dG9uRWxlbWVudC5hdHRyKCAidGl0bGUiLCAkLnRyaW0oIGJ1dHRvblRleHQgKSApOwoJCQkJfQoJCQl9CgkJfSBlbHNlIHsKCQkJYnV0dG9uQ2xhc3Nlcy5wdXNoKCAidWktYnV0dG9uLXRleHQtb25seSIgKTsKCQl9CgkJYnV0dG9uRWxlbWVudC5hZGRDbGFzcyggYnV0dG9uQ2xhc3Nlcy5qb2luKCAiICIgKSApOwoJfQp9KTsKCiQud2lkZ2V0KCAidWkuYnV0dG9uc2V0IiwgewoJdmVyc2lvbjogIjEuOS4yIiwKCW9wdGlvbnM6IHsKCQlpdGVtczogImJ1dHRvbiwgaW5wdXRbdHlwZT1idXR0b25dLCBpbnB1dFt0eXBlPXN1Ym1pdF0sIGlucHV0W3R5cGU9cmVzZXRdLCBpbnB1dFt0eXBlPWNoZWNrYm94XSwgaW5wdXRbdHlwZT1yYWRpb10sIGEsIDpkYXRhKGJ1dHRvbikiCgl9LAoKCV9jcmVhdGU6IGZ1bmN0aW9uKCkgewoJCXRoaXMuZWxlbWVudC5hZGRDbGFzcyggInVpLWJ1dHRvbnNldCIgKTsKCX0sCgoJX2luaXQ6IGZ1bmN0aW9uKCkgewoJCXRoaXMucmVmcmVzaCgpOwoJfSwKCglfc2V0T3B0aW9uOiBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHsKCQlpZiAoIGtleSA9PT0gImRpc2FibGVkIiApIHsKCQkJdGhpcy5idXR0b25zLmJ1dHRvbiggIm9wdGlvbiIsIGtleSwgdmFsdWUgKTsKCQl9CgoJCXRoaXMuX3N1cGVyKCBrZXksIHZhbHVlICk7Cgl9LAoKCXJlZnJlc2g6IGZ1bmN0aW9uKCkgewoJCXZhciBydGwgPSB0aGlzLmVsZW1lbnQuY3NzKCAiZGlyZWN0aW9uIiApID09PSAicnRsIjsKCgkJdGhpcy5idXR0b25zID0gdGhpcy5lbGVtZW50LmZpbmQoIHRoaXMub3B0aW9ucy5pdGVtcyApCgkJCS5maWx0ZXIoICI6dWktYnV0dG9uIiApCgkJCQkuYnV0dG9uKCAicmVmcmVzaCIgKQoJCQkuZW5kKCkKCQkJLm5vdCggIjp1aS1idXR0b24iICkKCQkJCS5idXR0b24oKQoJCQkuZW5kKCkKCQkJLm1hcChmdW5jdGlvbigpIHsKCQkJCXJldHVybiAkKCB0aGlzICkuYnV0dG9uKCAid2lkZ2V0IiApWyAwIF07CgkJCX0pCgkJCQkucmVtb3ZlQ2xhc3MoICJ1aS1jb3JuZXItYWxsIHVpLWNvcm5lci1sZWZ0IHVpLWNvcm5lci1yaWdodCIgKQoJCQkJLmZpbHRlciggIjpmaXJzdCIgKQoJCQkJCS5hZGRDbGFzcyggcnRsID8gInVpLWNvcm5lci1yaWdodCIgOiAidWktY29ybmVyLWxlZnQiICkKCQkJCS5lbmQoKQoJCQkJLmZpbHRlciggIjpsYXN0IiApCgkJCQkJLmFkZENsYXNzKCBydGwgPyAidWktY29ybmVyLWxlZnQiIDogInVpLWNvcm5lci1yaWdodCIgKQoJCQkJLmVuZCgpCgkJCS5lbmQoKTsKCX0sCgoJX2Rlc3Ryb3k6IGZ1bmN0aW9uKCkgewoJCXRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyggInVpLWJ1dHRvbnNldCIgKTsKCQl0aGlzLmJ1dHRvbnMKCQkJLm1hcChmdW5jdGlvbigpIHsKCQkJCXJldHVybiAkKCB0aGlzICkuYnV0dG9uKCAid2lkZ2V0IiApWyAwIF07CgkJCX0pCgkJCQkucmVtb3ZlQ2xhc3MoICJ1aS1jb3JuZXItbGVmdCB1aS1jb3JuZXItcmlnaHQiICkKCQkJLmVuZCgpCgkJCS5idXR0b24oICJkZXN0cm95IiApOwoJfQp9KTsKCn0oIGpRdWVyeSApICk7CihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkgewoKJC5leHRlbmQoJC51aSwgeyBkYXRlcGlja2VyOiB7IHZlcnNpb246ICIxLjkuMiIgfSB9KTsKCnZhciBQUk9QX05BTUUgPSAnZGF0ZXBpY2tlcic7CnZhciBkcHV1aWQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKdmFyIGluc3RBY3RpdmU7CgovKiBEYXRlIHBpY2tlciBtYW5hZ2VyLgogICBVc2UgdGhlIHNpbmdsZXRvbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLCAkLmRhdGVwaWNrZXIsIHRvIGludGVyYWN0IHdpdGggdGhlIGRhdGUgcGlja2VyLgogICBTZXR0aW5ncyBmb3IgKGdyb3VwcyBvZikgZGF0ZSBwaWNrZXJzIGFyZSBtYWludGFpbmVkIGluIGFuIGluc3RhbmNlIG9iamVjdCwKICAgYWxsb3dpbmcgbXVsdGlwbGUgZGlmZmVyZW50IHNldHRpbmdzIG9uIHRoZSBzYW1lIHBhZ2UuICovCgpmdW5jdGlvbiBEYXRlcGlja2VyKCkgewoJdGhpcy5kZWJ1ZyA9IGZhbHNlOyAvLyBDaGFuZ2UgdGhpcyB0byB0cnVlIHRvIHN0YXJ0IGRlYnVnZ2luZwoJdGhpcy5fY3VySW5zdCA9IG51bGw7IC8vIFRoZSBjdXJyZW50IGluc3RhbmNlIGluIHVzZQoJdGhpcy5fa2V5RXZlbnQgPSBmYWxzZTsgLy8gSWYgdGhlIGxhc3QgZXZlbnQgd2FzIGEga2V5IGV2ZW50Cgl0aGlzLl9kaXNhYmxlZElucHV0cyA9IFtdOyAvLyBMaXN0IG9mIGRhdGUgcGlja2VyIGlucHV0cyB0aGF0IGhhdmUgYmVlbiBkaXNhYmxlZAoJdGhpcy5fZGF0ZXBpY2tlclNob3dpbmcgPSBmYWxzZTsgLy8gVHJ1ZSBpZiB0aGUgcG9wdXAgcGlja2VyIGlzIHNob3dpbmcgLCBmYWxzZSBpZiBub3QKCXRoaXMuX2luRGlhbG9nID0gZmFsc2U7IC8vIFRydWUgaWYgc2hvd2luZyB3aXRoaW4gYSAiZGlhbG9nIiwgZmFsc2UgaWYgbm90Cgl0aGlzLl9tYWluRGl2SWQgPSAndWktZGF0ZXBpY2tlci1kaXYnOyAvLyBUaGUgSUQgb2YgdGhlIG1haW4gZGF0ZXBpY2tlciBkaXZpc2lvbgoJdGhpcy5faW5saW5lQ2xhc3MgPSAndWktZGF0ZXBpY2tlci1pbmxpbmUnOyAvLyBUaGUgbmFtZSBvZiB0aGUgaW5saW5lIG1hcmtlciBjbGFzcwoJdGhpcy5fYXBwZW5kQ2xhc3MgPSAndWktZGF0ZXBpY2tlci1hcHBlbmQnOyAvLyBUaGUgbmFtZSBvZiB0aGUgYXBwZW5kIG1hcmtlciBjbGFzcwoJdGhpcy5fdHJpZ2dlckNsYXNzID0gJ3VpLWRhdGVwaWNrZXItdHJpZ2dlcic7IC8vIFRoZSBuYW1lIG9mIHRoZSB0cmlnZ2VyIG1hcmtlciBjbGFzcwoJdGhpcy5fZGlhbG9nQ2xhc3MgPSAndWktZGF0ZXBpY2tlci1kaWFsb2cnOyAvLyBUaGUgbmFtZSBvZiB0aGUgZGlhbG9nIG1hcmtlciBjbGFzcwoJdGhpcy5fZGlzYWJsZUNsYXNzID0gJ3VpLWRhdGVwaWNrZXItZGlzYWJsZWQnOyAvLyBUaGUgbmFtZSBvZiB0aGUgZGlzYWJsZWQgY292ZXJpbmcgbWFya2VyIGNsYXNzCgl0aGlzLl91bnNlbGVjdGFibGVDbGFzcyA9ICd1aS1kYXRlcGlja2VyLXVuc2VsZWN0YWJsZSc7IC8vIFRoZSBuYW1lIG9mIHRoZSB1bnNlbGVjdGFibGUgY2VsbCBtYXJrZXIgY2xhc3MKCXRoaXMuX2N1cnJlbnRDbGFzcyA9ICd1aS1kYXRlcGlja2VyLWN1cnJlbnQtZGF5JzsgLy8gVGhlIG5hbWUgb2YgdGhlIGN1cnJlbnQgZGF5IG1hcmtlciBjbGFzcwoJdGhpcy5fZGF5T3ZlckNsYXNzID0gJ3VpLWRhdGVwaWNrZXItZGF5cy1jZWxsLW92ZXInOyAvLyBUaGUgbmFtZSBvZiB0aGUgZGF5IGhvdmVyIG1hcmtlciBjbGFzcwoJdGhpcy5yZWdpb25hbCA9IFtdOyAvLyBBdmFpbGFibGUgcmVnaW9uYWwgc2V0dGluZ3MsIGluZGV4ZWQgYnkgbGFuZ3VhZ2UgY29kZQoJdGhpcy5yZWdpb25hbFsnJ10gPSB7IC8vIERlZmF1bHQgcmVnaW9uYWwgc2V0dGluZ3MKCQljbG9zZVRleHQ6ICdEb25lJywgLy8gRGlzcGxheSB0ZXh0IGZvciBjbG9zZSBsaW5rCgkJcHJldlRleHQ6ICdQcmV2JywgLy8gRGlzcGxheSB0ZXh0IGZvciBwcmV2aW91cyBtb250aCBsaW5rCgkJbmV4dFRleHQ6ICdOZXh0JywgLy8gRGlzcGxheSB0ZXh0IGZvciBuZXh0IG1vbnRoIGxpbmsKCQljdXJyZW50VGV4dDogJ1RvZGF5JywgLy8gRGlzcGxheSB0ZXh0IGZvciBjdXJyZW50IG1vbnRoIGxpbmsKCQltb250aE5hbWVzOiBbJ0phbnVhcnknLCdGZWJydWFyeScsJ01hcmNoJywnQXByaWwnLCdNYXknLCdKdW5lJywKCQkJJ0p1bHknLCdBdWd1c3QnLCdTZXB0ZW1iZXInLCdPY3RvYmVyJywnTm92ZW1iZXInLCdEZWNlbWJlciddLCAvLyBOYW1lcyBvZiBtb250aHMgZm9yIGRyb3AtZG93biBhbmQgZm9ybWF0dGluZwoJCW1vbnRoTmFtZXNTaG9ydDogWydKYW4nLCAnRmViJywgJ01hcicsICdBcHInLCAnTWF5JywgJ0p1bicsICdKdWwnLCAnQXVnJywgJ1NlcCcsICdPY3QnLCAnTm92JywgJ0RlYyddLCAvLyBGb3IgZm9ybWF0dGluZwoJCWRheU5hbWVzOiBbJ1N1bmRheScsICdNb25kYXknLCAnVHVlc2RheScsICdXZWRuZXNkYXknLCAnVGh1cnNkYXknLCAnRnJpZGF5JywgJ1NhdHVyZGF5J10sIC8vIEZvciBmb3JtYXR0aW5nCgkJZGF5TmFtZXNTaG9ydDogWydTdW4nLCAnTW9uJywgJ1R1ZScsICdXZWQnLCAnVGh1JywgJ0ZyaScsICdTYXQnXSwgLy8gRm9yIGZvcm1hdHRpbmcKCQlkYXlOYW1lc01pbjogWydTdScsJ01vJywnVHUnLCdXZScsJ1RoJywnRnInLCdTYSddLCAvLyBDb2x1bW4gaGVhZGluZ3MgZm9yIGRheXMgc3RhcnRpbmcgYXQgU3VuZGF5CgkJd2Vla0hlYWRlcjogJ1drJywgLy8gQ29sdW1uIGhlYWRlciBmb3Igd2VlayBvZiB0aGUgeWVhcgoJCWRhdGVGb3JtYXQ6ICdtbS9kZC95eScsIC8vIFNlZSBmb3JtYXQgb3B0aW9ucyBvbiBwYXJzZURhdGUKCQlmaXJzdERheTogMCwgLy8gVGhlIGZpcnN0IGRheSBvZiB0aGUgd2VlaywgU3VuID0gMCwgTW9uID0gMSwgLi4uCgkJaXNSVEw6IGZhbHNlLCAvLyBUcnVlIGlmIHJpZ2h0LXRvLWxlZnQgbGFuZ3VhZ2UsIGZhbHNlIGlmIGxlZnQtdG8tcmlnaHQKCQlzaG93TW9udGhBZnRlclllYXI6IGZhbHNlLCAvLyBUcnVlIGlmIHRoZSB5ZWFyIHNlbGVjdCBwcmVjZWRlcyBtb250aCwgZmFsc2UgZm9yIG1vbnRoIHRoZW4geWVhcgoJCXllYXJTdWZmaXg6ICcnIC8vIEFkZGl0aW9uYWwgdGV4dCB0byBhcHBlbmQgdG8gdGhlIHllYXIgaW4gdGhlIG1vbnRoIGhlYWRlcnMKCX07Cgl0aGlzLl9kZWZhdWx0cyA9IHsgLy8gR2xvYmFsIGRlZmF1bHRzIGZvciBhbGwgdGhlIGRhdGUgcGlja2VyIGluc3RhbmNlcwoJCXNob3dPbjogJ2ZvY3VzJywgLy8gJ2ZvY3VzJyBmb3IgcG9wdXAgb24gZm9jdXMsCgkJCS8vICdidXR0b24nIGZvciB0cmlnZ2VyIGJ1dHRvbiwgb3IgJ2JvdGgnIGZvciBlaXRoZXIKCQlzaG93QW5pbTogJ2ZhZGVJbicsIC8vIE5hbWUgb2YgalF1ZXJ5IGFuaW1hdGlvbiBmb3IgcG9wdXAKCQlzaG93T3B0aW9uczoge30sIC8vIE9wdGlvbnMgZm9yIGVuaGFuY2VkIGFuaW1hdGlvbnMKCQlkZWZhdWx0RGF0ZTogbnVsbCwgLy8gVXNlZCB3aGVuIGZpZWxkIGlzIGJsYW5rOiBhY3R1YWwgZGF0ZSwKCQkJLy8gKy8tbnVtYmVyIGZvciBvZmZzZXQgZnJvbSB0b2RheSwgbnVsbCBmb3IgdG9kYXkKCQlhcHBlbmRUZXh0OiAnJywgLy8gRGlzcGxheSB0ZXh0IGZvbGxvd2luZyB0aGUgaW5wdXQgYm94LCBlLmcuIHNob3dpbmcgdGhlIGZvcm1hdAoJCWJ1dHRvblRleHQ6ICcuLi4nLCAvLyBUZXh0IGZvciB0cmlnZ2VyIGJ1dHRvbgoJCWJ1dHRvbkltYWdlOiAnJywgLy8gVVJMIGZvciB0cmlnZ2VyIGJ1dHRvbiBpbWFnZQoJCWJ1dHRvbkltYWdlT25seTogZmFsc2UsIC8vIFRydWUgaWYgdGhlIGltYWdlIGFwcGVhcnMgYWxvbmUsIGZhbHNlIGlmIGl0IGFwcGVhcnMgb24gYSBidXR0b24KCQloaWRlSWZOb1ByZXZOZXh0OiBmYWxzZSwgLy8gVHJ1ZSB0byBoaWRlIG5leHQvcHJldmlvdXMgbW9udGggbGlua3MKCQkJLy8gaWYgbm90IGFwcGxpY2FibGUsIGZhbHNlIHRvIGp1c3QgZGlzYWJsZSB0aGVtCgkJbmF2aWdhdGlvbkFzRGF0ZUZvcm1hdDogZmFsc2UsIC8vIFRydWUgaWYgZGF0ZSBmb3JtYXR0aW5nIGFwcGxpZWQgdG8gcHJldi90b2RheS9uZXh0IGxpbmtzCgkJZ290b0N1cnJlbnQ6IGZhbHNlLCAvLyBUcnVlIGlmIHRvZGF5IGxpbmsgZ29lcyBiYWNrIHRvIGN1cnJlbnQgc2VsZWN0aW9uIGluc3RlYWQKCQljaGFuZ2VNb250aDogZmFsc2UsIC8vIFRydWUgaWYgbW9udGggY2FuIGJlIHNlbGVjdGVkIGRpcmVjdGx5LCBmYWxzZSBpZiBvbmx5IHByZXYvbmV4dAoJCWNoYW5nZVllYXI6IGZhbHNlLCAvLyBUcnVlIGlmIHllYXIgY2FuIGJlIHNlbGVjdGVkIGRpcmVjdGx5LCBmYWxzZSBpZiBvbmx5IHByZXYvbmV4dAoJCXllYXJSYW5nZTogJ2MtMTA6YysxMCcsIC8vIFJhbmdlIG9mIHllYXJzIHRvIGRpc3BsYXkgaW4gZHJvcC1kb3duLAoJCQkvLyBlaXRoZXIgcmVsYXRpdmUgdG8gdG9kYXkncyB5ZWFyICgtbm46K25uKSwgcmVsYXRpdmUgdG8gY3VycmVudGx5IGRpc3BsYXllZCB5ZWFyCgkJCS8vIChjLW5uOmMrbm4pLCBhYnNvbHV0ZSAobm5ubjpubm5uKSwgb3IgYSBjb21iaW5hdGlvbiBvZiB0aGUgYWJvdmUgKG5ubm46LW4pCgkJc2hvd090aGVyTW9udGhzOiBmYWxzZSwgLy8gVHJ1ZSB0byBzaG93IGRhdGVzIGluIG90aGVyIG1vbnRocywgZmFsc2UgdG8gbGVhdmUgYmxhbmsKCQlzZWxlY3RPdGhlck1vbnRoczogZmFsc2UsIC8vIFRydWUgdG8gYWxsb3cgc2VsZWN0aW9uIG9mIGRhdGVzIGluIG90aGVyIG1vbnRocywgZmFsc2UgZm9yIHVuc2VsZWN0YWJsZQoJCXNob3dXZWVrOiBmYWxzZSwgLy8gVHJ1ZSB0byBzaG93IHdlZWsgb2YgdGhlIHllYXIsIGZhbHNlIHRvIG5vdCBzaG93IGl0CgkJY2FsY3VsYXRlV2VlazogdGhpcy5pc284NjAxV2VlaywgLy8gSG93IHRvIGNhbGN1bGF0ZSB0aGUgd2VlayBvZiB0aGUgeWVhciwKCQkJLy8gdGFrZXMgYSBEYXRlIGFuZCByZXR1cm5zIHRoZSBudW1iZXIgb2YgdGhlIHdlZWsgZm9yIGl0CgkJc2hvcnRZZWFyQ3V0b2ZmOiAnKzEwJywgLy8gU2hvcnQgeWVhciB2YWx1ZXMgPCB0aGlzIGFyZSBpbiB0aGUgY3VycmVudCBjZW50dXJ5LAoJCQkvLyA+IHRoaXMgYXJlIGluIHRoZSBwcmV2aW91cyBjZW50dXJ5LAoJCQkvLyBzdHJpbmcgdmFsdWUgc3RhcnRpbmcgd2l0aCAnKycgZm9yIGN1cnJlbnQgeWVhciArIHZhbHVlCgkJbWluRGF0ZTogbnVsbCwgLy8gVGhlIGVhcmxpZXN0IHNlbGVjdGFibGUgZGF0ZSwgb3IgbnVsbCBmb3Igbm8gbGltaXQKCQltYXhEYXRlOiBudWxsLCAvLyBUaGUgbGF0ZXN0IHNlbGVjdGFibGUgZGF0ZSwgb3IgbnVsbCBmb3Igbm8gbGltaXQKCQlkdXJhdGlvbjogJ2Zhc3QnLCAvLyBEdXJhdGlvbiBvZiBkaXNwbGF5L2Nsb3N1cmUKCQliZWZvcmVTaG93RGF5OiBudWxsLCAvLyBGdW5jdGlvbiB0aGF0IHRha2VzIGEgZGF0ZSBhbmQgcmV0dXJucyBhbiBhcnJheSB3aXRoCgkJCS8vIFswXSA9IHRydWUgaWYgc2VsZWN0YWJsZSwgZmFsc2UgaWYgbm90LCBbMV0gPSBjdXN0b20gQ1NTIGNsYXNzIG5hbWUocykgb3IgJycsCgkJCS8vIFsyXSA9IGNlbGwgdGl0bGUgKG9wdGlvbmFsKSwgZS5nLiAkLmRhdGVwaWNrZXIubm9XZWVrZW5kcwoJCWJlZm9yZVNob3c6IG51bGwsIC8vIEZ1bmN0aW9uIHRoYXQgdGFrZXMgYW4gaW5wdXQgZmllbGQgYW5kCgkJCS8vIHJldHVybnMgYSBzZXQgb2YgY3VzdG9tIHNldHRpbmdzIGZvciB0aGUgZGF0ZSBwaWNrZXIKCQlvblNlbGVjdDogbnVsbCwgLy8gRGVmaW5lIGEgY2FsbGJhY2sgZnVuY3Rpb24gd2hlbiBhIGRhdGUgaXMgc2VsZWN0ZWQKCQlvbkNoYW5nZU1vbnRoWWVhcjogbnVsbCwgLy8gRGVmaW5lIGEgY2FsbGJhY2sgZnVuY3Rpb24gd2hlbiB0aGUgbW9udGggb3IgeWVhciBpcyBjaGFuZ2VkCgkJb25DbG9zZTogbnVsbCwgLy8gRGVmaW5lIGEgY2FsbGJhY2sgZnVuY3Rpb24gd2hlbiB0aGUgZGF0ZXBpY2tlciBpcyBjbG9zZWQKCQludW1iZXJPZk1vbnRoczogMSwgLy8gTnVtYmVyIG9mIG1vbnRocyB0byBzaG93IGF0IGEgdGltZQoJCXNob3dDdXJyZW50QXRQb3M6IDAsIC8vIFRoZSBwb3NpdGlvbiBpbiBtdWx0aXBlIG1vbnRocyBhdCB3aGljaCB0byBzaG93IHRoZSBjdXJyZW50IG1vbnRoIChzdGFydGluZyBhdCAwKQoJCXN0ZXBNb250aHM6IDEsIC8vIE51bWJlciBvZiBtb250aHMgdG8gc3RlcCBiYWNrL2ZvcndhcmQKCQlzdGVwQmlnTW9udGhzOiAxMiwgLy8gTnVtYmVyIG9mIG1vbnRocyB0byBzdGVwIGJhY2svZm9yd2FyZCBmb3IgdGhlIGJpZyBsaW5rcwoJCWFsdEZpZWxkOiAnJywgLy8gU2VsZWN0b3IgZm9yIGFuIGFsdGVybmF0ZSBmaWVsZCB0byBzdG9yZSBzZWxlY3RlZCBkYXRlcyBpbnRvCgkJYWx0Rm9ybWF0OiAnJywgLy8gVGhlIGRhdGUgZm9ybWF0IHRvIHVzZSBmb3IgdGhlIGFsdGVybmF0ZSBmaWVsZAoJCWNvbnN0cmFpbklucHV0OiB0cnVlLCAvLyBUaGUgaW5wdXQgaXMgY29uc3RyYWluZWQgYnkgdGhlIGN1cnJlbnQgZGF0ZSBmb3JtYXQKCQlzaG93QnV0dG9uUGFuZWw6IGZhbHNlLCAvLyBUcnVlIHRvIHNob3cgYnV0dG9uIHBhbmVsLCBmYWxzZSB0byBub3Qgc2hvdyBpdAoJCWF1dG9TaXplOiBmYWxzZSwgLy8gVHJ1ZSB0byBzaXplIHRoZSBpbnB1dCBmb3IgdGhlIGRhdGUgZm9ybWF0LCBmYWxzZSB0byBsZWF2ZSBhcyBpcwoJCWRpc2FibGVkOiBmYWxzZSAvLyBUaGUgaW5pdGlhbCBkaXNhYmxlZCBzdGF0ZQoJfTsKCSQuZXh0ZW5kKHRoaXMuX2RlZmF1bHRzLCB0aGlzLnJlZ2lvbmFsWycnXSk7Cgl0aGlzLmRwRGl2ID0gYmluZEhvdmVyKCQoJzxkaXYgaWQ9IicgKyB0aGlzLl9tYWluRGl2SWQgKyAnIiBjbGFzcz0idWktZGF0ZXBpY2tlciB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktaGVscGVyLWNsZWFyZml4IHVpLWNvcm5lci1hbGwiPjwvZGl2PicpKTsKfQoKJC5leHRlbmQoRGF0ZXBpY2tlci5wcm90b3R5cGUsIHsKCS8qIENsYXNzIG5hbWUgYWRkZWQgdG8gZWxlbWVudHMgdG8gaW5kaWNhdGUgYWxyZWFkeSBjb25maWd1cmVkIHdpdGggYSBkYXRlIHBpY2tlci4gKi8KCW1hcmtlckNsYXNzTmFtZTogJ2hhc0RhdGVwaWNrZXInLAoKCS8vS2VlcCB0cmFjayBvZiB0aGUgbWF4aW11bSBudW1iZXIgb2Ygcm93cyBkaXNwbGF5ZWQgKHNlZSAjNzA0MykKCW1heFJvd3M6IDQsCgoJLyogRGVidWcgbG9nZ2luZyAoaWYgZW5hYmxlZCkuICovCglsb2c6IGZ1bmN0aW9uICgpIHsKCQlpZiAodGhpcy5kZWJ1ZykKCQkJY29uc29sZS5sb2cuYXBwbHkoJycsIGFyZ3VtZW50cyk7Cgl9LAoKCS8vIFRPRE8gcmVuYW1lIHRvICJ3aWRnZXQiIHdoZW4gc3dpdGNoaW5nIHRvIHdpZGdldCBmYWN0b3J5Cglfd2lkZ2V0RGF0ZXBpY2tlcjogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHRoaXMuZHBEaXY7Cgl9LAoKCS8qIE92ZXJyaWRlIHRoZSBkZWZhdWx0IHNldHRpbmdzIGZvciBhbGwgaW5zdGFuY2VzIG9mIHRoZSBkYXRlIHBpY2tlci4KCSAgIEBwYXJhbSAgc2V0dGluZ3MgIG9iamVjdCAtIHRoZSBuZXcgc2V0dGluZ3MgdG8gdXNlIGFzIGRlZmF1bHRzIChhbm9ueW1vdXMgb2JqZWN0KQoJICAgQHJldHVybiB0aGUgbWFuYWdlciBvYmplY3QgKi8KCXNldERlZmF1bHRzOiBmdW5jdGlvbihzZXR0aW5ncykgewoJCWV4dGVuZFJlbW92ZSh0aGlzLl9kZWZhdWx0cywgc2V0dGluZ3MgfHwge30pOwoJCXJldHVybiB0aGlzOwoJfSwKCgkvKiBBdHRhY2ggdGhlIGRhdGUgcGlja2VyIHRvIGEgalF1ZXJ5IHNlbGVjdGlvbi4KCSAgIEBwYXJhbSAgdGFyZ2V0ICAgIGVsZW1lbnQgLSB0aGUgdGFyZ2V0IGlucHV0IGZpZWxkIG9yIGRpdmlzaW9uIG9yIHNwYW4KCSAgIEBwYXJhbSAgc2V0dGluZ3MgIG9iamVjdCAtIHRoZSBuZXcgc2V0dGluZ3MgdG8gdXNlIGZvciB0aGlzIGRhdGUgcGlja2VyIGluc3RhbmNlIChhbm9ueW1vdXMpICovCglfYXR0YWNoRGF0ZXBpY2tlcjogZnVuY3Rpb24odGFyZ2V0LCBzZXR0aW5ncykgewoJCS8vIGNoZWNrIGZvciBzZXR0aW5ncyBvbiB0aGUgY29udHJvbCBpdHNlbGYgLSBpbiBuYW1lc3BhY2UgJ2RhdGU6JwoJCXZhciBpbmxpbmVTZXR0aW5ncyA9IG51bGw7CgkJZm9yICh2YXIgYXR0ck5hbWUgaW4gdGhpcy5fZGVmYXVsdHMpIHsKCQkJdmFyIGF0dHJWYWx1ZSA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGU6JyArIGF0dHJOYW1lKTsKCQkJaWYgKGF0dHJWYWx1ZSkgewoJCQkJaW5saW5lU2V0dGluZ3MgPSBpbmxpbmVTZXR0aW5ncyB8fCB7fTsKCQkJCXRyeSB7CgkJCQkJaW5saW5lU2V0dGluZ3NbYXR0ck5hbWVdID0gZXZhbChhdHRyVmFsdWUpOwoJCQkJfSBjYXRjaCAoZXJyKSB7CgkJCQkJaW5saW5lU2V0dGluZ3NbYXR0ck5hbWVdID0gYXR0clZhbHVlOwoJCQkJfQoJCQl9CgkJfQoJCXZhciBub2RlTmFtZSA9IHRhcmdldC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOwoJCXZhciBpbmxpbmUgPSAobm9kZU5hbWUgPT0gJ2RpdicgfHwgbm9kZU5hbWUgPT0gJ3NwYW4nKTsKCQlpZiAoIXRhcmdldC5pZCkgewoJCQl0aGlzLnV1aWQgKz0gMTsKCQkJdGFyZ2V0LmlkID0gJ2RwJyArIHRoaXMudXVpZDsKCQl9CgkJdmFyIGluc3QgPSB0aGlzLl9uZXdJbnN0KCQodGFyZ2V0KSwgaW5saW5lKTsKCQlpbnN0LnNldHRpbmdzID0gJC5leHRlbmQoe30sIHNldHRpbmdzIHx8IHt9LCBpbmxpbmVTZXR0aW5ncyB8fCB7fSk7CgkJaWYgKG5vZGVOYW1lID09ICdpbnB1dCcpIHsKCQkJdGhpcy5fY29ubmVjdERhdGVwaWNrZXIodGFyZ2V0LCBpbnN0KTsKCQl9IGVsc2UgaWYgKGlubGluZSkgewoJCQl0aGlzLl9pbmxpbmVEYXRlcGlja2VyKHRhcmdldCwgaW5zdCk7CgkJfQoJfSwKCgkvKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2JqZWN0LiAqLwoJX25ld0luc3Q6IGZ1bmN0aW9uKHRhcmdldCwgaW5saW5lKSB7CgkJdmFyIGlkID0gdGFyZ2V0WzBdLmlkLnJlcGxhY2UoLyhbXkEtWmEtejAtOV8tXSkvZywgJ1xcXFwkMScpOyAvLyBlc2NhcGUgalF1ZXJ5IG1ldGEgY2hhcnMKCQlyZXR1cm4ge2lkOiBpZCwgaW5wdXQ6IHRhcmdldCwgLy8gYXNzb2NpYXRlZCB0YXJnZXQKCQkJc2VsZWN0ZWREYXk6IDAsIHNlbGVjdGVkTW9udGg6IDAsIHNlbGVjdGVkWWVhcjogMCwgLy8gY3VycmVudCBzZWxlY3Rpb24KCQkJZHJhd01vbnRoOiAwLCBkcmF3WWVhcjogMCwgLy8gbW9udGggYmVpbmcgZHJhd24KCQkJaW5saW5lOiBpbmxpbmUsIC8vIGlzIGRhdGVwaWNrZXIgaW5saW5lIG9yIG5vdAoJCQlkcERpdjogKCFpbmxpbmUgPyB0aGlzLmRwRGl2IDogLy8gcHJlc2VudGF0aW9uIGRpdgoJCQliaW5kSG92ZXIoJCgnPGRpdiBjbGFzcz0iJyArIHRoaXMuX2lubGluZUNsYXNzICsgJyB1aS1kYXRlcGlja2VyIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1oZWxwZXItY2xlYXJmaXggdWktY29ybmVyLWFsbCI+PC9kaXY+JykpKX07Cgl9LAoKCS8qIEF0dGFjaCB0aGUgZGF0ZSBwaWNrZXIgdG8gYW4gaW5wdXQgZmllbGQuICovCglfY29ubmVjdERhdGVwaWNrZXI6IGZ1bmN0aW9uKHRhcmdldCwgaW5zdCkgewoJCXZhciBpbnB1dCA9ICQodGFyZ2V0KTsKCQlpbnN0LmFwcGVuZCA9ICQoW10pOwoJCWluc3QudHJpZ2dlciA9ICQoW10pOwoJCWlmIChpbnB1dC5oYXNDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkpCgkJCXJldHVybjsKCQl0aGlzLl9hdHRhY2htZW50cyhpbnB1dCwgaW5zdCk7CgkJaW5wdXQuYWRkQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpLmtleWRvd24odGhpcy5fZG9LZXlEb3duKS4KCQkJa2V5cHJlc3ModGhpcy5fZG9LZXlQcmVzcykua2V5dXAodGhpcy5fZG9LZXlVcCkuCgkJCWJpbmQoInNldERhdGEuZGF0ZXBpY2tlciIsIGZ1bmN0aW9uKGV2ZW50LCBrZXksIHZhbHVlKSB7CgkJCQlpbnN0LnNldHRpbmdzW2tleV0gPSB2YWx1ZTsKCQkJfSkuYmluZCgiZ2V0RGF0YS5kYXRlcGlja2VyIiwgZnVuY3Rpb24oZXZlbnQsIGtleSkgewoJCQkJcmV0dXJuIHRoaXMuX2dldChpbnN0LCBrZXkpOwoJCQl9KTsKCQl0aGlzLl9hdXRvU2l6ZShpbnN0KTsKCQkkLmRhdGEodGFyZ2V0LCBQUk9QX05BTUUsIGluc3QpOwoJCS8vSWYgZGlzYWJsZWQgb3B0aW9uIGlzIHRydWUsIGRpc2FibGUgdGhlIGRhdGVwaWNrZXIgb25jZSBpdCBoYXMgYmVlbiBhdHRhY2hlZCB0byB0aGUgaW5wdXQgKHNlZSB0aWNrZXQgIzU2NjUpCgkJaWYoIGluc3Quc2V0dGluZ3MuZGlzYWJsZWQgKSB7CgkJCXRoaXMuX2Rpc2FibGVEYXRlcGlja2VyKCB0YXJnZXQgKTsKCQl9Cgl9LAoKCS8qIE1ha2UgYXR0YWNobWVudHMgYmFzZWQgb24gc2V0dGluZ3MuICovCglfYXR0YWNobWVudHM6IGZ1bmN0aW9uKGlucHV0LCBpbnN0KSB7CgkJdmFyIGFwcGVuZFRleHQgPSB0aGlzLl9nZXQoaW5zdCwgJ2FwcGVuZFRleHQnKTsKCQl2YXIgaXNSVEwgPSB0aGlzLl9nZXQoaW5zdCwgJ2lzUlRMJyk7CgkJaWYgKGluc3QuYXBwZW5kKQoJCQlpbnN0LmFwcGVuZC5yZW1vdmUoKTsKCQlpZiAoYXBwZW5kVGV4dCkgewoJCQlpbnN0LmFwcGVuZCA9ICQoJzxzcGFuIGNsYXNzPSInICsgdGhpcy5fYXBwZW5kQ2xhc3MgKyAnIj4nICsgYXBwZW5kVGV4dCArICc8L3NwYW4+Jyk7CgkJCWlucHV0W2lzUlRMID8gJ2JlZm9yZScgOiAnYWZ0ZXInXShpbnN0LmFwcGVuZCk7CgkJfQoJCWlucHV0LnVuYmluZCgnZm9jdXMnLCB0aGlzLl9zaG93RGF0ZXBpY2tlcik7CgkJaWYgKGluc3QudHJpZ2dlcikKCQkJaW5zdC50cmlnZ2VyLnJlbW92ZSgpOwoJCXZhciBzaG93T24gPSB0aGlzLl9nZXQoaW5zdCwgJ3Nob3dPbicpOwoJCWlmIChzaG93T24gPT0gJ2ZvY3VzJyB8fCBzaG93T24gPT0gJ2JvdGgnKSAvLyBwb3AtdXAgZGF0ZSBwaWNrZXIgd2hlbiBpbiB0aGUgbWFya2VkIGZpZWxkCgkJCWlucHV0LmZvY3VzKHRoaXMuX3Nob3dEYXRlcGlja2VyKTsKCQlpZiAoc2hvd09uID09ICdidXR0b24nIHx8IHNob3dPbiA9PSAnYm90aCcpIHsgLy8gcG9wLXVwIGRhdGUgcGlja2VyIHdoZW4gYnV0dG9uIGNsaWNrZWQKCQkJdmFyIGJ1dHRvblRleHQgPSB0aGlzLl9nZXQoaW5zdCwgJ2J1dHRvblRleHQnKTsKCQkJdmFyIGJ1dHRvbkltYWdlID0gdGhpcy5fZ2V0KGluc3QsICdidXR0b25JbWFnZScpOwoJCQlpbnN0LnRyaWdnZXIgPSAkKHRoaXMuX2dldChpbnN0LCAnYnV0dG9uSW1hZ2VPbmx5JykgPwoJCQkJJCgnPGltZy8+JykuYWRkQ2xhc3ModGhpcy5fdHJpZ2dlckNsYXNzKS4KCQkJCQlhdHRyKHsgc3JjOiBidXR0b25JbWFnZSwgYWx0OiBidXR0b25UZXh0LCB0aXRsZTogYnV0dG9uVGV4dCB9KSA6CgkJCQkkKCc8YnV0dG9uIHR5cGU9ImJ1dHRvbiI+PC9idXR0b24+JykuYWRkQ2xhc3ModGhpcy5fdHJpZ2dlckNsYXNzKS4KCQkJCQlodG1sKGJ1dHRvbkltYWdlID09ICcnID8gYnV0dG9uVGV4dCA6ICQoJzxpbWcvPicpLmF0dHIoCgkJCQkJeyBzcmM6YnV0dG9uSW1hZ2UsIGFsdDpidXR0b25UZXh0LCB0aXRsZTpidXR0b25UZXh0IH0pKSk7CgkJCWlucHV0W2lzUlRMID8gJ2JlZm9yZScgOiAnYWZ0ZXInXShpbnN0LnRyaWdnZXIpOwoJCQlpbnN0LnRyaWdnZXIuY2xpY2soZnVuY3Rpb24oKSB7CgkJCQlpZiAoJC5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZyAmJiAkLmRhdGVwaWNrZXIuX2xhc3RJbnB1dCA9PSBpbnB1dFswXSkKCQkJCQkkLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCk7CgkJCQllbHNlIGlmICgkLmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nICYmICQuZGF0ZXBpY2tlci5fbGFzdElucHV0ICE9IGlucHV0WzBdKSB7CgkJCQkJJC5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpOwoJCQkJCSQuZGF0ZXBpY2tlci5fc2hvd0RhdGVwaWNrZXIoaW5wdXRbMF0pOwoJCQkJfSBlbHNlCgkJCQkJJC5kYXRlcGlja2VyLl9zaG93RGF0ZXBpY2tlcihpbnB1dFswXSk7CgkJCQlyZXR1cm4gZmFsc2U7CgkJCX0pOwoJCX0KCX0sCgoJLyogQXBwbHkgdGhlIG1heGltdW0gbGVuZ3RoIGZvciB0aGUgZGF0ZSBmb3JtYXQuICovCglfYXV0b1NpemU6IGZ1bmN0aW9uKGluc3QpIHsKCQlpZiAodGhpcy5fZ2V0KGluc3QsICdhdXRvU2l6ZScpICYmICFpbnN0LmlubGluZSkgewoJCQl2YXIgZGF0ZSA9IG5ldyBEYXRlKDIwMDksIDEyIC0gMSwgMjApOyAvLyBFbnN1cmUgZG91YmxlIGRpZ2l0cwoJCQl2YXIgZGF0ZUZvcm1hdCA9IHRoaXMuX2dldChpbnN0LCAnZGF0ZUZvcm1hdCcpOwoJCQlpZiAoZGF0ZUZvcm1hdC5tYXRjaCgvW0RNXS8pKSB7CgkJCQl2YXIgZmluZE1heCA9IGZ1bmN0aW9uKG5hbWVzKSB7CgkJCQkJdmFyIG1heCA9IDA7CgkJCQkJdmFyIG1heEkgPSAwOwoJCQkJCWZvciAodmFyIGkgPSAwOyBpIDwgbmFtZXMubGVuZ3RoOyBpKyspIHsKCQkJCQkJaWYgKG5hbWVzW2ldLmxlbmd0aCA+IG1heCkgewoJCQkJCQkJbWF4ID0gbmFtZXNbaV0ubGVuZ3RoOwoJCQkJCQkJbWF4SSA9IGk7CgkJCQkJCX0KCQkJCQl9CgkJCQkJcmV0dXJuIG1heEk7CgkJCQl9OwoJCQkJZGF0ZS5zZXRNb250aChmaW5kTWF4KHRoaXMuX2dldChpbnN0LCAoZGF0ZUZvcm1hdC5tYXRjaCgvTU0vKSA/CgkJCQkJJ21vbnRoTmFtZXMnIDogJ21vbnRoTmFtZXNTaG9ydCcpKSkpOwoJCQkJZGF0ZS5zZXREYXRlKGZpbmRNYXgodGhpcy5fZ2V0KGluc3QsIChkYXRlRm9ybWF0Lm1hdGNoKC9ERC8pID8KCQkJCQknZGF5TmFtZXMnIDogJ2RheU5hbWVzU2hvcnQnKSkpICsgMjAgLSBkYXRlLmdldERheSgpKTsKCQkJfQoJCQlpbnN0LmlucHV0LmF0dHIoJ3NpemUnLCB0aGlzLl9mb3JtYXREYXRlKGluc3QsIGRhdGUpLmxlbmd0aCk7CgkJfQoJfSwKCgkvKiBBdHRhY2ggYW4gaW5saW5lIGRhdGUgcGlja2VyIHRvIGEgZGl2LiAqLwoJX2lubGluZURhdGVwaWNrZXI6IGZ1bmN0aW9uKHRhcmdldCwgaW5zdCkgewoJCXZhciBkaXZTcGFuID0gJCh0YXJnZXQpOwoJCWlmIChkaXZTcGFuLmhhc0NsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKSkKCQkJcmV0dXJuOwoJCWRpdlNwYW4uYWRkQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpLmFwcGVuZChpbnN0LmRwRGl2KS4KCQkJYmluZCgic2V0RGF0YS5kYXRlcGlja2VyIiwgZnVuY3Rpb24oZXZlbnQsIGtleSwgdmFsdWUpewoJCQkJaW5zdC5zZXR0aW5nc1trZXldID0gdmFsdWU7CgkJCX0pLmJpbmQoImdldERhdGEuZGF0ZXBpY2tlciIsIGZ1bmN0aW9uKGV2ZW50LCBrZXkpewoJCQkJcmV0dXJuIHRoaXMuX2dldChpbnN0LCBrZXkpOwoJCQl9KTsKCQkkLmRhdGEodGFyZ2V0LCBQUk9QX05BTUUsIGluc3QpOwoJCXRoaXMuX3NldERhdGUoaW5zdCwgdGhpcy5fZ2V0RGVmYXVsdERhdGUoaW5zdCksIHRydWUpOwoJCXRoaXMuX3VwZGF0ZURhdGVwaWNrZXIoaW5zdCk7CgkJdGhpcy5fdXBkYXRlQWx0ZXJuYXRlKGluc3QpOwoJCS8vSWYgZGlzYWJsZWQgb3B0aW9uIGlzIHRydWUsIGRpc2FibGUgdGhlIGRhdGVwaWNrZXIgYmVmb3JlIHNob3dpbmcgaXQgKHNlZSB0aWNrZXQgIzU2NjUpCgkJaWYoIGluc3Quc2V0dGluZ3MuZGlzYWJsZWQgKSB7CgkJCXRoaXMuX2Rpc2FibGVEYXRlcGlja2VyKCB0YXJnZXQgKTsKCQl9CgkJLy8gU2V0IGRpc3BsYXk6YmxvY2sgaW4gcGxhY2Ugb2YgaW5zdC5kcERpdi5zaG93KCkgd2hpY2ggd29uJ3Qgd29yayBvbiBkaXNjb25uZWN0ZWQgZWxlbWVudHMKCQkvLyBodHRwOi8vYnVncy5qcXVlcnl1aS5jb20vdGlja2V0Lzc1NTIgLSBBIERhdGVwaWNrZXIgY3JlYXRlZCBvbiBhIGRldGFjaGVkIGRpdiBoYXMgemVybyBoZWlnaHQKCQlpbnN0LmRwRGl2LmNzcyggImRpc3BsYXkiLCAiYmxvY2siICk7Cgl9LAoKCS8qIFBvcC11cCB0aGUgZGF0ZSBwaWNrZXIgaW4gYSAiZGlhbG9nIiBib3guCgkgICBAcGFyYW0gIGlucHV0ICAgICBlbGVtZW50IC0gaWdub3JlZAoJICAgQHBhcmFtICBkYXRlICAgICAgc3RyaW5nIG9yIERhdGUgLSB0aGUgaW5pdGlhbCBkYXRlIHRvIGRpc3BsYXkKCSAgIEBwYXJhbSAgb25TZWxlY3QgIGZ1bmN0aW9uIC0gdGhlIGZ1bmN0aW9uIHRvIGNhbGwgd2hlbiBhIGRhdGUgaXMgc2VsZWN0ZWQKCSAgIEBwYXJhbSAgc2V0dGluZ3MgIG9iamVjdCAtIHVwZGF0ZSB0aGUgZGlhbG9nIGRhdGUgcGlja2VyIGluc3RhbmNlJ3Mgc2V0dGluZ3MgKGFub255bW91cyBvYmplY3QpCgkgICBAcGFyYW0gIHBvcyAgICAgICBpbnRbMl0gLSBjb29yZGluYXRlcyBmb3IgdGhlIGRpYWxvZydzIHBvc2l0aW9uIHdpdGhpbiB0aGUgc2NyZWVuIG9yCgkgICAgICAgICAgICAgICAgICAgICBldmVudCAtIHdpdGggeC95IGNvb3JkaW5hdGVzIG9yCgkgICAgICAgICAgICAgICAgICAgICBsZWF2ZSBlbXB0eSBmb3IgZGVmYXVsdCAoc2NyZWVuIGNlbnRyZSkKCSAgIEByZXR1cm4gdGhlIG1hbmFnZXIgb2JqZWN0ICovCglfZGlhbG9nRGF0ZXBpY2tlcjogZnVuY3Rpb24oaW5wdXQsIGRhdGUsIG9uU2VsZWN0LCBzZXR0aW5ncywgcG9zKSB7CgkJdmFyIGluc3QgPSB0aGlzLl9kaWFsb2dJbnN0OyAvLyBpbnRlcm5hbCBpbnN0YW5jZQoJCWlmICghaW5zdCkgewoJCQl0aGlzLnV1aWQgKz0gMTsKCQkJdmFyIGlkID0gJ2RwJyArIHRoaXMudXVpZDsKCQkJdGhpcy5fZGlhbG9nSW5wdXQgPSAkKCc8aW5wdXQgdHlwZT0idGV4dCIgaWQ9IicgKyBpZCArCgkJCQknIiBzdHlsZT0icG9zaXRpb246IGFic29sdXRlOyB0b3A6IC0xMDBweDsgd2lkdGg6IDBweDsiLz4nKTsKCQkJdGhpcy5fZGlhbG9nSW5wdXQua2V5ZG93bih0aGlzLl9kb0tleURvd24pOwoJCQkkKCdib2R5JykuYXBwZW5kKHRoaXMuX2RpYWxvZ0lucHV0KTsKCQkJaW5zdCA9IHRoaXMuX2RpYWxvZ0luc3QgPSB0aGlzLl9uZXdJbnN0KHRoaXMuX2RpYWxvZ0lucHV0LCBmYWxzZSk7CgkJCWluc3Quc2V0dGluZ3MgPSB7fTsKCQkJJC5kYXRhKHRoaXMuX2RpYWxvZ0lucHV0WzBdLCBQUk9QX05BTUUsIGluc3QpOwoJCX0KCQlleHRlbmRSZW1vdmUoaW5zdC5zZXR0aW5ncywgc2V0dGluZ3MgfHwge30pOwoJCWRhdGUgPSAoZGF0ZSAmJiBkYXRlLmNvbnN0cnVjdG9yID09IERhdGUgPyB0aGlzLl9mb3JtYXREYXRlKGluc3QsIGRhdGUpIDogZGF0ZSk7CgkJdGhpcy5fZGlhbG9nSW5wdXQudmFsKGRhdGUpOwoKCQl0aGlzLl9wb3MgPSAocG9zID8gKHBvcy5sZW5ndGggPyBwb3MgOiBbcG9zLnBhZ2VYLCBwb3MucGFnZVldKSA6IG51bGwpOwoJCWlmICghdGhpcy5fcG9zKSB7CgkJCXZhciBicm93c2VyV2lkdGggPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg7CgkJCXZhciBicm93c2VySGVpZ2h0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDsKCQkJdmFyIHNjcm9sbFggPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQ7CgkJCXZhciBzY3JvbGxZID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDsKCQkJdGhpcy5fcG9zID0gLy8gc2hvdWxkIHVzZSBhY3R1YWwgd2lkdGgvaGVpZ2h0IGJlbG93CgkJCQlbKGJyb3dzZXJXaWR0aCAvIDIpIC0gMTAwICsgc2Nyb2xsWCwgKGJyb3dzZXJIZWlnaHQgLyAyKSAtIDE1MCArIHNjcm9sbFldOwoJCX0KCgkJLy8gbW92ZSBpbnB1dCBvbiBzY3JlZW4gZm9yIGZvY3VzLCBidXQgaGlkZGVuIGJlaGluZCBkaWFsb2cKCQl0aGlzLl9kaWFsb2dJbnB1dC5jc3MoJ2xlZnQnLCAodGhpcy5fcG9zWzBdICsgMjApICsgJ3B4JykuY3NzKCd0b3AnLCB0aGlzLl9wb3NbMV0gKyAncHgnKTsKCQlpbnN0LnNldHRpbmdzLm9uU2VsZWN0ID0gb25TZWxlY3Q7CgkJdGhpcy5faW5EaWFsb2cgPSB0cnVlOwoJCXRoaXMuZHBEaXYuYWRkQ2xhc3ModGhpcy5fZGlhbG9nQ2xhc3MpOwoJCXRoaXMuX3Nob3dEYXRlcGlja2VyKHRoaXMuX2RpYWxvZ0lucHV0WzBdKTsKCQlpZiAoJC5ibG9ja1VJKQoJCQkkLmJsb2NrVUkodGhpcy5kcERpdik7CgkJJC5kYXRhKHRoaXMuX2RpYWxvZ0lucHV0WzBdLCBQUk9QX05BTUUsIGluc3QpOwoJCXJldHVybiB0aGlzOwoJfSwKCgkvKiBEZXRhY2ggYSBkYXRlcGlja2VyIGZyb20gaXRzIGNvbnRyb2wuCgkgICBAcGFyYW0gIHRhcmdldCAgICBlbGVtZW50IC0gdGhlIHRhcmdldCBpbnB1dCBmaWVsZCBvciBkaXZpc2lvbiBvciBzcGFuICovCglfZGVzdHJveURhdGVwaWNrZXI6IGZ1bmN0aW9uKHRhcmdldCkgewoJCXZhciAkdGFyZ2V0ID0gJCh0YXJnZXQpOwoJCXZhciBpbnN0ID0gJC5kYXRhKHRhcmdldCwgUFJPUF9OQU1FKTsKCQlpZiAoISR0YXJnZXQuaGFzQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpKSB7CgkJCXJldHVybjsKCQl9CgkJdmFyIG5vZGVOYW1lID0gdGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7CgkJJC5yZW1vdmVEYXRhKHRhcmdldCwgUFJPUF9OQU1FKTsKCQlpZiAobm9kZU5hbWUgPT0gJ2lucHV0JykgewoJCQlpbnN0LmFwcGVuZC5yZW1vdmUoKTsKCQkJaW5zdC50cmlnZ2VyLnJlbW92ZSgpOwoJCQkkdGFyZ2V0LnJlbW92ZUNsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKS4KCQkJCXVuYmluZCgnZm9jdXMnLCB0aGlzLl9zaG93RGF0ZXBpY2tlcikuCgkJCQl1bmJpbmQoJ2tleWRvd24nLCB0aGlzLl9kb0tleURvd24pLgoJCQkJdW5iaW5kKCdrZXlwcmVzcycsIHRoaXMuX2RvS2V5UHJlc3MpLgoJCQkJdW5iaW5kKCdrZXl1cCcsIHRoaXMuX2RvS2V5VXApOwoJCX0gZWxzZSBpZiAobm9kZU5hbWUgPT0gJ2RpdicgfHwgbm9kZU5hbWUgPT0gJ3NwYW4nKQoJCQkkdGFyZ2V0LnJlbW92ZUNsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKS5lbXB0eSgpOwoJfSwKCgkvKiBFbmFibGUgdGhlIGRhdGUgcGlja2VyIHRvIGEgalF1ZXJ5IHNlbGVjdGlvbi4KCSAgIEBwYXJhbSAgdGFyZ2V0ICAgIGVsZW1lbnQgLSB0aGUgdGFyZ2V0IGlucHV0IGZpZWxkIG9yIGRpdmlzaW9uIG9yIHNwYW4gKi8KCV9lbmFibGVEYXRlcGlja2VyOiBmdW5jdGlvbih0YXJnZXQpIHsKCQl2YXIgJHRhcmdldCA9ICQodGFyZ2V0KTsKCQl2YXIgaW5zdCA9ICQuZGF0YSh0YXJnZXQsIFBST1BfTkFNRSk7CgkJaWYgKCEkdGFyZ2V0Lmhhc0NsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKSkgewoJCQlyZXR1cm47CgkJfQoJCXZhciBub2RlTmFtZSA9IHRhcmdldC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOwoJCWlmIChub2RlTmFtZSA9PSAnaW5wdXQnKSB7CgkJCXRhcmdldC5kaXNhYmxlZCA9IGZhbHNlOwoJCQlpbnN0LnRyaWdnZXIuZmlsdGVyKCdidXR0b24nKS4KCQkJCWVhY2goZnVuY3Rpb24oKSB7IHRoaXMuZGlzYWJsZWQgPSBmYWxzZTsgfSkuZW5kKCkuCgkJCQlmaWx0ZXIoJ2ltZycpLmNzcyh7b3BhY2l0eTogJzEuMCcsIGN1cnNvcjogJyd9KTsKCQl9CgkJZWxzZSBpZiAobm9kZU5hbWUgPT0gJ2RpdicgfHwgbm9kZU5hbWUgPT0gJ3NwYW4nKSB7CgkJCXZhciBpbmxpbmUgPSAkdGFyZ2V0LmNoaWxkcmVuKCcuJyArIHRoaXMuX2lubGluZUNsYXNzKTsKCQkJaW5saW5lLmNoaWxkcmVuKCkucmVtb3ZlQ2xhc3MoJ3VpLXN0YXRlLWRpc2FibGVkJyk7CgkJCWlubGluZS5maW5kKCJzZWxlY3QudWktZGF0ZXBpY2tlci1tb250aCwgc2VsZWN0LnVpLWRhdGVwaWNrZXIteWVhciIpLgoJCQkJcHJvcCgiZGlzYWJsZWQiLCBmYWxzZSk7CgkJfQoJCXRoaXMuX2Rpc2FibGVkSW5wdXRzID0gJC5tYXAodGhpcy5fZGlzYWJsZWRJbnB1dHMsCgkJCWZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiAodmFsdWUgPT0gdGFyZ2V0ID8gbnVsbCA6IHZhbHVlKTsgfSk7IC8vIGRlbGV0ZSBlbnRyeQoJfSwKCgkvKiBEaXNhYmxlIHRoZSBkYXRlIHBpY2tlciB0byBhIGpRdWVyeSBzZWxlY3Rpb24uCgkgICBAcGFyYW0gIHRhcmdldCAgICBlbGVtZW50IC0gdGhlIHRhcmdldCBpbnB1dCBmaWVsZCBvciBkaXZpc2lvbiBvciBzcGFuICovCglfZGlzYWJsZURhdGVwaWNrZXI6IGZ1bmN0aW9uKHRhcmdldCkgewoJCXZhciAkdGFyZ2V0ID0gJCh0YXJnZXQpOwoJCXZhciBpbnN0ID0gJC5kYXRhKHRhcmdldCwgUFJPUF9OQU1FKTsKCQlpZiAoISR0YXJnZXQuaGFzQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpKSB7CgkJCXJldHVybjsKCQl9CgkJdmFyIG5vZGVOYW1lID0gdGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7CgkJaWYgKG5vZGVOYW1lID09ICdpbnB1dCcpIHsKCQkJdGFyZ2V0LmRpc2FibGVkID0gdHJ1ZTsKCQkJaW5zdC50cmlnZ2VyLmZpbHRlcignYnV0dG9uJykuCgkJCQllYWNoKGZ1bmN0aW9uKCkgeyB0aGlzLmRpc2FibGVkID0gdHJ1ZTsgfSkuZW5kKCkuCgkJCQlmaWx0ZXIoJ2ltZycpLmNzcyh7b3BhY2l0eTogJzAuNScsIGN1cnNvcjogJ2RlZmF1bHQnfSk7CgkJfQoJCWVsc2UgaWYgKG5vZGVOYW1lID09ICdkaXYnIHx8IG5vZGVOYW1lID09ICdzcGFuJykgewoJCQl2YXIgaW5saW5lID0gJHRhcmdldC5jaGlsZHJlbignLicgKyB0aGlzLl9pbmxpbmVDbGFzcyk7CgkJCWlubGluZS5jaGlsZHJlbigpLmFkZENsYXNzKCd1aS1zdGF0ZS1kaXNhYmxlZCcpOwoJCQlpbmxpbmUuZmluZCgic2VsZWN0LnVpLWRhdGVwaWNrZXItbW9udGgsIHNlbGVjdC51aS1kYXRlcGlja2VyLXllYXIiKS4KCQkJCXByb3AoImRpc2FibGVkIiwgdHJ1ZSk7CgkJfQoJCXRoaXMuX2Rpc2FibGVkSW5wdXRzID0gJC5tYXAodGhpcy5fZGlzYWJsZWRJbnB1dHMsCgkJCWZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiAodmFsdWUgPT0gdGFyZ2V0ID8gbnVsbCA6IHZhbHVlKTsgfSk7IC8vIGRlbGV0ZSBlbnRyeQoJCXRoaXMuX2Rpc2FibGVkSW5wdXRzW3RoaXMuX2Rpc2FibGVkSW5wdXRzLmxlbmd0aF0gPSB0YXJnZXQ7Cgl9LAoKCS8qIElzIHRoZSBmaXJzdCBmaWVsZCBpbiBhIGpRdWVyeSBjb2xsZWN0aW9uIGRpc2FibGVkIGFzIGEgZGF0ZXBpY2tlcj8KCSAgIEBwYXJhbSAgdGFyZ2V0ICAgIGVsZW1lbnQgLSB0aGUgdGFyZ2V0IGlucHV0IGZpZWxkIG9yIGRpdmlzaW9uIG9yIHNwYW4KCSAgIEByZXR1cm4gYm9vbGVhbiAtIHRydWUgaWYgZGlzYWJsZWQsIGZhbHNlIGlmIGVuYWJsZWQgKi8KCV9pc0Rpc2FibGVkRGF0ZXBpY2tlcjogZnVuY3Rpb24odGFyZ2V0KSB7CgkJaWYgKCF0YXJnZXQpIHsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCQlmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2Rpc2FibGVkSW5wdXRzLmxlbmd0aDsgaSsrKSB7CgkJCWlmICh0aGlzLl9kaXNhYmxlZElucHV0c1tpXSA9PSB0YXJnZXQpCgkJCQlyZXR1cm4gdHJ1ZTsKCQl9CgkJcmV0dXJuIGZhbHNlOwoJfSwKCgkvKiBSZXRyaWV2ZSB0aGUgaW5zdGFuY2UgZGF0YSBmb3IgdGhlIHRhcmdldCBjb250cm9sLgoJICAgQHBhcmFtICB0YXJnZXQgIGVsZW1lbnQgLSB0aGUgdGFyZ2V0IGlucHV0IGZpZWxkIG9yIGRpdmlzaW9uIG9yIHNwYW4KCSAgIEByZXR1cm4gIG9iamVjdCAtIHRoZSBhc3NvY2lhdGVkIGluc3RhbmNlIGRhdGEKCSAgIEB0aHJvd3MgIGVycm9yIGlmIGEgalF1ZXJ5IHByb2JsZW0gZ2V0dGluZyBkYXRhICovCglfZ2V0SW5zdDogZnVuY3Rpb24odGFyZ2V0KSB7CgkJdHJ5IHsKCQkJcmV0dXJuICQuZGF0YSh0YXJnZXQsIFBST1BfTkFNRSk7CgkJfQoJCWNhdGNoIChlcnIpIHsKCQkJdGhyb3cgJ01pc3NpbmcgaW5zdGFuY2UgZGF0YSBmb3IgdGhpcyBkYXRlcGlja2VyJzsKCQl9Cgl9LAoKCS8qIFVwZGF0ZSBvciByZXRyaWV2ZSB0aGUgc2V0dGluZ3MgZm9yIGEgZGF0ZSBwaWNrZXIgYXR0YWNoZWQgdG8gYW4gaW5wdXQgZmllbGQgb3IgZGl2aXNpb24uCgkgICBAcGFyYW0gIHRhcmdldCAgZWxlbWVudCAtIHRoZSB0YXJnZXQgaW5wdXQgZmllbGQgb3IgZGl2aXNpb24gb3Igc3BhbgoJICAgQHBhcmFtICBuYW1lICAgIG9iamVjdCAtIHRoZSBuZXcgc2V0dGluZ3MgdG8gdXBkYXRlIG9yCgkgICAgICAgICAgICAgICAgICAgc3RyaW5nIC0gdGhlIG5hbWUgb2YgdGhlIHNldHRpbmcgdG8gY2hhbmdlIG9yIHJldHJpZXZlLAoJICAgICAgICAgICAgICAgICAgIHdoZW4gcmV0cmlldmluZyBhbHNvICdhbGwnIGZvciBhbGwgaW5zdGFuY2Ugc2V0dGluZ3Mgb3IKCSAgICAgICAgICAgICAgICAgICAnZGVmYXVsdHMnIGZvciBhbGwgZ2xvYmFsIGRlZmF1bHRzCgkgICBAcGFyYW0gIHZhbHVlICAgYW55IC0gdGhlIG5ldyB2YWx1ZSBmb3IgdGhlIHNldHRpbmcKCSAgICAgICAgICAgICAgICAgICAob21pdCBpZiBhYm92ZSBpcyBhbiBvYmplY3Qgb3IgdG8gcmV0cmlldmUgYSB2YWx1ZSkgKi8KCV9vcHRpb25EYXRlcGlja2VyOiBmdW5jdGlvbih0YXJnZXQsIG5hbWUsIHZhbHVlKSB7CgkJdmFyIGluc3QgPSB0aGlzLl9nZXRJbnN0KHRhcmdldCk7CgkJaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMiAmJiB0eXBlb2YgbmFtZSA9PSAnc3RyaW5nJykgewoJCQlyZXR1cm4gKG5hbWUgPT0gJ2RlZmF1bHRzJyA/ICQuZXh0ZW5kKHt9LCAkLmRhdGVwaWNrZXIuX2RlZmF1bHRzKSA6CgkJCQkoaW5zdCA/IChuYW1lID09ICdhbGwnID8gJC5leHRlbmQoe30sIGluc3Quc2V0dGluZ3MpIDoKCQkJCXRoaXMuX2dldChpbnN0LCBuYW1lKSkgOiBudWxsKSk7CgkJfQoJCXZhciBzZXR0aW5ncyA9IG5hbWUgfHwge307CgkJaWYgKHR5cGVvZiBuYW1lID09ICdzdHJpbmcnKSB7CgkJCXNldHRpbmdzID0ge307CgkJCXNldHRpbmdzW25hbWVdID0gdmFsdWU7CgkJfQoJCWlmIChpbnN0KSB7CgkJCWlmICh0aGlzLl9jdXJJbnN0ID09IGluc3QpIHsKCQkJCXRoaXMuX2hpZGVEYXRlcGlja2VyKCk7CgkJCX0KCQkJdmFyIGRhdGUgPSB0aGlzLl9nZXREYXRlRGF0ZXBpY2tlcih0YXJnZXQsIHRydWUpOwoJCQl2YXIgbWluRGF0ZSA9IHRoaXMuX2dldE1pbk1heERhdGUoaW5zdCwgJ21pbicpOwoJCQl2YXIgbWF4RGF0ZSA9IHRoaXMuX2dldE1pbk1heERhdGUoaW5zdCwgJ21heCcpOwoJCQlleHRlbmRSZW1vdmUoaW5zdC5zZXR0aW5ncywgc2V0dGluZ3MpOwoJCQkvLyByZWZvcm1hdCB0aGUgb2xkIG1pbkRhdGUvbWF4RGF0ZSB2YWx1ZXMgaWYgZGF0ZUZvcm1hdCBjaGFuZ2VzIGFuZCBhIG5ldyBtaW5EYXRlL21heERhdGUgaXNuJ3QgcHJvdmlkZWQKCQkJaWYgKG1pbkRhdGUgIT09IG51bGwgJiYgc2V0dGluZ3NbJ2RhdGVGb3JtYXQnXSAhPT0gdW5kZWZpbmVkICYmIHNldHRpbmdzWydtaW5EYXRlJ10gPT09IHVuZGVmaW5lZCkKCQkJCWluc3Quc2V0dGluZ3MubWluRGF0ZSA9IHRoaXMuX2Zvcm1hdERhdGUoaW5zdCwgbWluRGF0ZSk7CgkJCWlmIChtYXhEYXRlICE9PSBudWxsICYmIHNldHRpbmdzWydkYXRlRm9ybWF0J10gIT09IHVuZGVmaW5lZCAmJiBzZXR0aW5nc1snbWF4RGF0ZSddID09PSB1bmRlZmluZWQpCgkJCQlpbnN0LnNldHRpbmdzLm1heERhdGUgPSB0aGlzLl9mb3JtYXREYXRlKGluc3QsIG1heERhdGUpOwoJCQl0aGlzLl9hdHRhY2htZW50cygkKHRhcmdldCksIGluc3QpOwoJCQl0aGlzLl9hdXRvU2l6ZShpbnN0KTsKCQkJdGhpcy5fc2V0RGF0ZShpbnN0LCBkYXRlKTsKCQkJdGhpcy5fdXBkYXRlQWx0ZXJuYXRlKGluc3QpOwoJCQl0aGlzLl91cGRhdGVEYXRlcGlja2VyKGluc3QpOwoJCX0KCX0sCgoJLy8gY2hhbmdlIG1ldGhvZCBkZXByZWNhdGVkCglfY2hhbmdlRGF0ZXBpY2tlcjogZnVuY3Rpb24odGFyZ2V0LCBuYW1lLCB2YWx1ZSkgewoJCXRoaXMuX29wdGlvbkRhdGVwaWNrZXIodGFyZ2V0LCBuYW1lLCB2YWx1ZSk7Cgl9LAoKCS8qIFJlZHJhdyB0aGUgZGF0ZSBwaWNrZXIgYXR0YWNoZWQgdG8gYW4gaW5wdXQgZmllbGQgb3IgZGl2aXNpb24uCgkgICBAcGFyYW0gIHRhcmdldCAgZWxlbWVudCAtIHRoZSB0YXJnZXQgaW5wdXQgZmllbGQgb3IgZGl2aXNpb24gb3Igc3BhbiAqLwoJX3JlZnJlc2hEYXRlcGlja2VyOiBmdW5jdGlvbih0YXJnZXQpIHsKCQl2YXIgaW5zdCA9IHRoaXMuX2dldEluc3QodGFyZ2V0KTsKCQlpZiAoaW5zdCkgewoJCQl0aGlzLl91cGRhdGVEYXRlcGlja2VyKGluc3QpOwoJCX0KCX0sCgoJLyogU2V0IHRoZSBkYXRlcyBmb3IgYSBqUXVlcnkgc2VsZWN0aW9uLgoJICAgQHBhcmFtICB0YXJnZXQgICBlbGVtZW50IC0gdGhlIHRhcmdldCBpbnB1dCBmaWVsZCBvciBkaXZpc2lvbiBvciBzcGFuCgkgICBAcGFyYW0gIGRhdGUgICAgIERhdGUgLSB0aGUgbmV3IGRhdGUgKi8KCV9zZXREYXRlRGF0ZXBpY2tlcjogZnVuY3Rpb24odGFyZ2V0LCBkYXRlKSB7CgkJdmFyIGluc3QgPSB0aGlzLl9nZXRJbnN0KHRhcmdldCk7CgkJaWYgKGluc3QpIHsKCQkJdGhpcy5fc2V0RGF0ZShpbnN0LCBkYXRlKTsKCQkJdGhpcy5fdXBkYXRlRGF0ZXBpY2tlcihpbnN0KTsKCQkJdGhpcy5fdXBkYXRlQWx0ZXJuYXRlKGluc3QpOwoJCX0KCX0sCgoJLyogR2V0IHRoZSBkYXRlKHMpIGZvciB0aGUgZmlyc3QgZW50cnkgaW4gYSBqUXVlcnkgc2VsZWN0aW9uLgoJICAgQHBhcmFtICB0YXJnZXQgICAgIGVsZW1lbnQgLSB0aGUgdGFyZ2V0IGlucHV0IGZpZWxkIG9yIGRpdmlzaW9uIG9yIHNwYW4KCSAgIEBwYXJhbSAgbm9EZWZhdWx0ICBib29sZWFuIC0gdHJ1ZSBpZiBubyBkZWZhdWx0IGRhdGUgaXMgdG8gYmUgdXNlZAoJICAgQHJldHVybiBEYXRlIC0gdGhlIGN1cnJlbnQgZGF0ZSAqLwoJX2dldERhdGVEYXRlcGlja2VyOiBmdW5jdGlvbih0YXJnZXQsIG5vRGVmYXVsdCkgewoJCXZhciBpbnN0ID0gdGhpcy5fZ2V0SW5zdCh0YXJnZXQpOwoJCWlmIChpbnN0ICYmICFpbnN0LmlubGluZSkKCQkJdGhpcy5fc2V0RGF0ZUZyb21GaWVsZChpbnN0LCBub0RlZmF1bHQpOwoJCXJldHVybiAoaW5zdCA/IHRoaXMuX2dldERhdGUoaW5zdCkgOiBudWxsKTsKCX0sCgoJLyogSGFuZGxlIGtleXN0cm9rZXMuICovCglfZG9LZXlEb3duOiBmdW5jdGlvbihldmVudCkgewoJCXZhciBpbnN0ID0gJC5kYXRlcGlja2VyLl9nZXRJbnN0KGV2ZW50LnRhcmdldCk7CgkJdmFyIGhhbmRsZWQgPSB0cnVlOwoJCXZhciBpc1JUTCA9IGluc3QuZHBEaXYuaXMoJy51aS1kYXRlcGlja2VyLXJ0bCcpOwoJCWluc3QuX2tleUV2ZW50ID0gdHJ1ZTsKCQlpZiAoJC5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZykKCQkJc3dpdGNoIChldmVudC5rZXlDb2RlKSB7CgkJCQljYXNlIDk6ICQuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIoKTsKCQkJCQkJaGFuZGxlZCA9IGZhbHNlOwoJCQkJCQlicmVhazsgLy8gaGlkZSBvbiB0YWIgb3V0CgkJCQljYXNlIDEzOiB2YXIgc2VsID0gJCgndGQuJyArICQuZGF0ZXBpY2tlci5fZGF5T3ZlckNsYXNzICsgJzpub3QoLicgKwoJCQkJCQkJCQkkLmRhdGVwaWNrZXIuX2N1cnJlbnRDbGFzcyArICcpJywgaW5zdC5kcERpdik7CgkJCQkJCWlmIChzZWxbMF0pCgkJCQkJCQkkLmRhdGVwaWNrZXIuX3NlbGVjdERheShldmVudC50YXJnZXQsIGluc3Quc2VsZWN0ZWRNb250aCwgaW5zdC5zZWxlY3RlZFllYXIsIHNlbFswXSk7CgkJCQkJCQl2YXIgb25TZWxlY3QgPSAkLmRhdGVwaWNrZXIuX2dldChpbnN0LCAnb25TZWxlY3QnKTsKCQkJCQkJCWlmIChvblNlbGVjdCkgewoJCQkJCQkJCXZhciBkYXRlU3RyID0gJC5kYXRlcGlja2VyLl9mb3JtYXREYXRlKGluc3QpOwoKCQkJCQkJCQkvLyB0cmlnZ2VyIGN1c3RvbSBjYWxsYmFjawoJCQkJCQkJCW9uU2VsZWN0LmFwcGx5KChpbnN0LmlucHV0ID8gaW5zdC5pbnB1dFswXSA6IG51bGwpLCBbZGF0ZVN0ciwgaW5zdF0pOwoJCQkJCQkJfQoJCQkJCQllbHNlCgkJCQkJCQkkLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCk7CgkJCQkJCXJldHVybiBmYWxzZTsgLy8gZG9uJ3Qgc3VibWl0IHRoZSBmb3JtCgkJCQkJCWJyZWFrOyAvLyBzZWxlY3QgdGhlIHZhbHVlIG9uIGVudGVyCgkJCQljYXNlIDI3OiAkLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCk7CgkJCQkJCWJyZWFrOyAvLyBoaWRlIG9uIGVzY2FwZQoJCQkJY2FzZSAzMzogJC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGV2ZW50LnRhcmdldCwgKGV2ZW50LmN0cmxLZXkgPwoJCQkJCQkJLSQuZGF0ZXBpY2tlci5fZ2V0KGluc3QsICdzdGVwQmlnTW9udGhzJykgOgoJCQkJCQkJLSQuZGF0ZXBpY2tlci5fZ2V0KGluc3QsICdzdGVwTW9udGhzJykpLCAnTScpOwoJCQkJCQlicmVhazsgLy8gcHJldmlvdXMgbW9udGgveWVhciBvbiBwYWdlIHVwLysgY3RybAoJCQkJY2FzZSAzNDogJC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGV2ZW50LnRhcmdldCwgKGV2ZW50LmN0cmxLZXkgPwoJCQkJCQkJKyQuZGF0ZXBpY2tlci5fZ2V0KGluc3QsICdzdGVwQmlnTW9udGhzJykgOgoJCQkJCQkJKyQuZGF0ZXBpY2tlci5fZ2V0KGluc3QsICdzdGVwTW9udGhzJykpLCAnTScpOwoJCQkJCQlicmVhazsgLy8gbmV4dCBtb250aC95ZWFyIG9uIHBhZ2UgZG93bi8rIGN0cmwKCQkJCWNhc2UgMzU6IGlmIChldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXkpICQuZGF0ZXBpY2tlci5fY2xlYXJEYXRlKGV2ZW50LnRhcmdldCk7CgkJCQkJCWhhbmRsZWQgPSBldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXk7CgkJCQkJCWJyZWFrOyAvLyBjbGVhciBvbiBjdHJsIG9yIGNvbW1hbmQgK2VuZAoJCQkJY2FzZSAzNjogaWYgKGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleSkgJC5kYXRlcGlja2VyLl9nb3RvVG9kYXkoZXZlbnQudGFyZ2V0KTsKCQkJCQkJaGFuZGxlZCA9IGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleTsKCQkJCQkJYnJlYWs7IC8vIGN1cnJlbnQgb24gY3RybCBvciBjb21tYW5kICtob21lCgkJCQljYXNlIDM3OiBpZiAoZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5KSAkLmRhdGVwaWNrZXIuX2FkanVzdERhdGUoZXZlbnQudGFyZ2V0LCAoaXNSVEwgPyArMSA6IC0xKSwgJ0QnKTsKCQkJCQkJaGFuZGxlZCA9IGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleTsKCQkJCQkJLy8gLTEgZGF5IG9uIGN0cmwgb3IgY29tbWFuZCArbGVmdAoJCQkJCQlpZiAoZXZlbnQub3JpZ2luYWxFdmVudC5hbHRLZXkpICQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShldmVudC50YXJnZXQsIChldmVudC5jdHJsS2V5ID8KCQkJCQkJCQkJLSQuZGF0ZXBpY2tlci5fZ2V0KGluc3QsICdzdGVwQmlnTW9udGhzJykgOgoJCQkJCQkJCQktJC5kYXRlcGlja2VyLl9nZXQoaW5zdCwgJ3N0ZXBNb250aHMnKSksICdNJyk7CgkJCQkJCS8vIG5leHQgbW9udGgveWVhciBvbiBhbHQgK2xlZnQgb24gTWFjCgkJCQkJCWJyZWFrOwoJCQkJY2FzZSAzODogaWYgKGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleSkgJC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGV2ZW50LnRhcmdldCwgLTcsICdEJyk7CgkJCQkJCWhhbmRsZWQgPSBldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXk7CgkJCQkJCWJyZWFrOyAvLyAtMSB3ZWVrIG9uIGN0cmwgb3IgY29tbWFuZCArdXAKCQkJCWNhc2UgMzk6IGlmIChldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXkpICQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShldmVudC50YXJnZXQsIChpc1JUTCA/IC0xIDogKzEpLCAnRCcpOwoJCQkJCQloYW5kbGVkID0gZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5OwoJCQkJCQkvLyArMSBkYXkgb24gY3RybCBvciBjb21tYW5kICtyaWdodAoJCQkJCQlpZiAoZXZlbnQub3JpZ2luYWxFdmVudC5hbHRLZXkpICQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShldmVudC50YXJnZXQsIChldmVudC5jdHJsS2V5ID8KCQkJCQkJCQkJKyQuZGF0ZXBpY2tlci5fZ2V0KGluc3QsICdzdGVwQmlnTW9udGhzJykgOgoJCQkJCQkJCQkrJC5kYXRlcGlja2VyLl9nZXQoaW5zdCwgJ3N0ZXBNb250aHMnKSksICdNJyk7CgkJCQkJCS8vIG5leHQgbW9udGgveWVhciBvbiBhbHQgK3JpZ2h0CgkJCQkJCWJyZWFrOwoJCQkJY2FzZSA0MDogaWYgKGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleSkgJC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGV2ZW50LnRhcmdldCwgKzcsICdEJyk7CgkJCQkJCWhhbmRsZWQgPSBldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXk7CgkJCQkJCWJyZWFrOyAvLyArMSB3ZWVrIG9uIGN0cmwgb3IgY29tbWFuZCArZG93bgoJCQkJZGVmYXVsdDogaGFuZGxlZCA9IGZhbHNlOwoJCQl9CgkJZWxzZSBpZiAoZXZlbnQua2V5Q29kZSA9PSAzNiAmJiBldmVudC5jdHJsS2V5KSAvLyBkaXNwbGF5IHRoZSBkYXRlIHBpY2tlciBvbiBjdHJsK2hvbWUKCQkJJC5kYXRlcGlja2VyLl9zaG93RGF0ZXBpY2tlcih0aGlzKTsKCQllbHNlIHsKCQkJaGFuZGxlZCA9IGZhbHNlOwoJCX0KCQlpZiAoaGFuZGxlZCkgewoJCQlldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoJCQlldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKCQl9Cgl9LAoKCS8qIEZpbHRlciBlbnRlcmVkIGNoYXJhY3RlcnMgLSBiYXNlZCBvbiBkYXRlIGZvcm1hdC4gKi8KCV9kb0tleVByZXNzOiBmdW5jdGlvbihldmVudCkgewoJCXZhciBpbnN0ID0gJC5kYXRlcGlja2VyLl9nZXRJbnN0KGV2ZW50LnRhcmdldCk7CgkJaWYgKCQuZGF0ZXBpY2tlci5fZ2V0KGluc3QsICdjb25zdHJhaW5JbnB1dCcpKSB7CgkJCXZhciBjaGFycyA9ICQuZGF0ZXBpY2tlci5fcG9zc2libGVDaGFycygkLmRhdGVwaWNrZXIuX2dldChpbnN0LCAnZGF0ZUZvcm1hdCcpKTsKCQkJdmFyIGNociA9IFN0cmluZy5mcm9tQ2hhckNvZGUoZXZlbnQuY2hhckNvZGUgPT0gdW5kZWZpbmVkID8gZXZlbnQua2V5Q29kZSA6IGV2ZW50LmNoYXJDb2RlKTsKCQkJcmV0dXJuIGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleSB8fCAoY2hyIDwgJyAnIHx8ICFjaGFycyB8fCBjaGFycy5pbmRleE9mKGNocikgPiAtMSk7CgkJfQoJfSwKCgkvKiBTeW5jaHJvbmlzZSBtYW51YWwgZW50cnkgYW5kIGZpZWxkL2FsdGVybmF0ZSBmaWVsZC4gKi8KCV9kb0tleVVwOiBmdW5jdGlvbihldmVudCkgewoJCXZhciBpbnN0ID0gJC5kYXRlcGlja2VyLl9nZXRJbnN0KGV2ZW50LnRhcmdldCk7CgkJaWYgKGluc3QuaW5wdXQudmFsKCkgIT0gaW5zdC5sYXN0VmFsKSB7CgkJCXRyeSB7CgkJCQl2YXIgZGF0ZSA9ICQuZGF0ZXBpY2tlci5wYXJzZURhdGUoJC5kYXRlcGlja2VyLl9nZXQoaW5zdCwgJ2RhdGVGb3JtYXQnKSwKCQkJCQkoaW5zdC5pbnB1dCA/IGluc3QuaW5wdXQudmFsKCkgOiBudWxsKSwKCQkJCQkkLmRhdGVwaWNrZXIuX2dldEZvcm1hdENvbmZpZyhpbnN0KSk7CgkJCQlpZiAoZGF0ZSkgeyAvLyBvbmx5IGlmIHZhbGlkCgkJCQkJJC5kYXRlcGlja2VyLl9zZXREYXRlRnJvbUZpZWxkKGluc3QpOwoJCQkJCSQuZGF0ZXBpY2tlci5fdXBkYXRlQWx0ZXJuYXRlKGluc3QpOwoJCQkJCSQuZGF0ZXBpY2tlci5fdXBkYXRlRGF0ZXBpY2tlcihpbnN0KTsKCQkJCX0KCQkJfQoJCQljYXRjaCAoZXJyKSB7CgkJCQkkLmRhdGVwaWNrZXIubG9nKGVycik7CgkJCX0KCQl9CgkJcmV0dXJuIHRydWU7Cgl9LAoKCS8qIFBvcC11cCB0aGUgZGF0ZSBwaWNrZXIgZm9yIGEgZ2l2ZW4gaW5wdXQgZmllbGQuCgkgICBJZiBmYWxzZSByZXR1cm5lZCBmcm9tIGJlZm9yZVNob3cgZXZlbnQgaGFuZGxlciBkbyBub3Qgc2hvdy4KCSAgIEBwYXJhbSAgaW5wdXQgIGVsZW1lbnQgLSB0aGUgaW5wdXQgZmllbGQgYXR0YWNoZWQgdG8gdGhlIGRhdGUgcGlja2VyIG9yCgkgICAgICAgICAgICAgICAgICBldmVudCAtIGlmIHRyaWdnZXJlZCBieSBmb2N1cyAqLwoJX3Nob3dEYXRlcGlja2VyOiBmdW5jdGlvbihpbnB1dCkgewoJCWlucHV0ID0gaW5wdXQudGFyZ2V0IHx8IGlucHV0OwoJCWlmIChpbnB1dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICE9ICdpbnB1dCcpIC8vIGZpbmQgZnJvbSBidXR0b24vaW1hZ2UgdHJpZ2dlcgoJCQlpbnB1dCA9ICQoJ2lucHV0JywgaW5wdXQucGFyZW50Tm9kZSlbMF07CgkJaWYgKCQuZGF0ZXBpY2tlci5faXNEaXNhYmxlZERhdGVwaWNrZXIoaW5wdXQpIHx8ICQuZGF0ZXBpY2tlci5fbGFzdElucHV0ID09IGlucHV0KSAvLyBhbHJlYWR5IGhlcmUKCQkJcmV0dXJuOwoJCXZhciBpbnN0ID0gJC5kYXRlcGlja2VyLl9nZXRJbnN0KGlucHV0KTsKCQlpZiAoJC5kYXRlcGlja2VyLl9jdXJJbnN0ICYmICQuZGF0ZXBpY2tlci5fY3VySW5zdCAhPSBpbnN0KSB7CgkJCSQuZGF0ZXBpY2tlci5fY3VySW5zdC5kcERpdi5zdG9wKHRydWUsIHRydWUpOwoJCQlpZiAoIGluc3QgJiYgJC5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZyApIHsKCQkJCSQuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIoICQuZGF0ZXBpY2tlci5fY3VySW5zdC5pbnB1dFswXSApOwoJCQl9CgkJfQoJCXZhciBiZWZvcmVTaG93ID0gJC5kYXRlcGlja2VyLl9nZXQoaW5zdCwgJ2JlZm9yZVNob3cnKTsKCQl2YXIgYmVmb3JlU2hvd1NldHRpbmdzID0gYmVmb3JlU2hvdyA/IGJlZm9yZVNob3cuYXBwbHkoaW5wdXQsIFtpbnB1dCwgaW5zdF0pIDoge307CgkJaWYoYmVmb3JlU2hvd1NldHRpbmdzID09PSBmYWxzZSl7CgkJCS8vZmFsc2UKCQkJcmV0dXJuOwoJCX0KCQlleHRlbmRSZW1vdmUoaW5zdC5zZXR0aW5ncywgYmVmb3JlU2hvd1NldHRpbmdzKTsKCQlpbnN0Lmxhc3RWYWwgPSBudWxsOwoJCSQuZGF0ZXBpY2tlci5fbGFzdElucHV0ID0gaW5wdXQ7CgkJJC5kYXRlcGlja2VyLl9zZXREYXRlRnJvbUZpZWxkKGluc3QpOwoJCWlmICgkLmRhdGVwaWNrZXIuX2luRGlhbG9nKSAvLyBoaWRlIGN1cnNvcgoJCQlpbnB1dC52YWx1ZSA9ICcnOwoJCWlmICghJC5kYXRlcGlja2VyLl9wb3MpIHsgLy8gcG9zaXRpb24gYmVsb3cgaW5wdXQKCQkJJC5kYXRlcGlja2VyLl9wb3MgPSAkLmRhdGVwaWNrZXIuX2ZpbmRQb3MoaW5wdXQpOwoJCQkkLmRhdGVwaWNrZXIuX3Bvc1sxXSArPSBpbnB1dC5vZmZzZXRIZWlnaHQ7IC8vIGFkZCB0aGUgaGVpZ2h0CgkJfQoJCXZhciBpc0ZpeGVkID0gZmFsc2U7CgkJJChpbnB1dCkucGFyZW50cygpLmVhY2goZnVuY3Rpb24oKSB7CgkJCWlzRml4ZWQgfD0gJCh0aGlzKS5jc3MoJ3Bvc2l0aW9uJykgPT0gJ2ZpeGVkJzsKCQkJcmV0dXJuICFpc0ZpeGVkOwoJCX0pOwoJCXZhciBvZmZzZXQgPSB7bGVmdDogJC5kYXRlcGlja2VyLl9wb3NbMF0sIHRvcDogJC5kYXRlcGlja2VyLl9wb3NbMV19OwoJCSQuZGF0ZXBpY2tlci5fcG9zID0gbnVsbDsKCQkvL3RvIGF2b2lkIGZsYXNoZXMgb24gRmlyZWZveAoJCWluc3QuZHBEaXYuZW1wdHkoKTsKCQkvLyBkZXRlcm1pbmUgc2l6aW5nIG9mZnNjcmVlbgoJCWluc3QuZHBEaXYuY3NzKHtwb3NpdGlvbjogJ2Fic29sdXRlJywgZGlzcGxheTogJ2Jsb2NrJywgdG9wOiAnLTEwMDBweCd9KTsKCQkkLmRhdGVwaWNrZXIuX3VwZGF0ZURhdGVwaWNrZXIoaW5zdCk7CgkJLy8gZml4IHdpZHRoIGZvciBkeW5hbWljIG51bWJlciBvZiBkYXRlIHBpY2tlcnMKCQkvLyBhbmQgYWRqdXN0IHBvc2l0aW9uIGJlZm9yZSBzaG93aW5nCgkJb2Zmc2V0ID0gJC5kYXRlcGlja2VyLl9jaGVja09mZnNldChpbnN0LCBvZmZzZXQsIGlzRml4ZWQpOwoJCWluc3QuZHBEaXYuY3NzKHtwb3NpdGlvbjogKCQuZGF0ZXBpY2tlci5faW5EaWFsb2cgJiYgJC5ibG9ja1VJID8KCQkJJ3N0YXRpYycgOiAoaXNGaXhlZCA/ICdmaXhlZCcgOiAnYWJzb2x1dGUnKSksIGRpc3BsYXk6ICdub25lJywKCQkJbGVmdDogb2Zmc2V0LmxlZnQgKyAncHgnLCB0b3A6IG9mZnNldC50b3AgKyAncHgnfSk7CgkJaWYgKCFpbnN0LmlubGluZSkgewoJCQl2YXIgc2hvd0FuaW0gPSAkLmRhdGVwaWNrZXIuX2dldChpbnN0LCAnc2hvd0FuaW0nKTsKCQkJdmFyIGR1cmF0aW9uID0gJC5kYXRlcGlja2VyLl9nZXQoaW5zdCwgJ2R1cmF0aW9uJyk7CgkJCXZhciBwb3N0UHJvY2VzcyA9IGZ1bmN0aW9uKCkgewoJCQkJdmFyIGNvdmVyID0gaW5zdC5kcERpdi5maW5kKCdpZnJhbWUudWktZGF0ZXBpY2tlci1jb3ZlcicpOyAvLyBJRTYtIG9ubHkKCQkJCWlmKCAhISBjb3Zlci5sZW5ndGggKXsKCQkJCQl2YXIgYm9yZGVycyA9ICQuZGF0ZXBpY2tlci5fZ2V0Qm9yZGVycyhpbnN0LmRwRGl2KTsKCQkJCQljb3Zlci5jc3Moe2xlZnQ6IC1ib3JkZXJzWzBdLCB0b3A6IC1ib3JkZXJzWzFdLAoJCQkJCQl3aWR0aDogaW5zdC5kcERpdi5vdXRlcldpZHRoKCksIGhlaWdodDogaW5zdC5kcERpdi5vdXRlckhlaWdodCgpfSk7CgkJCQl9CgkJCX07CgkJCWluc3QuZHBEaXYuekluZGV4KCQoaW5wdXQpLnpJbmRleCgpKzEpOwoJCQkkLmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nID0gdHJ1ZTsKCgkJCS8vIERFUFJFQ0FURUQ6IGFmdGVyIEJDIGZvciAxLjgueCAkLmVmZmVjdHNbIHNob3dBbmltIF0gaXMgbm90IG5lZWRlZAoJCQlpZiAoICQuZWZmZWN0cyAmJiAoICQuZWZmZWN0cy5lZmZlY3RbIHNob3dBbmltIF0gfHwgJC5lZmZlY3RzWyBzaG93QW5pbSBdICkgKQoJCQkJaW5zdC5kcERpdi5zaG93KHNob3dBbmltLCAkLmRhdGVwaWNrZXIuX2dldChpbnN0LCAnc2hvd09wdGlvbnMnKSwgZHVyYXRpb24sIHBvc3RQcm9jZXNzKTsKCQkJZWxzZQoJCQkJaW5zdC5kcERpdltzaG93QW5pbSB8fCAnc2hvdyddKChzaG93QW5pbSA/IGR1cmF0aW9uIDogbnVsbCksIHBvc3RQcm9jZXNzKTsKCQkJaWYgKCFzaG93QW5pbSB8fCAhZHVyYXRpb24pCgkJCQlwb3N0UHJvY2VzcygpOwoJCQlpZiAoaW5zdC5pbnB1dC5pcygnOnZpc2libGUnKSAmJiAhaW5zdC5pbnB1dC5pcygnOmRpc2FibGVkJykpCgkJCQlpbnN0LmlucHV0LmZvY3VzKCk7CgkJCSQuZGF0ZXBpY2tlci5fY3VySW5zdCA9IGluc3Q7CgkJfQoJfSwKCgkvKiBHZW5lcmF0ZSB0aGUgZGF0ZSBwaWNrZXIgY29udGVudC4gKi8KCV91cGRhdGVEYXRlcGlja2VyOiBmdW5jdGlvbihpbnN0KSB7CgkJdGhpcy5tYXhSb3dzID0gNDsgLy9SZXNldCB0aGUgbWF4IG51bWJlciBvZiByb3dzIGJlaW5nIGRpc3BsYXllZCAoc2VlICM3MDQzKQoJCXZhciBib3JkZXJzID0gJC5kYXRlcGlja2VyLl9nZXRCb3JkZXJzKGluc3QuZHBEaXYpOwoJCWluc3RBY3RpdmUgPSBpbnN0OyAvLyBmb3IgZGVsZWdhdGUgaG92ZXIgZXZlbnRzCgkJaW5zdC5kcERpdi5lbXB0eSgpLmFwcGVuZCh0aGlzLl9nZW5lcmF0ZUhUTUwoaW5zdCkpOwoJCXRoaXMuX2F0dGFjaEhhbmRsZXJzKGluc3QpOwoJCXZhciBjb3ZlciA9IGluc3QuZHBEaXYuZmluZCgnaWZyYW1lLnVpLWRhdGVwaWNrZXItY292ZXInKTsgLy8gSUU2LSBvbmx5CgkJaWYoICEhY292ZXIubGVuZ3RoICl7IC8vYXZvaWQgY2FsbCB0byBvdXRlclhYWFgoKSB3aGVuIG5vdCBpbiBJRTYKCQkJY292ZXIuY3NzKHtsZWZ0OiAtYm9yZGVyc1swXSwgdG9wOiAtYm9yZGVyc1sxXSwgd2lkdGg6IGluc3QuZHBEaXYub3V0ZXJXaWR0aCgpLCBoZWlnaHQ6IGluc3QuZHBEaXYub3V0ZXJIZWlnaHQoKX0pCgkJfQoJCWluc3QuZHBEaXYuZmluZCgnLicgKyB0aGlzLl9kYXlPdmVyQ2xhc3MgKyAnIGEnKS5tb3VzZW92ZXIoKTsKCQl2YXIgbnVtTW9udGhzID0gdGhpcy5fZ2V0TnVtYmVyT2ZNb250aHMoaW5zdCk7CgkJdmFyIGNvbHMgPSBudW1Nb250aHNbMV07CgkJdmFyIHdpZHRoID0gMTc7CgkJaW5zdC5kcERpdi5yZW1vdmVDbGFzcygndWktZGF0ZXBpY2tlci1tdWx0aS0yIHVpLWRhdGVwaWNrZXItbXVsdGktMyB1aS1kYXRlcGlja2VyLW11bHRpLTQnKS53aWR0aCgnJyk7CgkJaWYgKGNvbHMgPiAxKQoJCQlpbnN0LmRwRGl2LmFkZENsYXNzKCd1aS1kYXRlcGlja2VyLW11bHRpLScgKyBjb2xzKS5jc3MoJ3dpZHRoJywgKHdpZHRoICogY29scykgKyAnZW0nKTsKCQlpbnN0LmRwRGl2WyhudW1Nb250aHNbMF0gIT0gMSB8fCBudW1Nb250aHNbMV0gIT0gMSA/ICdhZGQnIDogJ3JlbW92ZScpICsKCQkJJ0NsYXNzJ10oJ3VpLWRhdGVwaWNrZXItbXVsdGknKTsKCQlpbnN0LmRwRGl2Wyh0aGlzLl9nZXQoaW5zdCwgJ2lzUlRMJykgPyAnYWRkJyA6ICdyZW1vdmUnKSArCgkJCSdDbGFzcyddKCd1aS1kYXRlcGlja2VyLXJ0bCcpOwoJCWlmIChpbnN0ID09ICQuZGF0ZXBpY2tlci5fY3VySW5zdCAmJiAkLmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nICYmIGluc3QuaW5wdXQgJiYKCQkJCS8vICM2Njk0IC0gZG9uJ3QgZm9jdXMgdGhlIGlucHV0IGlmIGl0J3MgYWxyZWFkeSBmb2N1c2VkCgkJCQkvLyB0aGlzIGJyZWFrcyB0aGUgY2hhbmdlIGV2ZW50IGluIElFCgkJCQlpbnN0LmlucHV0LmlzKCc6dmlzaWJsZScpICYmICFpbnN0LmlucHV0LmlzKCc6ZGlzYWJsZWQnKSAmJiBpbnN0LmlucHV0WzBdICE9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpCgkJCWluc3QuaW5wdXQuZm9jdXMoKTsKCQkvLyBkZWZmZXJlZCByZW5kZXIgb2YgdGhlIHllYXJzIHNlbGVjdCAodG8gYXZvaWQgZmxhc2hlcyBvbiBGaXJlZm94KQoJCWlmKCBpbnN0LnllYXJzaHRtbCApewoJCQl2YXIgb3JpZ3llYXJzaHRtbCA9IGluc3QueWVhcnNodG1sOwoJCQlzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7CgkJCQkvL2Fzc3VyZSB0aGF0IGluc3QueWVhcnNodG1sIGRpZG4ndCBjaGFuZ2UuCgkJCQlpZiggb3JpZ3llYXJzaHRtbCA9PT0gaW5zdC55ZWFyc2h0bWwgJiYgaW5zdC55ZWFyc2h0bWwgKXsKCQkJCQlpbnN0LmRwRGl2LmZpbmQoJ3NlbGVjdC51aS1kYXRlcGlja2VyLXllYXI6Zmlyc3QnKS5yZXBsYWNlV2l0aChpbnN0LnllYXJzaHRtbCk7CgkJCQl9CgkJCQlvcmlneWVhcnNodG1sID0gaW5zdC55ZWFyc2h0bWwgPSBudWxsOwoJCQl9LCAwKTsKCQl9Cgl9LAoKCS8qIFJldHJpZXZlIHRoZSBzaXplIG9mIGxlZnQgYW5kIHRvcCBib3JkZXJzIGZvciBhbiBlbGVtZW50LgoJICAgQHBhcmFtICBlbGVtICAoalF1ZXJ5IG9iamVjdCkgdGhlIGVsZW1lbnQgb2YgaW50ZXJlc3QKCSAgIEByZXR1cm4gIChudW1iZXJbMl0pIHRoZSBsZWZ0IGFuZCB0b3AgYm9yZGVycyAqLwoJX2dldEJvcmRlcnM6IGZ1bmN0aW9uKGVsZW0pIHsKCQl2YXIgY29udmVydCA9IGZ1bmN0aW9uKHZhbHVlKSB7CgkJCXJldHVybiB7dGhpbjogMSwgbWVkaXVtOiAyLCB0aGljazogM31bdmFsdWVdIHx8IHZhbHVlOwoJCX07CgkJcmV0dXJuIFtwYXJzZUZsb2F0KGNvbnZlcnQoZWxlbS5jc3MoJ2JvcmRlci1sZWZ0LXdpZHRoJykpKSwKCQkJcGFyc2VGbG9hdChjb252ZXJ0KGVsZW0uY3NzKCdib3JkZXItdG9wLXdpZHRoJykpKV07Cgl9LAoKCS8qIENoZWNrIHBvc2l0aW9uaW5nIHRvIHJlbWFpbiBvbiBzY3JlZW4uICovCglfY2hlY2tPZmZzZXQ6IGZ1bmN0aW9uKGluc3QsIG9mZnNldCwgaXNGaXhlZCkgewoJCXZhciBkcFdpZHRoID0gaW5zdC5kcERpdi5vdXRlcldpZHRoKCk7CgkJdmFyIGRwSGVpZ2h0ID0gaW5zdC5kcERpdi5vdXRlckhlaWdodCgpOwoJCXZhciBpbnB1dFdpZHRoID0gaW5zdC5pbnB1dCA/IGluc3QuaW5wdXQub3V0ZXJXaWR0aCgpIDogMDsKCQl2YXIgaW5wdXRIZWlnaHQgPSBpbnN0LmlucHV0ID8gaW5zdC5pbnB1dC5vdXRlckhlaWdodCgpIDogMDsKCQl2YXIgdmlld1dpZHRoID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoICsgKGlzRml4ZWQgPyAwIDogJChkb2N1bWVudCkuc2Nyb2xsTGVmdCgpKTsKCQl2YXIgdmlld0hlaWdodCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQgKyAoaXNGaXhlZCA/IDAgOiAkKGRvY3VtZW50KS5zY3JvbGxUb3AoKSk7CgoJCW9mZnNldC5sZWZ0IC09ICh0aGlzLl9nZXQoaW5zdCwgJ2lzUlRMJykgPyAoZHBXaWR0aCAtIGlucHV0V2lkdGgpIDogMCk7CgkJb2Zmc2V0LmxlZnQgLT0gKGlzRml4ZWQgJiYgb2Zmc2V0LmxlZnQgPT0gaW5zdC5pbnB1dC5vZmZzZXQoKS5sZWZ0KSA/ICQoZG9jdW1lbnQpLnNjcm9sbExlZnQoKSA6IDA7CgkJb2Zmc2V0LnRvcCAtPSAoaXNGaXhlZCAmJiBvZmZzZXQudG9wID09IChpbnN0LmlucHV0Lm9mZnNldCgpLnRvcCArIGlucHV0SGVpZ2h0KSkgPyAkKGRvY3VtZW50KS5zY3JvbGxUb3AoKSA6IDA7CgoJCS8vIG5vdyBjaGVjayBpZiBkYXRlcGlja2VyIGlzIHNob3dpbmcgb3V0c2lkZSB3aW5kb3cgdmlld3BvcnQgLSBtb3ZlIHRvIGEgYmV0dGVyIHBsYWNlIGlmIHNvLgoJCW9mZnNldC5sZWZ0IC09IE1hdGgubWluKG9mZnNldC5sZWZ0LCAob2Zmc2V0LmxlZnQgKyBkcFdpZHRoID4gdmlld1dpZHRoICYmIHZpZXdXaWR0aCA+IGRwV2lkdGgpID8KCQkJTWF0aC5hYnMob2Zmc2V0LmxlZnQgKyBkcFdpZHRoIC0gdmlld1dpZHRoKSA6IDApOwoJCW9mZnNldC50b3AgLT0gTWF0aC5taW4ob2Zmc2V0LnRvcCwgKG9mZnNldC50b3AgKyBkcEhlaWdodCA+IHZpZXdIZWlnaHQgJiYgdmlld0hlaWdodCA+IGRwSGVpZ2h0KSA/CgkJCU1hdGguYWJzKGRwSGVpZ2h0ICsgaW5wdXRIZWlnaHQpIDogMCk7CgoJCXJldHVybiBvZmZzZXQ7Cgl9LAoKCS8qIEZpbmQgYW4gb2JqZWN0J3MgcG9zaXRpb24gb24gdGhlIHNjcmVlbi4gKi8KCV9maW5kUG9zOiBmdW5jdGlvbihvYmopIHsKCQl2YXIgaW5zdCA9IHRoaXMuX2dldEluc3Qob2JqKTsKCQl2YXIgaXNSVEwgPSB0aGlzLl9nZXQoaW5zdCwgJ2lzUlRMJyk7CgkJd2hpbGUgKG9iaiAmJiAob2JqLnR5cGUgPT0gJ2hpZGRlbicgfHwgb2JqLm5vZGVUeXBlICE9IDEgfHwgJC5leHByLmZpbHRlcnMuaGlkZGVuKG9iaikpKSB7CgkJCW9iaiA9IG9ialtpc1JUTCA/ICdwcmV2aW91c1NpYmxpbmcnIDogJ25leHRTaWJsaW5nJ107CgkJfQoJCXZhciBwb3NpdGlvbiA9ICQob2JqKS5vZmZzZXQoKTsKCQlyZXR1cm4gW3Bvc2l0aW9uLmxlZnQsIHBvc2l0aW9uLnRvcF07Cgl9LAoKCS8qIEhpZGUgdGhlIGRhdGUgcGlja2VyIGZyb20gdmlldy4KCSAgIEBwYXJhbSAgaW5wdXQgIGVsZW1lbnQgLSB0aGUgaW5wdXQgZmllbGQgYXR0YWNoZWQgdG8gdGhlIGRhdGUgcGlja2VyICovCglfaGlkZURhdGVwaWNrZXI6IGZ1bmN0aW9uKGlucHV0KSB7CgkJdmFyIGluc3QgPSB0aGlzLl9jdXJJbnN0OwoJCWlmICghaW5zdCB8fCAoaW5wdXQgJiYgaW5zdCAhPSAkLmRhdGEoaW5wdXQsIFBST1BfTkFNRSkpKQoJCQlyZXR1cm47CgkJaWYgKHRoaXMuX2RhdGVwaWNrZXJTaG93aW5nKSB7CgkJCXZhciBzaG93QW5pbSA9IHRoaXMuX2dldChpbnN0LCAnc2hvd0FuaW0nKTsKCQkJdmFyIGR1cmF0aW9uID0gdGhpcy5fZ2V0KGluc3QsICdkdXJhdGlvbicpOwoJCQl2YXIgcG9zdFByb2Nlc3MgPSBmdW5jdGlvbigpIHsKCQkJCSQuZGF0ZXBpY2tlci5fdGlkeURpYWxvZyhpbnN0KTsKCQkJfTsKCgkJCS8vIERFUFJFQ0FURUQ6IGFmdGVyIEJDIGZvciAxLjgueCAkLmVmZmVjdHNbIHNob3dBbmltIF0gaXMgbm90IG5lZWRlZAoJCQlpZiAoICQuZWZmZWN0cyAmJiAoICQuZWZmZWN0cy5lZmZlY3RbIHNob3dBbmltIF0gfHwgJC5lZmZlY3RzWyBzaG93QW5pbSBdICkgKQoJCQkJaW5zdC5kcERpdi5oaWRlKHNob3dBbmltLCAkLmRhdGVwaWNrZXIuX2dldChpbnN0LCAnc2hvd09wdGlvbnMnKSwgZHVyYXRpb24sIHBvc3RQcm9jZXNzKTsKCQkJZWxzZQoJCQkJaW5zdC5kcERpdlsoc2hvd0FuaW0gPT0gJ3NsaWRlRG93bicgPyAnc2xpZGVVcCcgOgoJCQkJCShzaG93QW5pbSA9PSAnZmFkZUluJyA/ICdmYWRlT3V0JyA6ICdoaWRlJykpXSgoc2hvd0FuaW0gPyBkdXJhdGlvbiA6IG51bGwpLCBwb3N0UHJvY2Vzcyk7CgkJCWlmICghc2hvd0FuaW0pCgkJCQlwb3N0UHJvY2VzcygpOwoJCQl0aGlzLl9kYXRlcGlja2VyU2hvd2luZyA9IGZhbHNlOwoJCQl2YXIgb25DbG9zZSA9IHRoaXMuX2dldChpbnN0LCAnb25DbG9zZScpOwoJCQlpZiAob25DbG9zZSkKCQkJCW9uQ2xvc2UuYXBwbHkoKGluc3QuaW5wdXQgPyBpbnN0LmlucHV0WzBdIDogbnVsbCksCgkJCQkJWyhpbnN0LmlucHV0ID8gaW5zdC5pbnB1dC52YWwoKSA6ICcnKSwgaW5zdF0pOwoJCQl0aGlzLl9sYXN0SW5wdXQgPSBudWxsOwoJCQlpZiAodGhpcy5faW5EaWFsb2cpIHsKCQkJCXRoaXMuX2RpYWxvZ0lucHV0LmNzcyh7IHBvc2l0aW9uOiAnYWJzb2x1dGUnLCBsZWZ0OiAnMCcsIHRvcDogJy0xMDBweCcgfSk7CgkJCQlpZiAoJC5ibG9ja1VJKSB7CgkJCQkJJC51bmJsb2NrVUkoKTsKCQkJCQkkKCdib2R5JykuYXBwZW5kKHRoaXMuZHBEaXYpOwoJCQkJfQoJCQl9CgkJCXRoaXMuX2luRGlhbG9nID0gZmFsc2U7CgkJfQoJfSwKCgkvKiBUaWR5IHVwIGFmdGVyIGEgZGlhbG9nIGRpc3BsYXkuICovCglfdGlkeURpYWxvZzogZnVuY3Rpb24oaW5zdCkgewoJCWluc3QuZHBEaXYucmVtb3ZlQ2xhc3ModGhpcy5fZGlhbG9nQ2xhc3MpLnVuYmluZCgnLnVpLWRhdGVwaWNrZXItY2FsZW5kYXInKTsKCX0sCgoJLyogQ2xvc2UgZGF0ZSBwaWNrZXIgaWYgY2xpY2tlZCBlbHNld2hlcmUuICovCglfY2hlY2tFeHRlcm5hbENsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCWlmICghJC5kYXRlcGlja2VyLl9jdXJJbnN0KQoJCQlyZXR1cm47CgoJCXZhciAkdGFyZ2V0ID0gJChldmVudC50YXJnZXQpLAoJCQlpbnN0ID0gJC5kYXRlcGlja2VyLl9nZXRJbnN0KCR0YXJnZXRbMF0pOwoKCQlpZiAoICggKCAkdGFyZ2V0WzBdLmlkICE9ICQuZGF0ZXBpY2tlci5fbWFpbkRpdklkICYmCgkJCQkkdGFyZ2V0LnBhcmVudHMoJyMnICsgJC5kYXRlcGlja2VyLl9tYWluRGl2SWQpLmxlbmd0aCA9PSAwICYmCgkJCQkhJHRhcmdldC5oYXNDbGFzcygkLmRhdGVwaWNrZXIubWFya2VyQ2xhc3NOYW1lKSAmJgoJCQkJISR0YXJnZXQuY2xvc2VzdCgiLiIgKyAkLmRhdGVwaWNrZXIuX3RyaWdnZXJDbGFzcykubGVuZ3RoICYmCgkJCQkkLmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nICYmICEoJC5kYXRlcGlja2VyLl9pbkRpYWxvZyAmJiAkLmJsb2NrVUkpICkgKSB8fAoJCQkoICR0YXJnZXQuaGFzQ2xhc3MoJC5kYXRlcGlja2VyLm1hcmtlckNsYXNzTmFtZSkgJiYgJC5kYXRlcGlja2VyLl9jdXJJbnN0ICE9IGluc3QgKSApCgkJCSQuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIoKTsKCX0sCgoJLyogQWRqdXN0IG9uZSBvZiB0aGUgZGF0ZSBzdWItZmllbGRzLiAqLwoJX2FkanVzdERhdGU6IGZ1bmN0aW9uKGlkLCBvZmZzZXQsIHBlcmlvZCkgewoJCXZhciB0YXJnZXQgPSAkKGlkKTsKCQl2YXIgaW5zdCA9IHRoaXMuX2dldEluc3QodGFyZ2V0WzBdKTsKCQlpZiAodGhpcy5faXNEaXNhYmxlZERhdGVwaWNrZXIodGFyZ2V0WzBdKSkgewoJCQlyZXR1cm47CgkJfQoJCXRoaXMuX2FkanVzdEluc3REYXRlKGluc3QsIG9mZnNldCArCgkJCShwZXJpb2QgPT0gJ00nID8gdGhpcy5fZ2V0KGluc3QsICdzaG93Q3VycmVudEF0UG9zJykgOiAwKSwgLy8gdW5kbyBwb3NpdGlvbmluZwoJCQlwZXJpb2QpOwoJCXRoaXMuX3VwZGF0ZURhdGVwaWNrZXIoaW5zdCk7Cgl9LAoKCS8qIEFjdGlvbiBmb3IgY3VycmVudCBsaW5rLiAqLwoJX2dvdG9Ub2RheTogZnVuY3Rpb24oaWQpIHsKCQl2YXIgdGFyZ2V0ID0gJChpZCk7CgkJdmFyIGluc3QgPSB0aGlzLl9nZXRJbnN0KHRhcmdldFswXSk7CgkJaWYgKHRoaXMuX2dldChpbnN0LCAnZ290b0N1cnJlbnQnKSAmJiBpbnN0LmN1cnJlbnREYXkpIHsKCQkJaW5zdC5zZWxlY3RlZERheSA9IGluc3QuY3VycmVudERheTsKCQkJaW5zdC5kcmF3TW9udGggPSBpbnN0LnNlbGVjdGVkTW9udGggPSBpbnN0LmN1cnJlbnRNb250aDsKCQkJaW5zdC5kcmF3WWVhciA9IGluc3Quc2VsZWN0ZWRZZWFyID0gaW5zdC5jdXJyZW50WWVhcjsKCQl9CgkJZWxzZSB7CgkJCXZhciBkYXRlID0gbmV3IERhdGUoKTsKCQkJaW5zdC5zZWxlY3RlZERheSA9IGRhdGUuZ2V0RGF0ZSgpOwoJCQlpbnN0LmRyYXdNb250aCA9IGluc3Quc2VsZWN0ZWRNb250aCA9IGRhdGUuZ2V0TW9udGgoKTsKCQkJaW5zdC5kcmF3WWVhciA9IGluc3Quc2VsZWN0ZWRZZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpOwoJCX0KCQl0aGlzLl9ub3RpZnlDaGFuZ2UoaW5zdCk7CgkJdGhpcy5fYWRqdXN0RGF0ZSh0YXJnZXQpOwoJfSwKCgkvKiBBY3Rpb24gZm9yIHNlbGVjdGluZyBhIG5ldyBtb250aC95ZWFyLiAqLwoJX3NlbGVjdE1vbnRoWWVhcjogZnVuY3Rpb24oaWQsIHNlbGVjdCwgcGVyaW9kKSB7CgkJdmFyIHRhcmdldCA9ICQoaWQpOwoJCXZhciBpbnN0ID0gdGhpcy5fZ2V0SW5zdCh0YXJnZXRbMF0pOwoJCWluc3RbJ3NlbGVjdGVkJyArIChwZXJpb2QgPT0gJ00nID8gJ01vbnRoJyA6ICdZZWFyJyldID0KCQlpbnN0WydkcmF3JyArIChwZXJpb2QgPT0gJ00nID8gJ01vbnRoJyA6ICdZZWFyJyldID0KCQkJcGFyc2VJbnQoc2VsZWN0Lm9wdGlvbnNbc2VsZWN0LnNlbGVjdGVkSW5kZXhdLnZhbHVlLDEwKTsKCQl0aGlzLl9ub3RpZnlDaGFuZ2UoaW5zdCk7CgkJdGhpcy5fYWRqdXN0RGF0ZSh0YXJnZXQpOwoJfSwKCgkvKiBBY3Rpb24gZm9yIHNlbGVjdGluZyBhIGRheS4gKi8KCV9zZWxlY3REYXk6IGZ1bmN0aW9uKGlkLCBtb250aCwgeWVhciwgdGQpIHsKCQl2YXIgdGFyZ2V0ID0gJChpZCk7CgkJaWYgKCQodGQpLmhhc0NsYXNzKHRoaXMuX3Vuc2VsZWN0YWJsZUNsYXNzKSB8fCB0aGlzLl9pc0Rpc2FibGVkRGF0ZXBpY2tlcih0YXJnZXRbMF0pKSB7CgkJCXJldHVybjsKCQl9CgkJdmFyIGluc3QgPSB0aGlzLl9nZXRJbnN0KHRhcmdldFswXSk7CgkJaW5zdC5zZWxlY3RlZERheSA9IGluc3QuY3VycmVudERheSA9ICQoJ2EnLCB0ZCkuaHRtbCgpOwoJCWluc3Quc2VsZWN0ZWRNb250aCA9IGluc3QuY3VycmVudE1vbnRoID0gbW9udGg7CgkJaW5zdC5zZWxlY3RlZFllYXIgPSBpbnN0LmN1cnJlbnRZZWFyID0geWVhcjsKCQl0aGlzLl9zZWxlY3REYXRlKGlkLCB0aGlzLl9mb3JtYXREYXRlKGluc3QsCgkJCWluc3QuY3VycmVudERheSwgaW5zdC5jdXJyZW50TW9udGgsIGluc3QuY3VycmVudFllYXIpKTsKCX0sCgoJLyogRXJhc2UgdGhlIGlucHV0IGZpZWxkIGFuZCBoaWRlIHRoZSBkYXRlIHBpY2tlci4gKi8KCV9jbGVhckRhdGU6IGZ1bmN0aW9uKGlkKSB7CgkJdmFyIHRhcmdldCA9ICQoaWQpOwoJCXZhciBpbnN0ID0gdGhpcy5fZ2V0SW5zdCh0YXJnZXRbMF0pOwoJCXRoaXMuX3NlbGVjdERhdGUodGFyZ2V0LCAnJyk7Cgl9LAoKCS8qIFVwZGF0ZSB0aGUgaW5wdXQgZmllbGQgd2l0aCB0aGUgc2VsZWN0ZWQgZGF0ZS4gKi8KCV9zZWxlY3REYXRlOiBmdW5jdGlvbihpZCwgZGF0ZVN0cikgewoJCXZhciB0YXJnZXQgPSAkKGlkKTsKCQl2YXIgaW5zdCA9IHRoaXMuX2dldEluc3QodGFyZ2V0WzBdKTsKCQlkYXRlU3RyID0gKGRhdGVTdHIgIT0gbnVsbCA/IGRhdGVTdHIgOiB0aGlzLl9mb3JtYXREYXRlKGluc3QpKTsKCQlpZiAoaW5zdC5pbnB1dCkKCQkJaW5zdC5pbnB1dC52YWwoZGF0ZVN0cik7CgkJdGhpcy5fdXBkYXRlQWx0ZXJuYXRlKGluc3QpOwoJCXZhciBvblNlbGVjdCA9IHRoaXMuX2dldChpbnN0LCAnb25TZWxlY3QnKTsKCQlpZiAob25TZWxlY3QpCgkJCW9uU2VsZWN0LmFwcGx5KChpbnN0LmlucHV0ID8gaW5zdC5pbnB1dFswXSA6IG51bGwpLCBbZGF0ZVN0ciwgaW5zdF0pOyAgLy8gdHJpZ2dlciBjdXN0b20gY2FsbGJhY2sKCQllbHNlIGlmIChpbnN0LmlucHV0KQoJCQlpbnN0LmlucHV0LnRyaWdnZXIoJ2NoYW5nZScpOyAvLyBmaXJlIHRoZSBjaGFuZ2UgZXZlbnQKCQlpZiAoaW5zdC5pbmxpbmUpCgkJCXRoaXMuX3VwZGF0ZURhdGVwaWNrZXIoaW5zdCk7CgkJZWxzZSB7CgkJCXRoaXMuX2hpZGVEYXRlcGlja2VyKCk7CgkJCXRoaXMuX2xhc3RJbnB1dCA9IGluc3QuaW5wdXRbMF07CgkJCWlmICh0eXBlb2YoaW5zdC5pbnB1dFswXSkgIT0gJ29iamVjdCcpCgkJCQlpbnN0LmlucHV0LmZvY3VzKCk7IC8vIHJlc3RvcmUgZm9jdXMKCQkJdGhpcy5fbGFzdElucHV0ID0gbnVsbDsKCQl9Cgl9LAoKCS8qIFVwZGF0ZSBhbnkgYWx0ZXJuYXRlIGZpZWxkIHRvIHN5bmNocm9uaXNlIHdpdGggdGhlIG1haW4gZmllbGQuICovCglfdXBkYXRlQWx0ZXJuYXRlOiBmdW5jdGlvbihpbnN0KSB7CgkJdmFyIGFsdEZpZWxkID0gdGhpcy5fZ2V0KGluc3QsICdhbHRGaWVsZCcpOwoJCWlmIChhbHRGaWVsZCkgeyAvLyB1cGRhdGUgYWx0ZXJuYXRlIGZpZWxkIHRvbwoJCQl2YXIgYWx0Rm9ybWF0ID0gdGhpcy5fZ2V0KGluc3QsICdhbHRGb3JtYXQnKSB8fCB0aGlzLl9nZXQoaW5zdCwgJ2RhdGVGb3JtYXQnKTsKCQkJdmFyIGRhdGUgPSB0aGlzLl9nZXREYXRlKGluc3QpOwoJCQl2YXIgZGF0ZVN0ciA9IHRoaXMuZm9ybWF0RGF0ZShhbHRGb3JtYXQsIGRhdGUsIHRoaXMuX2dldEZvcm1hdENvbmZpZyhpbnN0KSk7CgkJCSQoYWx0RmllbGQpLmVhY2goZnVuY3Rpb24oKSB7ICQodGhpcykudmFsKGRhdGVTdHIpOyB9KTsKCQl9Cgl9LAoKCS8qIFNldCBhcyBiZWZvcmVTaG93RGF5IGZ1bmN0aW9uIHRvIHByZXZlbnQgc2VsZWN0aW9uIG9mIHdlZWtlbmRzLgoJICAgQHBhcmFtICBkYXRlICBEYXRlIC0gdGhlIGRhdGUgdG8gY3VzdG9taXNlCgkgICBAcmV0dXJuIFtib29sZWFuLCBzdHJpbmddIC0gaXMgdGhpcyBkYXRlIHNlbGVjdGFibGU/LCB3aGF0IGlzIGl0cyBDU1MgY2xhc3M/ICovCglub1dlZWtlbmRzOiBmdW5jdGlvbihkYXRlKSB7CgkJdmFyIGRheSA9IGRhdGUuZ2V0RGF5KCk7CgkJcmV0dXJuIFsoZGF5ID4gMCAmJiBkYXkgPCA2KSwgJyddOwoJfSwKCgkvKiBTZXQgYXMgY2FsY3VsYXRlV2VlayB0byBkZXRlcm1pbmUgdGhlIHdlZWsgb2YgdGhlIHllYXIgYmFzZWQgb24gdGhlIElTTyA4NjAxIGRlZmluaXRpb24uCgkgICBAcGFyYW0gIGRhdGUgIERhdGUgLSB0aGUgZGF0ZSB0byBnZXQgdGhlIHdlZWsgZm9yCgkgICBAcmV0dXJuICBudW1iZXIgLSB0aGUgbnVtYmVyIG9mIHRoZSB3ZWVrIHdpdGhpbiB0aGUgeWVhciB0aGF0IGNvbnRhaW5zIHRoaXMgZGF0ZSAqLwoJaXNvODYwMVdlZWs6IGZ1bmN0aW9uKGRhdGUpIHsKCQl2YXIgY2hlY2tEYXRlID0gbmV3IERhdGUoZGF0ZS5nZXRUaW1lKCkpOwoJCS8vIEZpbmQgVGh1cnNkYXkgb2YgdGhpcyB3ZWVrIHN0YXJ0aW5nIG9uIE1vbmRheQoJCWNoZWNrRGF0ZS5zZXREYXRlKGNoZWNrRGF0ZS5nZXREYXRlKCkgKyA0IC0gKGNoZWNrRGF0ZS5nZXREYXkoKSB8fCA3KSk7CgkJdmFyIHRpbWUgPSBjaGVja0RhdGUuZ2V0VGltZSgpOwoJCWNoZWNrRGF0ZS5zZXRNb250aCgwKTsgLy8gQ29tcGFyZSB3aXRoIEphbiAxCgkJY2hlY2tEYXRlLnNldERhdGUoMSk7CgkJcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yb3VuZCgodGltZSAtIGNoZWNrRGF0ZSkgLyA4NjQwMDAwMCkgLyA3KSArIDE7Cgl9LAoKCS8qIFBhcnNlIGEgc3RyaW5nIHZhbHVlIGludG8gYSBkYXRlIG9iamVjdC4KCSAgIFNlZSBmb3JtYXREYXRlIGJlbG93IGZvciB0aGUgcG9zc2libGUgZm9ybWF0cy4KCgkgICBAcGFyYW0gIGZvcm1hdCAgICBzdHJpbmcgLSB0aGUgZXhwZWN0ZWQgZm9ybWF0IG9mIHRoZSBkYXRlCgkgICBAcGFyYW0gIHZhbHVlICAgICBzdHJpbmcgLSB0aGUgZGF0ZSBpbiB0aGUgYWJvdmUgZm9ybWF0CgkgICBAcGFyYW0gIHNldHRpbmdzICBPYmplY3QgLSBhdHRyaWJ1dGVzIGluY2x1ZGU6CgkgICAgICAgICAgICAgICAgICAgICBzaG9ydFllYXJDdXRvZmYgIG51bWJlciAtIHRoZSBjdXRvZmYgeWVhciBmb3IgZGV0ZXJtaW5pbmcgdGhlIGNlbnR1cnkgKG9wdGlvbmFsKQoJICAgICAgICAgICAgICAgICAgICAgZGF5TmFtZXNTaG9ydCAgICBzdHJpbmdbN10gLSBhYmJyZXZpYXRlZCBuYW1lcyBvZiB0aGUgZGF5cyBmcm9tIFN1bmRheSAob3B0aW9uYWwpCgkgICAgICAgICAgICAgICAgICAgICBkYXlOYW1lcyAgICAgICAgIHN0cmluZ1s3XSAtIG5hbWVzIG9mIHRoZSBkYXlzIGZyb20gU3VuZGF5IChvcHRpb25hbCkKCSAgICAgICAgICAgICAgICAgICAgIG1vbnRoTmFtZXNTaG9ydCAgc3RyaW5nWzEyXSAtIGFiYnJldmlhdGVkIG5hbWVzIG9mIHRoZSBtb250aHMgKG9wdGlvbmFsKQoJICAgICAgICAgICAgICAgICAgICAgbW9udGhOYW1lcyAgICAgICBzdHJpbmdbMTJdIC0gbmFtZXMgb2YgdGhlIG1vbnRocyAob3B0aW9uYWwpCgkgICBAcmV0dXJuICBEYXRlIC0gdGhlIGV4dHJhY3RlZCBkYXRlIHZhbHVlIG9yIG51bGwgaWYgdmFsdWUgaXMgYmxhbmsgKi8KCXBhcnNlRGF0ZTogZnVuY3Rpb24gKGZvcm1hdCwgdmFsdWUsIHNldHRpbmdzKSB7CgkJaWYgKGZvcm1hdCA9PSBudWxsIHx8IHZhbHVlID09IG51bGwpCgkJCXRocm93ICdJbnZhbGlkIGFyZ3VtZW50cyc7CgkJdmFsdWUgPSAodHlwZW9mIHZhbHVlID09ICdvYmplY3QnID8gdmFsdWUudG9TdHJpbmcoKSA6IHZhbHVlICsgJycpOwoJCWlmICh2YWx1ZSA9PSAnJykKCQkJcmV0dXJuIG51bGw7CgkJdmFyIHNob3J0WWVhckN1dG9mZiA9IChzZXR0aW5ncyA/IHNldHRpbmdzLnNob3J0WWVhckN1dG9mZiA6IG51bGwpIHx8IHRoaXMuX2RlZmF1bHRzLnNob3J0WWVhckN1dG9mZjsKCQlzaG9ydFllYXJDdXRvZmYgPSAodHlwZW9mIHNob3J0WWVhckN1dG9mZiAhPSAnc3RyaW5nJyA/IHNob3J0WWVhckN1dG9mZiA6CgkJCQluZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCkgJSAxMDAgKyBwYXJzZUludChzaG9ydFllYXJDdXRvZmYsIDEwKSk7CgkJdmFyIGRheU5hbWVzU2hvcnQgPSAoc2V0dGluZ3MgPyBzZXR0aW5ncy5kYXlOYW1lc1Nob3J0IDogbnVsbCkgfHwgdGhpcy5fZGVmYXVsdHMuZGF5TmFtZXNTaG9ydDsKCQl2YXIgZGF5TmFtZXMgPSAoc2V0dGluZ3MgPyBzZXR0aW5ncy5kYXlOYW1lcyA6IG51bGwpIHx8IHRoaXMuX2RlZmF1bHRzLmRheU5hbWVzOwoJCXZhciBtb250aE5hbWVzU2hvcnQgPSAoc2V0dGluZ3MgPyBzZXR0aW5ncy5tb250aE5hbWVzU2hvcnQgOiBudWxsKSB8fCB0aGlzLl9kZWZhdWx0cy5tb250aE5hbWVzU2hvcnQ7CgkJdmFyIG1vbnRoTmFtZXMgPSAoc2V0dGluZ3MgPyBzZXR0aW5ncy5tb250aE5hbWVzIDogbnVsbCkgfHwgdGhpcy5fZGVmYXVsdHMubW9udGhOYW1lczsKCQl2YXIgeWVhciA9IC0xOwoJCXZhciBtb250aCA9IC0xOwoJCXZhciBkYXkgPSAtMTsKCQl2YXIgZG95ID0gLTE7CgkJdmFyIGxpdGVyYWwgPSBmYWxzZTsKCQkvLyBDaGVjayB3aGV0aGVyIGEgZm9ybWF0IGNoYXJhY3RlciBpcyBkb3VibGVkCgkJdmFyIGxvb2tBaGVhZCA9IGZ1bmN0aW9uKG1hdGNoKSB7CgkJCXZhciBtYXRjaGVzID0gKGlGb3JtYXQgKyAxIDwgZm9ybWF0Lmxlbmd0aCAmJiBmb3JtYXQuY2hhckF0KGlGb3JtYXQgKyAxKSA9PSBtYXRjaCk7CgkJCWlmIChtYXRjaGVzKQoJCQkJaUZvcm1hdCsrOwoJCQlyZXR1cm4gbWF0Y2hlczsKCQl9OwoJCS8vIEV4dHJhY3QgYSBudW1iZXIgZnJvbSB0aGUgc3RyaW5nIHZhbHVlCgkJdmFyIGdldE51bWJlciA9IGZ1bmN0aW9uKG1hdGNoKSB7CgkJCXZhciBpc0RvdWJsZWQgPSBsb29rQWhlYWQobWF0Y2gpOwoJCQl2YXIgc2l6ZSA9IChtYXRjaCA9PSAnQCcgPyAxNCA6IChtYXRjaCA9PSAnIScgPyAyMCA6CgkJCQkobWF0Y2ggPT0gJ3knICYmIGlzRG91YmxlZCA/IDQgOiAobWF0Y2ggPT0gJ28nID8gMyA6IDIpKSkpOwoJCQl2YXIgZGlnaXRzID0gbmV3IFJlZ0V4cCgnXlxcZHsxLCcgKyBzaXplICsgJ30nKTsKCQkJdmFyIG51bSA9IHZhbHVlLnN1YnN0cmluZyhpVmFsdWUpLm1hdGNoKGRpZ2l0cyk7CgkJCWlmICghbnVtKQoJCQkJdGhyb3cgJ01pc3NpbmcgbnVtYmVyIGF0IHBvc2l0aW9uICcgKyBpVmFsdWU7CgkJCWlWYWx1ZSArPSBudW1bMF0ubGVuZ3RoOwoJCQlyZXR1cm4gcGFyc2VJbnQobnVtWzBdLCAxMCk7CgkJfTsKCQkvLyBFeHRyYWN0IGEgbmFtZSBmcm9tIHRoZSBzdHJpbmcgdmFsdWUgYW5kIGNvbnZlcnQgdG8gYW4gaW5kZXgKCQl2YXIgZ2V0TmFtZSA9IGZ1bmN0aW9uKG1hdGNoLCBzaG9ydE5hbWVzLCBsb25nTmFtZXMpIHsKCQkJdmFyIG5hbWVzID0gJC5tYXAobG9va0FoZWFkKG1hdGNoKSA/IGxvbmdOYW1lcyA6IHNob3J0TmFtZXMsIGZ1bmN0aW9uICh2LCBrKSB7CgkJCQlyZXR1cm4gWyBbaywgdl0gXTsKCQkJfSkuc29ydChmdW5jdGlvbiAoYSwgYikgewoJCQkJcmV0dXJuIC0oYVsxXS5sZW5ndGggLSBiWzFdLmxlbmd0aCk7CgkJCX0pOwoJCQl2YXIgaW5kZXggPSAtMTsKCQkJJC5lYWNoKG5hbWVzLCBmdW5jdGlvbiAoaSwgcGFpcikgewoJCQkJdmFyIG5hbWUgPSBwYWlyWzFdOwoJCQkJaWYgKHZhbHVlLnN1YnN0cihpVmFsdWUsIG5hbWUubGVuZ3RoKS50b0xvd2VyQ2FzZSgpID09IG5hbWUudG9Mb3dlckNhc2UoKSkgewoJCQkJCWluZGV4ID0gcGFpclswXTsKCQkJCQlpVmFsdWUgKz0gbmFtZS5sZW5ndGg7CgkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJfQoJCQl9KTsKCQkJaWYgKGluZGV4ICE9IC0xKQoJCQkJcmV0dXJuIGluZGV4ICsgMTsKCQkJZWxzZQoJCQkJdGhyb3cgJ1Vua25vd24gbmFtZSBhdCBwb3NpdGlvbiAnICsgaVZhbHVlOwoJCX07CgkJLy8gQ29uZmlybSB0aGF0IGEgbGl0ZXJhbCBjaGFyYWN0ZXIgbWF0Y2hlcyB0aGUgc3RyaW5nIHZhbHVlCgkJdmFyIGNoZWNrTGl0ZXJhbCA9IGZ1bmN0aW9uKCkgewoJCQlpZiAodmFsdWUuY2hhckF0KGlWYWx1ZSkgIT0gZm9ybWF0LmNoYXJBdChpRm9ybWF0KSkKCQkJCXRocm93ICdVbmV4cGVjdGVkIGxpdGVyYWwgYXQgcG9zaXRpb24gJyArIGlWYWx1ZTsKCQkJaVZhbHVlKys7CgkJfTsKCQl2YXIgaVZhbHVlID0gMDsKCQlmb3IgKHZhciBpRm9ybWF0ID0gMDsgaUZvcm1hdCA8IGZvcm1hdC5sZW5ndGg7IGlGb3JtYXQrKykgewoJCQlpZiAobGl0ZXJhbCkKCQkJCWlmIChmb3JtYXQuY2hhckF0KGlGb3JtYXQpID09ICInIiAmJiAhbG9va0FoZWFkKCInIikpCgkJCQkJbGl0ZXJhbCA9IGZhbHNlOwoJCQkJZWxzZQoJCQkJCWNoZWNrTGl0ZXJhbCgpOwoJCQllbHNlCgkJCQlzd2l0Y2ggKGZvcm1hdC5jaGFyQXQoaUZvcm1hdCkpIHsKCQkJCQljYXNlICdkJzoKCQkJCQkJZGF5ID0gZ2V0TnVtYmVyKCdkJyk7CgkJCQkJCWJyZWFrOwoJCQkJCWNhc2UgJ0QnOgoJCQkJCQlnZXROYW1lKCdEJywgZGF5TmFtZXNTaG9ydCwgZGF5TmFtZXMpOwoJCQkJCQlicmVhazsKCQkJCQljYXNlICdvJzoKCQkJCQkJZG95ID0gZ2V0TnVtYmVyKCdvJyk7CgkJCQkJCWJyZWFrOwoJCQkJCWNhc2UgJ20nOgoJCQkJCQltb250aCA9IGdldE51bWJlcignbScpOwoJCQkJCQlicmVhazsKCQkJCQljYXNlICdNJzoKCQkJCQkJbW9udGggPSBnZXROYW1lKCdNJywgbW9udGhOYW1lc1Nob3J0LCBtb250aE5hbWVzKTsKCQkJCQkJYnJlYWs7CgkJCQkJY2FzZSAneSc6CgkJCQkJCXllYXIgPSBnZXROdW1iZXIoJ3knKTsKCQkJCQkJYnJlYWs7CgkJCQkJY2FzZSAnQCc6CgkJCQkJCXZhciBkYXRlID0gbmV3IERhdGUoZ2V0TnVtYmVyKCdAJykpOwoJCQkJCQl5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpOwoJCQkJCQltb250aCA9IGRhdGUuZ2V0TW9udGgoKSArIDE7CgkJCQkJCWRheSA9IGRhdGUuZ2V0RGF0ZSgpOwoJCQkJCQlicmVhazsKCQkJCQljYXNlICchJzoKCQkJCQkJdmFyIGRhdGUgPSBuZXcgRGF0ZSgoZ2V0TnVtYmVyKCchJykgLSB0aGlzLl90aWNrc1RvMTk3MCkgLyAxMDAwMCk7CgkJCQkJCXllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7CgkJCQkJCW1vbnRoID0gZGF0ZS5nZXRNb250aCgpICsgMTsKCQkJCQkJZGF5ID0gZGF0ZS5nZXREYXRlKCk7CgkJCQkJCWJyZWFrOwoJCQkJCWNhc2UgIiciOgoJCQkJCQlpZiAobG9va0FoZWFkKCInIikpCgkJCQkJCQljaGVja0xpdGVyYWwoKTsKCQkJCQkJZWxzZQoJCQkJCQkJbGl0ZXJhbCA9IHRydWU7CgkJCQkJCWJyZWFrOwoJCQkJCWRlZmF1bHQ6CgkJCQkJCWNoZWNrTGl0ZXJhbCgpOwoJCQkJfQoJCX0KCQlpZiAoaVZhbHVlIDwgdmFsdWUubGVuZ3RoKXsKCQkJdmFyIGV4dHJhID0gdmFsdWUuc3Vic3RyKGlWYWx1ZSk7CgkJCWlmICghL15ccysvLnRlc3QoZXh0cmEpKSB7CgkJCQl0aHJvdyAiRXh0cmEvdW5wYXJzZWQgY2hhcmFjdGVycyBmb3VuZCBpbiBkYXRlOiAiICsgZXh0cmE7CgkJCX0KCQl9CgkJaWYgKHllYXIgPT0gLTEpCgkJCXllYXIgPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7CgkJZWxzZSBpZiAoeWVhciA8IDEwMCkKCQkJeWVhciArPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCkgLSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCkgJSAxMDAgKwoJCQkJKHllYXIgPD0gc2hvcnRZZWFyQ3V0b2ZmID8gMCA6IC0xMDApOwoJCWlmIChkb3kgPiAtMSkgewoJCQltb250aCA9IDE7CgkJCWRheSA9IGRveTsKCQkJZG8gewoJCQkJdmFyIGRpbSA9IHRoaXMuX2dldERheXNJbk1vbnRoKHllYXIsIG1vbnRoIC0gMSk7CgkJCQlpZiAoZGF5IDw9IGRpbSkKCQkJCQlicmVhazsKCQkJCW1vbnRoKys7CgkJCQlkYXkgLT0gZGltOwoJCQl9IHdoaWxlICh0cnVlKTsKCQl9CgkJdmFyIGRhdGUgPSB0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZSh5ZWFyLCBtb250aCAtIDEsIGRheSkpOwoJCWlmIChkYXRlLmdldEZ1bGxZZWFyKCkgIT0geWVhciB8fCBkYXRlLmdldE1vbnRoKCkgKyAxICE9IG1vbnRoIHx8IGRhdGUuZ2V0RGF0ZSgpICE9IGRheSkKCQkJdGhyb3cgJ0ludmFsaWQgZGF0ZSc7IC8vIEUuZy4gMzEvMDIvMDAKCQlyZXR1cm4gZGF0ZTsKCX0sCgoJLyogU3RhbmRhcmQgZGF0ZSBmb3JtYXRzLiAqLwoJQVRPTTogJ3l5LW1tLWRkJywgLy8gUkZDIDMzMzkgKElTTyA4NjAxKQoJQ09PS0lFOiAnRCwgZGQgTSB5eScsCglJU09fODYwMTogJ3l5LW1tLWRkJywKCVJGQ184MjI6ICdELCBkIE0geScsCglSRkNfODUwOiAnREQsIGRkLU0teScsCglSRkNfMTAzNjogJ0QsIGQgTSB5JywKCVJGQ18xMTIzOiAnRCwgZCBNIHl5JywKCVJGQ18yODIyOiAnRCwgZCBNIHl5JywKCVJTUzogJ0QsIGQgTSB5JywgLy8gUkZDIDgyMgoJVElDS1M6ICchJywKCVRJTUVTVEFNUDogJ0AnLAoJVzNDOiAneXktbW0tZGQnLCAvLyBJU08gODYwMQoKCV90aWNrc1RvMTk3MDogKCgoMTk3MCAtIDEpICogMzY1ICsgTWF0aC5mbG9vcigxOTcwIC8gNCkgLSBNYXRoLmZsb29yKDE5NzAgLyAxMDApICsKCQlNYXRoLmZsb29yKDE5NzAgLyA0MDApKSAqIDI0ICogNjAgKiA2MCAqIDEwMDAwMDAwKSwKCgkvKiBGb3JtYXQgYSBkYXRlIG9iamVjdCBpbnRvIGEgc3RyaW5nIHZhbHVlLgoJICAgVGhlIGZvcm1hdCBjYW4gYmUgY29tYmluYXRpb25zIG9mIHRoZSBmb2xsb3dpbmc6CgkgICBkICAtIGRheSBvZiBtb250aCAobm8gbGVhZGluZyB6ZXJvKQoJICAgZGQgLSBkYXkgb2YgbW9udGggKHR3byBkaWdpdCkKCSAgIG8gIC0gZGF5IG9mIHllYXIgKG5vIGxlYWRpbmcgemVyb3MpCgkgICBvbyAtIGRheSBvZiB5ZWFyICh0aHJlZSBkaWdpdCkKCSAgIEQgIC0gZGF5IG5hbWUgc2hvcnQKCSAgIEREIC0gZGF5IG5hbWUgbG9uZwoJICAgbSAgLSBtb250aCBvZiB5ZWFyIChubyBsZWFkaW5nIHplcm8pCgkgICBtbSAtIG1vbnRoIG9mIHllYXIgKHR3byBkaWdpdCkKCSAgIE0gIC0gbW9udGggbmFtZSBzaG9ydAoJICAgTU0gLSBtb250aCBuYW1lIGxvbmcKCSAgIHkgIC0geWVhciAodHdvIGRpZ2l0KQoJICAgeXkgLSB5ZWFyIChmb3VyIGRpZ2l0KQoJICAgQCAtIFVuaXggdGltZXN0YW1wIChtcyBzaW5jZSAwMS8wMS8xOTcwKQoJICAgISAtIFdpbmRvd3MgdGlja3MgKDEwMG5zIHNpbmNlIDAxLzAxLzAwMDEpCgkgICAnLi4uJyAtIGxpdGVyYWwgdGV4dAoJICAgJycgLSBzaW5nbGUgcXVvdGUKCgkgICBAcGFyYW0gIGZvcm1hdCAgICBzdHJpbmcgLSB0aGUgZGVzaXJlZCBmb3JtYXQgb2YgdGhlIGRhdGUKCSAgIEBwYXJhbSAgZGF0ZSAgICAgIERhdGUgLSB0aGUgZGF0ZSB2YWx1ZSB0byBmb3JtYXQKCSAgIEBwYXJhbSAgc2V0dGluZ3MgIE9iamVjdCAtIGF0dHJpYnV0ZXMgaW5jbHVkZToKCSAgICAgICAgICAgICAgICAgICAgIGRheU5hbWVzU2hvcnQgICAgc3RyaW5nWzddIC0gYWJicmV2aWF0ZWQgbmFtZXMgb2YgdGhlIGRheXMgZnJvbSBTdW5kYXkgKG9wdGlvbmFsKQoJICAgICAgICAgICAgICAgICAgICAgZGF5TmFtZXMgICAgICAgICBzdHJpbmdbN10gLSBuYW1lcyBvZiB0aGUgZGF5cyBmcm9tIFN1bmRheSAob3B0aW9uYWwpCgkgICAgICAgICAgICAgICAgICAgICBtb250aE5hbWVzU2hvcnQgIHN0cmluZ1sxMl0gLSBhYmJyZXZpYXRlZCBuYW1lcyBvZiB0aGUgbW9udGhzIChvcHRpb25hbCkKCSAgICAgICAgICAgICAgICAgICAgIG1vbnRoTmFtZXMgICAgICAgc3RyaW5nWzEyXSAtIG5hbWVzIG9mIHRoZSBtb250aHMgKG9wdGlvbmFsKQoJICAgQHJldHVybiAgc3RyaW5nIC0gdGhlIGRhdGUgaW4gdGhlIGFib3ZlIGZvcm1hdCAqLwoJZm9ybWF0RGF0ZTogZnVuY3Rpb24gKGZvcm1hdCwgZGF0ZSwgc2V0dGluZ3MpIHsKCQlpZiAoIWRhdGUpCgkJCXJldHVybiAnJzsKCQl2YXIgZGF5TmFtZXNTaG9ydCA9IChzZXR0aW5ncyA/IHNldHRpbmdzLmRheU5hbWVzU2hvcnQgOiBudWxsKSB8fCB0aGlzLl9kZWZhdWx0cy5kYXlOYW1lc1Nob3J0OwoJCXZhciBkYXlOYW1lcyA9IChzZXR0aW5ncyA/IHNldHRpbmdzLmRheU5hbWVzIDogbnVsbCkgfHwgdGhpcy5fZGVmYXVsdHMuZGF5TmFtZXM7CgkJdmFyIG1vbnRoTmFtZXNTaG9ydCA9IChzZXR0aW5ncyA/IHNldHRpbmdzLm1vbnRoTmFtZXNTaG9ydCA6IG51bGwpIHx8IHRoaXMuX2RlZmF1bHRzLm1vbnRoTmFtZXNTaG9ydDsKCQl2YXIgbW9udGhOYW1lcyA9IChzZXR0aW5ncyA/IHNldHRpbmdzLm1vbnRoTmFtZXMgOiBudWxsKSB8fCB0aGlzLl9kZWZhdWx0cy5tb250aE5hbWVzOwoJCS8vIENoZWNrIHdoZXRoZXIgYSBmb3JtYXQgY2hhcmFjdGVyIGlzIGRvdWJsZWQKCQl2YXIgbG9va0FoZWFkID0gZnVuY3Rpb24obWF0Y2gpIHsKCQkJdmFyIG1hdGNoZXMgPSAoaUZvcm1hdCArIDEgPCBmb3JtYXQubGVuZ3RoICYmIGZvcm1hdC5jaGFyQXQoaUZvcm1hdCArIDEpID09IG1hdGNoKTsKCQkJaWYgKG1hdGNoZXMpCgkJCQlpRm9ybWF0Kys7CgkJCXJldHVybiBtYXRjaGVzOwoJCX07CgkJLy8gRm9ybWF0IGEgbnVtYmVyLCB3aXRoIGxlYWRpbmcgemVybyBpZiBuZWNlc3NhcnkKCQl2YXIgZm9ybWF0TnVtYmVyID0gZnVuY3Rpb24obWF0Y2gsIHZhbHVlLCBsZW4pIHsKCQkJdmFyIG51bSA9ICcnICsgdmFsdWU7CgkJCWlmIChsb29rQWhlYWQobWF0Y2gpKQoJCQkJd2hpbGUgKG51bS5sZW5ndGggPCBsZW4pCgkJCQkJbnVtID0gJzAnICsgbnVtOwoJCQlyZXR1cm4gbnVtOwoJCX07CgkJLy8gRm9ybWF0IGEgbmFtZSwgc2hvcnQgb3IgbG9uZyBhcyByZXF1ZXN0ZWQKCQl2YXIgZm9ybWF0TmFtZSA9IGZ1bmN0aW9uKG1hdGNoLCB2YWx1ZSwgc2hvcnROYW1lcywgbG9uZ05hbWVzKSB7CgkJCXJldHVybiAobG9va0FoZWFkKG1hdGNoKSA/IGxvbmdOYW1lc1t2YWx1ZV0gOiBzaG9ydE5hbWVzW3ZhbHVlXSk7CgkJfTsKCQl2YXIgb3V0cHV0ID0gJyc7CgkJdmFyIGxpdGVyYWwgPSBmYWxzZTsKCQlpZiAoZGF0ZSkKCQkJZm9yICh2YXIgaUZvcm1hdCA9IDA7IGlGb3JtYXQgPCBmb3JtYXQubGVuZ3RoOyBpRm9ybWF0KyspIHsKCQkJCWlmIChsaXRlcmFsKQoJCQkJCWlmIChmb3JtYXQuY2hhckF0KGlGb3JtYXQpID09ICInIiAmJiAhbG9va0FoZWFkKCInIikpCgkJCQkJCWxpdGVyYWwgPSBmYWxzZTsKCQkJCQllbHNlCgkJCQkJCW91dHB1dCArPSBmb3JtYXQuY2hhckF0KGlGb3JtYXQpOwoJCQkJZWxzZQoJCQkJCXN3aXRjaCAoZm9ybWF0LmNoYXJBdChpRm9ybWF0KSkgewoJCQkJCQljYXNlICdkJzoKCQkJCQkJCW91dHB1dCArPSBmb3JtYXROdW1iZXIoJ2QnLCBkYXRlLmdldERhdGUoKSwgMik7CgkJCQkJCQlicmVhazsKCQkJCQkJY2FzZSAnRCc6CgkJCQkJCQlvdXRwdXQgKz0gZm9ybWF0TmFtZSgnRCcsIGRhdGUuZ2V0RGF5KCksIGRheU5hbWVzU2hvcnQsIGRheU5hbWVzKTsKCQkJCQkJCWJyZWFrOwoJCQkJCQljYXNlICdvJzoKCQkJCQkJCW91dHB1dCArPSBmb3JtYXROdW1iZXIoJ28nLAoJCQkJCQkJCU1hdGgucm91bmQoKG5ldyBEYXRlKGRhdGUuZ2V0RnVsbFllYXIoKSwgZGF0ZS5nZXRNb250aCgpLCBkYXRlLmdldERhdGUoKSkuZ2V0VGltZSgpIC0gbmV3IERhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLCAwLCAwKS5nZXRUaW1lKCkpIC8gODY0MDAwMDApLCAzKTsKCQkJCQkJCWJyZWFrOwoJCQkJCQljYXNlICdtJzoKCQkJCQkJCW91dHB1dCArPSBmb3JtYXROdW1iZXIoJ20nLCBkYXRlLmdldE1vbnRoKCkgKyAxLCAyKTsKCQkJCQkJCWJyZWFrOwoJCQkJCQljYXNlICdNJzoKCQkJCQkJCW91dHB1dCArPSBmb3JtYXROYW1lKCdNJywgZGF0ZS5nZXRNb250aCgpLCBtb250aE5hbWVzU2hvcnQsIG1vbnRoTmFtZXMpOwoJCQkJCQkJYnJlYWs7CgkJCQkJCWNhc2UgJ3knOgoJCQkJCQkJb3V0cHV0ICs9IChsb29rQWhlYWQoJ3knKSA/IGRhdGUuZ2V0RnVsbFllYXIoKSA6CgkJCQkJCQkJKGRhdGUuZ2V0WWVhcigpICUgMTAwIDwgMTAgPyAnMCcgOiAnJykgKyBkYXRlLmdldFllYXIoKSAlIDEwMCk7CgkJCQkJCQlicmVhazsKCQkJCQkJY2FzZSAnQCc6CgkJCQkJCQlvdXRwdXQgKz0gZGF0ZS5nZXRUaW1lKCk7CgkJCQkJCQlicmVhazsKCQkJCQkJY2FzZSAnISc6CgkJCQkJCQlvdXRwdXQgKz0gZGF0ZS5nZXRUaW1lKCkgKiAxMDAwMCArIHRoaXMuX3RpY2tzVG8xOTcwOwoJCQkJCQkJYnJlYWs7CgkJCQkJCWNhc2UgIiciOgoJCQkJCQkJaWYgKGxvb2tBaGVhZCgiJyIpKQoJCQkJCQkJCW91dHB1dCArPSAiJyI7CgkJCQkJCQllbHNlCgkJCQkJCQkJbGl0ZXJhbCA9IHRydWU7CgkJCQkJCQlicmVhazsKCQkJCQkJZGVmYXVsdDoKCQkJCQkJCW91dHB1dCArPSBmb3JtYXQuY2hhckF0KGlGb3JtYXQpOwoJCQkJCX0KCQkJfQoJCXJldHVybiBvdXRwdXQ7Cgl9LAoKCS8qIEV4dHJhY3QgYWxsIHBvc3NpYmxlIGNoYXJhY3RlcnMgZnJvbSB0aGUgZGF0ZSBmb3JtYXQuICovCglfcG9zc2libGVDaGFyczogZnVuY3Rpb24gKGZvcm1hdCkgewoJCXZhciBjaGFycyA9ICcnOwoJCXZhciBsaXRlcmFsID0gZmFsc2U7CgkJLy8gQ2hlY2sgd2hldGhlciBhIGZvcm1hdCBjaGFyYWN0ZXIgaXMgZG91YmxlZAoJCXZhciBsb29rQWhlYWQgPSBmdW5jdGlvbihtYXRjaCkgewoJCQl2YXIgbWF0Y2hlcyA9IChpRm9ybWF0ICsgMSA8IGZvcm1hdC5sZW5ndGggJiYgZm9ybWF0LmNoYXJBdChpRm9ybWF0ICsgMSkgPT0gbWF0Y2gpOwoJCQlpZiAobWF0Y2hlcykKCQkJCWlGb3JtYXQrKzsKCQkJcmV0dXJuIG1hdGNoZXM7CgkJfTsKCQlmb3IgKHZhciBpRm9ybWF0ID0gMDsgaUZvcm1hdCA8IGZvcm1hdC5sZW5ndGg7IGlGb3JtYXQrKykKCQkJaWYgKGxpdGVyYWwpCgkJCQlpZiAoZm9ybWF0LmNoYXJBdChpRm9ybWF0KSA9PSAiJyIgJiYgIWxvb2tBaGVhZCgiJyIpKQoJCQkJCWxpdGVyYWwgPSBmYWxzZTsKCQkJCWVsc2UKCQkJCQljaGFycyArPSBmb3JtYXQuY2hhckF0KGlGb3JtYXQpOwoJCQllbHNlCgkJCQlzd2l0Y2ggKGZvcm1hdC5jaGFyQXQoaUZvcm1hdCkpIHsKCQkJCQljYXNlICdkJzogY2FzZSAnbSc6IGNhc2UgJ3knOiBjYXNlICdAJzoKCQkJCQkJY2hhcnMgKz0gJzAxMjM0NTY3ODknOwoJCQkJCQlicmVhazsKCQkJCQljYXNlICdEJzogY2FzZSAnTSc6CgkJCQkJCXJldHVybiBudWxsOyAvLyBBY2NlcHQgYW55dGhpbmcKCQkJCQljYXNlICInIjoKCQkJCQkJaWYgKGxvb2tBaGVhZCgiJyIpKQoJCQkJCQkJY2hhcnMgKz0gIiciOwoJCQkJCQllbHNlCgkJCQkJCQlsaXRlcmFsID0gdHJ1ZTsKCQkJCQkJYnJlYWs7CgkJCQkJZGVmYXVsdDoKCQkJCQkJY2hhcnMgKz0gZm9ybWF0LmNoYXJBdChpRm9ybWF0KTsKCQkJCX0KCQlyZXR1cm4gY2hhcnM7Cgl9LAoKCS8qIEdldCBhIHNldHRpbmcgdmFsdWUsIGRlZmF1bHRpbmcgaWYgbmVjZXNzYXJ5LiAqLwoJX2dldDogZnVuY3Rpb24oaW5zdCwgbmFtZSkgewoJCXJldHVybiBpbnN0LnNldHRpbmdzW25hbWVdICE9PSB1bmRlZmluZWQgPwoJCQlpbnN0LnNldHRpbmdzW25hbWVdIDogdGhpcy5fZGVmYXVsdHNbbmFtZV07Cgl9LAoKCS8qIFBhcnNlIGV4aXN0aW5nIGRhdGUgYW5kIGluaXRpYWxpc2UgZGF0ZSBwaWNrZXIuICovCglfc2V0RGF0ZUZyb21GaWVsZDogZnVuY3Rpb24oaW5zdCwgbm9EZWZhdWx0KSB7CgkJaWYgKGluc3QuaW5wdXQudmFsKCkgPT0gaW5zdC5sYXN0VmFsKSB7CgkJCXJldHVybjsKCQl9CgkJdmFyIGRhdGVGb3JtYXQgPSB0aGlzLl9nZXQoaW5zdCwgJ2RhdGVGb3JtYXQnKTsKCQl2YXIgZGF0ZXMgPSBpbnN0Lmxhc3RWYWwgPSBpbnN0LmlucHV0ID8gaW5zdC5pbnB1dC52YWwoKSA6IG51bGw7CgkJdmFyIGRhdGUsIGRlZmF1bHREYXRlOwoJCWRhdGUgPSBkZWZhdWx0RGF0ZSA9IHRoaXMuX2dldERlZmF1bHREYXRlKGluc3QpOwoJCXZhciBzZXR0aW5ncyA9IHRoaXMuX2dldEZvcm1hdENvbmZpZyhpbnN0KTsKCQl0cnkgewoJCQlkYXRlID0gdGhpcy5wYXJzZURhdGUoZGF0ZUZvcm1hdCwgZGF0ZXMsIHNldHRpbmdzKSB8fCBkZWZhdWx0RGF0ZTsKCQl9IGNhdGNoIChldmVudCkgewoJCQl0aGlzLmxvZyhldmVudCk7CgkJCWRhdGVzID0gKG5vRGVmYXVsdCA/ICcnIDogZGF0ZXMpOwoJCX0KCQlpbnN0LnNlbGVjdGVkRGF5ID0gZGF0ZS5nZXREYXRlKCk7CgkJaW5zdC5kcmF3TW9udGggPSBpbnN0LnNlbGVjdGVkTW9udGggPSBkYXRlLmdldE1vbnRoKCk7CgkJaW5zdC5kcmF3WWVhciA9IGluc3Quc2VsZWN0ZWRZZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpOwoJCWluc3QuY3VycmVudERheSA9IChkYXRlcyA/IGRhdGUuZ2V0RGF0ZSgpIDogMCk7CgkJaW5zdC5jdXJyZW50TW9udGggPSAoZGF0ZXMgPyBkYXRlLmdldE1vbnRoKCkgOiAwKTsKCQlpbnN0LmN1cnJlbnRZZWFyID0gKGRhdGVzID8gZGF0ZS5nZXRGdWxsWWVhcigpIDogMCk7CgkJdGhpcy5fYWRqdXN0SW5zdERhdGUoaW5zdCk7Cgl9LAoKCS8qIFJldHJpZXZlIHRoZSBkZWZhdWx0IGRhdGUgc2hvd24gb24gb3BlbmluZy4gKi8KCV9nZXREZWZhdWx0RGF0ZTogZnVuY3Rpb24oaW5zdCkgewoJCXJldHVybiB0aGlzLl9yZXN0cmljdE1pbk1heChpbnN0LAoJCQl0aGlzLl9kZXRlcm1pbmVEYXRlKGluc3QsIHRoaXMuX2dldChpbnN0LCAnZGVmYXVsdERhdGUnKSwgbmV3IERhdGUoKSkpOwoJfSwKCgkvKiBBIGRhdGUgbWF5IGJlIHNwZWNpZmllZCBhcyBhbiBleGFjdCB2YWx1ZSBvciBhIHJlbGF0aXZlIG9uZS4gKi8KCV9kZXRlcm1pbmVEYXRlOiBmdW5jdGlvbihpbnN0LCBkYXRlLCBkZWZhdWx0RGF0ZSkgewoJCXZhciBvZmZzZXROdW1lcmljID0gZnVuY3Rpb24ob2Zmc2V0KSB7CgkJCXZhciBkYXRlID0gbmV3IERhdGUoKTsKCQkJZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpICsgb2Zmc2V0KTsKCQkJcmV0dXJuIGRhdGU7CgkJfTsKCQl2YXIgb2Zmc2V0U3RyaW5nID0gZnVuY3Rpb24ob2Zmc2V0KSB7CgkJCXRyeSB7CgkJCQlyZXR1cm4gJC5kYXRlcGlja2VyLnBhcnNlRGF0ZSgkLmRhdGVwaWNrZXIuX2dldChpbnN0LCAnZGF0ZUZvcm1hdCcpLAoJCQkJCW9mZnNldCwgJC5kYXRlcGlja2VyLl9nZXRGb3JtYXRDb25maWcoaW5zdCkpOwoJCQl9CgkJCWNhdGNoIChlKSB7CgkJCQkvLyBJZ25vcmUKCQkJfQoJCQl2YXIgZGF0ZSA9IChvZmZzZXQudG9Mb3dlckNhc2UoKS5tYXRjaCgvXmMvKSA/CgkJCQkkLmRhdGVwaWNrZXIuX2dldERhdGUoaW5zdCkgOiBudWxsKSB8fCBuZXcgRGF0ZSgpOwoJCQl2YXIgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTsKCQkJdmFyIG1vbnRoID0gZGF0ZS5nZXRNb250aCgpOwoJCQl2YXIgZGF5ID0gZGF0ZS5nZXREYXRlKCk7CgkJCXZhciBwYXR0ZXJuID0gLyhbKy1dP1swLTldKylccyooZHxEfHd8V3xtfE18eXxZKT8vZzsKCQkJdmFyIG1hdGNoZXMgPSBwYXR0ZXJuLmV4ZWMob2Zmc2V0KTsKCQkJd2hpbGUgKG1hdGNoZXMpIHsKCQkJCXN3aXRjaCAobWF0Y2hlc1syXSB8fCAnZCcpIHsKCQkJCQljYXNlICdkJyA6IGNhc2UgJ0QnIDoKCQkJCQkJZGF5ICs9IHBhcnNlSW50KG1hdGNoZXNbMV0sMTApOyBicmVhazsKCQkJCQljYXNlICd3JyA6IGNhc2UgJ1cnIDoKCQkJCQkJZGF5ICs9IHBhcnNlSW50KG1hdGNoZXNbMV0sMTApICogNzsgYnJlYWs7CgkJCQkJY2FzZSAnbScgOiBjYXNlICdNJyA6CgkJCQkJCW1vbnRoICs9IHBhcnNlSW50KG1hdGNoZXNbMV0sMTApOwoJCQkJCQlkYXkgPSBNYXRoLm1pbihkYXksICQuZGF0ZXBpY2tlci5fZ2V0RGF5c0luTW9udGgoeWVhciwgbW9udGgpKTsKCQkJCQkJYnJlYWs7CgkJCQkJY2FzZSAneSc6IGNhc2UgJ1knIDoKCQkJCQkJeWVhciArPSBwYXJzZUludChtYXRjaGVzWzFdLDEwKTsKCQkJCQkJZGF5ID0gTWF0aC5taW4oZGF5LCAkLmRhdGVwaWNrZXIuX2dldERheXNJbk1vbnRoKHllYXIsIG1vbnRoKSk7CgkJCQkJCWJyZWFrOwoJCQkJfQoJCQkJbWF0Y2hlcyA9IHBhdHRlcm4uZXhlYyhvZmZzZXQpOwoJCQl9CgkJCXJldHVybiBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5KTsKCQl9OwoJCXZhciBuZXdEYXRlID0gKGRhdGUgPT0gbnVsbCB8fCBkYXRlID09PSAnJyA/IGRlZmF1bHREYXRlIDogKHR5cGVvZiBkYXRlID09ICdzdHJpbmcnID8gb2Zmc2V0U3RyaW5nKGRhdGUpIDoKCQkJKHR5cGVvZiBkYXRlID09ICdudW1iZXInID8gKGlzTmFOKGRhdGUpID8gZGVmYXVsdERhdGUgOiBvZmZzZXROdW1lcmljKGRhdGUpKSA6IG5ldyBEYXRlKGRhdGUuZ2V0VGltZSgpKSkpKTsKCQluZXdEYXRlID0gKG5ld0RhdGUgJiYgbmV3RGF0ZS50b1N0cmluZygpID09ICdJbnZhbGlkIERhdGUnID8gZGVmYXVsdERhdGUgOiBuZXdEYXRlKTsKCQlpZiAobmV3RGF0ZSkgewoJCQluZXdEYXRlLnNldEhvdXJzKDApOwoJCQluZXdEYXRlLnNldE1pbnV0ZXMoMCk7CgkJCW5ld0RhdGUuc2V0U2Vjb25kcygwKTsKCQkJbmV3RGF0ZS5zZXRNaWxsaXNlY29uZHMoMCk7CgkJfQoJCXJldHVybiB0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXdEYXRlKTsKCX0sCgoJLyogSGFuZGxlIHN3aXRjaCB0by9mcm9tIGRheWxpZ2h0IHNhdmluZy4KCSAgIEhvdXJzIG1heSBiZSBub24temVybyBvbiBkYXlsaWdodCBzYXZpbmcgY3V0LW92ZXI6CgkgICA+IDEyIHdoZW4gbWlkbmlnaHQgY2hhbmdlb3ZlciwgYnV0IHRoZW4gY2Fubm90IGdlbmVyYXRlCgkgICBtaWRuaWdodCBkYXRldGltZSwgc28ganVtcCB0byAxQU0sIG90aGVyd2lzZSByZXNldC4KCSAgIEBwYXJhbSAgZGF0ZSAgKERhdGUpIHRoZSBkYXRlIHRvIGNoZWNrCgkgICBAcmV0dXJuICAoRGF0ZSkgdGhlIGNvcnJlY3RlZCBkYXRlICovCglfZGF5bGlnaHRTYXZpbmdBZGp1c3Q6IGZ1bmN0aW9uKGRhdGUpIHsKCQlpZiAoIWRhdGUpIHJldHVybiBudWxsOwoJCWRhdGUuc2V0SG91cnMoZGF0ZS5nZXRIb3VycygpID4gMTIgPyBkYXRlLmdldEhvdXJzKCkgKyAyIDogMCk7CgkJcmV0dXJuIGRhdGU7Cgl9LAoKCS8qIFNldCB0aGUgZGF0ZShzKSBkaXJlY3RseS4gKi8KCV9zZXREYXRlOiBmdW5jdGlvbihpbnN0LCBkYXRlLCBub0NoYW5nZSkgewoJCXZhciBjbGVhciA9ICFkYXRlOwoJCXZhciBvcmlnTW9udGggPSBpbnN0LnNlbGVjdGVkTW9udGg7CgkJdmFyIG9yaWdZZWFyID0gaW5zdC5zZWxlY3RlZFllYXI7CgkJdmFyIG5ld0RhdGUgPSB0aGlzLl9yZXN0cmljdE1pbk1heChpbnN0LCB0aGlzLl9kZXRlcm1pbmVEYXRlKGluc3QsIGRhdGUsIG5ldyBEYXRlKCkpKTsKCQlpbnN0LnNlbGVjdGVkRGF5ID0gaW5zdC5jdXJyZW50RGF5ID0gbmV3RGF0ZS5nZXREYXRlKCk7CgkJaW5zdC5kcmF3TW9udGggPSBpbnN0LnNlbGVjdGVkTW9udGggPSBpbnN0LmN1cnJlbnRNb250aCA9IG5ld0RhdGUuZ2V0TW9udGgoKTsKCQlpbnN0LmRyYXdZZWFyID0gaW5zdC5zZWxlY3RlZFllYXIgPSBpbnN0LmN1cnJlbnRZZWFyID0gbmV3RGF0ZS5nZXRGdWxsWWVhcigpOwoJCWlmICgob3JpZ01vbnRoICE9IGluc3Quc2VsZWN0ZWRNb250aCB8fCBvcmlnWWVhciAhPSBpbnN0LnNlbGVjdGVkWWVhcikgJiYgIW5vQ2hhbmdlKQoJCQl0aGlzLl9ub3RpZnlDaGFuZ2UoaW5zdCk7CgkJdGhpcy5fYWRqdXN0SW5zdERhdGUoaW5zdCk7CgkJaWYgKGluc3QuaW5wdXQpIHsKCQkJaW5zdC5pbnB1dC52YWwoY2xlYXIgPyAnJyA6IHRoaXMuX2Zvcm1hdERhdGUoaW5zdCkpOwoJCX0KCX0sCgoJLyogUmV0cmlldmUgdGhlIGRhdGUocykgZGlyZWN0bHkuICovCglfZ2V0RGF0ZTogZnVuY3Rpb24oaW5zdCkgewoJCXZhciBzdGFydERhdGUgPSAoIWluc3QuY3VycmVudFllYXIgfHwgKGluc3QuaW5wdXQgJiYgaW5zdC5pbnB1dC52YWwoKSA9PSAnJykgPyBudWxsIDoKCQkJdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoCgkJCWluc3QuY3VycmVudFllYXIsIGluc3QuY3VycmVudE1vbnRoLCBpbnN0LmN1cnJlbnREYXkpKSk7CgkJCXJldHVybiBzdGFydERhdGU7Cgl9LAoKCS8qIEF0dGFjaCB0aGUgb254eHggaGFuZGxlcnMuICBUaGVzZSBhcmUgZGVjbGFyZWQgc3RhdGljYWxseSBzbwoJICogdGhleSB3b3JrIHdpdGggc3RhdGljIGNvZGUgdHJhbnNmb3JtZXJzIGxpa2UgQ2FqYS4KCSAqLwoJX2F0dGFjaEhhbmRsZXJzOiBmdW5jdGlvbihpbnN0KSB7CgkJdmFyIHN0ZXBNb250aHMgPSB0aGlzLl9nZXQoaW5zdCwgJ3N0ZXBNb250aHMnKTsKCQl2YXIgaWQgPSAnIycgKyBpbnN0LmlkLnJlcGxhY2UoIC9cXFxcL2csICJcXCIgKTsKCQlpbnN0LmRwRGl2LmZpbmQoJ1tkYXRhLWhhbmRsZXJdJykubWFwKGZ1bmN0aW9uICgpIHsKCQkJdmFyIGhhbmRsZXIgPSB7CgkJCQlwcmV2OiBmdW5jdGlvbiAoKSB7CgkJCQkJd2luZG93WydEUF9qUXVlcnlfJyArIGRwdXVpZF0uZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShpZCwgLXN0ZXBNb250aHMsICdNJyk7CgkJCQl9LAoJCQkJbmV4dDogZnVuY3Rpb24gKCkgewoJCQkJCXdpbmRvd1snRFBfalF1ZXJ5XycgKyBkcHV1aWRdLmRhdGVwaWNrZXIuX2FkanVzdERhdGUoaWQsICtzdGVwTW9udGhzLCAnTScpOwoJCQkJfSwKCQkJCWhpZGU6IGZ1bmN0aW9uICgpIHsKCQkJCQl3aW5kb3dbJ0RQX2pRdWVyeV8nICsgZHB1dWlkXS5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpOwoJCQkJfSwKCQkJCXRvZGF5OiBmdW5jdGlvbiAoKSB7CgkJCQkJd2luZG93WydEUF9qUXVlcnlfJyArIGRwdXVpZF0uZGF0ZXBpY2tlci5fZ290b1RvZGF5KGlkKTsKCQkJCX0sCgkJCQlzZWxlY3REYXk6IGZ1bmN0aW9uICgpIHsKCQkJCQl3aW5kb3dbJ0RQX2pRdWVyeV8nICsgZHB1dWlkXS5kYXRlcGlja2VyLl9zZWxlY3REYXkoaWQsICt0aGlzLmdldEF0dHJpYnV0ZSgnZGF0YS1tb250aCcpLCArdGhpcy5nZXRBdHRyaWJ1dGUoJ2RhdGEteWVhcicpLCB0aGlzKTsKCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQl9LAoJCQkJc2VsZWN0TW9udGg6IGZ1bmN0aW9uICgpIHsKCQkJCQl3aW5kb3dbJ0RQX2pRdWVyeV8nICsgZHB1dWlkXS5kYXRlcGlja2VyLl9zZWxlY3RNb250aFllYXIoaWQsIHRoaXMsICdNJyk7CgkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJfSwKCQkJCXNlbGVjdFllYXI6IGZ1bmN0aW9uICgpIHsKCQkJCQl3aW5kb3dbJ0RQX2pRdWVyeV8nICsgZHB1dWlkXS5kYXRlcGlja2VyLl9zZWxlY3RNb250aFllYXIoaWQsIHRoaXMsICdZJyk7CgkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJfQoJCQl9OwoJCQkkKHRoaXMpLmJpbmQodGhpcy5nZXRBdHRyaWJ1dGUoJ2RhdGEtZXZlbnQnKSwgaGFuZGxlclt0aGlzLmdldEF0dHJpYnV0ZSgnZGF0YS1oYW5kbGVyJyldKTsKCQl9KTsKCX0sCgoJLyogR2VuZXJhdGUgdGhlIEhUTUwgZm9yIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBkYXRlIHBpY2tlci4gKi8KCV9nZW5lcmF0ZUhUTUw6IGZ1bmN0aW9uKGluc3QpIHsKCQl2YXIgdG9kYXkgPSBuZXcgRGF0ZSgpOwoJCXRvZGF5ID0gdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QoCgkJCW5ldyBEYXRlKHRvZGF5LmdldEZ1bGxZZWFyKCksIHRvZGF5LmdldE1vbnRoKCksIHRvZGF5LmdldERhdGUoKSkpOyAvLyBjbGVhciB0aW1lCgkJdmFyIGlzUlRMID0gdGhpcy5fZ2V0KGluc3QsICdpc1JUTCcpOwoJCXZhciBzaG93QnV0dG9uUGFuZWwgPSB0aGlzLl9nZXQoaW5zdCwgJ3Nob3dCdXR0b25QYW5lbCcpOwoJCXZhciBoaWRlSWZOb1ByZXZOZXh0ID0gdGhpcy5fZ2V0KGluc3QsICdoaWRlSWZOb1ByZXZOZXh0Jyk7CgkJdmFyIG5hdmlnYXRpb25Bc0RhdGVGb3JtYXQgPSB0aGlzLl9nZXQoaW5zdCwgJ25hdmlnYXRpb25Bc0RhdGVGb3JtYXQnKTsKCQl2YXIgbnVtTW9udGhzID0gdGhpcy5fZ2V0TnVtYmVyT2ZNb250aHMoaW5zdCk7CgkJdmFyIHNob3dDdXJyZW50QXRQb3MgPSB0aGlzLl9nZXQoaW5zdCwgJ3Nob3dDdXJyZW50QXRQb3MnKTsKCQl2YXIgc3RlcE1vbnRocyA9IHRoaXMuX2dldChpbnN0LCAnc3RlcE1vbnRocycpOwoJCXZhciBpc011bHRpTW9udGggPSAobnVtTW9udGhzWzBdICE9IDEgfHwgbnVtTW9udGhzWzFdICE9IDEpOwoJCXZhciBjdXJyZW50RGF0ZSA9IHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KCghaW5zdC5jdXJyZW50RGF5ID8gbmV3IERhdGUoOTk5OSwgOSwgOSkgOgoJCQluZXcgRGF0ZShpbnN0LmN1cnJlbnRZZWFyLCBpbnN0LmN1cnJlbnRNb250aCwgaW5zdC5jdXJyZW50RGF5KSkpOwoJCXZhciBtaW5EYXRlID0gdGhpcy5fZ2V0TWluTWF4RGF0ZShpbnN0LCAnbWluJyk7CgkJdmFyIG1heERhdGUgPSB0aGlzLl9nZXRNaW5NYXhEYXRlKGluc3QsICdtYXgnKTsKCQl2YXIgZHJhd01vbnRoID0gaW5zdC5kcmF3TW9udGggLSBzaG93Q3VycmVudEF0UG9zOwoJCXZhciBkcmF3WWVhciA9IGluc3QuZHJhd1llYXI7CgkJaWYgKGRyYXdNb250aCA8IDApIHsKCQkJZHJhd01vbnRoICs9IDEyOwoJCQlkcmF3WWVhci0tOwoJCX0KCQlpZiAobWF4RGF0ZSkgewoJCQl2YXIgbWF4RHJhdyA9IHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKG1heERhdGUuZ2V0RnVsbFllYXIoKSwKCQkJCW1heERhdGUuZ2V0TW9udGgoKSAtIChudW1Nb250aHNbMF0gKiBudW1Nb250aHNbMV0pICsgMSwgbWF4RGF0ZS5nZXREYXRlKCkpKTsKCQkJbWF4RHJhdyA9IChtaW5EYXRlICYmIG1heERyYXcgPCBtaW5EYXRlID8gbWluRGF0ZSA6IG1heERyYXcpOwoJCQl3aGlsZSAodGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoZHJhd1llYXIsIGRyYXdNb250aCwgMSkpID4gbWF4RHJhdykgewoJCQkJZHJhd01vbnRoLS07CgkJCQlpZiAoZHJhd01vbnRoIDwgMCkgewoJCQkJCWRyYXdNb250aCA9IDExOwoJCQkJCWRyYXdZZWFyLS07CgkJCQl9CgkJCX0KCQl9CgkJaW5zdC5kcmF3TW9udGggPSBkcmF3TW9udGg7CgkJaW5zdC5kcmF3WWVhciA9IGRyYXdZZWFyOwoJCXZhciBwcmV2VGV4dCA9IHRoaXMuX2dldChpbnN0LCAncHJldlRleHQnKTsKCQlwcmV2VGV4dCA9ICghbmF2aWdhdGlvbkFzRGF0ZUZvcm1hdCA/IHByZXZUZXh0IDogdGhpcy5mb3JtYXREYXRlKHByZXZUZXh0LAoJCQl0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShkcmF3WWVhciwgZHJhd01vbnRoIC0gc3RlcE1vbnRocywgMSkpLAoJCQl0aGlzLl9nZXRGb3JtYXRDb25maWcoaW5zdCkpKTsKCQl2YXIgcHJldiA9ICh0aGlzLl9jYW5BZGp1c3RNb250aChpbnN0LCAtMSwgZHJhd1llYXIsIGRyYXdNb250aCkgPwoJCQknPGEgY2xhc3M9InVpLWRhdGVwaWNrZXItcHJldiB1aS1jb3JuZXItYWxsIiBkYXRhLWhhbmRsZXI9InByZXYiIGRhdGEtZXZlbnQ9ImNsaWNrIicgKwoJCQknIHRpdGxlPSInICsgcHJldlRleHQgKyAnIj48c3BhbiBjbGFzcz0idWktaWNvbiB1aS1pY29uLWNpcmNsZS10cmlhbmdsZS0nICsgKCBpc1JUTCA/ICdlJyA6ICd3JykgKyAnIj4nICsgcHJldlRleHQgKyAnPC9zcGFuPjwvYT4nIDoKCQkJKGhpZGVJZk5vUHJldk5leHQgPyAnJyA6ICc8YSBjbGFzcz0idWktZGF0ZXBpY2tlci1wcmV2IHVpLWNvcm5lci1hbGwgdWktc3RhdGUtZGlzYWJsZWQiIHRpdGxlPSInKyBwcmV2VGV4dCArJyI+PHNwYW4gY2xhc3M9InVpLWljb24gdWktaWNvbi1jaXJjbGUtdHJpYW5nbGUtJyArICggaXNSVEwgPyAnZScgOiAndycpICsgJyI+JyArIHByZXZUZXh0ICsgJzwvc3Bhbj48L2E+JykpOwoJCXZhciBuZXh0VGV4dCA9IHRoaXMuX2dldChpbnN0LCAnbmV4dFRleHQnKTsKCQluZXh0VGV4dCA9ICghbmF2aWdhdGlvbkFzRGF0ZUZvcm1hdCA/IG5leHRUZXh0IDogdGhpcy5mb3JtYXREYXRlKG5leHRUZXh0LAoJCQl0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShkcmF3WWVhciwgZHJhd01vbnRoICsgc3RlcE1vbnRocywgMSkpLAoJCQl0aGlzLl9nZXRGb3JtYXRDb25maWcoaW5zdCkpKTsKCQl2YXIgbmV4dCA9ICh0aGlzLl9jYW5BZGp1c3RNb250aChpbnN0LCArMSwgZHJhd1llYXIsIGRyYXdNb250aCkgPwoJCQknPGEgY2xhc3M9InVpLWRhdGVwaWNrZXItbmV4dCB1aS1jb3JuZXItYWxsIiBkYXRhLWhhbmRsZXI9Im5leHQiIGRhdGEtZXZlbnQ9ImNsaWNrIicgKwoJCQknIHRpdGxlPSInICsgbmV4dFRleHQgKyAnIj48c3BhbiBjbGFzcz0idWktaWNvbiB1aS1pY29uLWNpcmNsZS10cmlhbmdsZS0nICsgKCBpc1JUTCA/ICd3JyA6ICdlJykgKyAnIj4nICsgbmV4dFRleHQgKyAnPC9zcGFuPjwvYT4nIDoKCQkJKGhpZGVJZk5vUHJldk5leHQgPyAnJyA6ICc8YSBjbGFzcz0idWktZGF0ZXBpY2tlci1uZXh0IHVpLWNvcm5lci1hbGwgdWktc3RhdGUtZGlzYWJsZWQiIHRpdGxlPSInKyBuZXh0VGV4dCArICciPjxzcGFuIGNsYXNzPSJ1aS1pY29uIHVpLWljb24tY2lyY2xlLXRyaWFuZ2xlLScgKyAoIGlzUlRMID8gJ3cnIDogJ2UnKSArICciPicgKyBuZXh0VGV4dCArICc8L3NwYW4+PC9hPicpKTsKCQl2YXIgY3VycmVudFRleHQgPSB0aGlzLl9nZXQoaW5zdCwgJ2N1cnJlbnRUZXh0Jyk7CgkJdmFyIGdvdG9EYXRlID0gKHRoaXMuX2dldChpbnN0LCAnZ290b0N1cnJlbnQnKSAmJiBpbnN0LmN1cnJlbnREYXkgPyBjdXJyZW50RGF0ZSA6IHRvZGF5KTsKCQljdXJyZW50VGV4dCA9ICghbmF2aWdhdGlvbkFzRGF0ZUZvcm1hdCA/IGN1cnJlbnRUZXh0IDoKCQkJdGhpcy5mb3JtYXREYXRlKGN1cnJlbnRUZXh0LCBnb3RvRGF0ZSwgdGhpcy5fZ2V0Rm9ybWF0Q29uZmlnKGluc3QpKSk7CgkJdmFyIGNvbnRyb2xzID0gKCFpbnN0LmlubGluZSA/ICc8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9InVpLWRhdGVwaWNrZXItY2xvc2UgdWktc3RhdGUtZGVmYXVsdCB1aS1wcmlvcml0eS1wcmltYXJ5IHVpLWNvcm5lci1hbGwiIGRhdGEtaGFuZGxlcj0iaGlkZSIgZGF0YS1ldmVudD0iY2xpY2siPicgKwoJCQl0aGlzLl9nZXQoaW5zdCwgJ2Nsb3NlVGV4dCcpICsgJzwvYnV0dG9uPicgOiAnJyk7CgkJdmFyIGJ1dHRvblBhbmVsID0gKHNob3dCdXR0b25QYW5lbCkgPyAnPGRpdiBjbGFzcz0idWktZGF0ZXBpY2tlci1idXR0b25wYW5lIHVpLXdpZGdldC1jb250ZW50Ij4nICsgKGlzUlRMID8gY29udHJvbHMgOiAnJykgKwoJCQkodGhpcy5faXNJblJhbmdlKGluc3QsIGdvdG9EYXRlKSA/ICc8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9InVpLWRhdGVwaWNrZXItY3VycmVudCB1aS1zdGF0ZS1kZWZhdWx0IHVpLXByaW9yaXR5LXNlY29uZGFyeSB1aS1jb3JuZXItYWxsIiBkYXRhLWhhbmRsZXI9InRvZGF5IiBkYXRhLWV2ZW50PSJjbGljayInICsKCQkJJz4nICsgY3VycmVudFRleHQgKyAnPC9idXR0b24+JyA6ICcnKSArIChpc1JUTCA/ICcnIDogY29udHJvbHMpICsgJzwvZGl2PicgOiAnJzsKCQl2YXIgZmlyc3REYXkgPSBwYXJzZUludCh0aGlzLl9nZXQoaW5zdCwgJ2ZpcnN0RGF5JyksMTApOwoJCWZpcnN0RGF5ID0gKGlzTmFOKGZpcnN0RGF5KSA/IDAgOiBmaXJzdERheSk7CgkJdmFyIHNob3dXZWVrID0gdGhpcy5fZ2V0KGluc3QsICdzaG93V2VlaycpOwoJCXZhciBkYXlOYW1lcyA9IHRoaXMuX2dldChpbnN0LCAnZGF5TmFtZXMnKTsKCQl2YXIgZGF5TmFtZXNTaG9ydCA9IHRoaXMuX2dldChpbnN0LCAnZGF5TmFtZXNTaG9ydCcpOwoJCXZhciBkYXlOYW1lc01pbiA9IHRoaXMuX2dldChpbnN0LCAnZGF5TmFtZXNNaW4nKTsKCQl2YXIgbW9udGhOYW1lcyA9IHRoaXMuX2dldChpbnN0LCAnbW9udGhOYW1lcycpOwoJCXZhciBtb250aE5hbWVzU2hvcnQgPSB0aGlzLl9nZXQoaW5zdCwgJ21vbnRoTmFtZXNTaG9ydCcpOwoJCXZhciBiZWZvcmVTaG93RGF5ID0gdGhpcy5fZ2V0KGluc3QsICdiZWZvcmVTaG93RGF5Jyk7CgkJdmFyIHNob3dPdGhlck1vbnRocyA9IHRoaXMuX2dldChpbnN0LCAnc2hvd090aGVyTW9udGhzJyk7CgkJdmFyIHNlbGVjdE90aGVyTW9udGhzID0gdGhpcy5fZ2V0KGluc3QsICdzZWxlY3RPdGhlck1vbnRocycpOwoJCXZhciBjYWxjdWxhdGVXZWVrID0gdGhpcy5fZ2V0KGluc3QsICdjYWxjdWxhdGVXZWVrJykgfHwgdGhpcy5pc284NjAxV2VlazsKCQl2YXIgZGVmYXVsdERhdGUgPSB0aGlzLl9nZXREZWZhdWx0RGF0ZShpbnN0KTsKCQl2YXIgaHRtbCA9ICcnOwoJCWZvciAodmFyIHJvdyA9IDA7IHJvdyA8IG51bU1vbnRoc1swXTsgcm93KyspIHsKCQkJdmFyIGdyb3VwID0gJyc7CgkJCXRoaXMubWF4Um93cyA9IDQ7CgkJCWZvciAodmFyIGNvbCA9IDA7IGNvbCA8IG51bU1vbnRoc1sxXTsgY29sKyspIHsKCQkJCXZhciBzZWxlY3RlZERhdGUgPSB0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShkcmF3WWVhciwgZHJhd01vbnRoLCBpbnN0LnNlbGVjdGVkRGF5KSk7CgkJCQl2YXIgY29ybmVyQ2xhc3MgPSAnIHVpLWNvcm5lci1hbGwnOwoJCQkJdmFyIGNhbGVuZGVyID0gJyc7CgkJCQlpZiAoaXNNdWx0aU1vbnRoKSB7CgkJCQkJY2FsZW5kZXIgKz0gJzxkaXYgY2xhc3M9InVpLWRhdGVwaWNrZXItZ3JvdXAnOwoJCQkJCWlmIChudW1Nb250aHNbMV0gPiAxKQoJCQkJCQlzd2l0Y2ggKGNvbCkgewoJCQkJCQkJY2FzZSAwOiBjYWxlbmRlciArPSAnIHVpLWRhdGVwaWNrZXItZ3JvdXAtZmlyc3QnOwoJCQkJCQkJCWNvcm5lckNsYXNzID0gJyB1aS1jb3JuZXItJyArIChpc1JUTCA/ICdyaWdodCcgOiAnbGVmdCcpOyBicmVhazsKCQkJCQkJCWNhc2UgbnVtTW9udGhzWzFdLTE6IGNhbGVuZGVyICs9ICcgdWktZGF0ZXBpY2tlci1ncm91cC1sYXN0JzsKCQkJCQkJCQljb3JuZXJDbGFzcyA9ICcgdWktY29ybmVyLScgKyAoaXNSVEwgPyAnbGVmdCcgOiAncmlnaHQnKTsgYnJlYWs7CgkJCQkJCQlkZWZhdWx0OiBjYWxlbmRlciArPSAnIHVpLWRhdGVwaWNrZXItZ3JvdXAtbWlkZGxlJzsgY29ybmVyQ2xhc3MgPSAnJzsgYnJlYWs7CgkJCQkJCX0KCQkJCQljYWxlbmRlciArPSAnIj4nOwoJCQkJfQoJCQkJY2FsZW5kZXIgKz0gJzxkaXYgY2xhc3M9InVpLWRhdGVwaWNrZXItaGVhZGVyIHVpLXdpZGdldC1oZWFkZXIgdWktaGVscGVyLWNsZWFyZml4JyArIGNvcm5lckNsYXNzICsgJyI+JyArCgkJCQkJKC9hbGx8bGVmdC8udGVzdChjb3JuZXJDbGFzcykgJiYgcm93ID09IDAgPyAoaXNSVEwgPyBuZXh0IDogcHJldikgOiAnJykgKwoJCQkJCSgvYWxsfHJpZ2h0Ly50ZXN0KGNvcm5lckNsYXNzKSAmJiByb3cgPT0gMCA/IChpc1JUTCA/IHByZXYgOiBuZXh0KSA6ICcnKSArCgkJCQkJdGhpcy5fZ2VuZXJhdGVNb250aFllYXJIZWFkZXIoaW5zdCwgZHJhd01vbnRoLCBkcmF3WWVhciwgbWluRGF0ZSwgbWF4RGF0ZSwKCQkJCQlyb3cgPiAwIHx8IGNvbCA+IDAsIG1vbnRoTmFtZXMsIG1vbnRoTmFtZXNTaG9ydCkgKyAvLyBkcmF3IG1vbnRoIGhlYWRlcnMKCQkJCQknPC9kaXY+PHRhYmxlIGNsYXNzPSJ1aS1kYXRlcGlja2VyLWNhbGVuZGFyIj48dGhlYWQ+JyArCgkJCQkJJzx0cj4nOwoJCQkJdmFyIHRoZWFkID0gKHNob3dXZWVrID8gJzx0aCBjbGFzcz0idWktZGF0ZXBpY2tlci13ZWVrLWNvbCI+JyArIHRoaXMuX2dldChpbnN0LCAnd2Vla0hlYWRlcicpICsgJzwvdGg+JyA6ICcnKTsKCQkJCWZvciAodmFyIGRvdyA9IDA7IGRvdyA8IDc7IGRvdysrKSB7IC8vIGRheXMgb2YgdGhlIHdlZWsKCQkJCQl2YXIgZGF5ID0gKGRvdyArIGZpcnN0RGF5KSAlIDc7CgkJCQkJdGhlYWQgKz0gJzx0aCcgKyAoKGRvdyArIGZpcnN0RGF5ICsgNikgJSA3ID49IDUgPyAnIGNsYXNzPSJ1aS1kYXRlcGlja2VyLXdlZWstZW5kIicgOiAnJykgKyAnPicgKwoJCQkJCQknPHNwYW4gdGl0bGU9IicgKyBkYXlOYW1lc1tkYXldICsgJyI+JyArIGRheU5hbWVzTWluW2RheV0gKyAnPC9zcGFuPjwvdGg+JzsKCQkJCX0KCQkJCWNhbGVuZGVyICs9IHRoZWFkICsgJzwvdHI+PC90aGVhZD48dGJvZHk+JzsKCQkJCXZhciBkYXlzSW5Nb250aCA9IHRoaXMuX2dldERheXNJbk1vbnRoKGRyYXdZZWFyLCBkcmF3TW9udGgpOwoJCQkJaWYgKGRyYXdZZWFyID09IGluc3Quc2VsZWN0ZWRZZWFyICYmIGRyYXdNb250aCA9PSBpbnN0LnNlbGVjdGVkTW9udGgpCgkJCQkJaW5zdC5zZWxlY3RlZERheSA9IE1hdGgubWluKGluc3Quc2VsZWN0ZWREYXksIGRheXNJbk1vbnRoKTsKCQkJCXZhciBsZWFkRGF5cyA9ICh0aGlzLl9nZXRGaXJzdERheU9mTW9udGgoZHJhd1llYXIsIGRyYXdNb250aCkgLSBmaXJzdERheSArIDcpICUgNzsKCQkJCXZhciBjdXJSb3dzID0gTWF0aC5jZWlsKChsZWFkRGF5cyArIGRheXNJbk1vbnRoKSAvIDcpOyAvLyBjYWxjdWxhdGUgdGhlIG51bWJlciBvZiByb3dzIHRvIGdlbmVyYXRlCgkJCQl2YXIgbnVtUm93cyA9IChpc011bHRpTW9udGggPyB0aGlzLm1heFJvd3MgPiBjdXJSb3dzID8gdGhpcy5tYXhSb3dzIDogY3VyUm93cyA6IGN1clJvd3MpOyAvL0lmIG11bHRpcGxlIG1vbnRocywgdXNlIHRoZSBoaWdoZXIgbnVtYmVyIG9mIHJvd3MgKHNlZSAjNzA0MykKCQkJCXRoaXMubWF4Um93cyA9IG51bVJvd3M7CgkJCQl2YXIgcHJpbnREYXRlID0gdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoZHJhd1llYXIsIGRyYXdNb250aCwgMSAtIGxlYWREYXlzKSk7CgkJCQlmb3IgKHZhciBkUm93ID0gMDsgZFJvdyA8IG51bVJvd3M7IGRSb3crKykgeyAvLyBjcmVhdGUgZGF0ZSBwaWNrZXIgcm93cwoJCQkJCWNhbGVuZGVyICs9ICc8dHI+JzsKCQkJCQl2YXIgdGJvZHkgPSAoIXNob3dXZWVrID8gJycgOiAnPHRkIGNsYXNzPSJ1aS1kYXRlcGlja2VyLXdlZWstY29sIj4nICsKCQkJCQkJdGhpcy5fZ2V0KGluc3QsICdjYWxjdWxhdGVXZWVrJykocHJpbnREYXRlKSArICc8L3RkPicpOwoJCQkJCWZvciAodmFyIGRvdyA9IDA7IGRvdyA8IDc7IGRvdysrKSB7IC8vIGNyZWF0ZSBkYXRlIHBpY2tlciBkYXlzCgkJCQkJCXZhciBkYXlTZXR0aW5ncyA9IChiZWZvcmVTaG93RGF5ID8KCQkJCQkJCWJlZm9yZVNob3dEYXkuYXBwbHkoKGluc3QuaW5wdXQgPyBpbnN0LmlucHV0WzBdIDogbnVsbCksIFtwcmludERhdGVdKSA6IFt0cnVlLCAnJ10pOwoJCQkJCQl2YXIgb3RoZXJNb250aCA9IChwcmludERhdGUuZ2V0TW9udGgoKSAhPSBkcmF3TW9udGgpOwoJCQkJCQl2YXIgdW5zZWxlY3RhYmxlID0gKG90aGVyTW9udGggJiYgIXNlbGVjdE90aGVyTW9udGhzKSB8fCAhZGF5U2V0dGluZ3NbMF0gfHwKCQkJCQkJCShtaW5EYXRlICYmIHByaW50RGF0ZSA8IG1pbkRhdGUpIHx8IChtYXhEYXRlICYmIHByaW50RGF0ZSA+IG1heERhdGUpOwoJCQkJCQl0Ym9keSArPSAnPHRkIGNsYXNzPSInICsKCQkJCQkJCSgoZG93ICsgZmlyc3REYXkgKyA2KSAlIDcgPj0gNSA/ICcgdWktZGF0ZXBpY2tlci13ZWVrLWVuZCcgOiAnJykgKyAvLyBoaWdobGlnaHQgd2Vla2VuZHMKCQkJCQkJCShvdGhlck1vbnRoID8gJyB1aS1kYXRlcGlja2VyLW90aGVyLW1vbnRoJyA6ICcnKSArIC8vIGhpZ2hsaWdodCBkYXlzIGZyb20gb3RoZXIgbW9udGhzCgkJCQkJCQkoKHByaW50RGF0ZS5nZXRUaW1lKCkgPT0gc2VsZWN0ZWREYXRlLmdldFRpbWUoKSAmJiBkcmF3TW9udGggPT0gaW5zdC5zZWxlY3RlZE1vbnRoICYmIGluc3QuX2tleUV2ZW50KSB8fCAvLyB1c2VyIHByZXNzZWQga2V5CgkJCQkJCQkoZGVmYXVsdERhdGUuZ2V0VGltZSgpID09IHByaW50RGF0ZS5nZXRUaW1lKCkgJiYgZGVmYXVsdERhdGUuZ2V0VGltZSgpID09IHNlbGVjdGVkRGF0ZS5nZXRUaW1lKCkpID8KCQkJCQkJCS8vIG9yIGRlZmF1bHREYXRlIGlzIGN1cnJlbnQgcHJpbnRlZERhdGUgYW5kIGRlZmF1bHREYXRlIGlzIHNlbGVjdGVkRGF0ZQoJCQkJCQkJJyAnICsgdGhpcy5fZGF5T3ZlckNsYXNzIDogJycpICsgLy8gaGlnaGxpZ2h0IHNlbGVjdGVkIGRheQoJCQkJCQkJKHVuc2VsZWN0YWJsZSA/ICcgJyArIHRoaXMuX3Vuc2VsZWN0YWJsZUNsYXNzICsgJyB1aS1zdGF0ZS1kaXNhYmxlZCc6ICcnKSArICAvLyBoaWdobGlnaHQgdW5zZWxlY3RhYmxlIGRheXMKCQkJCQkJCShvdGhlck1vbnRoICYmICFzaG93T3RoZXJNb250aHMgPyAnJyA6ICcgJyArIGRheVNldHRpbmdzWzFdICsgLy8gaGlnaGxpZ2h0IGN1c3RvbSBkYXRlcwoJCQkJCQkJKHByaW50RGF0ZS5nZXRUaW1lKCkgPT0gY3VycmVudERhdGUuZ2V0VGltZSgpID8gJyAnICsgdGhpcy5fY3VycmVudENsYXNzIDogJycpICsgLy8gaGlnaGxpZ2h0IHNlbGVjdGVkIGRheQoJCQkJCQkJKHByaW50RGF0ZS5nZXRUaW1lKCkgPT0gdG9kYXkuZ2V0VGltZSgpID8gJyB1aS1kYXRlcGlja2VyLXRvZGF5JyA6ICcnKSkgKyAnIicgKyAvLyBoaWdobGlnaHQgdG9kYXkgKGlmIGRpZmZlcmVudCkKCQkJCQkJCSgoIW90aGVyTW9udGggfHwgc2hvd090aGVyTW9udGhzKSAmJiBkYXlTZXR0aW5nc1syXSA/ICcgdGl0bGU9IicgKyBkYXlTZXR0aW5nc1syXSArICciJyA6ICcnKSArIC8vIGNlbGwgdGl0bGUKCQkJCQkJCSh1bnNlbGVjdGFibGUgPyAnJyA6ICcgZGF0YS1oYW5kbGVyPSJzZWxlY3REYXkiIGRhdGEtZXZlbnQ9ImNsaWNrIiBkYXRhLW1vbnRoPSInICsgcHJpbnREYXRlLmdldE1vbnRoKCkgKyAnIiBkYXRhLXllYXI9IicgKyBwcmludERhdGUuZ2V0RnVsbFllYXIoKSArICciJykgKyAnPicgKyAvLyBhY3Rpb25zCgkJCQkJCQkob3RoZXJNb250aCAmJiAhc2hvd090aGVyTW9udGhzID8gJyYjeGEwOycgOiAvLyBkaXNwbGF5IGZvciBvdGhlciBtb250aHMKCQkJCQkJCSh1bnNlbGVjdGFibGUgPyAnPHNwYW4gY2xhc3M9InVpLXN0YXRlLWRlZmF1bHQiPicgKyBwcmludERhdGUuZ2V0RGF0ZSgpICsgJzwvc3Bhbj4nIDogJzxhIGNsYXNzPSJ1aS1zdGF0ZS1kZWZhdWx0JyArCgkJCQkJCQkocHJpbnREYXRlLmdldFRpbWUoKSA9PSB0b2RheS5nZXRUaW1lKCkgPyAnIHVpLXN0YXRlLWhpZ2hsaWdodCcgOiAnJykgKwoJCQkJCQkJKHByaW50RGF0ZS5nZXRUaW1lKCkgPT0gY3VycmVudERhdGUuZ2V0VGltZSgpID8gJyB1aS1zdGF0ZS1hY3RpdmUnIDogJycpICsgLy8gaGlnaGxpZ2h0IHNlbGVjdGVkIGRheQoJCQkJCQkJKG90aGVyTW9udGggPyAnIHVpLXByaW9yaXR5LXNlY29uZGFyeScgOiAnJykgKyAvLyBkaXN0aW5ndWlzaCBkYXRlcyBmcm9tIG90aGVyIG1vbnRocwoJCQkJCQkJJyIgaHJlZj0iIyI+JyArIHByaW50RGF0ZS5nZXREYXRlKCkgKyAnPC9hPicpKSArICc8L3RkPic7IC8vIGRpc3BsYXkgc2VsZWN0YWJsZSBkYXRlCgkJCQkJCXByaW50RGF0ZS5zZXREYXRlKHByaW50RGF0ZS5nZXREYXRlKCkgKyAxKTsKCQkJCQkJcHJpbnREYXRlID0gdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QocHJpbnREYXRlKTsKCQkJCQl9CgkJCQkJY2FsZW5kZXIgKz0gdGJvZHkgKyAnPC90cj4nOwoJCQkJfQoJCQkJZHJhd01vbnRoKys7CgkJCQlpZiAoZHJhd01vbnRoID4gMTEpIHsKCQkJCQlkcmF3TW9udGggPSAwOwoJCQkJCWRyYXdZZWFyKys7CgkJCQl9CgkJCQljYWxlbmRlciArPSAnPC90Ym9keT48L3RhYmxlPicgKyAoaXNNdWx0aU1vbnRoID8gJzwvZGl2PicgKwoJCQkJCQkJKChudW1Nb250aHNbMF0gPiAwICYmIGNvbCA9PSBudW1Nb250aHNbMV0tMSkgPyAnPGRpdiBjbGFzcz0idWktZGF0ZXBpY2tlci1yb3ctYnJlYWsiPjwvZGl2PicgOiAnJykgOiAnJyk7CgkJCQlncm91cCArPSBjYWxlbmRlcjsKCQkJfQoJCQlodG1sICs9IGdyb3VwOwoJCX0KCQlodG1sICs9IGJ1dHRvblBhbmVsICsgKCQudWkuaWU2ICYmICFpbnN0LmlubGluZSA/CgkJCSc8aWZyYW1lIHNyYz0iamF2YXNjcmlwdDpmYWxzZTsiIGNsYXNzPSJ1aS1kYXRlcGlja2VyLWNvdmVyIiBmcmFtZWJvcmRlcj0iMCI+PC9pZnJhbWU+JyA6ICcnKTsKCQlpbnN0Ll9rZXlFdmVudCA9IGZhbHNlOwoJCXJldHVybiBodG1sOwoJfSwKCgkvKiBHZW5lcmF0ZSB0aGUgbW9udGggYW5kIHllYXIgaGVhZGVyLiAqLwoJX2dlbmVyYXRlTW9udGhZZWFySGVhZGVyOiBmdW5jdGlvbihpbnN0LCBkcmF3TW9udGgsIGRyYXdZZWFyLCBtaW5EYXRlLCBtYXhEYXRlLAoJCQlzZWNvbmRhcnksIG1vbnRoTmFtZXMsIG1vbnRoTmFtZXNTaG9ydCkgewoJCXZhciBjaGFuZ2VNb250aCA9IHRoaXMuX2dldChpbnN0LCAnY2hhbmdlTW9udGgnKTsKCQl2YXIgY2hhbmdlWWVhciA9IHRoaXMuX2dldChpbnN0LCAnY2hhbmdlWWVhcicpOwoJCXZhciBzaG93TW9udGhBZnRlclllYXIgPSB0aGlzLl9nZXQoaW5zdCwgJ3Nob3dNb250aEFmdGVyWWVhcicpOwoJCXZhciBodG1sID0gJzxkaXYgY2xhc3M9InVpLWRhdGVwaWNrZXItdGl0bGUiPic7CgkJdmFyIG1vbnRoSHRtbCA9ICcnOwoJCS8vIG1vbnRoIHNlbGVjdGlvbgoJCWlmIChzZWNvbmRhcnkgfHwgIWNoYW5nZU1vbnRoKQoJCQltb250aEh0bWwgKz0gJzxzcGFuIGNsYXNzPSJ1aS1kYXRlcGlja2VyLW1vbnRoIj4nICsgbW9udGhOYW1lc1tkcmF3TW9udGhdICsgJzwvc3Bhbj4nOwoJCWVsc2UgewoJCQl2YXIgaW5NaW5ZZWFyID0gKG1pbkRhdGUgJiYgbWluRGF0ZS5nZXRGdWxsWWVhcigpID09IGRyYXdZZWFyKTsKCQkJdmFyIGluTWF4WWVhciA9IChtYXhEYXRlICYmIG1heERhdGUuZ2V0RnVsbFllYXIoKSA9PSBkcmF3WWVhcik7CgkJCW1vbnRoSHRtbCArPSAnPHNlbGVjdCBjbGFzcz0idWktZGF0ZXBpY2tlci1tb250aCIgZGF0YS1oYW5kbGVyPSJzZWxlY3RNb250aCIgZGF0YS1ldmVudD0iY2hhbmdlIj4nOwoJCQlmb3IgKHZhciBtb250aCA9IDA7IG1vbnRoIDwgMTI7IG1vbnRoKyspIHsKCQkJCWlmICgoIWluTWluWWVhciB8fCBtb250aCA+PSBtaW5EYXRlLmdldE1vbnRoKCkpICYmCgkJCQkJCSghaW5NYXhZZWFyIHx8IG1vbnRoIDw9IG1heERhdGUuZ2V0TW9udGgoKSkpCgkJCQkJbW9udGhIdG1sICs9ICc8b3B0aW9uIHZhbHVlPSInICsgbW9udGggKyAnIicgKwoJCQkJCQkobW9udGggPT0gZHJhd01vbnRoID8gJyBzZWxlY3RlZD0ic2VsZWN0ZWQiJyA6ICcnKSArCgkJCQkJCSc+JyArIG1vbnRoTmFtZXNTaG9ydFttb250aF0gKyAnPC9vcHRpb24+JzsKCQkJfQoJCQltb250aEh0bWwgKz0gJzwvc2VsZWN0Pic7CgkJfQoJCWlmICghc2hvd01vbnRoQWZ0ZXJZZWFyKQoJCQlodG1sICs9IG1vbnRoSHRtbCArIChzZWNvbmRhcnkgfHwgIShjaGFuZ2VNb250aCAmJiBjaGFuZ2VZZWFyKSA/ICcmI3hhMDsnIDogJycpOwoJCS8vIHllYXIgc2VsZWN0aW9uCgkJaWYgKCAhaW5zdC55ZWFyc2h0bWwgKSB7CgkJCWluc3QueWVhcnNodG1sID0gJyc7CgkJCWlmIChzZWNvbmRhcnkgfHwgIWNoYW5nZVllYXIpCgkJCQlodG1sICs9ICc8c3BhbiBjbGFzcz0idWktZGF0ZXBpY2tlci15ZWFyIj4nICsgZHJhd1llYXIgKyAnPC9zcGFuPic7CgkJCWVsc2UgewoJCQkJLy8gZGV0ZXJtaW5lIHJhbmdlIG9mIHllYXJzIHRvIGRpc3BsYXkKCQkJCXZhciB5ZWFycyA9IHRoaXMuX2dldChpbnN0LCAneWVhclJhbmdlJykuc3BsaXQoJzonKTsKCQkJCXZhciB0aGlzWWVhciA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTsKCQkJCXZhciBkZXRlcm1pbmVZZWFyID0gZnVuY3Rpb24odmFsdWUpIHsKCQkJCQl2YXIgeWVhciA9ICh2YWx1ZS5tYXRjaCgvY1srLV0uKi8pID8gZHJhd1llYXIgKyBwYXJzZUludCh2YWx1ZS5zdWJzdHJpbmcoMSksIDEwKSA6CgkJCQkJCSh2YWx1ZS5tYXRjaCgvWystXS4qLykgPyB0aGlzWWVhciArIHBhcnNlSW50KHZhbHVlLCAxMCkgOgoJCQkJCQlwYXJzZUludCh2YWx1ZSwgMTApKSk7CgkJCQkJcmV0dXJuIChpc05hTih5ZWFyKSA/IHRoaXNZZWFyIDogeWVhcik7CgkJCQl9OwoJCQkJdmFyIHllYXIgPSBkZXRlcm1pbmVZZWFyKHllYXJzWzBdKTsKCQkJCXZhciBlbmRZZWFyID0gTWF0aC5tYXgoeWVhciwgZGV0ZXJtaW5lWWVhcih5ZWFyc1sxXSB8fCAnJykpOwoJCQkJeWVhciA9IChtaW5EYXRlID8gTWF0aC5tYXgoeWVhciwgbWluRGF0ZS5nZXRGdWxsWWVhcigpKSA6IHllYXIpOwoJCQkJZW5kWWVhciA9IChtYXhEYXRlID8gTWF0aC5taW4oZW5kWWVhciwgbWF4RGF0ZS5nZXRGdWxsWWVhcigpKSA6IGVuZFllYXIpOwoJCQkJaW5zdC55ZWFyc2h0bWwgKz0gJzxzZWxlY3QgY2xhc3M9InVpLWRhdGVwaWNrZXIteWVhciIgZGF0YS1oYW5kbGVyPSJzZWxlY3RZZWFyIiBkYXRhLWV2ZW50PSJjaGFuZ2UiPic7CgkJCQlmb3IgKDsgeWVhciA8PSBlbmRZZWFyOyB5ZWFyKyspIHsKCQkJCQlpbnN0LnllYXJzaHRtbCArPSAnPG9wdGlvbiB2YWx1ZT0iJyArIHllYXIgKyAnIicgKwoJCQkJCQkoeWVhciA9PSBkcmF3WWVhciA/ICcgc2VsZWN0ZWQ9InNlbGVjdGVkIicgOiAnJykgKwoJCQkJCQknPicgKyB5ZWFyICsgJzwvb3B0aW9uPic7CgkJCQl9CgkJCQlpbnN0LnllYXJzaHRtbCArPSAnPC9zZWxlY3Q+JzsKCgkJCQlodG1sICs9IGluc3QueWVhcnNodG1sOwoJCQkJaW5zdC55ZWFyc2h0bWwgPSBudWxsOwoJCQl9CgkJfQoJCWh0bWwgKz0gdGhpcy5fZ2V0KGluc3QsICd5ZWFyU3VmZml4Jyk7CgkJaWYgKHNob3dNb250aEFmdGVyWWVhcikKCQkJaHRtbCArPSAoc2Vjb25kYXJ5IHx8ICEoY2hhbmdlTW9udGggJiYgY2hhbmdlWWVhcikgPyAnJiN4YTA7JyA6ICcnKSArIG1vbnRoSHRtbDsKCQlodG1sICs9ICc8L2Rpdj4nOyAvLyBDbG9zZSBkYXRlcGlja2VyX2hlYWRlcgoJCXJldHVybiBodG1sOwoJfSwKCgkvKiBBZGp1c3Qgb25lIG9mIHRoZSBkYXRlIHN1Yi1maWVsZHMuICovCglfYWRqdXN0SW5zdERhdGU6IGZ1bmN0aW9uKGluc3QsIG9mZnNldCwgcGVyaW9kKSB7CgkJdmFyIHllYXIgPSBpbnN0LmRyYXdZZWFyICsgKHBlcmlvZCA9PSAnWScgPyBvZmZzZXQgOiAwKTsKCQl2YXIgbW9udGggPSBpbnN0LmRyYXdNb250aCArIChwZXJpb2QgPT0gJ00nID8gb2Zmc2V0IDogMCk7CgkJdmFyIGRheSA9IE1hdGgubWluKGluc3Quc2VsZWN0ZWREYXksIHRoaXMuX2dldERheXNJbk1vbnRoKHllYXIsIG1vbnRoKSkgKwoJCQkocGVyaW9kID09ICdEJyA/IG9mZnNldCA6IDApOwoJCXZhciBkYXRlID0gdGhpcy5fcmVzdHJpY3RNaW5NYXgoaW5zdCwKCQkJdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoeWVhciwgbW9udGgsIGRheSkpKTsKCQlpbnN0LnNlbGVjdGVkRGF5ID0gZGF0ZS5nZXREYXRlKCk7CgkJaW5zdC5kcmF3TW9udGggPSBpbnN0LnNlbGVjdGVkTW9udGggPSBkYXRlLmdldE1vbnRoKCk7CgkJaW5zdC5kcmF3WWVhciA9IGluc3Quc2VsZWN0ZWRZZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpOwoJCWlmIChwZXJpb2QgPT0gJ00nIHx8IHBlcmlvZCA9PSAnWScpCgkJCXRoaXMuX25vdGlmeUNoYW5nZShpbnN0KTsKCX0sCgoJLyogRW5zdXJlIGEgZGF0ZSBpcyB3aXRoaW4gYW55IG1pbi9tYXggYm91bmRzLiAqLwoJX3Jlc3RyaWN0TWluTWF4OiBmdW5jdGlvbihpbnN0LCBkYXRlKSB7CgkJdmFyIG1pbkRhdGUgPSB0aGlzLl9nZXRNaW5NYXhEYXRlKGluc3QsICdtaW4nKTsKCQl2YXIgbWF4RGF0ZSA9IHRoaXMuX2dldE1pbk1heERhdGUoaW5zdCwgJ21heCcpOwoJCXZhciBuZXdEYXRlID0gKG1pbkRhdGUgJiYgZGF0ZSA8IG1pbkRhdGUgPyBtaW5EYXRlIDogZGF0ZSk7CgkJbmV3RGF0ZSA9IChtYXhEYXRlICYmIG5ld0RhdGUgPiBtYXhEYXRlID8gbWF4RGF0ZSA6IG5ld0RhdGUpOwoJCXJldHVybiBuZXdEYXRlOwoJfSwKCgkvKiBOb3RpZnkgY2hhbmdlIG9mIG1vbnRoL3llYXIuICovCglfbm90aWZ5Q2hhbmdlOiBmdW5jdGlvbihpbnN0KSB7CgkJdmFyIG9uQ2hhbmdlID0gdGhpcy5fZ2V0KGluc3QsICdvbkNoYW5nZU1vbnRoWWVhcicpOwoJCWlmIChvbkNoYW5nZSkKCQkJb25DaGFuZ2UuYXBwbHkoKGluc3QuaW5wdXQgPyBpbnN0LmlucHV0WzBdIDogbnVsbCksCgkJCQlbaW5zdC5zZWxlY3RlZFllYXIsIGluc3Quc2VsZWN0ZWRNb250aCArIDEsIGluc3RdKTsKCX0sCgoJLyogRGV0ZXJtaW5lIHRoZSBudW1iZXIgb2YgbW9udGhzIHRvIHNob3cuICovCglfZ2V0TnVtYmVyT2ZNb250aHM6IGZ1bmN0aW9uKGluc3QpIHsKCQl2YXIgbnVtTW9udGhzID0gdGhpcy5fZ2V0KGluc3QsICdudW1iZXJPZk1vbnRocycpOwoJCXJldHVybiAobnVtTW9udGhzID09IG51bGwgPyBbMSwgMV0gOiAodHlwZW9mIG51bU1vbnRocyA9PSAnbnVtYmVyJyA/IFsxLCBudW1Nb250aHNdIDogbnVtTW9udGhzKSk7Cgl9LAoKCS8qIERldGVybWluZSB0aGUgY3VycmVudCBtYXhpbXVtIGRhdGUgLSBlbnN1cmUgbm8gdGltZSBjb21wb25lbnRzIGFyZSBzZXQuICovCglfZ2V0TWluTWF4RGF0ZTogZnVuY3Rpb24oaW5zdCwgbWluTWF4KSB7CgkJcmV0dXJuIHRoaXMuX2RldGVybWluZURhdGUoaW5zdCwgdGhpcy5fZ2V0KGluc3QsIG1pbk1heCArICdEYXRlJyksIG51bGwpOwoJfSwKCgkvKiBGaW5kIHRoZSBudW1iZXIgb2YgZGF5cyBpbiBhIGdpdmVuIG1vbnRoLiAqLwoJX2dldERheXNJbk1vbnRoOiBmdW5jdGlvbih5ZWFyLCBtb250aCkgewoJCXJldHVybiAzMiAtIHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKHllYXIsIG1vbnRoLCAzMikpLmdldERhdGUoKTsKCX0sCgoJLyogRmluZCB0aGUgZGF5IG9mIHRoZSB3ZWVrIG9mIHRoZSBmaXJzdCBvZiBhIG1vbnRoLiAqLwoJX2dldEZpcnN0RGF5T2ZNb250aDogZnVuY3Rpb24oeWVhciwgbW9udGgpIHsKCQlyZXR1cm4gbmV3IERhdGUoeWVhciwgbW9udGgsIDEpLmdldERheSgpOwoJfSwKCgkvKiBEZXRlcm1pbmVzIGlmIHdlIHNob3VsZCBhbGxvdyBhICJuZXh0L3ByZXYiIG1vbnRoIGRpc3BsYXkgY2hhbmdlLiAqLwoJX2NhbkFkanVzdE1vbnRoOiBmdW5jdGlvbihpbnN0LCBvZmZzZXQsIGN1clllYXIsIGN1ck1vbnRoKSB7CgkJdmFyIG51bU1vbnRocyA9IHRoaXMuX2dldE51bWJlck9mTW9udGhzKGluc3QpOwoJCXZhciBkYXRlID0gdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoY3VyWWVhciwKCQkJY3VyTW9udGggKyAob2Zmc2V0IDwgMCA/IG9mZnNldCA6IG51bU1vbnRoc1swXSAqIG51bU1vbnRoc1sxXSksIDEpKTsKCQlpZiAob2Zmc2V0IDwgMCkKCQkJZGF0ZS5zZXREYXRlKHRoaXMuX2dldERheXNJbk1vbnRoKGRhdGUuZ2V0RnVsbFllYXIoKSwgZGF0ZS5nZXRNb250aCgpKSk7CgkJcmV0dXJuIHRoaXMuX2lzSW5SYW5nZShpbnN0LCBkYXRlKTsKCX0sCgoJLyogSXMgdGhlIGdpdmVuIGRhdGUgaW4gdGhlIGFjY2VwdGVkIHJhbmdlPyAqLwoJX2lzSW5SYW5nZTogZnVuY3Rpb24oaW5zdCwgZGF0ZSkgewoJCXZhciBtaW5EYXRlID0gdGhpcy5fZ2V0TWluTWF4RGF0ZShpbnN0LCAnbWluJyk7CgkJdmFyIG1heERhdGUgPSB0aGlzLl9nZXRNaW5NYXhEYXRlKGluc3QsICdtYXgnKTsKCQlyZXR1cm4gKCghbWluRGF0ZSB8fCBkYXRlLmdldFRpbWUoKSA+PSBtaW5EYXRlLmdldFRpbWUoKSkgJiYKCQkJKCFtYXhEYXRlIHx8IGRhdGUuZ2V0VGltZSgpIDw9IG1heERhdGUuZ2V0VGltZSgpKSk7Cgl9LAoKCS8qIFByb3ZpZGUgdGhlIGNvbmZpZ3VyYXRpb24gc2V0dGluZ3MgZm9yIGZvcm1hdHRpbmcvcGFyc2luZy4gKi8KCV9nZXRGb3JtYXRDb25maWc6IGZ1bmN0aW9uKGluc3QpIHsKCQl2YXIgc2hvcnRZZWFyQ3V0b2ZmID0gdGhpcy5fZ2V0KGluc3QsICdzaG9ydFllYXJDdXRvZmYnKTsKCQlzaG9ydFllYXJDdXRvZmYgPSAodHlwZW9mIHNob3J0WWVhckN1dG9mZiAhPSAnc3RyaW5nJyA/IHNob3J0WWVhckN1dG9mZiA6CgkJCW5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSAlIDEwMCArIHBhcnNlSW50KHNob3J0WWVhckN1dG9mZiwgMTApKTsKCQlyZXR1cm4ge3Nob3J0WWVhckN1dG9mZjogc2hvcnRZZWFyQ3V0b2ZmLAoJCQlkYXlOYW1lc1Nob3J0OiB0aGlzLl9nZXQoaW5zdCwgJ2RheU5hbWVzU2hvcnQnKSwgZGF5TmFtZXM6IHRoaXMuX2dldChpbnN0LCAnZGF5TmFtZXMnKSwKCQkJbW9udGhOYW1lc1Nob3J0OiB0aGlzLl9nZXQoaW5zdCwgJ21vbnRoTmFtZXNTaG9ydCcpLCBtb250aE5hbWVzOiB0aGlzLl9nZXQoaW5zdCwgJ21vbnRoTmFtZXMnKX07Cgl9LAoKCS8qIEZvcm1hdCB0aGUgZ2l2ZW4gZGF0ZSBmb3IgZGlzcGxheS4gKi8KCV9mb3JtYXREYXRlOiBmdW5jdGlvbihpbnN0LCBkYXksIG1vbnRoLCB5ZWFyKSB7CgkJaWYgKCFkYXkpIHsKCQkJaW5zdC5jdXJyZW50RGF5ID0gaW5zdC5zZWxlY3RlZERheTsKCQkJaW5zdC5jdXJyZW50TW9udGggPSBpbnN0LnNlbGVjdGVkTW9udGg7CgkJCWluc3QuY3VycmVudFllYXIgPSBpbnN0LnNlbGVjdGVkWWVhcjsKCQl9CgkJdmFyIGRhdGUgPSAoZGF5ID8gKHR5cGVvZiBkYXkgPT0gJ29iamVjdCcgPyBkYXkgOgoJCQl0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5KSkpIDoKCQkJdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoaW5zdC5jdXJyZW50WWVhciwgaW5zdC5jdXJyZW50TW9udGgsIGluc3QuY3VycmVudERheSkpKTsKCQlyZXR1cm4gdGhpcy5mb3JtYXREYXRlKHRoaXMuX2dldChpbnN0LCAnZGF0ZUZvcm1hdCcpLCBkYXRlLCB0aGlzLl9nZXRGb3JtYXRDb25maWcoaW5zdCkpOwoJfQp9KTsKCi8qCiAqIEJpbmQgaG92ZXIgZXZlbnRzIGZvciBkYXRlcGlja2VyIGVsZW1lbnRzLgogKiBEb25lIHZpYSBkZWxlZ2F0ZSBzbyB0aGUgYmluZGluZyBvbmx5IG9jY3VycyBvbmNlIGluIHRoZSBsaWZldGltZSBvZiB0aGUgcGFyZW50IGRpdi4KICogR2xvYmFsIGluc3RBY3RpdmUsIHNldCBieSBfdXBkYXRlRGF0ZXBpY2tlciBhbGxvd3MgdGhlIGhhbmRsZXJzIHRvIGZpbmQgdGhlaXIgd2F5IGJhY2sgdG8gdGhlIGFjdGl2ZSBwaWNrZXIuCiAqLwpmdW5jdGlvbiBiaW5kSG92ZXIoZHBEaXYpIHsKCXZhciBzZWxlY3RvciA9ICdidXR0b24sIC51aS1kYXRlcGlja2VyLXByZXYsIC51aS1kYXRlcGlja2VyLW5leHQsIC51aS1kYXRlcGlja2VyLWNhbGVuZGFyIHRkIGEnOwoJcmV0dXJuIGRwRGl2LmRlbGVnYXRlKHNlbGVjdG9yLCAnbW91c2VvdXQnLCBmdW5jdGlvbigpIHsKCQkJJCh0aGlzKS5yZW1vdmVDbGFzcygndWktc3RhdGUtaG92ZXInKTsKCQkJaWYgKHRoaXMuY2xhc3NOYW1lLmluZGV4T2YoJ3VpLWRhdGVwaWNrZXItcHJldicpICE9IC0xKSAkKHRoaXMpLnJlbW92ZUNsYXNzKCd1aS1kYXRlcGlja2VyLXByZXYtaG92ZXInKTsKCQkJaWYgKHRoaXMuY2xhc3NOYW1lLmluZGV4T2YoJ3VpLWRhdGVwaWNrZXItbmV4dCcpICE9IC0xKSAkKHRoaXMpLnJlbW92ZUNsYXNzKCd1aS1kYXRlcGlja2VyLW5leHQtaG92ZXInKTsKCQl9KQoJCS5kZWxlZ2F0ZShzZWxlY3RvciwgJ21vdXNlb3ZlcicsIGZ1bmN0aW9uKCl7CgkJCWlmICghJC5kYXRlcGlja2VyLl9pc0Rpc2FibGVkRGF0ZXBpY2tlciggaW5zdEFjdGl2ZS5pbmxpbmUgPyBkcERpdi5wYXJlbnQoKVswXSA6IGluc3RBY3RpdmUuaW5wdXRbMF0pKSB7CgkJCQkkKHRoaXMpLnBhcmVudHMoJy51aS1kYXRlcGlja2VyLWNhbGVuZGFyJykuZmluZCgnYScpLnJlbW92ZUNsYXNzKCd1aS1zdGF0ZS1ob3ZlcicpOwoJCQkJJCh0aGlzKS5hZGRDbGFzcygndWktc3RhdGUtaG92ZXInKTsKCQkJCWlmICh0aGlzLmNsYXNzTmFtZS5pbmRleE9mKCd1aS1kYXRlcGlja2VyLXByZXYnKSAhPSAtMSkgJCh0aGlzKS5hZGRDbGFzcygndWktZGF0ZXBpY2tlci1wcmV2LWhvdmVyJyk7CgkJCQlpZiAodGhpcy5jbGFzc05hbWUuaW5kZXhPZigndWktZGF0ZXBpY2tlci1uZXh0JykgIT0gLTEpICQodGhpcykuYWRkQ2xhc3MoJ3VpLWRhdGVwaWNrZXItbmV4dC1ob3ZlcicpOwoJCQl9CgkJfSk7Cn0KCi8qIGpRdWVyeSBleHRlbmQgbm93IGlnbm9yZXMgbnVsbHMhICovCmZ1bmN0aW9uIGV4dGVuZFJlbW92ZSh0YXJnZXQsIHByb3BzKSB7CgkkLmV4dGVuZCh0YXJnZXQsIHByb3BzKTsKCWZvciAodmFyIG5hbWUgaW4gcHJvcHMpCgkJaWYgKHByb3BzW25hbWVdID09IG51bGwgfHwgcHJvcHNbbmFtZV0gPT0gdW5kZWZpbmVkKQoJCQl0YXJnZXRbbmFtZV0gPSBwcm9wc1tuYW1lXTsKCXJldHVybiB0YXJnZXQ7Cn07CgovKiBJbnZva2UgdGhlIGRhdGVwaWNrZXIgZnVuY3Rpb25hbGl0eS4KICAgQHBhcmFtICBvcHRpb25zICBzdHJpbmcgLSBhIGNvbW1hbmQsIG9wdGlvbmFsbHkgZm9sbG93ZWQgYnkgYWRkaXRpb25hbCBwYXJhbWV0ZXJzIG9yCgkgICAgICAgICAgICAgICAgT2JqZWN0IC0gc2V0dGluZ3MgZm9yIGF0dGFjaGluZyBuZXcgZGF0ZXBpY2tlciBmdW5jdGlvbmFsaXR5CiAgIEByZXR1cm4gIGpRdWVyeSBvYmplY3QgKi8KJC5mbi5kYXRlcGlja2VyID0gZnVuY3Rpb24ob3B0aW9ucyl7CgoJLyogVmVyaWZ5IGFuIGVtcHR5IGNvbGxlY3Rpb24gd2Fzbid0IHBhc3NlZCAtIEZpeGVzICM2OTc2ICovCglpZiAoICF0aGlzLmxlbmd0aCApIHsKCQlyZXR1cm4gdGhpczsKCX0KCgkvKiBJbml0aWFsaXNlIHRoZSBkYXRlIHBpY2tlci4gKi8KCWlmICghJC5kYXRlcGlja2VyLmluaXRpYWxpemVkKSB7CgkJJChkb2N1bWVudCkubW91c2Vkb3duKCQuZGF0ZXBpY2tlci5fY2hlY2tFeHRlcm5hbENsaWNrKS4KCQkJZmluZChkb2N1bWVudC5ib2R5KS5hcHBlbmQoJC5kYXRlcGlja2VyLmRwRGl2KTsKCQkkLmRhdGVwaWNrZXIuaW5pdGlhbGl6ZWQgPSB0cnVlOwoJfQoKCXZhciBvdGhlckFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOwoJaWYgKHR5cGVvZiBvcHRpb25zID09ICdzdHJpbmcnICYmIChvcHRpb25zID09ICdpc0Rpc2FibGVkJyB8fCBvcHRpb25zID09ICdnZXREYXRlJyB8fCBvcHRpb25zID09ICd3aWRnZXQnKSkKCQlyZXR1cm4gJC5kYXRlcGlja2VyWydfJyArIG9wdGlvbnMgKyAnRGF0ZXBpY2tlciddLgoJCQlhcHBseSgkLmRhdGVwaWNrZXIsIFt0aGlzWzBdXS5jb25jYXQob3RoZXJBcmdzKSk7CglpZiAob3B0aW9ucyA9PSAnb3B0aW9uJyAmJiBhcmd1bWVudHMubGVuZ3RoID09IDIgJiYgdHlwZW9mIGFyZ3VtZW50c1sxXSA9PSAnc3RyaW5nJykKCQlyZXR1cm4gJC5kYXRlcGlja2VyWydfJyArIG9wdGlvbnMgKyAnRGF0ZXBpY2tlciddLgoJCQlhcHBseSgkLmRhdGVwaWNrZXIsIFt0aGlzWzBdXS5jb25jYXQob3RoZXJBcmdzKSk7CglyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkgewoJCXR5cGVvZiBvcHRpb25zID09ICdzdHJpbmcnID8KCQkJJC5kYXRlcGlja2VyWydfJyArIG9wdGlvbnMgKyAnRGF0ZXBpY2tlciddLgoJCQkJYXBwbHkoJC5kYXRlcGlja2VyLCBbdGhpc10uY29uY2F0KG90aGVyQXJncykpIDoKCQkJJC5kYXRlcGlja2VyLl9hdHRhY2hEYXRlcGlja2VyKHRoaXMsIG9wdGlvbnMpOwoJfSk7Cn07CgokLmRhdGVwaWNrZXIgPSBuZXcgRGF0ZXBpY2tlcigpOyAvLyBzaW5nbGV0b24gaW5zdGFuY2UKJC5kYXRlcGlja2VyLmluaXRpYWxpemVkID0gZmFsc2U7CiQuZGF0ZXBpY2tlci51dWlkID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiQuZGF0ZXBpY2tlci52ZXJzaW9uID0gIjEuOS4yIjsKCi8vIFdvcmthcm91bmQgZm9yICM0MDU1Ci8vIEFkZCBhbm90aGVyIGdsb2JhbCB0byBhdm9pZCBub0NvbmZsaWN0IGlzc3VlcyB3aXRoIGlubGluZSBldmVudCBoYW5kbGVycwp3aW5kb3dbJ0RQX2pRdWVyeV8nICsgZHB1dWlkXSA9ICQ7Cgp9KShqUXVlcnkpOwooZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHsKCnZhciB1aURpYWxvZ0NsYXNzZXMgPSAidWktZGlhbG9nIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYWxsICIsCglzaXplUmVsYXRlZE9wdGlvbnMgPSB7CgkJYnV0dG9uczogdHJ1ZSwKCQloZWlnaHQ6IHRydWUsCgkJbWF4SGVpZ2h0OiB0cnVlLAoJCW1heFdpZHRoOiB0cnVlLAoJCW1pbkhlaWdodDogdHJ1ZSwKCQltaW5XaWR0aDogdHJ1ZSwKCQl3aWR0aDogdHJ1ZQoJfSwKCXJlc2l6YWJsZVJlbGF0ZWRPcHRpb25zID0gewoJCW1heEhlaWdodDogdHJ1ZSwKCQltYXhXaWR0aDogdHJ1ZSwKCQltaW5IZWlnaHQ6IHRydWUsCgkJbWluV2lkdGg6IHRydWUKCX07CgokLndpZGdldCgidWkuZGlhbG9nIiwgewoJdmVyc2lvbjogIjEuOS4yIiwKCW9wdGlvbnM6IHsKCQlhdXRvT3BlbjogdHJ1ZSwKCQlidXR0b25zOiB7fSwKCQljbG9zZU9uRXNjYXBlOiB0cnVlLAoJCWNsb3NlVGV4dDogImNsb3NlIiwKCQlkaWFsb2dDbGFzczogIiIsCgkJZHJhZ2dhYmxlOiB0cnVlLAoJCWhpZGU6IG51bGwsCgkJaGVpZ2h0OiAiYXV0byIsCgkJbWF4SGVpZ2h0OiBmYWxzZSwKCQltYXhXaWR0aDogZmFsc2UsCgkJbWluSGVpZ2h0OiAxNTAsCgkJbWluV2lkdGg6IDE1MCwKCQltb2RhbDogZmFsc2UsCgkJcG9zaXRpb246IHsKCQkJbXk6ICJjZW50ZXIiLAoJCQlhdDogImNlbnRlciIsCgkJCW9mOiB3aW5kb3csCgkJCWNvbGxpc2lvbjogImZpdCIsCgkJCS8vIGVuc3VyZSB0aGF0IHRoZSB0aXRsZWJhciBpcyBuZXZlciBvdXRzaWRlIHRoZSBkb2N1bWVudAoJCQl1c2luZzogZnVuY3Rpb24oIHBvcyApIHsKCQkJCXZhciB0b3BPZmZzZXQgPSAkKCB0aGlzICkuY3NzKCBwb3MgKS5vZmZzZXQoKS50b3A7CgkJCQlpZiAoIHRvcE9mZnNldCA8IDAgKSB7CgkJCQkJJCggdGhpcyApLmNzcyggInRvcCIsIHBvcy50b3AgLSB0b3BPZmZzZXQgKTsKCQkJCX0KCQkJfQoJCX0sCgkJcmVzaXphYmxlOiB0cnVlLAoJCXNob3c6IG51bGwsCgkJc3RhY2s6IHRydWUsCgkJdGl0bGU6ICIiLAoJCXdpZHRoOiAzMDAsCgkJekluZGV4OiAxMDAwCgl9LAoKCV9jcmVhdGU6IGZ1bmN0aW9uKCkgewoJCXRoaXMub3JpZ2luYWxUaXRsZSA9IHRoaXMuZWxlbWVudC5hdHRyKCAidGl0bGUiICk7CgkJLy8gIzU3NDIgLSAuYXR0cigpIG1pZ2h0IHJldHVybiBhIERPTUVsZW1lbnQKCQlpZiAoIHR5cGVvZiB0aGlzLm9yaWdpbmFsVGl0bGUgIT09ICJzdHJpbmciICkgewoJCQl0aGlzLm9yaWdpbmFsVGl0bGUgPSAiIjsKCQl9CgkJdGhpcy5vbGRQb3NpdGlvbiA9IHsKCQkJcGFyZW50OiB0aGlzLmVsZW1lbnQucGFyZW50KCksCgkJCWluZGV4OiB0aGlzLmVsZW1lbnQucGFyZW50KCkuY2hpbGRyZW4oKS5pbmRleCggdGhpcy5lbGVtZW50ICkKCQl9OwoJCXRoaXMub3B0aW9ucy50aXRsZSA9IHRoaXMub3B0aW9ucy50aXRsZSB8fCB0aGlzLm9yaWdpbmFsVGl0bGU7CgkJdmFyIHRoYXQgPSB0aGlzLAoJCQlvcHRpb25zID0gdGhpcy5vcHRpb25zLAoKCQkJdGl0bGUgPSBvcHRpb25zLnRpdGxlIHx8ICImIzE2MDsiLAoJCQl1aURpYWxvZywKCQkJdWlEaWFsb2dUaXRsZWJhciwKCQkJdWlEaWFsb2dUaXRsZWJhckNsb3NlLAoJCQl1aURpYWxvZ1RpdGxlLAoJCQl1aURpYWxvZ0J1dHRvblBhbmU7CgoJCQl1aURpYWxvZyA9ICggdGhpcy51aURpYWxvZyA9ICQoICI8ZGl2PiIgKSApCgkJCQkuYWRkQ2xhc3MoIHVpRGlhbG9nQ2xhc3NlcyArIG9wdGlvbnMuZGlhbG9nQ2xhc3MgKQoJCQkJLmNzcyh7CgkJCQkJZGlzcGxheTogIm5vbmUiLAoJCQkJCW91dGxpbmU6IDAsIC8vIFRPRE86IG1vdmUgdG8gc3R5bGVzaGVldAoJCQkJCXpJbmRleDogb3B0aW9ucy56SW5kZXgKCQkJCX0pCgkJCQkvLyBzZXR0aW5nIHRhYkluZGV4IG1ha2VzIHRoZSBkaXYgZm9jdXNhYmxlCgkJCQkuYXR0ciggInRhYkluZGV4IiwgLTEpCgkJCQkua2V5ZG93bihmdW5jdGlvbiggZXZlbnQgKSB7CgkJCQkJaWYgKCBvcHRpb25zLmNsb3NlT25Fc2NhcGUgJiYgIWV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICYmIGV2ZW50LmtleUNvZGUgJiYKCQkJCQkJCWV2ZW50LmtleUNvZGUgPT09ICQudWkua2V5Q29kZS5FU0NBUEUgKSB7CgkJCQkJCXRoYXQuY2xvc2UoIGV2ZW50ICk7CgkJCQkJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgkJCQkJfQoJCQkJfSkKCQkJCS5tb3VzZWRvd24oZnVuY3Rpb24oIGV2ZW50ICkgewoJCQkJCXRoYXQubW92ZVRvVG9wKCBmYWxzZSwgZXZlbnQgKTsKCQkJCX0pCgkJCQkuYXBwZW5kVG8oICJib2R5IiApOwoKCQkJdGhpcy5lbGVtZW50CgkJCQkuc2hvdygpCgkJCQkucmVtb3ZlQXR0ciggInRpdGxlIiApCgkJCQkuYWRkQ2xhc3MoICJ1aS1kaWFsb2ctY29udGVudCB1aS13aWRnZXQtY29udGVudCIgKQoJCQkJLmFwcGVuZFRvKCB1aURpYWxvZyApOwoKCQkJdWlEaWFsb2dUaXRsZWJhciA9ICggdGhpcy51aURpYWxvZ1RpdGxlYmFyID0gJCggIjxkaXY+IiApICkKCQkJCS5hZGRDbGFzcyggInVpLWRpYWxvZy10aXRsZWJhciAgdWktd2lkZ2V0LWhlYWRlciAgIiArCgkJCQkJInVpLWNvcm5lci1hbGwgIHVpLWhlbHBlci1jbGVhcmZpeCIgKQoJCQkJLmJpbmQoICJtb3VzZWRvd24iLCBmdW5jdGlvbigpIHsKCQkJCQkvLyBEaWFsb2cgaXNuJ3QgZ2V0dGluZyBmb2N1cyB3aGVuIGRyYWdnaW5nICgjODA2MykKCQkJCQl1aURpYWxvZy5mb2N1cygpOwoJCQkJfSkKCQkJCS5wcmVwZW5kVG8oIHVpRGlhbG9nICk7CgoJCQl1aURpYWxvZ1RpdGxlYmFyQ2xvc2UgPSAkKCAiPGEgaHJlZj0nIyc+PC9hPiIgKQoJCQkJLmFkZENsYXNzKCAidWktZGlhbG9nLXRpdGxlYmFyLWNsb3NlICB1aS1jb3JuZXItYWxsIiApCgkJCQkuYXR0ciggInJvbGUiLCAiYnV0dG9uIiApCgkJCQkuY2xpY2soZnVuY3Rpb24oIGV2ZW50ICkgewoJCQkJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgkJCQkJdGhhdC5jbG9zZSggZXZlbnQgKTsKCQkJCX0pCgkJCQkuYXBwZW5kVG8oIHVpRGlhbG9nVGl0bGViYXIgKTsKCgkJCSggdGhpcy51aURpYWxvZ1RpdGxlYmFyQ2xvc2VUZXh0ID0gJCggIjxzcGFuPiIgKSApCgkJCQkuYWRkQ2xhc3MoICJ1aS1pY29uIHVpLWljb24tY2xvc2V0aGljayIgKQoJCQkJLnRleHQoIG9wdGlvbnMuY2xvc2VUZXh0ICkKCQkJCS5hcHBlbmRUbyggdWlEaWFsb2dUaXRsZWJhckNsb3NlICk7CgoJCQl1aURpYWxvZ1RpdGxlID0gJCggIjxzcGFuPiIgKQoJCQkJLnVuaXF1ZUlkKCkKCQkJCS5hZGRDbGFzcyggInVpLWRpYWxvZy10aXRsZSIgKQoJCQkJLmh0bWwoIHRpdGxlICkKCQkJCS5wcmVwZW5kVG8oIHVpRGlhbG9nVGl0bGViYXIgKTsKCgkJCXVpRGlhbG9nQnV0dG9uUGFuZSA9ICggdGhpcy51aURpYWxvZ0J1dHRvblBhbmUgPSAkKCAiPGRpdj4iICkgKQoJCQkJLmFkZENsYXNzKCAidWktZGlhbG9nLWJ1dHRvbnBhbmUgdWktd2lkZ2V0LWNvbnRlbnQgdWktaGVscGVyLWNsZWFyZml4IiApOwoKCQkJKCB0aGlzLnVpQnV0dG9uU2V0ID0gJCggIjxkaXY+IiApICkKCQkJCS5hZGRDbGFzcyggInVpLWRpYWxvZy1idXR0b25zZXQiICkKCQkJCS5hcHBlbmRUbyggdWlEaWFsb2dCdXR0b25QYW5lICk7CgoJCXVpRGlhbG9nLmF0dHIoewoJCQlyb2xlOiAiZGlhbG9nIiwKCQkJImFyaWEtbGFiZWxsZWRieSI6IHVpRGlhbG9nVGl0bGUuYXR0ciggImlkIiApCgkJfSk7CgoJCXVpRGlhbG9nVGl0bGViYXIuZmluZCggIioiICkuYWRkKCB1aURpYWxvZ1RpdGxlYmFyICkuZGlzYWJsZVNlbGVjdGlvbigpOwoJCXRoaXMuX2hvdmVyYWJsZSggdWlEaWFsb2dUaXRsZWJhckNsb3NlICk7CgkJdGhpcy5fZm9jdXNhYmxlKCB1aURpYWxvZ1RpdGxlYmFyQ2xvc2UgKTsKCgkJaWYgKCBvcHRpb25zLmRyYWdnYWJsZSAmJiAkLmZuLmRyYWdnYWJsZSApIHsKCQkJdGhpcy5fbWFrZURyYWdnYWJsZSgpOwoJCX0KCQlpZiAoIG9wdGlvbnMucmVzaXphYmxlICYmICQuZm4ucmVzaXphYmxlICkgewoJCQl0aGlzLl9tYWtlUmVzaXphYmxlKCk7CgkJfQoKCQl0aGlzLl9jcmVhdGVCdXR0b25zKCBvcHRpb25zLmJ1dHRvbnMgKTsKCQl0aGlzLl9pc09wZW4gPSBmYWxzZTsKCgkJaWYgKCAkLmZuLmJnaWZyYW1lICkgewoJCQl1aURpYWxvZy5iZ2lmcmFtZSgpOwoJCX0KCgkJLy8gcHJldmVudCB0YWJiaW5nIG91dCBvZiBtb2RhbCBkaWFsb2dzCgkJdGhpcy5fb24oIHVpRGlhbG9nLCB7IGtleWRvd246IGZ1bmN0aW9uKCBldmVudCApIHsKCQkJaWYgKCAhb3B0aW9ucy5tb2RhbCB8fCBldmVudC5rZXlDb2RlICE9PSAkLnVpLmtleUNvZGUuVEFCICkgewoJCQkJcmV0dXJuOwoJCQl9CgoJCQl2YXIgdGFiYmFibGVzID0gJCggIjp0YWJiYWJsZSIsIHVpRGlhbG9nICksCgkJCQlmaXJzdCA9IHRhYmJhYmxlcy5maWx0ZXIoICI6Zmlyc3QiICksCgkJCQlsYXN0ICA9IHRhYmJhYmxlcy5maWx0ZXIoICI6bGFzdCIgKTsKCgkJCWlmICggZXZlbnQudGFyZ2V0ID09PSBsYXN0WzBdICYmICFldmVudC5zaGlmdEtleSApIHsKCQkJCWZpcnN0LmZvY3VzKCAxICk7CgkJCQlyZXR1cm4gZmFsc2U7CgkJCX0gZWxzZSBpZiAoIGV2ZW50LnRhcmdldCA9PT0gZmlyc3RbMF0gJiYgZXZlbnQuc2hpZnRLZXkgKSB7CgkJCQlsYXN0LmZvY3VzKCAxICk7CgkJCQlyZXR1cm4gZmFsc2U7CgkJCX0KCQl9fSk7Cgl9LAoKCV9pbml0OiBmdW5jdGlvbigpIHsKCQlpZiAoIHRoaXMub3B0aW9ucy5hdXRvT3BlbiApIHsKCQkJdGhpcy5vcGVuKCk7CgkJfQoJfSwKCglfZGVzdHJveTogZnVuY3Rpb24oKSB7CgkJdmFyIG5leHQsCgkJCW9sZFBvc2l0aW9uID0gdGhpcy5vbGRQb3NpdGlvbjsKCgkJaWYgKCB0aGlzLm92ZXJsYXkgKSB7CgkJCXRoaXMub3ZlcmxheS5kZXN0cm95KCk7CgkJfQoJCXRoaXMudWlEaWFsb2cuaGlkZSgpOwoJCXRoaXMuZWxlbWVudAoJCQkucmVtb3ZlQ2xhc3MoICJ1aS1kaWFsb2ctY29udGVudCB1aS13aWRnZXQtY29udGVudCIgKQoJCQkuaGlkZSgpCgkJCS5hcHBlbmRUbyggImJvZHkiICk7CgkJdGhpcy51aURpYWxvZy5yZW1vdmUoKTsKCgkJaWYgKCB0aGlzLm9yaWdpbmFsVGl0bGUgKSB7CgkJCXRoaXMuZWxlbWVudC5hdHRyKCAidGl0bGUiLCB0aGlzLm9yaWdpbmFsVGl0bGUgKTsKCQl9CgoJCW5leHQgPSBvbGRQb3NpdGlvbi5wYXJlbnQuY2hpbGRyZW4oKS5lcSggb2xkUG9zaXRpb24uaW5kZXggKTsKCQkvLyBEb24ndCB0cnkgdG8gcGxhY2UgdGhlIGRpYWxvZyBuZXh0IHRvIGl0c2VsZiAoIzg2MTMpCgkJaWYgKCBuZXh0Lmxlbmd0aCAmJiBuZXh0WyAwIF0gIT09IHRoaXMuZWxlbWVudFsgMCBdICkgewoJCQluZXh0LmJlZm9yZSggdGhpcy5lbGVtZW50ICk7CgkJfSBlbHNlIHsKCQkJb2xkUG9zaXRpb24ucGFyZW50LmFwcGVuZCggdGhpcy5lbGVtZW50ICk7CgkJfQoJfSwKCgl3aWRnZXQ6IGZ1bmN0aW9uKCkgewoJCXJldHVybiB0aGlzLnVpRGlhbG9nOwoJfSwKCgljbG9zZTogZnVuY3Rpb24oIGV2ZW50ICkgewoJCXZhciB0aGF0ID0gdGhpcywKCQkJbWF4WiwgdGhpc1o7CgoJCWlmICggIXRoaXMuX2lzT3BlbiApIHsKCQkJcmV0dXJuOwoJCX0KCgkJaWYgKCBmYWxzZSA9PT0gdGhpcy5fdHJpZ2dlciggImJlZm9yZUNsb3NlIiwgZXZlbnQgKSApIHsKCQkJcmV0dXJuOwoJCX0KCgkJdGhpcy5faXNPcGVuID0gZmFsc2U7CgoJCWlmICggdGhpcy5vdmVybGF5ICkgewoJCQl0aGlzLm92ZXJsYXkuZGVzdHJveSgpOwoJCX0KCgkJaWYgKCB0aGlzLm9wdGlvbnMuaGlkZSApIHsKCQkJdGhpcy5faGlkZSggdGhpcy51aURpYWxvZywgdGhpcy5vcHRpb25zLmhpZGUsIGZ1bmN0aW9uKCkgewoJCQkJdGhhdC5fdHJpZ2dlciggImNsb3NlIiwgZXZlbnQgKTsKCQkJfSk7CgkJfSBlbHNlIHsKCQkJdGhpcy51aURpYWxvZy5oaWRlKCk7CgkJCXRoaXMuX3RyaWdnZXIoICJjbG9zZSIsIGV2ZW50ICk7CgkJfQoKCQkkLnVpLmRpYWxvZy5vdmVybGF5LnJlc2l6ZSgpOwoKCQkvLyBhZGp1c3QgdGhlIG1heFogdG8gYWxsb3cgb3RoZXIgbW9kYWwgZGlhbG9ncyB0byBjb250aW51ZSB0byB3b3JrIChzZWUgIzQzMDkpCgkJaWYgKCB0aGlzLm9wdGlvbnMubW9kYWwgKSB7CgkJCW1heFogPSAwOwoJCQkkKCAiLnVpLWRpYWxvZyIgKS5lYWNoKGZ1bmN0aW9uKCkgewoJCQkJaWYgKCB0aGlzICE9PSB0aGF0LnVpRGlhbG9nWzBdICkgewoJCQkJCXRoaXNaID0gJCggdGhpcyApLmNzcyggInotaW5kZXgiICk7CgkJCQkJaWYgKCAhaXNOYU4oIHRoaXNaICkgKSB7CgkJCQkJCW1heFogPSBNYXRoLm1heCggbWF4WiwgdGhpc1ogKTsKCQkJCQl9CgkJCQl9CgkJCX0pOwoJCQkkLnVpLmRpYWxvZy5tYXhaID0gbWF4WjsKCQl9CgoJCXJldHVybiB0aGlzOwoJfSwKCglpc09wZW46IGZ1bmN0aW9uKCkgewoJCXJldHVybiB0aGlzLl9pc09wZW47Cgl9LAoKCS8vIHRoZSBmb3JjZSBwYXJhbWV0ZXIgYWxsb3dzIHVzIHRvIG1vdmUgbW9kYWwgZGlhbG9ncyB0byB0aGVpciBjb3JyZWN0CgkvLyBwb3NpdGlvbiBvbiBvcGVuCgltb3ZlVG9Ub3A6IGZ1bmN0aW9uKCBmb3JjZSwgZXZlbnQgKSB7CgkJdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsCgkJCXNhdmVTY3JvbGw7CgoJCWlmICggKCBvcHRpb25zLm1vZGFsICYmICFmb3JjZSApIHx8CgkJCQkoICFvcHRpb25zLnN0YWNrICYmICFvcHRpb25zLm1vZGFsICkgKSB7CgkJCXJldHVybiB0aGlzLl90cmlnZ2VyKCAiZm9jdXMiLCBldmVudCApOwoJCX0KCgkJaWYgKCBvcHRpb25zLnpJbmRleCA+ICQudWkuZGlhbG9nLm1heFogKSB7CgkJCSQudWkuZGlhbG9nLm1heFogPSBvcHRpb25zLnpJbmRleDsKCQl9CgkJaWYgKCB0aGlzLm92ZXJsYXkgKSB7CgkJCSQudWkuZGlhbG9nLm1heFogKz0gMTsKCQkJJC51aS5kaWFsb2cub3ZlcmxheS5tYXhaID0gJC51aS5kaWFsb2cubWF4WjsKCQkJdGhpcy5vdmVybGF5LiRlbC5jc3MoICJ6LWluZGV4IiwgJC51aS5kaWFsb2cub3ZlcmxheS5tYXhaICk7CgkJfQoKCQkvLyBTYXZlIGFuZCB0aGVuIHJlc3RvcmUgc2Nyb2xsCgkJLy8gT3BlcmEgOS41KyByZXNldHMgd2hlbiBwYXJlbnQgei1pbmRleCBpcyBjaGFuZ2VkLgoJCS8vIGh0dHA6Ly9idWdzLmpxdWVyeXVpLmNvbS90aWNrZXQvMzE5MwoJCXNhdmVTY3JvbGwgPSB7CgkJCXNjcm9sbFRvcDogdGhpcy5lbGVtZW50LnNjcm9sbFRvcCgpLAoJCQlzY3JvbGxMZWZ0OiB0aGlzLmVsZW1lbnQuc2Nyb2xsTGVmdCgpCgkJfTsKCQkkLnVpLmRpYWxvZy5tYXhaICs9IDE7CgkJdGhpcy51aURpYWxvZy5jc3MoICJ6LWluZGV4IiwgJC51aS5kaWFsb2cubWF4WiApOwoJCXRoaXMuZWxlbWVudC5hdHRyKCBzYXZlU2Nyb2xsICk7CgkJdGhpcy5fdHJpZ2dlciggImZvY3VzIiwgZXZlbnQgKTsKCgkJcmV0dXJuIHRoaXM7Cgl9LAoKCW9wZW46IGZ1bmN0aW9uKCkgewoJCWlmICggdGhpcy5faXNPcGVuICkgewoJCQlyZXR1cm47CgkJfQoKCQl2YXIgaGFzRm9jdXMsCgkJCW9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsCgkJCXVpRGlhbG9nID0gdGhpcy51aURpYWxvZzsKCgkJdGhpcy5fc2l6ZSgpOwoJCXRoaXMuX3Bvc2l0aW9uKCBvcHRpb25zLnBvc2l0aW9uICk7CgkJdWlEaWFsb2cuc2hvdyggb3B0aW9ucy5zaG93ICk7CgkJdGhpcy5vdmVybGF5ID0gb3B0aW9ucy5tb2RhbCA/IG5ldyAkLnVpLmRpYWxvZy5vdmVybGF5KCB0aGlzICkgOiBudWxsOwoJCXRoaXMubW92ZVRvVG9wKCB0cnVlICk7CgoJCS8vIHNldCBmb2N1cyB0byB0aGUgZmlyc3QgdGFiYmFibGUgZWxlbWVudCBpbiB0aGUgY29udGVudCBhcmVhIG9yIHRoZSBmaXJzdCBidXR0b24KCQkvLyBpZiB0aGVyZSBhcmUgbm8gdGFiYmFibGUgZWxlbWVudHMsIHNldCBmb2N1cyBvbiB0aGUgZGlhbG9nIGl0c2VsZgoJCWhhc0ZvY3VzID0gdGhpcy5lbGVtZW50LmZpbmQoICI6dGFiYmFibGUiICk7CgkJaWYgKCAhaGFzRm9jdXMubGVuZ3RoICkgewoJCQloYXNGb2N1cyA9IHRoaXMudWlEaWFsb2dCdXR0b25QYW5lLmZpbmQoICI6dGFiYmFibGUiICk7CgkJCWlmICggIWhhc0ZvY3VzLmxlbmd0aCApIHsKCQkJCWhhc0ZvY3VzID0gdWlEaWFsb2c7CgkJCX0KCQl9CgkJaGFzRm9jdXMuZXEoIDAgKS5mb2N1cygpOwoKCQl0aGlzLl9pc09wZW4gPSB0cnVlOwoJCXRoaXMuX3RyaWdnZXIoICJvcGVuIiApOwoKCQlyZXR1cm4gdGhpczsKCX0sCgoJX2NyZWF0ZUJ1dHRvbnM6IGZ1bmN0aW9uKCBidXR0b25zICkgewoJCXZhciB0aGF0ID0gdGhpcywKCQkJaGFzQnV0dG9ucyA9IGZhbHNlOwoKCQkvLyBpZiB3ZSBhbHJlYWR5IGhhdmUgYSBidXR0b24gcGFuZSwgcmVtb3ZlIGl0CgkJdGhpcy51aURpYWxvZ0J1dHRvblBhbmUucmVtb3ZlKCk7CgkJdGhpcy51aUJ1dHRvblNldC5lbXB0eSgpOwoKCQlpZiAoIHR5cGVvZiBidXR0b25zID09PSAib2JqZWN0IiAmJiBidXR0b25zICE9PSBudWxsICkgewoJCQkkLmVhY2goIGJ1dHRvbnMsIGZ1bmN0aW9uKCkgewoJCQkJcmV0dXJuICEoaGFzQnV0dG9ucyA9IHRydWUpOwoJCQl9KTsKCQl9CgkJaWYgKCBoYXNCdXR0b25zICkgewoJCQkkLmVhY2goIGJ1dHRvbnMsIGZ1bmN0aW9uKCBuYW1lLCBwcm9wcyApIHsKCQkJCXZhciBidXR0b24sIGNsaWNrOwoJCQkJcHJvcHMgPSAkLmlzRnVuY3Rpb24oIHByb3BzICkgPwoJCQkJCXsgY2xpY2s6IHByb3BzLCB0ZXh0OiBuYW1lIH0gOgoJCQkJCXByb3BzOwoJCQkJLy8gRGVmYXVsdCB0byBhIG5vbi1zdWJtaXR0aW5nIGJ1dHRvbgoJCQkJcHJvcHMgPSAkLmV4dGVuZCggeyB0eXBlOiAiYnV0dG9uIiB9LCBwcm9wcyApOwoJCQkJLy8gQ2hhbmdlIHRoZSBjb250ZXh0IGZvciB0aGUgY2xpY2sgY2FsbGJhY2sgdG8gYmUgdGhlIG1haW4gZWxlbWVudAoJCQkJY2xpY2sgPSBwcm9wcy5jbGljazsKCQkJCXByb3BzLmNsaWNrID0gZnVuY3Rpb24oKSB7CgkJCQkJY2xpY2suYXBwbHkoIHRoYXQuZWxlbWVudFswXSwgYXJndW1lbnRzICk7CgkJCQl9OwoJCQkJYnV0dG9uID0gJCggIjxidXR0b24+PC9idXR0b24+IiwgcHJvcHMgKQoJCQkJCS5hcHBlbmRUbyggdGhhdC51aUJ1dHRvblNldCApOwoJCQkJaWYgKCAkLmZuLmJ1dHRvbiApIHsKCQkJCQlidXR0b24uYnV0dG9uKCk7CgkJCQl9CgkJCX0pOwoJCQl0aGlzLnVpRGlhbG9nLmFkZENsYXNzKCAidWktZGlhbG9nLWJ1dHRvbnMiICk7CgkJCXRoaXMudWlEaWFsb2dCdXR0b25QYW5lLmFwcGVuZFRvKCB0aGlzLnVpRGlhbG9nICk7CgkJfSBlbHNlIHsKCQkJdGhpcy51aURpYWxvZy5yZW1vdmVDbGFzcyggInVpLWRpYWxvZy1idXR0b25zIiApOwoJCX0KCX0sCgoJX21ha2VEcmFnZ2FibGU6IGZ1bmN0aW9uKCkgewoJCXZhciB0aGF0ID0gdGhpcywKCQkJb3B0aW9ucyA9IHRoaXMub3B0aW9uczsKCgkJZnVuY3Rpb24gZmlsdGVyZWRVaSggdWkgKSB7CgkJCXJldHVybiB7CgkJCQlwb3NpdGlvbjogdWkucG9zaXRpb24sCgkJCQlvZmZzZXQ6IHVpLm9mZnNldAoJCQl9OwoJCX0KCgkJdGhpcy51aURpYWxvZy5kcmFnZ2FibGUoewoJCQljYW5jZWw6ICIudWktZGlhbG9nLWNvbnRlbnQsIC51aS1kaWFsb2ctdGl0bGViYXItY2xvc2UiLAoJCQloYW5kbGU6ICIudWktZGlhbG9nLXRpdGxlYmFyIiwKCQkJY29udGFpbm1lbnQ6ICJkb2N1bWVudCIsCgkJCXN0YXJ0OiBmdW5jdGlvbiggZXZlbnQsIHVpICkgewoJCQkJJCggdGhpcyApCgkJCQkJLmFkZENsYXNzKCAidWktZGlhbG9nLWRyYWdnaW5nIiApOwoJCQkJdGhhdC5fdHJpZ2dlciggImRyYWdTdGFydCIsIGV2ZW50LCBmaWx0ZXJlZFVpKCB1aSApICk7CgkJCX0sCgkJCWRyYWc6IGZ1bmN0aW9uKCBldmVudCwgdWkgKSB7CgkJCQl0aGF0Ll90cmlnZ2VyKCAiZHJhZyIsIGV2ZW50LCBmaWx0ZXJlZFVpKCB1aSApICk7CgkJCX0sCgkJCXN0b3A6IGZ1bmN0aW9uKCBldmVudCwgdWkgKSB7CgkJCQlvcHRpb25zLnBvc2l0aW9uID0gWwoJCQkJCXVpLnBvc2l0aW9uLmxlZnQgLSB0aGF0LmRvY3VtZW50LnNjcm9sbExlZnQoKSwKCQkJCQl1aS5wb3NpdGlvbi50b3AgLSB0aGF0LmRvY3VtZW50LnNjcm9sbFRvcCgpCgkJCQldOwoJCQkJJCggdGhpcyApCgkJCQkJLnJlbW92ZUNsYXNzKCAidWktZGlhbG9nLWRyYWdnaW5nIiApOwoJCQkJdGhhdC5fdHJpZ2dlciggImRyYWdTdG9wIiwgZXZlbnQsIGZpbHRlcmVkVWkoIHVpICkgKTsKCQkJCSQudWkuZGlhbG9nLm92ZXJsYXkucmVzaXplKCk7CgkJCX0KCQl9KTsKCX0sCgoJX21ha2VSZXNpemFibGU6IGZ1bmN0aW9uKCBoYW5kbGVzICkgewoJCWhhbmRsZXMgPSAoaGFuZGxlcyA9PT0gdW5kZWZpbmVkID8gdGhpcy5vcHRpb25zLnJlc2l6YWJsZSA6IGhhbmRsZXMpOwoJCXZhciB0aGF0ID0gdGhpcywKCQkJb3B0aW9ucyA9IHRoaXMub3B0aW9ucywKCQkJLy8gLnVpLXJlc2l6YWJsZSBoYXMgcG9zaXRpb246IHJlbGF0aXZlIGRlZmluZWQgaW4gdGhlIHN0eWxlc2hlZXQKCQkJLy8gYnV0IGRpYWxvZ3MgaGF2ZSB0byB1c2UgYWJzb2x1dGUgb3IgZml4ZWQgcG9zaXRpb25pbmcKCQkJcG9zaXRpb24gPSB0aGlzLnVpRGlhbG9nLmNzcyggInBvc2l0aW9uIiApLAoJCQlyZXNpemVIYW5kbGVzID0gdHlwZW9mIGhhbmRsZXMgPT09ICdzdHJpbmcnID8KCQkJCWhhbmRsZXMJOgoJCQkJIm4sZSxzLHcsc2Usc3csbmUsbnciOwoKCQlmdW5jdGlvbiBmaWx0ZXJlZFVpKCB1aSApIHsKCQkJcmV0dXJuIHsKCQkJCW9yaWdpbmFsUG9zaXRpb246IHVpLm9yaWdpbmFsUG9zaXRpb24sCgkJCQlvcmlnaW5hbFNpemU6IHVpLm9yaWdpbmFsU2l6ZSwKCQkJCXBvc2l0aW9uOiB1aS5wb3NpdGlvbiwKCQkJCXNpemU6IHVpLnNpemUKCQkJfTsKCQl9CgoJCXRoaXMudWlEaWFsb2cucmVzaXphYmxlKHsKCQkJY2FuY2VsOiAiLnVpLWRpYWxvZy1jb250ZW50IiwKCQkJY29udGFpbm1lbnQ6ICJkb2N1bWVudCIsCgkJCWFsc29SZXNpemU6IHRoaXMuZWxlbWVudCwKCQkJbWF4V2lkdGg6IG9wdGlvbnMubWF4V2lkdGgsCgkJCW1heEhlaWdodDogb3B0aW9ucy5tYXhIZWlnaHQsCgkJCW1pbldpZHRoOiBvcHRpb25zLm1pbldpZHRoLAoJCQltaW5IZWlnaHQ6IHRoaXMuX21pbkhlaWdodCgpLAoJCQloYW5kbGVzOiByZXNpemVIYW5kbGVzLAoJCQlzdGFydDogZnVuY3Rpb24oIGV2ZW50LCB1aSApIHsKCQkJCSQoIHRoaXMgKS5hZGRDbGFzcyggInVpLWRpYWxvZy1yZXNpemluZyIgKTsKCQkJCXRoYXQuX3RyaWdnZXIoICJyZXNpemVTdGFydCIsIGV2ZW50LCBmaWx0ZXJlZFVpKCB1aSApICk7CgkJCX0sCgkJCXJlc2l6ZTogZnVuY3Rpb24oIGV2ZW50LCB1aSApIHsKCQkJCXRoYXQuX3RyaWdnZXIoICJyZXNpemUiLCBldmVudCwgZmlsdGVyZWRVaSggdWkgKSApOwoJCQl9LAoJCQlzdG9wOiBmdW5jdGlvbiggZXZlbnQsIHVpICkgewoJCQkJJCggdGhpcyApLnJlbW92ZUNsYXNzKCAidWktZGlhbG9nLXJlc2l6aW5nIiApOwoJCQkJb3B0aW9ucy5oZWlnaHQgPSAkKCB0aGlzICkuaGVpZ2h0KCk7CgkJCQlvcHRpb25zLndpZHRoID0gJCggdGhpcyApLndpZHRoKCk7CgkJCQl0aGF0Ll90cmlnZ2VyKCAicmVzaXplU3RvcCIsIGV2ZW50LCBmaWx0ZXJlZFVpKCB1aSApICk7CgkJCQkkLnVpLmRpYWxvZy5vdmVybGF5LnJlc2l6ZSgpOwoJCQl9CgkJfSkKCQkuY3NzKCAicG9zaXRpb24iLCBwb3NpdGlvbiApCgkJLmZpbmQoICIudWktcmVzaXphYmxlLXNlIiApCgkJCS5hZGRDbGFzcyggInVpLWljb24gdWktaWNvbi1ncmlwLWRpYWdvbmFsLXNlIiApOwoJfSwKCglfbWluSGVpZ2h0OiBmdW5jdGlvbigpIHsKCQl2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9uczsKCgkJaWYgKCBvcHRpb25zLmhlaWdodCA9PT0gImF1dG8iICkgewoJCQlyZXR1cm4gb3B0aW9ucy5taW5IZWlnaHQ7CgkJfSBlbHNlIHsKCQkJcmV0dXJuIE1hdGgubWluKCBvcHRpb25zLm1pbkhlaWdodCwgb3B0aW9ucy5oZWlnaHQgKTsKCQl9Cgl9LAoKCV9wb3NpdGlvbjogZnVuY3Rpb24oIHBvc2l0aW9uICkgewoJCXZhciBteUF0ID0gW10sCgkJCW9mZnNldCA9IFsgMCwgMCBdLAoJCQlpc1Zpc2libGU7CgoJCWlmICggcG9zaXRpb24gKSB7CgkJCS8vIGRlZXAgZXh0ZW5kaW5nIGNvbnZlcnRzIGFycmF5cyB0byBvYmplY3RzIGluIGpRdWVyeSA8PSAxLjMuMiA6LSgKCS8vCQlpZiAodHlwZW9mIHBvc2l0aW9uID09ICdzdHJpbmcnIHx8ICQuaXNBcnJheShwb3NpdGlvbikpIHsKCS8vCQkJbXlBdCA9ICQuaXNBcnJheShwb3NpdGlvbikgPyBwb3NpdGlvbiA6IHBvc2l0aW9uLnNwbGl0KCcgJyk7CgoJCQlpZiAoIHR5cGVvZiBwb3NpdGlvbiA9PT0gInN0cmluZyIgfHwgKHR5cGVvZiBwb3NpdGlvbiA9PT0gIm9iamVjdCIgJiYgIjAiIGluIHBvc2l0aW9uICkgKSB7CgkJCQlteUF0ID0gcG9zaXRpb24uc3BsaXQgPyBwb3NpdGlvbi5zcGxpdCggIiAiICkgOiBbIHBvc2l0aW9uWyAwIF0sIHBvc2l0aW9uWyAxIF0gXTsKCQkJCWlmICggbXlBdC5sZW5ndGggPT09IDEgKSB7CgkJCQkJbXlBdFsgMSBdID0gbXlBdFsgMCBdOwoJCQkJfQoKCQkJCSQuZWFjaCggWyAibGVmdCIsICJ0b3AiIF0sIGZ1bmN0aW9uKCBpLCBvZmZzZXRQb3NpdGlvbiApIHsKCQkJCQlpZiAoICtteUF0WyBpIF0gPT09IG15QXRbIGkgXSApIHsKCQkJCQkJb2Zmc2V0WyBpIF0gPSBteUF0WyBpIF07CgkJCQkJCW15QXRbIGkgXSA9IG9mZnNldFBvc2l0aW9uOwoJCQkJCX0KCQkJCX0pOwoKCQkJCXBvc2l0aW9uID0gewoJCQkJCW15OiBteUF0WzBdICsgKG9mZnNldFswXSA8IDAgPyBvZmZzZXRbMF0gOiAiKyIgKyBvZmZzZXRbMF0pICsgIiAiICsKCQkJCQkJbXlBdFsxXSArIChvZmZzZXRbMV0gPCAwID8gb2Zmc2V0WzFdIDogIisiICsgb2Zmc2V0WzFdKSwKCQkJCQlhdDogbXlBdC5qb2luKCAiICIgKQoJCQkJfTsKCQkJfQoKCQkJcG9zaXRpb24gPSAkLmV4dGVuZCgge30sICQudWkuZGlhbG9nLnByb3RvdHlwZS5vcHRpb25zLnBvc2l0aW9uLCBwb3NpdGlvbiApOwoJCX0gZWxzZSB7CgkJCXBvc2l0aW9uID0gJC51aS5kaWFsb2cucHJvdG90eXBlLm9wdGlvbnMucG9zaXRpb247CgkJfQoKCQkvLyBuZWVkIHRvIHNob3cgdGhlIGRpYWxvZyB0byBnZXQgdGhlIGFjdHVhbCBvZmZzZXQgaW4gdGhlIHBvc2l0aW9uIHBsdWdpbgoJCWlzVmlzaWJsZSA9IHRoaXMudWlEaWFsb2cuaXMoICI6dmlzaWJsZSIgKTsKCQlpZiAoICFpc1Zpc2libGUgKSB7CgkJCXRoaXMudWlEaWFsb2cuc2hvdygpOwoJCX0KCQl0aGlzLnVpRGlhbG9nLnBvc2l0aW9uKCBwb3NpdGlvbiApOwoJCWlmICggIWlzVmlzaWJsZSApIHsKCQkJdGhpcy51aURpYWxvZy5oaWRlKCk7CgkJfQoJfSwKCglfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7CgkJdmFyIHRoYXQgPSB0aGlzLAoJCQlyZXNpemFibGVPcHRpb25zID0ge30sCgkJCXJlc2l6ZSA9IGZhbHNlOwoKCQkkLmVhY2goIG9wdGlvbnMsIGZ1bmN0aW9uKCBrZXksIHZhbHVlICkgewoJCQl0aGF0Ll9zZXRPcHRpb24oIGtleSwgdmFsdWUgKTsKCgkJCWlmICgga2V5IGluIHNpemVSZWxhdGVkT3B0aW9ucyApIHsKCQkJCXJlc2l6ZSA9IHRydWU7CgkJCX0KCQkJaWYgKCBrZXkgaW4gcmVzaXphYmxlUmVsYXRlZE9wdGlvbnMgKSB7CgkJCQlyZXNpemFibGVPcHRpb25zWyBrZXkgXSA9IHZhbHVlOwoJCQl9CgkJfSk7CgoJCWlmICggcmVzaXplICkgewoJCQl0aGlzLl9zaXplKCk7CgkJfQoJCWlmICggdGhpcy51aURpYWxvZy5pcyggIjpkYXRhKHJlc2l6YWJsZSkiICkgKSB7CgkJCXRoaXMudWlEaWFsb2cucmVzaXphYmxlKCAib3B0aW9uIiwgcmVzaXphYmxlT3B0aW9ucyApOwoJCX0KCX0sCgoJX3NldE9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7CgkJdmFyIGlzRHJhZ2dhYmxlLCBpc1Jlc2l6YWJsZSwKCQkJdWlEaWFsb2cgPSB0aGlzLnVpRGlhbG9nOwoKCQlzd2l0Y2ggKCBrZXkgKSB7CgkJCWNhc2UgImJ1dHRvbnMiOgoJCQkJdGhpcy5fY3JlYXRlQnV0dG9ucyggdmFsdWUgKTsKCQkJCWJyZWFrOwoJCQljYXNlICJjbG9zZVRleHQiOgoJCQkJLy8gZW5zdXJlIHRoYXQgd2UgYWx3YXlzIHBhc3MgYSBzdHJpbmcKCQkJCXRoaXMudWlEaWFsb2dUaXRsZWJhckNsb3NlVGV4dC50ZXh0KCAiIiArIHZhbHVlICk7CgkJCQlicmVhazsKCQkJY2FzZSAiZGlhbG9nQ2xhc3MiOgoJCQkJdWlEaWFsb2cKCQkJCQkucmVtb3ZlQ2xhc3MoIHRoaXMub3B0aW9ucy5kaWFsb2dDbGFzcyApCgkJCQkJLmFkZENsYXNzKCB1aURpYWxvZ0NsYXNzZXMgKyB2YWx1ZSApOwoJCQkJYnJlYWs7CgkJCWNhc2UgImRpc2FibGVkIjoKCQkJCWlmICggdmFsdWUgKSB7CgkJCQkJdWlEaWFsb2cuYWRkQ2xhc3MoICJ1aS1kaWFsb2ctZGlzYWJsZWQiICk7CgkJCQl9IGVsc2UgewoJCQkJCXVpRGlhbG9nLnJlbW92ZUNsYXNzKCAidWktZGlhbG9nLWRpc2FibGVkIiApOwoJCQkJfQoJCQkJYnJlYWs7CgkJCWNhc2UgImRyYWdnYWJsZSI6CgkJCQlpc0RyYWdnYWJsZSA9IHVpRGlhbG9nLmlzKCAiOmRhdGEoZHJhZ2dhYmxlKSIgKTsKCQkJCWlmICggaXNEcmFnZ2FibGUgJiYgIXZhbHVlICkgewoJCQkJCXVpRGlhbG9nLmRyYWdnYWJsZSggImRlc3Ryb3kiICk7CgkJCQl9CgoJCQkJaWYgKCAhaXNEcmFnZ2FibGUgJiYgdmFsdWUgKSB7CgkJCQkJdGhpcy5fbWFrZURyYWdnYWJsZSgpOwoJCQkJfQoJCQkJYnJlYWs7CgkJCWNhc2UgInBvc2l0aW9uIjoKCQkJCXRoaXMuX3Bvc2l0aW9uKCB2YWx1ZSApOwoJCQkJYnJlYWs7CgkJCWNhc2UgInJlc2l6YWJsZSI6CgkJCQkvLyBjdXJyZW50bHkgcmVzaXphYmxlLCBiZWNvbWluZyBub24tcmVzaXphYmxlCgkJCQlpc1Jlc2l6YWJsZSA9IHVpRGlhbG9nLmlzKCAiOmRhdGEocmVzaXphYmxlKSIgKTsKCQkJCWlmICggaXNSZXNpemFibGUgJiYgIXZhbHVlICkgewoJCQkJCXVpRGlhbG9nLnJlc2l6YWJsZSggImRlc3Ryb3kiICk7CgkJCQl9CgoJCQkJLy8gY3VycmVudGx5IHJlc2l6YWJsZSwgY2hhbmdpbmcgaGFuZGxlcwoJCQkJaWYgKCBpc1Jlc2l6YWJsZSAmJiB0eXBlb2YgdmFsdWUgPT09ICJzdHJpbmciICkgewoJCQkJCXVpRGlhbG9nLnJlc2l6YWJsZSggIm9wdGlvbiIsICJoYW5kbGVzIiwgdmFsdWUgKTsKCQkJCX0KCgkJCQkvLyBjdXJyZW50bHkgbm9uLXJlc2l6YWJsZSwgYmVjb21pbmcgcmVzaXphYmxlCgkJCQlpZiAoICFpc1Jlc2l6YWJsZSAmJiB2YWx1ZSAhPT0gZmFsc2UgKSB7CgkJCQkJdGhpcy5fbWFrZVJlc2l6YWJsZSggdmFsdWUgKTsKCQkJCX0KCQkJCWJyZWFrOwoJCQljYXNlICJ0aXRsZSI6CgkJCQkvLyBjb252ZXJ0IHdoYXRldmVyIHdhcyBwYXNzZWQgaW4gbyBhIHN0cmluZywgZm9yIGh0bWwoKSB0byBub3QgdGhyb3cgdXAKCQkJCSQoICIudWktZGlhbG9nLXRpdGxlIiwgdGhpcy51aURpYWxvZ1RpdGxlYmFyICkKCQkJCQkuaHRtbCggIiIgKyAoIHZhbHVlIHx8ICImIzE2MDsiICkgKTsKCQkJCWJyZWFrOwoJCX0KCgkJdGhpcy5fc3VwZXIoIGtleSwgdmFsdWUgKTsKCX0sCgoJX3NpemU6IGZ1bmN0aW9uKCkgewoJCS8qIElmIHRoZSB1c2VyIGhhcyByZXNpemVkIHRoZSBkaWFsb2csIHRoZSAudWktZGlhbG9nIGFuZCAudWktZGlhbG9nLWNvbnRlbnQKCQkgKiBkaXZzIHdpbGwgYm90aCBoYXZlIHdpZHRoIGFuZCBoZWlnaHQgc2V0LCBzbyB3ZSBuZWVkIHRvIHJlc2V0IHRoZW0KCQkgKi8KCQl2YXIgbm9uQ29udGVudEhlaWdodCwgbWluQ29udGVudEhlaWdodCwgYXV0b0hlaWdodCwKCQkJb3B0aW9ucyA9IHRoaXMub3B0aW9ucywKCQkJaXNWaXNpYmxlID0gdGhpcy51aURpYWxvZy5pcyggIjp2aXNpYmxlIiApOwoKCQkvLyByZXNldCBjb250ZW50IHNpemluZwoJCXRoaXMuZWxlbWVudC5zaG93KCkuY3NzKHsKCQkJd2lkdGg6ICJhdXRvIiwKCQkJbWluSGVpZ2h0OiAwLAoJCQloZWlnaHQ6IDAKCQl9KTsKCgkJaWYgKCBvcHRpb25zLm1pbldpZHRoID4gb3B0aW9ucy53aWR0aCApIHsKCQkJb3B0aW9ucy53aWR0aCA9IG9wdGlvbnMubWluV2lkdGg7CgkJfQoKCQkvLyByZXNldCB3cmFwcGVyIHNpemluZwoJCS8vIGRldGVybWluZSB0aGUgaGVpZ2h0IG9mIGFsbCB0aGUgbm9uLWNvbnRlbnQgZWxlbWVudHMKCQlub25Db250ZW50SGVpZ2h0ID0gdGhpcy51aURpYWxvZy5jc3MoewoJCQkJaGVpZ2h0OiAiYXV0byIsCgkJCQl3aWR0aDogb3B0aW9ucy53aWR0aAoJCQl9KQoJCQkub3V0ZXJIZWlnaHQoKTsKCQltaW5Db250ZW50SGVpZ2h0ID0gTWF0aC5tYXgoIDAsIG9wdGlvbnMubWluSGVpZ2h0IC0gbm9uQ29udGVudEhlaWdodCApOwoKCQlpZiAoIG9wdGlvbnMuaGVpZ2h0ID09PSAiYXV0byIgKSB7CgkJCS8vIG9ubHkgbmVlZGVkIGZvciBJRTYgc3VwcG9ydAoJCQlpZiAoICQuc3VwcG9ydC5taW5IZWlnaHQgKSB7CgkJCQl0aGlzLmVsZW1lbnQuY3NzKHsKCQkJCQltaW5IZWlnaHQ6IG1pbkNvbnRlbnRIZWlnaHQsCgkJCQkJaGVpZ2h0OiAiYXV0byIKCQkJCX0pOwoJCQl9IGVsc2UgewoJCQkJdGhpcy51aURpYWxvZy5zaG93KCk7CgkJCQlhdXRvSGVpZ2h0ID0gdGhpcy5lbGVtZW50LmNzcyggImhlaWdodCIsICJhdXRvIiApLmhlaWdodCgpOwoJCQkJaWYgKCAhaXNWaXNpYmxlICkgewoJCQkJCXRoaXMudWlEaWFsb2cuaGlkZSgpOwoJCQkJfQoJCQkJdGhpcy5lbGVtZW50LmhlaWdodCggTWF0aC5tYXgoIGF1dG9IZWlnaHQsIG1pbkNvbnRlbnRIZWlnaHQgKSApOwoJCQl9CgkJfSBlbHNlIHsKCQkJdGhpcy5lbGVtZW50LmhlaWdodCggTWF0aC5tYXgoIG9wdGlvbnMuaGVpZ2h0IC0gbm9uQ29udGVudEhlaWdodCwgMCApICk7CgkJfQoKCQlpZiAodGhpcy51aURpYWxvZy5pcyggIjpkYXRhKHJlc2l6YWJsZSkiICkgKSB7CgkJCXRoaXMudWlEaWFsb2cucmVzaXphYmxlKCAib3B0aW9uIiwgIm1pbkhlaWdodCIsIHRoaXMuX21pbkhlaWdodCgpICk7CgkJfQoJfQp9KTsKCiQuZXh0ZW5kKCQudWkuZGlhbG9nLCB7Cgl1dWlkOiAwLAoJbWF4WjogMCwKCglnZXRUaXRsZUlkOiBmdW5jdGlvbigkZWwpIHsKCQl2YXIgaWQgPSAkZWwuYXR0ciggImlkIiApOwoJCWlmICggIWlkICkgewoJCQl0aGlzLnV1aWQgKz0gMTsKCQkJaWQgPSB0aGlzLnV1aWQ7CgkJfQoJCXJldHVybiAidWktZGlhbG9nLXRpdGxlLSIgKyBpZDsKCX0sCgoJb3ZlcmxheTogZnVuY3Rpb24oIGRpYWxvZyApIHsKCQl0aGlzLiRlbCA9ICQudWkuZGlhbG9nLm92ZXJsYXkuY3JlYXRlKCBkaWFsb2cgKTsKCX0KfSk7CgokLmV4dGVuZCggJC51aS5kaWFsb2cub3ZlcmxheSwgewoJaW5zdGFuY2VzOiBbXSwKCS8vIHJldXNlIG9sZCBpbnN0YW5jZXMgZHVlIHRvIElFIG1lbW9yeSBsZWFrIHdpdGggYWxwaGEgdHJhbnNwYXJlbmN5IChzZWUgIzUxODUpCglvbGRJbnN0YW5jZXM6IFtdLAoJbWF4WjogMCwKCWV2ZW50czogJC5tYXAoCgkJImZvY3VzLG1vdXNlZG93bixtb3VzZXVwLGtleWRvd24sa2V5cHJlc3MsY2xpY2siLnNwbGl0KCAiLCIgKSwKCQlmdW5jdGlvbiggZXZlbnQgKSB7CgkJCXJldHVybiBldmVudCArICIuZGlhbG9nLW92ZXJsYXkiOwoJCX0KCSkuam9pbiggIiAiICksCgljcmVhdGU6IGZ1bmN0aW9uKCBkaWFsb2cgKSB7CgkJaWYgKCB0aGlzLmluc3RhbmNlcy5sZW5ndGggPT09IDAgKSB7CgkJCS8vIHByZXZlbnQgdXNlIG9mIGFuY2hvcnMgYW5kIGlucHV0cwoJCQkvLyB3ZSB1c2UgYSBzZXRUaW1lb3V0IGluIGNhc2UgdGhlIG92ZXJsYXkgaXMgY3JlYXRlZCBmcm9tIGFuCgkJCS8vIGV2ZW50IHRoYXQgd2UncmUgZ29pbmcgdG8gYmUgY2FuY2VsbGluZyAoc2VlICMyODA0KQoJCQlzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewoJCQkJLy8gaGFuZGxlICQoZWwpLmRpYWxvZygpLmRpYWxvZygnY2xvc2UnKSAoc2VlICM0MDY1KQoJCQkJaWYgKCAkLnVpLmRpYWxvZy5vdmVybGF5Lmluc3RhbmNlcy5sZW5ndGggKSB7CgkJCQkJJCggZG9jdW1lbnQgKS5iaW5kKCAkLnVpLmRpYWxvZy5vdmVybGF5LmV2ZW50cywgZnVuY3Rpb24oIGV2ZW50ICkgewoJCQkJCQkvLyBzdG9wIGV2ZW50cyBpZiB0aGUgei1pbmRleCBvZiB0aGUgdGFyZ2V0IGlzIDwgdGhlIHotaW5kZXggb2YgdGhlIG92ZXJsYXkKCQkJCQkJLy8gd2UgY2Fubm90IHJldHVybiB0cnVlIHdoZW4gd2UgZG9uJ3Qgd2FudCB0byBjYW5jZWwgdGhlIGV2ZW50ICgjMzUyMykKCQkJCQkJaWYgKCAkKCBldmVudC50YXJnZXQgKS56SW5kZXgoKSA8ICQudWkuZGlhbG9nLm92ZXJsYXkubWF4WiApIHsKCQkJCQkJCXJldHVybiBmYWxzZTsKCQkJCQkJfQoJCQkJCX0pOwoJCQkJfQoJCQl9LCAxICk7CgoJCQkvLyBoYW5kbGUgd2luZG93IHJlc2l6ZQoJCQkkKCB3aW5kb3cgKS5iaW5kKCAicmVzaXplLmRpYWxvZy1vdmVybGF5IiwgJC51aS5kaWFsb2cub3ZlcmxheS5yZXNpemUgKTsKCQl9CgoJCXZhciAkZWwgPSAoIHRoaXMub2xkSW5zdGFuY2VzLnBvcCgpIHx8ICQoICI8ZGl2PiIgKS5hZGRDbGFzcyggInVpLXdpZGdldC1vdmVybGF5IiApICk7CgoJCS8vIGFsbG93IGNsb3NpbmcgYnkgcHJlc3NpbmcgdGhlIGVzY2FwZSBrZXkKCQkkKCBkb2N1bWVudCApLmJpbmQoICJrZXlkb3duLmRpYWxvZy1vdmVybGF5IiwgZnVuY3Rpb24oIGV2ZW50ICkgewoJCQl2YXIgaW5zdGFuY2VzID0gJC51aS5kaWFsb2cub3ZlcmxheS5pbnN0YW5jZXM7CgkJCS8vIG9ubHkgcmVhY3QgdG8gdGhlIGV2ZW50IGlmIHdlJ3JlIHRoZSB0b3Agb3ZlcmxheQoJCQlpZiAoIGluc3RhbmNlcy5sZW5ndGggIT09IDAgJiYgaW5zdGFuY2VzWyBpbnN0YW5jZXMubGVuZ3RoIC0gMSBdID09PSAkZWwgJiYKCQkJCWRpYWxvZy5vcHRpb25zLmNsb3NlT25Fc2NhcGUgJiYgIWV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICYmIGV2ZW50LmtleUNvZGUgJiYKCQkJCWV2ZW50LmtleUNvZGUgPT09ICQudWkua2V5Q29kZS5FU0NBUEUgKSB7CgoJCQkJZGlhbG9nLmNsb3NlKCBldmVudCApOwoJCQkJZXZlbnQucHJldmVudERlZmF1bHQoKTsKCQkJfQoJCX0pOwoKCQkkZWwuYXBwZW5kVG8oIGRvY3VtZW50LmJvZHkgKS5jc3MoewoJCQl3aWR0aDogdGhpcy53aWR0aCgpLAoJCQloZWlnaHQ6IHRoaXMuaGVpZ2h0KCkKCQl9KTsKCgkJaWYgKCAkLmZuLmJnaWZyYW1lICkgewoJCQkkZWwuYmdpZnJhbWUoKTsKCQl9CgoJCXRoaXMuaW5zdGFuY2VzLnB1c2goICRlbCApOwoJCXJldHVybiAkZWw7Cgl9LAoKCWRlc3Ryb3k6IGZ1bmN0aW9uKCAkZWwgKSB7CgkJdmFyIGluZGV4T2YgPSAkLmluQXJyYXkoICRlbCwgdGhpcy5pbnN0YW5jZXMgKSwKCQkJbWF4WiA9IDA7CgoJCWlmICggaW5kZXhPZiAhPT0gLTEgKSB7CgkJCXRoaXMub2xkSW5zdGFuY2VzLnB1c2goIHRoaXMuaW5zdGFuY2VzLnNwbGljZSggaW5kZXhPZiwgMSApWyAwIF0gKTsKCQl9CgoJCWlmICggdGhpcy5pbnN0YW5jZXMubGVuZ3RoID09PSAwICkgewoJCQkkKCBbIGRvY3VtZW50LCB3aW5kb3cgXSApLnVuYmluZCggIi5kaWFsb2ctb3ZlcmxheSIgKTsKCQl9CgoJCSRlbC5oZWlnaHQoIDAgKS53aWR0aCggMCApLnJlbW92ZSgpOwoKCQkvLyBhZGp1c3QgdGhlIG1heFogdG8gYWxsb3cgb3RoZXIgbW9kYWwgZGlhbG9ncyB0byBjb250aW51ZSB0byB3b3JrIChzZWUgIzQzMDkpCgkJJC5lYWNoKCB0aGlzLmluc3RhbmNlcywgZnVuY3Rpb24oKSB7CgkJCW1heFogPSBNYXRoLm1heCggbWF4WiwgdGhpcy5jc3MoICJ6LWluZGV4IiApICk7CgkJfSk7CgkJdGhpcy5tYXhaID0gbWF4WjsKCX0sCgoJaGVpZ2h0OiBmdW5jdGlvbigpIHsKCQl2YXIgc2Nyb2xsSGVpZ2h0LAoJCQlvZmZzZXRIZWlnaHQ7CgkJLy8gaGFuZGxlIElFCgkJaWYgKCAkLnVpLmllICkgewoJCQlzY3JvbGxIZWlnaHQgPSBNYXRoLm1heCgKCQkJCWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQsCgkJCQlkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodAoJCQkpOwoJCQlvZmZzZXRIZWlnaHQgPSBNYXRoLm1heCgKCQkJCWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5vZmZzZXRIZWlnaHQsCgkJCQlkb2N1bWVudC5ib2R5Lm9mZnNldEhlaWdodAoJCQkpOwoKCQkJaWYgKCBzY3JvbGxIZWlnaHQgPCBvZmZzZXRIZWlnaHQgKSB7CgkJCQlyZXR1cm4gJCggd2luZG93ICkuaGVpZ2h0KCkgKyAicHgiOwoJCQl9IGVsc2UgewoJCQkJcmV0dXJuIHNjcm9sbEhlaWdodCArICJweCI7CgkJCX0KCQkvLyBoYW5kbGUgImdvb2QiIGJyb3dzZXJzCgkJfSBlbHNlIHsKCQkJcmV0dXJuICQoIGRvY3VtZW50ICkuaGVpZ2h0KCkgKyAicHgiOwoJCX0KCX0sCgoJd2lkdGg6IGZ1bmN0aW9uKCkgewoJCXZhciBzY3JvbGxXaWR0aCwKCQkJb2Zmc2V0V2lkdGg7CgkJLy8gaGFuZGxlIElFCgkJaWYgKCAkLnVpLmllICkgewoJCQlzY3JvbGxXaWR0aCA9IE1hdGgubWF4KAoJCQkJZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFdpZHRoLAoJCQkJZG9jdW1lbnQuYm9keS5zY3JvbGxXaWR0aAoJCQkpOwoJCQlvZmZzZXRXaWR0aCA9IE1hdGgubWF4KAoJCQkJZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm9mZnNldFdpZHRoLAoJCQkJZG9jdW1lbnQuYm9keS5vZmZzZXRXaWR0aAoJCQkpOwoKCQkJaWYgKCBzY3JvbGxXaWR0aCA8IG9mZnNldFdpZHRoICkgewoJCQkJcmV0dXJuICQoIHdpbmRvdyApLndpZHRoKCkgKyAicHgiOwoJCQl9IGVsc2UgewoJCQkJcmV0dXJuIHNjcm9sbFdpZHRoICsgInB4IjsKCQkJfQoJCS8vIGhhbmRsZSAiZ29vZCIgYnJvd3NlcnMKCQl9IGVsc2UgewoJCQlyZXR1cm4gJCggZG9jdW1lbnQgKS53aWR0aCgpICsgInB4IjsKCQl9Cgl9LAoKCXJlc2l6ZTogZnVuY3Rpb24oKSB7CgkJLyogSWYgdGhlIGRpYWxvZyBpcyBkcmFnZ2FibGUgYW5kIHRoZSB1c2VyIGRyYWdzIGl0IHBhc3QgdGhlCgkJICogcmlnaHQgZWRnZSBvZiB0aGUgd2luZG93LCB0aGUgZG9jdW1lbnQgYmVjb21lcyB3aWRlciBzbyB3ZQoJCSAqIG5lZWQgdG8gc3RyZXRjaCB0aGUgb3ZlcmxheS4gSWYgdGhlIHVzZXIgdGhlbiBkcmFncyB0aGUKCQkgKiBkaWFsb2cgYmFjayB0byB0aGUgbGVmdCwgdGhlIGRvY3VtZW50IHdpbGwgYmVjb21lIG5hcnJvd2VyLAoJCSAqIHNvIHdlIG5lZWQgdG8gc2hyaW5rIHRoZSBvdmVybGF5IHRvIHRoZSBhcHByb3ByaWF0ZSBzaXplLgoJCSAqIFRoaXMgaXMgaGFuZGxlZCBieSBzaHJpbmtpbmcgdGhlIG92ZXJsYXkgYmVmb3JlIHNldHRpbmcgaXQKCQkgKiB0byB0aGUgZnVsbCBkb2N1bWVudCBzaXplLgoJCSAqLwoJCXZhciAkb3ZlcmxheXMgPSAkKCBbXSApOwoJCSQuZWFjaCggJC51aS5kaWFsb2cub3ZlcmxheS5pbnN0YW5jZXMsIGZ1bmN0aW9uKCkgewoJCQkkb3ZlcmxheXMgPSAkb3ZlcmxheXMuYWRkKCB0aGlzICk7CgkJfSk7CgoJCSRvdmVybGF5cy5jc3MoewoJCQl3aWR0aDogMCwKCQkJaGVpZ2h0OiAwCgkJfSkuY3NzKHsKCQkJd2lkdGg6ICQudWkuZGlhbG9nLm92ZXJsYXkud2lkdGgoKSwKCQkJaGVpZ2h0OiAkLnVpLmRpYWxvZy5vdmVybGF5LmhlaWdodCgpCgkJfSk7Cgl9Cn0pOwoKJC5leHRlbmQoICQudWkuZGlhbG9nLm92ZXJsYXkucHJvdG90eXBlLCB7CglkZXN0cm95OiBmdW5jdGlvbigpIHsKCQkkLnVpLmRpYWxvZy5vdmVybGF5LmRlc3Ryb3koIHRoaXMuJGVsICk7Cgl9Cn0pOwoKfSggalF1ZXJ5ICkgKTsKKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7Cgp2YXIgbW91c2VIYW5kbGVkID0gZmFsc2U7CgokLndpZGdldCggInVpLm1lbnUiLCB7Cgl2ZXJzaW9uOiAiMS45LjIiLAoJZGVmYXVsdEVsZW1lbnQ6ICI8dWw+IiwKCWRlbGF5OiAzMDAsCglvcHRpb25zOiB7CgkJaWNvbnM6IHsKCQkJc3VibWVudTogInVpLWljb24tY2FyYXQtMS1lIgoJCX0sCgkJbWVudXM6ICJ1bCIsCgkJcG9zaXRpb246IHsKCQkJbXk6ICJsZWZ0IHRvcCIsCgkJCWF0OiAicmlnaHQgdG9wIgoJCX0sCgkJcm9sZTogIm1lbnUiLAoKCQkvLyBjYWxsYmFja3MKCQlibHVyOiBudWxsLAoJCWZvY3VzOiBudWxsLAoJCXNlbGVjdDogbnVsbAoJfSwKCglfY3JlYXRlOiBmdW5jdGlvbigpIHsKCQl0aGlzLmFjdGl2ZU1lbnUgPSB0aGlzLmVsZW1lbnQ7CgkJdGhpcy5lbGVtZW50CgkJCS51bmlxdWVJZCgpCgkJCS5hZGRDbGFzcyggInVpLW1lbnUgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGwiICkKCQkJLnRvZ2dsZUNsYXNzKCAidWktbWVudS1pY29ucyIsICEhdGhpcy5lbGVtZW50LmZpbmQoICIudWktaWNvbiIgKS5sZW5ndGggKQoJCQkuYXR0cih7CgkJCQlyb2xlOiB0aGlzLm9wdGlvbnMucm9sZSwKCQkJCXRhYkluZGV4OiAwCgkJCX0pCgkJCS8vIG5lZWQgdG8gY2F0Y2ggYWxsIGNsaWNrcyBvbiBkaXNhYmxlZCBtZW51CgkJCS8vIG5vdCBwb3NzaWJsZSB0aHJvdWdoIF9vbgoJCQkuYmluZCggImNsaWNrIiArIHRoaXMuZXZlbnROYW1lc3BhY2UsICQucHJveHkoZnVuY3Rpb24oIGV2ZW50ICkgewoJCQkJaWYgKCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgKSB7CgkJCQkJZXZlbnQucHJldmVudERlZmF1bHQoKTsKCQkJCX0KCQkJfSwgdGhpcyApKTsKCgkJaWYgKCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgKSB7CgkJCXRoaXMuZWxlbWVudAoJCQkJLmFkZENsYXNzKCAidWktc3RhdGUtZGlzYWJsZWQiICkKCQkJCS5hdHRyKCAiYXJpYS1kaXNhYmxlZCIsICJ0cnVlIiApOwoJCX0KCgkJdGhpcy5fb24oewoJCQkvLyBQcmV2ZW50IGZvY3VzIGZyb20gc3RpY2tpbmcgdG8gbGlua3MgaW5zaWRlIG1lbnUgYWZ0ZXIgY2xpY2tpbmcKCQkJLy8gdGhlbSAoZm9jdXMgc2hvdWxkIGFsd2F5cyBzdGF5IG9uIFVMIGR1cmluZyBuYXZpZ2F0aW9uKS4KCQkJIm1vdXNlZG93biAudWktbWVudS1pdGVtID4gYSI6IGZ1bmN0aW9uKCBldmVudCApIHsKCQkJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgkJCX0sCgkJCSJjbGljayAudWktc3RhdGUtZGlzYWJsZWQgPiBhIjogZnVuY3Rpb24oIGV2ZW50ICkgewoJCQkJZXZlbnQucHJldmVudERlZmF1bHQoKTsKCQkJfSwKCQkJImNsaWNrIC51aS1tZW51LWl0ZW06aGFzKGEpIjogZnVuY3Rpb24oIGV2ZW50ICkgewoJCQkJdmFyIHRhcmdldCA9ICQoIGV2ZW50LnRhcmdldCApLmNsb3Nlc3QoICIudWktbWVudS1pdGVtIiApOwoJCQkJaWYgKCAhbW91c2VIYW5kbGVkICYmIHRhcmdldC5ub3QoICIudWktc3RhdGUtZGlzYWJsZWQiICkubGVuZ3RoICkgewoJCQkJCW1vdXNlSGFuZGxlZCA9IHRydWU7CgoJCQkJCXRoaXMuc2VsZWN0KCBldmVudCApOwoJCQkJCS8vIE9wZW4gc3VibWVudSBvbiBjbGljawoJCQkJCWlmICggdGFyZ2V0LmhhcyggIi51aS1tZW51IiApLmxlbmd0aCApIHsKCQkJCQkJdGhpcy5leHBhbmQoIGV2ZW50ICk7CgkJCQkJfSBlbHNlIGlmICggIXRoaXMuZWxlbWVudC5pcyggIjpmb2N1cyIgKSApIHsKCQkJCQkJLy8gUmVkaXJlY3QgZm9jdXMgdG8gdGhlIG1lbnUKCQkJCQkJdGhpcy5lbGVtZW50LnRyaWdnZXIoICJmb2N1cyIsIFsgdHJ1ZSBdICk7CgoJCQkJCQkvLyBJZiB0aGUgYWN0aXZlIGl0ZW0gaXMgb24gdGhlIHRvcCBsZXZlbCwgbGV0IGl0IHN0YXkgYWN0aXZlLgoJCQkJCQkvLyBPdGhlcndpc2UsIGJsdXIgdGhlIGFjdGl2ZSBpdGVtIHNpbmNlIGl0IGlzIG5vIGxvbmdlciB2aXNpYmxlLgoJCQkJCQlpZiAoIHRoaXMuYWN0aXZlICYmIHRoaXMuYWN0aXZlLnBhcmVudHMoICIudWktbWVudSIgKS5sZW5ndGggPT09IDEgKSB7CgkJCQkJCQljbGVhclRpbWVvdXQoIHRoaXMudGltZXIgKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfSwKCQkJIm1vdXNlZW50ZXIgLnVpLW1lbnUtaXRlbSI6IGZ1bmN0aW9uKCBldmVudCApIHsKCQkJCXZhciB0YXJnZXQgPSAkKCBldmVudC5jdXJyZW50VGFyZ2V0ICk7CgkJCQkvLyBSZW1vdmUgdWktc3RhdGUtYWN0aXZlIGNsYXNzIGZyb20gc2libGluZ3Mgb2YgdGhlIG5ld2x5IGZvY3VzZWQgbWVudSBpdGVtCgkJCQkvLyB0byBhdm9pZCBhIGp1bXAgY2F1c2VkIGJ5IGFkamFjZW50IGVsZW1lbnRzIGJvdGggaGF2aW5nIGEgY2xhc3Mgd2l0aCBhIGJvcmRlcgoJCQkJdGFyZ2V0LnNpYmxpbmdzKCkuY2hpbGRyZW4oICIudWktc3RhdGUtYWN0aXZlIiApLnJlbW92ZUNsYXNzKCAidWktc3RhdGUtYWN0aXZlIiApOwoJCQkJdGhpcy5mb2N1cyggZXZlbnQsIHRhcmdldCApOwoJCQl9LAoJCQltb3VzZWxlYXZlOiAiY29sbGFwc2VBbGwiLAoJCQkibW91c2VsZWF2ZSAudWktbWVudSI6ICJjb2xsYXBzZUFsbCIsCgkJCWZvY3VzOiBmdW5jdGlvbiggZXZlbnQsIGtlZXBBY3RpdmVJdGVtICkgewoJCQkJLy8gSWYgdGhlcmUncyBhbHJlYWR5IGFuIGFjdGl2ZSBpdGVtLCBrZWVwIGl0IGFjdGl2ZQoJCQkJLy8gSWYgbm90LCBhY3RpdmF0ZSB0aGUgZmlyc3QgaXRlbQoJCQkJdmFyIGl0ZW0gPSB0aGlzLmFjdGl2ZSB8fCB0aGlzLmVsZW1lbnQuY2hpbGRyZW4oICIudWktbWVudS1pdGVtIiApLmVxKCAwICk7CgoJCQkJaWYgKCAha2VlcEFjdGl2ZUl0ZW0gKSB7CgkJCQkJdGhpcy5mb2N1cyggZXZlbnQsIGl0ZW0gKTsKCQkJCX0KCQkJfSwKCQkJYmx1cjogZnVuY3Rpb24oIGV2ZW50ICkgewoJCQkJdGhpcy5fZGVsYXkoZnVuY3Rpb24oKSB7CgkJCQkJaWYgKCAhJC5jb250YWlucyggdGhpcy5lbGVtZW50WzBdLCB0aGlzLmRvY3VtZW50WzBdLmFjdGl2ZUVsZW1lbnQgKSApIHsKCQkJCQkJdGhpcy5jb2xsYXBzZUFsbCggZXZlbnQgKTsKCQkJCQl9CgkJCQl9KTsKCQkJfSwKCQkJa2V5ZG93bjogIl9rZXlkb3duIgoJCX0pOwoKCQl0aGlzLnJlZnJlc2goKTsKCgkJLy8gQ2xpY2tzIG91dHNpZGUgb2YgYSBtZW51IGNvbGxhcHNlIGFueSBvcGVuIG1lbnVzCgkJdGhpcy5fb24oIHRoaXMuZG9jdW1lbnQsIHsKCQkJY2xpY2s6IGZ1bmN0aW9uKCBldmVudCApIHsKCQkJCWlmICggISQoIGV2ZW50LnRhcmdldCApLmNsb3Nlc3QoICIudWktbWVudSIgKS5sZW5ndGggKSB7CgkJCQkJdGhpcy5jb2xsYXBzZUFsbCggZXZlbnQgKTsKCQkJCX0KCgkJCQkvLyBSZXNldCB0aGUgbW91c2VIYW5kbGVkIGZsYWcKCQkJCW1vdXNlSGFuZGxlZCA9IGZhbHNlOwoJCQl9CgkJfSk7Cgl9LAoKCV9kZXN0cm95OiBmdW5jdGlvbigpIHsKCQkvLyBEZXN0cm95IChzdWIpbWVudXMKCQl0aGlzLmVsZW1lbnQKCQkJLnJlbW92ZUF0dHIoICJhcmlhLWFjdGl2ZWRlc2NlbmRhbnQiICkKCQkJLmZpbmQoICIudWktbWVudSIgKS5hbmRTZWxmKCkKCQkJCS5yZW1vdmVDbGFzcyggInVpLW1lbnUgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGwgdWktbWVudS1pY29ucyIgKQoJCQkJLnJlbW92ZUF0dHIoICJyb2xlIiApCgkJCQkucmVtb3ZlQXR0ciggInRhYkluZGV4IiApCgkJCQkucmVtb3ZlQXR0ciggImFyaWEtbGFiZWxsZWRieSIgKQoJCQkJLnJlbW92ZUF0dHIoICJhcmlhLWV4cGFuZGVkIiApCgkJCQkucmVtb3ZlQXR0ciggImFyaWEtaGlkZGVuIiApCgkJCQkucmVtb3ZlQXR0ciggImFyaWEtZGlzYWJsZWQiICkKCQkJCS5yZW1vdmVVbmlxdWVJZCgpCgkJCQkuc2hvdygpOwoKCQkvLyBEZXN0cm95IG1lbnUgaXRlbXMKCQl0aGlzLmVsZW1lbnQuZmluZCggIi51aS1tZW51LWl0ZW0iICkKCQkJLnJlbW92ZUNsYXNzKCAidWktbWVudS1pdGVtIiApCgkJCS5yZW1vdmVBdHRyKCAicm9sZSIgKQoJCQkucmVtb3ZlQXR0ciggImFyaWEtZGlzYWJsZWQiICkKCQkJLmNoaWxkcmVuKCAiYSIgKQoJCQkJLnJlbW92ZVVuaXF1ZUlkKCkKCQkJCS5yZW1vdmVDbGFzcyggInVpLWNvcm5lci1hbGwgdWktc3RhdGUtaG92ZXIiICkKCQkJCS5yZW1vdmVBdHRyKCAidGFiSW5kZXgiICkKCQkJCS5yZW1vdmVBdHRyKCAicm9sZSIgKQoJCQkJLnJlbW92ZUF0dHIoICJhcmlhLWhhc3BvcHVwIiApCgkJCQkuY2hpbGRyZW4oKS5lYWNoKCBmdW5jdGlvbigpIHsKCQkJCQl2YXIgZWxlbSA9ICQoIHRoaXMgKTsKCQkJCQlpZiAoIGVsZW0uZGF0YSggInVpLW1lbnUtc3VibWVudS1jYXJhdCIgKSApIHsKCQkJCQkJZWxlbS5yZW1vdmUoKTsKCQkJCQl9CgkJCQl9KTsKCgkJLy8gRGVzdHJveSBtZW51IGRpdmlkZXJzCgkJdGhpcy5lbGVtZW50LmZpbmQoICIudWktbWVudS1kaXZpZGVyIiApLnJlbW92ZUNsYXNzKCAidWktbWVudS1kaXZpZGVyIHVpLXdpZGdldC1jb250ZW50IiApOwoJfSwKCglfa2V5ZG93bjogZnVuY3Rpb24oIGV2ZW50ICkgewoJCXZhciBtYXRjaCwgcHJldiwgY2hhcmFjdGVyLCBza2lwLCByZWdleCwKCQkJcHJldmVudERlZmF1bHQgPSB0cnVlOwoKCQlmdW5jdGlvbiBlc2NhcGUoIHZhbHVlICkgewoJCQlyZXR1cm4gdmFsdWUucmVwbGFjZSggL1tcLVxbXF17fSgpKis/LixcXFxeJHwjXHNdL2csICJcXCQmIiApOwoJCX0KCgkJc3dpdGNoICggZXZlbnQua2V5Q29kZSApIHsKCQljYXNlICQudWkua2V5Q29kZS5QQUdFX1VQOgoJCQl0aGlzLnByZXZpb3VzUGFnZSggZXZlbnQgKTsKCQkJYnJlYWs7CgkJY2FzZSAkLnVpLmtleUNvZGUuUEFHRV9ET1dOOgoJCQl0aGlzLm5leHRQYWdlKCBldmVudCApOwoJCQlicmVhazsKCQljYXNlICQudWkua2V5Q29kZS5IT01FOgoJCQl0aGlzLl9tb3ZlKCAiZmlyc3QiLCAiZmlyc3QiLCBldmVudCApOwoJCQlicmVhazsKCQljYXNlICQudWkua2V5Q29kZS5FTkQ6CgkJCXRoaXMuX21vdmUoICJsYXN0IiwgImxhc3QiLCBldmVudCApOwoJCQlicmVhazsKCQljYXNlICQudWkua2V5Q29kZS5VUDoKCQkJdGhpcy5wcmV2aW91cyggZXZlbnQgKTsKCQkJYnJlYWs7CgkJY2FzZSAkLnVpLmtleUNvZGUuRE9XTjoKCQkJdGhpcy5uZXh0KCBldmVudCApOwoJCQlicmVhazsKCQljYXNlICQudWkua2V5Q29kZS5MRUZUOgoJCQl0aGlzLmNvbGxhcHNlKCBldmVudCApOwoJCQlicmVhazsKCQljYXNlICQudWkua2V5Q29kZS5SSUdIVDoKCQkJaWYgKCB0aGlzLmFjdGl2ZSAmJiAhdGhpcy5hY3RpdmUuaXMoICIudWktc3RhdGUtZGlzYWJsZWQiICkgKSB7CgkJCQl0aGlzLmV4cGFuZCggZXZlbnQgKTsKCQkJfQoJCQlicmVhazsKCQljYXNlICQudWkua2V5Q29kZS5FTlRFUjoKCQljYXNlICQudWkua2V5Q29kZS5TUEFDRToKCQkJdGhpcy5fYWN0aXZhdGUoIGV2ZW50ICk7CgkJCWJyZWFrOwoJCWNhc2UgJC51aS5rZXlDb2RlLkVTQ0FQRToKCQkJdGhpcy5jb2xsYXBzZSggZXZlbnQgKTsKCQkJYnJlYWs7CgkJZGVmYXVsdDoKCQkJcHJldmVudERlZmF1bHQgPSBmYWxzZTsKCQkJcHJldiA9IHRoaXMucHJldmlvdXNGaWx0ZXIgfHwgIiI7CgkJCWNoYXJhY3RlciA9IFN0cmluZy5mcm9tQ2hhckNvZGUoIGV2ZW50LmtleUNvZGUgKTsKCQkJc2tpcCA9IGZhbHNlOwoKCQkJY2xlYXJUaW1lb3V0KCB0aGlzLmZpbHRlclRpbWVyICk7CgoJCQlpZiAoIGNoYXJhY3RlciA9PT0gcHJldiApIHsKCQkJCXNraXAgPSB0cnVlOwoJCQl9IGVsc2UgewoJCQkJY2hhcmFjdGVyID0gcHJldiArIGNoYXJhY3RlcjsKCQkJfQoKCQkJcmVnZXggPSBuZXcgUmVnRXhwKCAiXiIgKyBlc2NhcGUoIGNoYXJhY3RlciApLCAiaSIgKTsKCQkJbWF0Y2ggPSB0aGlzLmFjdGl2ZU1lbnUuY2hpbGRyZW4oICIudWktbWVudS1pdGVtIiApLmZpbHRlcihmdW5jdGlvbigpIHsKCQkJCXJldHVybiByZWdleC50ZXN0KCAkKCB0aGlzICkuY2hpbGRyZW4oICJhIiApLnRleHQoKSApOwoJCQl9KTsKCQkJbWF0Y2ggPSBza2lwICYmIG1hdGNoLmluZGV4KCB0aGlzLmFjdGl2ZS5uZXh0KCkgKSAhPT0gLTEgPwoJCQkJdGhpcy5hY3RpdmUubmV4dEFsbCggIi51aS1tZW51LWl0ZW0iICkgOgoJCQkJbWF0Y2g7CgoJCQkvLyBJZiBubyBtYXRjaGVzIG9uIHRoZSBjdXJyZW50IGZpbHRlciwgcmVzZXQgdG8gdGhlIGxhc3QgY2hhcmFjdGVyIHByZXNzZWQKCQkJLy8gdG8gbW92ZSBkb3duIHRoZSBtZW51IHRvIHRoZSBmaXJzdCBpdGVtIHRoYXQgc3RhcnRzIHdpdGggdGhhdCBjaGFyYWN0ZXIKCQkJaWYgKCAhbWF0Y2gubGVuZ3RoICkgewoJCQkJY2hhcmFjdGVyID0gU3RyaW5nLmZyb21DaGFyQ29kZSggZXZlbnQua2V5Q29kZSApOwoJCQkJcmVnZXggPSBuZXcgUmVnRXhwKCAiXiIgKyBlc2NhcGUoIGNoYXJhY3RlciApLCAiaSIgKTsKCQkJCW1hdGNoID0gdGhpcy5hY3RpdmVNZW51LmNoaWxkcmVuKCAiLnVpLW1lbnUtaXRlbSIgKS5maWx0ZXIoZnVuY3Rpb24oKSB7CgkJCQkJcmV0dXJuIHJlZ2V4LnRlc3QoICQoIHRoaXMgKS5jaGlsZHJlbiggImEiICkudGV4dCgpICk7CgkJCQl9KTsKCQkJfQoKCQkJaWYgKCBtYXRjaC5sZW5ndGggKSB7CgkJCQl0aGlzLmZvY3VzKCBldmVudCwgbWF0Y2ggKTsKCQkJCWlmICggbWF0Y2gubGVuZ3RoID4gMSApIHsKCQkJCQl0aGlzLnByZXZpb3VzRmlsdGVyID0gY2hhcmFjdGVyOwoJCQkJCXRoaXMuZmlsdGVyVGltZXIgPSB0aGlzLl9kZWxheShmdW5jdGlvbigpIHsKCQkJCQkJZGVsZXRlIHRoaXMucHJldmlvdXNGaWx0ZXI7CgkJCQkJfSwgMTAwMCApOwoJCQkJfSBlbHNlIHsKCQkJCQlkZWxldGUgdGhpcy5wcmV2aW91c0ZpbHRlcjsKCQkJCX0KCQkJfSBlbHNlIHsKCQkJCWRlbGV0ZSB0aGlzLnByZXZpb3VzRmlsdGVyOwoJCQl9CgkJfQoKCQlpZiAoIHByZXZlbnREZWZhdWx0ICkgewoJCQlldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoJCX0KCX0sCgoJX2FjdGl2YXRlOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJaWYgKCAhdGhpcy5hY3RpdmUuaXMoICIudWktc3RhdGUtZGlzYWJsZWQiICkgKSB7CgkJCWlmICggdGhpcy5hY3RpdmUuY2hpbGRyZW4oICJhW2FyaWEtaGFzcG9wdXA9J3RydWUnXSIgKS5sZW5ndGggKSB7CgkJCQl0aGlzLmV4cGFuZCggZXZlbnQgKTsKCQkJfSBlbHNlIHsKCQkJCXRoaXMuc2VsZWN0KCBldmVudCApOwoJCQl9CgkJfQoJfSwKCglyZWZyZXNoOiBmdW5jdGlvbigpIHsKCQl2YXIgbWVudXMsCgkJCWljb24gPSB0aGlzLm9wdGlvbnMuaWNvbnMuc3VibWVudSwKCQkJc3VibWVudXMgPSB0aGlzLmVsZW1lbnQuZmluZCggdGhpcy5vcHRpb25zLm1lbnVzICk7CgoJCS8vIEluaXRpYWxpemUgbmVzdGVkIG1lbnVzCgkJc3VibWVudXMuZmlsdGVyKCAiOm5vdCgudWktbWVudSkiICkKCQkJLmFkZENsYXNzKCAidWktbWVudSB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWFsbCIgKQoJCQkuaGlkZSgpCgkJCS5hdHRyKHsKCQkJCXJvbGU6IHRoaXMub3B0aW9ucy5yb2xlLAoJCQkJImFyaWEtaGlkZGVuIjogInRydWUiLAoJCQkJImFyaWEtZXhwYW5kZWQiOiAiZmFsc2UiCgkJCX0pCgkJCS5lYWNoKGZ1bmN0aW9uKCkgewoJCQkJdmFyIG1lbnUgPSAkKCB0aGlzICksCgkJCQkJaXRlbSA9IG1lbnUucHJldiggImEiICksCgkJCQkJc3VibWVudUNhcmF0ID0gJCggIjxzcGFuPiIgKQoJCQkJCQkuYWRkQ2xhc3MoICJ1aS1tZW51LWljb24gdWktaWNvbiAiICsgaWNvbiApCgkJCQkJCS5kYXRhKCAidWktbWVudS1zdWJtZW51LWNhcmF0IiwgdHJ1ZSApOwoKCQkJCWl0ZW0KCQkJCQkuYXR0ciggImFyaWEtaGFzcG9wdXAiLCAidHJ1ZSIgKQoJCQkJCS5wcmVwZW5kKCBzdWJtZW51Q2FyYXQgKTsKCQkJCW1lbnUuYXR0ciggImFyaWEtbGFiZWxsZWRieSIsIGl0ZW0uYXR0ciggImlkIiApICk7CgkJCX0pOwoKCQltZW51cyA9IHN1Ym1lbnVzLmFkZCggdGhpcy5lbGVtZW50ICk7CgoJCS8vIERvbid0IHJlZnJlc2ggbGlzdCBpdGVtcyB0aGF0IGFyZSBhbHJlYWR5IGFkYXB0ZWQKCQltZW51cy5jaGlsZHJlbiggIjpub3QoLnVpLW1lbnUtaXRlbSk6aGFzKGEpIiApCgkJCS5hZGRDbGFzcyggInVpLW1lbnUtaXRlbSIgKQoJCQkuYXR0ciggInJvbGUiLCAicHJlc2VudGF0aW9uIiApCgkJCS5jaGlsZHJlbiggImEiICkKCQkJCS51bmlxdWVJZCgpCgkJCQkuYWRkQ2xhc3MoICJ1aS1jb3JuZXItYWxsIiApCgkJCQkuYXR0cih7CgkJCQkJdGFiSW5kZXg6IC0xLAoJCQkJCXJvbGU6IHRoaXMuX2l0ZW1Sb2xlKCkKCQkJCX0pOwoKCQkvLyBJbml0aWFsaXplIHVubGlua2VkIG1lbnUtaXRlbXMgY29udGFpbmluZyBzcGFjZXMgYW5kL29yIGRhc2hlcyBvbmx5IGFzIGRpdmlkZXJzCgkJbWVudXMuY2hpbGRyZW4oICI6bm90KC51aS1tZW51LWl0ZW0pIiApLmVhY2goZnVuY3Rpb24oKSB7CgkJCXZhciBpdGVtID0gJCggdGhpcyApOwoJCQkvLyBoeXBoZW4sIGVtIGRhc2gsIGVuIGRhc2gKCQkJaWYgKCAhL1teXC3igJTigJNcc10vLnRlc3QoIGl0ZW0udGV4dCgpICkgKSB7CgkJCQlpdGVtLmFkZENsYXNzKCAidWktd2lkZ2V0LWNvbnRlbnQgdWktbWVudS1kaXZpZGVyIiApOwoJCQl9CgkJfSk7CgoJCS8vIEFkZCBhcmlhLWRpc2FibGVkIGF0dHJpYnV0ZSB0byBhbnkgZGlzYWJsZWQgbWVudSBpdGVtCgkJbWVudXMuY2hpbGRyZW4oICIudWktc3RhdGUtZGlzYWJsZWQiICkuYXR0ciggImFyaWEtZGlzYWJsZWQiLCAidHJ1ZSIgKTsKCgkJLy8gSWYgdGhlIGFjdGl2ZSBpdGVtIGhhcyBiZWVuIHJlbW92ZWQsIGJsdXIgdGhlIG1lbnUKCQlpZiAoIHRoaXMuYWN0aXZlICYmICEkLmNvbnRhaW5zKCB0aGlzLmVsZW1lbnRbIDAgXSwgdGhpcy5hY3RpdmVbIDAgXSApICkgewoJCQl0aGlzLmJsdXIoKTsKCQl9Cgl9LAoKCV9pdGVtUm9sZTogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHsKCQkJbWVudTogIm1lbnVpdGVtIiwKCQkJbGlzdGJveDogIm9wdGlvbiIKCQl9WyB0aGlzLm9wdGlvbnMucm9sZSBdOwoJfSwKCglmb2N1czogZnVuY3Rpb24oIGV2ZW50LCBpdGVtICkgewoJCXZhciBuZXN0ZWQsIGZvY3VzZWQ7CgkJdGhpcy5ibHVyKCBldmVudCwgZXZlbnQgJiYgZXZlbnQudHlwZSA9PT0gImZvY3VzIiApOwoKCQl0aGlzLl9zY3JvbGxJbnRvVmlldyggaXRlbSApOwoKCQl0aGlzLmFjdGl2ZSA9IGl0ZW0uZmlyc3QoKTsKCQlmb2N1c2VkID0gdGhpcy5hY3RpdmUuY2hpbGRyZW4oICJhIiApLmFkZENsYXNzKCAidWktc3RhdGUtZm9jdXMiICk7CgkJLy8gT25seSB1cGRhdGUgYXJpYS1hY3RpdmVkZXNjZW5kYW50IGlmIHRoZXJlJ3MgYSByb2xlCgkJLy8gb3RoZXJ3aXNlIHdlIGFzc3VtZSBmb2N1cyBpcyBtYW5hZ2VkIGVsc2V3aGVyZQoJCWlmICggdGhpcy5vcHRpb25zLnJvbGUgKSB7CgkJCXRoaXMuZWxlbWVudC5hdHRyKCAiYXJpYS1hY3RpdmVkZXNjZW5kYW50IiwgZm9jdXNlZC5hdHRyKCAiaWQiICkgKTsKCQl9CgoJCS8vIEhpZ2hsaWdodCBhY3RpdmUgcGFyZW50IG1lbnUgaXRlbSwgaWYgYW55CgkJdGhpcy5hY3RpdmUKCQkJLnBhcmVudCgpCgkJCS5jbG9zZXN0KCAiLnVpLW1lbnUtaXRlbSIgKQoJCQkuY2hpbGRyZW4oICJhOmZpcnN0IiApCgkJCS5hZGRDbGFzcyggInVpLXN0YXRlLWFjdGl2ZSIgKTsKCgkJaWYgKCBldmVudCAmJiBldmVudC50eXBlID09PSAia2V5ZG93biIgKSB7CgkJCXRoaXMuX2Nsb3NlKCk7CgkJfSBlbHNlIHsKCQkJdGhpcy50aW1lciA9IHRoaXMuX2RlbGF5KGZ1bmN0aW9uKCkgewoJCQkJdGhpcy5fY2xvc2UoKTsKCQkJfSwgdGhpcy5kZWxheSApOwoJCX0KCgkJbmVzdGVkID0gaXRlbS5jaGlsZHJlbiggIi51aS1tZW51IiApOwoJCWlmICggbmVzdGVkLmxlbmd0aCAmJiAoIC9ebW91c2UvLnRlc3QoIGV2ZW50LnR5cGUgKSApICkgewoJCQl0aGlzLl9zdGFydE9wZW5pbmcobmVzdGVkKTsKCQl9CgkJdGhpcy5hY3RpdmVNZW51ID0gaXRlbS5wYXJlbnQoKTsKCgkJdGhpcy5fdHJpZ2dlciggImZvY3VzIiwgZXZlbnQsIHsgaXRlbTogaXRlbSB9ICk7Cgl9LAoKCV9zY3JvbGxJbnRvVmlldzogZnVuY3Rpb24oIGl0ZW0gKSB7CgkJdmFyIGJvcmRlclRvcCwgcGFkZGluZ1RvcCwgb2Zmc2V0LCBzY3JvbGwsIGVsZW1lbnRIZWlnaHQsIGl0ZW1IZWlnaHQ7CgkJaWYgKCB0aGlzLl9oYXNTY3JvbGwoKSApIHsKCQkJYm9yZGVyVG9wID0gcGFyc2VGbG9hdCggJC5jc3MoIHRoaXMuYWN0aXZlTWVudVswXSwgImJvcmRlclRvcFdpZHRoIiApICkgfHwgMDsKCQkJcGFkZGluZ1RvcCA9IHBhcnNlRmxvYXQoICQuY3NzKCB0aGlzLmFjdGl2ZU1lbnVbMF0sICJwYWRkaW5nVG9wIiApICkgfHwgMDsKCQkJb2Zmc2V0ID0gaXRlbS5vZmZzZXQoKS50b3AgLSB0aGlzLmFjdGl2ZU1lbnUub2Zmc2V0KCkudG9wIC0gYm9yZGVyVG9wIC0gcGFkZGluZ1RvcDsKCQkJc2Nyb2xsID0gdGhpcy5hY3RpdmVNZW51LnNjcm9sbFRvcCgpOwoJCQllbGVtZW50SGVpZ2h0ID0gdGhpcy5hY3RpdmVNZW51LmhlaWdodCgpOwoJCQlpdGVtSGVpZ2h0ID0gaXRlbS5oZWlnaHQoKTsKCgkJCWlmICggb2Zmc2V0IDwgMCApIHsKCQkJCXRoaXMuYWN0aXZlTWVudS5zY3JvbGxUb3AoIHNjcm9sbCArIG9mZnNldCApOwoJCQl9IGVsc2UgaWYgKCBvZmZzZXQgKyBpdGVtSGVpZ2h0ID4gZWxlbWVudEhlaWdodCApIHsKCQkJCXRoaXMuYWN0aXZlTWVudS5zY3JvbGxUb3AoIHNjcm9sbCArIG9mZnNldCAtIGVsZW1lbnRIZWlnaHQgKyBpdGVtSGVpZ2h0ICk7CgkJCX0KCQl9Cgl9LAoKCWJsdXI6IGZ1bmN0aW9uKCBldmVudCwgZnJvbUZvY3VzICkgewoJCWlmICggIWZyb21Gb2N1cyApIHsKCQkJY2xlYXJUaW1lb3V0KCB0aGlzLnRpbWVyICk7CgkJfQoKCQlpZiAoICF0aGlzLmFjdGl2ZSApIHsKCQkJcmV0dXJuOwoJCX0KCgkJdGhpcy5hY3RpdmUuY2hpbGRyZW4oICJhIiApLnJlbW92ZUNsYXNzKCAidWktc3RhdGUtZm9jdXMiICk7CgkJdGhpcy5hY3RpdmUgPSBudWxsOwoKCQl0aGlzLl90cmlnZ2VyKCAiYmx1ciIsIGV2ZW50LCB7IGl0ZW06IHRoaXMuYWN0aXZlIH0gKTsKCX0sCgoJX3N0YXJ0T3BlbmluZzogZnVuY3Rpb24oIHN1Ym1lbnUgKSB7CgkJY2xlYXJUaW1lb3V0KCB0aGlzLnRpbWVyICk7CgoJCS8vIERvbid0IG9wZW4gaWYgYWxyZWFkeSBvcGVuIGZpeGVzIGEgRmlyZWZveCBidWcgdGhhdCBjYXVzZWQgYSAuNSBwaXhlbAoJCS8vIHNoaWZ0IGluIHRoZSBzdWJtZW51IHBvc2l0aW9uIHdoZW4gbW91c2luZyBvdmVyIHRoZSBjYXJhdCBpY29uCgkJaWYgKCBzdWJtZW51LmF0dHIoICJhcmlhLWhpZGRlbiIgKSAhPT0gInRydWUiICkgewoJCQlyZXR1cm47CgkJfQoKCQl0aGlzLnRpbWVyID0gdGhpcy5fZGVsYXkoZnVuY3Rpb24oKSB7CgkJCXRoaXMuX2Nsb3NlKCk7CgkJCXRoaXMuX29wZW4oIHN1Ym1lbnUgKTsKCQl9LCB0aGlzLmRlbGF5ICk7Cgl9LAoKCV9vcGVuOiBmdW5jdGlvbiggc3VibWVudSApIHsKCQl2YXIgcG9zaXRpb24gPSAkLmV4dGVuZCh7CgkJCW9mOiB0aGlzLmFjdGl2ZQoJCX0sIHRoaXMub3B0aW9ucy5wb3NpdGlvbiApOwoKCQljbGVhclRpbWVvdXQoIHRoaXMudGltZXIgKTsKCQl0aGlzLmVsZW1lbnQuZmluZCggIi51aS1tZW51IiApLm5vdCggc3VibWVudS5wYXJlbnRzKCAiLnVpLW1lbnUiICkgKQoJCQkuaGlkZSgpCgkJCS5hdHRyKCAiYXJpYS1oaWRkZW4iLCAidHJ1ZSIgKTsKCgkJc3VibWVudQoJCQkuc2hvdygpCgkJCS5yZW1vdmVBdHRyKCAiYXJpYS1oaWRkZW4iICkKCQkJLmF0dHIoICJhcmlhLWV4cGFuZGVkIiwgInRydWUiICkKCQkJLnBvc2l0aW9uKCBwb3NpdGlvbiApOwoJfSwKCgljb2xsYXBzZUFsbDogZnVuY3Rpb24oIGV2ZW50LCBhbGwgKSB7CgkJY2xlYXJUaW1lb3V0KCB0aGlzLnRpbWVyICk7CgkJdGhpcy50aW1lciA9IHRoaXMuX2RlbGF5KGZ1bmN0aW9uKCkgewoJCQkvLyBJZiB3ZSB3ZXJlIHBhc3NlZCBhbiBldmVudCwgbG9vayBmb3IgdGhlIHN1Ym1lbnUgdGhhdCBjb250YWlucyB0aGUgZXZlbnQKCQkJdmFyIGN1cnJlbnRNZW51ID0gYWxsID8gdGhpcy5lbGVtZW50IDoKCQkJCSQoIGV2ZW50ICYmIGV2ZW50LnRhcmdldCApLmNsb3Nlc3QoIHRoaXMuZWxlbWVudC5maW5kKCAiLnVpLW1lbnUiICkgKTsKCgkJCS8vIElmIHdlIGZvdW5kIG5vIHZhbGlkIHN1Ym1lbnUgYW5jZXN0b3IsIHVzZSB0aGUgbWFpbiBtZW51IHRvIGNsb3NlIGFsbCBzdWIgbWVudXMgYW55d2F5CgkJCWlmICggIWN1cnJlbnRNZW51Lmxlbmd0aCApIHsKCQkJCWN1cnJlbnRNZW51ID0gdGhpcy5lbGVtZW50OwoJCQl9CgoJCQl0aGlzLl9jbG9zZSggY3VycmVudE1lbnUgKTsKCgkJCXRoaXMuYmx1ciggZXZlbnQgKTsKCQkJdGhpcy5hY3RpdmVNZW51ID0gY3VycmVudE1lbnU7CgkJfSwgdGhpcy5kZWxheSApOwoJfSwKCgkvLyBXaXRoIG5vIGFyZ3VtZW50cywgY2xvc2VzIHRoZSBjdXJyZW50bHkgYWN0aXZlIG1lbnUgLSBpZiBub3RoaW5nIGlzIGFjdGl2ZQoJLy8gaXQgY2xvc2VzIGFsbCBtZW51cy4gIElmIHBhc3NlZCBhbiBhcmd1bWVudCwgaXQgd2lsbCBzZWFyY2ggZm9yIG1lbnVzIEJFTE9XCglfY2xvc2U6IGZ1bmN0aW9uKCBzdGFydE1lbnUgKSB7CgkJaWYgKCAhc3RhcnRNZW51ICkgewoJCQlzdGFydE1lbnUgPSB0aGlzLmFjdGl2ZSA/IHRoaXMuYWN0aXZlLnBhcmVudCgpIDogdGhpcy5lbGVtZW50OwoJCX0KCgkJc3RhcnRNZW51CgkJCS5maW5kKCAiLnVpLW1lbnUiICkKCQkJCS5oaWRlKCkKCQkJCS5hdHRyKCAiYXJpYS1oaWRkZW4iLCAidHJ1ZSIgKQoJCQkJLmF0dHIoICJhcmlhLWV4cGFuZGVkIiwgImZhbHNlIiApCgkJCS5lbmQoKQoJCQkuZmluZCggImEudWktc3RhdGUtYWN0aXZlIiApCgkJCQkucmVtb3ZlQ2xhc3MoICJ1aS1zdGF0ZS1hY3RpdmUiICk7Cgl9LAoKCWNvbGxhcHNlOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJdmFyIG5ld0l0ZW0gPSB0aGlzLmFjdGl2ZSAmJgoJCQl0aGlzLmFjdGl2ZS5wYXJlbnQoKS5jbG9zZXN0KCAiLnVpLW1lbnUtaXRlbSIsIHRoaXMuZWxlbWVudCApOwoJCWlmICggbmV3SXRlbSAmJiBuZXdJdGVtLmxlbmd0aCApIHsKCQkJdGhpcy5fY2xvc2UoKTsKCQkJdGhpcy5mb2N1cyggZXZlbnQsIG5ld0l0ZW0gKTsKCQl9Cgl9LAoKCWV4cGFuZDogZnVuY3Rpb24oIGV2ZW50ICkgewoJCXZhciBuZXdJdGVtID0gdGhpcy5hY3RpdmUgJiYKCQkJdGhpcy5hY3RpdmUKCQkJCS5jaGlsZHJlbiggIi51aS1tZW51ICIgKQoJCQkJLmNoaWxkcmVuKCAiLnVpLW1lbnUtaXRlbSIgKQoJCQkJLmZpcnN0KCk7CgoJCWlmICggbmV3SXRlbSAmJiBuZXdJdGVtLmxlbmd0aCApIHsKCQkJdGhpcy5fb3BlbiggbmV3SXRlbS5wYXJlbnQoKSApOwoKCQkJLy8gRGVsYXkgc28gRmlyZWZveCB3aWxsIG5vdCBoaWRlIGFjdGl2ZWRlc2NlbmRhbnQgY2hhbmdlIGluIGV4cGFuZGluZyBzdWJtZW51IGZyb20gQVQKCQkJdGhpcy5fZGVsYXkoZnVuY3Rpb24oKSB7CgkJCQl0aGlzLmZvY3VzKCBldmVudCwgbmV3SXRlbSApOwoJCQl9KTsKCQl9Cgl9LAoKCW5leHQ6IGZ1bmN0aW9uKCBldmVudCApIHsKCQl0aGlzLl9tb3ZlKCAibmV4dCIsICJmaXJzdCIsIGV2ZW50ICk7Cgl9LAoKCXByZXZpb3VzOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJdGhpcy5fbW92ZSggInByZXYiLCAibGFzdCIsIGV2ZW50ICk7Cgl9LAoKCWlzRmlyc3RJdGVtOiBmdW5jdGlvbigpIHsKCQlyZXR1cm4gdGhpcy5hY3RpdmUgJiYgIXRoaXMuYWN0aXZlLnByZXZBbGwoICIudWktbWVudS1pdGVtIiApLmxlbmd0aDsKCX0sCgoJaXNMYXN0SXRlbTogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHRoaXMuYWN0aXZlICYmICF0aGlzLmFjdGl2ZS5uZXh0QWxsKCAiLnVpLW1lbnUtaXRlbSIgKS5sZW5ndGg7Cgl9LAoKCV9tb3ZlOiBmdW5jdGlvbiggZGlyZWN0aW9uLCBmaWx0ZXIsIGV2ZW50ICkgewoJCXZhciBuZXh0OwoJCWlmICggdGhpcy5hY3RpdmUgKSB7CgkJCWlmICggZGlyZWN0aW9uID09PSAiZmlyc3QiIHx8IGRpcmVjdGlvbiA9PT0gImxhc3QiICkgewoJCQkJbmV4dCA9IHRoaXMuYWN0aXZlCgkJCQkJWyBkaXJlY3Rpb24gPT09ICJmaXJzdCIgPyAicHJldkFsbCIgOiAibmV4dEFsbCIgXSggIi51aS1tZW51LWl0ZW0iICkKCQkJCQkuZXEoIC0xICk7CgkJCX0gZWxzZSB7CgkJCQluZXh0ID0gdGhpcy5hY3RpdmUKCQkJCQlbIGRpcmVjdGlvbiArICJBbGwiIF0oICIudWktbWVudS1pdGVtIiApCgkJCQkJLmVxKCAwICk7CgkJCX0KCQl9CgkJaWYgKCAhbmV4dCB8fCAhbmV4dC5sZW5ndGggfHwgIXRoaXMuYWN0aXZlICkgewoJCQluZXh0ID0gdGhpcy5hY3RpdmVNZW51LmNoaWxkcmVuKCAiLnVpLW1lbnUtaXRlbSIgKVsgZmlsdGVyIF0oKTsKCQl9CgoJCXRoaXMuZm9jdXMoIGV2ZW50LCBuZXh0ICk7Cgl9LAoKCW5leHRQYWdlOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJdmFyIGl0ZW0sIGJhc2UsIGhlaWdodDsKCgkJaWYgKCAhdGhpcy5hY3RpdmUgKSB7CgkJCXRoaXMubmV4dCggZXZlbnQgKTsKCQkJcmV0dXJuOwoJCX0KCQlpZiAoIHRoaXMuaXNMYXN0SXRlbSgpICkgewoJCQlyZXR1cm47CgkJfQoJCWlmICggdGhpcy5faGFzU2Nyb2xsKCkgKSB7CgkJCWJhc2UgPSB0aGlzLmFjdGl2ZS5vZmZzZXQoKS50b3A7CgkJCWhlaWdodCA9IHRoaXMuZWxlbWVudC5oZWlnaHQoKTsKCQkJdGhpcy5hY3RpdmUubmV4dEFsbCggIi51aS1tZW51LWl0ZW0iICkuZWFjaChmdW5jdGlvbigpIHsKCQkJCWl0ZW0gPSAkKCB0aGlzICk7CgkJCQlyZXR1cm4gaXRlbS5vZmZzZXQoKS50b3AgLSBiYXNlIC0gaGVpZ2h0IDwgMDsKCQkJfSk7CgoJCQl0aGlzLmZvY3VzKCBldmVudCwgaXRlbSApOwoJCX0gZWxzZSB7CgkJCXRoaXMuZm9jdXMoIGV2ZW50LCB0aGlzLmFjdGl2ZU1lbnUuY2hpbGRyZW4oICIudWktbWVudS1pdGVtIiApCgkJCQlbICF0aGlzLmFjdGl2ZSA/ICJmaXJzdCIgOiAibGFzdCIgXSgpICk7CgkJfQoJfSwKCglwcmV2aW91c1BhZ2U6IGZ1bmN0aW9uKCBldmVudCApIHsKCQl2YXIgaXRlbSwgYmFzZSwgaGVpZ2h0OwoJCWlmICggIXRoaXMuYWN0aXZlICkgewoJCQl0aGlzLm5leHQoIGV2ZW50ICk7CgkJCXJldHVybjsKCQl9CgkJaWYgKCB0aGlzLmlzRmlyc3RJdGVtKCkgKSB7CgkJCXJldHVybjsKCQl9CgkJaWYgKCB0aGlzLl9oYXNTY3JvbGwoKSApIHsKCQkJYmFzZSA9IHRoaXMuYWN0aXZlLm9mZnNldCgpLnRvcDsKCQkJaGVpZ2h0ID0gdGhpcy5lbGVtZW50LmhlaWdodCgpOwoJCQl0aGlzLmFjdGl2ZS5wcmV2QWxsKCAiLnVpLW1lbnUtaXRlbSIgKS5lYWNoKGZ1bmN0aW9uKCkgewoJCQkJaXRlbSA9ICQoIHRoaXMgKTsKCQkJCXJldHVybiBpdGVtLm9mZnNldCgpLnRvcCAtIGJhc2UgKyBoZWlnaHQgPiAwOwoJCQl9KTsKCgkJCXRoaXMuZm9jdXMoIGV2ZW50LCBpdGVtICk7CgkJfSBlbHNlIHsKCQkJdGhpcy5mb2N1cyggZXZlbnQsIHRoaXMuYWN0aXZlTWVudS5jaGlsZHJlbiggIi51aS1tZW51LWl0ZW0iICkuZmlyc3QoKSApOwoJCX0KCX0sCgoJX2hhc1Njcm9sbDogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHRoaXMuZWxlbWVudC5vdXRlckhlaWdodCgpIDwgdGhpcy5lbGVtZW50LnByb3AoICJzY3JvbGxIZWlnaHQiICk7Cgl9LAoKCXNlbGVjdDogZnVuY3Rpb24oIGV2ZW50ICkgewoJCS8vIFRPRE86IEl0IHNob3VsZCBuZXZlciBiZSBwb3NzaWJsZSB0byBub3QgaGF2ZSBhbiBhY3RpdmUgaXRlbSBhdCB0aGlzCgkJLy8gcG9pbnQsIGJ1dCB0aGUgdGVzdHMgZG9uJ3QgdHJpZ2dlciBtb3VzZWVudGVyIGJlZm9yZSBjbGljay4KCQl0aGlzLmFjdGl2ZSA9IHRoaXMuYWN0aXZlIHx8ICQoIGV2ZW50LnRhcmdldCApLmNsb3Nlc3QoICIudWktbWVudS1pdGVtIiApOwoJCXZhciB1aSA9IHsgaXRlbTogdGhpcy5hY3RpdmUgfTsKCQlpZiAoICF0aGlzLmFjdGl2ZS5oYXMoICIudWktbWVudSIgKS5sZW5ndGggKSB7CgkJCXRoaXMuY29sbGFwc2VBbGwoIGV2ZW50LCB0cnVlICk7CgkJfQoJCXRoaXMuX3RyaWdnZXIoICJzZWxlY3QiLCBldmVudCwgdWkgKTsKCX0KfSk7Cgp9KCBqUXVlcnkgKSk7CihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkgewoKJC53aWRnZXQoICJ1aS5wcm9ncmVzc2JhciIsIHsKCXZlcnNpb246ICIxLjkuMiIsCglvcHRpb25zOiB7CgkJdmFsdWU6IDAsCgkJbWF4OiAxMDAKCX0sCgoJbWluOiAwLAoKCV9jcmVhdGU6IGZ1bmN0aW9uKCkgewoJCXRoaXMuZWxlbWVudAoJCQkuYWRkQ2xhc3MoICJ1aS1wcm9ncmVzc2JhciB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWFsbCIgKQoJCQkuYXR0cih7CgkJCQlyb2xlOiAicHJvZ3Jlc3NiYXIiLAoJCQkJImFyaWEtdmFsdWVtaW4iOiB0aGlzLm1pbiwKCQkJCSJhcmlhLXZhbHVlbWF4IjogdGhpcy5vcHRpb25zLm1heCwKCQkJCSJhcmlhLXZhbHVlbm93IjogdGhpcy5fdmFsdWUoKQoJCQl9KTsKCgkJdGhpcy52YWx1ZURpdiA9ICQoICI8ZGl2IGNsYXNzPSd1aS1wcm9ncmVzc2Jhci12YWx1ZSB1aS13aWRnZXQtaGVhZGVyIHVpLWNvcm5lci1sZWZ0Jz48L2Rpdj4iICkKCQkJLmFwcGVuZFRvKCB0aGlzLmVsZW1lbnQgKTsKCgkJdGhpcy5vbGRWYWx1ZSA9IHRoaXMuX3ZhbHVlKCk7CgkJdGhpcy5fcmVmcmVzaFZhbHVlKCk7Cgl9LAoKCV9kZXN0cm95OiBmdW5jdGlvbigpIHsKCQl0aGlzLmVsZW1lbnQKCQkJLnJlbW92ZUNsYXNzKCAidWktcHJvZ3Jlc3NiYXIgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGwiICkKCQkJLnJlbW92ZUF0dHIoICJyb2xlIiApCgkJCS5yZW1vdmVBdHRyKCAiYXJpYS12YWx1ZW1pbiIgKQoJCQkucmVtb3ZlQXR0ciggImFyaWEtdmFsdWVtYXgiICkKCQkJLnJlbW92ZUF0dHIoICJhcmlhLXZhbHVlbm93IiApOwoKCQl0aGlzLnZhbHVlRGl2LnJlbW92ZSgpOwoJfSwKCgl2YWx1ZTogZnVuY3Rpb24oIG5ld1ZhbHVlICkgewoJCWlmICggbmV3VmFsdWUgPT09IHVuZGVmaW5lZCApIHsKCQkJcmV0dXJuIHRoaXMuX3ZhbHVlKCk7CgkJfQoKCQl0aGlzLl9zZXRPcHRpb24oICJ2YWx1ZSIsIG5ld1ZhbHVlICk7CgkJcmV0dXJuIHRoaXM7Cgl9LAoKCV9zZXRPcHRpb246IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkgewoJCWlmICgga2V5ID09PSAidmFsdWUiICkgewoJCQl0aGlzLm9wdGlvbnMudmFsdWUgPSB2YWx1ZTsKCQkJdGhpcy5fcmVmcmVzaFZhbHVlKCk7CgkJCWlmICggdGhpcy5fdmFsdWUoKSA9PT0gdGhpcy5vcHRpb25zLm1heCApIHsKCQkJCXRoaXMuX3RyaWdnZXIoICJjb21wbGV0ZSIgKTsKCQkJfQoJCX0KCgkJdGhpcy5fc3VwZXIoIGtleSwgdmFsdWUgKTsKCX0sCgoJX3ZhbHVlOiBmdW5jdGlvbigpIHsKCQl2YXIgdmFsID0gdGhpcy5vcHRpb25zLnZhbHVlOwoJCS8vIG5vcm1hbGl6ZSBpbnZhbGlkIHZhbHVlCgkJaWYgKCB0eXBlb2YgdmFsICE9PSAibnVtYmVyIiApIHsKCQkJdmFsID0gMDsKCQl9CgkJcmV0dXJuIE1hdGgubWluKCB0aGlzLm9wdGlvbnMubWF4LCBNYXRoLm1heCggdGhpcy5taW4sIHZhbCApICk7Cgl9LAoKCV9wZXJjZW50YWdlOiBmdW5jdGlvbigpIHsKCQlyZXR1cm4gMTAwICogdGhpcy5fdmFsdWUoKSAvIHRoaXMub3B0aW9ucy5tYXg7Cgl9LAoKCV9yZWZyZXNoVmFsdWU6IGZ1bmN0aW9uKCkgewoJCXZhciB2YWx1ZSA9IHRoaXMudmFsdWUoKSwKCQkJcGVyY2VudGFnZSA9IHRoaXMuX3BlcmNlbnRhZ2UoKTsKCgkJaWYgKCB0aGlzLm9sZFZhbHVlICE9PSB2YWx1ZSApIHsKCQkJdGhpcy5vbGRWYWx1ZSA9IHZhbHVlOwoJCQl0aGlzLl90cmlnZ2VyKCAiY2hhbmdlIiApOwoJCX0KCgkJdGhpcy52YWx1ZURpdgoJCQkudG9nZ2xlKCB2YWx1ZSA+IHRoaXMubWluICkKCQkJLnRvZ2dsZUNsYXNzKCAidWktY29ybmVyLXJpZ2h0IiwgdmFsdWUgPT09IHRoaXMub3B0aW9ucy5tYXggKQoJCQkud2lkdGgoIHBlcmNlbnRhZ2UudG9GaXhlZCgwKSArICIlIiApOwoJCXRoaXMuZWxlbWVudC5hdHRyKCAiYXJpYS12YWx1ZW5vdyIsIHZhbHVlICk7Cgl9Cn0pOwoKfSkoIGpRdWVyeSApOwooZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHsKCi8vIG51bWJlciBvZiBwYWdlcyBpbiBhIHNsaWRlcgovLyAoaG93IG1hbnkgdGltZXMgY2FuIHlvdSBwYWdlIHVwL2Rvd24gdG8gZ28gdGhyb3VnaCB0aGUgd2hvbGUgcmFuZ2UpCnZhciBudW1QYWdlcyA9IDU7CgokLndpZGdldCggInVpLnNsaWRlciIsICQudWkubW91c2UsIHsKCXZlcnNpb246ICIxLjkuMiIsCgl3aWRnZXRFdmVudFByZWZpeDogInNsaWRlIiwKCglvcHRpb25zOiB7CgkJYW5pbWF0ZTogZmFsc2UsCgkJZGlzdGFuY2U6IDAsCgkJbWF4OiAxMDAsCgkJbWluOiAwLAoJCW9yaWVudGF0aW9uOiAiaG9yaXpvbnRhbCIsCgkJcmFuZ2U6IGZhbHNlLAoJCXN0ZXA6IDEsCgkJdmFsdWU6IDAsCgkJdmFsdWVzOiBudWxsCgl9LAoKCV9jcmVhdGU6IGZ1bmN0aW9uKCkgewoJCXZhciBpLCBoYW5kbGVDb3VudCwKCQkJbyA9IHRoaXMub3B0aW9ucywKCQkJZXhpc3RpbmdIYW5kbGVzID0gdGhpcy5lbGVtZW50LmZpbmQoICIudWktc2xpZGVyLWhhbmRsZSIgKS5hZGRDbGFzcyggInVpLXN0YXRlLWRlZmF1bHQgdWktY29ybmVyLWFsbCIgKSwKCQkJaGFuZGxlID0gIjxhIGNsYXNzPSd1aS1zbGlkZXItaGFuZGxlIHVpLXN0YXRlLWRlZmF1bHQgdWktY29ybmVyLWFsbCcgaHJlZj0nIyc+PC9hPiIsCgkJCWhhbmRsZXMgPSBbXTsKCgkJdGhpcy5fa2V5U2xpZGluZyA9IGZhbHNlOwoJCXRoaXMuX21vdXNlU2xpZGluZyA9IGZhbHNlOwoJCXRoaXMuX2FuaW1hdGVPZmYgPSB0cnVlOwoJCXRoaXMuX2hhbmRsZUluZGV4ID0gbnVsbDsKCQl0aGlzLl9kZXRlY3RPcmllbnRhdGlvbigpOwoJCXRoaXMuX21vdXNlSW5pdCgpOwoKCQl0aGlzLmVsZW1lbnQKCQkJLmFkZENsYXNzKCAidWktc2xpZGVyIiArCgkJCQkiIHVpLXNsaWRlci0iICsgdGhpcy5vcmllbnRhdGlvbiArCgkJCQkiIHVpLXdpZGdldCIgKwoJCQkJIiB1aS13aWRnZXQtY29udGVudCIgKwoJCQkJIiB1aS1jb3JuZXItYWxsIiArCgkJCQkoIG8uZGlzYWJsZWQgPyAiIHVpLXNsaWRlci1kaXNhYmxlZCB1aS1kaXNhYmxlZCIgOiAiIiApICk7CgoJCXRoaXMucmFuZ2UgPSAkKFtdKTsKCgkJaWYgKCBvLnJhbmdlICkgewoJCQlpZiAoIG8ucmFuZ2UgPT09IHRydWUgKSB7CgkJCQlpZiAoICFvLnZhbHVlcyApIHsKCQkJCQlvLnZhbHVlcyA9IFsgdGhpcy5fdmFsdWVNaW4oKSwgdGhpcy5fdmFsdWVNaW4oKSBdOwoJCQkJfQoJCQkJaWYgKCBvLnZhbHVlcy5sZW5ndGggJiYgby52YWx1ZXMubGVuZ3RoICE9PSAyICkgewoJCQkJCW8udmFsdWVzID0gWyBvLnZhbHVlc1swXSwgby52YWx1ZXNbMF0gXTsKCQkJCX0KCQkJfQoKCQkJdGhpcy5yYW5nZSA9ICQoICI8ZGl2PjwvZGl2PiIgKQoJCQkJLmFwcGVuZFRvKCB0aGlzLmVsZW1lbnQgKQoJCQkJLmFkZENsYXNzKCAidWktc2xpZGVyLXJhbmdlIiArCgkJCQkvLyBub3RlOiB0aGlzIGlzbid0IHRoZSBtb3N0IGZpdHRpbmdseSBzZW1hbnRpYyBmcmFtZXdvcmsgY2xhc3MgZm9yIHRoaXMgZWxlbWVudCwKCQkJCS8vIGJ1dCB3b3JrZWQgYmVzdCB2aXN1YWxseSB3aXRoIGEgdmFyaWV0eSBvZiB0aGVtZXMKCQkJCSIgdWktd2lkZ2V0LWhlYWRlciIgKwoJCQkJKCAoIG8ucmFuZ2UgPT09ICJtaW4iIHx8IG8ucmFuZ2UgPT09ICJtYXgiICkgPyAiIHVpLXNsaWRlci1yYW5nZS0iICsgby5yYW5nZSA6ICIiICkgKTsKCQl9CgoJCWhhbmRsZUNvdW50ID0gKCBvLnZhbHVlcyAmJiBvLnZhbHVlcy5sZW5ndGggKSB8fCAxOwoKCQlmb3IgKCBpID0gZXhpc3RpbmdIYW5kbGVzLmxlbmd0aDsgaSA8IGhhbmRsZUNvdW50OyBpKysgKSB7CgkJCWhhbmRsZXMucHVzaCggaGFuZGxlICk7CgkJfQoKCQl0aGlzLmhhbmRsZXMgPSBleGlzdGluZ0hhbmRsZXMuYWRkKCAkKCBoYW5kbGVzLmpvaW4oICIiICkgKS5hcHBlbmRUbyggdGhpcy5lbGVtZW50ICkgKTsKCgkJdGhpcy5oYW5kbGUgPSB0aGlzLmhhbmRsZXMuZXEoIDAgKTsKCgkJdGhpcy5oYW5kbGVzLmFkZCggdGhpcy5yYW5nZSApLmZpbHRlciggImEiICkKCQkJLmNsaWNrKGZ1bmN0aW9uKCBldmVudCApIHsKCQkJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgkJCX0pCgkJCS5tb3VzZWVudGVyKGZ1bmN0aW9uKCkgewoJCQkJaWYgKCAhby5kaXNhYmxlZCApIHsKCQkJCQkkKCB0aGlzICkuYWRkQ2xhc3MoICJ1aS1zdGF0ZS1ob3ZlciIgKTsKCQkJCX0KCQkJfSkKCQkJLm1vdXNlbGVhdmUoZnVuY3Rpb24oKSB7CgkJCQkkKCB0aGlzICkucmVtb3ZlQ2xhc3MoICJ1aS1zdGF0ZS1ob3ZlciIgKTsKCQkJfSkKCQkJLmZvY3VzKGZ1bmN0aW9uKCkgewoJCQkJaWYgKCAhby5kaXNhYmxlZCApIHsKCQkJCQkkKCAiLnVpLXNsaWRlciAudWktc3RhdGUtZm9jdXMiICkucmVtb3ZlQ2xhc3MoICJ1aS1zdGF0ZS1mb2N1cyIgKTsKCQkJCQkkKCB0aGlzICkuYWRkQ2xhc3MoICJ1aS1zdGF0ZS1mb2N1cyIgKTsKCQkJCX0gZWxzZSB7CgkJCQkJJCggdGhpcyApLmJsdXIoKTsKCQkJCX0KCQkJfSkKCQkJLmJsdXIoZnVuY3Rpb24oKSB7CgkJCQkkKCB0aGlzICkucmVtb3ZlQ2xhc3MoICJ1aS1zdGF0ZS1mb2N1cyIgKTsKCQkJfSk7CgoJCXRoaXMuaGFuZGxlcy5lYWNoKGZ1bmN0aW9uKCBpICkgewoJCQkkKCB0aGlzICkuZGF0YSggInVpLXNsaWRlci1oYW5kbGUtaW5kZXgiLCBpICk7CgkJfSk7CgoJCXRoaXMuX29uKCB0aGlzLmhhbmRsZXMsIHsKCQkJa2V5ZG93bjogZnVuY3Rpb24oIGV2ZW50ICkgewoJCQkJdmFyIGFsbG93ZWQsIGN1clZhbCwgbmV3VmFsLCBzdGVwLAoJCQkJCWluZGV4ID0gJCggZXZlbnQudGFyZ2V0ICkuZGF0YSggInVpLXNsaWRlci1oYW5kbGUtaW5kZXgiICk7CgoJCQkJc3dpdGNoICggZXZlbnQua2V5Q29kZSApIHsKCQkJCQljYXNlICQudWkua2V5Q29kZS5IT01FOgoJCQkJCWNhc2UgJC51aS5rZXlDb2RlLkVORDoKCQkJCQljYXNlICQudWkua2V5Q29kZS5QQUdFX1VQOgoJCQkJCWNhc2UgJC51aS5rZXlDb2RlLlBBR0VfRE9XTjoKCQkJCQljYXNlICQudWkua2V5Q29kZS5VUDoKCQkJCQljYXNlICQudWkua2V5Q29kZS5SSUdIVDoKCQkJCQljYXNlICQudWkua2V5Q29kZS5ET1dOOgoJCQkJCWNhc2UgJC51aS5rZXlDb2RlLkxFRlQ6CgkJCQkJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgkJCQkJCWlmICggIXRoaXMuX2tleVNsaWRpbmcgKSB7CgkJCQkJCQl0aGlzLl9rZXlTbGlkaW5nID0gdHJ1ZTsKCQkJCQkJCSQoIGV2ZW50LnRhcmdldCApLmFkZENsYXNzKCAidWktc3RhdGUtYWN0aXZlIiApOwoJCQkJCQkJYWxsb3dlZCA9IHRoaXMuX3N0YXJ0KCBldmVudCwgaW5kZXggKTsKCQkJCQkJCWlmICggYWxsb3dlZCA9PT0gZmFsc2UgKSB7CgkJCQkJCQkJcmV0dXJuOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJCWJyZWFrOwoJCQkJfQoKCQkJCXN0ZXAgPSB0aGlzLm9wdGlvbnMuc3RlcDsKCQkJCWlmICggdGhpcy5vcHRpb25zLnZhbHVlcyAmJiB0aGlzLm9wdGlvbnMudmFsdWVzLmxlbmd0aCApIHsKCQkJCQljdXJWYWwgPSBuZXdWYWwgPSB0aGlzLnZhbHVlcyggaW5kZXggKTsKCQkJCX0gZWxzZSB7CgkJCQkJY3VyVmFsID0gbmV3VmFsID0gdGhpcy52YWx1ZSgpOwoJCQkJfQoKCQkJCXN3aXRjaCAoIGV2ZW50LmtleUNvZGUgKSB7CgkJCQkJY2FzZSAkLnVpLmtleUNvZGUuSE9NRToKCQkJCQkJbmV3VmFsID0gdGhpcy5fdmFsdWVNaW4oKTsKCQkJCQkJYnJlYWs7CgkJCQkJY2FzZSAkLnVpLmtleUNvZGUuRU5EOgoJCQkJCQluZXdWYWwgPSB0aGlzLl92YWx1ZU1heCgpOwoJCQkJCQlicmVhazsKCQkJCQljYXNlICQudWkua2V5Q29kZS5QQUdFX1VQOgoJCQkJCQluZXdWYWwgPSB0aGlzLl90cmltQWxpZ25WYWx1ZSggY3VyVmFsICsgKCAodGhpcy5fdmFsdWVNYXgoKSAtIHRoaXMuX3ZhbHVlTWluKCkpIC8gbnVtUGFnZXMgKSApOwoJCQkJCQlicmVhazsKCQkJCQljYXNlICQudWkua2V5Q29kZS5QQUdFX0RPV046CgkJCQkJCW5ld1ZhbCA9IHRoaXMuX3RyaW1BbGlnblZhbHVlKCBjdXJWYWwgLSAoICh0aGlzLl92YWx1ZU1heCgpIC0gdGhpcy5fdmFsdWVNaW4oKSkgLyBudW1QYWdlcyApICk7CgkJCQkJCWJyZWFrOwoJCQkJCWNhc2UgJC51aS5rZXlDb2RlLlVQOgoJCQkJCWNhc2UgJC51aS5rZXlDb2RlLlJJR0hUOgoJCQkJCQlpZiAoIGN1clZhbCA9PT0gdGhpcy5fdmFsdWVNYXgoKSApIHsKCQkJCQkJCXJldHVybjsKCQkJCQkJfQoJCQkJCQluZXdWYWwgPSB0aGlzLl90cmltQWxpZ25WYWx1ZSggY3VyVmFsICsgc3RlcCApOwoJCQkJCQlicmVhazsKCQkJCQljYXNlICQudWkua2V5Q29kZS5ET1dOOgoJCQkJCWNhc2UgJC51aS5rZXlDb2RlLkxFRlQ6CgkJCQkJCWlmICggY3VyVmFsID09PSB0aGlzLl92YWx1ZU1pbigpICkgewoJCQkJCQkJcmV0dXJuOwoJCQkJCQl9CgkJCQkJCW5ld1ZhbCA9IHRoaXMuX3RyaW1BbGlnblZhbHVlKCBjdXJWYWwgLSBzdGVwICk7CgkJCQkJCWJyZWFrOwoJCQkJfQoKCQkJCXRoaXMuX3NsaWRlKCBldmVudCwgaW5kZXgsIG5ld1ZhbCApOwoJCQl9LAoJCQlrZXl1cDogZnVuY3Rpb24oIGV2ZW50ICkgewoJCQkJdmFyIGluZGV4ID0gJCggZXZlbnQudGFyZ2V0ICkuZGF0YSggInVpLXNsaWRlci1oYW5kbGUtaW5kZXgiICk7CgoJCQkJaWYgKCB0aGlzLl9rZXlTbGlkaW5nICkgewoJCQkJCXRoaXMuX2tleVNsaWRpbmcgPSBmYWxzZTsKCQkJCQl0aGlzLl9zdG9wKCBldmVudCwgaW5kZXggKTsKCQkJCQl0aGlzLl9jaGFuZ2UoIGV2ZW50LCBpbmRleCApOwoJCQkJCSQoIGV2ZW50LnRhcmdldCApLnJlbW92ZUNsYXNzKCAidWktc3RhdGUtYWN0aXZlIiApOwoJCQkJfQoJCQl9CgkJfSk7CgoJCXRoaXMuX3JlZnJlc2hWYWx1ZSgpOwoKCQl0aGlzLl9hbmltYXRlT2ZmID0gZmFsc2U7Cgl9LAoKCV9kZXN0cm95OiBmdW5jdGlvbigpIHsKCQl0aGlzLmhhbmRsZXMucmVtb3ZlKCk7CgkJdGhpcy5yYW5nZS5yZW1vdmUoKTsKCgkJdGhpcy5lbGVtZW50CgkJCS5yZW1vdmVDbGFzcyggInVpLXNsaWRlciIgKwoJCQkJIiB1aS1zbGlkZXItaG9yaXpvbnRhbCIgKwoJCQkJIiB1aS1zbGlkZXItdmVydGljYWwiICsKCQkJCSIgdWktc2xpZGVyLWRpc2FibGVkIiArCgkJCQkiIHVpLXdpZGdldCIgKwoJCQkJIiB1aS13aWRnZXQtY29udGVudCIgKwoJCQkJIiB1aS1jb3JuZXItYWxsIiApOwoKCQl0aGlzLl9tb3VzZURlc3Ryb3koKTsKCX0sCgoJX21vdXNlQ2FwdHVyZTogZnVuY3Rpb24oIGV2ZW50ICkgewoJCXZhciBwb3NpdGlvbiwgbm9ybVZhbHVlLCBkaXN0YW5jZSwgY2xvc2VzdEhhbmRsZSwgaW5kZXgsIGFsbG93ZWQsIG9mZnNldCwgbW91c2VPdmVySGFuZGxlLAoJCQl0aGF0ID0gdGhpcywKCQkJbyA9IHRoaXMub3B0aW9uczsKCgkJaWYgKCBvLmRpc2FibGVkICkgewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoKCQl0aGlzLmVsZW1lbnRTaXplID0gewoJCQl3aWR0aDogdGhpcy5lbGVtZW50Lm91dGVyV2lkdGgoKSwKCQkJaGVpZ2h0OiB0aGlzLmVsZW1lbnQub3V0ZXJIZWlnaHQoKQoJCX07CgkJdGhpcy5lbGVtZW50T2Zmc2V0ID0gdGhpcy5lbGVtZW50Lm9mZnNldCgpOwoKCQlwb3NpdGlvbiA9IHsgeDogZXZlbnQucGFnZVgsIHk6IGV2ZW50LnBhZ2VZIH07CgkJbm9ybVZhbHVlID0gdGhpcy5fbm9ybVZhbHVlRnJvbU1vdXNlKCBwb3NpdGlvbiApOwoJCWRpc3RhbmNlID0gdGhpcy5fdmFsdWVNYXgoKSAtIHRoaXMuX3ZhbHVlTWluKCkgKyAxOwoJCXRoaXMuaGFuZGxlcy5lYWNoKGZ1bmN0aW9uKCBpICkgewoJCQl2YXIgdGhpc0Rpc3RhbmNlID0gTWF0aC5hYnMoIG5vcm1WYWx1ZSAtIHRoYXQudmFsdWVzKGkpICk7CgkJCWlmICggZGlzdGFuY2UgPiB0aGlzRGlzdGFuY2UgKSB7CgkJCQlkaXN0YW5jZSA9IHRoaXNEaXN0YW5jZTsKCQkJCWNsb3Nlc3RIYW5kbGUgPSAkKCB0aGlzICk7CgkJCQlpbmRleCA9IGk7CgkJCX0KCQl9KTsKCgkJLy8gd29ya2Fyb3VuZCBmb3IgYnVnICMzNzM2IChpZiBib3RoIGhhbmRsZXMgb2YgYSByYW5nZSBhcmUgYXQgMCwKCQkvLyB0aGUgZmlyc3QgaXMgYWx3YXlzIHVzZWQgYXMgdGhlIG9uZSB3aXRoIGxlYXN0IGRpc3RhbmNlLAoJCS8vIGFuZCBtb3ZpbmcgaXQgaXMgb2J2aW91c2x5IHByZXZlbnRlZCBieSBwcmV2ZW50aW5nIG5lZ2F0aXZlIHJhbmdlcykKCQlpZiggby5yYW5nZSA9PT0gdHJ1ZSAmJiB0aGlzLnZhbHVlcygxKSA9PT0gby5taW4gKSB7CgkJCWluZGV4ICs9IDE7CgkJCWNsb3Nlc3RIYW5kbGUgPSAkKCB0aGlzLmhhbmRsZXNbaW5kZXhdICk7CgkJfQoKCQlhbGxvd2VkID0gdGhpcy5fc3RhcnQoIGV2ZW50LCBpbmRleCApOwoJCWlmICggYWxsb3dlZCA9PT0gZmFsc2UgKSB7CgkJCXJldHVybiBmYWxzZTsKCQl9CgkJdGhpcy5fbW91c2VTbGlkaW5nID0gdHJ1ZTsKCgkJdGhpcy5faGFuZGxlSW5kZXggPSBpbmRleDsKCgkJY2xvc2VzdEhhbmRsZQoJCQkuYWRkQ2xhc3MoICJ1aS1zdGF0ZS1hY3RpdmUiICkKCQkJLmZvY3VzKCk7CgoJCW9mZnNldCA9IGNsb3Nlc3RIYW5kbGUub2Zmc2V0KCk7CgkJbW91c2VPdmVySGFuZGxlID0gISQoIGV2ZW50LnRhcmdldCApLnBhcmVudHMoKS5hbmRTZWxmKCkuaXMoICIudWktc2xpZGVyLWhhbmRsZSIgKTsKCQl0aGlzLl9jbGlja09mZnNldCA9IG1vdXNlT3ZlckhhbmRsZSA/IHsgbGVmdDogMCwgdG9wOiAwIH0gOiB7CgkJCWxlZnQ6IGV2ZW50LnBhZ2VYIC0gb2Zmc2V0LmxlZnQgLSAoIGNsb3Nlc3RIYW5kbGUud2lkdGgoKSAvIDIgKSwKCQkJdG9wOiBldmVudC5wYWdlWSAtIG9mZnNldC50b3AgLQoJCQkJKCBjbG9zZXN0SGFuZGxlLmhlaWdodCgpIC8gMiApIC0KCQkJCSggcGFyc2VJbnQoIGNsb3Nlc3RIYW5kbGUuY3NzKCJib3JkZXJUb3BXaWR0aCIpLCAxMCApIHx8IDAgKSAtCgkJCQkoIHBhcnNlSW50KCBjbG9zZXN0SGFuZGxlLmNzcygiYm9yZGVyQm90dG9tV2lkdGgiKSwgMTAgKSB8fCAwKSArCgkJCQkoIHBhcnNlSW50KCBjbG9zZXN0SGFuZGxlLmNzcygibWFyZ2luVG9wIiksIDEwICkgfHwgMCkKCQl9OwoKCQlpZiAoICF0aGlzLmhhbmRsZXMuaGFzQ2xhc3MoICJ1aS1zdGF0ZS1ob3ZlciIgKSApIHsKCQkJdGhpcy5fc2xpZGUoIGV2ZW50LCBpbmRleCwgbm9ybVZhbHVlICk7CgkJfQoJCXRoaXMuX2FuaW1hdGVPZmYgPSB0cnVlOwoJCXJldHVybiB0cnVlOwoJfSwKCglfbW91c2VTdGFydDogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHRydWU7Cgl9LAoKCV9tb3VzZURyYWc6IGZ1bmN0aW9uKCBldmVudCApIHsKCQl2YXIgcG9zaXRpb24gPSB7IHg6IGV2ZW50LnBhZ2VYLCB5OiBldmVudC5wYWdlWSB9LAoJCQlub3JtVmFsdWUgPSB0aGlzLl9ub3JtVmFsdWVGcm9tTW91c2UoIHBvc2l0aW9uICk7CgoJCXRoaXMuX3NsaWRlKCBldmVudCwgdGhpcy5faGFuZGxlSW5kZXgsIG5vcm1WYWx1ZSApOwoKCQlyZXR1cm4gZmFsc2U7Cgl9LAoKCV9tb3VzZVN0b3A6IGZ1bmN0aW9uKCBldmVudCApIHsKCQl0aGlzLmhhbmRsZXMucmVtb3ZlQ2xhc3MoICJ1aS1zdGF0ZS1hY3RpdmUiICk7CgkJdGhpcy5fbW91c2VTbGlkaW5nID0gZmFsc2U7CgoJCXRoaXMuX3N0b3AoIGV2ZW50LCB0aGlzLl9oYW5kbGVJbmRleCApOwoJCXRoaXMuX2NoYW5nZSggZXZlbnQsIHRoaXMuX2hhbmRsZUluZGV4ICk7CgoJCXRoaXMuX2hhbmRsZUluZGV4ID0gbnVsbDsKCQl0aGlzLl9jbGlja09mZnNldCA9IG51bGw7CgkJdGhpcy5fYW5pbWF0ZU9mZiA9IGZhbHNlOwoKCQlyZXR1cm4gZmFsc2U7Cgl9LAoKCV9kZXRlY3RPcmllbnRhdGlvbjogZnVuY3Rpb24oKSB7CgkJdGhpcy5vcmllbnRhdGlvbiA9ICggdGhpcy5vcHRpb25zLm9yaWVudGF0aW9uID09PSAidmVydGljYWwiICkgPyAidmVydGljYWwiIDogImhvcml6b250YWwiOwoJfSwKCglfbm9ybVZhbHVlRnJvbU1vdXNlOiBmdW5jdGlvbiggcG9zaXRpb24gKSB7CgkJdmFyIHBpeGVsVG90YWwsCgkJCXBpeGVsTW91c2UsCgkJCXBlcmNlbnRNb3VzZSwKCQkJdmFsdWVUb3RhbCwKCQkJdmFsdWVNb3VzZTsKCgkJaWYgKCB0aGlzLm9yaWVudGF0aW9uID09PSAiaG9yaXpvbnRhbCIgKSB7CgkJCXBpeGVsVG90YWwgPSB0aGlzLmVsZW1lbnRTaXplLndpZHRoOwoJCQlwaXhlbE1vdXNlID0gcG9zaXRpb24ueCAtIHRoaXMuZWxlbWVudE9mZnNldC5sZWZ0IC0gKCB0aGlzLl9jbGlja09mZnNldCA/IHRoaXMuX2NsaWNrT2Zmc2V0LmxlZnQgOiAwICk7CgkJfSBlbHNlIHsKCQkJcGl4ZWxUb3RhbCA9IHRoaXMuZWxlbWVudFNpemUuaGVpZ2h0OwoJCQlwaXhlbE1vdXNlID0gcG9zaXRpb24ueSAtIHRoaXMuZWxlbWVudE9mZnNldC50b3AgLSAoIHRoaXMuX2NsaWNrT2Zmc2V0ID8gdGhpcy5fY2xpY2tPZmZzZXQudG9wIDogMCApOwoJCX0KCgkJcGVyY2VudE1vdXNlID0gKCBwaXhlbE1vdXNlIC8gcGl4ZWxUb3RhbCApOwoJCWlmICggcGVyY2VudE1vdXNlID4gMSApIHsKCQkJcGVyY2VudE1vdXNlID0gMTsKCQl9CgkJaWYgKCBwZXJjZW50TW91c2UgPCAwICkgewoJCQlwZXJjZW50TW91c2UgPSAwOwoJCX0KCQlpZiAoIHRoaXMub3JpZW50YXRpb24gPT09ICJ2ZXJ0aWNhbCIgKSB7CgkJCXBlcmNlbnRNb3VzZSA9IDEgLSBwZXJjZW50TW91c2U7CgkJfQoKCQl2YWx1ZVRvdGFsID0gdGhpcy5fdmFsdWVNYXgoKSAtIHRoaXMuX3ZhbHVlTWluKCk7CgkJdmFsdWVNb3VzZSA9IHRoaXMuX3ZhbHVlTWluKCkgKyBwZXJjZW50TW91c2UgKiB2YWx1ZVRvdGFsOwoKCQlyZXR1cm4gdGhpcy5fdHJpbUFsaWduVmFsdWUoIHZhbHVlTW91c2UgKTsKCX0sCgoJX3N0YXJ0OiBmdW5jdGlvbiggZXZlbnQsIGluZGV4ICkgewoJCXZhciB1aUhhc2ggPSB7CgkJCWhhbmRsZTogdGhpcy5oYW5kbGVzWyBpbmRleCBdLAoJCQl2YWx1ZTogdGhpcy52YWx1ZSgpCgkJfTsKCQlpZiAoIHRoaXMub3B0aW9ucy52YWx1ZXMgJiYgdGhpcy5vcHRpb25zLnZhbHVlcy5sZW5ndGggKSB7CgkJCXVpSGFzaC52YWx1ZSA9IHRoaXMudmFsdWVzKCBpbmRleCApOwoJCQl1aUhhc2gudmFsdWVzID0gdGhpcy52YWx1ZXMoKTsKCQl9CgkJcmV0dXJuIHRoaXMuX3RyaWdnZXIoICJzdGFydCIsIGV2ZW50LCB1aUhhc2ggKTsKCX0sCgoJX3NsaWRlOiBmdW5jdGlvbiggZXZlbnQsIGluZGV4LCBuZXdWYWwgKSB7CgkJdmFyIG90aGVyVmFsLAoJCQluZXdWYWx1ZXMsCgkJCWFsbG93ZWQ7CgoJCWlmICggdGhpcy5vcHRpb25zLnZhbHVlcyAmJiB0aGlzLm9wdGlvbnMudmFsdWVzLmxlbmd0aCApIHsKCQkJb3RoZXJWYWwgPSB0aGlzLnZhbHVlcyggaW5kZXggPyAwIDogMSApOwoKCQkJaWYgKCAoIHRoaXMub3B0aW9ucy52YWx1ZXMubGVuZ3RoID09PSAyICYmIHRoaXMub3B0aW9ucy5yYW5nZSA9PT0gdHJ1ZSApICYmCgkJCQkJKCAoIGluZGV4ID09PSAwICYmIG5ld1ZhbCA+IG90aGVyVmFsKSB8fCAoIGluZGV4ID09PSAxICYmIG5ld1ZhbCA8IG90aGVyVmFsICkgKQoJCQkJKSB7CgkJCQluZXdWYWwgPSBvdGhlclZhbDsKCQkJfQoKCQkJaWYgKCBuZXdWYWwgIT09IHRoaXMudmFsdWVzKCBpbmRleCApICkgewoJCQkJbmV3VmFsdWVzID0gdGhpcy52YWx1ZXMoKTsKCQkJCW5ld1ZhbHVlc1sgaW5kZXggXSA9IG5ld1ZhbDsKCQkJCS8vIEEgc2xpZGUgY2FuIGJlIGNhbmNlbGVkIGJ5IHJldHVybmluZyBmYWxzZSBmcm9tIHRoZSBzbGlkZSBjYWxsYmFjawoJCQkJYWxsb3dlZCA9IHRoaXMuX3RyaWdnZXIoICJzbGlkZSIsIGV2ZW50LCB7CgkJCQkJaGFuZGxlOiB0aGlzLmhhbmRsZXNbIGluZGV4IF0sCgkJCQkJdmFsdWU6IG5ld1ZhbCwKCQkJCQl2YWx1ZXM6IG5ld1ZhbHVlcwoJCQkJfSApOwoJCQkJb3RoZXJWYWwgPSB0aGlzLnZhbHVlcyggaW5kZXggPyAwIDogMSApOwoJCQkJaWYgKCBhbGxvd2VkICE9PSBmYWxzZSApIHsKCQkJCQl0aGlzLnZhbHVlcyggaW5kZXgsIG5ld1ZhbCwgdHJ1ZSApOwoJCQkJfQoJCQl9CgkJfSBlbHNlIHsKCQkJaWYgKCBuZXdWYWwgIT09IHRoaXMudmFsdWUoKSApIHsKCQkJCS8vIEEgc2xpZGUgY2FuIGJlIGNhbmNlbGVkIGJ5IHJldHVybmluZyBmYWxzZSBmcm9tIHRoZSBzbGlkZSBjYWxsYmFjawoJCQkJYWxsb3dlZCA9IHRoaXMuX3RyaWdnZXIoICJzbGlkZSIsIGV2ZW50LCB7CgkJCQkJaGFuZGxlOiB0aGlzLmhhbmRsZXNbIGluZGV4IF0sCgkJCQkJdmFsdWU6IG5ld1ZhbAoJCQkJfSApOwoJCQkJaWYgKCBhbGxvd2VkICE9PSBmYWxzZSApIHsKCQkJCQl0aGlzLnZhbHVlKCBuZXdWYWwgKTsKCQkJCX0KCQkJfQoJCX0KCX0sCgoJX3N0b3A6IGZ1bmN0aW9uKCBldmVudCwgaW5kZXggKSB7CgkJdmFyIHVpSGFzaCA9IHsKCQkJaGFuZGxlOiB0aGlzLmhhbmRsZXNbIGluZGV4IF0sCgkJCXZhbHVlOiB0aGlzLnZhbHVlKCkKCQl9OwoJCWlmICggdGhpcy5vcHRpb25zLnZhbHVlcyAmJiB0aGlzLm9wdGlvbnMudmFsdWVzLmxlbmd0aCApIHsKCQkJdWlIYXNoLnZhbHVlID0gdGhpcy52YWx1ZXMoIGluZGV4ICk7CgkJCXVpSGFzaC52YWx1ZXMgPSB0aGlzLnZhbHVlcygpOwoJCX0KCgkJdGhpcy5fdHJpZ2dlciggInN0b3AiLCBldmVudCwgdWlIYXNoICk7Cgl9LAoKCV9jaGFuZ2U6IGZ1bmN0aW9uKCBldmVudCwgaW5kZXggKSB7CgkJaWYgKCAhdGhpcy5fa2V5U2xpZGluZyAmJiAhdGhpcy5fbW91c2VTbGlkaW5nICkgewoJCQl2YXIgdWlIYXNoID0gewoJCQkJaGFuZGxlOiB0aGlzLmhhbmRsZXNbIGluZGV4IF0sCgkJCQl2YWx1ZTogdGhpcy52YWx1ZSgpCgkJCX07CgkJCWlmICggdGhpcy5vcHRpb25zLnZhbHVlcyAmJiB0aGlzLm9wdGlvbnMudmFsdWVzLmxlbmd0aCApIHsKCQkJCXVpSGFzaC52YWx1ZSA9IHRoaXMudmFsdWVzKCBpbmRleCApOwoJCQkJdWlIYXNoLnZhbHVlcyA9IHRoaXMudmFsdWVzKCk7CgkJCX0KCgkJCXRoaXMuX3RyaWdnZXIoICJjaGFuZ2UiLCBldmVudCwgdWlIYXNoICk7CgkJfQoJfSwKCgl2YWx1ZTogZnVuY3Rpb24oIG5ld1ZhbHVlICkgewoJCWlmICggYXJndW1lbnRzLmxlbmd0aCApIHsKCQkJdGhpcy5vcHRpb25zLnZhbHVlID0gdGhpcy5fdHJpbUFsaWduVmFsdWUoIG5ld1ZhbHVlICk7CgkJCXRoaXMuX3JlZnJlc2hWYWx1ZSgpOwoJCQl0aGlzLl9jaGFuZ2UoIG51bGwsIDAgKTsKCQkJcmV0dXJuOwoJCX0KCgkJcmV0dXJuIHRoaXMuX3ZhbHVlKCk7Cgl9LAoKCXZhbHVlczogZnVuY3Rpb24oIGluZGV4LCBuZXdWYWx1ZSApIHsKCQl2YXIgdmFscywKCQkJbmV3VmFsdWVzLAoJCQlpOwoKCQlpZiAoIGFyZ3VtZW50cy5sZW5ndGggPiAxICkgewoJCQl0aGlzLm9wdGlvbnMudmFsdWVzWyBpbmRleCBdID0gdGhpcy5fdHJpbUFsaWduVmFsdWUoIG5ld1ZhbHVlICk7CgkJCXRoaXMuX3JlZnJlc2hWYWx1ZSgpOwoJCQl0aGlzLl9jaGFuZ2UoIG51bGwsIGluZGV4ICk7CgkJCXJldHVybjsKCQl9CgoJCWlmICggYXJndW1lbnRzLmxlbmd0aCApIHsKCQkJaWYgKCAkLmlzQXJyYXkoIGFyZ3VtZW50c1sgMCBdICkgKSB7CgkJCQl2YWxzID0gdGhpcy5vcHRpb25zLnZhbHVlczsKCQkJCW5ld1ZhbHVlcyA9IGFyZ3VtZW50c1sgMCBdOwoJCQkJZm9yICggaSA9IDA7IGkgPCB2YWxzLmxlbmd0aDsgaSArPSAxICkgewoJCQkJCXZhbHNbIGkgXSA9IHRoaXMuX3RyaW1BbGlnblZhbHVlKCBuZXdWYWx1ZXNbIGkgXSApOwoJCQkJCXRoaXMuX2NoYW5nZSggbnVsbCwgaSApOwoJCQkJfQoJCQkJdGhpcy5fcmVmcmVzaFZhbHVlKCk7CgkJCX0gZWxzZSB7CgkJCQlpZiAoIHRoaXMub3B0aW9ucy52YWx1ZXMgJiYgdGhpcy5vcHRpb25zLnZhbHVlcy5sZW5ndGggKSB7CgkJCQkJcmV0dXJuIHRoaXMuX3ZhbHVlcyggaW5kZXggKTsKCQkJCX0gZWxzZSB7CgkJCQkJcmV0dXJuIHRoaXMudmFsdWUoKTsKCQkJCX0KCQkJfQoJCX0gZWxzZSB7CgkJCXJldHVybiB0aGlzLl92YWx1ZXMoKTsKCQl9Cgl9LAoKCV9zZXRPcHRpb246IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkgewoJCXZhciBpLAoJCQl2YWxzTGVuZ3RoID0gMDsKCgkJaWYgKCAkLmlzQXJyYXkoIHRoaXMub3B0aW9ucy52YWx1ZXMgKSApIHsKCQkJdmFsc0xlbmd0aCA9IHRoaXMub3B0aW9ucy52YWx1ZXMubGVuZ3RoOwoJCX0KCgkJJC5XaWRnZXQucHJvdG90eXBlLl9zZXRPcHRpb24uYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApOwoKCQlzd2l0Y2ggKCBrZXkgKSB7CgkJCWNhc2UgImRpc2FibGVkIjoKCQkJCWlmICggdmFsdWUgKSB7CgkJCQkJdGhpcy5oYW5kbGVzLmZpbHRlciggIi51aS1zdGF0ZS1mb2N1cyIgKS5ibHVyKCk7CgkJCQkJdGhpcy5oYW5kbGVzLnJlbW92ZUNsYXNzKCAidWktc3RhdGUtaG92ZXIiICk7CgkJCQkJdGhpcy5oYW5kbGVzLnByb3AoICJkaXNhYmxlZCIsIHRydWUgKTsKCQkJCQl0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoICJ1aS1kaXNhYmxlZCIgKTsKCQkJCX0gZWxzZSB7CgkJCQkJdGhpcy5oYW5kbGVzLnByb3AoICJkaXNhYmxlZCIsIGZhbHNlICk7CgkJCQkJdGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCAidWktZGlzYWJsZWQiICk7CgkJCQl9CgkJCQlicmVhazsKCQkJY2FzZSAib3JpZW50YXRpb24iOgoJCQkJdGhpcy5fZGV0ZWN0T3JpZW50YXRpb24oKTsKCQkJCXRoaXMuZWxlbWVudAoJCQkJCS5yZW1vdmVDbGFzcyggInVpLXNsaWRlci1ob3Jpem9udGFsIHVpLXNsaWRlci12ZXJ0aWNhbCIgKQoJCQkJCS5hZGRDbGFzcyggInVpLXNsaWRlci0iICsgdGhpcy5vcmllbnRhdGlvbiApOwoJCQkJdGhpcy5fcmVmcmVzaFZhbHVlKCk7CgkJCQlicmVhazsKCQkJY2FzZSAidmFsdWUiOgoJCQkJdGhpcy5fYW5pbWF0ZU9mZiA9IHRydWU7CgkJCQl0aGlzLl9yZWZyZXNoVmFsdWUoKTsKCQkJCXRoaXMuX2NoYW5nZSggbnVsbCwgMCApOwoJCQkJdGhpcy5fYW5pbWF0ZU9mZiA9IGZhbHNlOwoJCQkJYnJlYWs7CgkJCWNhc2UgInZhbHVlcyI6CgkJCQl0aGlzLl9hbmltYXRlT2ZmID0gdHJ1ZTsKCQkJCXRoaXMuX3JlZnJlc2hWYWx1ZSgpOwoJCQkJZm9yICggaSA9IDA7IGkgPCB2YWxzTGVuZ3RoOyBpICs9IDEgKSB7CgkJCQkJdGhpcy5fY2hhbmdlKCBudWxsLCBpICk7CgkJCQl9CgkJCQl0aGlzLl9hbmltYXRlT2ZmID0gZmFsc2U7CgkJCQlicmVhazsKCQkJY2FzZSAibWluIjoKCQkJY2FzZSAibWF4IjoKCQkJCXRoaXMuX2FuaW1hdGVPZmYgPSB0cnVlOwoJCQkJdGhpcy5fcmVmcmVzaFZhbHVlKCk7CgkJCQl0aGlzLl9hbmltYXRlT2ZmID0gZmFsc2U7CgkJCQlicmVhazsKCQl9Cgl9LAoKCS8vaW50ZXJuYWwgdmFsdWUgZ2V0dGVyCgkvLyBfdmFsdWUoKSByZXR1cm5zIHZhbHVlIHRyaW1tZWQgYnkgbWluIGFuZCBtYXgsIGFsaWduZWQgYnkgc3RlcAoJX3ZhbHVlOiBmdW5jdGlvbigpIHsKCQl2YXIgdmFsID0gdGhpcy5vcHRpb25zLnZhbHVlOwoJCXZhbCA9IHRoaXMuX3RyaW1BbGlnblZhbHVlKCB2YWwgKTsKCgkJcmV0dXJuIHZhbDsKCX0sCgoJLy9pbnRlcm5hbCB2YWx1ZXMgZ2V0dGVyCgkvLyBfdmFsdWVzKCkgcmV0dXJucyBhcnJheSBvZiB2YWx1ZXMgdHJpbW1lZCBieSBtaW4gYW5kIG1heCwgYWxpZ25lZCBieSBzdGVwCgkvLyBfdmFsdWVzKCBpbmRleCApIHJldHVybnMgc2luZ2xlIHZhbHVlIHRyaW1tZWQgYnkgbWluIGFuZCBtYXgsIGFsaWduZWQgYnkgc3RlcAoJX3ZhbHVlczogZnVuY3Rpb24oIGluZGV4ICkgewoJCXZhciB2YWwsCgkJCXZhbHMsCgkJCWk7CgoJCWlmICggYXJndW1lbnRzLmxlbmd0aCApIHsKCQkJdmFsID0gdGhpcy5vcHRpb25zLnZhbHVlc1sgaW5kZXggXTsKCQkJdmFsID0gdGhpcy5fdHJpbUFsaWduVmFsdWUoIHZhbCApOwoKCQkJcmV0dXJuIHZhbDsKCQl9IGVsc2UgewoJCQkvLyAuc2xpY2UoKSBjcmVhdGVzIGEgY29weSBvZiB0aGUgYXJyYXkKCQkJLy8gdGhpcyBjb3B5IGdldHMgdHJpbW1lZCBieSBtaW4gYW5kIG1heCBhbmQgdGhlbiByZXR1cm5lZAoJCQl2YWxzID0gdGhpcy5vcHRpb25zLnZhbHVlcy5zbGljZSgpOwoJCQlmb3IgKCBpID0gMDsgaSA8IHZhbHMubGVuZ3RoOyBpKz0gMSkgewoJCQkJdmFsc1sgaSBdID0gdGhpcy5fdHJpbUFsaWduVmFsdWUoIHZhbHNbIGkgXSApOwoJCQl9CgoJCQlyZXR1cm4gdmFsczsKCQl9Cgl9LAoKCS8vIHJldHVybnMgdGhlIHN0ZXAtYWxpZ25lZCB2YWx1ZSB0aGF0IHZhbCBpcyBjbG9zZXN0IHRvLCBiZXR3ZWVuIChpbmNsdXNpdmUpIG1pbiBhbmQgbWF4CglfdHJpbUFsaWduVmFsdWU6IGZ1bmN0aW9uKCB2YWwgKSB7CgkJaWYgKCB2YWwgPD0gdGhpcy5fdmFsdWVNaW4oKSApIHsKCQkJcmV0dXJuIHRoaXMuX3ZhbHVlTWluKCk7CgkJfQoJCWlmICggdmFsID49IHRoaXMuX3ZhbHVlTWF4KCkgKSB7CgkJCXJldHVybiB0aGlzLl92YWx1ZU1heCgpOwoJCX0KCQl2YXIgc3RlcCA9ICggdGhpcy5vcHRpb25zLnN0ZXAgPiAwICkgPyB0aGlzLm9wdGlvbnMuc3RlcCA6IDEsCgkJCXZhbE1vZFN0ZXAgPSAodmFsIC0gdGhpcy5fdmFsdWVNaW4oKSkgJSBzdGVwLAoJCQlhbGlnblZhbHVlID0gdmFsIC0gdmFsTW9kU3RlcDsKCgkJaWYgKCBNYXRoLmFicyh2YWxNb2RTdGVwKSAqIDIgPj0gc3RlcCApIHsKCQkJYWxpZ25WYWx1ZSArPSAoIHZhbE1vZFN0ZXAgPiAwICkgPyBzdGVwIDogKCAtc3RlcCApOwoJCX0KCgkJLy8gU2luY2UgSmF2YVNjcmlwdCBoYXMgcHJvYmxlbXMgd2l0aCBsYXJnZSBmbG9hdHMsIHJvdW5kCgkJLy8gdGhlIGZpbmFsIHZhbHVlIHRvIDUgZGlnaXRzIGFmdGVyIHRoZSBkZWNpbWFsIHBvaW50IChzZWUgIzQxMjQpCgkJcmV0dXJuIHBhcnNlRmxvYXQoIGFsaWduVmFsdWUudG9GaXhlZCg1KSApOwoJfSwKCglfdmFsdWVNaW46IGZ1bmN0aW9uKCkgewoJCXJldHVybiB0aGlzLm9wdGlvbnMubWluOwoJfSwKCglfdmFsdWVNYXg6IGZ1bmN0aW9uKCkgewoJCXJldHVybiB0aGlzLm9wdGlvbnMubWF4OwoJfSwKCglfcmVmcmVzaFZhbHVlOiBmdW5jdGlvbigpIHsKCQl2YXIgbGFzdFZhbFBlcmNlbnQsIHZhbFBlcmNlbnQsIHZhbHVlLCB2YWx1ZU1pbiwgdmFsdWVNYXgsCgkJCW9SYW5nZSA9IHRoaXMub3B0aW9ucy5yYW5nZSwKCQkJbyA9IHRoaXMub3B0aW9ucywKCQkJdGhhdCA9IHRoaXMsCgkJCWFuaW1hdGUgPSAoICF0aGlzLl9hbmltYXRlT2ZmICkgPyBvLmFuaW1hdGUgOiBmYWxzZSwKCQkJX3NldCA9IHt9OwoKCQlpZiAoIHRoaXMub3B0aW9ucy52YWx1ZXMgJiYgdGhpcy5vcHRpb25zLnZhbHVlcy5sZW5ndGggKSB7CgkJCXRoaXMuaGFuZGxlcy5lYWNoKGZ1bmN0aW9uKCBpICkgewoJCQkJdmFsUGVyY2VudCA9ICggdGhhdC52YWx1ZXMoaSkgLSB0aGF0Ll92YWx1ZU1pbigpICkgLyAoIHRoYXQuX3ZhbHVlTWF4KCkgLSB0aGF0Ll92YWx1ZU1pbigpICkgKiAxMDA7CgkJCQlfc2V0WyB0aGF0Lm9yaWVudGF0aW9uID09PSAiaG9yaXpvbnRhbCIgPyAibGVmdCIgOiAiYm90dG9tIiBdID0gdmFsUGVyY2VudCArICIlIjsKCQkJCSQoIHRoaXMgKS5zdG9wKCAxLCAxIClbIGFuaW1hdGUgPyAiYW5pbWF0ZSIgOiAiY3NzIiBdKCBfc2V0LCBvLmFuaW1hdGUgKTsKCQkJCWlmICggdGhhdC5vcHRpb25zLnJhbmdlID09PSB0cnVlICkgewoJCQkJCWlmICggdGhhdC5vcmllbnRhdGlvbiA9PT0gImhvcml6b250YWwiICkgewoJCQkJCQlpZiAoIGkgPT09IDAgKSB7CgkJCQkJCQl0aGF0LnJhbmdlLnN0b3AoIDEsIDEgKVsgYW5pbWF0ZSA/ICJhbmltYXRlIiA6ICJjc3MiIF0oIHsgbGVmdDogdmFsUGVyY2VudCArICIlIiB9LCBvLmFuaW1hdGUgKTsKCQkJCQkJfQoJCQkJCQlpZiAoIGkgPT09IDEgKSB7CgkJCQkJCQl0aGF0LnJhbmdlWyBhbmltYXRlID8gImFuaW1hdGUiIDogImNzcyIgXSggeyB3aWR0aDogKCB2YWxQZXJjZW50IC0gbGFzdFZhbFBlcmNlbnQgKSArICIlIiB9LCB7IHF1ZXVlOiBmYWxzZSwgZHVyYXRpb246IG8uYW5pbWF0ZSB9ICk7CgkJCQkJCX0KCQkJCQl9IGVsc2UgewoJCQkJCQlpZiAoIGkgPT09IDAgKSB7CgkJCQkJCQl0aGF0LnJhbmdlLnN0b3AoIDEsIDEgKVsgYW5pbWF0ZSA/ICJhbmltYXRlIiA6ICJjc3MiIF0oIHsgYm90dG9tOiAoIHZhbFBlcmNlbnQgKSArICIlIiB9LCBvLmFuaW1hdGUgKTsKCQkJCQkJfQoJCQkJCQlpZiAoIGkgPT09IDEgKSB7CgkJCQkJCQl0aGF0LnJhbmdlWyBhbmltYXRlID8gImFuaW1hdGUiIDogImNzcyIgXSggeyBoZWlnaHQ6ICggdmFsUGVyY2VudCAtIGxhc3RWYWxQZXJjZW50ICkgKyAiJSIgfSwgeyBxdWV1ZTogZmFsc2UsIGR1cmF0aW9uOiBvLmFuaW1hdGUgfSApOwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQkJbGFzdFZhbFBlcmNlbnQgPSB2YWxQZXJjZW50OwoJCQl9KTsKCQl9IGVsc2UgewoJCQl2YWx1ZSA9IHRoaXMudmFsdWUoKTsKCQkJdmFsdWVNaW4gPSB0aGlzLl92YWx1ZU1pbigpOwoJCQl2YWx1ZU1heCA9IHRoaXMuX3ZhbHVlTWF4KCk7CgkJCXZhbFBlcmNlbnQgPSAoIHZhbHVlTWF4ICE9PSB2YWx1ZU1pbiApID8KCQkJCQkoIHZhbHVlIC0gdmFsdWVNaW4gKSAvICggdmFsdWVNYXggLSB2YWx1ZU1pbiApICogMTAwIDoKCQkJCQkwOwoJCQlfc2V0WyB0aGlzLm9yaWVudGF0aW9uID09PSAiaG9yaXpvbnRhbCIgPyAibGVmdCIgOiAiYm90dG9tIiBdID0gdmFsUGVyY2VudCArICIlIjsKCQkJdGhpcy5oYW5kbGUuc3RvcCggMSwgMSApWyBhbmltYXRlID8gImFuaW1hdGUiIDogImNzcyIgXSggX3NldCwgby5hbmltYXRlICk7CgoJCQlpZiAoIG9SYW5nZSA9PT0gIm1pbiIgJiYgdGhpcy5vcmllbnRhdGlvbiA9PT0gImhvcml6b250YWwiICkgewoJCQkJdGhpcy5yYW5nZS5zdG9wKCAxLCAxIClbIGFuaW1hdGUgPyAiYW5pbWF0ZSIgOiAiY3NzIiBdKCB7IHdpZHRoOiB2YWxQZXJjZW50ICsgIiUiIH0sIG8uYW5pbWF0ZSApOwoJCQl9CgkJCWlmICggb1JhbmdlID09PSAibWF4IiAmJiB0aGlzLm9yaWVudGF0aW9uID09PSAiaG9yaXpvbnRhbCIgKSB7CgkJCQl0aGlzLnJhbmdlWyBhbmltYXRlID8gImFuaW1hdGUiIDogImNzcyIgXSggeyB3aWR0aDogKCAxMDAgLSB2YWxQZXJjZW50ICkgKyAiJSIgfSwgeyBxdWV1ZTogZmFsc2UsIGR1cmF0aW9uOiBvLmFuaW1hdGUgfSApOwoJCQl9CgkJCWlmICggb1JhbmdlID09PSAibWluIiAmJiB0aGlzLm9yaWVudGF0aW9uID09PSAidmVydGljYWwiICkgewoJCQkJdGhpcy5yYW5nZS5zdG9wKCAxLCAxIClbIGFuaW1hdGUgPyAiYW5pbWF0ZSIgOiAiY3NzIiBdKCB7IGhlaWdodDogdmFsUGVyY2VudCArICIlIiB9LCBvLmFuaW1hdGUgKTsKCQkJfQoJCQlpZiAoIG9SYW5nZSA9PT0gIm1heCIgJiYgdGhpcy5vcmllbnRhdGlvbiA9PT0gInZlcnRpY2FsIiApIHsKCQkJCXRoaXMucmFuZ2VbIGFuaW1hdGUgPyAiYW5pbWF0ZSIgOiAiY3NzIiBdKCB7IGhlaWdodDogKCAxMDAgLSB2YWxQZXJjZW50ICkgKyAiJSIgfSwgeyBxdWV1ZTogZmFsc2UsIGR1cmF0aW9uOiBvLmFuaW1hdGUgfSApOwoJCQl9CgkJfQoJfQoKfSk7Cgp9KGpRdWVyeSkpOwooZnVuY3Rpb24oICQgKSB7CgpmdW5jdGlvbiBtb2RpZmllciggZm4gKSB7CglyZXR1cm4gZnVuY3Rpb24oKSB7CgkJdmFyIHByZXZpb3VzID0gdGhpcy5lbGVtZW50LnZhbCgpOwoJCWZuLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTsKCQl0aGlzLl9yZWZyZXNoKCk7CgkJaWYgKCBwcmV2aW91cyAhPT0gdGhpcy5lbGVtZW50LnZhbCgpICkgewoJCQl0aGlzLl90cmlnZ2VyKCAiY2hhbmdlIiApOwoJCX0KCX07Cn0KCiQud2lkZ2V0KCAidWkuc3Bpbm5lciIsIHsKCXZlcnNpb246ICIxLjkuMiIsCglkZWZhdWx0RWxlbWVudDogIjxpbnB1dD4iLAoJd2lkZ2V0RXZlbnRQcmVmaXg6ICJzcGluIiwKCW9wdGlvbnM6IHsKCQljdWx0dXJlOiBudWxsLAoJCWljb25zOiB7CgkJCWRvd246ICJ1aS1pY29uLXRyaWFuZ2xlLTEtcyIsCgkJCXVwOiAidWktaWNvbi10cmlhbmdsZS0xLW4iCgkJfSwKCQlpbmNyZW1lbnRhbDogdHJ1ZSwKCQltYXg6IG51bGwsCgkJbWluOiBudWxsLAoJCW51bWJlckZvcm1hdDogbnVsbCwKCQlwYWdlOiAxMCwKCQlzdGVwOiAxLAoKCQljaGFuZ2U6IG51bGwsCgkJc3BpbjogbnVsbCwKCQlzdGFydDogbnVsbCwKCQlzdG9wOiBudWxsCgl9LAoKCV9jcmVhdGU6IGZ1bmN0aW9uKCkgewoJCS8vIGhhbmRsZSBzdHJpbmcgdmFsdWVzIHRoYXQgbmVlZCB0byBiZSBwYXJzZWQKCQl0aGlzLl9zZXRPcHRpb24oICJtYXgiLCB0aGlzLm9wdGlvbnMubWF4ICk7CgkJdGhpcy5fc2V0T3B0aW9uKCAibWluIiwgdGhpcy5vcHRpb25zLm1pbiApOwoJCXRoaXMuX3NldE9wdGlvbiggInN0ZXAiLCB0aGlzLm9wdGlvbnMuc3RlcCApOwoKCQkvLyBmb3JtYXQgdGhlIHZhbHVlLCBidXQgZG9uJ3QgY29uc3RyYWluCgkJdGhpcy5fdmFsdWUoIHRoaXMuZWxlbWVudC52YWwoKSwgdHJ1ZSApOwoKCQl0aGlzLl9kcmF3KCk7CgkJdGhpcy5fb24oIHRoaXMuX2V2ZW50cyApOwoJCXRoaXMuX3JlZnJlc2goKTsKCgkJLy8gdHVybmluZyBvZmYgYXV0b2NvbXBsZXRlIHByZXZlbnRzIHRoZSBicm93c2VyIGZyb20gcmVtZW1iZXJpbmcgdGhlCgkJLy8gdmFsdWUgd2hlbiBuYXZpZ2F0aW5nIHRocm91Z2ggaGlzdG9yeSwgc28gd2UgcmUtZW5hYmxlIGF1dG9jb21wbGV0ZQoJCS8vIGlmIHRoZSBwYWdlIGlzIHVubG9hZGVkIGJlZm9yZSB0aGUgd2lkZ2V0IGlzIGRlc3Ryb3llZC4gIzc3OTAKCQl0aGlzLl9vbiggdGhpcy53aW5kb3csIHsKCQkJYmVmb3JldW5sb2FkOiBmdW5jdGlvbigpIHsKCQkJCXRoaXMuZWxlbWVudC5yZW1vdmVBdHRyKCAiYXV0b2NvbXBsZXRlIiApOwoJCQl9CgkJfSk7Cgl9LAoKCV9nZXRDcmVhdGVPcHRpb25zOiBmdW5jdGlvbigpIHsKCQl2YXIgb3B0aW9ucyA9IHt9LAoJCQllbGVtZW50ID0gdGhpcy5lbGVtZW50OwoKCQkkLmVhY2goIFsgIm1pbiIsICJtYXgiLCAic3RlcCIgXSwgZnVuY3Rpb24oIGksIG9wdGlvbiApIHsKCQkJdmFyIHZhbHVlID0gZWxlbWVudC5hdHRyKCBvcHRpb24gKTsKCQkJaWYgKCB2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlLmxlbmd0aCApIHsKCQkJCW9wdGlvbnNbIG9wdGlvbiBdID0gdmFsdWU7CgkJCX0KCQl9KTsKCgkJcmV0dXJuIG9wdGlvbnM7Cgl9LAoKCV9ldmVudHM6IHsKCQlrZXlkb3duOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJCWlmICggdGhpcy5fc3RhcnQoIGV2ZW50ICkgJiYgdGhpcy5fa2V5ZG93biggZXZlbnQgKSApIHsKCQkJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgkJCX0KCQl9LAoJCWtleXVwOiAiX3N0b3AiLAoJCWZvY3VzOiBmdW5jdGlvbigpIHsKCQkJdGhpcy5wcmV2aW91cyA9IHRoaXMuZWxlbWVudC52YWwoKTsKCQl9LAoJCWJsdXI6IGZ1bmN0aW9uKCBldmVudCApIHsKCQkJaWYgKCB0aGlzLmNhbmNlbEJsdXIgKSB7CgkJCQlkZWxldGUgdGhpcy5jYW5jZWxCbHVyOwoJCQkJcmV0dXJuOwoJCQl9CgoJCQl0aGlzLl9yZWZyZXNoKCk7CgkJCWlmICggdGhpcy5wcmV2aW91cyAhPT0gdGhpcy5lbGVtZW50LnZhbCgpICkgewoJCQkJdGhpcy5fdHJpZ2dlciggImNoYW5nZSIsIGV2ZW50ICk7CgkJCX0KCQl9LAoJCW1vdXNld2hlZWw6IGZ1bmN0aW9uKCBldmVudCwgZGVsdGEgKSB7CgkJCWlmICggIWRlbHRhICkgewoJCQkJcmV0dXJuOwoJCQl9CgkJCWlmICggIXRoaXMuc3Bpbm5pbmcgJiYgIXRoaXMuX3N0YXJ0KCBldmVudCApICkgewoJCQkJcmV0dXJuIGZhbHNlOwoJCQl9CgoJCQl0aGlzLl9zcGluKCAoZGVsdGEgPiAwID8gMSA6IC0xKSAqIHRoaXMub3B0aW9ucy5zdGVwLCBldmVudCApOwoJCQljbGVhclRpbWVvdXQoIHRoaXMubW91c2V3aGVlbFRpbWVyICk7CgkJCXRoaXMubW91c2V3aGVlbFRpbWVyID0gdGhpcy5fZGVsYXkoZnVuY3Rpb24oKSB7CgkJCQlpZiAoIHRoaXMuc3Bpbm5pbmcgKSB7CgkJCQkJdGhpcy5fc3RvcCggZXZlbnQgKTsKCQkJCX0KCQkJfSwgMTAwICk7CgkJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgkJfSwKCQkibW91c2Vkb3duIC51aS1zcGlubmVyLWJ1dHRvbiI6IGZ1bmN0aW9uKCBldmVudCApIHsKCQkJdmFyIHByZXZpb3VzOwoKCQkJLy8gV2UgbmV2ZXIgd2FudCB0aGUgYnV0dG9ucyB0byBoYXZlIGZvY3VzOyB3aGVuZXZlciB0aGUgdXNlciBpcwoJCQkvLyBpbnRlcmFjdGluZyB3aXRoIHRoZSBzcGlubmVyLCB0aGUgZm9jdXMgc2hvdWxkIGJlIG9uIHRoZSBpbnB1dC4KCQkJLy8gSWYgdGhlIGlucHV0IGlzIGZvY3VzZWQgdGhlbiB0aGlzLnByZXZpb3VzIGlzIHByb3Blcmx5IHNldCBmcm9tCgkJCS8vIHdoZW4gdGhlIGlucHV0IGZpcnN0IHJlY2VpdmVkIGZvY3VzLiBJZiB0aGUgaW5wdXQgaXMgbm90IGZvY3VzZWQKCQkJLy8gdGhlbiB3ZSBuZWVkIHRvIHNldCB0aGlzLnByZXZpb3VzIGJhc2VkIG9uIHRoZSB2YWx1ZSBiZWZvcmUgc3Bpbm5pbmcuCgkJCXByZXZpb3VzID0gdGhpcy5lbGVtZW50WzBdID09PSB0aGlzLmRvY3VtZW50WzBdLmFjdGl2ZUVsZW1lbnQgPwoJCQkJdGhpcy5wcmV2aW91cyA6IHRoaXMuZWxlbWVudC52YWwoKTsKCQkJZnVuY3Rpb24gY2hlY2tGb2N1cygpIHsKCQkJCXZhciBpc0FjdGl2ZSA9IHRoaXMuZWxlbWVudFswXSA9PT0gdGhpcy5kb2N1bWVudFswXS5hY3RpdmVFbGVtZW50OwoJCQkJaWYgKCAhaXNBY3RpdmUgKSB7CgkJCQkJdGhpcy5lbGVtZW50LmZvY3VzKCk7CgkJCQkJdGhpcy5wcmV2aW91cyA9IHByZXZpb3VzOwoJCQkJCS8vIHN1cHBvcnQ6IElFCgkJCQkJLy8gSUUgc2V0cyBmb2N1cyBhc3luY2hyb25vdXNseSwgc28gd2UgbmVlZCB0byBjaGVjayBpZiBmb2N1cwoJCQkJCS8vIG1vdmVkIG9mZiBvZiB0aGUgaW5wdXQgYmVjYXVzZSB0aGUgdXNlciBjbGlja2VkIG9uIHRoZSBidXR0b24uCgkJCQkJdGhpcy5fZGVsYXkoZnVuY3Rpb24oKSB7CgkJCQkJCXRoaXMucHJldmlvdXMgPSBwcmV2aW91czsKCQkJCQl9KTsKCQkJCX0KCQkJfQoKCQkJLy8gZW5zdXJlIGZvY3VzIGlzIG9uIChvciBzdGF5cyBvbikgdGhlIHRleHQgZmllbGQKCQkJZXZlbnQucHJldmVudERlZmF1bHQoKTsKCQkJY2hlY2tGb2N1cy5jYWxsKCB0aGlzICk7CgoJCQkvLyBzdXBwb3J0OiBJRQoJCQkvLyBJRSBkb2Vzbid0IHByZXZlbnQgbW92aW5nIGZvY3VzIGV2ZW4gd2l0aCBldmVudC5wcmV2ZW50RGVmYXVsdCgpCgkJCS8vIHNvIHdlIHNldCBhIGZsYWcgdG8ga25vdyB3aGVuIHdlIHNob3VsZCBpZ25vcmUgdGhlIGJsdXIgZXZlbnQKCQkJLy8gYW5kIGNoZWNrIChhZ2FpbikgaWYgZm9jdXMgbW92ZWQgb2ZmIG9mIHRoZSBpbnB1dC4KCQkJdGhpcy5jYW5jZWxCbHVyID0gdHJ1ZTsKCQkJdGhpcy5fZGVsYXkoZnVuY3Rpb24oKSB7CgkJCQlkZWxldGUgdGhpcy5jYW5jZWxCbHVyOwoJCQkJY2hlY2tGb2N1cy5jYWxsKCB0aGlzICk7CgkJCX0pOwoKCQkJaWYgKCB0aGlzLl9zdGFydCggZXZlbnQgKSA9PT0gZmFsc2UgKSB7CgkJCQlyZXR1cm47CgkJCX0KCgkJCXRoaXMuX3JlcGVhdCggbnVsbCwgJCggZXZlbnQuY3VycmVudFRhcmdldCApLmhhc0NsYXNzKCAidWktc3Bpbm5lci11cCIgKSA/IDEgOiAtMSwgZXZlbnQgKTsKCQl9LAoJCSJtb3VzZXVwIC51aS1zcGlubmVyLWJ1dHRvbiI6ICJfc3RvcCIsCgkJIm1vdXNlZW50ZXIgLnVpLXNwaW5uZXItYnV0dG9uIjogZnVuY3Rpb24oIGV2ZW50ICkgewoJCQkvLyBidXR0b24gd2lsbCBhZGQgdWktc3RhdGUtYWN0aXZlIGlmIG1vdXNlIHdhcyBkb3duIHdoaWxlIG1vdXNlbGVhdmUgYW5kIGtlcHQgZG93bgoJCQlpZiAoICEkKCBldmVudC5jdXJyZW50VGFyZ2V0ICkuaGFzQ2xhc3MoICJ1aS1zdGF0ZS1hY3RpdmUiICkgKSB7CgkJCQlyZXR1cm47CgkJCX0KCgkJCWlmICggdGhpcy5fc3RhcnQoIGV2ZW50ICkgPT09IGZhbHNlICkgewoJCQkJcmV0dXJuIGZhbHNlOwoJCQl9CgkJCXRoaXMuX3JlcGVhdCggbnVsbCwgJCggZXZlbnQuY3VycmVudFRhcmdldCApLmhhc0NsYXNzKCAidWktc3Bpbm5lci11cCIgKSA/IDEgOiAtMSwgZXZlbnQgKTsKCQl9LAoJCS8vIFRPRE86IGRvIHdlIHJlYWxseSB3YW50IHRvIGNvbnNpZGVyIHRoaXMgYSBzdG9wPwoJCS8vIHNob3VsZG4ndCB3ZSBqdXN0IHN0b3AgdGhlIHJlcGVhdGVyIGFuZCB3YWl0IHVudGlsIG1vdXNldXAgYmVmb3JlCgkJLy8gd2UgdHJpZ2dlciB0aGUgc3RvcCBldmVudD8KCQkibW91c2VsZWF2ZSAudWktc3Bpbm5lci1idXR0b24iOiAiX3N0b3AiCgl9LAoKCV9kcmF3OiBmdW5jdGlvbigpIHsKCQl2YXIgdWlTcGlubmVyID0gdGhpcy51aVNwaW5uZXIgPSB0aGlzLmVsZW1lbnQKCQkJLmFkZENsYXNzKCAidWktc3Bpbm5lci1pbnB1dCIgKQoJCQkuYXR0ciggImF1dG9jb21wbGV0ZSIsICJvZmYiICkKCQkJLndyYXAoIHRoaXMuX3VpU3Bpbm5lckh0bWwoKSApCgkJCS5wYXJlbnQoKQoJCQkJLy8gYWRkIGJ1dHRvbnMKCQkJCS5hcHBlbmQoIHRoaXMuX2J1dHRvbkh0bWwoKSApOwoKCQl0aGlzLmVsZW1lbnQuYXR0ciggInJvbGUiLCAic3BpbmJ1dHRvbiIgKTsKCgkJLy8gYnV0dG9uIGJpbmRpbmdzCgkJdGhpcy5idXR0b25zID0gdWlTcGlubmVyLmZpbmQoICIudWktc3Bpbm5lci1idXR0b24iICkKCQkJLmF0dHIoICJ0YWJJbmRleCIsIC0xICkKCQkJLmJ1dHRvbigpCgkJCS5yZW1vdmVDbGFzcyggInVpLWNvcm5lci1hbGwiICk7CgoJCS8vIElFIDYgZG9lc24ndCB1bmRlcnN0YW5kIGhlaWdodDogNTAlIGZvciB0aGUgYnV0dG9ucwoJCS8vIHVubGVzcyB0aGUgd3JhcHBlciBoYXMgYW4gZXhwbGljaXQgaGVpZ2h0CgkJaWYgKCB0aGlzLmJ1dHRvbnMuaGVpZ2h0KCkgPiBNYXRoLmNlaWwoIHVpU3Bpbm5lci5oZWlnaHQoKSAqIDAuNSApICYmCgkJCQl1aVNwaW5uZXIuaGVpZ2h0KCkgPiAwICkgewoJCQl1aVNwaW5uZXIuaGVpZ2h0KCB1aVNwaW5uZXIuaGVpZ2h0KCkgKTsKCQl9CgoJCS8vIGRpc2FibGUgc3Bpbm5lciBpZiBlbGVtZW50IHdhcyBhbHJlYWR5IGRpc2FibGVkCgkJaWYgKCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgKSB7CgkJCXRoaXMuZGlzYWJsZSgpOwoJCX0KCX0sCgoJX2tleWRvd246IGZ1bmN0aW9uKCBldmVudCApIHsKCQl2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucywKCQkJa2V5Q29kZSA9ICQudWkua2V5Q29kZTsKCgkJc3dpdGNoICggZXZlbnQua2V5Q29kZSApIHsKCQljYXNlIGtleUNvZGUuVVA6CgkJCXRoaXMuX3JlcGVhdCggbnVsbCwgMSwgZXZlbnQgKTsKCQkJcmV0dXJuIHRydWU7CgkJY2FzZSBrZXlDb2RlLkRPV046CgkJCXRoaXMuX3JlcGVhdCggbnVsbCwgLTEsIGV2ZW50ICk7CgkJCXJldHVybiB0cnVlOwoJCWNhc2Uga2V5Q29kZS5QQUdFX1VQOgoJCQl0aGlzLl9yZXBlYXQoIG51bGwsIG9wdGlvbnMucGFnZSwgZXZlbnQgKTsKCQkJcmV0dXJuIHRydWU7CgkJY2FzZSBrZXlDb2RlLlBBR0VfRE9XTjoKCQkJdGhpcy5fcmVwZWF0KCBudWxsLCAtb3B0aW9ucy5wYWdlLCBldmVudCApOwoJCQlyZXR1cm4gdHJ1ZTsKCQl9CgoJCXJldHVybiBmYWxzZTsKCX0sCgoJX3VpU3Bpbm5lckh0bWw6IGZ1bmN0aW9uKCkgewoJCXJldHVybiAiPHNwYW4gY2xhc3M9J3VpLXNwaW5uZXIgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGwnPjwvc3Bhbj4iOwoJfSwKCglfYnV0dG9uSHRtbDogZnVuY3Rpb24oKSB7CgkJcmV0dXJuICIiICsKCQkJIjxhIGNsYXNzPSd1aS1zcGlubmVyLWJ1dHRvbiB1aS1zcGlubmVyLXVwIHVpLWNvcm5lci10cic+IiArCgkJCQkiPHNwYW4gY2xhc3M9J3VpLWljb24gIiArIHRoaXMub3B0aW9ucy5pY29ucy51cCArICInPiYjOTY1MDs8L3NwYW4+IiArCgkJCSI8L2E+IiArCgkJCSI8YSBjbGFzcz0ndWktc3Bpbm5lci1idXR0b24gdWktc3Bpbm5lci1kb3duIHVpLWNvcm5lci1icic+IiArCgkJCQkiPHNwYW4gY2xhc3M9J3VpLWljb24gIiArIHRoaXMub3B0aW9ucy5pY29ucy5kb3duICsgIic+JiM5NjYwOzwvc3Bhbj4iICsKCQkJIjwvYT4iOwoJfSwKCglfc3RhcnQ6IGZ1bmN0aW9uKCBldmVudCApIHsKCQlpZiAoICF0aGlzLnNwaW5uaW5nICYmIHRoaXMuX3RyaWdnZXIoICJzdGFydCIsIGV2ZW50ICkgPT09IGZhbHNlICkgewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoKCQlpZiAoICF0aGlzLmNvdW50ZXIgKSB7CgkJCXRoaXMuY291bnRlciA9IDE7CgkJfQoJCXRoaXMuc3Bpbm5pbmcgPSB0cnVlOwoJCXJldHVybiB0cnVlOwoJfSwKCglfcmVwZWF0OiBmdW5jdGlvbiggaSwgc3RlcHMsIGV2ZW50ICkgewoJCWkgPSBpIHx8IDUwMDsKCgkJY2xlYXJUaW1lb3V0KCB0aGlzLnRpbWVyICk7CgkJdGhpcy50aW1lciA9IHRoaXMuX2RlbGF5KGZ1bmN0aW9uKCkgewoJCQl0aGlzLl9yZXBlYXQoIDQwLCBzdGVwcywgZXZlbnQgKTsKCQl9LCBpICk7CgoJCXRoaXMuX3NwaW4oIHN0ZXBzICogdGhpcy5vcHRpb25zLnN0ZXAsIGV2ZW50ICk7Cgl9LAoKCV9zcGluOiBmdW5jdGlvbiggc3RlcCwgZXZlbnQgKSB7CgkJdmFyIHZhbHVlID0gdGhpcy52YWx1ZSgpIHx8IDA7CgoJCWlmICggIXRoaXMuY291bnRlciApIHsKCQkJdGhpcy5jb3VudGVyID0gMTsKCQl9CgoJCXZhbHVlID0gdGhpcy5fYWRqdXN0VmFsdWUoIHZhbHVlICsgc3RlcCAqIHRoaXMuX2luY3JlbWVudCggdGhpcy5jb3VudGVyICkgKTsKCgkJaWYgKCAhdGhpcy5zcGlubmluZyB8fCB0aGlzLl90cmlnZ2VyKCAic3BpbiIsIGV2ZW50LCB7IHZhbHVlOiB2YWx1ZSB9ICkgIT09IGZhbHNlKSB7CgkJCXRoaXMuX3ZhbHVlKCB2YWx1ZSApOwoJCQl0aGlzLmNvdW50ZXIrKzsKCQl9Cgl9LAoKCV9pbmNyZW1lbnQ6IGZ1bmN0aW9uKCBpICkgewoJCXZhciBpbmNyZW1lbnRhbCA9IHRoaXMub3B0aW9ucy5pbmNyZW1lbnRhbDsKCgkJaWYgKCBpbmNyZW1lbnRhbCApIHsKCQkJcmV0dXJuICQuaXNGdW5jdGlvbiggaW5jcmVtZW50YWwgKSA/CgkJCQlpbmNyZW1lbnRhbCggaSApIDoKCQkJCU1hdGguZmxvb3IoIGkqaSppLzUwMDAwIC0gaSppLzUwMCArIDE3KmkvMjAwICsgMSApOwoJCX0KCgkJcmV0dXJuIDE7Cgl9LAoKCV9wcmVjaXNpb246IGZ1bmN0aW9uKCkgewoJCXZhciBwcmVjaXNpb24gPSB0aGlzLl9wcmVjaXNpb25PZiggdGhpcy5vcHRpb25zLnN0ZXAgKTsKCQlpZiAoIHRoaXMub3B0aW9ucy5taW4gIT09IG51bGwgKSB7CgkJCXByZWNpc2lvbiA9IE1hdGgubWF4KCBwcmVjaXNpb24sIHRoaXMuX3ByZWNpc2lvbk9mKCB0aGlzLm9wdGlvbnMubWluICkgKTsKCQl9CgkJcmV0dXJuIHByZWNpc2lvbjsKCX0sCgoJX3ByZWNpc2lvbk9mOiBmdW5jdGlvbiggbnVtICkgewoJCXZhciBzdHIgPSBudW0udG9TdHJpbmcoKSwKCQkJZGVjaW1hbCA9IHN0ci5pbmRleE9mKCAiLiIgKTsKCQlyZXR1cm4gZGVjaW1hbCA9PT0gLTEgPyAwIDogc3RyLmxlbmd0aCAtIGRlY2ltYWwgLSAxOwoJfSwKCglfYWRqdXN0VmFsdWU6IGZ1bmN0aW9uKCB2YWx1ZSApIHsKCQl2YXIgYmFzZSwgYWJvdmVNaW4sCgkJCW9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7CgoJCS8vIG1ha2Ugc3VyZSB3ZSdyZSBhdCBhIHZhbGlkIHN0ZXAKCQkvLyAtIGZpbmQgb3V0IHdoZXJlIHdlIGFyZSByZWxhdGl2ZSB0byB0aGUgYmFzZSAobWluIG9yIDApCgkJYmFzZSA9IG9wdGlvbnMubWluICE9PSBudWxsID8gb3B0aW9ucy5taW4gOiAwOwoJCWFib3ZlTWluID0gdmFsdWUgLSBiYXNlOwoJCS8vIC0gcm91bmQgdG8gdGhlIG5lYXJlc3Qgc3RlcAoJCWFib3ZlTWluID0gTWF0aC5yb3VuZChhYm92ZU1pbiAvIG9wdGlvbnMuc3RlcCkgKiBvcHRpb25zLnN0ZXA7CgkJLy8gLSByb3VuZGluZyBpcyBiYXNlZCBvbiAwLCBzbyBhZGp1c3QgYmFjayB0byBvdXIgYmFzZQoJCXZhbHVlID0gYmFzZSArIGFib3ZlTWluOwoKCQkvLyBmaXggcHJlY2lzaW9uIGZyb20gYmFkIEpTIGZsb2F0aW5nIHBvaW50IG1hdGgKCQl2YWx1ZSA9IHBhcnNlRmxvYXQoIHZhbHVlLnRvRml4ZWQoIHRoaXMuX3ByZWNpc2lvbigpICkgKTsKCgkJLy8gY2xhbXAgdGhlIHZhbHVlCgkJaWYgKCBvcHRpb25zLm1heCAhPT0gbnVsbCAmJiB2YWx1ZSA+IG9wdGlvbnMubWF4KSB7CgkJCXJldHVybiBvcHRpb25zLm1heDsKCQl9CgkJaWYgKCBvcHRpb25zLm1pbiAhPT0gbnVsbCAmJiB2YWx1ZSA8IG9wdGlvbnMubWluICkgewoJCQlyZXR1cm4gb3B0aW9ucy5taW47CgkJfQoKCQlyZXR1cm4gdmFsdWU7Cgl9LAoKCV9zdG9wOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJaWYgKCAhdGhpcy5zcGlubmluZyApIHsKCQkJcmV0dXJuOwoJCX0KCgkJY2xlYXJUaW1lb3V0KCB0aGlzLnRpbWVyICk7CgkJY2xlYXJUaW1lb3V0KCB0aGlzLm1vdXNld2hlZWxUaW1lciApOwoJCXRoaXMuY291bnRlciA9IDA7CgkJdGhpcy5zcGlubmluZyA9IGZhbHNlOwoJCXRoaXMuX3RyaWdnZXIoICJzdG9wIiwgZXZlbnQgKTsKCX0sCgoJX3NldE9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7CgkJaWYgKCBrZXkgPT09ICJjdWx0dXJlIiB8fCBrZXkgPT09ICJudW1iZXJGb3JtYXQiICkgewoJCQl2YXIgcHJldlZhbHVlID0gdGhpcy5fcGFyc2UoIHRoaXMuZWxlbWVudC52YWwoKSApOwoJCQl0aGlzLm9wdGlvbnNbIGtleSBdID0gdmFsdWU7CgkJCXRoaXMuZWxlbWVudC52YWwoIHRoaXMuX2Zvcm1hdCggcHJldlZhbHVlICkgKTsKCQkJcmV0dXJuOwoJCX0KCgkJaWYgKCBrZXkgPT09ICJtYXgiIHx8IGtleSA9PT0gIm1pbiIgfHwga2V5ID09PSAic3RlcCIgKSB7CgkJCWlmICggdHlwZW9mIHZhbHVlID09PSAic3RyaW5nIiApIHsKCQkJCXZhbHVlID0gdGhpcy5fcGFyc2UoIHZhbHVlICk7CgkJCX0KCQl9CgoJCXRoaXMuX3N1cGVyKCBrZXksIHZhbHVlICk7CgoJCWlmICgga2V5ID09PSAiZGlzYWJsZWQiICkgewoJCQlpZiAoIHZhbHVlICkgewoJCQkJdGhpcy5lbGVtZW50LnByb3AoICJkaXNhYmxlZCIsIHRydWUgKTsKCQkJCXRoaXMuYnV0dG9ucy5idXR0b24oICJkaXNhYmxlIiApOwoJCQl9IGVsc2UgewoJCQkJdGhpcy5lbGVtZW50LnByb3AoICJkaXNhYmxlZCIsIGZhbHNlICk7CgkJCQl0aGlzLmJ1dHRvbnMuYnV0dG9uKCAiZW5hYmxlIiApOwoJCQl9CgkJfQoJfSwKCglfc2V0T3B0aW9uczogbW9kaWZpZXIoZnVuY3Rpb24oIG9wdGlvbnMgKSB7CgkJdGhpcy5fc3VwZXIoIG9wdGlvbnMgKTsKCQl0aGlzLl92YWx1ZSggdGhpcy5lbGVtZW50LnZhbCgpICk7Cgl9KSwKCglfcGFyc2U6IGZ1bmN0aW9uKCB2YWwgKSB7CgkJaWYgKCB0eXBlb2YgdmFsID09PSAic3RyaW5nIiAmJiB2YWwgIT09ICIiICkgewoJCQl2YWwgPSB3aW5kb3cuR2xvYmFsaXplICYmIHRoaXMub3B0aW9ucy5udW1iZXJGb3JtYXQgPwoJCQkJR2xvYmFsaXplLnBhcnNlRmxvYXQoIHZhbCwgMTAsIHRoaXMub3B0aW9ucy5jdWx0dXJlICkgOiArdmFsOwoJCX0KCQlyZXR1cm4gdmFsID09PSAiIiB8fCBpc05hTiggdmFsICkgPyBudWxsIDogdmFsOwoJfSwKCglfZm9ybWF0OiBmdW5jdGlvbiggdmFsdWUgKSB7CgkJaWYgKCB2YWx1ZSA9PT0gIiIgKSB7CgkJCXJldHVybiAiIjsKCQl9CgkJcmV0dXJuIHdpbmRvdy5HbG9iYWxpemUgJiYgdGhpcy5vcHRpb25zLm51bWJlckZvcm1hdCA/CgkJCUdsb2JhbGl6ZS5mb3JtYXQoIHZhbHVlLCB0aGlzLm9wdGlvbnMubnVtYmVyRm9ybWF0LCB0aGlzLm9wdGlvbnMuY3VsdHVyZSApIDoKCQkJdmFsdWU7Cgl9LAoKCV9yZWZyZXNoOiBmdW5jdGlvbigpIHsKCQl0aGlzLmVsZW1lbnQuYXR0cih7CgkJCSJhcmlhLXZhbHVlbWluIjogdGhpcy5vcHRpb25zLm1pbiwKCQkJImFyaWEtdmFsdWVtYXgiOiB0aGlzLm9wdGlvbnMubWF4LAoJCQkvLyBUT0RPOiB3aGF0IHNob3VsZCB3ZSBkbyB3aXRoIHZhbHVlcyB0aGF0IGNhbid0IGJlIHBhcnNlZD8KCQkJImFyaWEtdmFsdWVub3ciOiB0aGlzLl9wYXJzZSggdGhpcy5lbGVtZW50LnZhbCgpICkKCQl9KTsKCX0sCgoJLy8gdXBkYXRlIHRoZSB2YWx1ZSB3aXRob3V0IHRyaWdnZXJpbmcgY2hhbmdlCglfdmFsdWU6IGZ1bmN0aW9uKCB2YWx1ZSwgYWxsb3dBbnkgKSB7CgkJdmFyIHBhcnNlZDsKCQlpZiAoIHZhbHVlICE9PSAiIiApIHsKCQkJcGFyc2VkID0gdGhpcy5fcGFyc2UoIHZhbHVlICk7CgkJCWlmICggcGFyc2VkICE9PSBudWxsICkgewoJCQkJaWYgKCAhYWxsb3dBbnkgKSB7CgkJCQkJcGFyc2VkID0gdGhpcy5fYWRqdXN0VmFsdWUoIHBhcnNlZCApOwoJCQkJfQoJCQkJdmFsdWUgPSB0aGlzLl9mb3JtYXQoIHBhcnNlZCApOwoJCQl9CgkJfQoJCXRoaXMuZWxlbWVudC52YWwoIHZhbHVlICk7CgkJdGhpcy5fcmVmcmVzaCgpOwoJfSwKCglfZGVzdHJveTogZnVuY3Rpb24oKSB7CgkJdGhpcy5lbGVtZW50CgkJCS5yZW1vdmVDbGFzcyggInVpLXNwaW5uZXItaW5wdXQiICkKCQkJLnByb3AoICJkaXNhYmxlZCIsIGZhbHNlICkKCQkJLnJlbW92ZUF0dHIoICJhdXRvY29tcGxldGUiICkKCQkJLnJlbW92ZUF0dHIoICJyb2xlIiApCgkJCS5yZW1vdmVBdHRyKCAiYXJpYS12YWx1ZW1pbiIgKQoJCQkucmVtb3ZlQXR0ciggImFyaWEtdmFsdWVtYXgiICkKCQkJLnJlbW92ZUF0dHIoICJhcmlhLXZhbHVlbm93IiApOwoJCXRoaXMudWlTcGlubmVyLnJlcGxhY2VXaXRoKCB0aGlzLmVsZW1lbnQgKTsKCX0sCgoJc3RlcFVwOiBtb2RpZmllcihmdW5jdGlvbiggc3RlcHMgKSB7CgkJdGhpcy5fc3RlcFVwKCBzdGVwcyApOwoJfSksCglfc3RlcFVwOiBmdW5jdGlvbiggc3RlcHMgKSB7CgkJdGhpcy5fc3BpbiggKHN0ZXBzIHx8IDEpICogdGhpcy5vcHRpb25zLnN0ZXAgKTsKCX0sCgoJc3RlcERvd246IG1vZGlmaWVyKGZ1bmN0aW9uKCBzdGVwcyApIHsKCQl0aGlzLl9zdGVwRG93biggc3RlcHMgKTsKCX0pLAoJX3N0ZXBEb3duOiBmdW5jdGlvbiggc3RlcHMgKSB7CgkJdGhpcy5fc3BpbiggKHN0ZXBzIHx8IDEpICogLXRoaXMub3B0aW9ucy5zdGVwICk7Cgl9LAoKCXBhZ2VVcDogbW9kaWZpZXIoZnVuY3Rpb24oIHBhZ2VzICkgewoJCXRoaXMuX3N0ZXBVcCggKHBhZ2VzIHx8IDEpICogdGhpcy5vcHRpb25zLnBhZ2UgKTsKCX0pLAoKCXBhZ2VEb3duOiBtb2RpZmllcihmdW5jdGlvbiggcGFnZXMgKSB7CgkJdGhpcy5fc3RlcERvd24oIChwYWdlcyB8fCAxKSAqIHRoaXMub3B0aW9ucy5wYWdlICk7Cgl9KSwKCgl2YWx1ZTogZnVuY3Rpb24oIG5ld1ZhbCApIHsKCQlpZiAoICFhcmd1bWVudHMubGVuZ3RoICkgewoJCQlyZXR1cm4gdGhpcy5fcGFyc2UoIHRoaXMuZWxlbWVudC52YWwoKSApOwoJCX0KCQltb2RpZmllciggdGhpcy5fdmFsdWUgKS5jYWxsKCB0aGlzLCBuZXdWYWwgKTsKCX0sCgoJd2lkZ2V0OiBmdW5jdGlvbigpIHsKCQlyZXR1cm4gdGhpcy51aVNwaW5uZXI7Cgl9Cn0pOwoKfSggalF1ZXJ5ICkgKTsKKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7Cgp2YXIgdGFiSWQgPSAwLAoJcmhhc2ggPSAvIy4qJC87CgpmdW5jdGlvbiBnZXROZXh0VGFiSWQoKSB7CglyZXR1cm4gKyt0YWJJZDsKfQoKZnVuY3Rpb24gaXNMb2NhbCggYW5jaG9yICkgewoJcmV0dXJuIGFuY2hvci5oYXNoLmxlbmd0aCA+IDEgJiYKCQlhbmNob3IuaHJlZi5yZXBsYWNlKCByaGFzaCwgIiIgKSA9PT0KCQkJbG9jYXRpb24uaHJlZi5yZXBsYWNlKCByaGFzaCwgIiIgKQoJCQkJLy8gc3VwcG9ydDogU2FmYXJpIDUuMQoJCQkJLy8gU2FmYXJpIDUuMSBkb2Vzbid0IGVuY29kZSBzcGFjZXMgaW4gd2luZG93LmxvY2F0aW9uCgkJCQkvLyBidXQgaXQgZG9lcyBlbmNvZGUgc3BhY2VzIGZyb20gYW5jaG9ycyAoIzg3NzcpCgkJCQkucmVwbGFjZSggL1xzL2csICIlMjAiICk7Cn0KCiQud2lkZ2V0KCAidWkudGFicyIsIHsKCXZlcnNpb246ICIxLjkuMiIsCglkZWxheTogMzAwLAoJb3B0aW9uczogewoJCWFjdGl2ZTogbnVsbCwKCQljb2xsYXBzaWJsZTogZmFsc2UsCgkJZXZlbnQ6ICJjbGljayIsCgkJaGVpZ2h0U3R5bGU6ICJjb250ZW50IiwKCQloaWRlOiBudWxsLAoJCXNob3c6IG51bGwsCgoJCS8vIGNhbGxiYWNrcwoJCWFjdGl2YXRlOiBudWxsLAoJCWJlZm9yZUFjdGl2YXRlOiBudWxsLAoJCWJlZm9yZUxvYWQ6IG51bGwsCgkJbG9hZDogbnVsbAoJfSwKCglfY3JlYXRlOiBmdW5jdGlvbigpIHsKCQl2YXIgdGhhdCA9IHRoaXMsCgkJCW9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsCgkJCWFjdGl2ZSA9IG9wdGlvbnMuYWN0aXZlLAoJCQlsb2NhdGlvbkhhc2ggPSBsb2NhdGlvbi5oYXNoLnN1YnN0cmluZyggMSApOwoKCQl0aGlzLnJ1bm5pbmcgPSBmYWxzZTsKCgkJdGhpcy5lbGVtZW50CgkJCS5hZGRDbGFzcyggInVpLXRhYnMgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGwiICkKCQkJLnRvZ2dsZUNsYXNzKCAidWktdGFicy1jb2xsYXBzaWJsZSIsIG9wdGlvbnMuY29sbGFwc2libGUgKQoJCQkvLyBQcmV2ZW50IHVzZXJzIGZyb20gZm9jdXNpbmcgZGlzYWJsZWQgdGFicyB2aWEgY2xpY2sKCQkJLmRlbGVnYXRlKCAiLnVpLXRhYnMtbmF2ID4gbGkiLCAibW91c2Vkb3duIiArIHRoaXMuZXZlbnROYW1lc3BhY2UsIGZ1bmN0aW9uKCBldmVudCApIHsKCQkJCWlmICggJCggdGhpcyApLmlzKCAiLnVpLXN0YXRlLWRpc2FibGVkIiApICkgewoJCQkJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgkJCQl9CgkJCX0pCgkJCS8vIHN1cHBvcnQ6IElFIDw5CgkJCS8vIFByZXZlbnRpbmcgdGhlIGRlZmF1bHQgYWN0aW9uIGluIG1vdXNlZG93biBkb2Vzbid0IHByZXZlbnQgSUUKCQkJLy8gZnJvbSBmb2N1c2luZyB0aGUgZWxlbWVudCwgc28gaWYgdGhlIGFuY2hvciBnZXRzIGZvY3VzZWQsIGJsdXIuCgkJCS8vIFdlIGRvbid0IGhhdmUgdG8gd29ycnkgYWJvdXQgZm9jdXNpbmcgdGhlIHByZXZpb3VzbHkgZm9jdXNlZAoJCQkvLyBlbGVtZW50IHNpbmNlIGNsaWNraW5nIG9uIGEgbm9uLWZvY3VzYWJsZSBlbGVtZW50IHNob3VsZCBmb2N1cwoJCQkvLyB0aGUgYm9keSBhbnl3YXkuCgkJCS5kZWxlZ2F0ZSggIi51aS10YWJzLWFuY2hvciIsICJmb2N1cyIgKyB0aGlzLmV2ZW50TmFtZXNwYWNlLCBmdW5jdGlvbigpIHsKCQkJCWlmICggJCggdGhpcyApLmNsb3Nlc3QoICJsaSIgKS5pcyggIi51aS1zdGF0ZS1kaXNhYmxlZCIgKSApIHsKCQkJCQl0aGlzLmJsdXIoKTsKCQkJCX0KCQkJfSk7CgoJCXRoaXMuX3Byb2Nlc3NUYWJzKCk7CgoJCWlmICggYWN0aXZlID09PSBudWxsICkgewoJCQkvLyBjaGVjayB0aGUgZnJhZ21lbnQgaWRlbnRpZmllciBpbiB0aGUgVVJMCgkJCWlmICggbG9jYXRpb25IYXNoICkgewoJCQkJdGhpcy50YWJzLmVhY2goZnVuY3Rpb24oIGksIHRhYiApIHsKCQkJCQlpZiAoICQoIHRhYiApLmF0dHIoICJhcmlhLWNvbnRyb2xzIiApID09PSBsb2NhdGlvbkhhc2ggKSB7CgkJCQkJCWFjdGl2ZSA9IGk7CgkJCQkJCXJldHVybiBmYWxzZTsKCQkJCQl9CgkJCQl9KTsKCQkJfQoKCQkJLy8gY2hlY2sgZm9yIGEgdGFiIG1hcmtlZCBhY3RpdmUgdmlhIGEgY2xhc3MKCQkJaWYgKCBhY3RpdmUgPT09IG51bGwgKSB7CgkJCQlhY3RpdmUgPSB0aGlzLnRhYnMuaW5kZXgoIHRoaXMudGFicy5maWx0ZXIoICIudWktdGFicy1hY3RpdmUiICkgKTsKCQkJfQoKCQkJLy8gbm8gYWN0aXZlIHRhYiwgc2V0IHRvIGZhbHNlCgkJCWlmICggYWN0aXZlID09PSBudWxsIHx8IGFjdGl2ZSA9PT0gLTEgKSB7CgkJCQlhY3RpdmUgPSB0aGlzLnRhYnMubGVuZ3RoID8gMCA6IGZhbHNlOwoJCQl9CgkJfQoKCQkvLyBoYW5kbGUgbnVtYmVyczogbmVnYXRpdmUsIG91dCBvZiByYW5nZQoJCWlmICggYWN0aXZlICE9PSBmYWxzZSApIHsKCQkJYWN0aXZlID0gdGhpcy50YWJzLmluZGV4KCB0aGlzLnRhYnMuZXEoIGFjdGl2ZSApICk7CgkJCWlmICggYWN0aXZlID09PSAtMSApIHsKCQkJCWFjdGl2ZSA9IG9wdGlvbnMuY29sbGFwc2libGUgPyBmYWxzZSA6IDA7CgkJCX0KCQl9CgkJb3B0aW9ucy5hY3RpdmUgPSBhY3RpdmU7CgoJCS8vIGRvbid0IGFsbG93IGNvbGxhcHNpYmxlOiBmYWxzZSBhbmQgYWN0aXZlOiBmYWxzZQoJCWlmICggIW9wdGlvbnMuY29sbGFwc2libGUgJiYgb3B0aW9ucy5hY3RpdmUgPT09IGZhbHNlICYmIHRoaXMuYW5jaG9ycy5sZW5ndGggKSB7CgkJCW9wdGlvbnMuYWN0aXZlID0gMDsKCQl9CgoJCS8vIFRha2UgZGlzYWJsaW5nIHRhYnMgdmlhIGNsYXNzIGF0dHJpYnV0ZSBmcm9tIEhUTUwKCQkvLyBpbnRvIGFjY291bnQgYW5kIHVwZGF0ZSBvcHRpb24gcHJvcGVybHkuCgkJaWYgKCAkLmlzQXJyYXkoIG9wdGlvbnMuZGlzYWJsZWQgKSApIHsKCQkJb3B0aW9ucy5kaXNhYmxlZCA9ICQudW5pcXVlKCBvcHRpb25zLmRpc2FibGVkLmNvbmNhdCgKCQkJCSQubWFwKCB0aGlzLnRhYnMuZmlsdGVyKCAiLnVpLXN0YXRlLWRpc2FibGVkIiApLCBmdW5jdGlvbiggbGkgKSB7CgkJCQkJcmV0dXJuIHRoYXQudGFicy5pbmRleCggbGkgKTsKCQkJCX0pCgkJCSkgKS5zb3J0KCk7CgkJfQoKCQkvLyBjaGVjayBmb3IgbGVuZ3RoIGF2b2lkcyBlcnJvciB3aGVuIGluaXRpYWxpemluZyBlbXB0eSBsaXN0CgkJaWYgKCB0aGlzLm9wdGlvbnMuYWN0aXZlICE9PSBmYWxzZSAmJiB0aGlzLmFuY2hvcnMubGVuZ3RoICkgewoJCQl0aGlzLmFjdGl2ZSA9IHRoaXMuX2ZpbmRBY3RpdmUoIHRoaXMub3B0aW9ucy5hY3RpdmUgKTsKCQl9IGVsc2UgewoJCQl0aGlzLmFjdGl2ZSA9ICQoKTsKCQl9CgoJCXRoaXMuX3JlZnJlc2goKTsKCgkJaWYgKCB0aGlzLmFjdGl2ZS5sZW5ndGggKSB7CgkJCXRoaXMubG9hZCggb3B0aW9ucy5hY3RpdmUgKTsKCQl9Cgl9LAoKCV9nZXRDcmVhdGVFdmVudERhdGE6IGZ1bmN0aW9uKCkgewoJCXJldHVybiB7CgkJCXRhYjogdGhpcy5hY3RpdmUsCgkJCXBhbmVsOiAhdGhpcy5hY3RpdmUubGVuZ3RoID8gJCgpIDogdGhpcy5fZ2V0UGFuZWxGb3JUYWIoIHRoaXMuYWN0aXZlICkKCQl9OwoJfSwKCglfdGFiS2V5ZG93bjogZnVuY3Rpb24oIGV2ZW50ICkgewoJCXZhciBmb2N1c2VkVGFiID0gJCggdGhpcy5kb2N1bWVudFswXS5hY3RpdmVFbGVtZW50ICkuY2xvc2VzdCggImxpIiApLAoJCQlzZWxlY3RlZEluZGV4ID0gdGhpcy50YWJzLmluZGV4KCBmb2N1c2VkVGFiICksCgkJCWdvaW5nRm9yd2FyZCA9IHRydWU7CgoJCWlmICggdGhpcy5faGFuZGxlUGFnZU5hdiggZXZlbnQgKSApIHsKCQkJcmV0dXJuOwoJCX0KCgkJc3dpdGNoICggZXZlbnQua2V5Q29kZSApIHsKCQkJY2FzZSAkLnVpLmtleUNvZGUuUklHSFQ6CgkJCWNhc2UgJC51aS5rZXlDb2RlLkRPV046CgkJCQlzZWxlY3RlZEluZGV4Kys7CgkJCQlicmVhazsKCQkJY2FzZSAkLnVpLmtleUNvZGUuVVA6CgkJCWNhc2UgJC51aS5rZXlDb2RlLkxFRlQ6CgkJCQlnb2luZ0ZvcndhcmQgPSBmYWxzZTsKCQkJCXNlbGVjdGVkSW5kZXgtLTsKCQkJCWJyZWFrOwoJCQljYXNlICQudWkua2V5Q29kZS5FTkQ6CgkJCQlzZWxlY3RlZEluZGV4ID0gdGhpcy5hbmNob3JzLmxlbmd0aCAtIDE7CgkJCQlicmVhazsKCQkJY2FzZSAkLnVpLmtleUNvZGUuSE9NRToKCQkJCXNlbGVjdGVkSW5kZXggPSAwOwoJCQkJYnJlYWs7CgkJCWNhc2UgJC51aS5rZXlDb2RlLlNQQUNFOgoJCQkJLy8gQWN0aXZhdGUgb25seSwgbm8gY29sbGFwc2luZwoJCQkJZXZlbnQucHJldmVudERlZmF1bHQoKTsKCQkJCWNsZWFyVGltZW91dCggdGhpcy5hY3RpdmF0aW5nICk7CgkJCQl0aGlzLl9hY3RpdmF0ZSggc2VsZWN0ZWRJbmRleCApOwoJCQkJcmV0dXJuOwoJCQljYXNlICQudWkua2V5Q29kZS5FTlRFUjoKCQkJCS8vIFRvZ2dsZSAoY2FuY2VsIGRlbGF5ZWQgYWN0aXZhdGlvbiwgYWxsb3cgY29sbGFwc2luZykKCQkJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgkJCQljbGVhclRpbWVvdXQoIHRoaXMuYWN0aXZhdGluZyApOwoJCQkJLy8gRGV0ZXJtaW5lIGlmIHdlIHNob3VsZCBjb2xsYXBzZSBvciBhY3RpdmF0ZQoJCQkJdGhpcy5fYWN0aXZhdGUoIHNlbGVjdGVkSW5kZXggPT09IHRoaXMub3B0aW9ucy5hY3RpdmUgPyBmYWxzZSA6IHNlbGVjdGVkSW5kZXggKTsKCQkJCXJldHVybjsKCQkJZGVmYXVsdDoKCQkJCXJldHVybjsKCQl9CgoJCS8vIEZvY3VzIHRoZSBhcHByb3ByaWF0ZSB0YWIsIGJhc2VkIG9uIHdoaWNoIGtleSB3YXMgcHJlc3NlZAoJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgkJY2xlYXJUaW1lb3V0KCB0aGlzLmFjdGl2YXRpbmcgKTsKCQlzZWxlY3RlZEluZGV4ID0gdGhpcy5fZm9jdXNOZXh0VGFiKCBzZWxlY3RlZEluZGV4LCBnb2luZ0ZvcndhcmQgKTsKCgkJLy8gTmF2aWdhdGluZyB3aXRoIGNvbnRyb2wga2V5IHdpbGwgcHJldmVudCBhdXRvbWF0aWMgYWN0aXZhdGlvbgoJCWlmICggIWV2ZW50LmN0cmxLZXkgKSB7CgkJCS8vIFVwZGF0ZSBhcmlhLXNlbGVjdGVkIGltbWVkaWF0ZWx5IHNvIHRoYXQgQVQgdGhpbmsgdGhlIHRhYiBpcyBhbHJlYWR5IHNlbGVjdGVkLgoJCQkvLyBPdGhlcndpc2UgQVQgbWF5IGNvbmZ1c2UgdGhlIHVzZXIgYnkgc3RhdGluZyB0aGF0IHRoZXkgbmVlZCB0byBhY3RpdmF0ZSB0aGUgdGFiLAoJCQkvLyBidXQgdGhlIHRhYiB3aWxsIGFscmVhZHkgYmUgYWN0aXZhdGVkIGJ5IHRoZSB0aW1lIHRoZSBhbm5vdW5jZW1lbnQgZmluaXNoZXMuCgkJCWZvY3VzZWRUYWIuYXR0ciggImFyaWEtc2VsZWN0ZWQiLCAiZmFsc2UiICk7CgkJCXRoaXMudGFicy5lcSggc2VsZWN0ZWRJbmRleCApLmF0dHIoICJhcmlhLXNlbGVjdGVkIiwgInRydWUiICk7CgoJCQl0aGlzLmFjdGl2YXRpbmcgPSB0aGlzLl9kZWxheShmdW5jdGlvbigpIHsKCQkJCXRoaXMub3B0aW9uKCAiYWN0aXZlIiwgc2VsZWN0ZWRJbmRleCApOwoJCQl9LCB0aGlzLmRlbGF5ICk7CgkJfQoJfSwKCglfcGFuZWxLZXlkb3duOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJaWYgKCB0aGlzLl9oYW5kbGVQYWdlTmF2KCBldmVudCApICkgewoJCQlyZXR1cm47CgkJfQoKCQkvLyBDdHJsK3VwIG1vdmVzIGZvY3VzIHRvIHRoZSBjdXJyZW50IHRhYgoJCWlmICggZXZlbnQuY3RybEtleSAmJiBldmVudC5rZXlDb2RlID09PSAkLnVpLmtleUNvZGUuVVAgKSB7CgkJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgkJCXRoaXMuYWN0aXZlLmZvY3VzKCk7CgkJfQoJfSwKCgkvLyBBbHQrcGFnZSB1cC9kb3duIG1vdmVzIGZvY3VzIHRvIHRoZSBwcmV2aW91cy9uZXh0IHRhYiAoYW5kIGFjdGl2YXRlcykKCV9oYW5kbGVQYWdlTmF2OiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJaWYgKCBldmVudC5hbHRLZXkgJiYgZXZlbnQua2V5Q29kZSA9PT0gJC51aS5rZXlDb2RlLlBBR0VfVVAgKSB7CgkJCXRoaXMuX2FjdGl2YXRlKCB0aGlzLl9mb2N1c05leHRUYWIoIHRoaXMub3B0aW9ucy5hY3RpdmUgLSAxLCBmYWxzZSApICk7CgkJCXJldHVybiB0cnVlOwoJCX0KCQlpZiAoIGV2ZW50LmFsdEtleSAmJiBldmVudC5rZXlDb2RlID09PSAkLnVpLmtleUNvZGUuUEFHRV9ET1dOICkgewoJCQl0aGlzLl9hY3RpdmF0ZSggdGhpcy5fZm9jdXNOZXh0VGFiKCB0aGlzLm9wdGlvbnMuYWN0aXZlICsgMSwgdHJ1ZSApICk7CgkJCXJldHVybiB0cnVlOwoJCX0KCX0sCgoJX2ZpbmROZXh0VGFiOiBmdW5jdGlvbiggaW5kZXgsIGdvaW5nRm9yd2FyZCApIHsKCQl2YXIgbGFzdFRhYkluZGV4ID0gdGhpcy50YWJzLmxlbmd0aCAtIDE7CgoJCWZ1bmN0aW9uIGNvbnN0cmFpbigpIHsKCQkJaWYgKCBpbmRleCA+IGxhc3RUYWJJbmRleCApIHsKCQkJCWluZGV4ID0gMDsKCQkJfQoJCQlpZiAoIGluZGV4IDwgMCApIHsKCQkJCWluZGV4ID0gbGFzdFRhYkluZGV4OwoJCQl9CgkJCXJldHVybiBpbmRleDsKCQl9CgoJCXdoaWxlICggJC5pbkFycmF5KCBjb25zdHJhaW4oKSwgdGhpcy5vcHRpb25zLmRpc2FibGVkICkgIT09IC0xICkgewoJCQlpbmRleCA9IGdvaW5nRm9yd2FyZCA/IGluZGV4ICsgMSA6IGluZGV4IC0gMTsKCQl9CgoJCXJldHVybiBpbmRleDsKCX0sCgoJX2ZvY3VzTmV4dFRhYjogZnVuY3Rpb24oIGluZGV4LCBnb2luZ0ZvcndhcmQgKSB7CgkJaW5kZXggPSB0aGlzLl9maW5kTmV4dFRhYiggaW5kZXgsIGdvaW5nRm9yd2FyZCApOwoJCXRoaXMudGFicy5lcSggaW5kZXggKS5mb2N1cygpOwoJCXJldHVybiBpbmRleDsKCX0sCgoJX3NldE9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7CgkJaWYgKCBrZXkgPT09ICJhY3RpdmUiICkgewoJCQkvLyBfYWN0aXZhdGUoKSB3aWxsIGhhbmRsZSBpbnZhbGlkIHZhbHVlcyBhbmQgdXBkYXRlIHRoaXMub3B0aW9ucwoJCQl0aGlzLl9hY3RpdmF0ZSggdmFsdWUgKTsKCQkJcmV0dXJuOwoJCX0KCgkJaWYgKCBrZXkgPT09ICJkaXNhYmxlZCIgKSB7CgkJCS8vIGRvbid0IHVzZSB0aGUgd2lkZ2V0IGZhY3RvcnkncyBkaXNhYmxlZCBoYW5kbGluZwoJCQl0aGlzLl9zZXR1cERpc2FibGVkKCB2YWx1ZSApOwoJCQlyZXR1cm47CgkJfQoKCQl0aGlzLl9zdXBlcigga2V5LCB2YWx1ZSk7CgoJCWlmICgga2V5ID09PSAiY29sbGFwc2libGUiICkgewoJCQl0aGlzLmVsZW1lbnQudG9nZ2xlQ2xhc3MoICJ1aS10YWJzLWNvbGxhcHNpYmxlIiwgdmFsdWUgKTsKCQkJLy8gU2V0dGluZyBjb2xsYXBzaWJsZTogZmFsc2Ugd2hpbGUgY29sbGFwc2VkOyBvcGVuIGZpcnN0IHBhbmVsCgkJCWlmICggIXZhbHVlICYmIHRoaXMub3B0aW9ucy5hY3RpdmUgPT09IGZhbHNlICkgewoJCQkJdGhpcy5fYWN0aXZhdGUoIDAgKTsKCQkJfQoJCX0KCgkJaWYgKCBrZXkgPT09ICJldmVudCIgKSB7CgkJCXRoaXMuX3NldHVwRXZlbnRzKCB2YWx1ZSApOwoJCX0KCgkJaWYgKCBrZXkgPT09ICJoZWlnaHRTdHlsZSIgKSB7CgkJCXRoaXMuX3NldHVwSGVpZ2h0U3R5bGUoIHZhbHVlICk7CgkJfQoJfSwKCglfdGFiSWQ6IGZ1bmN0aW9uKCB0YWIgKSB7CgkJcmV0dXJuIHRhYi5hdHRyKCAiYXJpYS1jb250cm9scyIgKSB8fCAidWktdGFicy0iICsgZ2V0TmV4dFRhYklkKCk7Cgl9LAoKCV9zYW5pdGl6ZVNlbGVjdG9yOiBmdW5jdGlvbiggaGFzaCApIHsKCQlyZXR1cm4gaGFzaCA/IGhhc2gucmVwbGFjZSggL1shIiQlJicoKSorLC5cLzo7PD0+P0BcW1xdXF5ge3x9fl0vZywgIlxcJCYiICkgOiAiIjsKCX0sCgoJcmVmcmVzaDogZnVuY3Rpb24oKSB7CgkJdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsCgkJCWxpcyA9IHRoaXMudGFibGlzdC5jaGlsZHJlbiggIjpoYXMoYVtocmVmXSkiICk7CgoJCS8vIGdldCBkaXNhYmxlZCB0YWJzIGZyb20gY2xhc3MgYXR0cmlidXRlIGZyb20gSFRNTAoJCS8vIHRoaXMgd2lsbCBnZXQgY29udmVydGVkIHRvIGEgYm9vbGVhbiBpZiBuZWVkZWQgaW4gX3JlZnJlc2goKQoJCW9wdGlvbnMuZGlzYWJsZWQgPSAkLm1hcCggbGlzLmZpbHRlciggIi51aS1zdGF0ZS1kaXNhYmxlZCIgKSwgZnVuY3Rpb24oIHRhYiApIHsKCQkJcmV0dXJuIGxpcy5pbmRleCggdGFiICk7CgkJfSk7CgoJCXRoaXMuX3Byb2Nlc3NUYWJzKCk7CgoJCS8vIHdhcyBjb2xsYXBzZWQgb3Igbm8gdGFicwoJCWlmICggb3B0aW9ucy5hY3RpdmUgPT09IGZhbHNlIHx8ICF0aGlzLmFuY2hvcnMubGVuZ3RoICkgewoJCQlvcHRpb25zLmFjdGl2ZSA9IGZhbHNlOwoJCQl0aGlzLmFjdGl2ZSA9ICQoKTsKCQkvLyB3YXMgYWN0aXZlLCBidXQgYWN0aXZlIHRhYiBpcyBnb25lCgkJfSBlbHNlIGlmICggdGhpcy5hY3RpdmUubGVuZ3RoICYmICEkLmNvbnRhaW5zKCB0aGlzLnRhYmxpc3RbIDAgXSwgdGhpcy5hY3RpdmVbIDAgXSApICkgewoJCQkvLyBhbGwgcmVtYWluaW5nIHRhYnMgYXJlIGRpc2FibGVkCgkJCWlmICggdGhpcy50YWJzLmxlbmd0aCA9PT0gb3B0aW9ucy5kaXNhYmxlZC5sZW5ndGggKSB7CgkJCQlvcHRpb25zLmFjdGl2ZSA9IGZhbHNlOwoJCQkJdGhpcy5hY3RpdmUgPSAkKCk7CgkJCS8vIGFjdGl2YXRlIHByZXZpb3VzIHRhYgoJCQl9IGVsc2UgewoJCQkJdGhpcy5fYWN0aXZhdGUoIHRoaXMuX2ZpbmROZXh0VGFiKCBNYXRoLm1heCggMCwgb3B0aW9ucy5hY3RpdmUgLSAxICksIGZhbHNlICkgKTsKCQkJfQoJCS8vIHdhcyBhY3RpdmUsIGFjdGl2ZSB0YWIgc3RpbGwgZXhpc3RzCgkJfSBlbHNlIHsKCQkJLy8gbWFrZSBzdXJlIGFjdGl2ZSBpbmRleCBpcyBjb3JyZWN0CgkJCW9wdGlvbnMuYWN0aXZlID0gdGhpcy50YWJzLmluZGV4KCB0aGlzLmFjdGl2ZSApOwoJCX0KCgkJdGhpcy5fcmVmcmVzaCgpOwoJfSwKCglfcmVmcmVzaDogZnVuY3Rpb24oKSB7CgkJdGhpcy5fc2V0dXBEaXNhYmxlZCggdGhpcy5vcHRpb25zLmRpc2FibGVkICk7CgkJdGhpcy5fc2V0dXBFdmVudHMoIHRoaXMub3B0aW9ucy5ldmVudCApOwoJCXRoaXMuX3NldHVwSGVpZ2h0U3R5bGUoIHRoaXMub3B0aW9ucy5oZWlnaHRTdHlsZSApOwoKCQl0aGlzLnRhYnMubm90KCB0aGlzLmFjdGl2ZSApLmF0dHIoewoJCQkiYXJpYS1zZWxlY3RlZCI6ICJmYWxzZSIsCgkJCXRhYkluZGV4OiAtMQoJCX0pOwoJCXRoaXMucGFuZWxzLm5vdCggdGhpcy5fZ2V0UGFuZWxGb3JUYWIoIHRoaXMuYWN0aXZlICkgKQoJCQkuaGlkZSgpCgkJCS5hdHRyKHsKCQkJCSJhcmlhLWV4cGFuZGVkIjogImZhbHNlIiwKCQkJCSJhcmlhLWhpZGRlbiI6ICJ0cnVlIgoJCQl9KTsKCgkJLy8gTWFrZSBzdXJlIG9uZSB0YWIgaXMgaW4gdGhlIHRhYiBvcmRlcgoJCWlmICggIXRoaXMuYWN0aXZlLmxlbmd0aCApIHsKCQkJdGhpcy50YWJzLmVxKCAwICkuYXR0ciggInRhYkluZGV4IiwgMCApOwoJCX0gZWxzZSB7CgkJCXRoaXMuYWN0aXZlCgkJCQkuYWRkQ2xhc3MoICJ1aS10YWJzLWFjdGl2ZSB1aS1zdGF0ZS1hY3RpdmUiICkKCQkJCS5hdHRyKHsKCQkJCQkiYXJpYS1zZWxlY3RlZCI6ICJ0cnVlIiwKCQkJCQl0YWJJbmRleDogMAoJCQkJfSk7CgkJCXRoaXMuX2dldFBhbmVsRm9yVGFiKCB0aGlzLmFjdGl2ZSApCgkJCQkuc2hvdygpCgkJCQkuYXR0cih7CgkJCQkJImFyaWEtZXhwYW5kZWQiOiAidHJ1ZSIsCgkJCQkJImFyaWEtaGlkZGVuIjogImZhbHNlIgoJCQkJfSk7CgkJfQoJfSwKCglfcHJvY2Vzc1RhYnM6IGZ1bmN0aW9uKCkgewoJCXZhciB0aGF0ID0gdGhpczsKCgkJdGhpcy50YWJsaXN0ID0gdGhpcy5fZ2V0TGlzdCgpCgkJCS5hZGRDbGFzcyggInVpLXRhYnMtbmF2IHVpLWhlbHBlci1yZXNldCB1aS1oZWxwZXItY2xlYXJmaXggdWktd2lkZ2V0LWhlYWRlciB1aS1jb3JuZXItYWxsIiApCgkJCS5hdHRyKCAicm9sZSIsICJ0YWJsaXN0IiApOwoKCQl0aGlzLnRhYnMgPSB0aGlzLnRhYmxpc3QuZmluZCggIj4gbGk6aGFzKGFbaHJlZl0pIiApCgkJCS5hZGRDbGFzcyggInVpLXN0YXRlLWRlZmF1bHQgdWktY29ybmVyLXRvcCIgKQoJCQkuYXR0cih7CgkJCQlyb2xlOiAidGFiIiwKCQkJCXRhYkluZGV4OiAtMQoJCQl9KTsKCgkJdGhpcy5hbmNob3JzID0gdGhpcy50YWJzLm1hcChmdW5jdGlvbigpIHsKCQkJCXJldHVybiAkKCAiYSIsIHRoaXMgKVsgMCBdOwoJCQl9KQoJCQkuYWRkQ2xhc3MoICJ1aS10YWJzLWFuY2hvciIgKQoJCQkuYXR0cih7CgkJCQlyb2xlOiAicHJlc2VudGF0aW9uIiwKCQkJCXRhYkluZGV4OiAtMQoJCQl9KTsKCgkJdGhpcy5wYW5lbHMgPSAkKCk7CgoJCXRoaXMuYW5jaG9ycy5lYWNoKGZ1bmN0aW9uKCBpLCBhbmNob3IgKSB7CgkJCXZhciBzZWxlY3RvciwgcGFuZWwsIHBhbmVsSWQsCgkJCQlhbmNob3JJZCA9ICQoIGFuY2hvciApLnVuaXF1ZUlkKCkuYXR0ciggImlkIiApLAoJCQkJdGFiID0gJCggYW5jaG9yICkuY2xvc2VzdCggImxpIiApLAoJCQkJb3JpZ2luYWxBcmlhQ29udHJvbHMgPSB0YWIuYXR0ciggImFyaWEtY29udHJvbHMiICk7CgoJCQkvLyBpbmxpbmUgdGFiCgkJCWlmICggaXNMb2NhbCggYW5jaG9yICkgKSB7CgkJCQlzZWxlY3RvciA9IGFuY2hvci5oYXNoOwoJCQkJcGFuZWwgPSB0aGF0LmVsZW1lbnQuZmluZCggdGhhdC5fc2FuaXRpemVTZWxlY3Rvciggc2VsZWN0b3IgKSApOwoJCQkvLyByZW1vdGUgdGFiCgkJCX0gZWxzZSB7CgkJCQlwYW5lbElkID0gdGhhdC5fdGFiSWQoIHRhYiApOwoJCQkJc2VsZWN0b3IgPSAiIyIgKyBwYW5lbElkOwoJCQkJcGFuZWwgPSB0aGF0LmVsZW1lbnQuZmluZCggc2VsZWN0b3IgKTsKCQkJCWlmICggIXBhbmVsLmxlbmd0aCApIHsKCQkJCQlwYW5lbCA9IHRoYXQuX2NyZWF0ZVBhbmVsKCBwYW5lbElkICk7CgkJCQkJcGFuZWwuaW5zZXJ0QWZ0ZXIoIHRoYXQucGFuZWxzWyBpIC0gMSBdIHx8IHRoYXQudGFibGlzdCApOwoJCQkJfQoJCQkJcGFuZWwuYXR0ciggImFyaWEtbGl2ZSIsICJwb2xpdGUiICk7CgkJCX0KCgkJCWlmICggcGFuZWwubGVuZ3RoKSB7CgkJCQl0aGF0LnBhbmVscyA9IHRoYXQucGFuZWxzLmFkZCggcGFuZWwgKTsKCQkJfQoJCQlpZiAoIG9yaWdpbmFsQXJpYUNvbnRyb2xzICkgewoJCQkJdGFiLmRhdGEoICJ1aS10YWJzLWFyaWEtY29udHJvbHMiLCBvcmlnaW5hbEFyaWFDb250cm9scyApOwoJCQl9CgkJCXRhYi5hdHRyKHsKCQkJCSJhcmlhLWNvbnRyb2xzIjogc2VsZWN0b3Iuc3Vic3RyaW5nKCAxICksCgkJCQkiYXJpYS1sYWJlbGxlZGJ5IjogYW5jaG9ySWQKCQkJfSk7CgkJCXBhbmVsLmF0dHIoICJhcmlhLWxhYmVsbGVkYnkiLCBhbmNob3JJZCApOwoJCX0pOwoKCQl0aGlzLnBhbmVscwoJCQkuYWRkQ2xhc3MoICJ1aS10YWJzLXBhbmVsIHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1ib3R0b20iICkKCQkJLmF0dHIoICJyb2xlIiwgInRhYnBhbmVsIiApOwoJfSwKCgkvLyBhbGxvdyBvdmVycmlkaW5nIGhvdyB0byBmaW5kIHRoZSBsaXN0IGZvciByYXJlIHVzYWdlIHNjZW5hcmlvcyAoIzc3MTUpCglfZ2V0TGlzdDogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHRoaXMuZWxlbWVudC5maW5kKCAib2wsdWwiICkuZXEoIDAgKTsKCX0sCgoJX2NyZWF0ZVBhbmVsOiBmdW5jdGlvbiggaWQgKSB7CgkJcmV0dXJuICQoICI8ZGl2PiIgKQoJCQkuYXR0ciggImlkIiwgaWQgKQoJCQkuYWRkQ2xhc3MoICJ1aS10YWJzLXBhbmVsIHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1ib3R0b20iICkKCQkJLmRhdGEoICJ1aS10YWJzLWRlc3Ryb3kiLCB0cnVlICk7Cgl9LAoKCV9zZXR1cERpc2FibGVkOiBmdW5jdGlvbiggZGlzYWJsZWQgKSB7CgkJaWYgKCAkLmlzQXJyYXkoIGRpc2FibGVkICkgKSB7CgkJCWlmICggIWRpc2FibGVkLmxlbmd0aCApIHsKCQkJCWRpc2FibGVkID0gZmFsc2U7CgkJCX0gZWxzZSBpZiAoIGRpc2FibGVkLmxlbmd0aCA9PT0gdGhpcy5hbmNob3JzLmxlbmd0aCApIHsKCQkJCWRpc2FibGVkID0gdHJ1ZTsKCQkJfQoJCX0KCgkJLy8gZGlzYWJsZSB0YWJzCgkJZm9yICggdmFyIGkgPSAwLCBsaTsgKCBsaSA9IHRoaXMudGFic1sgaSBdICk7IGkrKyApIHsKCQkJaWYgKCBkaXNhYmxlZCA9PT0gdHJ1ZSB8fCAkLmluQXJyYXkoIGksIGRpc2FibGVkICkgIT09IC0xICkgewoJCQkJJCggbGkgKQoJCQkJCS5hZGRDbGFzcyggInVpLXN0YXRlLWRpc2FibGVkIiApCgkJCQkJLmF0dHIoICJhcmlhLWRpc2FibGVkIiwgInRydWUiICk7CgkJCX0gZWxzZSB7CgkJCQkkKCBsaSApCgkJCQkJLnJlbW92ZUNsYXNzKCAidWktc3RhdGUtZGlzYWJsZWQiICkKCQkJCQkucmVtb3ZlQXR0ciggImFyaWEtZGlzYWJsZWQiICk7CgkJCX0KCQl9CgoJCXRoaXMub3B0aW9ucy5kaXNhYmxlZCA9IGRpc2FibGVkOwoJfSwKCglfc2V0dXBFdmVudHM6IGZ1bmN0aW9uKCBldmVudCApIHsKCQl2YXIgZXZlbnRzID0gewoJCQljbGljazogZnVuY3Rpb24oIGV2ZW50ICkgewoJCQkJZXZlbnQucHJldmVudERlZmF1bHQoKTsKCQkJfQoJCX07CgkJaWYgKCBldmVudCApIHsKCQkJJC5lYWNoKCBldmVudC5zcGxpdCgiICIpLCBmdW5jdGlvbiggaW5kZXgsIGV2ZW50TmFtZSApIHsKCQkJCWV2ZW50c1sgZXZlbnROYW1lIF0gPSAiX2V2ZW50SGFuZGxlciI7CgkJCX0pOwoJCX0KCgkJdGhpcy5fb2ZmKCB0aGlzLmFuY2hvcnMuYWRkKCB0aGlzLnRhYnMgKS5hZGQoIHRoaXMucGFuZWxzICkgKTsKCQl0aGlzLl9vbiggdGhpcy5hbmNob3JzLCBldmVudHMgKTsKCQl0aGlzLl9vbiggdGhpcy50YWJzLCB7IGtleWRvd246ICJfdGFiS2V5ZG93biIgfSApOwoJCXRoaXMuX29uKCB0aGlzLnBhbmVscywgeyBrZXlkb3duOiAiX3BhbmVsS2V5ZG93biIgfSApOwoKCQl0aGlzLl9mb2N1c2FibGUoIHRoaXMudGFicyApOwoJCXRoaXMuX2hvdmVyYWJsZSggdGhpcy50YWJzICk7Cgl9LAoKCV9zZXR1cEhlaWdodFN0eWxlOiBmdW5jdGlvbiggaGVpZ2h0U3R5bGUgKSB7CgkJdmFyIG1heEhlaWdodCwgb3ZlcmZsb3csCgkJCXBhcmVudCA9IHRoaXMuZWxlbWVudC5wYXJlbnQoKTsKCgkJaWYgKCBoZWlnaHRTdHlsZSA9PT0gImZpbGwiICkgewoJCQkvLyBJRSA2IHRyZWF0cyBoZWlnaHQgbGlrZSBtaW5IZWlnaHQsIHNvIHdlIG5lZWQgdG8gdHVybiBvZmYgb3ZlcmZsb3cKCQkJLy8gaW4gb3JkZXIgdG8gZ2V0IGEgcmVsaWFibGUgaGVpZ2h0CgkJCS8vIHdlIHVzZSB0aGUgbWluSGVpZ2h0IHN1cHBvcnQgdGVzdCBiZWNhdXNlIHdlIGFzc3VtZSB0aGF0IG9ubHkKCQkJLy8gYnJvd3NlcnMgdGhhdCBkb24ndCBzdXBwb3J0IG1pbkhlaWdodCB3aWxsIHRyZWF0IGhlaWdodCBhcyBtaW5IZWlnaHQKCQkJaWYgKCAhJC5zdXBwb3J0Lm1pbkhlaWdodCApIHsKCQkJCW92ZXJmbG93ID0gcGFyZW50LmNzcyggIm92ZXJmbG93IiApOwoJCQkJcGFyZW50LmNzcyggIm92ZXJmbG93IiwgImhpZGRlbiIpOwoJCQl9CgkJCW1heEhlaWdodCA9IHBhcmVudC5oZWlnaHQoKTsKCQkJdGhpcy5lbGVtZW50LnNpYmxpbmdzKCAiOnZpc2libGUiICkuZWFjaChmdW5jdGlvbigpIHsKCQkJCXZhciBlbGVtID0gJCggdGhpcyApLAoJCQkJCXBvc2l0aW9uID0gZWxlbS5jc3MoICJwb3NpdGlvbiIgKTsKCgkJCQlpZiAoIHBvc2l0aW9uID09PSAiYWJzb2x1dGUiIHx8IHBvc2l0aW9uID09PSAiZml4ZWQiICkgewoJCQkJCXJldHVybjsKCQkJCX0KCQkJCW1heEhlaWdodCAtPSBlbGVtLm91dGVySGVpZ2h0KCB0cnVlICk7CgkJCX0pOwoJCQlpZiAoIG92ZXJmbG93ICkgewoJCQkJcGFyZW50LmNzcyggIm92ZXJmbG93Iiwgb3ZlcmZsb3cgKTsKCQkJfQoKCQkJdGhpcy5lbGVtZW50LmNoaWxkcmVuKCkubm90KCB0aGlzLnBhbmVscyApLmVhY2goZnVuY3Rpb24oKSB7CgkJCQltYXhIZWlnaHQgLT0gJCggdGhpcyApLm91dGVySGVpZ2h0KCB0cnVlICk7CgkJCX0pOwoKCQkJdGhpcy5wYW5lbHMuZWFjaChmdW5jdGlvbigpIHsKCQkJCSQoIHRoaXMgKS5oZWlnaHQoIE1hdGgubWF4KCAwLCBtYXhIZWlnaHQgLQoJCQkJCSQoIHRoaXMgKS5pbm5lckhlaWdodCgpICsgJCggdGhpcyApLmhlaWdodCgpICkgKTsKCQkJfSkKCQkJLmNzcyggIm92ZXJmbG93IiwgImF1dG8iICk7CgkJfSBlbHNlIGlmICggaGVpZ2h0U3R5bGUgPT09ICJhdXRvIiApIHsKCQkJbWF4SGVpZ2h0ID0gMDsKCQkJdGhpcy5wYW5lbHMuZWFjaChmdW5jdGlvbigpIHsKCQkJCW1heEhlaWdodCA9IE1hdGgubWF4KCBtYXhIZWlnaHQsICQoIHRoaXMgKS5oZWlnaHQoICIiICkuaGVpZ2h0KCkgKTsKCQkJfSkuaGVpZ2h0KCBtYXhIZWlnaHQgKTsKCQl9Cgl9LAoKCV9ldmVudEhhbmRsZXI6IGZ1bmN0aW9uKCBldmVudCApIHsKCQl2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucywKCQkJYWN0aXZlID0gdGhpcy5hY3RpdmUsCgkJCWFuY2hvciA9ICQoIGV2ZW50LmN1cnJlbnRUYXJnZXQgKSwKCQkJdGFiID0gYW5jaG9yLmNsb3Nlc3QoICJsaSIgKSwKCQkJY2xpY2tlZElzQWN0aXZlID0gdGFiWyAwIF0gPT09IGFjdGl2ZVsgMCBdLAoJCQljb2xsYXBzaW5nID0gY2xpY2tlZElzQWN0aXZlICYmIG9wdGlvbnMuY29sbGFwc2libGUsCgkJCXRvU2hvdyA9IGNvbGxhcHNpbmcgPyAkKCkgOiB0aGlzLl9nZXRQYW5lbEZvclRhYiggdGFiICksCgkJCXRvSGlkZSA9ICFhY3RpdmUubGVuZ3RoID8gJCgpIDogdGhpcy5fZ2V0UGFuZWxGb3JUYWIoIGFjdGl2ZSApLAoJCQlldmVudERhdGEgPSB7CgkJCQlvbGRUYWI6IGFjdGl2ZSwKCQkJCW9sZFBhbmVsOiB0b0hpZGUsCgkJCQluZXdUYWI6IGNvbGxhcHNpbmcgPyAkKCkgOiB0YWIsCgkJCQluZXdQYW5lbDogdG9TaG93CgkJCX07CgoJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgoJCWlmICggdGFiLmhhc0NsYXNzKCAidWktc3RhdGUtZGlzYWJsZWQiICkgfHwKCQkJCS8vIHRhYiBpcyBhbHJlYWR5IGxvYWRpbmcKCQkJCXRhYi5oYXNDbGFzcyggInVpLXRhYnMtbG9hZGluZyIgKSB8fAoJCQkJLy8gY2FuJ3Qgc3dpdGNoIGR1cm5pbmcgYW4gYW5pbWF0aW9uCgkJCQl0aGlzLnJ1bm5pbmcgfHwKCQkJCS8vIGNsaWNrIG9uIGFjdGl2ZSBoZWFkZXIsIGJ1dCBub3QgY29sbGFwc2libGUKCQkJCSggY2xpY2tlZElzQWN0aXZlICYmICFvcHRpb25zLmNvbGxhcHNpYmxlICkgfHwKCQkJCS8vIGFsbG93IGNhbmNlbGluZyBhY3RpdmF0aW9uCgkJCQkoIHRoaXMuX3RyaWdnZXIoICJiZWZvcmVBY3RpdmF0ZSIsIGV2ZW50LCBldmVudERhdGEgKSA9PT0gZmFsc2UgKSApIHsKCQkJcmV0dXJuOwoJCX0KCgkJb3B0aW9ucy5hY3RpdmUgPSBjb2xsYXBzaW5nID8gZmFsc2UgOiB0aGlzLnRhYnMuaW5kZXgoIHRhYiApOwoKCQl0aGlzLmFjdGl2ZSA9IGNsaWNrZWRJc0FjdGl2ZSA/ICQoKSA6IHRhYjsKCQlpZiAoIHRoaXMueGhyICkgewoJCQl0aGlzLnhoci5hYm9ydCgpOwoJCX0KCgkJaWYgKCAhdG9IaWRlLmxlbmd0aCAmJiAhdG9TaG93Lmxlbmd0aCApIHsKCQkJJC5lcnJvciggImpRdWVyeSBVSSBUYWJzOiBNaXNtYXRjaGluZyBmcmFnbWVudCBpZGVudGlmaWVyLiIgKTsKCQl9CgoJCWlmICggdG9TaG93Lmxlbmd0aCApIHsKCQkJdGhpcy5sb2FkKCB0aGlzLnRhYnMuaW5kZXgoIHRhYiApLCBldmVudCApOwoJCX0KCQl0aGlzLl90b2dnbGUoIGV2ZW50LCBldmVudERhdGEgKTsKCX0sCgoJLy8gaGFuZGxlcyBzaG93L2hpZGUgZm9yIHNlbGVjdGluZyB0YWJzCglfdG9nZ2xlOiBmdW5jdGlvbiggZXZlbnQsIGV2ZW50RGF0YSApIHsKCQl2YXIgdGhhdCA9IHRoaXMsCgkJCXRvU2hvdyA9IGV2ZW50RGF0YS5uZXdQYW5lbCwKCQkJdG9IaWRlID0gZXZlbnREYXRhLm9sZFBhbmVsOwoKCQl0aGlzLnJ1bm5pbmcgPSB0cnVlOwoKCQlmdW5jdGlvbiBjb21wbGV0ZSgpIHsKCQkJdGhhdC5ydW5uaW5nID0gZmFsc2U7CgkJCXRoYXQuX3RyaWdnZXIoICJhY3RpdmF0ZSIsIGV2ZW50LCBldmVudERhdGEgKTsKCQl9CgoJCWZ1bmN0aW9uIHNob3coKSB7CgkJCWV2ZW50RGF0YS5uZXdUYWIuY2xvc2VzdCggImxpIiApLmFkZENsYXNzKCAidWktdGFicy1hY3RpdmUgdWktc3RhdGUtYWN0aXZlIiApOwoKCQkJaWYgKCB0b1Nob3cubGVuZ3RoICYmIHRoYXQub3B0aW9ucy5zaG93ICkgewoJCQkJdGhhdC5fc2hvdyggdG9TaG93LCB0aGF0Lm9wdGlvbnMuc2hvdywgY29tcGxldGUgKTsKCQkJfSBlbHNlIHsKCQkJCXRvU2hvdy5zaG93KCk7CgkJCQljb21wbGV0ZSgpOwoJCQl9CgkJfQoKCQkvLyBzdGFydCBvdXQgYnkgaGlkaW5nLCB0aGVuIHNob3dpbmcsIHRoZW4gY29tcGxldGluZwoJCWlmICggdG9IaWRlLmxlbmd0aCAmJiB0aGlzLm9wdGlvbnMuaGlkZSApIHsKCQkJdGhpcy5faGlkZSggdG9IaWRlLCB0aGlzLm9wdGlvbnMuaGlkZSwgZnVuY3Rpb24oKSB7CgkJCQlldmVudERhdGEub2xkVGFiLmNsb3Nlc3QoICJsaSIgKS5yZW1vdmVDbGFzcyggInVpLXRhYnMtYWN0aXZlIHVpLXN0YXRlLWFjdGl2ZSIgKTsKCQkJCXNob3coKTsKCQkJfSk7CgkJfSBlbHNlIHsKCQkJZXZlbnREYXRhLm9sZFRhYi5jbG9zZXN0KCAibGkiICkucmVtb3ZlQ2xhc3MoICJ1aS10YWJzLWFjdGl2ZSB1aS1zdGF0ZS1hY3RpdmUiICk7CgkJCXRvSGlkZS5oaWRlKCk7CgkJCXNob3coKTsKCQl9CgoJCXRvSGlkZS5hdHRyKHsKCQkJImFyaWEtZXhwYW5kZWQiOiAiZmFsc2UiLAoJCQkiYXJpYS1oaWRkZW4iOiAidHJ1ZSIKCQl9KTsKCQlldmVudERhdGEub2xkVGFiLmF0dHIoICJhcmlhLXNlbGVjdGVkIiwgImZhbHNlIiApOwoJCS8vIElmIHdlJ3JlIHN3aXRjaGluZyB0YWJzLCByZW1vdmUgdGhlIG9sZCB0YWIgZnJvbSB0aGUgdGFiIG9yZGVyLgoJCS8vIElmIHdlJ3JlIG9wZW5pbmcgZnJvbSBjb2xsYXBzZWQgc3RhdGUsIHJlbW92ZSB0aGUgcHJldmlvdXMgdGFiIGZyb20gdGhlIHRhYiBvcmRlci4KCQkvLyBJZiB3ZSdyZSBjb2xsYXBzaW5nLCB0aGVuIGtlZXAgdGhlIGNvbGxhcHNpbmcgdGFiIGluIHRoZSB0YWIgb3JkZXIuCgkJaWYgKCB0b1Nob3cubGVuZ3RoICYmIHRvSGlkZS5sZW5ndGggKSB7CgkJCWV2ZW50RGF0YS5vbGRUYWIuYXR0ciggInRhYkluZGV4IiwgLTEgKTsKCQl9IGVsc2UgaWYgKCB0b1Nob3cubGVuZ3RoICkgewoJCQl0aGlzLnRhYnMuZmlsdGVyKGZ1bmN0aW9uKCkgewoJCQkJcmV0dXJuICQoIHRoaXMgKS5hdHRyKCAidGFiSW5kZXgiICkgPT09IDA7CgkJCX0pCgkJCS5hdHRyKCAidGFiSW5kZXgiLCAtMSApOwoJCX0KCgkJdG9TaG93LmF0dHIoewoJCQkiYXJpYS1leHBhbmRlZCI6ICJ0cnVlIiwKCQkJImFyaWEtaGlkZGVuIjogImZhbHNlIgoJCX0pOwoJCWV2ZW50RGF0YS5uZXdUYWIuYXR0cih7CgkJCSJhcmlhLXNlbGVjdGVkIjogInRydWUiLAoJCQl0YWJJbmRleDogMAoJCX0pOwoJfSwKCglfYWN0aXZhdGU6IGZ1bmN0aW9uKCBpbmRleCApIHsKCQl2YXIgYW5jaG9yLAoJCQlhY3RpdmUgPSB0aGlzLl9maW5kQWN0aXZlKCBpbmRleCApOwoKCQkvLyB0cnlpbmcgdG8gYWN0aXZhdGUgdGhlIGFscmVhZHkgYWN0aXZlIHBhbmVsCgkJaWYgKCBhY3RpdmVbIDAgXSA9PT0gdGhpcy5hY3RpdmVbIDAgXSApIHsKCQkJcmV0dXJuOwoJCX0KCgkJLy8gdHJ5aW5nIHRvIGNvbGxhcHNlLCBzaW11bGF0ZSBhIGNsaWNrIG9uIHRoZSBjdXJyZW50IGFjdGl2ZSBoZWFkZXIKCQlpZiAoICFhY3RpdmUubGVuZ3RoICkgewoJCQlhY3RpdmUgPSB0aGlzLmFjdGl2ZTsKCQl9CgoJCWFuY2hvciA9IGFjdGl2ZS5maW5kKCAiLnVpLXRhYnMtYW5jaG9yIiApWyAwIF07CgkJdGhpcy5fZXZlbnRIYW5kbGVyKHsKCQkJdGFyZ2V0OiBhbmNob3IsCgkJCWN1cnJlbnRUYXJnZXQ6IGFuY2hvciwKCQkJcHJldmVudERlZmF1bHQ6ICQubm9vcAoJCX0pOwoJfSwKCglfZmluZEFjdGl2ZTogZnVuY3Rpb24oIGluZGV4ICkgewoJCXJldHVybiBpbmRleCA9PT0gZmFsc2UgPyAkKCkgOiB0aGlzLnRhYnMuZXEoIGluZGV4ICk7Cgl9LAoKCV9nZXRJbmRleDogZnVuY3Rpb24oIGluZGV4ICkgewoJCS8vIG1ldGEtZnVuY3Rpb24gdG8gZ2l2ZSB1c2VycyBvcHRpb24gdG8gcHJvdmlkZSBhIGhyZWYgc3RyaW5nIGluc3RlYWQgb2YgYSBudW1lcmljYWwgaW5kZXguCgkJaWYgKCB0eXBlb2YgaW5kZXggPT09ICJzdHJpbmciICkgewoJCQlpbmRleCA9IHRoaXMuYW5jaG9ycy5pbmRleCggdGhpcy5hbmNob3JzLmZpbHRlciggIltocmVmJD0nIiArIGluZGV4ICsgIiddIiApICk7CgkJfQoKCQlyZXR1cm4gaW5kZXg7Cgl9LAoKCV9kZXN0cm95OiBmdW5jdGlvbigpIHsKCQlpZiAoIHRoaXMueGhyICkgewoJCQl0aGlzLnhoci5hYm9ydCgpOwoJCX0KCgkJdGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCAidWktdGFicyB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWFsbCB1aS10YWJzLWNvbGxhcHNpYmxlIiApOwoKCQl0aGlzLnRhYmxpc3QKCQkJLnJlbW92ZUNsYXNzKCAidWktdGFicy1uYXYgdWktaGVscGVyLXJlc2V0IHVpLWhlbHBlci1jbGVhcmZpeCB1aS13aWRnZXQtaGVhZGVyIHVpLWNvcm5lci1hbGwiICkKCQkJLnJlbW92ZUF0dHIoICJyb2xlIiApOwoKCQl0aGlzLmFuY2hvcnMKCQkJLnJlbW92ZUNsYXNzKCAidWktdGFicy1hbmNob3IiICkKCQkJLnJlbW92ZUF0dHIoICJyb2xlIiApCgkJCS5yZW1vdmVBdHRyKCAidGFiSW5kZXgiICkKCQkJLnJlbW92ZURhdGEoICJocmVmLnRhYnMiICkKCQkJLnJlbW92ZURhdGEoICJsb2FkLnRhYnMiICkKCQkJLnJlbW92ZVVuaXF1ZUlkKCk7CgoJCXRoaXMudGFicy5hZGQoIHRoaXMucGFuZWxzICkuZWFjaChmdW5jdGlvbigpIHsKCQkJaWYgKCAkLmRhdGEoIHRoaXMsICJ1aS10YWJzLWRlc3Ryb3kiICkgKSB7CgkJCQkkKCB0aGlzICkucmVtb3ZlKCk7CgkJCX0gZWxzZSB7CgkJCQkkKCB0aGlzICkKCQkJCQkucmVtb3ZlQ2xhc3MoICJ1aS1zdGF0ZS1kZWZhdWx0IHVpLXN0YXRlLWFjdGl2ZSB1aS1zdGF0ZS1kaXNhYmxlZCAiICsKCQkJCQkJInVpLWNvcm5lci10b3AgdWktY29ybmVyLWJvdHRvbSB1aS13aWRnZXQtY29udGVudCB1aS10YWJzLWFjdGl2ZSB1aS10YWJzLXBhbmVsIiApCgkJCQkJLnJlbW92ZUF0dHIoICJ0YWJJbmRleCIgKQoJCQkJCS5yZW1vdmVBdHRyKCAiYXJpYS1saXZlIiApCgkJCQkJLnJlbW92ZUF0dHIoICJhcmlhLWJ1c3kiICkKCQkJCQkucmVtb3ZlQXR0ciggImFyaWEtc2VsZWN0ZWQiICkKCQkJCQkucmVtb3ZlQXR0ciggImFyaWEtbGFiZWxsZWRieSIgKQoJCQkJCS5yZW1vdmVBdHRyKCAiYXJpYS1oaWRkZW4iICkKCQkJCQkucmVtb3ZlQXR0ciggImFyaWEtZXhwYW5kZWQiICkKCQkJCQkucmVtb3ZlQXR0ciggInJvbGUiICk7CgkJCX0KCQl9KTsKCgkJdGhpcy50YWJzLmVhY2goZnVuY3Rpb24oKSB7CgkJCXZhciBsaSA9ICQoIHRoaXMgKSwKCQkJCXByZXYgPSBsaS5kYXRhKCAidWktdGFicy1hcmlhLWNvbnRyb2xzIiApOwoJCQlpZiAoIHByZXYgKSB7CgkJCQlsaS5hdHRyKCAiYXJpYS1jb250cm9scyIsIHByZXYgKTsKCQkJfSBlbHNlIHsKCQkJCWxpLnJlbW92ZUF0dHIoICJhcmlhLWNvbnRyb2xzIiApOwoJCQl9CgkJfSk7CgoJCXRoaXMucGFuZWxzLnNob3coKTsKCgkJaWYgKCB0aGlzLm9wdGlvbnMuaGVpZ2h0U3R5bGUgIT09ICJjb250ZW50IiApIHsKCQkJdGhpcy5wYW5lbHMuY3NzKCAiaGVpZ2h0IiwgIiIgKTsKCQl9Cgl9LAoKCWVuYWJsZTogZnVuY3Rpb24oIGluZGV4ICkgewoJCXZhciBkaXNhYmxlZCA9IHRoaXMub3B0aW9ucy5kaXNhYmxlZDsKCQlpZiAoIGRpc2FibGVkID09PSBmYWxzZSApIHsKCQkJcmV0dXJuOwoJCX0KCgkJaWYgKCBpbmRleCA9PT0gdW5kZWZpbmVkICkgewoJCQlkaXNhYmxlZCA9IGZhbHNlOwoJCX0gZWxzZSB7CgkJCWluZGV4ID0gdGhpcy5fZ2V0SW5kZXgoIGluZGV4ICk7CgkJCWlmICggJC5pc0FycmF5KCBkaXNhYmxlZCApICkgewoJCQkJZGlzYWJsZWQgPSAkLm1hcCggZGlzYWJsZWQsIGZ1bmN0aW9uKCBudW0gKSB7CgkJCQkJcmV0dXJuIG51bSAhPT0gaW5kZXggPyBudW0gOiBudWxsOwoJCQkJfSk7CgkJCX0gZWxzZSB7CgkJCQlkaXNhYmxlZCA9ICQubWFwKCB0aGlzLnRhYnMsIGZ1bmN0aW9uKCBsaSwgbnVtICkgewoJCQkJCXJldHVybiBudW0gIT09IGluZGV4ID8gbnVtIDogbnVsbDsKCQkJCX0pOwoJCQl9CgkJfQoJCXRoaXMuX3NldHVwRGlzYWJsZWQoIGRpc2FibGVkICk7Cgl9LAoKCWRpc2FibGU6IGZ1bmN0aW9uKCBpbmRleCApIHsKCQl2YXIgZGlzYWJsZWQgPSB0aGlzLm9wdGlvbnMuZGlzYWJsZWQ7CgkJaWYgKCBkaXNhYmxlZCA9PT0gdHJ1ZSApIHsKCQkJcmV0dXJuOwoJCX0KCgkJaWYgKCBpbmRleCA9PT0gdW5kZWZpbmVkICkgewoJCQlkaXNhYmxlZCA9IHRydWU7CgkJfSBlbHNlIHsKCQkJaW5kZXggPSB0aGlzLl9nZXRJbmRleCggaW5kZXggKTsKCQkJaWYgKCAkLmluQXJyYXkoIGluZGV4LCBkaXNhYmxlZCApICE9PSAtMSApIHsKCQkJCXJldHVybjsKCQkJfQoJCQlpZiAoICQuaXNBcnJheSggZGlzYWJsZWQgKSApIHsKCQkJCWRpc2FibGVkID0gJC5tZXJnZSggWyBpbmRleCBdLCBkaXNhYmxlZCApLnNvcnQoKTsKCQkJfSBlbHNlIHsKCQkJCWRpc2FibGVkID0gWyBpbmRleCBdOwoJCQl9CgkJfQoJCXRoaXMuX3NldHVwRGlzYWJsZWQoIGRpc2FibGVkICk7Cgl9LAoKCWxvYWQ6IGZ1bmN0aW9uKCBpbmRleCwgZXZlbnQgKSB7CgkJaW5kZXggPSB0aGlzLl9nZXRJbmRleCggaW5kZXggKTsKCQl2YXIgdGhhdCA9IHRoaXMsCgkJCXRhYiA9IHRoaXMudGFicy5lcSggaW5kZXggKSwKCQkJYW5jaG9yID0gdGFiLmZpbmQoICIudWktdGFicy1hbmNob3IiICksCgkJCXBhbmVsID0gdGhpcy5fZ2V0UGFuZWxGb3JUYWIoIHRhYiApLAoJCQlldmVudERhdGEgPSB7CgkJCQl0YWI6IHRhYiwKCQkJCXBhbmVsOiBwYW5lbAoJCQl9OwoKCQkvLyBub3QgcmVtb3RlCgkJaWYgKCBpc0xvY2FsKCBhbmNob3JbIDAgXSApICkgewoJCQlyZXR1cm47CgkJfQoKCQl0aGlzLnhociA9ICQuYWpheCggdGhpcy5fYWpheFNldHRpbmdzKCBhbmNob3IsIGV2ZW50LCBldmVudERhdGEgKSApOwoKCQkvLyBzdXBwb3J0OiBqUXVlcnkgPDEuOAoJCS8vIGpRdWVyeSA8MS44IHJldHVybnMgZmFsc2UgaWYgdGhlIHJlcXVlc3QgaXMgY2FuY2VsZWQgaW4gYmVmb3JlU2VuZCwKCQkvLyBidXQgYXMgb2YgMS44LCAkLmFqYXgoKSBhbHdheXMgcmV0dXJucyBhIGpxWEhSIG9iamVjdC4KCQlpZiAoIHRoaXMueGhyICYmIHRoaXMueGhyLnN0YXR1c1RleHQgIT09ICJjYW5jZWxlZCIgKSB7CgkJCXRhYi5hZGRDbGFzcyggInVpLXRhYnMtbG9hZGluZyIgKTsKCQkJcGFuZWwuYXR0ciggImFyaWEtYnVzeSIsICJ0cnVlIiApOwoKCQkJdGhpcy54aHIKCQkJCS5zdWNjZXNzKGZ1bmN0aW9uKCByZXNwb25zZSApIHsKCQkJCQkvLyBzdXBwb3J0OiBqUXVlcnkgPDEuOAoJCQkJCS8vIGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzExNzc4CgkJCQkJc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCQkJcGFuZWwuaHRtbCggcmVzcG9uc2UgKTsKCQkJCQkJdGhhdC5fdHJpZ2dlciggImxvYWQiLCBldmVudCwgZXZlbnREYXRhICk7CgkJCQkJfSwgMSApOwoJCQkJfSkKCQkJCS5jb21wbGV0ZShmdW5jdGlvbigganFYSFIsIHN0YXR1cyApIHsKCQkJCQkvLyBzdXBwb3J0OiBqUXVlcnkgPDEuOAoJCQkJCS8vIGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzExNzc4CgkJCQkJc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCQkJaWYgKCBzdGF0dXMgPT09ICJhYm9ydCIgKSB7CgkJCQkJCQl0aGF0LnBhbmVscy5zdG9wKCBmYWxzZSwgdHJ1ZSApOwoJCQkJCQl9CgoJCQkJCQl0YWIucmVtb3ZlQ2xhc3MoICJ1aS10YWJzLWxvYWRpbmciICk7CgkJCQkJCXBhbmVsLnJlbW92ZUF0dHIoICJhcmlhLWJ1c3kiICk7CgoJCQkJCQlpZiAoIGpxWEhSID09PSB0aGF0LnhociApIHsKCQkJCQkJCWRlbGV0ZSB0aGF0LnhocjsKCQkJCQkJfQoJCQkJCX0sIDEgKTsKCQkJCX0pOwoJCX0KCX0sCgoJLy8gVE9ETzogUmVtb3ZlIHRoaXMgZnVuY3Rpb24gaW4gMS4xMCB3aGVuIGFqYXhPcHRpb25zIGlzIHJlbW92ZWQKCV9hamF4U2V0dGluZ3M6IGZ1bmN0aW9uKCBhbmNob3IsIGV2ZW50LCBldmVudERhdGEgKSB7CgkJdmFyIHRoYXQgPSB0aGlzOwoJCXJldHVybiB7CgkJCXVybDogYW5jaG9yLmF0dHIoICJocmVmIiApLAoJCQliZWZvcmVTZW5kOiBmdW5jdGlvbigganFYSFIsIHNldHRpbmdzICkgewoJCQkJcmV0dXJuIHRoYXQuX3RyaWdnZXIoICJiZWZvcmVMb2FkIiwgZXZlbnQsCgkJCQkJJC5leHRlbmQoIHsganFYSFIgOiBqcVhIUiwgYWpheFNldHRpbmdzOiBzZXR0aW5ncyB9LCBldmVudERhdGEgKSApOwoJCQl9CgkJfTsKCX0sCgoJX2dldFBhbmVsRm9yVGFiOiBmdW5jdGlvbiggdGFiICkgewoJCXZhciBpZCA9ICQoIHRhYiApLmF0dHIoICJhcmlhLWNvbnRyb2xzIiApOwoJCXJldHVybiB0aGlzLmVsZW1lbnQuZmluZCggdGhpcy5fc2FuaXRpemVTZWxlY3RvciggIiMiICsgaWQgKSApOwoJfQp9KTsKCi8vIERFUFJFQ0FURUQKaWYgKCAkLnVpQmFja0NvbXBhdCAhPT0gZmFsc2UgKSB7CgoJLy8gaGVscGVyIG1ldGhvZCBmb3IgYSBsb3Qgb2YgdGhlIGJhY2sgY29tcGF0IGV4dGVuc2lvbnMKCSQudWkudGFicy5wcm90b3R5cGUuX3VpID0gZnVuY3Rpb24oIHRhYiwgcGFuZWwgKSB7CgkJcmV0dXJuIHsKCQkJdGFiOiB0YWIsCgkJCXBhbmVsOiBwYW5lbCwKCQkJaW5kZXg6IHRoaXMuYW5jaG9ycy5pbmRleCggdGFiICkKCQl9OwoJfTsKCgkvLyB1cmwgbWV0aG9kCgkkLndpZGdldCggInVpLnRhYnMiLCAkLnVpLnRhYnMsIHsKCQl1cmw6IGZ1bmN0aW9uKCBpbmRleCwgdXJsICkgewoJCQl0aGlzLmFuY2hvcnMuZXEoIGluZGV4ICkuYXR0ciggImhyZWYiLCB1cmwgKTsKCQl9Cgl9KTsKCgkvLyBUT0RPOiBSZW1vdmUgX2FqYXhTZXR0aW5ncygpIG1ldGhvZCB3aGVuIHJlbW92aW5nIHRoaXMgZXh0ZW5zaW9uCgkvLyBhamF4T3B0aW9ucyBhbmQgY2FjaGUgb3B0aW9ucwoJJC53aWRnZXQoICJ1aS50YWJzIiwgJC51aS50YWJzLCB7CgkJb3B0aW9uczogewoJCQlhamF4T3B0aW9uczogbnVsbCwKCQkJY2FjaGU6IGZhbHNlCgkJfSwKCgkJX2NyZWF0ZTogZnVuY3Rpb24oKSB7CgkJCXRoaXMuX3N1cGVyKCk7CgoJCQl2YXIgdGhhdCA9IHRoaXM7CgoJCQl0aGlzLl9vbih7IHRhYnNiZWZvcmVsb2FkOiBmdW5jdGlvbiggZXZlbnQsIHVpICkgewoJCQkJLy8gdGFiIGlzIGFscmVhZHkgY2FjaGVkCgkJCQlpZiAoICQuZGF0YSggdWkudGFiWyAwIF0sICJjYWNoZS50YWJzIiApICkgewoJCQkJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgkJCQkJcmV0dXJuOwoJCQkJfQoKCQkJCXVpLmpxWEhSLnN1Y2Nlc3MoZnVuY3Rpb24oKSB7CgkJCQkJaWYgKCB0aGF0Lm9wdGlvbnMuY2FjaGUgKSB7CgkJCQkJCSQuZGF0YSggdWkudGFiWyAwIF0sICJjYWNoZS50YWJzIiwgdHJ1ZSApOwoJCQkJCX0KCQkJCX0pOwoJCQl9fSk7CgkJfSwKCgkJX2FqYXhTZXR0aW5nczogZnVuY3Rpb24oIGFuY2hvciwgZXZlbnQsIHVpICkgewoJCQl2YXIgYWpheE9wdGlvbnMgPSB0aGlzLm9wdGlvbnMuYWpheE9wdGlvbnM7CgkJCXJldHVybiAkLmV4dGVuZCgge30sIGFqYXhPcHRpb25zLCB7CgkJCQllcnJvcjogZnVuY3Rpb24oIHhociwgc3RhdHVzICkgewoJCQkJCXRyeSB7CgkJCQkJCS8vIFBhc3NpbmcgaW5kZXggYXZvaWQgYSByYWNlIGNvbmRpdGlvbiB3aGVuIHRoaXMgbWV0aG9kIGlzCgkJCQkJCS8vIGNhbGxlZCBhZnRlciB0aGUgdXNlciBoYXMgc2VsZWN0ZWQgYW5vdGhlciB0YWIuCgkJCQkJCS8vIFBhc3MgdGhlIGFuY2hvciB0aGF0IGluaXRpYXRlZCB0aGlzIHJlcXVlc3QgYWxsb3dzCgkJCQkJCS8vIGxvYWRFcnJvciB0byBtYW5pcHVsYXRlIHRoZSB0YWIgY29udGVudCBwYW5lbCB2aWEgJChhLmhhc2gpCgkJCQkJCWFqYXhPcHRpb25zLmVycm9yKAoJCQkJCQkJeGhyLCBzdGF0dXMsIHVpLnRhYi5jbG9zZXN0KCAibGkiICkuaW5kZXgoKSwgdWkudGFiWyAwIF0gKTsKCQkJCQl9CgkJCQkJY2F0Y2ggKCBlcnJvciApIHt9CgkJCQl9CgkJCX0sIHRoaXMuX3N1cGVyQXBwbHkoIGFyZ3VtZW50cyApICk7CgkJfSwKCgkJX3NldE9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7CgkJCS8vIHJlc2V0IGNhY2hlIGlmIHN3aXRjaGluZyBmcm9tIGNhY2hlZCB0byBub3QgY2FjaGVkCgkJCWlmICgga2V5ID09PSAiY2FjaGUiICYmIHZhbHVlID09PSBmYWxzZSApIHsKCQkJCXRoaXMuYW5jaG9ycy5yZW1vdmVEYXRhKCAiY2FjaGUudGFicyIgKTsKCQkJfQoJCQl0aGlzLl9zdXBlcigga2V5LCB2YWx1ZSApOwoJCX0sCgoJCV9kZXN0cm95OiBmdW5jdGlvbigpIHsKCQkJdGhpcy5hbmNob3JzLnJlbW92ZURhdGEoICJjYWNoZS50YWJzIiApOwoJCQl0aGlzLl9zdXBlcigpOwoJCX0sCgoJCXVybDogZnVuY3Rpb24oIGluZGV4ICl7CgkJCXRoaXMuYW5jaG9ycy5lcSggaW5kZXggKS5yZW1vdmVEYXRhKCAiY2FjaGUudGFicyIgKTsKCQkJdGhpcy5fc3VwZXJBcHBseSggYXJndW1lbnRzICk7CgkJfQoJfSk7CgoJLy8gYWJvcnQgbWV0aG9kCgkkLndpZGdldCggInVpLnRhYnMiLCAkLnVpLnRhYnMsIHsKCQlhYm9ydDogZnVuY3Rpb24oKSB7CgkJCWlmICggdGhpcy54aHIgKSB7CgkJCQl0aGlzLnhoci5hYm9ydCgpOwoJCQl9CgkJfQoJfSk7CgoJLy8gc3Bpbm5lcgoJJC53aWRnZXQoICJ1aS50YWJzIiwgJC51aS50YWJzLCB7CgkJb3B0aW9uczogewoJCQlzcGlubmVyOiAiPGVtPkxvYWRpbmcmIzgyMzA7PC9lbT4iCgkJfSwKCQlfY3JlYXRlOiBmdW5jdGlvbigpIHsKCQkJdGhpcy5fc3VwZXIoKTsKCQkJdGhpcy5fb24oewoJCQkJdGFic2JlZm9yZWxvYWQ6IGZ1bmN0aW9uKCBldmVudCwgdWkgKSB7CgkJCQkJLy8gRG9uJ3QgcmVhY3QgdG8gbmVzdGVkIHRhYnMgb3IgdGFicyB0aGF0IGRvbid0IHVzZSBhIHNwaW5uZXIKCQkJCQlpZiAoIGV2ZW50LnRhcmdldCAhPT0gdGhpcy5lbGVtZW50WyAwIF0gfHwKCQkJCQkJCSF0aGlzLm9wdGlvbnMuc3Bpbm5lciApIHsKCQkJCQkJcmV0dXJuOwoJCQkJCX0KCgkJCQkJdmFyIHNwYW4gPSB1aS50YWIuZmluZCggInNwYW4iICksCgkJCQkJCWh0bWwgPSBzcGFuLmh0bWwoKTsKCQkJCQlzcGFuLmh0bWwoIHRoaXMub3B0aW9ucy5zcGlubmVyICk7CgkJCQkJdWkuanFYSFIuY29tcGxldGUoZnVuY3Rpb24oKSB7CgkJCQkJCXNwYW4uaHRtbCggaHRtbCApOwoJCQkJCX0pOwoJCQkJfQoJCQl9KTsKCQl9Cgl9KTsKCgkvLyBlbmFibGUvZGlzYWJsZSBldmVudHMKCSQud2lkZ2V0KCAidWkudGFicyIsICQudWkudGFicywgewoJCW9wdGlvbnM6IHsKCQkJZW5hYmxlOiBudWxsLAoJCQlkaXNhYmxlOiBudWxsCgkJfSwKCgkJZW5hYmxlOiBmdW5jdGlvbiggaW5kZXggKSB7CgkJCXZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zLAoJCQkJdHJpZ2dlcjsKCgkJCWlmICggaW5kZXggJiYgb3B0aW9ucy5kaXNhYmxlZCA9PT0gdHJ1ZSB8fAoJCQkJCSggJC5pc0FycmF5KCBvcHRpb25zLmRpc2FibGVkICkgJiYgJC5pbkFycmF5KCBpbmRleCwgb3B0aW9ucy5kaXNhYmxlZCApICE9PSAtMSApICkgewoJCQkJdHJpZ2dlciA9IHRydWU7CgkJCX0KCgkJCXRoaXMuX3N1cGVyQXBwbHkoIGFyZ3VtZW50cyApOwoKCQkJaWYgKCB0cmlnZ2VyICkgewoJCQkJdGhpcy5fdHJpZ2dlciggImVuYWJsZSIsIG51bGwsIHRoaXMuX3VpKCB0aGlzLmFuY2hvcnNbIGluZGV4IF0sIHRoaXMucGFuZWxzWyBpbmRleCBdICkgKTsKCQkJfQoJCX0sCgoJCWRpc2FibGU6IGZ1bmN0aW9uKCBpbmRleCApIHsKCQkJdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsCgkJCQl0cmlnZ2VyOwoKCQkJaWYgKCBpbmRleCAmJiBvcHRpb25zLmRpc2FibGVkID09PSBmYWxzZSB8fAoJCQkJCSggJC5pc0FycmF5KCBvcHRpb25zLmRpc2FibGVkICkgJiYgJC5pbkFycmF5KCBpbmRleCwgb3B0aW9ucy5kaXNhYmxlZCApID09PSAtMSApICkgewoJCQkJdHJpZ2dlciA9IHRydWU7CgkJCX0KCgkJCXRoaXMuX3N1cGVyQXBwbHkoIGFyZ3VtZW50cyApOwoKCQkJaWYgKCB0cmlnZ2VyICkgewoJCQkJdGhpcy5fdHJpZ2dlciggImRpc2FibGUiLCBudWxsLCB0aGlzLl91aSggdGhpcy5hbmNob3JzWyBpbmRleCBdLCB0aGlzLnBhbmVsc1sgaW5kZXggXSApICk7CgkJCX0KCQl9Cgl9KTsKCgkvLyBhZGQvcmVtb3ZlIG1ldGhvZHMgYW5kIGV2ZW50cwoJJC53aWRnZXQoICJ1aS50YWJzIiwgJC51aS50YWJzLCB7CgkJb3B0aW9uczogewoJCQlhZGQ6IG51bGwsCgkJCXJlbW92ZTogbnVsbCwKCQkJdGFiVGVtcGxhdGU6ICI8bGk+PGEgaHJlZj0nI3tocmVmfSc+PHNwYW4+I3tsYWJlbH08L3NwYW4+PC9hPjwvbGk+IgoJCX0sCgoJCWFkZDogZnVuY3Rpb24oIHVybCwgbGFiZWwsIGluZGV4ICkgewoJCQlpZiAoIGluZGV4ID09PSB1bmRlZmluZWQgKSB7CgkJCQlpbmRleCA9IHRoaXMuYW5jaG9ycy5sZW5ndGg7CgkJCX0KCgkJCXZhciBkb0luc2VydEFmdGVyLCBwYW5lbCwKCQkJCW9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsCgkJCQlsaSA9ICQoIG9wdGlvbnMudGFiVGVtcGxhdGUKCQkJCQkucmVwbGFjZSggLyNce2hyZWZcfS9nLCB1cmwgKQoJCQkJCS5yZXBsYWNlKCAvI1x7bGFiZWxcfS9nLCBsYWJlbCApICksCgkJCQlpZCA9ICF1cmwuaW5kZXhPZiggIiMiICkgPwoJCQkJCXVybC5yZXBsYWNlKCAiIyIsICIiICkgOgoJCQkJCXRoaXMuX3RhYklkKCBsaSApOwoKCQkJbGkuYWRkQ2xhc3MoICJ1aS1zdGF0ZS1kZWZhdWx0IHVpLWNvcm5lci10b3AiICkuZGF0YSggInVpLXRhYnMtZGVzdHJveSIsIHRydWUgKTsKCQkJbGkuYXR0ciggImFyaWEtY29udHJvbHMiLCBpZCApOwoKCQkJZG9JbnNlcnRBZnRlciA9IGluZGV4ID49IHRoaXMudGFicy5sZW5ndGg7CgoJCQkvLyB0cnkgdG8gZmluZCBhbiBleGlzdGluZyBlbGVtZW50IGJlZm9yZSBjcmVhdGluZyBhIG5ldyBvbmUKCQkJcGFuZWwgPSB0aGlzLmVsZW1lbnQuZmluZCggIiMiICsgaWQgKTsKCQkJaWYgKCAhcGFuZWwubGVuZ3RoICkgewoJCQkJcGFuZWwgPSB0aGlzLl9jcmVhdGVQYW5lbCggaWQgKTsKCQkJCWlmICggZG9JbnNlcnRBZnRlciApIHsKCQkJCQlpZiAoIGluZGV4ID4gMCApIHsKCQkJCQkJcGFuZWwuaW5zZXJ0QWZ0ZXIoIHRoaXMucGFuZWxzLmVxKCAtMSApICk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJcGFuZWwuYXBwZW5kVG8oIHRoaXMuZWxlbWVudCApOwoJCQkJCX0KCQkJCX0gZWxzZSB7CgkJCQkJcGFuZWwuaW5zZXJ0QmVmb3JlKCB0aGlzLnBhbmVsc1sgaW5kZXggXSApOwoJCQkJfQoJCQl9CgkJCXBhbmVsLmFkZENsYXNzKCAidWktdGFicy1wYW5lbCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYm90dG9tIiApLmhpZGUoKTsKCgkJCWlmICggZG9JbnNlcnRBZnRlciApIHsKCQkJCWxpLmFwcGVuZFRvKCB0aGlzLnRhYmxpc3QgKTsKCQkJfSBlbHNlIHsKCQkJCWxpLmluc2VydEJlZm9yZSggdGhpcy50YWJzWyBpbmRleCBdICk7CgkJCX0KCgkJCW9wdGlvbnMuZGlzYWJsZWQgPSAkLm1hcCggb3B0aW9ucy5kaXNhYmxlZCwgZnVuY3Rpb24oIG4gKSB7CgkJCQlyZXR1cm4gbiA+PSBpbmRleCA/ICsrbiA6IG47CgkJCX0pOwoKCQkJdGhpcy5yZWZyZXNoKCk7CgkJCWlmICggdGhpcy50YWJzLmxlbmd0aCA9PT0gMSAmJiBvcHRpb25zLmFjdGl2ZSA9PT0gZmFsc2UgKSB7CgkJCQl0aGlzLm9wdGlvbiggImFjdGl2ZSIsIDAgKTsKCQkJfQoKCQkJdGhpcy5fdHJpZ2dlciggImFkZCIsIG51bGwsIHRoaXMuX3VpKCB0aGlzLmFuY2hvcnNbIGluZGV4IF0sIHRoaXMucGFuZWxzWyBpbmRleCBdICkgKTsKCQkJcmV0dXJuIHRoaXM7CgkJfSwKCgkJcmVtb3ZlOiBmdW5jdGlvbiggaW5kZXggKSB7CgkJCWluZGV4ID0gdGhpcy5fZ2V0SW5kZXgoIGluZGV4ICk7CgkJCXZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zLAoJCQkJdGFiID0gdGhpcy50YWJzLmVxKCBpbmRleCApLnJlbW92ZSgpLAoJCQkJcGFuZWwgPSB0aGlzLl9nZXRQYW5lbEZvclRhYiggdGFiICkucmVtb3ZlKCk7CgoJCQkvLyBJZiBzZWxlY3RlZCB0YWIgd2FzIHJlbW92ZWQgZm9jdXMgdGFiIHRvIHRoZSByaWdodCBvcgoJCQkvLyBpbiBjYXNlIHRoZSBsYXN0IHRhYiB3YXMgcmVtb3ZlZCB0aGUgdGFiIHRvIHRoZSBsZWZ0LgoJCQkvLyBXZSBjaGVjayBmb3IgbW9yZSB0aGFuIDIgdGFicywgYmVjYXVzZSBpZiB0aGVyZSBhcmUgb25seSAyLAoJCQkvLyB0aGVuIHdoZW4gd2UgcmVtb3ZlIHRoaXMgdGFiLCB0aGVyZSB3aWxsIG9ubHkgYmUgb25lIHRhYiBsZWZ0CgkJCS8vIHNvIHdlIGRvbid0IG5lZWQgdG8gZGV0ZWN0IHdoaWNoIHRhYiB0byBhY3RpdmF0ZS4KCQkJaWYgKCB0YWIuaGFzQ2xhc3MoICJ1aS10YWJzLWFjdGl2ZSIgKSAmJiB0aGlzLmFuY2hvcnMubGVuZ3RoID4gMiApIHsKCQkJCXRoaXMuX2FjdGl2YXRlKCBpbmRleCArICggaW5kZXggKyAxIDwgdGhpcy5hbmNob3JzLmxlbmd0aCA/IDEgOiAtMSApICk7CgkJCX0KCgkJCW9wdGlvbnMuZGlzYWJsZWQgPSAkLm1hcCgKCQkJCSQuZ3JlcCggb3B0aW9ucy5kaXNhYmxlZCwgZnVuY3Rpb24oIG4gKSB7CgkJCQkJcmV0dXJuIG4gIT09IGluZGV4OwoJCQkJfSksCgkJCQlmdW5jdGlvbiggbiApIHsKCQkJCQlyZXR1cm4gbiA+PSBpbmRleCA/IC0tbiA6IG47CgkJCQl9KTsKCgkJCXRoaXMucmVmcmVzaCgpOwoKCQkJdGhpcy5fdHJpZ2dlciggInJlbW92ZSIsIG51bGwsIHRoaXMuX3VpKCB0YWIuZmluZCggImEiIClbIDAgXSwgcGFuZWxbIDAgXSApICk7CgkJCXJldHVybiB0aGlzOwoJCX0KCX0pOwoKCS8vIGxlbmd0aCBtZXRob2QKCSQud2lkZ2V0KCAidWkudGFicyIsICQudWkudGFicywgewoJCWxlbmd0aDogZnVuY3Rpb24oKSB7CgkJCXJldHVybiB0aGlzLmFuY2hvcnMubGVuZ3RoOwoJCX0KCX0pOwoKCS8vIHBhbmVsIGlkcyAoaWRQcmVmaXggb3B0aW9uICsgdGl0bGUgYXR0cmlidXRlKQoJJC53aWRnZXQoICJ1aS50YWJzIiwgJC51aS50YWJzLCB7CgkJb3B0aW9uczogewoJCQlpZFByZWZpeDogInVpLXRhYnMtIgoJCX0sCgoJCV90YWJJZDogZnVuY3Rpb24oIHRhYiApIHsKCQkJdmFyIGEgPSB0YWIuaXMoICJsaSIgKSA/IHRhYi5maW5kKCAiYVtocmVmXSIgKSA6IHRhYjsKCQkJYSA9IGFbMF07CgkJCXJldHVybiAkKCBhICkuY2xvc2VzdCggImxpIiApLmF0dHIoICJhcmlhLWNvbnRyb2xzIiApIHx8CgkJCQlhLnRpdGxlICYmIGEudGl0bGUucmVwbGFjZSggL1xzL2csICJfIiApLnJlcGxhY2UoIC9bXlx3XHUwMGMwLVx1RkZGRlwtXS9nLCAiIiApIHx8CgkJCQl0aGlzLm9wdGlvbnMuaWRQcmVmaXggKyBnZXROZXh0VGFiSWQoKTsKCQl9Cgl9KTsKCgkvLyBfY3JlYXRlUGFuZWwgbWV0aG9kCgkkLndpZGdldCggInVpLnRhYnMiLCAkLnVpLnRhYnMsIHsKCQlvcHRpb25zOiB7CgkJCXBhbmVsVGVtcGxhdGU6ICI8ZGl2PjwvZGl2PiIKCQl9LAoKCQlfY3JlYXRlUGFuZWw6IGZ1bmN0aW9uKCBpZCApIHsKCQkJcmV0dXJuICQoIHRoaXMub3B0aW9ucy5wYW5lbFRlbXBsYXRlICkKCQkJCS5hdHRyKCAiaWQiLCBpZCApCgkJCQkuYWRkQ2xhc3MoICJ1aS10YWJzLXBhbmVsIHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1ib3R0b20iICkKCQkJCS5kYXRhKCAidWktdGFicy1kZXN0cm95IiwgdHJ1ZSApOwoJCX0KCX0pOwoKCS8vIHNlbGVjdGVkIG9wdGlvbgoJJC53aWRnZXQoICJ1aS50YWJzIiwgJC51aS50YWJzLCB7CgkJX2NyZWF0ZTogZnVuY3Rpb24oKSB7CgkJCXZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zOwoJCQlpZiAoIG9wdGlvbnMuYWN0aXZlID09PSBudWxsICYmIG9wdGlvbnMuc2VsZWN0ZWQgIT09IHVuZGVmaW5lZCApIHsKCQkJCW9wdGlvbnMuYWN0aXZlID0gb3B0aW9ucy5zZWxlY3RlZCA9PT0gLTEgPyBmYWxzZSA6IG9wdGlvbnMuc2VsZWN0ZWQ7CgkJCX0KCQkJdGhpcy5fc3VwZXIoKTsKCQkJb3B0aW9ucy5zZWxlY3RlZCA9IG9wdGlvbnMuYWN0aXZlOwoJCQlpZiAoIG9wdGlvbnMuc2VsZWN0ZWQgPT09IGZhbHNlICkgewoJCQkJb3B0aW9ucy5zZWxlY3RlZCA9IC0xOwoJCQl9CgkJfSwKCgkJX3NldE9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7CgkJCWlmICgga2V5ICE9PSAic2VsZWN0ZWQiICkgewoJCQkJcmV0dXJuIHRoaXMuX3N1cGVyKCBrZXksIHZhbHVlICk7CgkJCX0KCgkJCXZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zOwoJCQl0aGlzLl9zdXBlciggImFjdGl2ZSIsIHZhbHVlID09PSAtMSA/IGZhbHNlIDogdmFsdWUgKTsKCQkJb3B0aW9ucy5zZWxlY3RlZCA9IG9wdGlvbnMuYWN0aXZlOwoJCQlpZiAoIG9wdGlvbnMuc2VsZWN0ZWQgPT09IGZhbHNlICkgewoJCQkJb3B0aW9ucy5zZWxlY3RlZCA9IC0xOwoJCQl9CgkJfSwKCgkJX2V2ZW50SGFuZGxlcjogZnVuY3Rpb24oKSB7CgkJCXRoaXMuX3N1cGVyQXBwbHkoIGFyZ3VtZW50cyApOwoJCQl0aGlzLm9wdGlvbnMuc2VsZWN0ZWQgPSB0aGlzLm9wdGlvbnMuYWN0aXZlOwoJCQlpZiAoIHRoaXMub3B0aW9ucy5zZWxlY3RlZCA9PT0gZmFsc2UgKSB7CgkJCQl0aGlzLm9wdGlvbnMuc2VsZWN0ZWQgPSAtMTsKCQkJfQoJCX0KCX0pOwoKCS8vIHNob3cgYW5kIHNlbGVjdCBldmVudAoJJC53aWRnZXQoICJ1aS50YWJzIiwgJC51aS50YWJzLCB7CgkJb3B0aW9uczogewoJCQlzaG93OiBudWxsLAoJCQlzZWxlY3Q6IG51bGwKCQl9LAoJCV9jcmVhdGU6IGZ1bmN0aW9uKCkgewoJCQl0aGlzLl9zdXBlcigpOwoJCQlpZiAoIHRoaXMub3B0aW9ucy5hY3RpdmUgIT09IGZhbHNlICkgewoJCQkJdGhpcy5fdHJpZ2dlciggInNob3ciLCBudWxsLCB0aGlzLl91aSgKCQkJCQl0aGlzLmFjdGl2ZS5maW5kKCAiLnVpLXRhYnMtYW5jaG9yIiApWyAwIF0sCgkJCQkJdGhpcy5fZ2V0UGFuZWxGb3JUYWIoIHRoaXMuYWN0aXZlIClbIDAgXSApICk7CgkJCX0KCQl9LAoJCV90cmlnZ2VyOiBmdW5jdGlvbiggdHlwZSwgZXZlbnQsIGRhdGEgKSB7CgkJCXZhciB0YWIsIHBhbmVsLAoJCQkJcmV0ID0gdGhpcy5fc3VwZXJBcHBseSggYXJndW1lbnRzICk7CgoJCQlpZiAoICFyZXQgKSB7CgkJCQlyZXR1cm4gZmFsc2U7CgkJCX0KCgkJCWlmICggdHlwZSA9PT0gImJlZm9yZUFjdGl2YXRlIiApIHsKCQkJCXRhYiA9IGRhdGEubmV3VGFiLmxlbmd0aCA/IGRhdGEubmV3VGFiIDogZGF0YS5vbGRUYWI7CgkJCQlwYW5lbCA9IGRhdGEubmV3UGFuZWwubGVuZ3RoID8gZGF0YS5uZXdQYW5lbCA6IGRhdGEub2xkUGFuZWw7CgkJCQlyZXQgPSB0aGlzLl9zdXBlciggInNlbGVjdCIsIGV2ZW50LCB7CgkJCQkJdGFiOiB0YWIuZmluZCggIi51aS10YWJzLWFuY2hvciIgKVsgMF0sCgkJCQkJcGFuZWw6IHBhbmVsWyAwIF0sCgkJCQkJaW5kZXg6IHRhYi5jbG9zZXN0KCAibGkiICkuaW5kZXgoKQoJCQkJfSk7CgkJCX0gZWxzZSBpZiAoIHR5cGUgPT09ICJhY3RpdmF0ZSIgJiYgZGF0YS5uZXdUYWIubGVuZ3RoICkgewoJCQkJcmV0ID0gdGhpcy5fc3VwZXIoICJzaG93IiwgZXZlbnQsIHsKCQkJCQl0YWI6IGRhdGEubmV3VGFiLmZpbmQoICIudWktdGFicy1hbmNob3IiIClbIDAgXSwKCQkJCQlwYW5lbDogZGF0YS5uZXdQYW5lbFsgMCBdLAoJCQkJCWluZGV4OiBkYXRhLm5ld1RhYi5jbG9zZXN0KCAibGkiICkuaW5kZXgoKQoJCQkJfSk7CgkJCX0KCQkJcmV0dXJuIHJldDsKCQl9Cgl9KTsKCgkvLyBzZWxlY3QgbWV0aG9kCgkkLndpZGdldCggInVpLnRhYnMiLCAkLnVpLnRhYnMsIHsKCQlzZWxlY3Q6IGZ1bmN0aW9uKCBpbmRleCApIHsKCQkJaW5kZXggPSB0aGlzLl9nZXRJbmRleCggaW5kZXggKTsKCQkJaWYgKCBpbmRleCA9PT0gLTEgKSB7CgkJCQlpZiAoIHRoaXMub3B0aW9ucy5jb2xsYXBzaWJsZSAmJiB0aGlzLm9wdGlvbnMuc2VsZWN0ZWQgIT09IC0xICkgewoJCQkJCWluZGV4ID0gdGhpcy5vcHRpb25zLnNlbGVjdGVkOwoJCQkJfSBlbHNlIHsKCQkJCQlyZXR1cm47CgkJCQl9CgkJCX0KCQkJdGhpcy5hbmNob3JzLmVxKCBpbmRleCApLnRyaWdnZXIoIHRoaXMub3B0aW9ucy5ldmVudCArIHRoaXMuZXZlbnROYW1lc3BhY2UgKTsKCQl9Cgl9KTsKCgkvLyBjb29raWUgb3B0aW9uCgkoZnVuY3Rpb24oKSB7CgoJdmFyIGxpc3RJZCA9IDA7CgoJJC53aWRnZXQoICJ1aS50YWJzIiwgJC51aS50YWJzLCB7CgkJb3B0aW9uczogewoJCQljb29raWU6IG51bGwgLy8gZS5nLiB7IGV4cGlyZXM6IDcsIHBhdGg6ICcvJywgZG9tYWluOiAnanF1ZXJ5LmNvbScsIHNlY3VyZTogdHJ1ZSB9CgkJfSwKCQlfY3JlYXRlOiBmdW5jdGlvbigpIHsKCQkJdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsCgkJCQlhY3RpdmU7CgkJCWlmICggb3B0aW9ucy5hY3RpdmUgPT0gbnVsbCAmJiBvcHRpb25zLmNvb2tpZSApIHsKCQkJCWFjdGl2ZSA9IHBhcnNlSW50KCB0aGlzLl9jb29raWUoKSwgMTAgKTsKCQkJCWlmICggYWN0aXZlID09PSAtMSApIHsKCQkJCQlhY3RpdmUgPSBmYWxzZTsKCQkJCX0KCQkJCW9wdGlvbnMuYWN0aXZlID0gYWN0aXZlOwoJCQl9CgkJCXRoaXMuX3N1cGVyKCk7CgkJfSwKCQlfY29va2llOiBmdW5jdGlvbiggYWN0aXZlICkgewoJCQl2YXIgY29va2llID0gWyB0aGlzLmNvb2tpZSB8fAoJCQkJKCB0aGlzLmNvb2tpZSA9IHRoaXMub3B0aW9ucy5jb29raWUubmFtZSB8fCAidWktdGFicy0iICsgKCsrbGlzdElkKSApIF07CgkJCWlmICggYXJndW1lbnRzLmxlbmd0aCApIHsKCQkJCWNvb2tpZS5wdXNoKCBhY3RpdmUgPT09IGZhbHNlID8gLTEgOiBhY3RpdmUgKTsKCQkJCWNvb2tpZS5wdXNoKCB0aGlzLm9wdGlvbnMuY29va2llICk7CgkJCX0KCQkJcmV0dXJuICQuY29va2llLmFwcGx5KCBudWxsLCBjb29raWUgKTsKCQl9LAoJCV9yZWZyZXNoOiBmdW5jdGlvbigpIHsKCQkJdGhpcy5fc3VwZXIoKTsKCQkJaWYgKCB0aGlzLm9wdGlvbnMuY29va2llICkgewoJCQkJdGhpcy5fY29va2llKCB0aGlzLm9wdGlvbnMuYWN0aXZlLCB0aGlzLm9wdGlvbnMuY29va2llICk7CgkJCX0KCQl9LAoJCV9ldmVudEhhbmRsZXI6IGZ1bmN0aW9uKCkgewoJCQl0aGlzLl9zdXBlckFwcGx5KCBhcmd1bWVudHMgKTsKCQkJaWYgKCB0aGlzLm9wdGlvbnMuY29va2llICkgewoJCQkJdGhpcy5fY29va2llKCB0aGlzLm9wdGlvbnMuYWN0aXZlLCB0aGlzLm9wdGlvbnMuY29va2llICk7CgkJCX0KCQl9LAoJCV9kZXN0cm95OiBmdW5jdGlvbigpIHsKCQkJdGhpcy5fc3VwZXIoKTsKCQkJaWYgKCB0aGlzLm9wdGlvbnMuY29va2llICkgewoJCQkJdGhpcy5fY29va2llKCBudWxsLCB0aGlzLm9wdGlvbnMuY29va2llICk7CgkJCX0KCQl9Cgl9KTsKCgl9KSgpOwoKCS8vIGxvYWQgZXZlbnQKCSQud2lkZ2V0KCAidWkudGFicyIsICQudWkudGFicywgewoJCV90cmlnZ2VyOiBmdW5jdGlvbiggdHlwZSwgZXZlbnQsIGRhdGEgKSB7CgkJCXZhciBfZGF0YSA9ICQuZXh0ZW5kKCB7fSwgZGF0YSApOwoJCQlpZiAoIHR5cGUgPT09ICJsb2FkIiApIHsKCQkJCV9kYXRhLnBhbmVsID0gX2RhdGEucGFuZWxbIDAgXTsKCQkJCV9kYXRhLnRhYiA9IF9kYXRhLnRhYi5maW5kKCAiLnVpLXRhYnMtYW5jaG9yIiApWyAwIF07CgkJCX0KCQkJcmV0dXJuIHRoaXMuX3N1cGVyKCB0eXBlLCBldmVudCwgX2RhdGEgKTsKCQl9Cgl9KTsKCgkvLyBmeCBvcHRpb24KCS8vIFRoZSBuZXcgYW5pbWF0aW9uIG9wdGlvbnMgKHNob3csIGhpZGUpIGNvbmZsaWN0IHdpdGggdGhlIG9sZCBzaG93IGNhbGxiYWNrLgoJLy8gVGhlIG9sZCBmeCBvcHRpb24gd2lucyBvdmVyIHNob3cvaGlkZSBhbnl3YXkgKGFsd2F5cyBmYXZvciBiYWNrLWNvbXBhdCkuCgkvLyBJZiBhIHVzZXIgd2FudHMgdG8gdXNlIHRoZSBuZXcgYW5pbWF0aW9uIEFQSSwgdGhleSBtdXN0IGdpdmUgdXAgdGhlIG9sZCBBUEkuCgkkLndpZGdldCggInVpLnRhYnMiLCAkLnVpLnRhYnMsIHsKCQlvcHRpb25zOiB7CgkJCWZ4OiBudWxsIC8vIGUuZy4geyBoZWlnaHQ6ICJ0b2dnbGUiLCBvcGFjaXR5OiAidG9nZ2xlIiwgZHVyYXRpb246IDIwMCB9CgkJfSwKCgkJX2dldEZ4OiBmdW5jdGlvbigpIHsKCQkJdmFyIGhpZGUsIHNob3csCgkJCQlmeCA9IHRoaXMub3B0aW9ucy5meDsKCgkJCWlmICggZnggKSB7CgkJCQlpZiAoICQuaXNBcnJheSggZnggKSApIHsKCQkJCQloaWRlID0gZnhbIDAgXTsKCQkJCQlzaG93ID0gZnhbIDEgXTsKCQkJCX0gZWxzZSB7CgkJCQkJaGlkZSA9IHNob3cgPSBmeDsKCQkJCX0KCQkJfQoKCQkJcmV0dXJuIGZ4ID8geyBzaG93OiBzaG93LCBoaWRlOiBoaWRlIH0gOiBudWxsOwoJCX0sCgoJCV90b2dnbGU6IGZ1bmN0aW9uKCBldmVudCwgZXZlbnREYXRhICkgewoJCQl2YXIgdGhhdCA9IHRoaXMsCgkJCQl0b1Nob3cgPSBldmVudERhdGEubmV3UGFuZWwsCgkJCQl0b0hpZGUgPSBldmVudERhdGEub2xkUGFuZWwsCgkJCQlmeCA9IHRoaXMuX2dldEZ4KCk7CgoJCQlpZiAoICFmeCApIHsKCQkJCXJldHVybiB0aGlzLl9zdXBlciggZXZlbnQsIGV2ZW50RGF0YSApOwoJCQl9CgoJCQl0aGF0LnJ1bm5pbmcgPSB0cnVlOwoKCQkJZnVuY3Rpb24gY29tcGxldGUoKSB7CgkJCQl0aGF0LnJ1bm5pbmcgPSBmYWxzZTsKCQkJCXRoYXQuX3RyaWdnZXIoICJhY3RpdmF0ZSIsIGV2ZW50LCBldmVudERhdGEgKTsKCQkJfQoKCQkJZnVuY3Rpb24gc2hvdygpIHsKCQkJCWV2ZW50RGF0YS5uZXdUYWIuY2xvc2VzdCggImxpIiApLmFkZENsYXNzKCAidWktdGFicy1hY3RpdmUgdWktc3RhdGUtYWN0aXZlIiApOwoKCQkJCWlmICggdG9TaG93Lmxlbmd0aCAmJiBmeC5zaG93ICkgewoJCQkJCXRvU2hvdwoJCQkJCQkuYW5pbWF0ZSggZnguc2hvdywgZnguc2hvdy5kdXJhdGlvbiwgZnVuY3Rpb24oKSB7CgkJCQkJCQljb21wbGV0ZSgpOwoJCQkJCQl9KTsKCQkJCX0gZWxzZSB7CgkJCQkJdG9TaG93LnNob3coKTsKCQkJCQljb21wbGV0ZSgpOwoJCQkJfQoJCQl9CgoJCQkvLyBzdGFydCBvdXQgYnkgaGlkaW5nLCB0aGVuIHNob3dpbmcsIHRoZW4gY29tcGxldGluZwoJCQlpZiAoIHRvSGlkZS5sZW5ndGggJiYgZnguaGlkZSApIHsKCQkJCXRvSGlkZS5hbmltYXRlKCBmeC5oaWRlLCBmeC5oaWRlLmR1cmF0aW9uLCBmdW5jdGlvbigpIHsKCQkJCQlldmVudERhdGEub2xkVGFiLmNsb3Nlc3QoICJsaSIgKS5yZW1vdmVDbGFzcyggInVpLXRhYnMtYWN0aXZlIHVpLXN0YXRlLWFjdGl2ZSIgKTsKCQkJCQlzaG93KCk7CgkJCQl9KTsKCQkJfSBlbHNlIHsKCQkJCWV2ZW50RGF0YS5vbGRUYWIuY2xvc2VzdCggImxpIiApLnJlbW92ZUNsYXNzKCAidWktdGFicy1hY3RpdmUgdWktc3RhdGUtYWN0aXZlIiApOwoJCQkJdG9IaWRlLmhpZGUoKTsKCQkJCXNob3coKTsKCQkJfQoJCX0KCX0pOwp9Cgp9KSggalF1ZXJ5ICk7CihmdW5jdGlvbiggJCApIHsKCnZhciBpbmNyZW1lbnRzID0gMDsKCmZ1bmN0aW9uIGFkZERlc2NyaWJlZEJ5KCBlbGVtLCBpZCApIHsKCXZhciBkZXNjcmliZWRieSA9IChlbGVtLmF0dHIoICJhcmlhLWRlc2NyaWJlZGJ5IiApIHx8ICIiKS5zcGxpdCggL1xzKy8gKTsKCWRlc2NyaWJlZGJ5LnB1c2goIGlkICk7CgllbGVtCgkJLmRhdGEoICJ1aS10b29sdGlwLWlkIiwgaWQgKQoJCS5hdHRyKCAiYXJpYS1kZXNjcmliZWRieSIsICQudHJpbSggZGVzY3JpYmVkYnkuam9pbiggIiAiICkgKSApOwp9CgpmdW5jdGlvbiByZW1vdmVEZXNjcmliZWRCeSggZWxlbSApIHsKCXZhciBpZCA9IGVsZW0uZGF0YSggInVpLXRvb2x0aXAtaWQiICksCgkJZGVzY3JpYmVkYnkgPSAoZWxlbS5hdHRyKCAiYXJpYS1kZXNjcmliZWRieSIgKSB8fCAiIikuc3BsaXQoIC9ccysvICksCgkJaW5kZXggPSAkLmluQXJyYXkoIGlkLCBkZXNjcmliZWRieSApOwoJaWYgKCBpbmRleCAhPT0gLTEgKSB7CgkJZGVzY3JpYmVkYnkuc3BsaWNlKCBpbmRleCwgMSApOwoJfQoKCWVsZW0ucmVtb3ZlRGF0YSggInVpLXRvb2x0aXAtaWQiICk7CglkZXNjcmliZWRieSA9ICQudHJpbSggZGVzY3JpYmVkYnkuam9pbiggIiAiICkgKTsKCWlmICggZGVzY3JpYmVkYnkgKSB7CgkJZWxlbS5hdHRyKCAiYXJpYS1kZXNjcmliZWRieSIsIGRlc2NyaWJlZGJ5ICk7Cgl9IGVsc2UgewoJCWVsZW0ucmVtb3ZlQXR0ciggImFyaWEtZGVzY3JpYmVkYnkiICk7Cgl9Cn0KCiQud2lkZ2V0KCAidWkudG9vbHRpcCIsIHsKCXZlcnNpb246ICIxLjkuMiIsCglvcHRpb25zOiB7CgkJY29udGVudDogZnVuY3Rpb24oKSB7CgkJCXJldHVybiAkKCB0aGlzICkuYXR0ciggInRpdGxlIiApOwoJCX0sCgkJaGlkZTogdHJ1ZSwKCQkvLyBEaXNhYmxlZCBlbGVtZW50cyBoYXZlIGluY29uc2lzdGVudCBiZWhhdmlvciBhY3Jvc3MgYnJvd3NlcnMgKCM4NjYxKQoJCWl0ZW1zOiAiW3RpdGxlXTpub3QoW2Rpc2FibGVkXSkiLAoJCXBvc2l0aW9uOiB7CgkJCW15OiAibGVmdCB0b3ArMTUiLAoJCQlhdDogImxlZnQgYm90dG9tIiwKCQkJY29sbGlzaW9uOiAiZmxpcGZpdCBmbGlwIgoJCX0sCgkJc2hvdzogdHJ1ZSwKCQl0b29sdGlwQ2xhc3M6IG51bGwsCgkJdHJhY2s6IGZhbHNlLAoKCQkvLyBjYWxsYmFja3MKCQljbG9zZTogbnVsbCwKCQlvcGVuOiBudWxsCgl9LAoKCV9jcmVhdGU6IGZ1bmN0aW9uKCkgewoJCXRoaXMuX29uKHsKCQkJbW91c2VvdmVyOiAib3BlbiIsCgkJCWZvY3VzaW46ICJvcGVuIgoJCX0pOwoKCQkvLyBJRHMgb2YgZ2VuZXJhdGVkIHRvb2x0aXBzLCBuZWVkZWQgZm9yIGRlc3Ryb3kKCQl0aGlzLnRvb2x0aXBzID0ge307CgkJLy8gSURzIG9mIHBhcmVudCB0b29sdGlwcyB3aGVyZSB3ZSByZW1vdmVkIHRoZSB0aXRsZSBhdHRyaWJ1dGUKCQl0aGlzLnBhcmVudHMgPSB7fTsKCgkJaWYgKCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgKSB7CgkJCXRoaXMuX2Rpc2FibGUoKTsKCQl9Cgl9LAoKCV9zZXRPcHRpb246IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkgewoJCXZhciB0aGF0ID0gdGhpczsKCgkJaWYgKCBrZXkgPT09ICJkaXNhYmxlZCIgKSB7CgkJCXRoaXNbIHZhbHVlID8gIl9kaXNhYmxlIiA6ICJfZW5hYmxlIiBdKCk7CgkJCXRoaXMub3B0aW9uc1sga2V5IF0gPSB2YWx1ZTsKCQkJLy8gZGlzYWJsZSBlbGVtZW50IHN0eWxlIGNoYW5nZXMKCQkJcmV0dXJuOwoJCX0KCgkJdGhpcy5fc3VwZXIoIGtleSwgdmFsdWUgKTsKCgkJaWYgKCBrZXkgPT09ICJjb250ZW50IiApIHsKCQkJJC5lYWNoKCB0aGlzLnRvb2x0aXBzLCBmdW5jdGlvbiggaWQsIGVsZW1lbnQgKSB7CgkJCQl0aGF0Ll91cGRhdGVDb250ZW50KCBlbGVtZW50ICk7CgkJCX0pOwoJCX0KCX0sCgoJX2Rpc2FibGU6IGZ1bmN0aW9uKCkgewoJCXZhciB0aGF0ID0gdGhpczsKCgkJLy8gY2xvc2Ugb3BlbiB0b29sdGlwcwoJCSQuZWFjaCggdGhpcy50b29sdGlwcywgZnVuY3Rpb24oIGlkLCBlbGVtZW50ICkgewoJCQl2YXIgZXZlbnQgPSAkLkV2ZW50KCAiYmx1ciIgKTsKCQkJZXZlbnQudGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldCA9IGVsZW1lbnRbMF07CgkJCXRoYXQuY2xvc2UoIGV2ZW50LCB0cnVlICk7CgkJfSk7CgoJCS8vIHJlbW92ZSB0aXRsZSBhdHRyaWJ1dGVzIHRvIHByZXZlbnQgbmF0aXZlIHRvb2x0aXBzCgkJdGhpcy5lbGVtZW50LmZpbmQoIHRoaXMub3B0aW9ucy5pdGVtcyApLmFuZFNlbGYoKS5lYWNoKGZ1bmN0aW9uKCkgewoJCQl2YXIgZWxlbWVudCA9ICQoIHRoaXMgKTsKCQkJaWYgKCBlbGVtZW50LmlzKCAiW3RpdGxlXSIgKSApIHsKCQkJCWVsZW1lbnQKCQkJCQkuZGF0YSggInVpLXRvb2x0aXAtdGl0bGUiLCBlbGVtZW50LmF0dHIoICJ0aXRsZSIgKSApCgkJCQkJLmF0dHIoICJ0aXRsZSIsICIiICk7CgkJCX0KCQl9KTsKCX0sCgoJX2VuYWJsZTogZnVuY3Rpb24oKSB7CgkJLy8gcmVzdG9yZSB0aXRsZSBhdHRyaWJ1dGVzCgkJdGhpcy5lbGVtZW50LmZpbmQoIHRoaXMub3B0aW9ucy5pdGVtcyApLmFuZFNlbGYoKS5lYWNoKGZ1bmN0aW9uKCkgewoJCQl2YXIgZWxlbWVudCA9ICQoIHRoaXMgKTsKCQkJaWYgKCBlbGVtZW50LmRhdGEoICJ1aS10b29sdGlwLXRpdGxlIiApICkgewoJCQkJZWxlbWVudC5hdHRyKCAidGl0bGUiLCBlbGVtZW50LmRhdGEoICJ1aS10b29sdGlwLXRpdGxlIiApICk7CgkJCX0KCQl9KTsKCX0sCgoJb3BlbjogZnVuY3Rpb24oIGV2ZW50ICkgewoJCXZhciB0aGF0ID0gdGhpcywKCQkJdGFyZ2V0ID0gJCggZXZlbnQgPyBldmVudC50YXJnZXQgOiB0aGlzLmVsZW1lbnQgKQoJCQkJLy8gd2UgbmVlZCBjbG9zZXN0IGhlcmUgZHVlIHRvIG1vdXNlb3ZlciBidWJibGluZywKCQkJCS8vIGJ1dCBhbHdheXMgcG9pbnRpbmcgYXQgdGhlIHNhbWUgZXZlbnQgdGFyZ2V0CgkJCQkuY2xvc2VzdCggdGhpcy5vcHRpb25zLml0ZW1zICk7CgoJCS8vIE5vIGVsZW1lbnQgdG8gc2hvdyBhIHRvb2x0aXAgZm9yIG9yIHRoZSB0b29sdGlwIGlzIGFscmVhZHkgb3BlbgoJCWlmICggIXRhcmdldC5sZW5ndGggfHwgdGFyZ2V0LmRhdGEoICJ1aS10b29sdGlwLWlkIiApICkgewoJCQlyZXR1cm47CgkJfQoKCQlpZiAoIHRhcmdldC5hdHRyKCAidGl0bGUiICkgKSB7CgkJCXRhcmdldC5kYXRhKCAidWktdG9vbHRpcC10aXRsZSIsIHRhcmdldC5hdHRyKCAidGl0bGUiICkgKTsKCQl9CgoJCXRhcmdldC5kYXRhKCAidWktdG9vbHRpcC1vcGVuIiwgdHJ1ZSApOwoKCQkvLyBraWxsIHBhcmVudCB0b29sdGlwcywgY3VzdG9tIG9yIG5hdGl2ZSwgZm9yIGhvdmVyCgkJaWYgKCBldmVudCAmJiBldmVudC50eXBlID09PSAibW91c2VvdmVyIiApIHsKCQkJdGFyZ2V0LnBhcmVudHMoKS5lYWNoKGZ1bmN0aW9uKCkgewoJCQkJdmFyIHBhcmVudCA9ICQoIHRoaXMgKSwKCQkJCQlibHVyRXZlbnQ7CgkJCQlpZiAoIHBhcmVudC5kYXRhKCAidWktdG9vbHRpcC1vcGVuIiApICkgewoJCQkJCWJsdXJFdmVudCA9ICQuRXZlbnQoICJibHVyIiApOwoJCQkJCWJsdXJFdmVudC50YXJnZXQgPSBibHVyRXZlbnQuY3VycmVudFRhcmdldCA9IHRoaXM7CgkJCQkJdGhhdC5jbG9zZSggYmx1ckV2ZW50LCB0cnVlICk7CgkJCQl9CgkJCQlpZiAoIHBhcmVudC5hdHRyKCAidGl0bGUiICkgKSB7CgkJCQkJcGFyZW50LnVuaXF1ZUlkKCk7CgkJCQkJdGhhdC5wYXJlbnRzWyB0aGlzLmlkIF0gPSB7CgkJCQkJCWVsZW1lbnQ6IHRoaXMsCgkJCQkJCXRpdGxlOiBwYXJlbnQuYXR0ciggInRpdGxlIiApCgkJCQkJfTsKCQkJCQlwYXJlbnQuYXR0ciggInRpdGxlIiwgIiIgKTsKCQkJCX0KCQkJfSk7CgkJfQoKCQl0aGlzLl91cGRhdGVDb250ZW50KCB0YXJnZXQsIGV2ZW50ICk7Cgl9LAoKCV91cGRhdGVDb250ZW50OiBmdW5jdGlvbiggdGFyZ2V0LCBldmVudCApIHsKCQl2YXIgY29udGVudCwKCQkJY29udGVudE9wdGlvbiA9IHRoaXMub3B0aW9ucy5jb250ZW50LAoJCQl0aGF0ID0gdGhpcywKCQkJZXZlbnRUeXBlID0gZXZlbnQgPyBldmVudC50eXBlIDogbnVsbDsKCgkJaWYgKCB0eXBlb2YgY29udGVudE9wdGlvbiA9PT0gInN0cmluZyIgKSB7CgkJCXJldHVybiB0aGlzLl9vcGVuKCBldmVudCwgdGFyZ2V0LCBjb250ZW50T3B0aW9uICk7CgkJfQoKCQljb250ZW50ID0gY29udGVudE9wdGlvbi5jYWxsKCB0YXJnZXRbMF0sIGZ1bmN0aW9uKCByZXNwb25zZSApIHsKCQkJLy8gaWdub3JlIGFzeW5jIHJlc3BvbnNlIGlmIHRvb2x0aXAgd2FzIGNsb3NlZCBhbHJlYWR5CgkJCWlmICggIXRhcmdldC5kYXRhKCAidWktdG9vbHRpcC1vcGVuIiApICkgewoJCQkJcmV0dXJuOwoJCQl9CgkJCS8vIElFIG1heSBpbnN0YW50bHkgc2VydmUgYSBjYWNoZWQgcmVzcG9uc2UgZm9yIGFqYXggcmVxdWVzdHMKCQkJLy8gZGVsYXkgdGhpcyBjYWxsIHRvIF9vcGVuIHNvIHRoZSBvdGhlciBjYWxsIHRvIF9vcGVuIHJ1bnMgZmlyc3QKCQkJdGhhdC5fZGVsYXkoZnVuY3Rpb24oKSB7CgkJCQkvLyBqUXVlcnkgY3JlYXRlcyBhIHNwZWNpYWwgZXZlbnQgZm9yIGZvY3VzaW4gd2hlbiBpdCBkb2Vzbid0CgkJCQkvLyBleGlzdCBuYXRpdmVseS4gVG8gaW1wcm92ZSBwZXJmb3JtYW5jZSwgdGhlIG5hdGl2ZSBldmVudAoJCQkJLy8gb2JqZWN0IGlzIHJldXNlZCBhbmQgdGhlIHR5cGUgaXMgY2hhbmdlZC4gVGhlcmVmb3JlLCB3ZSBjYW4ndAoJCQkJLy8gcmVseSBvbiB0aGUgdHlwZSBiZWluZyBjb3JyZWN0IGFmdGVyIHRoZSBldmVudCBmaW5pc2hlZAoJCQkJLy8gYnViYmxpbmcsIHNvIHdlIHNldCBpdCBiYWNrIHRvIHRoZSBwcmV2aW91cyB2YWx1ZS4gKCM4NzQwKQoJCQkJaWYgKCBldmVudCApIHsKCQkJCQlldmVudC50eXBlID0gZXZlbnRUeXBlOwoJCQkJfQoJCQkJdGhpcy5fb3BlbiggZXZlbnQsIHRhcmdldCwgcmVzcG9uc2UgKTsKCQkJfSk7CgkJfSk7CgkJaWYgKCBjb250ZW50ICkgewoJCQl0aGlzLl9vcGVuKCBldmVudCwgdGFyZ2V0LCBjb250ZW50ICk7CgkJfQoJfSwKCglfb3BlbjogZnVuY3Rpb24oIGV2ZW50LCB0YXJnZXQsIGNvbnRlbnQgKSB7CgkJdmFyIHRvb2x0aXAsIGV2ZW50cywgZGVsYXllZFNob3csCgkJCXBvc2l0aW9uT3B0aW9uID0gJC5leHRlbmQoIHt9LCB0aGlzLm9wdGlvbnMucG9zaXRpb24gKTsKCgkJaWYgKCAhY29udGVudCApIHsKCQkJcmV0dXJuOwoJCX0KCgkJLy8gQ29udGVudCBjYW4gYmUgdXBkYXRlZCBtdWx0aXBsZSB0aW1lcy4gSWYgdGhlIHRvb2x0aXAgYWxyZWFkeQoJCS8vIGV4aXN0cywgdGhlbiBqdXN0IHVwZGF0ZSB0aGUgY29udGVudCBhbmQgYmFpbC4KCQl0b29sdGlwID0gdGhpcy5fZmluZCggdGFyZ2V0ICk7CgkJaWYgKCB0b29sdGlwLmxlbmd0aCApIHsKCQkJdG9vbHRpcC5maW5kKCAiLnVpLXRvb2x0aXAtY29udGVudCIgKS5odG1sKCBjb250ZW50ICk7CgkJCXJldHVybjsKCQl9CgoJCS8vIGlmIHdlIGhhdmUgYSB0aXRsZSwgY2xlYXIgaXQgdG8gcHJldmVudCB0aGUgbmF0aXZlIHRvb2x0aXAKCQkvLyB3ZSBoYXZlIHRvIGNoZWNrIGZpcnN0IHRvIGF2b2lkIGRlZmluaW5nIGEgdGl0bGUgaWYgbm9uZSBleGlzdHMKCQkvLyAod2UgZG9uJ3Qgd2FudCB0byBjYXVzZSBhbiBlbGVtZW50IHRvIHN0YXJ0IG1hdGNoaW5nIFt0aXRsZV0pCgkJLy8KCQkvLyBXZSB1c2UgcmVtb3ZlQXR0ciBvbmx5IGZvciBrZXkgZXZlbnRzLCB0byBhbGxvdyBJRSB0byBleHBvcnQgdGhlIGNvcnJlY3QKCQkvLyBhY2Nlc3NpYmxlIGF0dHJpYnV0ZXMuIEZvciBtb3VzZSBldmVudHMsIHNldCB0byBlbXB0eSBzdHJpbmcgdG8gYXZvaWQKCQkvLyBuYXRpdmUgdG9vbHRpcCBzaG93aW5nIHVwIChoYXBwZW5zIG9ubHkgd2hlbiByZW1vdmluZyBpbnNpZGUgbW91c2VvdmVyKS4KCQlpZiAoIHRhcmdldC5pcyggIlt0aXRsZV0iICkgKSB7CgkJCWlmICggZXZlbnQgJiYgZXZlbnQudHlwZSA9PT0gIm1vdXNlb3ZlciIgKSB7CgkJCQl0YXJnZXQuYXR0ciggInRpdGxlIiwgIiIgKTsKCQkJfSBlbHNlIHsKCQkJCXRhcmdldC5yZW1vdmVBdHRyKCAidGl0bGUiICk7CgkJCX0KCQl9CgoJCXRvb2x0aXAgPSB0aGlzLl90b29sdGlwKCB0YXJnZXQgKTsKCQlhZGREZXNjcmliZWRCeSggdGFyZ2V0LCB0b29sdGlwLmF0dHIoICJpZCIgKSApOwoJCXRvb2x0aXAuZmluZCggIi51aS10b29sdGlwLWNvbnRlbnQiICkuaHRtbCggY29udGVudCApOwoKCQlmdW5jdGlvbiBwb3NpdGlvbiggZXZlbnQgKSB7CgkJCXBvc2l0aW9uT3B0aW9uLm9mID0gZXZlbnQ7CgkJCWlmICggdG9vbHRpcC5pcyggIjpoaWRkZW4iICkgKSB7CgkJCQlyZXR1cm47CgkJCX0KCQkJdG9vbHRpcC5wb3NpdGlvbiggcG9zaXRpb25PcHRpb24gKTsKCQl9CgkJaWYgKCB0aGlzLm9wdGlvbnMudHJhY2sgJiYgZXZlbnQgJiYgL15tb3VzZS8udGVzdCggZXZlbnQudHlwZSApICkgewoJCQl0aGlzLl9vbiggdGhpcy5kb2N1bWVudCwgewoJCQkJbW91c2Vtb3ZlOiBwb3NpdGlvbgoJCQl9KTsKCQkJLy8gdHJpZ2dlciBvbmNlIHRvIG92ZXJyaWRlIGVsZW1lbnQtcmVsYXRpdmUgcG9zaXRpb25pbmcKCQkJcG9zaXRpb24oIGV2ZW50ICk7CgkJfSBlbHNlIHsKCQkJdG9vbHRpcC5wb3NpdGlvbiggJC5leHRlbmQoewoJCQkJb2Y6IHRhcmdldAoJCQl9LCB0aGlzLm9wdGlvbnMucG9zaXRpb24gKSApOwoJCX0KCgkJdG9vbHRpcC5oaWRlKCk7CgoJCXRoaXMuX3Nob3coIHRvb2x0aXAsIHRoaXMub3B0aW9ucy5zaG93ICk7CgkJLy8gSGFuZGxlIHRyYWNraW5nIHRvb2x0aXBzIHRoYXQgYXJlIHNob3duIHdpdGggYSBkZWxheSAoIzg2NDQpLiBBcyBzb29uCgkJLy8gYXMgdGhlIHRvb2x0aXAgaXMgdmlzaWJsZSwgcG9zaXRpb24gdGhlIHRvb2x0aXAgdXNpbmcgdGhlIG1vc3QgcmVjZW50CgkJLy8gZXZlbnQuCgkJaWYgKCB0aGlzLm9wdGlvbnMuc2hvdyAmJiB0aGlzLm9wdGlvbnMuc2hvdy5kZWxheSApIHsKCQkJZGVsYXllZFNob3cgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHsKCQkJCWlmICggdG9vbHRpcC5pcyggIjp2aXNpYmxlIiApICkgewoJCQkJCXBvc2l0aW9uKCBwb3NpdGlvbk9wdGlvbi5vZiApOwoJCQkJCWNsZWFySW50ZXJ2YWwoIGRlbGF5ZWRTaG93ICk7CgkJCQl9CgkJCX0sICQuZnguaW50ZXJ2YWwgKTsKCQl9CgoJCXRoaXMuX3RyaWdnZXIoICJvcGVuIiwgZXZlbnQsIHsgdG9vbHRpcDogdG9vbHRpcCB9ICk7CgoJCWV2ZW50cyA9IHsKCQkJa2V5dXA6IGZ1bmN0aW9uKCBldmVudCApIHsKCQkJCWlmICggZXZlbnQua2V5Q29kZSA9PT0gJC51aS5rZXlDb2RlLkVTQ0FQRSApIHsKCQkJCQl2YXIgZmFrZUV2ZW50ID0gJC5FdmVudChldmVudCk7CgkJCQkJZmFrZUV2ZW50LmN1cnJlbnRUYXJnZXQgPSB0YXJnZXRbMF07CgkJCQkJdGhpcy5jbG9zZSggZmFrZUV2ZW50LCB0cnVlICk7CgkJCQl9CgkJCX0sCgkJCXJlbW92ZTogZnVuY3Rpb24oKSB7CgkJCQl0aGlzLl9yZW1vdmVUb29sdGlwKCB0b29sdGlwICk7CgkJCX0KCQl9OwoJCWlmICggIWV2ZW50IHx8IGV2ZW50LnR5cGUgPT09ICJtb3VzZW92ZXIiICkgewoJCQlldmVudHMubW91c2VsZWF2ZSA9ICJjbG9zZSI7CgkJfQoJCWlmICggIWV2ZW50IHx8IGV2ZW50LnR5cGUgPT09ICJmb2N1c2luIiApIHsKCQkJZXZlbnRzLmZvY3Vzb3V0ID0gImNsb3NlIjsKCQl9CgkJdGhpcy5fb24oIHRydWUsIHRhcmdldCwgZXZlbnRzICk7Cgl9LAoKCWNsb3NlOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJdmFyIHRoYXQgPSB0aGlzLAoJCQl0YXJnZXQgPSAkKCBldmVudCA/IGV2ZW50LmN1cnJlbnRUYXJnZXQgOiB0aGlzLmVsZW1lbnQgKSwKCQkJdG9vbHRpcCA9IHRoaXMuX2ZpbmQoIHRhcmdldCApOwoKCQkvLyBkaXNhYmxpbmcgY2xvc2VzIHRoZSB0b29sdGlwLCBzbyB3ZSBuZWVkIHRvIHRyYWNrIHdoZW4gd2UncmUgY2xvc2luZwoJCS8vIHRvIGF2b2lkIGFuIGluZmluaXRlIGxvb3AgaW4gY2FzZSB0aGUgdG9vbHRpcCBiZWNvbWVzIGRpc2FibGVkIG9uIGNsb3NlCgkJaWYgKCB0aGlzLmNsb3NpbmcgKSB7CgkJCXJldHVybjsKCQl9CgoJCS8vIG9ubHkgc2V0IHRpdGxlIGlmIHdlIGhhZCBvbmUgYmVmb3JlIChzZWUgY29tbWVudCBpbiBfb3BlbigpKQoJCWlmICggdGFyZ2V0LmRhdGEoICJ1aS10b29sdGlwLXRpdGxlIiApICkgewoJCQl0YXJnZXQuYXR0ciggInRpdGxlIiwgdGFyZ2V0LmRhdGEoICJ1aS10b29sdGlwLXRpdGxlIiApICk7CgkJfQoKCQlyZW1vdmVEZXNjcmliZWRCeSggdGFyZ2V0ICk7CgoJCXRvb2x0aXAuc3RvcCggdHJ1ZSApOwoJCXRoaXMuX2hpZGUoIHRvb2x0aXAsIHRoaXMub3B0aW9ucy5oaWRlLCBmdW5jdGlvbigpIHsKCQkJdGhhdC5fcmVtb3ZlVG9vbHRpcCggJCggdGhpcyApICk7CgkJfSk7CgoJCXRhcmdldC5yZW1vdmVEYXRhKCAidWktdG9vbHRpcC1vcGVuIiApOwoJCXRoaXMuX29mZiggdGFyZ2V0LCAibW91c2VsZWF2ZSBmb2N1c291dCBrZXl1cCIgKTsKCQkvLyBSZW1vdmUgJ3JlbW92ZScgYmluZGluZyBvbmx5IG9uIGRlbGVnYXRlZCB0YXJnZXRzCgkJaWYgKCB0YXJnZXRbMF0gIT09IHRoaXMuZWxlbWVudFswXSApIHsKCQkJdGhpcy5fb2ZmKCB0YXJnZXQsICJyZW1vdmUiICk7CgkJfQoJCXRoaXMuX29mZiggdGhpcy5kb2N1bWVudCwgIm1vdXNlbW92ZSIgKTsKCgkJaWYgKCBldmVudCAmJiBldmVudC50eXBlID09PSAibW91c2VsZWF2ZSIgKSB7CgkJCSQuZWFjaCggdGhpcy5wYXJlbnRzLCBmdW5jdGlvbiggaWQsIHBhcmVudCApIHsKCQkJCSQoIHBhcmVudC5lbGVtZW50ICkuYXR0ciggInRpdGxlIiwgcGFyZW50LnRpdGxlICk7CgkJCQlkZWxldGUgdGhhdC5wYXJlbnRzWyBpZCBdOwoJCQl9KTsKCQl9CgoJCXRoaXMuY2xvc2luZyA9IHRydWU7CgkJdGhpcy5fdHJpZ2dlciggImNsb3NlIiwgZXZlbnQsIHsgdG9vbHRpcDogdG9vbHRpcCB9ICk7CgkJdGhpcy5jbG9zaW5nID0gZmFsc2U7Cgl9LAoKCV90b29sdGlwOiBmdW5jdGlvbiggZWxlbWVudCApIHsKCQl2YXIgaWQgPSAidWktdG9vbHRpcC0iICsgaW5jcmVtZW50cysrLAoJCQl0b29sdGlwID0gJCggIjxkaXY+IiApCgkJCQkuYXR0cih7CgkJCQkJaWQ6IGlkLAoJCQkJCXJvbGU6ICJ0b29sdGlwIgoJCQkJfSkKCQkJCS5hZGRDbGFzcyggInVpLXRvb2x0aXAgdWktd2lkZ2V0IHVpLWNvcm5lci1hbGwgdWktd2lkZ2V0LWNvbnRlbnQgIiArCgkJCQkJKCB0aGlzLm9wdGlvbnMudG9vbHRpcENsYXNzIHx8ICIiICkgKTsKCQkkKCAiPGRpdj4iICkKCQkJLmFkZENsYXNzKCAidWktdG9vbHRpcC1jb250ZW50IiApCgkJCS5hcHBlbmRUbyggdG9vbHRpcCApOwoJCXRvb2x0aXAuYXBwZW5kVG8oIHRoaXMuZG9jdW1lbnRbMF0uYm9keSApOwoJCWlmICggJC5mbi5iZ2lmcmFtZSApIHsKCQkJdG9vbHRpcC5iZ2lmcmFtZSgpOwoJCX0KCQl0aGlzLnRvb2x0aXBzWyBpZCBdID0gZWxlbWVudDsKCQlyZXR1cm4gdG9vbHRpcDsKCX0sCgoJX2ZpbmQ6IGZ1bmN0aW9uKCB0YXJnZXQgKSB7CgkJdmFyIGlkID0gdGFyZ2V0LmRhdGEoICJ1aS10b29sdGlwLWlkIiApOwoJCXJldHVybiBpZCA/ICQoICIjIiArIGlkICkgOiAkKCk7Cgl9LAoKCV9yZW1vdmVUb29sdGlwOiBmdW5jdGlvbiggdG9vbHRpcCApIHsKCQl0b29sdGlwLnJlbW92ZSgpOwoJCWRlbGV0ZSB0aGlzLnRvb2x0aXBzWyB0b29sdGlwLmF0dHIoICJpZCIgKSBdOwoJfSwKCglfZGVzdHJveTogZnVuY3Rpb24oKSB7CgkJdmFyIHRoYXQgPSB0aGlzOwoKCQkvLyBjbG9zZSBvcGVuIHRvb2x0aXBzCgkJJC5lYWNoKCB0aGlzLnRvb2x0aXBzLCBmdW5jdGlvbiggaWQsIGVsZW1lbnQgKSB7CgkJCS8vIERlbGVnYXRlIHRvIGNsb3NlIG1ldGhvZCB0byBoYW5kbGUgY29tbW9uIGNsZWFudXAKCQkJdmFyIGV2ZW50ID0gJC5FdmVudCggImJsdXIiICk7CgkJCWV2ZW50LnRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgPSBlbGVtZW50WzBdOwoJCQl0aGF0LmNsb3NlKCBldmVudCwgdHJ1ZSApOwoKCQkJLy8gUmVtb3ZlIGltbWVkaWF0ZWx5OyBkZXN0cm95aW5nIGFuIG9wZW4gdG9vbHRpcCBkb2Vzbid0IHVzZSB0aGUKCQkJLy8gaGlkZSBhbmltYXRpb24KCQkJJCggIiMiICsgaWQgKS5yZW1vdmUoKTsKCgkJCS8vIFJlc3RvcmUgdGhlIHRpdGxlCgkJCWlmICggZWxlbWVudC5kYXRhKCAidWktdG9vbHRpcC10aXRsZSIgKSApIHsKCQkJCWVsZW1lbnQuYXR0ciggInRpdGxlIiwgZWxlbWVudC5kYXRhKCAidWktdG9vbHRpcC10aXRsZSIgKSApOwoJCQkJZWxlbWVudC5yZW1vdmVEYXRhKCAidWktdG9vbHRpcC10aXRsZSIgKTsKCQkJfQoJCX0pOwoJfQp9KTsKCn0oIGpRdWVyeSApICk7CjsoalF1ZXJ5LmVmZmVjdHMgfHwgKGZ1bmN0aW9uKCQsIHVuZGVmaW5lZCkgewoKdmFyIGJhY2tDb21wYXQgPSAkLnVpQmFja0NvbXBhdCAhPT0gZmFsc2UsCgkvLyBwcmVmaXggdXNlZCBmb3Igc3RvcmluZyBkYXRhIG9uIC5kYXRhKCkKCWRhdGFTcGFjZSA9ICJ1aS1lZmZlY3RzLSI7CgokLmVmZmVjdHMgPSB7CgllZmZlY3Q6IHt9Cn07CgovKiEKICogalF1ZXJ5IENvbG9yIEFuaW1hdGlvbnMgdjIuMC4wCiAqIGh0dHA6Ly9qcXVlcnkuY29tLwogKgogKiBDb3B5cmlnaHQgMjAxMiBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzCiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4KICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQogKgogKiBEYXRlOiBNb24gQXVnIDEzIDEzOjQxOjAyIDIwMTIgLTA1MDAKICovCihmdW5jdGlvbiggalF1ZXJ5LCB1bmRlZmluZWQgKSB7CgoJdmFyIHN0ZXBIb29rcyA9ICJiYWNrZ3JvdW5kQ29sb3IgYm9yZGVyQm90dG9tQ29sb3IgYm9yZGVyTGVmdENvbG9yIGJvcmRlclJpZ2h0Q29sb3IgYm9yZGVyVG9wQ29sb3IgY29sb3IgY29sdW1uUnVsZUNvbG9yIG91dGxpbmVDb2xvciB0ZXh0RGVjb3JhdGlvbkNvbG9yIHRleHRFbXBoYXNpc0NvbG9yIi5zcGxpdCgiICIpLAoKCS8vIHBsdXNlcXVhbHMgdGVzdCBmb3IgKz0gMTAwIC09IDEwMAoJcnBsdXNlcXVhbHMgPSAvXihbXC0rXSk9XHMqKFxkK1wuP1xkKikvLAoJLy8gYSBzZXQgb2YgUkUncyB0aGF0IGNhbiBtYXRjaCBzdHJpbmdzIGFuZCBnZW5lcmF0ZSBjb2xvciB0dXBsZXMuCglzdHJpbmdQYXJzZXJzID0gW3sKCQkJcmU6IC9yZ2JhP1woXHMqKFxkezEsM30pXHMqLFxzKihcZHsxLDN9KVxzKixccyooXGR7MSwzfSlccyooPzosXHMqKFxkKyg/OlwuXGQrKT8pXHMqKT9cKS8sCgkJCXBhcnNlOiBmdW5jdGlvbiggZXhlY1Jlc3VsdCApIHsKCQkJCXJldHVybiBbCgkJCQkJZXhlY1Jlc3VsdFsgMSBdLAoJCQkJCWV4ZWNSZXN1bHRbIDIgXSwKCQkJCQlleGVjUmVzdWx0WyAzIF0sCgkJCQkJZXhlY1Jlc3VsdFsgNCBdCgkJCQldOwoJCQl9CgkJfSwgewoJCQlyZTogL3JnYmE/XChccyooXGQrKD86XC5cZCspPylcJVxzKixccyooXGQrKD86XC5cZCspPylcJVxzKixccyooXGQrKD86XC5cZCspPylcJVxzKig/OixccyooXGQrKD86XC5cZCspPylccyopP1wpLywKCQkJcGFyc2U6IGZ1bmN0aW9uKCBleGVjUmVzdWx0ICkgewoJCQkJcmV0dXJuIFsKCQkJCQlleGVjUmVzdWx0WyAxIF0gKiAyLjU1LAoJCQkJCWV4ZWNSZXN1bHRbIDIgXSAqIDIuNTUsCgkJCQkJZXhlY1Jlc3VsdFsgMyBdICogMi41NSwKCQkJCQlleGVjUmVzdWx0WyA0IF0KCQkJCV07CgkJCX0KCQl9LCB7CgkJCS8vIHRoaXMgcmVnZXggaWdub3JlcyBBLUYgYmVjYXVzZSBpdCdzIGNvbXBhcmVkIGFnYWluc3QgYW4gYWxyZWFkeSBsb3dlcmNhc2VkIHN0cmluZwoJCQlyZTogLyMoW2EtZjAtOV17Mn0pKFthLWYwLTldezJ9KShbYS1mMC05XXsyfSkvLAoJCQlwYXJzZTogZnVuY3Rpb24oIGV4ZWNSZXN1bHQgKSB7CgkJCQlyZXR1cm4gWwoJCQkJCXBhcnNlSW50KCBleGVjUmVzdWx0WyAxIF0sIDE2ICksCgkJCQkJcGFyc2VJbnQoIGV4ZWNSZXN1bHRbIDIgXSwgMTYgKSwKCQkJCQlwYXJzZUludCggZXhlY1Jlc3VsdFsgMyBdLCAxNiApCgkJCQldOwoJCQl9CgkJfSwgewoJCQkvLyB0aGlzIHJlZ2V4IGlnbm9yZXMgQS1GIGJlY2F1c2UgaXQncyBjb21wYXJlZCBhZ2FpbnN0IGFuIGFscmVhZHkgbG93ZXJjYXNlZCBzdHJpbmcKCQkJcmU6IC8jKFthLWYwLTldKShbYS1mMC05XSkoW2EtZjAtOV0pLywKCQkJcGFyc2U6IGZ1bmN0aW9uKCBleGVjUmVzdWx0ICkgewoJCQkJcmV0dXJuIFsKCQkJCQlwYXJzZUludCggZXhlY1Jlc3VsdFsgMSBdICsgZXhlY1Jlc3VsdFsgMSBdLCAxNiApLAoJCQkJCXBhcnNlSW50KCBleGVjUmVzdWx0WyAyIF0gKyBleGVjUmVzdWx0WyAyIF0sIDE2ICksCgkJCQkJcGFyc2VJbnQoIGV4ZWNSZXN1bHRbIDMgXSArIGV4ZWNSZXN1bHRbIDMgXSwgMTYgKQoJCQkJXTsKCQkJfQoJCX0sIHsKCQkJcmU6IC9oc2xhP1woXHMqKFxkKyg/OlwuXGQrKT8pXHMqLFxzKihcZCsoPzpcLlxkKyk/KVwlXHMqLFxzKihcZCsoPzpcLlxkKyk/KVwlXHMqKD86LFxzKihcZCsoPzpcLlxkKyk/KVxzKik/XCkvLAoJCQlzcGFjZTogImhzbGEiLAoJCQlwYXJzZTogZnVuY3Rpb24oIGV4ZWNSZXN1bHQgKSB7CgkJCQlyZXR1cm4gWwoJCQkJCWV4ZWNSZXN1bHRbIDEgXSwKCQkJCQlleGVjUmVzdWx0WyAyIF0gLyAxMDAsCgkJCQkJZXhlY1Jlc3VsdFsgMyBdIC8gMTAwLAoJCQkJCWV4ZWNSZXN1bHRbIDQgXQoJCQkJXTsKCQkJfQoJCX1dLAoKCS8vIGpRdWVyeS5Db2xvciggKQoJY29sb3IgPSBqUXVlcnkuQ29sb3IgPSBmdW5jdGlvbiggY29sb3IsIGdyZWVuLCBibHVlLCBhbHBoYSApIHsKCQlyZXR1cm4gbmV3IGpRdWVyeS5Db2xvci5mbi5wYXJzZSggY29sb3IsIGdyZWVuLCBibHVlLCBhbHBoYSApOwoJfSwKCXNwYWNlcyA9IHsKCQlyZ2JhOiB7CgkJCXByb3BzOiB7CgkJCQlyZWQ6IHsKCQkJCQlpZHg6IDAsCgkJCQkJdHlwZTogImJ5dGUiCgkJCQl9LAoJCQkJZ3JlZW46IHsKCQkJCQlpZHg6IDEsCgkJCQkJdHlwZTogImJ5dGUiCgkJCQl9LAoJCQkJYmx1ZTogewoJCQkJCWlkeDogMiwKCQkJCQl0eXBlOiAiYnl0ZSIKCQkJCX0KCQkJfQoJCX0sCgoJCWhzbGE6IHsKCQkJcHJvcHM6IHsKCQkJCWh1ZTogewoJCQkJCWlkeDogMCwKCQkJCQl0eXBlOiAiZGVncmVlcyIKCQkJCX0sCgkJCQlzYXR1cmF0aW9uOiB7CgkJCQkJaWR4OiAxLAoJCQkJCXR5cGU6ICJwZXJjZW50IgoJCQkJfSwKCQkJCWxpZ2h0bmVzczogewoJCQkJCWlkeDogMiwKCQkJCQl0eXBlOiAicGVyY2VudCIKCQkJCX0KCQkJfQoJCX0KCX0sCglwcm9wVHlwZXMgPSB7CgkJImJ5dGUiOiB7CgkJCWZsb29yOiB0cnVlLAoJCQltYXg6IDI1NQoJCX0sCgkJInBlcmNlbnQiOiB7CgkJCW1heDogMQoJCX0sCgkJImRlZ3JlZXMiOiB7CgkJCW1vZDogMzYwLAoJCQlmbG9vcjogdHJ1ZQoJCX0KCX0sCglzdXBwb3J0ID0gY29sb3Iuc3VwcG9ydCA9IHt9LAoKCS8vIGVsZW1lbnQgZm9yIHN1cHBvcnQgdGVzdHMKCXN1cHBvcnRFbGVtID0galF1ZXJ5KCAiPHA+IiApWyAwIF0sCgoJLy8gY29sb3JzID0galF1ZXJ5LkNvbG9yLm5hbWVzCgljb2xvcnMsCgoJLy8gbG9jYWwgYWxpYXNlcyBvZiBmdW5jdGlvbnMgY2FsbGVkIG9mdGVuCgllYWNoID0galF1ZXJ5LmVhY2g7CgovLyBkZXRlcm1pbmUgcmdiYSBzdXBwb3J0IGltbWVkaWF0ZWx5CnN1cHBvcnRFbGVtLnN0eWxlLmNzc1RleHQgPSAiYmFja2dyb3VuZC1jb2xvcjpyZ2JhKDEsMSwxLC41KSI7CnN1cHBvcnQucmdiYSA9IHN1cHBvcnRFbGVtLnN0eWxlLmJhY2tncm91bmRDb2xvci5pbmRleE9mKCAicmdiYSIgKSA+IC0xOwoKLy8gZGVmaW5lIGNhY2hlIG5hbWUgYW5kIGFscGhhIHByb3BlcnRpZXMKLy8gZm9yIHJnYmEgYW5kIGhzbGEgc3BhY2VzCmVhY2goIHNwYWNlcywgZnVuY3Rpb24oIHNwYWNlTmFtZSwgc3BhY2UgKSB7CglzcGFjZS5jYWNoZSA9ICJfIiArIHNwYWNlTmFtZTsKCXNwYWNlLnByb3BzLmFscGhhID0gewoJCWlkeDogMywKCQl0eXBlOiAicGVyY2VudCIsCgkJZGVmOiAxCgl9Owp9KTsKCmZ1bmN0aW9uIGNsYW1wKCB2YWx1ZSwgcHJvcCwgYWxsb3dFbXB0eSApIHsKCXZhciB0eXBlID0gcHJvcFR5cGVzWyBwcm9wLnR5cGUgXSB8fCB7fTsKCglpZiAoIHZhbHVlID09IG51bGwgKSB7CgkJcmV0dXJuIChhbGxvd0VtcHR5IHx8ICFwcm9wLmRlZikgPyBudWxsIDogcHJvcC5kZWY7Cgl9CgoJLy8gfn4gaXMgYW4gc2hvcnQgd2F5IG9mIGRvaW5nIGZsb29yIGZvciBwb3NpdGl2ZSBudW1iZXJzCgl2YWx1ZSA9IHR5cGUuZmxvb3IgPyB+fnZhbHVlIDogcGFyc2VGbG9hdCggdmFsdWUgKTsKCgkvLyBJRSB3aWxsIHBhc3MgaW4gZW1wdHkgc3RyaW5ncyBhcyB2YWx1ZSBmb3IgYWxwaGEsCgkvLyB3aGljaCB3aWxsIGhpdCB0aGlzIGNhc2UKCWlmICggaXNOYU4oIHZhbHVlICkgKSB7CgkJcmV0dXJuIHByb3AuZGVmOwoJfQoKCWlmICggdHlwZS5tb2QgKSB7CgkJLy8gd2UgYWRkIG1vZCBiZWZvcmUgbW9kZGluZyB0byBtYWtlIHN1cmUgdGhhdCBuZWdhdGl2ZXMgdmFsdWVzCgkJLy8gZ2V0IGNvbnZlcnRlZCBwcm9wZXJseTogLTEwIC0+IDM1MAoJCXJldHVybiAodmFsdWUgKyB0eXBlLm1vZCkgJSB0eXBlLm1vZDsKCX0KCgkvLyBmb3Igbm93IGFsbCBwcm9wZXJ0eSB0eXBlcyB3aXRob3V0IG1vZCBoYXZlIG1pbiBhbmQgbWF4CglyZXR1cm4gMCA+IHZhbHVlID8gMCA6IHR5cGUubWF4IDwgdmFsdWUgPyB0eXBlLm1heCA6IHZhbHVlOwp9CgpmdW5jdGlvbiBzdHJpbmdQYXJzZSggc3RyaW5nICkgewoJdmFyIGluc3QgPSBjb2xvcigpLAoJCXJnYmEgPSBpbnN0Ll9yZ2JhID0gW107CgoJc3RyaW5nID0gc3RyaW5nLnRvTG93ZXJDYXNlKCk7CgoJZWFjaCggc3RyaW5nUGFyc2VycywgZnVuY3Rpb24oIGksIHBhcnNlciApIHsKCQl2YXIgcGFyc2VkLAoJCQltYXRjaCA9IHBhcnNlci5yZS5leGVjKCBzdHJpbmcgKSwKCQkJdmFsdWVzID0gbWF0Y2ggJiYgcGFyc2VyLnBhcnNlKCBtYXRjaCApLAoJCQlzcGFjZU5hbWUgPSBwYXJzZXIuc3BhY2UgfHwgInJnYmEiOwoKCQlpZiAoIHZhbHVlcyApIHsKCQkJcGFyc2VkID0gaW5zdFsgc3BhY2VOYW1lIF0oIHZhbHVlcyApOwoKCQkJLy8gaWYgdGhpcyB3YXMgYW4gcmdiYSBwYXJzZSB0aGUgYXNzaWdubWVudCBtaWdodCBoYXBwZW4gdHdpY2UKCQkJLy8gb2ggd2VsbC4uLi4KCQkJaW5zdFsgc3BhY2VzWyBzcGFjZU5hbWUgXS5jYWNoZSBdID0gcGFyc2VkWyBzcGFjZXNbIHNwYWNlTmFtZSBdLmNhY2hlIF07CgkJCXJnYmEgPSBpbnN0Ll9yZ2JhID0gcGFyc2VkLl9yZ2JhOwoKCQkJLy8gZXhpdCBlYWNoKCBzdHJpbmdQYXJzZXJzICkgaGVyZSBiZWNhdXNlIHdlIG1hdGNoZWQKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCX0pOwoKCS8vIEZvdW5kIGEgc3RyaW5nUGFyc2VyIHRoYXQgaGFuZGxlZCBpdAoJaWYgKCByZ2JhLmxlbmd0aCApIHsKCgkJLy8gaWYgdGhpcyBjYW1lIGZyb20gYSBwYXJzZWQgc3RyaW5nLCBmb3JjZSAidHJhbnNwYXJlbnQiIHdoZW4gYWxwaGEgaXMgMAoJCS8vIGNocm9tZSwgKGFuZCBtYXliZSBvdGhlcnMpIHJldHVybiAidHJhbnNwYXJlbnQiIGFzIHJnYmEoMCwwLDAsMCkKCQlpZiAoIHJnYmEuam9pbigpID09PSAiMCwwLDAsMCIgKSB7CgkJCWpRdWVyeS5leHRlbmQoIHJnYmEsIGNvbG9ycy50cmFuc3BhcmVudCApOwoJCX0KCQlyZXR1cm4gaW5zdDsKCX0KCgkvLyBuYW1lZCBjb2xvcnMKCXJldHVybiBjb2xvcnNbIHN0cmluZyBdOwp9Cgpjb2xvci5mbiA9IGpRdWVyeS5leHRlbmQoIGNvbG9yLnByb3RvdHlwZSwgewoJcGFyc2U6IGZ1bmN0aW9uKCByZWQsIGdyZWVuLCBibHVlLCBhbHBoYSApIHsKCQlpZiAoIHJlZCA9PT0gdW5kZWZpbmVkICkgewoJCQl0aGlzLl9yZ2JhID0gWyBudWxsLCBudWxsLCBudWxsLCBudWxsIF07CgkJCXJldHVybiB0aGlzOwoJCX0KCQlpZiAoIHJlZC5qcXVlcnkgfHwgcmVkLm5vZGVUeXBlICkgewoJCQlyZWQgPSBqUXVlcnkoIHJlZCApLmNzcyggZ3JlZW4gKTsKCQkJZ3JlZW4gPSB1bmRlZmluZWQ7CgkJfQoKCQl2YXIgaW5zdCA9IHRoaXMsCgkJCXR5cGUgPSBqUXVlcnkudHlwZSggcmVkICksCgkJCXJnYmEgPSB0aGlzLl9yZ2JhID0gW107CgoJCS8vIG1vcmUgdGhhbiAxIGFyZ3VtZW50IHNwZWNpZmllZCAtIGFzc3VtZSAoIHJlZCwgZ3JlZW4sIGJsdWUsIGFscGhhICkKCQlpZiAoIGdyZWVuICE9PSB1bmRlZmluZWQgKSB7CgkJCXJlZCA9IFsgcmVkLCBncmVlbiwgYmx1ZSwgYWxwaGEgXTsKCQkJdHlwZSA9ICJhcnJheSI7CgkJfQoKCQlpZiAoIHR5cGUgPT09ICJzdHJpbmciICkgewoJCQlyZXR1cm4gdGhpcy5wYXJzZSggc3RyaW5nUGFyc2UoIHJlZCApIHx8IGNvbG9ycy5fZGVmYXVsdCApOwoJCX0KCgkJaWYgKCB0eXBlID09PSAiYXJyYXkiICkgewoJCQllYWNoKCBzcGFjZXMucmdiYS5wcm9wcywgZnVuY3Rpb24oIGtleSwgcHJvcCApIHsKCQkJCXJnYmFbIHByb3AuaWR4IF0gPSBjbGFtcCggcmVkWyBwcm9wLmlkeCBdLCBwcm9wICk7CgkJCX0pOwoJCQlyZXR1cm4gdGhpczsKCQl9CgoJCWlmICggdHlwZSA9PT0gIm9iamVjdCIgKSB7CgkJCWlmICggcmVkIGluc3RhbmNlb2YgY29sb3IgKSB7CgkJCQllYWNoKCBzcGFjZXMsIGZ1bmN0aW9uKCBzcGFjZU5hbWUsIHNwYWNlICkgewoJCQkJCWlmICggcmVkWyBzcGFjZS5jYWNoZSBdICkgewoJCQkJCQlpbnN0WyBzcGFjZS5jYWNoZSBdID0gcmVkWyBzcGFjZS5jYWNoZSBdLnNsaWNlKCk7CgkJCQkJfQoJCQkJfSk7CgkJCX0gZWxzZSB7CgkJCQllYWNoKCBzcGFjZXMsIGZ1bmN0aW9uKCBzcGFjZU5hbWUsIHNwYWNlICkgewoJCQkJCXZhciBjYWNoZSA9IHNwYWNlLmNhY2hlOwoJCQkJCWVhY2goIHNwYWNlLnByb3BzLCBmdW5jdGlvbigga2V5LCBwcm9wICkgewoKCQkJCQkJLy8gaWYgdGhlIGNhY2hlIGRvZXNuJ3QgZXhpc3QsIGFuZCB3ZSBrbm93IGhvdyB0byBjb252ZXJ0CgkJCQkJCWlmICggIWluc3RbIGNhY2hlIF0gJiYgc3BhY2UudG8gKSB7CgoJCQkJCQkJLy8gaWYgdGhlIHZhbHVlIHdhcyBudWxsLCB3ZSBkb24ndCBuZWVkIHRvIGNvcHkgaXQKCQkJCQkJCS8vIGlmIHRoZSBrZXkgd2FzIGFscGhhLCB3ZSBkb24ndCBuZWVkIHRvIGNvcHkgaXQgZWl0aGVyCgkJCQkJCQlpZiAoIGtleSA9PT0gImFscGhhIiB8fCByZWRbIGtleSBdID09IG51bGwgKSB7CgkJCQkJCQkJcmV0dXJuOwoJCQkJCQkJfQoJCQkJCQkJaW5zdFsgY2FjaGUgXSA9IHNwYWNlLnRvKCBpbnN0Ll9yZ2JhICk7CgkJCQkJCX0KCgkJCQkJCS8vIHRoaXMgaXMgdGhlIG9ubHkgY2FzZSB3aGVyZSB3ZSBhbGxvdyBudWxscyBmb3IgQUxMIHByb3BlcnRpZXMuCgkJCQkJCS8vIGNhbGwgY2xhbXAgd2l0aCBhbHdheXNBbGxvd0VtcHR5CgkJCQkJCWluc3RbIGNhY2hlIF1bIHByb3AuaWR4IF0gPSBjbGFtcCggcmVkWyBrZXkgXSwgcHJvcCwgdHJ1ZSApOwoJCQkJCX0pOwoKCQkJCQkvLyBldmVyeXRoaW5nIGRlZmluZWQgYnV0IGFscGhhPwoJCQkJCWlmICggaW5zdFsgY2FjaGUgXSAmJiAkLmluQXJyYXkoIG51bGwsIGluc3RbIGNhY2hlIF0uc2xpY2UoIDAsIDMgKSApIDwgMCApIHsKCQkJCQkJLy8gdXNlIHRoZSBkZWZhdWx0IG9mIDEKCQkJCQkJaW5zdFsgY2FjaGUgXVsgMyBdID0gMTsKCQkJCQkJaWYgKCBzcGFjZS5mcm9tICkgewoJCQkJCQkJaW5zdC5fcmdiYSA9IHNwYWNlLmZyb20oIGluc3RbIGNhY2hlIF0gKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0pOwoJCQl9CgkJCXJldHVybiB0aGlzOwoJCX0KCX0sCglpczogZnVuY3Rpb24oIGNvbXBhcmUgKSB7CgkJdmFyIGlzID0gY29sb3IoIGNvbXBhcmUgKSwKCQkJc2FtZSA9IHRydWUsCgkJCWluc3QgPSB0aGlzOwoKCQllYWNoKCBzcGFjZXMsIGZ1bmN0aW9uKCBfLCBzcGFjZSApIHsKCQkJdmFyIGxvY2FsQ2FjaGUsCgkJCQlpc0NhY2hlID0gaXNbIHNwYWNlLmNhY2hlIF07CgkJCWlmIChpc0NhY2hlKSB7CgkJCQlsb2NhbENhY2hlID0gaW5zdFsgc3BhY2UuY2FjaGUgXSB8fCBzcGFjZS50byAmJiBzcGFjZS50byggaW5zdC5fcmdiYSApIHx8IFtdOwoJCQkJZWFjaCggc3BhY2UucHJvcHMsIGZ1bmN0aW9uKCBfLCBwcm9wICkgewoJCQkJCWlmICggaXNDYWNoZVsgcHJvcC5pZHggXSAhPSBudWxsICkgewoJCQkJCQlzYW1lID0gKCBpc0NhY2hlWyBwcm9wLmlkeCBdID09PSBsb2NhbENhY2hlWyBwcm9wLmlkeCBdICk7CgkJCQkJCXJldHVybiBzYW1lOwoJCQkJCX0KCQkJCX0pOwoJCQl9CgkJCXJldHVybiBzYW1lOwoJCX0pOwoJCXJldHVybiBzYW1lOwoJfSwKCV9zcGFjZTogZnVuY3Rpb24oKSB7CgkJdmFyIHVzZWQgPSBbXSwKCQkJaW5zdCA9IHRoaXM7CgkJZWFjaCggc3BhY2VzLCBmdW5jdGlvbiggc3BhY2VOYW1lLCBzcGFjZSApIHsKCQkJaWYgKCBpbnN0WyBzcGFjZS5jYWNoZSBdICkgewoJCQkJdXNlZC5wdXNoKCBzcGFjZU5hbWUgKTsKCQkJfQoJCX0pOwoJCXJldHVybiB1c2VkLnBvcCgpOwoJfSwKCXRyYW5zaXRpb246IGZ1bmN0aW9uKCBvdGhlciwgZGlzdGFuY2UgKSB7CgkJdmFyIGVuZCA9IGNvbG9yKCBvdGhlciApLAoJCQlzcGFjZU5hbWUgPSBlbmQuX3NwYWNlKCksCgkJCXNwYWNlID0gc3BhY2VzWyBzcGFjZU5hbWUgXSwKCQkJc3RhcnRDb2xvciA9IHRoaXMuYWxwaGEoKSA9PT0gMCA/IGNvbG9yKCAidHJhbnNwYXJlbnQiICkgOiB0aGlzLAoJCQlzdGFydCA9IHN0YXJ0Q29sb3JbIHNwYWNlLmNhY2hlIF0gfHwgc3BhY2UudG8oIHN0YXJ0Q29sb3IuX3JnYmEgKSwKCQkJcmVzdWx0ID0gc3RhcnQuc2xpY2UoKTsKCgkJZW5kID0gZW5kWyBzcGFjZS5jYWNoZSBdOwoJCWVhY2goIHNwYWNlLnByb3BzLCBmdW5jdGlvbigga2V5LCBwcm9wICkgewoJCQl2YXIgaW5kZXggPSBwcm9wLmlkeCwKCQkJCXN0YXJ0VmFsdWUgPSBzdGFydFsgaW5kZXggXSwKCQkJCWVuZFZhbHVlID0gZW5kWyBpbmRleCBdLAoJCQkJdHlwZSA9IHByb3BUeXBlc1sgcHJvcC50eXBlIF0gfHwge307CgoJCQkvLyBpZiBudWxsLCBkb24ndCBvdmVycmlkZSBzdGFydCB2YWx1ZQoJCQlpZiAoIGVuZFZhbHVlID09PSBudWxsICkgewoJCQkJcmV0dXJuOwoJCQl9CgkJCS8vIGlmIG51bGwgLSB1c2UgZW5kCgkJCWlmICggc3RhcnRWYWx1ZSA9PT0gbnVsbCApIHsKCQkJCXJlc3VsdFsgaW5kZXggXSA9IGVuZFZhbHVlOwoJCQl9IGVsc2UgewoJCQkJaWYgKCB0eXBlLm1vZCApIHsKCQkJCQlpZiAoIGVuZFZhbHVlIC0gc3RhcnRWYWx1ZSA+IHR5cGUubW9kIC8gMiApIHsKCQkJCQkJc3RhcnRWYWx1ZSArPSB0eXBlLm1vZDsKCQkJCQl9IGVsc2UgaWYgKCBzdGFydFZhbHVlIC0gZW5kVmFsdWUgPiB0eXBlLm1vZCAvIDIgKSB7CgkJCQkJCXN0YXJ0VmFsdWUgLT0gdHlwZS5tb2Q7CgkJCQkJfQoJCQkJfQoJCQkJcmVzdWx0WyBpbmRleCBdID0gY2xhbXAoICggZW5kVmFsdWUgLSBzdGFydFZhbHVlICkgKiBkaXN0YW5jZSArIHN0YXJ0VmFsdWUsIHByb3AgKTsKCQkJfQoJCX0pOwoJCXJldHVybiB0aGlzWyBzcGFjZU5hbWUgXSggcmVzdWx0ICk7Cgl9LAoJYmxlbmQ6IGZ1bmN0aW9uKCBvcGFxdWUgKSB7CgkJLy8gaWYgd2UgYXJlIGFscmVhZHkgb3BhcXVlIC0gcmV0dXJuIG91cnNlbGYKCQlpZiAoIHRoaXMuX3JnYmFbIDMgXSA9PT0gMSApIHsKCQkJcmV0dXJuIHRoaXM7CgkJfQoKCQl2YXIgcmdiID0gdGhpcy5fcmdiYS5zbGljZSgpLAoJCQlhID0gcmdiLnBvcCgpLAoJCQlibGVuZCA9IGNvbG9yKCBvcGFxdWUgKS5fcmdiYTsKCgkJcmV0dXJuIGNvbG9yKCBqUXVlcnkubWFwKCByZ2IsIGZ1bmN0aW9uKCB2LCBpICkgewoJCQlyZXR1cm4gKCAxIC0gYSApICogYmxlbmRbIGkgXSArIGEgKiB2OwoJCX0pKTsKCX0sCgl0b1JnYmFTdHJpbmc6IGZ1bmN0aW9uKCkgewoJCXZhciBwcmVmaXggPSAicmdiYSgiLAoJCQlyZ2JhID0galF1ZXJ5Lm1hcCggdGhpcy5fcmdiYSwgZnVuY3Rpb24oIHYsIGkgKSB7CgkJCQlyZXR1cm4gdiA9PSBudWxsID8gKCBpID4gMiA/IDEgOiAwICkgOiB2OwoJCQl9KTsKCgkJaWYgKCByZ2JhWyAzIF0gPT09IDEgKSB7CgkJCXJnYmEucG9wKCk7CgkJCXByZWZpeCA9ICJyZ2IoIjsKCQl9CgoJCXJldHVybiBwcmVmaXggKyByZ2JhLmpvaW4oKSArICIpIjsKCX0sCgl0b0hzbGFTdHJpbmc6IGZ1bmN0aW9uKCkgewoJCXZhciBwcmVmaXggPSAiaHNsYSgiLAoJCQloc2xhID0galF1ZXJ5Lm1hcCggdGhpcy5oc2xhKCksIGZ1bmN0aW9uKCB2LCBpICkgewoJCQkJaWYgKCB2ID09IG51bGwgKSB7CgkJCQkJdiA9IGkgPiAyID8gMSA6IDA7CgkJCQl9CgoJCQkJLy8gY2F0Y2ggMSBhbmQgMgoJCQkJaWYgKCBpICYmIGkgPCAzICkgewoJCQkJCXYgPSBNYXRoLnJvdW5kKCB2ICogMTAwICkgKyAiJSI7CgkJCQl9CgkJCQlyZXR1cm4gdjsKCQkJfSk7CgoJCWlmICggaHNsYVsgMyBdID09PSAxICkgewoJCQloc2xhLnBvcCgpOwoJCQlwcmVmaXggPSAiaHNsKCI7CgkJfQoJCXJldHVybiBwcmVmaXggKyBoc2xhLmpvaW4oKSArICIpIjsKCX0sCgl0b0hleFN0cmluZzogZnVuY3Rpb24oIGluY2x1ZGVBbHBoYSApIHsKCQl2YXIgcmdiYSA9IHRoaXMuX3JnYmEuc2xpY2UoKSwKCQkJYWxwaGEgPSByZ2JhLnBvcCgpOwoKCQlpZiAoIGluY2x1ZGVBbHBoYSApIHsKCQkJcmdiYS5wdXNoKCB+figgYWxwaGEgKiAyNTUgKSApOwoJCX0KCgkJcmV0dXJuICIjIiArIGpRdWVyeS5tYXAoIHJnYmEsIGZ1bmN0aW9uKCB2ICkgewoKCQkJLy8gZGVmYXVsdCB0byAwIHdoZW4gbnVsbHMgZXhpc3QKCQkJdiA9ICggdiB8fCAwICkudG9TdHJpbmcoIDE2ICk7CgkJCXJldHVybiB2Lmxlbmd0aCA9PT0gMSA/ICIwIiArIHYgOiB2OwoJCX0pLmpvaW4oIiIpOwoJfSwKCXRvU3RyaW5nOiBmdW5jdGlvbigpIHsKCQlyZXR1cm4gdGhpcy5fcmdiYVsgMyBdID09PSAwID8gInRyYW5zcGFyZW50IiA6IHRoaXMudG9SZ2JhU3RyaW5nKCk7Cgl9Cn0pOwpjb2xvci5mbi5wYXJzZS5wcm90b3R5cGUgPSBjb2xvci5mbjsKCi8vIGhzbGEgY29udmVyc2lvbnMgYWRhcHRlZCBmcm9tOgovLyBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL21hYXNoYWFjay9zb3VyY2UvYnJvd3NlL3BhY2thZ2VzL2dyYXBoaWNzL3RydW5rL3NyYy9ncmFwaGljcy9jb2xvcnMvSFVFMlJHQi5hcz9yPTUwMjEKCmZ1bmN0aW9uIGh1ZTJyZ2IoIHAsIHEsIGggKSB7CgloID0gKCBoICsgMSApICUgMTsKCWlmICggaCAqIDYgPCAxICkgewoJCXJldHVybiBwICsgKHEgLSBwKSAqIGggKiA2OwoJfQoJaWYgKCBoICogMiA8IDEpIHsKCQlyZXR1cm4gcTsKCX0KCWlmICggaCAqIDMgPCAyICkgewoJCXJldHVybiBwICsgKHEgLSBwKSAqICgoMi8zKSAtIGgpICogNjsKCX0KCXJldHVybiBwOwp9CgpzcGFjZXMuaHNsYS50byA9IGZ1bmN0aW9uICggcmdiYSApIHsKCWlmICggcmdiYVsgMCBdID09IG51bGwgfHwgcmdiYVsgMSBdID09IG51bGwgfHwgcmdiYVsgMiBdID09IG51bGwgKSB7CgkJcmV0dXJuIFsgbnVsbCwgbnVsbCwgbnVsbCwgcmdiYVsgMyBdIF07Cgl9Cgl2YXIgciA9IHJnYmFbIDAgXSAvIDI1NSwKCQlnID0gcmdiYVsgMSBdIC8gMjU1LAoJCWIgPSByZ2JhWyAyIF0gLyAyNTUsCgkJYSA9IHJnYmFbIDMgXSwKCQltYXggPSBNYXRoLm1heCggciwgZywgYiApLAoJCW1pbiA9IE1hdGgubWluKCByLCBnLCBiICksCgkJZGlmZiA9IG1heCAtIG1pbiwKCQlhZGQgPSBtYXggKyBtaW4sCgkJbCA9IGFkZCAqIDAuNSwKCQloLCBzOwoKCWlmICggbWluID09PSBtYXggKSB7CgkJaCA9IDA7Cgl9IGVsc2UgaWYgKCByID09PSBtYXggKSB7CgkJaCA9ICggNjAgKiAoIGcgLSBiICkgLyBkaWZmICkgKyAzNjA7Cgl9IGVsc2UgaWYgKCBnID09PSBtYXggKSB7CgkJaCA9ICggNjAgKiAoIGIgLSByICkgLyBkaWZmICkgKyAxMjA7Cgl9IGVsc2UgewoJCWggPSAoIDYwICogKCByIC0gZyApIC8gZGlmZiApICsgMjQwOwoJfQoKCWlmICggbCA9PT0gMCB8fCBsID09PSAxICkgewoJCXMgPSBsOwoJfSBlbHNlIGlmICggbCA8PSAwLjUgKSB7CgkJcyA9IGRpZmYgLyBhZGQ7Cgl9IGVsc2UgewoJCXMgPSBkaWZmIC8gKCAyIC0gYWRkICk7Cgl9CglyZXR1cm4gWyBNYXRoLnJvdW5kKGgpICUgMzYwLCBzLCBsLCBhID09IG51bGwgPyAxIDogYSBdOwp9OwoKc3BhY2VzLmhzbGEuZnJvbSA9IGZ1bmN0aW9uICggaHNsYSApIHsKCWlmICggaHNsYVsgMCBdID09IG51bGwgfHwgaHNsYVsgMSBdID09IG51bGwgfHwgaHNsYVsgMiBdID09IG51bGwgKSB7CgkJcmV0dXJuIFsgbnVsbCwgbnVsbCwgbnVsbCwgaHNsYVsgMyBdIF07Cgl9Cgl2YXIgaCA9IGhzbGFbIDAgXSAvIDM2MCwKCQlzID0gaHNsYVsgMSBdLAoJCWwgPSBoc2xhWyAyIF0sCgkJYSA9IGhzbGFbIDMgXSwKCQlxID0gbCA8PSAwLjUgPyBsICogKCAxICsgcyApIDogbCArIHMgLSBsICogcywKCQlwID0gMiAqIGwgLSBxOwoKCXJldHVybiBbCgkJTWF0aC5yb3VuZCggaHVlMnJnYiggcCwgcSwgaCArICggMSAvIDMgKSApICogMjU1ICksCgkJTWF0aC5yb3VuZCggaHVlMnJnYiggcCwgcSwgaCApICogMjU1ICksCgkJTWF0aC5yb3VuZCggaHVlMnJnYiggcCwgcSwgaCAtICggMSAvIDMgKSApICogMjU1ICksCgkJYQoJXTsKfTsKCgplYWNoKCBzcGFjZXMsIGZ1bmN0aW9uKCBzcGFjZU5hbWUsIHNwYWNlICkgewoJdmFyIHByb3BzID0gc3BhY2UucHJvcHMsCgkJY2FjaGUgPSBzcGFjZS5jYWNoZSwKCQl0byA9IHNwYWNlLnRvLAoJCWZyb20gPSBzcGFjZS5mcm9tOwoKCS8vIG1ha2VzIHJnYmEoKSBhbmQgaHNsYSgpCgljb2xvci5mblsgc3BhY2VOYW1lIF0gPSBmdW5jdGlvbiggdmFsdWUgKSB7CgoJCS8vIGdlbmVyYXRlIGEgY2FjaGUgZm9yIHRoaXMgc3BhY2UgaWYgaXQgZG9lc24ndCBleGlzdAoJCWlmICggdG8gJiYgIXRoaXNbIGNhY2hlIF0gKSB7CgkJCXRoaXNbIGNhY2hlIF0gPSB0byggdGhpcy5fcmdiYSApOwoJCX0KCQlpZiAoIHZhbHVlID09PSB1bmRlZmluZWQgKSB7CgkJCXJldHVybiB0aGlzWyBjYWNoZSBdLnNsaWNlKCk7CgkJfQoKCQl2YXIgcmV0LAoJCQl0eXBlID0galF1ZXJ5LnR5cGUoIHZhbHVlICksCgkJCWFyciA9ICggdHlwZSA9PT0gImFycmF5IiB8fCB0eXBlID09PSAib2JqZWN0IiApID8gdmFsdWUgOiBhcmd1bWVudHMsCgkJCWxvY2FsID0gdGhpc1sgY2FjaGUgXS5zbGljZSgpOwoKCQllYWNoKCBwcm9wcywgZnVuY3Rpb24oIGtleSwgcHJvcCApIHsKCQkJdmFyIHZhbCA9IGFyclsgdHlwZSA9PT0gIm9iamVjdCIgPyBrZXkgOiBwcm9wLmlkeCBdOwoJCQlpZiAoIHZhbCA9PSBudWxsICkgewoJCQkJdmFsID0gbG9jYWxbIHByb3AuaWR4IF07CgkJCX0KCQkJbG9jYWxbIHByb3AuaWR4IF0gPSBjbGFtcCggdmFsLCBwcm9wICk7CgkJfSk7CgoJCWlmICggZnJvbSApIHsKCQkJcmV0ID0gY29sb3IoIGZyb20oIGxvY2FsICkgKTsKCQkJcmV0WyBjYWNoZSBdID0gbG9jYWw7CgkJCXJldHVybiByZXQ7CgkJfSBlbHNlIHsKCQkJcmV0dXJuIGNvbG9yKCBsb2NhbCApOwoJCX0KCX07CgoJLy8gbWFrZXMgcmVkKCkgZ3JlZW4oKSBibHVlKCkgYWxwaGEoKSBodWUoKSBzYXR1cmF0aW9uKCkgbGlnaHRuZXNzKCkKCWVhY2goIHByb3BzLCBmdW5jdGlvbigga2V5LCBwcm9wICkgewoJCS8vIGFscGhhIGlzIGluY2x1ZGVkIGluIG1vcmUgdGhhbiBvbmUgc3BhY2UKCQlpZiAoIGNvbG9yLmZuWyBrZXkgXSApIHsKCQkJcmV0dXJuOwoJCX0KCQljb2xvci5mblsga2V5IF0gPSBmdW5jdGlvbiggdmFsdWUgKSB7CgkJCXZhciB2dHlwZSA9IGpRdWVyeS50eXBlKCB2YWx1ZSApLAoJCQkJZm4gPSAoIGtleSA9PT0gImFscGhhIiA/ICggdGhpcy5faHNsYSA/ICJoc2xhIiA6ICJyZ2JhIiApIDogc3BhY2VOYW1lICksCgkJCQlsb2NhbCA9IHRoaXNbIGZuIF0oKSwKCQkJCWN1ciA9IGxvY2FsWyBwcm9wLmlkeCBdLAoJCQkJbWF0Y2g7CgoJCQlpZiAoIHZ0eXBlID09PSAidW5kZWZpbmVkIiApIHsKCQkJCXJldHVybiBjdXI7CgkJCX0KCgkJCWlmICggdnR5cGUgPT09ICJmdW5jdGlvbiIgKSB7CgkJCQl2YWx1ZSA9IHZhbHVlLmNhbGwoIHRoaXMsIGN1ciApOwoJCQkJdnR5cGUgPSBqUXVlcnkudHlwZSggdmFsdWUgKTsKCQkJfQoJCQlpZiAoIHZhbHVlID09IG51bGwgJiYgcHJvcC5lbXB0eSApIHsKCQkJCXJldHVybiB0aGlzOwoJCQl9CgkJCWlmICggdnR5cGUgPT09ICJzdHJpbmciICkgewoJCQkJbWF0Y2ggPSBycGx1c2VxdWFscy5leGVjKCB2YWx1ZSApOwoJCQkJaWYgKCBtYXRjaCApIHsKCQkJCQl2YWx1ZSA9IGN1ciArIHBhcnNlRmxvYXQoIG1hdGNoWyAyIF0gKSAqICggbWF0Y2hbIDEgXSA9PT0gIisiID8gMSA6IC0xICk7CgkJCQl9CgkJCX0KCQkJbG9jYWxbIHByb3AuaWR4IF0gPSB2YWx1ZTsKCQkJcmV0dXJuIHRoaXNbIGZuIF0oIGxvY2FsICk7CgkJfTsKCX0pOwp9KTsKCi8vIGFkZCAuZnguc3RlcCBmdW5jdGlvbnMKZWFjaCggc3RlcEhvb2tzLCBmdW5jdGlvbiggaSwgaG9vayApIHsKCWpRdWVyeS5jc3NIb29rc1sgaG9vayBdID0gewoJCXNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkgewoJCQl2YXIgcGFyc2VkLCBjdXJFbGVtLAoJCQkJYmFja2dyb3VuZENvbG9yID0gIiI7CgoJCQlpZiAoIGpRdWVyeS50eXBlKCB2YWx1ZSApICE9PSAic3RyaW5nIiB8fCAoIHBhcnNlZCA9IHN0cmluZ1BhcnNlKCB2YWx1ZSApICkgKSB7CgkJCQl2YWx1ZSA9IGNvbG9yKCBwYXJzZWQgfHwgdmFsdWUgKTsKCQkJCWlmICggIXN1cHBvcnQucmdiYSAmJiB2YWx1ZS5fcmdiYVsgMyBdICE9PSAxICkgewoJCQkJCWN1ckVsZW0gPSBob29rID09PSAiYmFja2dyb3VuZENvbG9yIiA/IGVsZW0ucGFyZW50Tm9kZSA6IGVsZW07CgkJCQkJd2hpbGUgKAoJCQkJCQkoYmFja2dyb3VuZENvbG9yID09PSAiIiB8fCBiYWNrZ3JvdW5kQ29sb3IgPT09ICJ0cmFuc3BhcmVudCIpICYmCgkJCQkJCWN1ckVsZW0gJiYgY3VyRWxlbS5zdHlsZQoJCQkJCSkgewoJCQkJCQl0cnkgewoJCQkJCQkJYmFja2dyb3VuZENvbG9yID0galF1ZXJ5LmNzcyggY3VyRWxlbSwgImJhY2tncm91bmRDb2xvciIgKTsKCQkJCQkJCWN1ckVsZW0gPSBjdXJFbGVtLnBhcmVudE5vZGU7CgkJCQkJCX0gY2F0Y2ggKCBlICkgewoJCQkJCQl9CgkJCQkJfQoKCQkJCQl2YWx1ZSA9IHZhbHVlLmJsZW5kKCBiYWNrZ3JvdW5kQ29sb3IgJiYgYmFja2dyb3VuZENvbG9yICE9PSAidHJhbnNwYXJlbnQiID8KCQkJCQkJYmFja2dyb3VuZENvbG9yIDoKCQkJCQkJIl9kZWZhdWx0IiApOwoJCQkJfQoKCQkJCXZhbHVlID0gdmFsdWUudG9SZ2JhU3RyaW5nKCk7CgkJCX0KCQkJdHJ5IHsKCQkJCWVsZW0uc3R5bGVbIGhvb2sgXSA9IHZhbHVlOwoJCQl9IGNhdGNoKCBlcnJvciApIHsKCQkJCS8vIHdyYXBwZWQgdG8gcHJldmVudCBJRSBmcm9tIHRocm93aW5nIGVycm9ycyBvbiAiaW52YWxpZCIgdmFsdWVzIGxpa2UgJ2F1dG8nIG9yICdpbmhlcml0JwoJCQl9CgkJfQoJfTsKCWpRdWVyeS5meC5zdGVwWyBob29rIF0gPSBmdW5jdGlvbiggZnggKSB7CgkJaWYgKCAhZnguY29sb3JJbml0ICkgewoJCQlmeC5zdGFydCA9IGNvbG9yKCBmeC5lbGVtLCBob29rICk7CgkJCWZ4LmVuZCA9IGNvbG9yKCBmeC5lbmQgKTsKCQkJZnguY29sb3JJbml0ID0gdHJ1ZTsKCQl9CgkJalF1ZXJ5LmNzc0hvb2tzWyBob29rIF0uc2V0KCBmeC5lbGVtLCBmeC5zdGFydC50cmFuc2l0aW9uKCBmeC5lbmQsIGZ4LnBvcyApICk7Cgl9Owp9KTsKCmpRdWVyeS5jc3NIb29rcy5ib3JkZXJDb2xvciA9IHsKCWV4cGFuZDogZnVuY3Rpb24oIHZhbHVlICkgewoJCXZhciBleHBhbmRlZCA9IHt9OwoKCQllYWNoKCBbICJUb3AiLCAiUmlnaHQiLCAiQm90dG9tIiwgIkxlZnQiIF0sIGZ1bmN0aW9uKCBpLCBwYXJ0ICkgewoJCQlleHBhbmRlZFsgImJvcmRlciIgKyBwYXJ0ICsgIkNvbG9yIiBdID0gdmFsdWU7CgkJfSk7CgkJcmV0dXJuIGV4cGFuZGVkOwoJfQp9OwoKLy8gQmFzaWMgY29sb3IgbmFtZXMgb25seS4KLy8gVXNhZ2Ugb2YgYW55IG9mIHRoZSBvdGhlciBjb2xvciBuYW1lcyByZXF1aXJlcyBhZGRpbmcgeW91cnNlbGYgb3IgaW5jbHVkaW5nCi8vIGpxdWVyeS5jb2xvci5zdmctbmFtZXMuanMuCmNvbG9ycyA9IGpRdWVyeS5Db2xvci5uYW1lcyA9IHsKCS8vIDQuMS4gQmFzaWMgY29sb3Iga2V5d29yZHMKCWFxdWE6ICIjMDBmZmZmIiwKCWJsYWNrOiAiIzAwMDAwMCIsCglibHVlOiAiIzAwMDBmZiIsCglmdWNoc2lhOiAiI2ZmMDBmZiIsCglncmF5OiAiIzgwODA4MCIsCglncmVlbjogIiMwMDgwMDAiLAoJbGltZTogIiMwMGZmMDAiLAoJbWFyb29uOiAiIzgwMDAwMCIsCgluYXZ5OiAiIzAwMDA4MCIsCglvbGl2ZTogIiM4MDgwMDAiLAoJcHVycGxlOiAiIzgwMDA4MCIsCglyZWQ6ICIjZmYwMDAwIiwKCXNpbHZlcjogIiNjMGMwYzAiLAoJdGVhbDogIiMwMDgwODAiLAoJd2hpdGU6ICIjZmZmZmZmIiwKCXllbGxvdzogIiNmZmZmMDAiLAoKCS8vIDQuMi4zLiAidHJhbnNwYXJlbnQiIGNvbG9yIGtleXdvcmQKCXRyYW5zcGFyZW50OiBbIG51bGwsIG51bGwsIG51bGwsIDAgXSwKCglfZGVmYXVsdDogIiNmZmZmZmYiCn07Cgp9KSggalF1ZXJ5ICk7CgoKCi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogQ0xBU1MgQU5JTUFUSU9OUyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCihmdW5jdGlvbigpIHsKCnZhciBjbGFzc0FuaW1hdGlvbkFjdGlvbnMgPSBbICJhZGQiLCAicmVtb3ZlIiwgInRvZ2dsZSIgXSwKCXNob3J0aGFuZFN0eWxlcyA9IHsKCQlib3JkZXI6IDEsCgkJYm9yZGVyQm90dG9tOiAxLAoJCWJvcmRlckNvbG9yOiAxLAoJCWJvcmRlckxlZnQ6IDEsCgkJYm9yZGVyUmlnaHQ6IDEsCgkJYm9yZGVyVG9wOiAxLAoJCWJvcmRlcldpZHRoOiAxLAoJCW1hcmdpbjogMSwKCQlwYWRkaW5nOiAxCgl9OwoKJC5lYWNoKFsgImJvcmRlckxlZnRTdHlsZSIsICJib3JkZXJSaWdodFN0eWxlIiwgImJvcmRlckJvdHRvbVN0eWxlIiwgImJvcmRlclRvcFN0eWxlIiBdLCBmdW5jdGlvbiggXywgcHJvcCApIHsKCSQuZnguc3RlcFsgcHJvcCBdID0gZnVuY3Rpb24oIGZ4ICkgewoJCWlmICggZnguZW5kICE9PSAibm9uZSIgJiYgIWZ4LnNldEF0dHIgfHwgZngucG9zID09PSAxICYmICFmeC5zZXRBdHRyICkgewoJCQlqUXVlcnkuc3R5bGUoIGZ4LmVsZW0sIHByb3AsIGZ4LmVuZCApOwoJCQlmeC5zZXRBdHRyID0gdHJ1ZTsKCQl9Cgl9Owp9KTsKCmZ1bmN0aW9uIGdldEVsZW1lbnRTdHlsZXMoKSB7Cgl2YXIgc3R5bGUgPSB0aGlzLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcgPwoJCQl0aGlzLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSggdGhpcywgbnVsbCApIDoKCQkJdGhpcy5jdXJyZW50U3R5bGUsCgkJbmV3U3R5bGUgPSB7fSwKCQlrZXksCgkJbGVuOwoKCS8vIHdlYmtpdCBlbnVtZXJhdGVzIHN0eWxlIHBvcnBlcnRpZXMKCWlmICggc3R5bGUgJiYgc3R5bGUubGVuZ3RoICYmIHN0eWxlWyAwIF0gJiYgc3R5bGVbIHN0eWxlWyAwIF0gXSApIHsKCQlsZW4gPSBzdHlsZS5sZW5ndGg7CgkJd2hpbGUgKCBsZW4tLSApIHsKCQkJa2V5ID0gc3R5bGVbIGxlbiBdOwoJCQlpZiAoIHR5cGVvZiBzdHlsZVsga2V5IF0gPT09ICJzdHJpbmciICkgewoJCQkJbmV3U3R5bGVbICQuY2FtZWxDYXNlKCBrZXkgKSBdID0gc3R5bGVbIGtleSBdOwoJCQl9CgkJfQoJfSBlbHNlIHsKCQlmb3IgKCBrZXkgaW4gc3R5bGUgKSB7CgkJCWlmICggdHlwZW9mIHN0eWxlWyBrZXkgXSA9PT0gInN0cmluZyIgKSB7CgkJCQluZXdTdHlsZVsga2V5IF0gPSBzdHlsZVsga2V5IF07CgkJCX0KCQl9Cgl9CgoJcmV0dXJuIG5ld1N0eWxlOwp9CgoKZnVuY3Rpb24gc3R5bGVEaWZmZXJlbmNlKCBvbGRTdHlsZSwgbmV3U3R5bGUgKSB7Cgl2YXIgZGlmZiA9IHt9LAoJCW5hbWUsIHZhbHVlOwoKCWZvciAoIG5hbWUgaW4gbmV3U3R5bGUgKSB7CgkJdmFsdWUgPSBuZXdTdHlsZVsgbmFtZSBdOwoJCWlmICggb2xkU3R5bGVbIG5hbWUgXSAhPT0gdmFsdWUgKSB7CgkJCWlmICggIXNob3J0aGFuZFN0eWxlc1sgbmFtZSBdICkgewoJCQkJaWYgKCAkLmZ4LnN0ZXBbIG5hbWUgXSB8fCAhaXNOYU4oIHBhcnNlRmxvYXQoIHZhbHVlICkgKSApIHsKCQkJCQlkaWZmWyBuYW1lIF0gPSB2YWx1ZTsKCQkJCX0KCQkJfQoJCX0KCX0KCglyZXR1cm4gZGlmZjsKfQoKJC5lZmZlY3RzLmFuaW1hdGVDbGFzcyA9IGZ1bmN0aW9uKCB2YWx1ZSwgZHVyYXRpb24sIGVhc2luZywgY2FsbGJhY2sgKSB7Cgl2YXIgbyA9ICQuc3BlZWQoIGR1cmF0aW9uLCBlYXNpbmcsIGNhbGxiYWNrICk7CgoJcmV0dXJuIHRoaXMucXVldWUoIGZ1bmN0aW9uKCkgewoJCXZhciBhbmltYXRlZCA9ICQoIHRoaXMgKSwKCQkJYmFzZUNsYXNzID0gYW5pbWF0ZWQuYXR0ciggImNsYXNzIiApIHx8ICIiLAoJCQlhcHBseUNsYXNzQ2hhbmdlLAoJCQlhbGxBbmltYXRpb25zID0gby5jaGlsZHJlbiA/IGFuaW1hdGVkLmZpbmQoICIqIiApLmFuZFNlbGYoKSA6IGFuaW1hdGVkOwoKCQkvLyBtYXAgdGhlIGFuaW1hdGVkIG9iamVjdHMgdG8gc3RvcmUgdGhlIG9yaWdpbmFsIHN0eWxlcy4KCQlhbGxBbmltYXRpb25zID0gYWxsQW5pbWF0aW9ucy5tYXAoZnVuY3Rpb24oKSB7CgkJCXZhciBlbCA9ICQoIHRoaXMgKTsKCQkJcmV0dXJuIHsKCQkJCWVsOiBlbCwKCQkJCXN0YXJ0OiBnZXRFbGVtZW50U3R5bGVzLmNhbGwoIHRoaXMgKQoJCQl9OwoJCX0pOwoKCQkvLyBhcHBseSBjbGFzcyBjaGFuZ2UKCQlhcHBseUNsYXNzQ2hhbmdlID0gZnVuY3Rpb24oKSB7CgkJCSQuZWFjaCggY2xhc3NBbmltYXRpb25BY3Rpb25zLCBmdW5jdGlvbihpLCBhY3Rpb24pIHsKCQkJCWlmICggdmFsdWVbIGFjdGlvbiBdICkgewoJCQkJCWFuaW1hdGVkWyBhY3Rpb24gKyAiQ2xhc3MiIF0oIHZhbHVlWyBhY3Rpb24gXSApOwoJCQkJfQoJCQl9KTsKCQl9OwoJCWFwcGx5Q2xhc3NDaGFuZ2UoKTsKCgkJLy8gbWFwIGFsbCBhbmltYXRlZCBvYmplY3RzIGFnYWluIC0gY2FsY3VsYXRlIG5ldyBzdHlsZXMgYW5kIGRpZmYKCQlhbGxBbmltYXRpb25zID0gYWxsQW5pbWF0aW9ucy5tYXAoZnVuY3Rpb24oKSB7CgkJCXRoaXMuZW5kID0gZ2V0RWxlbWVudFN0eWxlcy5jYWxsKCB0aGlzLmVsWyAwIF0gKTsKCQkJdGhpcy5kaWZmID0gc3R5bGVEaWZmZXJlbmNlKCB0aGlzLnN0YXJ0LCB0aGlzLmVuZCApOwoJCQlyZXR1cm4gdGhpczsKCQl9KTsKCgkJLy8gYXBwbHkgb3JpZ2luYWwgY2xhc3MKCQlhbmltYXRlZC5hdHRyKCAiY2xhc3MiLCBiYXNlQ2xhc3MgKTsKCgkJLy8gbWFwIGFsbCBhbmltYXRlZCBvYmplY3RzIGFnYWluIC0gdGhpcyB0aW1lIGNvbGxlY3RpbmcgYSBwcm9taXNlCgkJYWxsQW5pbWF0aW9ucyA9IGFsbEFuaW1hdGlvbnMubWFwKGZ1bmN0aW9uKCkgewoJCQl2YXIgc3R5bGVJbmZvID0gdGhpcywKCQkJCWRmZCA9ICQuRGVmZXJyZWQoKSwKCQkJCW9wdHMgPSBqUXVlcnkuZXh0ZW5kKHt9LCBvLCB7CgkJCQkJcXVldWU6IGZhbHNlLAoJCQkJCWNvbXBsZXRlOiBmdW5jdGlvbigpIHsKCQkJCQkJZGZkLnJlc29sdmUoIHN0eWxlSW5mbyApOwoJCQkJCX0KCQkJCX0pOwoKCQkJdGhpcy5lbC5hbmltYXRlKCB0aGlzLmRpZmYsIG9wdHMgKTsKCQkJcmV0dXJuIGRmZC5wcm9taXNlKCk7CgkJfSk7CgoJCS8vIG9uY2UgYWxsIGFuaW1hdGlvbnMgaGF2ZSBjb21wbGV0ZWQ6CgkJJC53aGVuLmFwcGx5KCAkLCBhbGxBbmltYXRpb25zLmdldCgpICkuZG9uZShmdW5jdGlvbigpIHsKCgkJCS8vIHNldCB0aGUgZmluYWwgY2xhc3MKCQkJYXBwbHlDbGFzc0NoYW5nZSgpOwoKCQkJLy8gZm9yIGVhY2ggYW5pbWF0ZWQgZWxlbWVudCwKCQkJLy8gY2xlYXIgYWxsIGNzcyBwcm9wZXJ0aWVzIHRoYXQgd2VyZSBhbmltYXRlZAoJCQkkLmVhY2goIGFyZ3VtZW50cywgZnVuY3Rpb24oKSB7CgkJCQl2YXIgZWwgPSB0aGlzLmVsOwoJCQkJJC5lYWNoKCB0aGlzLmRpZmYsIGZ1bmN0aW9uKGtleSkgewoJCQkJCWVsLmNzcygga2V5LCAnJyApOwoJCQkJfSk7CgkJCX0pOwoKCQkJLy8gdGhpcyBpcyBndWFybnRlZWQgdG8gYmUgdGhlcmUgaWYgeW91IHVzZSBqUXVlcnkuc3BlZWQoKQoJCQkvLyBpdCBhbHNvIGhhbmRsZXMgZGVxdWV1aW5nIHRoZSBuZXh0IGFuaW0uLi4KCQkJby5jb21wbGV0ZS5jYWxsKCBhbmltYXRlZFsgMCBdICk7CgkJfSk7Cgl9KTsKfTsKCiQuZm4uZXh0ZW5kKHsKCV9hZGRDbGFzczogJC5mbi5hZGRDbGFzcywKCWFkZENsYXNzOiBmdW5jdGlvbiggY2xhc3NOYW1lcywgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSB7CgkJcmV0dXJuIHNwZWVkID8KCQkJJC5lZmZlY3RzLmFuaW1hdGVDbGFzcy5jYWxsKCB0aGlzLAoJCQkJeyBhZGQ6IGNsYXNzTmFtZXMgfSwgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSA6CgkJCXRoaXMuX2FkZENsYXNzKCBjbGFzc05hbWVzICk7Cgl9LAoKCV9yZW1vdmVDbGFzczogJC5mbi5yZW1vdmVDbGFzcywKCXJlbW92ZUNsYXNzOiBmdW5jdGlvbiggY2xhc3NOYW1lcywgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSB7CgkJcmV0dXJuIHNwZWVkID8KCQkJJC5lZmZlY3RzLmFuaW1hdGVDbGFzcy5jYWxsKCB0aGlzLAoJCQkJeyByZW1vdmU6IGNsYXNzTmFtZXMgfSwgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSA6CgkJCXRoaXMuX3JlbW92ZUNsYXNzKCBjbGFzc05hbWVzICk7Cgl9LAoKCV90b2dnbGVDbGFzczogJC5mbi50b2dnbGVDbGFzcywKCXRvZ2dsZUNsYXNzOiBmdW5jdGlvbiggY2xhc3NOYW1lcywgZm9yY2UsIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICkgewoJCWlmICggdHlwZW9mIGZvcmNlID09PSAiYm9vbGVhbiIgfHwgZm9yY2UgPT09IHVuZGVmaW5lZCApIHsKCQkJaWYgKCAhc3BlZWQgKSB7CgkJCQkvLyB3aXRob3V0IHNwZWVkIHBhcmFtZXRlcgoJCQkJcmV0dXJuIHRoaXMuX3RvZ2dsZUNsYXNzKCBjbGFzc05hbWVzLCBmb3JjZSApOwoJCQl9IGVsc2UgewoJCQkJcmV0dXJuICQuZWZmZWN0cy5hbmltYXRlQ2xhc3MuY2FsbCggdGhpcywKCQkJCQkoZm9yY2UgPyB7IGFkZDogY2xhc3NOYW1lcyB9IDogeyByZW1vdmU6IGNsYXNzTmFtZXMgfSksCgkJCQkJc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKTsKCQkJfQoJCX0gZWxzZSB7CgkJCS8vIHdpdGhvdXQgZm9yY2UgcGFyYW1ldGVyCgkJCXJldHVybiAkLmVmZmVjdHMuYW5pbWF0ZUNsYXNzLmNhbGwoIHRoaXMsCgkJCQl7IHRvZ2dsZTogY2xhc3NOYW1lcyB9LCBmb3JjZSwgc3BlZWQsIGVhc2luZyApOwoJCX0KCX0sCgoJc3dpdGNoQ2xhc3M6IGZ1bmN0aW9uKCByZW1vdmUsIGFkZCwgc3BlZWQsIGVhc2luZywgY2FsbGJhY2spIHsKCQlyZXR1cm4gJC5lZmZlY3RzLmFuaW1hdGVDbGFzcy5jYWxsKCB0aGlzLCB7CgkJCWFkZDogYWRkLAoJCQlyZW1vdmU6IHJlbW92ZQoJCX0sIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICk7Cgl9Cn0pOwoKfSkoKTsKCi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBFRkZFQ1RTICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgooZnVuY3Rpb24oKSB7CgokLmV4dGVuZCggJC5lZmZlY3RzLCB7Cgl2ZXJzaW9uOiAiMS45LjIiLAoKCS8vIFNhdmVzIGEgc2V0IG9mIHByb3BlcnRpZXMgaW4gYSBkYXRhIHN0b3JhZ2UKCXNhdmU6IGZ1bmN0aW9uKCBlbGVtZW50LCBzZXQgKSB7CgkJZm9yKCB2YXIgaT0wOyBpIDwgc2V0Lmxlbmd0aDsgaSsrICkgewoJCQlpZiAoIHNldFsgaSBdICE9PSBudWxsICkgewoJCQkJZWxlbWVudC5kYXRhKCBkYXRhU3BhY2UgKyBzZXRbIGkgXSwgZWxlbWVudFsgMCBdLnN0eWxlWyBzZXRbIGkgXSBdICk7CgkJCX0KCQl9Cgl9LAoKCS8vIFJlc3RvcmVzIGEgc2V0IG9mIHByZXZpb3VzbHkgc2F2ZWQgcHJvcGVydGllcyBmcm9tIGEgZGF0YSBzdG9yYWdlCglyZXN0b3JlOiBmdW5jdGlvbiggZWxlbWVudCwgc2V0ICkgewoJCXZhciB2YWwsIGk7CgkJZm9yKCBpPTA7IGkgPCBzZXQubGVuZ3RoOyBpKysgKSB7CgkJCWlmICggc2V0WyBpIF0gIT09IG51bGwgKSB7CgkJCQl2YWwgPSBlbGVtZW50LmRhdGEoIGRhdGFTcGFjZSArIHNldFsgaSBdICk7CgkJCQkvLyBzdXBwb3J0OiBqUXVlcnkgMS42LjIKCQkJCS8vIGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0Lzk5MTcKCQkJCS8vIGpRdWVyeSAxLjYuMiBpbmNvcnJlY3RseSByZXR1cm5zIHVuZGVmaW5lZCBmb3IgYW55IGZhbHN5IHZhbHVlLgoJCQkJLy8gV2UgY2FuJ3QgZGlmZmVyZW50aWF0ZSBiZXR3ZWVuICIiIGFuZCAwIGhlcmUsIHNvIHdlIGp1c3QgYXNzdW1lCgkJCQkvLyBlbXB0eSBzdHJpbmcgc2luY2UgaXQncyBsaWtlbHkgdG8gYmUgYSBtb3JlIGNvbW1vbiB2YWx1ZS4uLgoJCQkJaWYgKCB2YWwgPT09IHVuZGVmaW5lZCApIHsKCQkJCQl2YWwgPSAiIjsKCQkJCX0KCQkJCWVsZW1lbnQuY3NzKCBzZXRbIGkgXSwgdmFsICk7CgkJCX0KCQl9Cgl9LAoKCXNldE1vZGU6IGZ1bmN0aW9uKCBlbCwgbW9kZSApIHsKCQlpZiAobW9kZSA9PT0gInRvZ2dsZSIpIHsKCQkJbW9kZSA9IGVsLmlzKCAiOmhpZGRlbiIgKSA/ICJzaG93IiA6ICJoaWRlIjsKCQl9CgkJcmV0dXJuIG1vZGU7Cgl9LAoKCS8vIFRyYW5zbGF0ZXMgYSBbdG9wLGxlZnRdIGFycmF5IGludG8gYSBiYXNlbGluZSB2YWx1ZQoJLy8gdGhpcyBzaG91bGQgYmUgYSBsaXR0bGUgbW9yZSBmbGV4aWJsZSBpbiB0aGUgZnV0dXJlIHRvIGhhbmRsZSBhIHN0cmluZyAmIGhhc2gKCWdldEJhc2VsaW5lOiBmdW5jdGlvbiggb3JpZ2luLCBvcmlnaW5hbCApIHsKCQl2YXIgeSwgeDsKCQlzd2l0Y2ggKCBvcmlnaW5bIDAgXSApIHsKCQkJY2FzZSAidG9wIjogeSA9IDA7IGJyZWFrOwoJCQljYXNlICJtaWRkbGUiOiB5ID0gMC41OyBicmVhazsKCQkJY2FzZSAiYm90dG9tIjogeSA9IDE7IGJyZWFrOwoJCQlkZWZhdWx0OiB5ID0gb3JpZ2luWyAwIF0gLyBvcmlnaW5hbC5oZWlnaHQ7CgkJfQoJCXN3aXRjaCAoIG9yaWdpblsgMSBdICkgewoJCQljYXNlICJsZWZ0IjogeCA9IDA7IGJyZWFrOwoJCQljYXNlICJjZW50ZXIiOiB4ID0gMC41OyBicmVhazsKCQkJY2FzZSAicmlnaHQiOiB4ID0gMTsgYnJlYWs7CgkJCWRlZmF1bHQ6IHggPSBvcmlnaW5bIDEgXSAvIG9yaWdpbmFsLndpZHRoOwoJCX0KCQlyZXR1cm4gewoJCQl4OiB4LAoJCQl5OiB5CgkJfTsKCX0sCgoJLy8gV3JhcHMgdGhlIGVsZW1lbnQgYXJvdW5kIGEgd3JhcHBlciB0aGF0IGNvcGllcyBwb3NpdGlvbiBwcm9wZXJ0aWVzCgljcmVhdGVXcmFwcGVyOiBmdW5jdGlvbiggZWxlbWVudCApIHsKCgkJLy8gaWYgdGhlIGVsZW1lbnQgaXMgYWxyZWFkeSB3cmFwcGVkLCByZXR1cm4gaXQKCQlpZiAoIGVsZW1lbnQucGFyZW50KCkuaXMoICIudWktZWZmZWN0cy13cmFwcGVyIiApKSB7CgkJCXJldHVybiBlbGVtZW50LnBhcmVudCgpOwoJCX0KCgkJLy8gd3JhcCB0aGUgZWxlbWVudAoJCXZhciBwcm9wcyA9IHsKCQkJCXdpZHRoOiBlbGVtZW50Lm91dGVyV2lkdGgodHJ1ZSksCgkJCQloZWlnaHQ6IGVsZW1lbnQub3V0ZXJIZWlnaHQodHJ1ZSksCgkJCQkiZmxvYXQiOiBlbGVtZW50LmNzcyggImZsb2F0IiApCgkJCX0sCgkJCXdyYXBwZXIgPSAkKCAiPGRpdj48L2Rpdj4iICkKCQkJCS5hZGRDbGFzcyggInVpLWVmZmVjdHMtd3JhcHBlciIgKQoJCQkJLmNzcyh7CgkJCQkJZm9udFNpemU6ICIxMDAlIiwKCQkJCQliYWNrZ3JvdW5kOiAidHJhbnNwYXJlbnQiLAoJCQkJCWJvcmRlcjogIm5vbmUiLAoJCQkJCW1hcmdpbjogMCwKCQkJCQlwYWRkaW5nOiAwCgkJCQl9KSwKCQkJLy8gU3RvcmUgdGhlIHNpemUgaW4gY2FzZSB3aWR0aC9oZWlnaHQgYXJlIGRlZmluZWQgaW4gJSAtIEZpeGVzICM1MjQ1CgkJCXNpemUgPSB7CgkJCQl3aWR0aDogZWxlbWVudC53aWR0aCgpLAoJCQkJaGVpZ2h0OiBlbGVtZW50LmhlaWdodCgpCgkJCX0sCgkJCWFjdGl2ZSA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7CgoJCS8vIHN1cHBvcnQ6IEZpcmVmb3gKCQkvLyBGaXJlZm94IGluY29ycmVjdGx5IGV4cG9zZXMgYW5vbnltb3VzIGNvbnRlbnQKCQkvLyBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD01NjE2NjQKCQl0cnkgewoJCQlhY3RpdmUuaWQ7CgkJfSBjYXRjaCggZSApIHsKCQkJYWN0aXZlID0gZG9jdW1lbnQuYm9keTsKCQl9CgoJCWVsZW1lbnQud3JhcCggd3JhcHBlciApOwoKCQkvLyBGaXhlcyAjNzU5NSAtIEVsZW1lbnRzIGxvc2UgZm9jdXMgd2hlbiB3cmFwcGVkLgoJCWlmICggZWxlbWVudFsgMCBdID09PSBhY3RpdmUgfHwgJC5jb250YWlucyggZWxlbWVudFsgMCBdLCBhY3RpdmUgKSApIHsKCQkJJCggYWN0aXZlICkuZm9jdXMoKTsKCQl9CgoJCXdyYXBwZXIgPSBlbGVtZW50LnBhcmVudCgpOyAvL0hvdGZpeCBmb3IgalF1ZXJ5IDEuNCBzaW5jZSBzb21lIGNoYW5nZSBpbiB3cmFwKCkgc2VlbXMgdG8gYWN0dWFsbHkgbG9zZSB0aGUgcmVmZXJlbmNlIHRvIHRoZSB3cmFwcGVkIGVsZW1lbnQKCgkJLy8gdHJhbnNmZXIgcG9zaXRpb25pbmcgcHJvcGVydGllcyB0byB0aGUgd3JhcHBlcgoJCWlmICggZWxlbWVudC5jc3MoICJwb3NpdGlvbiIgKSA9PT0gInN0YXRpYyIgKSB7CgkJCXdyYXBwZXIuY3NzKHsgcG9zaXRpb246ICJyZWxhdGl2ZSIgfSk7CgkJCWVsZW1lbnQuY3NzKHsgcG9zaXRpb246ICJyZWxhdGl2ZSIgfSk7CgkJfSBlbHNlIHsKCQkJJC5leHRlbmQoIHByb3BzLCB7CgkJCQlwb3NpdGlvbjogZWxlbWVudC5jc3MoICJwb3NpdGlvbiIgKSwKCQkJCXpJbmRleDogZWxlbWVudC5jc3MoICJ6LWluZGV4IiApCgkJCX0pOwoJCQkkLmVhY2goWyAidG9wIiwgImxlZnQiLCAiYm90dG9tIiwgInJpZ2h0IiBdLCBmdW5jdGlvbihpLCBwb3MpIHsKCQkJCXByb3BzWyBwb3MgXSA9IGVsZW1lbnQuY3NzKCBwb3MgKTsKCQkJCWlmICggaXNOYU4oIHBhcnNlSW50KCBwcm9wc1sgcG9zIF0sIDEwICkgKSApIHsKCQkJCQlwcm9wc1sgcG9zIF0gPSAiYXV0byI7CgkJCQl9CgkJCX0pOwoJCQllbGVtZW50LmNzcyh7CgkJCQlwb3NpdGlvbjogInJlbGF0aXZlIiwKCQkJCXRvcDogMCwKCQkJCWxlZnQ6IDAsCgkJCQlyaWdodDogImF1dG8iLAoJCQkJYm90dG9tOiAiYXV0byIKCQkJfSk7CgkJfQoJCWVsZW1lbnQuY3NzKHNpemUpOwoKCQlyZXR1cm4gd3JhcHBlci5jc3MoIHByb3BzICkuc2hvdygpOwoJfSwKCglyZW1vdmVXcmFwcGVyOiBmdW5jdGlvbiggZWxlbWVudCApIHsKCQl2YXIgYWN0aXZlID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDsKCgkJaWYgKCBlbGVtZW50LnBhcmVudCgpLmlzKCAiLnVpLWVmZmVjdHMtd3JhcHBlciIgKSApIHsKCQkJZWxlbWVudC5wYXJlbnQoKS5yZXBsYWNlV2l0aCggZWxlbWVudCApOwoKCQkJLy8gRml4ZXMgIzc1OTUgLSBFbGVtZW50cyBsb3NlIGZvY3VzIHdoZW4gd3JhcHBlZC4KCQkJaWYgKCBlbGVtZW50WyAwIF0gPT09IGFjdGl2ZSB8fCAkLmNvbnRhaW5zKCBlbGVtZW50WyAwIF0sIGFjdGl2ZSApICkgewoJCQkJJCggYWN0aXZlICkuZm9jdXMoKTsKCQkJfQoJCX0KCgoJCXJldHVybiBlbGVtZW50OwoJfSwKCglzZXRUcmFuc2l0aW9uOiBmdW5jdGlvbiggZWxlbWVudCwgbGlzdCwgZmFjdG9yLCB2YWx1ZSApIHsKCQl2YWx1ZSA9IHZhbHVlIHx8IHt9OwoJCSQuZWFjaCggbGlzdCwgZnVuY3Rpb24oIGksIHggKSB7CgkJCXZhciB1bml0ID0gZWxlbWVudC5jc3NVbml0KCB4ICk7CgkJCWlmICggdW5pdFsgMCBdID4gMCApIHsKCQkJCXZhbHVlWyB4IF0gPSB1bml0WyAwIF0gKiBmYWN0b3IgKyB1bml0WyAxIF07CgkJCX0KCQl9KTsKCQlyZXR1cm4gdmFsdWU7Cgl9Cn0pOwoKLy8gcmV0dXJuIGFuIGVmZmVjdCBvcHRpb25zIG9iamVjdCBmb3IgdGhlIGdpdmVuIHBhcmFtZXRlcnM6CmZ1bmN0aW9uIF9ub3JtYWxpemVBcmd1bWVudHMoIGVmZmVjdCwgb3B0aW9ucywgc3BlZWQsIGNhbGxiYWNrICkgewoKCS8vIGFsbG93IHBhc3NpbmcgYWxsIG9wdGlvbnMgYXMgdGhlIGZpcnN0IHBhcmFtZXRlcgoJaWYgKCAkLmlzUGxhaW5PYmplY3QoIGVmZmVjdCApICkgewoJCW9wdGlvbnMgPSBlZmZlY3Q7CgkJZWZmZWN0ID0gZWZmZWN0LmVmZmVjdDsKCX0KCgkvLyBjb252ZXJ0IHRvIGFuIG9iamVjdAoJZWZmZWN0ID0geyBlZmZlY3Q6IGVmZmVjdCB9OwoKCS8vIGNhdGNoIChlZmZlY3QsIG51bGwsIC4uLikKCWlmICggb3B0aW9ucyA9PSBudWxsICkgewoJCW9wdGlvbnMgPSB7fTsKCX0KCgkvLyBjYXRjaCAoZWZmZWN0LCBjYWxsYmFjaykKCWlmICggJC5pc0Z1bmN0aW9uKCBvcHRpb25zICkgKSB7CgkJY2FsbGJhY2sgPSBvcHRpb25zOwoJCXNwZWVkID0gbnVsbDsKCQlvcHRpb25zID0ge307Cgl9CgoJLy8gY2F0Y2ggKGVmZmVjdCwgc3BlZWQsID8pCglpZiAoIHR5cGVvZiBvcHRpb25zID09PSAibnVtYmVyIiB8fCAkLmZ4LnNwZWVkc1sgb3B0aW9ucyBdICkgewoJCWNhbGxiYWNrID0gc3BlZWQ7CgkJc3BlZWQgPSBvcHRpb25zOwoJCW9wdGlvbnMgPSB7fTsKCX0KCgkvLyBjYXRjaCAoZWZmZWN0LCBvcHRpb25zLCBjYWxsYmFjaykKCWlmICggJC5pc0Z1bmN0aW9uKCBzcGVlZCApICkgewoJCWNhbGxiYWNrID0gc3BlZWQ7CgkJc3BlZWQgPSBudWxsOwoJfQoKCS8vIGFkZCBvcHRpb25zIHRvIGVmZmVjdAoJaWYgKCBvcHRpb25zICkgewoJCSQuZXh0ZW5kKCBlZmZlY3QsIG9wdGlvbnMgKTsKCX0KCglzcGVlZCA9IHNwZWVkIHx8IG9wdGlvbnMuZHVyYXRpb247CgllZmZlY3QuZHVyYXRpb24gPSAkLmZ4Lm9mZiA/IDAgOgoJCXR5cGVvZiBzcGVlZCA9PT0gIm51bWJlciIgPyBzcGVlZCA6CgkJc3BlZWQgaW4gJC5meC5zcGVlZHMgPyAkLmZ4LnNwZWVkc1sgc3BlZWQgXSA6CgkJJC5meC5zcGVlZHMuX2RlZmF1bHQ7CgoJZWZmZWN0LmNvbXBsZXRlID0gY2FsbGJhY2sgfHwgb3B0aW9ucy5jb21wbGV0ZTsKCglyZXR1cm4gZWZmZWN0Owp9CgpmdW5jdGlvbiBzdGFuZGFyZFNwZWVkKCBzcGVlZCApIHsKCS8vIHZhbGlkIHN0YW5kYXJkIHNwZWVkcwoJaWYgKCAhc3BlZWQgfHwgdHlwZW9mIHNwZWVkID09PSAibnVtYmVyIiB8fCAkLmZ4LnNwZWVkc1sgc3BlZWQgXSApIHsKCQlyZXR1cm4gdHJ1ZTsKCX0KCgkvLyBpbnZhbGlkIHN0cmluZ3MgLSB0cmVhdCBhcyAibm9ybWFsIiBzcGVlZAoJaWYgKCB0eXBlb2Ygc3BlZWQgPT09ICJzdHJpbmciICYmICEkLmVmZmVjdHMuZWZmZWN0WyBzcGVlZCBdICkgewoJCS8vIFRPRE86IHJlbW92ZSBpbiAyLjAgKCM3MTE1KQoJCWlmICggYmFja0NvbXBhdCAmJiAkLmVmZmVjdHNbIHNwZWVkIF0gKSB7CgkJCXJldHVybiBmYWxzZTsKCQl9CgkJcmV0dXJuIHRydWU7Cgl9CgoJcmV0dXJuIGZhbHNlOwp9CgokLmZuLmV4dGVuZCh7CgllZmZlY3Q6IGZ1bmN0aW9uKCAvKiBlZmZlY3QsIG9wdGlvbnMsIHNwZWVkLCBjYWxsYmFjayAqLyApIHsKCQl2YXIgYXJncyA9IF9ub3JtYWxpemVBcmd1bWVudHMuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApLAoJCQltb2RlID0gYXJncy5tb2RlLAoJCQlxdWV1ZSA9IGFyZ3MucXVldWUsCgkJCWVmZmVjdE1ldGhvZCA9ICQuZWZmZWN0cy5lZmZlY3RbIGFyZ3MuZWZmZWN0IF0sCgoJCQkvLyBERVBSRUNBVEVEOiByZW1vdmUgaW4gMi4wICgjNzExNSkKCQkJb2xkRWZmZWN0TWV0aG9kID0gIWVmZmVjdE1ldGhvZCAmJiBiYWNrQ29tcGF0ICYmICQuZWZmZWN0c1sgYXJncy5lZmZlY3QgXTsKCgkJaWYgKCAkLmZ4Lm9mZiB8fCAhKCBlZmZlY3RNZXRob2QgfHwgb2xkRWZmZWN0TWV0aG9kICkgKSB7CgkJCS8vIGRlbGVnYXRlIHRvIHRoZSBvcmlnaW5hbCBtZXRob2QgKGUuZy4sIC5zaG93KCkpIGlmIHBvc3NpYmxlCgkJCWlmICggbW9kZSApIHsKCQkJCXJldHVybiB0aGlzWyBtb2RlIF0oIGFyZ3MuZHVyYXRpb24sIGFyZ3MuY29tcGxldGUgKTsKCQkJfSBlbHNlIHsKCQkJCXJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkgewoJCQkJCWlmICggYXJncy5jb21wbGV0ZSApIHsKCQkJCQkJYXJncy5jb21wbGV0ZS5jYWxsKCB0aGlzICk7CgkJCQkJfQoJCQkJfSk7CgkJCX0KCQl9CgoJCWZ1bmN0aW9uIHJ1biggbmV4dCApIHsKCQkJdmFyIGVsZW0gPSAkKCB0aGlzICksCgkJCQljb21wbGV0ZSA9IGFyZ3MuY29tcGxldGUsCgkJCQltb2RlID0gYXJncy5tb2RlOwoKCQkJZnVuY3Rpb24gZG9uZSgpIHsKCQkJCWlmICggJC5pc0Z1bmN0aW9uKCBjb21wbGV0ZSApICkgewoJCQkJCWNvbXBsZXRlLmNhbGwoIGVsZW1bMF0gKTsKCQkJCX0KCQkJCWlmICggJC5pc0Z1bmN0aW9uKCBuZXh0ICkgKSB7CgkJCQkJbmV4dCgpOwoJCQkJfQoJCQl9CgoJCQkvLyBpZiB0aGUgZWxlbWVudCBpcyBoaWRkZGVuIGFuZCBtb2RlIGlzIGhpZGUsCgkJCS8vIG9yIGVsZW1lbnQgaXMgdmlzaWJsZSBhbmQgbW9kZSBpcyBzaG93CgkJCWlmICggZWxlbS5pcyggIjpoaWRkZW4iICkgPyBtb2RlID09PSAiaGlkZSIgOiBtb2RlID09PSAic2hvdyIgKSB7CgkJCQlkb25lKCk7CgkJCX0gZWxzZSB7CgkJCQllZmZlY3RNZXRob2QuY2FsbCggZWxlbVswXSwgYXJncywgZG9uZSApOwoJCQl9CgkJfQoKCQkvLyBUT0RPOiByZW1vdmUgdGhpcyBjaGVjayBpbiAyLjAsIGVmZmVjdE1ldGhvZCB3aWxsIGFsd2F5cyBiZSB0cnVlCgkJaWYgKCBlZmZlY3RNZXRob2QgKSB7CgkJCXJldHVybiBxdWV1ZSA9PT0gZmFsc2UgPyB0aGlzLmVhY2goIHJ1biApIDogdGhpcy5xdWV1ZSggcXVldWUgfHwgImZ4IiwgcnVuICk7CgkJfSBlbHNlIHsKCQkJLy8gREVQUkVDQVRFRDogcmVtb3ZlIGluIDIuMCAoIzcxMTUpCgkJCXJldHVybiBvbGRFZmZlY3RNZXRob2QuY2FsbCh0aGlzLCB7CgkJCQlvcHRpb25zOiBhcmdzLAoJCQkJZHVyYXRpb246IGFyZ3MuZHVyYXRpb24sCgkJCQljYWxsYmFjazogYXJncy5jb21wbGV0ZSwKCQkJCW1vZGU6IGFyZ3MubW9kZQoJCQl9KTsKCQl9Cgl9LAoKCV9zaG93OiAkLmZuLnNob3csCglzaG93OiBmdW5jdGlvbiggc3BlZWQgKSB7CgkJaWYgKCBzdGFuZGFyZFNwZWVkKCBzcGVlZCApICkgewoJCQlyZXR1cm4gdGhpcy5fc2hvdy5hcHBseSggdGhpcywgYXJndW1lbnRzICk7CgkJfSBlbHNlIHsKCQkJdmFyIGFyZ3MgPSBfbm9ybWFsaXplQXJndW1lbnRzLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTsKCQkJYXJncy5tb2RlID0gInNob3ciOwoJCQlyZXR1cm4gdGhpcy5lZmZlY3QuY2FsbCggdGhpcywgYXJncyApOwoJCX0KCX0sCgoJX2hpZGU6ICQuZm4uaGlkZSwKCWhpZGU6IGZ1bmN0aW9uKCBzcGVlZCApIHsKCQlpZiAoIHN0YW5kYXJkU3BlZWQoIHNwZWVkICkgKSB7CgkJCXJldHVybiB0aGlzLl9oaWRlLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTsKCQl9IGVsc2UgewoJCQl2YXIgYXJncyA9IF9ub3JtYWxpemVBcmd1bWVudHMuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApOwoJCQlhcmdzLm1vZGUgPSAiaGlkZSI7CgkJCXJldHVybiB0aGlzLmVmZmVjdC5jYWxsKCB0aGlzLCBhcmdzICk7CgkJfQoJfSwKCgkvLyBqUXVlcnkgY29yZSBvdmVybG9hZHMgdG9nZ2xlIGFuZCBjcmVhdGVzIF90b2dnbGUKCV9fdG9nZ2xlOiAkLmZuLnRvZ2dsZSwKCXRvZ2dsZTogZnVuY3Rpb24oIHNwZWVkICkgewoJCWlmICggc3RhbmRhcmRTcGVlZCggc3BlZWQgKSB8fCB0eXBlb2Ygc3BlZWQgPT09ICJib29sZWFuIiB8fCAkLmlzRnVuY3Rpb24oIHNwZWVkICkgKSB7CgkJCXJldHVybiB0aGlzLl9fdG9nZ2xlLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTsKCQl9IGVsc2UgewoJCQl2YXIgYXJncyA9IF9ub3JtYWxpemVBcmd1bWVudHMuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApOwoJCQlhcmdzLm1vZGUgPSAidG9nZ2xlIjsKCQkJcmV0dXJuIHRoaXMuZWZmZWN0LmNhbGwoIHRoaXMsIGFyZ3MgKTsKCQl9Cgl9LAoKCS8vIGhlbHBlciBmdW5jdGlvbnMKCWNzc1VuaXQ6IGZ1bmN0aW9uKGtleSkgewoJCXZhciBzdHlsZSA9IHRoaXMuY3NzKCBrZXkgKSwKCQkJdmFsID0gW107CgoJCSQuZWFjaCggWyAiZW0iLCAicHgiLCAiJSIsICJwdCIgXSwgZnVuY3Rpb24oIGksIHVuaXQgKSB7CgkJCWlmICggc3R5bGUuaW5kZXhPZiggdW5pdCApID4gMCApIHsKCQkJCXZhbCA9IFsgcGFyc2VGbG9hdCggc3R5bGUgKSwgdW5pdCBdOwoJCQl9CgkJfSk7CgkJcmV0dXJuIHZhbDsKCX0KfSk7Cgp9KSgpOwoKLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIEVBU0lORyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCihmdW5jdGlvbigpIHsKCi8vIGJhc2VkIG9uIGVhc2luZyBlcXVhdGlvbnMgZnJvbSBSb2JlcnQgUGVubmVyIChodHRwOi8vd3d3LnJvYmVydHBlbm5lci5jb20vZWFzaW5nKQoKdmFyIGJhc2VFYXNpbmdzID0ge307CgokLmVhY2goIFsgIlF1YWQiLCAiQ3ViaWMiLCAiUXVhcnQiLCAiUXVpbnQiLCAiRXhwbyIgXSwgZnVuY3Rpb24oIGksIG5hbWUgKSB7CgliYXNlRWFzaW5nc1sgbmFtZSBdID0gZnVuY3Rpb24oIHAgKSB7CgkJcmV0dXJuIE1hdGgucG93KCBwLCBpICsgMiApOwoJfTsKfSk7CgokLmV4dGVuZCggYmFzZUVhc2luZ3MsIHsKCVNpbmU6IGZ1bmN0aW9uICggcCApIHsKCQlyZXR1cm4gMSAtIE1hdGguY29zKCBwICogTWF0aC5QSSAvIDIgKTsKCX0sCglDaXJjOiBmdW5jdGlvbiAoIHAgKSB7CgkJcmV0dXJuIDEgLSBNYXRoLnNxcnQoIDEgLSBwICogcCApOwoJfSwKCUVsYXN0aWM6IGZ1bmN0aW9uKCBwICkgewoJCXJldHVybiBwID09PSAwIHx8IHAgPT09IDEgPyBwIDoKCQkJLU1hdGgucG93KCAyLCA4ICogKHAgLSAxKSApICogTWF0aC5zaW4oICggKHAgLSAxKSAqIDgwIC0gNy41ICkgKiBNYXRoLlBJIC8gMTUgKTsKCX0sCglCYWNrOiBmdW5jdGlvbiggcCApIHsKCQlyZXR1cm4gcCAqIHAgKiAoIDMgKiBwIC0gMiApOwoJfSwKCUJvdW5jZTogZnVuY3Rpb24gKCBwICkgewoJCXZhciBwb3cyLAoJCQlib3VuY2UgPSA0OwoKCQl3aGlsZSAoIHAgPCAoICggcG93MiA9IE1hdGgucG93KCAyLCAtLWJvdW5jZSApICkgLSAxICkgLyAxMSApIHt9CgkJcmV0dXJuIDEgLyBNYXRoLnBvdyggNCwgMyAtIGJvdW5jZSApIC0gNy41NjI1ICogTWF0aC5wb3coICggcG93MiAqIDMgLSAyICkgLyAyMiAtIHAsIDIgKTsKCX0KfSk7CgokLmVhY2goIGJhc2VFYXNpbmdzLCBmdW5jdGlvbiggbmFtZSwgZWFzZUluICkgewoJJC5lYXNpbmdbICJlYXNlSW4iICsgbmFtZSBdID0gZWFzZUluOwoJJC5lYXNpbmdbICJlYXNlT3V0IiArIG5hbWUgXSA9IGZ1bmN0aW9uKCBwICkgewoJCXJldHVybiAxIC0gZWFzZUluKCAxIC0gcCApOwoJfTsKCSQuZWFzaW5nWyAiZWFzZUluT3V0IiArIG5hbWUgXSA9IGZ1bmN0aW9uKCBwICkgewoJCXJldHVybiBwIDwgMC41ID8KCQkJZWFzZUluKCBwICogMiApIC8gMiA6CgkJCTEgLSBlYXNlSW4oIHAgKiAtMiArIDIgKSAvIDI7Cgl9Owp9KTsKCn0pKCk7Cgp9KShqUXVlcnkpKTsKKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7Cgp2YXIgcnZlcnRpY2FsID0gL3VwfGRvd258dmVydGljYWwvLAoJcnBvc2l0aXZlbW90aW9uID0gL3VwfGxlZnR8dmVydGljYWx8aG9yaXpvbnRhbC87CgokLmVmZmVjdHMuZWZmZWN0LmJsaW5kID0gZnVuY3Rpb24oIG8sIGRvbmUgKSB7CgkvLyBDcmVhdGUgZWxlbWVudAoJdmFyIGVsID0gJCggdGhpcyApLAoJCXByb3BzID0gWyAicG9zaXRpb24iLCAidG9wIiwgImJvdHRvbSIsICJsZWZ0IiwgInJpZ2h0IiwgImhlaWdodCIsICJ3aWR0aCIgXSwKCQltb2RlID0gJC5lZmZlY3RzLnNldE1vZGUoIGVsLCBvLm1vZGUgfHwgImhpZGUiICksCgkJZGlyZWN0aW9uID0gby5kaXJlY3Rpb24gfHwgInVwIiwKCQl2ZXJ0aWNhbCA9IHJ2ZXJ0aWNhbC50ZXN0KCBkaXJlY3Rpb24gKSwKCQlyZWYgPSB2ZXJ0aWNhbCA/ICJoZWlnaHQiIDogIndpZHRoIiwKCQlyZWYyID0gdmVydGljYWwgPyAidG9wIiA6ICJsZWZ0IiwKCQltb3Rpb24gPSBycG9zaXRpdmVtb3Rpb24udGVzdCggZGlyZWN0aW9uICksCgkJYW5pbWF0aW9uID0ge30sCgkJc2hvdyA9IG1vZGUgPT09ICJzaG93IiwKCQl3cmFwcGVyLCBkaXN0YW5jZSwgbWFyZ2luOwoKCS8vIGlmIGFscmVhZHkgd3JhcHBlZCwgdGhlIHdyYXBwZXIncyBwcm9wZXJ0aWVzIGFyZSBteSBwcm9wZXJ0eS4gIzYyNDUKCWlmICggZWwucGFyZW50KCkuaXMoICIudWktZWZmZWN0cy13cmFwcGVyIiApICkgewoJCSQuZWZmZWN0cy5zYXZlKCBlbC5wYXJlbnQoKSwgcHJvcHMgKTsKCX0gZWxzZSB7CgkJJC5lZmZlY3RzLnNhdmUoIGVsLCBwcm9wcyApOwoJfQoJZWwuc2hvdygpOwoJd3JhcHBlciA9ICQuZWZmZWN0cy5jcmVhdGVXcmFwcGVyKCBlbCApLmNzcyh7CgkJb3ZlcmZsb3c6ICJoaWRkZW4iCgl9KTsKCglkaXN0YW5jZSA9IHdyYXBwZXJbIHJlZiBdKCk7CgltYXJnaW4gPSBwYXJzZUZsb2F0KCB3cmFwcGVyLmNzcyggcmVmMiApICkgfHwgMDsKCglhbmltYXRpb25bIHJlZiBdID0gc2hvdyA/IGRpc3RhbmNlIDogMDsKCWlmICggIW1vdGlvbiApIHsKCQllbAoJCQkuY3NzKCB2ZXJ0aWNhbCA/ICJib3R0b20iIDogInJpZ2h0IiwgMCApCgkJCS5jc3MoIHZlcnRpY2FsID8gInRvcCIgOiAibGVmdCIsICJhdXRvIiApCgkJCS5jc3MoeyBwb3NpdGlvbjogImFic29sdXRlIiB9KTsKCgkJYW5pbWF0aW9uWyByZWYyIF0gPSBzaG93ID8gbWFyZ2luIDogZGlzdGFuY2UgKyBtYXJnaW47Cgl9CgoJLy8gc3RhcnQgYXQgMCBpZiB3ZSBhcmUgc2hvd2luZwoJaWYgKCBzaG93ICkgewoJCXdyYXBwZXIuY3NzKCByZWYsIDAgKTsKCQlpZiAoICEgbW90aW9uICkgewoJCQl3cmFwcGVyLmNzcyggcmVmMiwgbWFyZ2luICsgZGlzdGFuY2UgKTsKCQl9Cgl9CgoJLy8gQW5pbWF0ZQoJd3JhcHBlci5hbmltYXRlKCBhbmltYXRpb24sIHsKCQlkdXJhdGlvbjogby5kdXJhdGlvbiwKCQllYXNpbmc6IG8uZWFzaW5nLAoJCXF1ZXVlOiBmYWxzZSwKCQljb21wbGV0ZTogZnVuY3Rpb24oKSB7CgkJCWlmICggbW9kZSA9PT0gImhpZGUiICkgewoJCQkJZWwuaGlkZSgpOwoJCQl9CgkJCSQuZWZmZWN0cy5yZXN0b3JlKCBlbCwgcHJvcHMgKTsKCQkJJC5lZmZlY3RzLnJlbW92ZVdyYXBwZXIoIGVsICk7CgkJCWRvbmUoKTsKCQl9Cgl9KTsKCn07Cgp9KShqUXVlcnkpOwooZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHsKCiQuZWZmZWN0cy5lZmZlY3QuYm91bmNlID0gZnVuY3Rpb24oIG8sIGRvbmUgKSB7Cgl2YXIgZWwgPSAkKCB0aGlzICksCgkJcHJvcHMgPSBbICJwb3NpdGlvbiIsICJ0b3AiLCAiYm90dG9tIiwgImxlZnQiLCAicmlnaHQiLCAiaGVpZ2h0IiwgIndpZHRoIiBdLAoKCQkvLyBkZWZhdWx0czoKCQltb2RlID0gJC5lZmZlY3RzLnNldE1vZGUoIGVsLCBvLm1vZGUgfHwgImVmZmVjdCIgKSwKCQloaWRlID0gbW9kZSA9PT0gImhpZGUiLAoJCXNob3cgPSBtb2RlID09PSAic2hvdyIsCgkJZGlyZWN0aW9uID0gby5kaXJlY3Rpb24gfHwgInVwIiwKCQlkaXN0YW5jZSA9IG8uZGlzdGFuY2UsCgkJdGltZXMgPSBvLnRpbWVzIHx8IDUsCgoJCS8vIG51bWJlciBvZiBpbnRlcm5hbCBhbmltYXRpb25zCgkJYW5pbXMgPSB0aW1lcyAqIDIgKyAoIHNob3cgfHwgaGlkZSA/IDEgOiAwICksCgkJc3BlZWQgPSBvLmR1cmF0aW9uIC8gYW5pbXMsCgkJZWFzaW5nID0gby5lYXNpbmcsCgoJCS8vIHV0aWxpdHk6CgkJcmVmID0gKCBkaXJlY3Rpb24gPT09ICJ1cCIgfHwgZGlyZWN0aW9uID09PSAiZG93biIgKSA/ICJ0b3AiIDogImxlZnQiLAoJCW1vdGlvbiA9ICggZGlyZWN0aW9uID09PSAidXAiIHx8IGRpcmVjdGlvbiA9PT0gImxlZnQiICksCgkJaSwKCQl1cEFuaW0sCgkJZG93bkFuaW0sCgoJCS8vIHdlIHdpbGwgbmVlZCB0byByZS1hc3NlbWJsZSB0aGUgcXVldWUgdG8gc3RhY2sgb3VyIGFuaW1hdGlvbnMgaW4gcGxhY2UKCQlxdWV1ZSA9IGVsLnF1ZXVlKCksCgkJcXVldWVsZW4gPSBxdWV1ZS5sZW5ndGg7CgoJLy8gQXZvaWQgdG91Y2hpbmcgb3BhY2l0eSB0byBwcmV2ZW50IGNsZWFyVHlwZSBhbmQgUE5HIGlzc3VlcyBpbiBJRQoJaWYgKCBzaG93IHx8IGhpZGUgKSB7CgkJcHJvcHMucHVzaCggIm9wYWNpdHkiICk7Cgl9CgoJJC5lZmZlY3RzLnNhdmUoIGVsLCBwcm9wcyApOwoJZWwuc2hvdygpOwoJJC5lZmZlY3RzLmNyZWF0ZVdyYXBwZXIoIGVsICk7IC8vIENyZWF0ZSBXcmFwcGVyCgoJLy8gZGVmYXVsdCBkaXN0YW5jZSBmb3IgdGhlIEJJR0dFU1QgYm91bmNlIGlzIHRoZSBvdXRlciBEaXN0YW5jZSAvIDMKCWlmICggIWRpc3RhbmNlICkgewoJCWRpc3RhbmNlID0gZWxbIHJlZiA9PT0gInRvcCIgPyAib3V0ZXJIZWlnaHQiIDogIm91dGVyV2lkdGgiIF0oKSAvIDM7Cgl9CgoJaWYgKCBzaG93ICkgewoJCWRvd25BbmltID0geyBvcGFjaXR5OiAxIH07CgkJZG93bkFuaW1bIHJlZiBdID0gMDsKCgkJLy8gaWYgd2UgYXJlIHNob3dpbmcsIGZvcmNlIG9wYWNpdHkgMCBhbmQgc2V0IHRoZSBpbml0aWFsIHBvc2l0aW9uCgkJLy8gdGhlbiBkbyB0aGUgImZpcnN0IiBhbmltYXRpb24KCQllbC5jc3MoICJvcGFjaXR5IiwgMCApCgkJCS5jc3MoIHJlZiwgbW90aW9uID8gLWRpc3RhbmNlICogMiA6IGRpc3RhbmNlICogMiApCgkJCS5hbmltYXRlKCBkb3duQW5pbSwgc3BlZWQsIGVhc2luZyApOwoJfQoKCS8vIHN0YXJ0IGF0IHRoZSBzbWFsbGVzdCBkaXN0YW5jZSBpZiB3ZSBhcmUgaGlkaW5nCglpZiAoIGhpZGUgKSB7CgkJZGlzdGFuY2UgPSBkaXN0YW5jZSAvIE1hdGgucG93KCAyLCB0aW1lcyAtIDEgKTsKCX0KCglkb3duQW5pbSA9IHt9OwoJZG93bkFuaW1bIHJlZiBdID0gMDsKCS8vIEJvdW5jZXMgdXAvZG93bi9sZWZ0L3JpZ2h0IHRoZW4gYmFjayB0byAwIC0tIHRpbWVzICogMiBhbmltYXRpb25zIGhhcHBlbiBoZXJlCglmb3IgKCBpID0gMDsgaSA8IHRpbWVzOyBpKysgKSB7CgkJdXBBbmltID0ge307CgkJdXBBbmltWyByZWYgXSA9ICggbW90aW9uID8gIi09IiA6ICIrPSIgKSArIGRpc3RhbmNlOwoKCQllbC5hbmltYXRlKCB1cEFuaW0sIHNwZWVkLCBlYXNpbmcgKQoJCQkuYW5pbWF0ZSggZG93bkFuaW0sIHNwZWVkLCBlYXNpbmcgKTsKCgkJZGlzdGFuY2UgPSBoaWRlID8gZGlzdGFuY2UgKiAyIDogZGlzdGFuY2UgLyAyOwoJfQoKCS8vIExhc3QgQm91bmNlIHdoZW4gSGlkaW5nCglpZiAoIGhpZGUgKSB7CgkJdXBBbmltID0geyBvcGFjaXR5OiAwIH07CgkJdXBBbmltWyByZWYgXSA9ICggbW90aW9uID8gIi09IiA6ICIrPSIgKSArIGRpc3RhbmNlOwoKCQllbC5hbmltYXRlKCB1cEFuaW0sIHNwZWVkLCBlYXNpbmcgKTsKCX0KCgllbC5xdWV1ZShmdW5jdGlvbigpIHsKCQlpZiAoIGhpZGUgKSB7CgkJCWVsLmhpZGUoKTsKCQl9CgkJJC5lZmZlY3RzLnJlc3RvcmUoIGVsLCBwcm9wcyApOwoJCSQuZWZmZWN0cy5yZW1vdmVXcmFwcGVyKCBlbCApOwoJCWRvbmUoKTsKCX0pOwoKCS8vIGluamVjdCBhbGwgdGhlIGFuaW1hdGlvbnMgd2UganVzdCBxdWV1ZWQgdG8gYmUgZmlyc3QgaW4gbGluZSAoYWZ0ZXIgImlucHJvZ3Jlc3MiKQoJaWYgKCBxdWV1ZWxlbiA+IDEpIHsKCQlxdWV1ZS5zcGxpY2UuYXBwbHkoIHF1ZXVlLAoJCQlbIDEsIDAgXS5jb25jYXQoIHF1ZXVlLnNwbGljZSggcXVldWVsZW4sIGFuaW1zICsgMSApICkgKTsKCX0KCWVsLmRlcXVldWUoKTsKCn07Cgp9KShqUXVlcnkpOwooZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHsKCiQuZWZmZWN0cy5lZmZlY3QuY2xpcCA9IGZ1bmN0aW9uKCBvLCBkb25lICkgewoJLy8gQ3JlYXRlIGVsZW1lbnQKCXZhciBlbCA9ICQoIHRoaXMgKSwKCQlwcm9wcyA9IFsgInBvc2l0aW9uIiwgInRvcCIsICJib3R0b20iLCAibGVmdCIsICJyaWdodCIsICJoZWlnaHQiLCAid2lkdGgiIF0sCgkJbW9kZSA9ICQuZWZmZWN0cy5zZXRNb2RlKCBlbCwgby5tb2RlIHx8ICJoaWRlIiApLAoJCXNob3cgPSBtb2RlID09PSAic2hvdyIsCgkJZGlyZWN0aW9uID0gby5kaXJlY3Rpb24gfHwgInZlcnRpY2FsIiwKCQl2ZXJ0ID0gZGlyZWN0aW9uID09PSAidmVydGljYWwiLAoJCXNpemUgPSB2ZXJ0ID8gImhlaWdodCIgOiAid2lkdGgiLAoJCXBvc2l0aW9uID0gdmVydCA/ICJ0b3AiIDogImxlZnQiLAoJCWFuaW1hdGlvbiA9IHt9LAoJCXdyYXBwZXIsIGFuaW1hdGUsIGRpc3RhbmNlOwoKCS8vIFNhdmUgJiBTaG93CgkkLmVmZmVjdHMuc2F2ZSggZWwsIHByb3BzICk7CgllbC5zaG93KCk7CgoJLy8gQ3JlYXRlIFdyYXBwZXIKCXdyYXBwZXIgPSAkLmVmZmVjdHMuY3JlYXRlV3JhcHBlciggZWwgKS5jc3MoewoJCW92ZXJmbG93OiAiaGlkZGVuIgoJfSk7CglhbmltYXRlID0gKCBlbFswXS50YWdOYW1lID09PSAiSU1HIiApID8gd3JhcHBlciA6IGVsOwoJZGlzdGFuY2UgPSBhbmltYXRlWyBzaXplIF0oKTsKCgkvLyBTaGlmdAoJaWYgKCBzaG93ICkgewoJCWFuaW1hdGUuY3NzKCBzaXplLCAwICk7CgkJYW5pbWF0ZS5jc3MoIHBvc2l0aW9uLCBkaXN0YW5jZSAvIDIgKTsKCX0KCgkvLyBDcmVhdGUgQW5pbWF0aW9uIE9iamVjdDoKCWFuaW1hdGlvblsgc2l6ZSBdID0gc2hvdyA/IGRpc3RhbmNlIDogMDsKCWFuaW1hdGlvblsgcG9zaXRpb24gXSA9IHNob3cgPyAwIDogZGlzdGFuY2UgLyAyOwoKCS8vIEFuaW1hdGUKCWFuaW1hdGUuYW5pbWF0ZSggYW5pbWF0aW9uLCB7CgkJcXVldWU6IGZhbHNlLAoJCWR1cmF0aW9uOiBvLmR1cmF0aW9uLAoJCWVhc2luZzogby5lYXNpbmcsCgkJY29tcGxldGU6IGZ1bmN0aW9uKCkgewoJCQlpZiAoICFzaG93ICkgewoJCQkJZWwuaGlkZSgpOwoJCQl9CgkJCSQuZWZmZWN0cy5yZXN0b3JlKCBlbCwgcHJvcHMgKTsKCQkJJC5lZmZlY3RzLnJlbW92ZVdyYXBwZXIoIGVsICk7CgkJCWRvbmUoKTsKCQl9Cgl9KTsKCn07Cgp9KShqUXVlcnkpOwooZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHsKCiQuZWZmZWN0cy5lZmZlY3QuZHJvcCA9IGZ1bmN0aW9uKCBvLCBkb25lICkgewoKCXZhciBlbCA9ICQoIHRoaXMgKSwKCQlwcm9wcyA9IFsgInBvc2l0aW9uIiwgInRvcCIsICJib3R0b20iLCAibGVmdCIsICJyaWdodCIsICJvcGFjaXR5IiwgImhlaWdodCIsICJ3aWR0aCIgXSwKCQltb2RlID0gJC5lZmZlY3RzLnNldE1vZGUoIGVsLCBvLm1vZGUgfHwgImhpZGUiICksCgkJc2hvdyA9IG1vZGUgPT09ICJzaG93IiwKCQlkaXJlY3Rpb24gPSBvLmRpcmVjdGlvbiB8fCAibGVmdCIsCgkJcmVmID0gKCBkaXJlY3Rpb24gPT09ICJ1cCIgfHwgZGlyZWN0aW9uID09PSAiZG93biIgKSA/ICJ0b3AiIDogImxlZnQiLAoJCW1vdGlvbiA9ICggZGlyZWN0aW9uID09PSAidXAiIHx8IGRpcmVjdGlvbiA9PT0gImxlZnQiICkgPyAicG9zIiA6ICJuZWciLAoJCWFuaW1hdGlvbiA9IHsKCQkJb3BhY2l0eTogc2hvdyA/IDEgOiAwCgkJfSwKCQlkaXN0YW5jZTsKCgkvLyBBZGp1c3QKCSQuZWZmZWN0cy5zYXZlKCBlbCwgcHJvcHMgKTsKCWVsLnNob3coKTsKCSQuZWZmZWN0cy5jcmVhdGVXcmFwcGVyKCBlbCApOwoKCWRpc3RhbmNlID0gby5kaXN0YW5jZSB8fCBlbFsgcmVmID09PSAidG9wIiA/ICJvdXRlckhlaWdodCI6ICJvdXRlcldpZHRoIiBdKCB0cnVlICkgLyAyOwoKCWlmICggc2hvdyApIHsKCQllbAoJCQkuY3NzKCAib3BhY2l0eSIsIDAgKQoJCQkuY3NzKCByZWYsIG1vdGlvbiA9PT0gInBvcyIgPyAtZGlzdGFuY2UgOiBkaXN0YW5jZSApOwoJfQoKCS8vIEFuaW1hdGlvbgoJYW5pbWF0aW9uWyByZWYgXSA9ICggc2hvdyA/CgkJKCBtb3Rpb24gPT09ICJwb3MiID8gIis9IiA6ICItPSIgKSA6CgkJKCBtb3Rpb24gPT09ICJwb3MiID8gIi09IiA6ICIrPSIgKSApICsKCQlkaXN0YW5jZTsKCgkvLyBBbmltYXRlCgllbC5hbmltYXRlKCBhbmltYXRpb24sIHsKCQlxdWV1ZTogZmFsc2UsCgkJZHVyYXRpb246IG8uZHVyYXRpb24sCgkJZWFzaW5nOiBvLmVhc2luZywKCQljb21wbGV0ZTogZnVuY3Rpb24oKSB7CgkJCWlmICggbW9kZSA9PT0gImhpZGUiICkgewoJCQkJZWwuaGlkZSgpOwoJCQl9CgkJCSQuZWZmZWN0cy5yZXN0b3JlKCBlbCwgcHJvcHMgKTsKCQkJJC5lZmZlY3RzLnJlbW92ZVdyYXBwZXIoIGVsICk7CgkJCWRvbmUoKTsKCQl9Cgl9KTsKfTsKCn0pKGpRdWVyeSk7CihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkgewoKJC5lZmZlY3RzLmVmZmVjdC5leHBsb2RlID0gZnVuY3Rpb24oIG8sIGRvbmUgKSB7CgoJdmFyIHJvd3MgPSBvLnBpZWNlcyA/IE1hdGgucm91bmQoIE1hdGguc3FydCggby5waWVjZXMgKSApIDogMywKCQljZWxscyA9IHJvd3MsCgkJZWwgPSAkKCB0aGlzICksCgkJbW9kZSA9ICQuZWZmZWN0cy5zZXRNb2RlKCBlbCwgby5tb2RlIHx8ICJoaWRlIiApLAoJCXNob3cgPSBtb2RlID09PSAic2hvdyIsCgoJCS8vIHNob3cgYW5kIHRoZW4gdmlzaWJpbGl0eTpoaWRkZW4gdGhlIGVsZW1lbnQgYmVmb3JlIGNhbGN1bGF0aW5nIG9mZnNldAoJCW9mZnNldCA9IGVsLnNob3coKS5jc3MoICJ2aXNpYmlsaXR5IiwgImhpZGRlbiIgKS5vZmZzZXQoKSwKCgkJLy8gd2lkdGggYW5kIGhlaWdodCBvZiBhIHBpZWNlCgkJd2lkdGggPSBNYXRoLmNlaWwoIGVsLm91dGVyV2lkdGgoKSAvIGNlbGxzICksCgkJaGVpZ2h0ID0gTWF0aC5jZWlsKCBlbC5vdXRlckhlaWdodCgpIC8gcm93cyApLAoJCXBpZWNlcyA9IFtdLAoKCQkvLyBsb29wCgkJaSwgaiwgbGVmdCwgdG9wLCBteCwgbXk7CgoJLy8gY2hpbGRyZW4gYW5pbWF0ZSBjb21wbGV0ZToKCWZ1bmN0aW9uIGNoaWxkQ29tcGxldGUoKSB7CgkJcGllY2VzLnB1c2goIHRoaXMgKTsKCQlpZiAoIHBpZWNlcy5sZW5ndGggPT09IHJvd3MgKiBjZWxscyApIHsKCQkJYW5pbUNvbXBsZXRlKCk7CgkJfQoJfQoKCS8vIGNsb25lIHRoZSBlbGVtZW50IGZvciBlYWNoIHJvdyBhbmQgY2VsbC4KCWZvciggaSA9IDA7IGkgPCByb3dzIDsgaSsrICkgeyAvLyA9PT0+CgkJdG9wID0gb2Zmc2V0LnRvcCArIGkgKiBoZWlnaHQ7CgkJbXkgPSBpIC0gKCByb3dzIC0gMSApIC8gMiA7CgoJCWZvciggaiA9IDA7IGogPCBjZWxscyA7IGorKyApIHsgLy8gfHx8CgkJCWxlZnQgPSBvZmZzZXQubGVmdCArIGogKiB3aWR0aDsKCQkJbXggPSBqIC0gKCBjZWxscyAtIDEgKSAvIDIgOwoKCQkJLy8gQ3JlYXRlIGEgY2xvbmUgb2YgdGhlIG5vdyBoaWRkZW4gbWFpbiBlbGVtZW50IHRoYXQgd2lsbCBiZSBhYnNvbHV0ZSBwb3NpdGlvbmVkCgkJCS8vIHdpdGhpbiBhIHdyYXBwZXIgZGl2IG9mZiB0aGUgLWxlZnQgYW5kIC10b3AgZXF1YWwgdG8gc2l6ZSBvZiBvdXIgcGllY2VzCgkJCWVsCgkJCQkuY2xvbmUoKQoJCQkJLmFwcGVuZFRvKCAiYm9keSIgKQoJCQkJLndyYXAoICI8ZGl2PjwvZGl2PiIgKQoJCQkJLmNzcyh7CgkJCQkJcG9zaXRpb246ICJhYnNvbHV0ZSIsCgkJCQkJdmlzaWJpbGl0eTogInZpc2libGUiLAoJCQkJCWxlZnQ6IC1qICogd2lkdGgsCgkJCQkJdG9wOiAtaSAqIGhlaWdodAoJCQkJfSkKCgkJCS8vIHNlbGVjdCB0aGUgd3JhcHBlciAtIG1ha2UgaXQgb3ZlcmZsb3c6IGhpZGRlbiBhbmQgYWJzb2x1dGUgcG9zaXRpb25lZCBiYXNlZCBvbgoJCQkvLyB3aGVyZSB0aGUgb3JpZ2luYWwgd2FzIGxvY2F0ZWQgK2xlZnQgYW5kICt0b3AgZXF1YWwgdG8gdGhlIHNpemUgb2YgcGllY2VzCgkJCQkucGFyZW50KCkKCQkJCS5hZGRDbGFzcyggInVpLWVmZmVjdHMtZXhwbG9kZSIgKQoJCQkJLmNzcyh7CgkJCQkJcG9zaXRpb246ICJhYnNvbHV0ZSIsCgkJCQkJb3ZlcmZsb3c6ICJoaWRkZW4iLAoJCQkJCXdpZHRoOiB3aWR0aCwKCQkJCQloZWlnaHQ6IGhlaWdodCwKCQkJCQlsZWZ0OiBsZWZ0ICsgKCBzaG93ID8gbXggKiB3aWR0aCA6IDAgKSwKCQkJCQl0b3A6IHRvcCArICggc2hvdyA/IG15ICogaGVpZ2h0IDogMCApLAoJCQkJCW9wYWNpdHk6IHNob3cgPyAwIDogMQoJCQkJfSkuYW5pbWF0ZSh7CgkJCQkJbGVmdDogbGVmdCArICggc2hvdyA/IDAgOiBteCAqIHdpZHRoICksCgkJCQkJdG9wOiB0b3AgKyAoIHNob3cgPyAwIDogbXkgKiBoZWlnaHQgKSwKCQkJCQlvcGFjaXR5OiBzaG93ID8gMSA6IDAKCQkJCX0sIG8uZHVyYXRpb24gfHwgNTAwLCBvLmVhc2luZywgY2hpbGRDb21wbGV0ZSApOwoJCX0KCX0KCglmdW5jdGlvbiBhbmltQ29tcGxldGUoKSB7CgkJZWwuY3NzKHsKCQkJdmlzaWJpbGl0eTogInZpc2libGUiCgkJfSk7CgkJJCggcGllY2VzICkucmVtb3ZlKCk7CgkJaWYgKCAhc2hvdyApIHsKCQkJZWwuaGlkZSgpOwoJCX0KCQlkb25lKCk7Cgl9Cn07Cgp9KShqUXVlcnkpOwooZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHsKCiQuZWZmZWN0cy5lZmZlY3QuZmFkZSA9IGZ1bmN0aW9uKCBvLCBkb25lICkgewoJdmFyIGVsID0gJCggdGhpcyApLAoJCW1vZGUgPSAkLmVmZmVjdHMuc2V0TW9kZSggZWwsIG8ubW9kZSB8fCAidG9nZ2xlIiApOwoKCWVsLmFuaW1hdGUoewoJCW9wYWNpdHk6IG1vZGUKCX0sIHsKCQlxdWV1ZTogZmFsc2UsCgkJZHVyYXRpb246IG8uZHVyYXRpb24sCgkJZWFzaW5nOiBvLmVhc2luZywKCQljb21wbGV0ZTogZG9uZQoJfSk7Cn07Cgp9KSggalF1ZXJ5ICk7CihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkgewoKJC5lZmZlY3RzLmVmZmVjdC5mb2xkID0gZnVuY3Rpb24oIG8sIGRvbmUgKSB7CgoJLy8gQ3JlYXRlIGVsZW1lbnQKCXZhciBlbCA9ICQoIHRoaXMgKSwKCQlwcm9wcyA9IFsgInBvc2l0aW9uIiwgInRvcCIsICJib3R0b20iLCAibGVmdCIsICJyaWdodCIsICJoZWlnaHQiLCAid2lkdGgiIF0sCgkJbW9kZSA9ICQuZWZmZWN0cy5zZXRNb2RlKCBlbCwgby5tb2RlIHx8ICJoaWRlIiApLAoJCXNob3cgPSBtb2RlID09PSAic2hvdyIsCgkJaGlkZSA9IG1vZGUgPT09ICJoaWRlIiwKCQlzaXplID0gby5zaXplIHx8IDE1LAoJCXBlcmNlbnQgPSAvKFswLTldKyklLy5leGVjKCBzaXplICksCgkJaG9yaXpGaXJzdCA9ICEhby5ob3JpekZpcnN0LAoJCXdpZHRoRmlyc3QgPSBzaG93ICE9PSBob3JpekZpcnN0LAoJCXJlZiA9IHdpZHRoRmlyc3QgPyBbICJ3aWR0aCIsICJoZWlnaHQiIF0gOiBbICJoZWlnaHQiLCAid2lkdGgiIF0sCgkJZHVyYXRpb24gPSBvLmR1cmF0aW9uIC8gMiwKCQl3cmFwcGVyLCBkaXN0YW5jZSwKCQlhbmltYXRpb24xID0ge30sCgkJYW5pbWF0aW9uMiA9IHt9OwoKCSQuZWZmZWN0cy5zYXZlKCBlbCwgcHJvcHMgKTsKCWVsLnNob3coKTsKCgkvLyBDcmVhdGUgV3JhcHBlcgoJd3JhcHBlciA9ICQuZWZmZWN0cy5jcmVhdGVXcmFwcGVyKCBlbCApLmNzcyh7CgkJb3ZlcmZsb3c6ICJoaWRkZW4iCgl9KTsKCWRpc3RhbmNlID0gd2lkdGhGaXJzdCA/CgkJWyB3cmFwcGVyLndpZHRoKCksIHdyYXBwZXIuaGVpZ2h0KCkgXSA6CgkJWyB3cmFwcGVyLmhlaWdodCgpLCB3cmFwcGVyLndpZHRoKCkgXTsKCglpZiAoIHBlcmNlbnQgKSB7CgkJc2l6ZSA9IHBhcnNlSW50KCBwZXJjZW50WyAxIF0sIDEwICkgLyAxMDAgKiBkaXN0YW5jZVsgaGlkZSA/IDAgOiAxIF07Cgl9CglpZiAoIHNob3cgKSB7CgkJd3JhcHBlci5jc3MoIGhvcml6Rmlyc3QgPyB7CgkJCWhlaWdodDogMCwKCQkJd2lkdGg6IHNpemUKCQl9IDogewoJCQloZWlnaHQ6IHNpemUsCgkJCXdpZHRoOiAwCgkJfSk7Cgl9CgoJLy8gQW5pbWF0aW9uCglhbmltYXRpb24xWyByZWZbIDAgXSBdID0gc2hvdyA/IGRpc3RhbmNlWyAwIF0gOiBzaXplOwoJYW5pbWF0aW9uMlsgcmVmWyAxIF0gXSA9IHNob3cgPyBkaXN0YW5jZVsgMSBdIDogMDsKCgkvLyBBbmltYXRlCgl3cmFwcGVyCgkJLmFuaW1hdGUoIGFuaW1hdGlvbjEsIGR1cmF0aW9uLCBvLmVhc2luZyApCgkJLmFuaW1hdGUoIGFuaW1hdGlvbjIsIGR1cmF0aW9uLCBvLmVhc2luZywgZnVuY3Rpb24oKSB7CgkJCWlmICggaGlkZSApIHsKCQkJCWVsLmhpZGUoKTsKCQkJfQoJCQkkLmVmZmVjdHMucmVzdG9yZSggZWwsIHByb3BzICk7CgkJCSQuZWZmZWN0cy5yZW1vdmVXcmFwcGVyKCBlbCApOwoJCQlkb25lKCk7CgkJfSk7Cgp9OwoKfSkoalF1ZXJ5KTsKKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7CgokLmVmZmVjdHMuZWZmZWN0LmhpZ2hsaWdodCA9IGZ1bmN0aW9uKCBvLCBkb25lICkgewoJdmFyIGVsZW0gPSAkKCB0aGlzICksCgkJcHJvcHMgPSBbICJiYWNrZ3JvdW5kSW1hZ2UiLCAiYmFja2dyb3VuZENvbG9yIiwgIm9wYWNpdHkiIF0sCgkJbW9kZSA9ICQuZWZmZWN0cy5zZXRNb2RlKCBlbGVtLCBvLm1vZGUgfHwgInNob3ciICksCgkJYW5pbWF0aW9uID0gewoJCQliYWNrZ3JvdW5kQ29sb3I6IGVsZW0uY3NzKCAiYmFja2dyb3VuZENvbG9yIiApCgkJfTsKCglpZiAobW9kZSA9PT0gImhpZGUiKSB7CgkJYW5pbWF0aW9uLm9wYWNpdHkgPSAwOwoJfQoKCSQuZWZmZWN0cy5zYXZlKCBlbGVtLCBwcm9wcyApOwoKCWVsZW0KCQkuc2hvdygpCgkJLmNzcyh7CgkJCWJhY2tncm91bmRJbWFnZTogIm5vbmUiLAoJCQliYWNrZ3JvdW5kQ29sb3I6IG8uY29sb3IgfHwgIiNmZmZmOTkiCgkJfSkKCQkuYW5pbWF0ZSggYW5pbWF0aW9uLCB7CgkJCXF1ZXVlOiBmYWxzZSwKCQkJZHVyYXRpb246IG8uZHVyYXRpb24sCgkJCWVhc2luZzogby5lYXNpbmcsCgkJCWNvbXBsZXRlOiBmdW5jdGlvbigpIHsKCQkJCWlmICggbW9kZSA9PT0gImhpZGUiICkgewoJCQkJCWVsZW0uaGlkZSgpOwoJCQkJfQoJCQkJJC5lZmZlY3RzLnJlc3RvcmUoIGVsZW0sIHByb3BzICk7CgkJCQlkb25lKCk7CgkJCX0KCQl9KTsKfTsKCn0pKGpRdWVyeSk7CihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkgewoKJC5lZmZlY3RzLmVmZmVjdC5wdWxzYXRlID0gZnVuY3Rpb24oIG8sIGRvbmUgKSB7Cgl2YXIgZWxlbSA9ICQoIHRoaXMgKSwKCQltb2RlID0gJC5lZmZlY3RzLnNldE1vZGUoIGVsZW0sIG8ubW9kZSB8fCAic2hvdyIgKSwKCQlzaG93ID0gbW9kZSA9PT0gInNob3ciLAoJCWhpZGUgPSBtb2RlID09PSAiaGlkZSIsCgkJc2hvd2hpZGUgPSAoIHNob3cgfHwgbW9kZSA9PT0gImhpZGUiICksCgoJCS8vIHNob3dpbmcgb3IgaGlkaW5nIGxlYXZlcyBvZiB0aGUgImxhc3QiIGFuaW1hdGlvbgoJCWFuaW1zID0gKCAoIG8udGltZXMgfHwgNSApICogMiApICsgKCBzaG93aGlkZSA/IDEgOiAwICksCgkJZHVyYXRpb24gPSBvLmR1cmF0aW9uIC8gYW5pbXMsCgkJYW5pbWF0ZVRvID0gMCwKCQlxdWV1ZSA9IGVsZW0ucXVldWUoKSwKCQlxdWV1ZWxlbiA9IHF1ZXVlLmxlbmd0aCwKCQlpOwoKCWlmICggc2hvdyB8fCAhZWxlbS5pcygiOnZpc2libGUiKSkgewoJCWVsZW0uY3NzKCAib3BhY2l0eSIsIDAgKS5zaG93KCk7CgkJYW5pbWF0ZVRvID0gMTsKCX0KCgkvLyBhbmltcyAtIDEgb3BhY2l0eSAidG9nZ2xlcyIKCWZvciAoIGkgPSAxOyBpIDwgYW5pbXM7IGkrKyApIHsKCQllbGVtLmFuaW1hdGUoewoJCQlvcGFjaXR5OiBhbmltYXRlVG8KCQl9LCBkdXJhdGlvbiwgby5lYXNpbmcgKTsKCQlhbmltYXRlVG8gPSAxIC0gYW5pbWF0ZVRvOwoJfQoKCWVsZW0uYW5pbWF0ZSh7CgkJb3BhY2l0eTogYW5pbWF0ZVRvCgl9LCBkdXJhdGlvbiwgby5lYXNpbmcpOwoKCWVsZW0ucXVldWUoZnVuY3Rpb24oKSB7CgkJaWYgKCBoaWRlICkgewoJCQllbGVtLmhpZGUoKTsKCQl9CgkJZG9uZSgpOwoJfSk7CgoJLy8gV2UganVzdCBxdWV1ZWQgdXAgImFuaW1zIiBhbmltYXRpb25zLCB3ZSBuZWVkIHRvIHB1dCB0aGVtIG5leHQgaW4gdGhlIHF1ZXVlCglpZiAoIHF1ZXVlbGVuID4gMSApIHsKCQlxdWV1ZS5zcGxpY2UuYXBwbHkoIHF1ZXVlLAoJCQlbIDEsIDAgXS5jb25jYXQoIHF1ZXVlLnNwbGljZSggcXVldWVsZW4sIGFuaW1zICsgMSApICkgKTsKCX0KCWVsZW0uZGVxdWV1ZSgpOwp9OwoKfSkoalF1ZXJ5KTsKKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7CgokLmVmZmVjdHMuZWZmZWN0LnB1ZmYgPSBmdW5jdGlvbiggbywgZG9uZSApIHsKCXZhciBlbGVtID0gJCggdGhpcyApLAoJCW1vZGUgPSAkLmVmZmVjdHMuc2V0TW9kZSggZWxlbSwgby5tb2RlIHx8ICJoaWRlIiApLAoJCWhpZGUgPSBtb2RlID09PSAiaGlkZSIsCgkJcGVyY2VudCA9IHBhcnNlSW50KCBvLnBlcmNlbnQsIDEwICkgfHwgMTUwLAoJCWZhY3RvciA9IHBlcmNlbnQgLyAxMDAsCgkJb3JpZ2luYWwgPSB7CgkJCWhlaWdodDogZWxlbS5oZWlnaHQoKSwKCQkJd2lkdGg6IGVsZW0ud2lkdGgoKSwKCQkJb3V0ZXJIZWlnaHQ6IGVsZW0ub3V0ZXJIZWlnaHQoKSwKCQkJb3V0ZXJXaWR0aDogZWxlbS5vdXRlcldpZHRoKCkKCQl9OwoKCSQuZXh0ZW5kKCBvLCB7CgkJZWZmZWN0OiAic2NhbGUiLAoJCXF1ZXVlOiBmYWxzZSwKCQlmYWRlOiB0cnVlLAoJCW1vZGU6IG1vZGUsCgkJY29tcGxldGU6IGRvbmUsCgkJcGVyY2VudDogaGlkZSA/IHBlcmNlbnQgOiAxMDAsCgkJZnJvbTogaGlkZSA/CgkJCW9yaWdpbmFsIDoKCQkJewoJCQkJaGVpZ2h0OiBvcmlnaW5hbC5oZWlnaHQgKiBmYWN0b3IsCgkJCQl3aWR0aDogb3JpZ2luYWwud2lkdGggKiBmYWN0b3IsCgkJCQlvdXRlckhlaWdodDogb3JpZ2luYWwub3V0ZXJIZWlnaHQgKiBmYWN0b3IsCgkJCQlvdXRlcldpZHRoOiBvcmlnaW5hbC5vdXRlcldpZHRoICogZmFjdG9yCgkJCX0KCX0pOwoKCWVsZW0uZWZmZWN0KCBvICk7Cn07CgokLmVmZmVjdHMuZWZmZWN0LnNjYWxlID0gZnVuY3Rpb24oIG8sIGRvbmUgKSB7CgoJLy8gQ3JlYXRlIGVsZW1lbnQKCXZhciBlbCA9ICQoIHRoaXMgKSwKCQlvcHRpb25zID0gJC5leHRlbmQoIHRydWUsIHt9LCBvICksCgkJbW9kZSA9ICQuZWZmZWN0cy5zZXRNb2RlKCBlbCwgby5tb2RlIHx8ICJlZmZlY3QiICksCgkJcGVyY2VudCA9IHBhcnNlSW50KCBvLnBlcmNlbnQsIDEwICkgfHwKCQkJKCBwYXJzZUludCggby5wZXJjZW50LCAxMCApID09PSAwID8gMCA6ICggbW9kZSA9PT0gImhpZGUiID8gMCA6IDEwMCApICksCgkJZGlyZWN0aW9uID0gby5kaXJlY3Rpb24gfHwgImJvdGgiLAoJCW9yaWdpbiA9IG8ub3JpZ2luLAoJCW9yaWdpbmFsID0gewoJCQloZWlnaHQ6IGVsLmhlaWdodCgpLAoJCQl3aWR0aDogZWwud2lkdGgoKSwKCQkJb3V0ZXJIZWlnaHQ6IGVsLm91dGVySGVpZ2h0KCksCgkJCW91dGVyV2lkdGg6IGVsLm91dGVyV2lkdGgoKQoJCX0sCgkJZmFjdG9yID0gewoJCQl5OiBkaXJlY3Rpb24gIT09ICJob3Jpem9udGFsIiA/IChwZXJjZW50IC8gMTAwKSA6IDEsCgkJCXg6IGRpcmVjdGlvbiAhPT0gInZlcnRpY2FsIiA/IChwZXJjZW50IC8gMTAwKSA6IDEKCQl9OwoKCS8vIFdlIGFyZSBnb2luZyB0byBwYXNzIHRoaXMgZWZmZWN0IHRvIHRoZSBzaXplIGVmZmVjdDoKCW9wdGlvbnMuZWZmZWN0ID0gInNpemUiOwoJb3B0aW9ucy5xdWV1ZSA9IGZhbHNlOwoJb3B0aW9ucy5jb21wbGV0ZSA9IGRvbmU7CgoJLy8gU2V0IGRlZmF1bHQgb3JpZ2luIGFuZCByZXN0b3JlIGZvciBzaG93L2hpZGUKCWlmICggbW9kZSAhPT0gImVmZmVjdCIgKSB7CgkJb3B0aW9ucy5vcmlnaW4gPSBvcmlnaW4gfHwgWyJtaWRkbGUiLCJjZW50ZXIiXTsKCQlvcHRpb25zLnJlc3RvcmUgPSB0cnVlOwoJfQoKCW9wdGlvbnMuZnJvbSA9IG8uZnJvbSB8fCAoIG1vZGUgPT09ICJzaG93IiA/IHsKCQloZWlnaHQ6IDAsCgkJd2lkdGg6IDAsCgkJb3V0ZXJIZWlnaHQ6IDAsCgkJb3V0ZXJXaWR0aDogMAoJfSA6IG9yaWdpbmFsICk7CglvcHRpb25zLnRvID0gewoJCWhlaWdodDogb3JpZ2luYWwuaGVpZ2h0ICogZmFjdG9yLnksCgkJd2lkdGg6IG9yaWdpbmFsLndpZHRoICogZmFjdG9yLngsCgkJb3V0ZXJIZWlnaHQ6IG9yaWdpbmFsLm91dGVySGVpZ2h0ICogZmFjdG9yLnksCgkJb3V0ZXJXaWR0aDogb3JpZ2luYWwub3V0ZXJXaWR0aCAqIGZhY3Rvci54Cgl9OwoKCS8vIEZhZGUgb3B0aW9uIHRvIHN1cHBvcnQgcHVmZgoJaWYgKCBvcHRpb25zLmZhZGUgKSB7CgkJaWYgKCBtb2RlID09PSAic2hvdyIgKSB7CgkJCW9wdGlvbnMuZnJvbS5vcGFjaXR5ID0gMDsKCQkJb3B0aW9ucy50by5vcGFjaXR5ID0gMTsKCQl9CgkJaWYgKCBtb2RlID09PSAiaGlkZSIgKSB7CgkJCW9wdGlvbnMuZnJvbS5vcGFjaXR5ID0gMTsKCQkJb3B0aW9ucy50by5vcGFjaXR5ID0gMDsKCQl9Cgl9CgoJLy8gQW5pbWF0ZQoJZWwuZWZmZWN0KCBvcHRpb25zICk7Cgp9OwoKJC5lZmZlY3RzLmVmZmVjdC5zaXplID0gZnVuY3Rpb24oIG8sIGRvbmUgKSB7CgoJLy8gQ3JlYXRlIGVsZW1lbnQKCXZhciBvcmlnaW5hbCwgYmFzZWxpbmUsIGZhY3RvciwKCQllbCA9ICQoIHRoaXMgKSwKCQlwcm9wczAgPSBbICJwb3NpdGlvbiIsICJ0b3AiLCAiYm90dG9tIiwgImxlZnQiLCAicmlnaHQiLCAid2lkdGgiLCAiaGVpZ2h0IiwgIm92ZXJmbG93IiwgIm9wYWNpdHkiIF0sCgoJCS8vIEFsd2F5cyByZXN0b3JlCgkJcHJvcHMxID0gWyAicG9zaXRpb24iLCAidG9wIiwgImJvdHRvbSIsICJsZWZ0IiwgInJpZ2h0IiwgIm92ZXJmbG93IiwgIm9wYWNpdHkiIF0sCgoJCS8vIENvcHkgZm9yIGNoaWxkcmVuCgkJcHJvcHMyID0gWyAid2lkdGgiLCAiaGVpZ2h0IiwgIm92ZXJmbG93IiBdLAoJCWNQcm9wcyA9IFsgImZvbnRTaXplIiBdLAoJCXZQcm9wcyA9IFsgImJvcmRlclRvcFdpZHRoIiwgImJvcmRlckJvdHRvbVdpZHRoIiwgInBhZGRpbmdUb3AiLCAicGFkZGluZ0JvdHRvbSIgXSwKCQloUHJvcHMgPSBbICJib3JkZXJMZWZ0V2lkdGgiLCAiYm9yZGVyUmlnaHRXaWR0aCIsICJwYWRkaW5nTGVmdCIsICJwYWRkaW5nUmlnaHQiIF0sCgoJCS8vIFNldCBvcHRpb25zCgkJbW9kZSA9ICQuZWZmZWN0cy5zZXRNb2RlKCBlbCwgby5tb2RlIHx8ICJlZmZlY3QiICksCgkJcmVzdG9yZSA9IG8ucmVzdG9yZSB8fCBtb2RlICE9PSAiZWZmZWN0IiwKCQlzY2FsZSA9IG8uc2NhbGUgfHwgImJvdGgiLAoJCW9yaWdpbiA9IG8ub3JpZ2luIHx8IFsgIm1pZGRsZSIsICJjZW50ZXIiIF0sCgkJcG9zaXRpb24gPSBlbC5jc3MoICJwb3NpdGlvbiIgKSwKCQlwcm9wcyA9IHJlc3RvcmUgPyBwcm9wczAgOiBwcm9wczEsCgkJemVybyA9IHsKCQkJaGVpZ2h0OiAwLAoJCQl3aWR0aDogMCwKCQkJb3V0ZXJIZWlnaHQ6IDAsCgkJCW91dGVyV2lkdGg6IDAKCQl9OwoKCWlmICggbW9kZSA9PT0gInNob3ciICkgewoJCWVsLnNob3coKTsKCX0KCW9yaWdpbmFsID0gewoJCWhlaWdodDogZWwuaGVpZ2h0KCksCgkJd2lkdGg6IGVsLndpZHRoKCksCgkJb3V0ZXJIZWlnaHQ6IGVsLm91dGVySGVpZ2h0KCksCgkJb3V0ZXJXaWR0aDogZWwub3V0ZXJXaWR0aCgpCgl9OwoKCWlmICggby5tb2RlID09PSAidG9nZ2xlIiAmJiBtb2RlID09PSAic2hvdyIgKSB7CgkJZWwuZnJvbSA9IG8udG8gfHwgemVybzsKCQllbC50byA9IG8uZnJvbSB8fCBvcmlnaW5hbDsKCX0gZWxzZSB7CgkJZWwuZnJvbSA9IG8uZnJvbSB8fCAoIG1vZGUgPT09ICJzaG93IiA/IHplcm8gOiBvcmlnaW5hbCApOwoJCWVsLnRvID0gby50byB8fCAoIG1vZGUgPT09ICJoaWRlIiA/IHplcm8gOiBvcmlnaW5hbCApOwoJfQoKCS8vIFNldCBzY2FsaW5nIGZhY3RvcgoJZmFjdG9yID0gewoJCWZyb206IHsKCQkJeTogZWwuZnJvbS5oZWlnaHQgLyBvcmlnaW5hbC5oZWlnaHQsCgkJCXg6IGVsLmZyb20ud2lkdGggLyBvcmlnaW5hbC53aWR0aAoJCX0sCgkJdG86IHsKCQkJeTogZWwudG8uaGVpZ2h0IC8gb3JpZ2luYWwuaGVpZ2h0LAoJCQl4OiBlbC50by53aWR0aCAvIG9yaWdpbmFsLndpZHRoCgkJfQoJfTsKCgkvLyBTY2FsZSB0aGUgY3NzIGJveAoJaWYgKCBzY2FsZSA9PT0gImJveCIgfHwgc2NhbGUgPT09ICJib3RoIiApIHsKCgkJLy8gVmVydGljYWwgcHJvcHMgc2NhbGluZwoJCWlmICggZmFjdG9yLmZyb20ueSAhPT0gZmFjdG9yLnRvLnkgKSB7CgkJCXByb3BzID0gcHJvcHMuY29uY2F0KCB2UHJvcHMgKTsKCQkJZWwuZnJvbSA9ICQuZWZmZWN0cy5zZXRUcmFuc2l0aW9uKCBlbCwgdlByb3BzLCBmYWN0b3IuZnJvbS55LCBlbC5mcm9tICk7CgkJCWVsLnRvID0gJC5lZmZlY3RzLnNldFRyYW5zaXRpb24oIGVsLCB2UHJvcHMsIGZhY3Rvci50by55LCBlbC50byApOwoJCX0KCgkJLy8gSG9yaXpvbnRhbCBwcm9wcyBzY2FsaW5nCgkJaWYgKCBmYWN0b3IuZnJvbS54ICE9PSBmYWN0b3IudG8ueCApIHsKCQkJcHJvcHMgPSBwcm9wcy5jb25jYXQoIGhQcm9wcyApOwoJCQllbC5mcm9tID0gJC5lZmZlY3RzLnNldFRyYW5zaXRpb24oIGVsLCBoUHJvcHMsIGZhY3Rvci5mcm9tLngsIGVsLmZyb20gKTsKCQkJZWwudG8gPSAkLmVmZmVjdHMuc2V0VHJhbnNpdGlvbiggZWwsIGhQcm9wcywgZmFjdG9yLnRvLngsIGVsLnRvICk7CgkJfQoJfQoKCS8vIFNjYWxlIHRoZSBjb250ZW50CglpZiAoIHNjYWxlID09PSAiY29udGVudCIgfHwgc2NhbGUgPT09ICJib3RoIiApIHsKCgkJLy8gVmVydGljYWwgcHJvcHMgc2NhbGluZwoJCWlmICggZmFjdG9yLmZyb20ueSAhPT0gZmFjdG9yLnRvLnkgKSB7CgkJCXByb3BzID0gcHJvcHMuY29uY2F0KCBjUHJvcHMgKS5jb25jYXQoIHByb3BzMiApOwoJCQllbC5mcm9tID0gJC5lZmZlY3RzLnNldFRyYW5zaXRpb24oIGVsLCBjUHJvcHMsIGZhY3Rvci5mcm9tLnksIGVsLmZyb20gKTsKCQkJZWwudG8gPSAkLmVmZmVjdHMuc2V0VHJhbnNpdGlvbiggZWwsIGNQcm9wcywgZmFjdG9yLnRvLnksIGVsLnRvICk7CgkJfQoJfQoKCSQuZWZmZWN0cy5zYXZlKCBlbCwgcHJvcHMgKTsKCWVsLnNob3coKTsKCSQuZWZmZWN0cy5jcmVhdGVXcmFwcGVyKCBlbCApOwoJZWwuY3NzKCAib3ZlcmZsb3ciLCAiaGlkZGVuIiApLmNzcyggZWwuZnJvbSApOwoKCS8vIEFkanVzdAoJaWYgKG9yaWdpbikgeyAvLyBDYWxjdWxhdGUgYmFzZWxpbmUgc2hpZnRzCgkJYmFzZWxpbmUgPSAkLmVmZmVjdHMuZ2V0QmFzZWxpbmUoIG9yaWdpbiwgb3JpZ2luYWwgKTsKCQllbC5mcm9tLnRvcCA9ICggb3JpZ2luYWwub3V0ZXJIZWlnaHQgLSBlbC5vdXRlckhlaWdodCgpICkgKiBiYXNlbGluZS55OwoJCWVsLmZyb20ubGVmdCA9ICggb3JpZ2luYWwub3V0ZXJXaWR0aCAtIGVsLm91dGVyV2lkdGgoKSApICogYmFzZWxpbmUueDsKCQllbC50by50b3AgPSAoIG9yaWdpbmFsLm91dGVySGVpZ2h0IC0gZWwudG8ub3V0ZXJIZWlnaHQgKSAqIGJhc2VsaW5lLnk7CgkJZWwudG8ubGVmdCA9ICggb3JpZ2luYWwub3V0ZXJXaWR0aCAtIGVsLnRvLm91dGVyV2lkdGggKSAqIGJhc2VsaW5lLng7Cgl9CgllbC5jc3MoIGVsLmZyb20gKTsgLy8gc2V0IHRvcCAmIGxlZnQKCgkvLyBBbmltYXRlCglpZiAoIHNjYWxlID09PSAiY29udGVudCIgfHwgc2NhbGUgPT09ICJib3RoIiApIHsgLy8gU2NhbGUgdGhlIGNoaWxkcmVuCgoJCS8vIEFkZCBtYXJnaW5zL2ZvbnQtc2l6ZQoJCXZQcm9wcyA9IHZQcm9wcy5jb25jYXQoWyAibWFyZ2luVG9wIiwgIm1hcmdpbkJvdHRvbSIgXSkuY29uY2F0KGNQcm9wcyk7CgkJaFByb3BzID0gaFByb3BzLmNvbmNhdChbICJtYXJnaW5MZWZ0IiwgIm1hcmdpblJpZ2h0IiBdKTsKCQlwcm9wczIgPSBwcm9wczAuY29uY2F0KHZQcm9wcykuY29uY2F0KGhQcm9wcyk7CgoJCWVsLmZpbmQoICIqW3dpZHRoXSIgKS5lYWNoKCBmdW5jdGlvbigpewoJCQl2YXIgY2hpbGQgPSAkKCB0aGlzICksCgkJCQljX29yaWdpbmFsID0gewoJCQkJCWhlaWdodDogY2hpbGQuaGVpZ2h0KCksCgkJCQkJd2lkdGg6IGNoaWxkLndpZHRoKCksCgkJCQkJb3V0ZXJIZWlnaHQ6IGNoaWxkLm91dGVySGVpZ2h0KCksCgkJCQkJb3V0ZXJXaWR0aDogY2hpbGQub3V0ZXJXaWR0aCgpCgkJCQl9OwoJCQlpZiAocmVzdG9yZSkgewoJCQkJJC5lZmZlY3RzLnNhdmUoY2hpbGQsIHByb3BzMik7CgkJCX0KCgkJCWNoaWxkLmZyb20gPSB7CgkJCQloZWlnaHQ6IGNfb3JpZ2luYWwuaGVpZ2h0ICogZmFjdG9yLmZyb20ueSwKCQkJCXdpZHRoOiBjX29yaWdpbmFsLndpZHRoICogZmFjdG9yLmZyb20ueCwKCQkJCW91dGVySGVpZ2h0OiBjX29yaWdpbmFsLm91dGVySGVpZ2h0ICogZmFjdG9yLmZyb20ueSwKCQkJCW91dGVyV2lkdGg6IGNfb3JpZ2luYWwub3V0ZXJXaWR0aCAqIGZhY3Rvci5mcm9tLngKCQkJfTsKCQkJY2hpbGQudG8gPSB7CgkJCQloZWlnaHQ6IGNfb3JpZ2luYWwuaGVpZ2h0ICogZmFjdG9yLnRvLnksCgkJCQl3aWR0aDogY19vcmlnaW5hbC53aWR0aCAqIGZhY3Rvci50by54LAoJCQkJb3V0ZXJIZWlnaHQ6IGNfb3JpZ2luYWwuaGVpZ2h0ICogZmFjdG9yLnRvLnksCgkJCQlvdXRlcldpZHRoOiBjX29yaWdpbmFsLndpZHRoICogZmFjdG9yLnRvLngKCQkJfTsKCgkJCS8vIFZlcnRpY2FsIHByb3BzIHNjYWxpbmcKCQkJaWYgKCBmYWN0b3IuZnJvbS55ICE9PSBmYWN0b3IudG8ueSApIHsKCQkJCWNoaWxkLmZyb20gPSAkLmVmZmVjdHMuc2V0VHJhbnNpdGlvbiggY2hpbGQsIHZQcm9wcywgZmFjdG9yLmZyb20ueSwgY2hpbGQuZnJvbSApOwoJCQkJY2hpbGQudG8gPSAkLmVmZmVjdHMuc2V0VHJhbnNpdGlvbiggY2hpbGQsIHZQcm9wcywgZmFjdG9yLnRvLnksIGNoaWxkLnRvICk7CgkJCX0KCgkJCS8vIEhvcml6b250YWwgcHJvcHMgc2NhbGluZwoJCQlpZiAoIGZhY3Rvci5mcm9tLnggIT09IGZhY3Rvci50by54ICkgewoJCQkJY2hpbGQuZnJvbSA9ICQuZWZmZWN0cy5zZXRUcmFuc2l0aW9uKCBjaGlsZCwgaFByb3BzLCBmYWN0b3IuZnJvbS54LCBjaGlsZC5mcm9tICk7CgkJCQljaGlsZC50byA9ICQuZWZmZWN0cy5zZXRUcmFuc2l0aW9uKCBjaGlsZCwgaFByb3BzLCBmYWN0b3IudG8ueCwgY2hpbGQudG8gKTsKCQkJfQoKCQkJLy8gQW5pbWF0ZSBjaGlsZHJlbgoJCQljaGlsZC5jc3MoIGNoaWxkLmZyb20gKTsKCQkJY2hpbGQuYW5pbWF0ZSggY2hpbGQudG8sIG8uZHVyYXRpb24sIG8uZWFzaW5nLCBmdW5jdGlvbigpIHsKCgkJCQkvLyBSZXN0b3JlIGNoaWxkcmVuCgkJCQlpZiAoIHJlc3RvcmUgKSB7CgkJCQkJJC5lZmZlY3RzLnJlc3RvcmUoIGNoaWxkLCBwcm9wczIgKTsKCQkJCX0KCQkJfSk7CgkJfSk7Cgl9CgoJLy8gQW5pbWF0ZQoJZWwuYW5pbWF0ZSggZWwudG8sIHsKCQlxdWV1ZTogZmFsc2UsCgkJZHVyYXRpb246IG8uZHVyYXRpb24sCgkJZWFzaW5nOiBvLmVhc2luZywKCQljb21wbGV0ZTogZnVuY3Rpb24oKSB7CgkJCWlmICggZWwudG8ub3BhY2l0eSA9PT0gMCApIHsKCQkJCWVsLmNzcyggIm9wYWNpdHkiLCBlbC5mcm9tLm9wYWNpdHkgKTsKCQkJfQoJCQlpZiggbW9kZSA9PT0gImhpZGUiICkgewoJCQkJZWwuaGlkZSgpOwoJCQl9CgkJCSQuZWZmZWN0cy5yZXN0b3JlKCBlbCwgcHJvcHMgKTsKCQkJaWYgKCAhcmVzdG9yZSApIHsKCgkJCQkvLyB3ZSBuZWVkIHRvIGNhbGN1bGF0ZSBvdXIgbmV3IHBvc2l0aW9uaW5nIGJhc2VkIG9uIHRoZSBzY2FsaW5nCgkJCQlpZiAoIHBvc2l0aW9uID09PSAic3RhdGljIiApIHsKCQkJCQllbC5jc3MoewoJCQkJCQlwb3NpdGlvbjogInJlbGF0aXZlIiwKCQkJCQkJdG9wOiBlbC50by50b3AsCgkJCQkJCWxlZnQ6IGVsLnRvLmxlZnQKCQkJCQl9KTsKCQkJCX0gZWxzZSB7CgkJCQkJJC5lYWNoKFsgInRvcCIsICJsZWZ0IiBdLCBmdW5jdGlvbiggaWR4LCBwb3MgKSB7CgkJCQkJCWVsLmNzcyggcG9zLCBmdW5jdGlvbiggXywgc3RyICkgewoJCQkJCQkJdmFyIHZhbCA9IHBhcnNlSW50KCBzdHIsIDEwICksCgkJCQkJCQkJdG9SZWYgPSBpZHggPyBlbC50by5sZWZ0IDogZWwudG8udG9wOwoKCQkJCQkJCS8vIGlmIG9yaWdpbmFsIHdhcyAiYXV0byIsIHJlY2FsY3VsYXRlIHRoZSBuZXcgdmFsdWUgZnJvbSB3cmFwcGVyCgkJCQkJCQlpZiAoIHN0ciA9PT0gImF1dG8iICkgewoJCQkJCQkJCXJldHVybiB0b1JlZiArICJweCI7CgkJCQkJCQl9CgoJCQkJCQkJcmV0dXJuIHZhbCArIHRvUmVmICsgInB4IjsKCQkJCQkJfSk7CgkJCQkJfSk7CgkJCQl9CgkJCX0KCgkJCSQuZWZmZWN0cy5yZW1vdmVXcmFwcGVyKCBlbCApOwoJCQlkb25lKCk7CgkJfQoJfSk7Cgp9OwoKfSkoalF1ZXJ5KTsKKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7CgokLmVmZmVjdHMuZWZmZWN0LnNoYWtlID0gZnVuY3Rpb24oIG8sIGRvbmUgKSB7CgoJdmFyIGVsID0gJCggdGhpcyApLAoJCXByb3BzID0gWyAicG9zaXRpb24iLCAidG9wIiwgImJvdHRvbSIsICJsZWZ0IiwgInJpZ2h0IiwgImhlaWdodCIsICJ3aWR0aCIgXSwKCQltb2RlID0gJC5lZmZlY3RzLnNldE1vZGUoIGVsLCBvLm1vZGUgfHwgImVmZmVjdCIgKSwKCQlkaXJlY3Rpb24gPSBvLmRpcmVjdGlvbiB8fCAibGVmdCIsCgkJZGlzdGFuY2UgPSBvLmRpc3RhbmNlIHx8IDIwLAoJCXRpbWVzID0gby50aW1lcyB8fCAzLAoJCWFuaW1zID0gdGltZXMgKiAyICsgMSwKCQlzcGVlZCA9IE1hdGgucm91bmQoby5kdXJhdGlvbi9hbmltcyksCgkJcmVmID0gKGRpcmVjdGlvbiA9PT0gInVwIiB8fCBkaXJlY3Rpb24gPT09ICJkb3duIikgPyAidG9wIiA6ICJsZWZ0IiwKCQlwb3NpdGl2ZU1vdGlvbiA9IChkaXJlY3Rpb24gPT09ICJ1cCIgfHwgZGlyZWN0aW9uID09PSAibGVmdCIpLAoJCWFuaW1hdGlvbiA9IHt9LAoJCWFuaW1hdGlvbjEgPSB7fSwKCQlhbmltYXRpb24yID0ge30sCgkJaSwKCgkJLy8gd2Ugd2lsbCBuZWVkIHRvIHJlLWFzc2VtYmxlIHRoZSBxdWV1ZSB0byBzdGFjayBvdXIgYW5pbWF0aW9ucyBpbiBwbGFjZQoJCXF1ZXVlID0gZWwucXVldWUoKSwKCQlxdWV1ZWxlbiA9IHF1ZXVlLmxlbmd0aDsKCgkkLmVmZmVjdHMuc2F2ZSggZWwsIHByb3BzICk7CgllbC5zaG93KCk7CgkkLmVmZmVjdHMuY3JlYXRlV3JhcHBlciggZWwgKTsKCgkvLyBBbmltYXRpb24KCWFuaW1hdGlvblsgcmVmIF0gPSAoIHBvc2l0aXZlTW90aW9uID8gIi09IiA6ICIrPSIgKSArIGRpc3RhbmNlOwoJYW5pbWF0aW9uMVsgcmVmIF0gPSAoIHBvc2l0aXZlTW90aW9uID8gIis9IiA6ICItPSIgKSArIGRpc3RhbmNlICogMjsKCWFuaW1hdGlvbjJbIHJlZiBdID0gKCBwb3NpdGl2ZU1vdGlvbiA/ICItPSIgOiAiKz0iICkgKyBkaXN0YW5jZSAqIDI7CgoJLy8gQW5pbWF0ZQoJZWwuYW5pbWF0ZSggYW5pbWF0aW9uLCBzcGVlZCwgby5lYXNpbmcgKTsKCgkvLyBTaGFrZXMKCWZvciAoIGkgPSAxOyBpIDwgdGltZXM7IGkrKyApIHsKCQllbC5hbmltYXRlKCBhbmltYXRpb24xLCBzcGVlZCwgby5lYXNpbmcgKS5hbmltYXRlKCBhbmltYXRpb24yLCBzcGVlZCwgby5lYXNpbmcgKTsKCX0KCWVsCgkJLmFuaW1hdGUoIGFuaW1hdGlvbjEsIHNwZWVkLCBvLmVhc2luZyApCgkJLmFuaW1hdGUoIGFuaW1hdGlvbiwgc3BlZWQgLyAyLCBvLmVhc2luZyApCgkJLnF1ZXVlKGZ1bmN0aW9uKCkgewoJCQlpZiAoIG1vZGUgPT09ICJoaWRlIiApIHsKCQkJCWVsLmhpZGUoKTsKCQkJfQoJCQkkLmVmZmVjdHMucmVzdG9yZSggZWwsIHByb3BzICk7CgkJCSQuZWZmZWN0cy5yZW1vdmVXcmFwcGVyKCBlbCApOwoJCQlkb25lKCk7CgkJfSk7CgoJLy8gaW5qZWN0IGFsbCB0aGUgYW5pbWF0aW9ucyB3ZSBqdXN0IHF1ZXVlZCB0byBiZSBmaXJzdCBpbiBsaW5lIChhZnRlciAiaW5wcm9ncmVzcyIpCglpZiAoIHF1ZXVlbGVuID4gMSkgewoJCXF1ZXVlLnNwbGljZS5hcHBseSggcXVldWUsCgkJCVsgMSwgMCBdLmNvbmNhdCggcXVldWUuc3BsaWNlKCBxdWV1ZWxlbiwgYW5pbXMgKyAxICkgKSApOwoJfQoJZWwuZGVxdWV1ZSgpOwoKfTsKCn0pKGpRdWVyeSk7CihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkgewoKJC5lZmZlY3RzLmVmZmVjdC5zbGlkZSA9IGZ1bmN0aW9uKCBvLCBkb25lICkgewoKCS8vIENyZWF0ZSBlbGVtZW50Cgl2YXIgZWwgPSAkKCB0aGlzICksCgkJcHJvcHMgPSBbICJwb3NpdGlvbiIsICJ0b3AiLCAiYm90dG9tIiwgImxlZnQiLCAicmlnaHQiLCAid2lkdGgiLCAiaGVpZ2h0IiBdLAoJCW1vZGUgPSAkLmVmZmVjdHMuc2V0TW9kZSggZWwsIG8ubW9kZSB8fCAic2hvdyIgKSwKCQlzaG93ID0gbW9kZSA9PT0gInNob3ciLAoJCWRpcmVjdGlvbiA9IG8uZGlyZWN0aW9uIHx8ICJsZWZ0IiwKCQlyZWYgPSAoZGlyZWN0aW9uID09PSAidXAiIHx8IGRpcmVjdGlvbiA9PT0gImRvd24iKSA/ICJ0b3AiIDogImxlZnQiLAoJCXBvc2l0aXZlTW90aW9uID0gKGRpcmVjdGlvbiA9PT0gInVwIiB8fCBkaXJlY3Rpb24gPT09ICJsZWZ0IiksCgkJZGlzdGFuY2UsCgkJYW5pbWF0aW9uID0ge307CgoJLy8gQWRqdXN0CgkkLmVmZmVjdHMuc2F2ZSggZWwsIHByb3BzICk7CgllbC5zaG93KCk7CglkaXN0YW5jZSA9IG8uZGlzdGFuY2UgfHwgZWxbIHJlZiA9PT0gInRvcCIgPyAib3V0ZXJIZWlnaHQiIDogIm91dGVyV2lkdGgiIF0oIHRydWUgKTsKCgkkLmVmZmVjdHMuY3JlYXRlV3JhcHBlciggZWwgKS5jc3MoewoJCW92ZXJmbG93OiAiaGlkZGVuIgoJfSk7CgoJaWYgKCBzaG93ICkgewoJCWVsLmNzcyggcmVmLCBwb3NpdGl2ZU1vdGlvbiA/IChpc05hTihkaXN0YW5jZSkgPyAiLSIgKyBkaXN0YW5jZSA6IC1kaXN0YW5jZSkgOiBkaXN0YW5jZSApOwoJfQoKCS8vIEFuaW1hdGlvbgoJYW5pbWF0aW9uWyByZWYgXSA9ICggc2hvdyA/CgkJKCBwb3NpdGl2ZU1vdGlvbiA/ICIrPSIgOiAiLT0iKSA6CgkJKCBwb3NpdGl2ZU1vdGlvbiA/ICItPSIgOiAiKz0iKSkgKwoJCWRpc3RhbmNlOwoKCS8vIEFuaW1hdGUKCWVsLmFuaW1hdGUoIGFuaW1hdGlvbiwgewoJCXF1ZXVlOiBmYWxzZSwKCQlkdXJhdGlvbjogby5kdXJhdGlvbiwKCQllYXNpbmc6IG8uZWFzaW5nLAoJCWNvbXBsZXRlOiBmdW5jdGlvbigpIHsKCQkJaWYgKCBtb2RlID09PSAiaGlkZSIgKSB7CgkJCQllbC5oaWRlKCk7CgkJCX0KCQkJJC5lZmZlY3RzLnJlc3RvcmUoIGVsLCBwcm9wcyApOwoJCQkkLmVmZmVjdHMucmVtb3ZlV3JhcHBlciggZWwgKTsKCQkJZG9uZSgpOwoJCX0KCX0pOwp9OwoKfSkoalF1ZXJ5KTsKKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7CgokLmVmZmVjdHMuZWZmZWN0LnRyYW5zZmVyID0gZnVuY3Rpb24oIG8sIGRvbmUgKSB7Cgl2YXIgZWxlbSA9ICQoIHRoaXMgKSwKCQl0YXJnZXQgPSAkKCBvLnRvICksCgkJdGFyZ2V0Rml4ZWQgPSB0YXJnZXQuY3NzKCAicG9zaXRpb24iICkgPT09ICJmaXhlZCIsCgkJYm9keSA9ICQoImJvZHkiKSwKCQlmaXhUb3AgPSB0YXJnZXRGaXhlZCA/IGJvZHkuc2Nyb2xsVG9wKCkgOiAwLAoJCWZpeExlZnQgPSB0YXJnZXRGaXhlZCA/IGJvZHkuc2Nyb2xsTGVmdCgpIDogMCwKCQllbmRQb3NpdGlvbiA9IHRhcmdldC5vZmZzZXQoKSwKCQlhbmltYXRpb24gPSB7CgkJCXRvcDogZW5kUG9zaXRpb24udG9wIC0gZml4VG9wICwKCQkJbGVmdDogZW5kUG9zaXRpb24ubGVmdCAtIGZpeExlZnQgLAoJCQloZWlnaHQ6IHRhcmdldC5pbm5lckhlaWdodCgpLAoJCQl3aWR0aDogdGFyZ2V0LmlubmVyV2lkdGgoKQoJCX0sCgkJc3RhcnRQb3NpdGlvbiA9IGVsZW0ub2Zmc2V0KCksCgkJdHJhbnNmZXIgPSAkKCAnPGRpdiBjbGFzcz0idWktZWZmZWN0cy10cmFuc2ZlciI+PC9kaXY+JyApCgkJCS5hcHBlbmRUbyggZG9jdW1lbnQuYm9keSApCgkJCS5hZGRDbGFzcyggby5jbGFzc05hbWUgKQoJCQkuY3NzKHsKCQkJCXRvcDogc3RhcnRQb3NpdGlvbi50b3AgLSBmaXhUb3AgLAoJCQkJbGVmdDogc3RhcnRQb3NpdGlvbi5sZWZ0IC0gZml4TGVmdCAsCgkJCQloZWlnaHQ6IGVsZW0uaW5uZXJIZWlnaHQoKSwKCQkJCXdpZHRoOiBlbGVtLmlubmVyV2lkdGgoKSwKCQkJCXBvc2l0aW9uOiB0YXJnZXRGaXhlZCA/ICJmaXhlZCIgOiAiYWJzb2x1dGUiCgkJCX0pCgkJCS5hbmltYXRlKCBhbmltYXRpb24sIG8uZHVyYXRpb24sIG8uZWFzaW5nLCBmdW5jdGlvbigpIHsKCQkJCXRyYW5zZmVyLnJlbW92ZSgpOwoJCQkJZG9uZSgpOwoJCQl9KTsKfTsKCn0pKGpRdWVyeSk7Cg=="},{"name":"jstorage","src":"KGZ1bmN0aW9uKCl7ZnVuY3Rpb24geChhLGIpe2Z1bmN0aW9uIGYoKXtpZigic2Vzc2lvbiI9PWEpdHJ5e2o9bS5wYXJzZSh3aW5kb3cubmFtZXx8Int9Iil9Y2F0Y2goYil7aj17fX19dmFyIGg9ITEsZT0wLGcsZCxqPXt9O01hdGgucmFuZG9tKCk7aWYoYnx8InVuZGVmaW5lZCI9PXR5cGVvZiB3aW5kb3dbYSsiU3RvcmFnZSJdKWlmKCJsb2NhbCI9PWEmJndpbmRvdy5nbG9iYWxTdG9yYWdlKWxvY2FsU3RvcmFnZT13aW5kb3cuZ2xvYmFsU3RvcmFnZVt3aW5kb3cubG9jYXRpb24uaG9zdG5hbWVdO2Vsc2UgaWYoInVzZXJEYXRhQmVoYXZpb3IiPT1sKXtiJiYod2luZG93W2ErIlN0b3JhZ2UiXSYmd2luZG93W2ErIlN0b3JhZ2UiXS5wYXJlbnROb2RlKSYmd2luZG93W2ErIlN0b3JhZ2UiXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHdpbmRvd1thKyJTdG9yYWdlIl0pO2Q9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnV0dG9uIik7ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImhlYWQiKVswXS5hcHBlbmRDaGlsZChkKTsKImxvY2FsIj09YT9qPWM6InNlc3Npb24iPT1hJiZmKCk7Zm9yKGcgaW4gailqLmhhc093blByb3BlcnR5KGcpJiYoIl9fanN0b3JhZ2VfbWV0YSIhPWcmJiJsZW5ndGgiIT1nJiYidW5kZWZpbmVkIiE9dHlwZW9mIGpbZ10pJiYoZyBpbiBkfHxlKyssZFtnXT1qW2ddKTtkLmxlbmd0aD1lO2Qua2V5PWZ1bmN0aW9uKGEpe3ZhciBiPTAsYztmKCk7Zm9yKGMgaW4gailpZihqLmhhc093blByb3BlcnR5KGMpJiYiX19qc3RvcmFnZV9tZXRhIiE9YyYmImxlbmd0aCIhPWMmJiJ1bmRlZmluZWQiIT10eXBlb2YgaltjXSl7aWYoYj09YSlyZXR1cm4gYztiKyt9fTtkLmdldEl0ZW09ZnVuY3Rpb24oYil7ZigpO3JldHVybiJzZXNzaW9uIj09YT9qW2JdOm8ualN0b3JhZ2UuZ2V0KGIpfTtkLnNldEl0ZW09ZnVuY3Rpb24oYSxiKXsidW5kZWZpbmVkIiE9dHlwZW9mIGImJihkW2FdPShifHwiIikudG9TdHJpbmcoKSl9O2QucmVtb3ZlSXRlbT1mdW5jdGlvbihiKXtpZigibG9jYWwiPT1hKXJldHVybiBvLmpTdG9yYWdlLmRlbGV0ZUtleShiKTsKZFtiXT12b2lkIDA7aD0hMDtiIGluIGQmJmQucmVtb3ZlQXR0cmlidXRlKGIpO2g9ITF9O2QuY2xlYXI9ZnVuY3Rpb24oKXsic2Vzc2lvbiI9PWE/KHdpbmRvdy5uYW1lPSIiLHgoInNlc3Npb24iLCEwKSk6by5qU3RvcmFnZS5mbHVzaCgpfTsibG9jYWwiPT1hJiYoej1mdW5jdGlvbihhLGIpeyJsZW5ndGgiIT1hJiYoaD0hMCwidW5kZWZpbmVkIj09dHlwZW9mIGI/YSBpbiBkJiYoZS0tLGQucmVtb3ZlQXR0cmlidXRlKGEpKTooYSBpbiBkfHxlKyssZFthXT0oYnx8IiIpLnRvU3RyaW5nKCkpLGQubGVuZ3RoPWUsaD0hMSl9KTtkLmF0dGFjaEV2ZW50KCJvbnByb3BlcnR5Y2hhbmdlIixmdW5jdGlvbihiKXtpZigibGVuZ3RoIiE9Yi5wcm9wZXJ0eU5hbWUmJiEoaHx8Imxlbmd0aCI9PWIucHJvcGVydHlOYW1lKSl7aWYoImxvY2FsIj09YSkhKGIucHJvcGVydHlOYW1lIGluIGopJiYidW5kZWZpbmVkIiE9dHlwZW9mIGRbYi5wcm9wZXJ0eU5hbWVdJiZlKys7ZWxzZSBpZigic2Vzc2lvbiI9PQphKXtmKCk7InVuZGVmaW5lZCIhPXR5cGVvZiBkW2IucHJvcGVydHlOYW1lXSYmIShiLnByb3BlcnR5TmFtZSBpbiBqKT8oaltiLnByb3BlcnR5TmFtZV09ZFtiLnByb3BlcnR5TmFtZV0sZSsrKToidW5kZWZpbmVkIj09dHlwZW9mIGRbYi5wcm9wZXJ0eU5hbWVdJiZiLnByb3BlcnR5TmFtZSBpbiBqPyhkZWxldGUgaltiLnByb3BlcnR5TmFtZV0sZS0tKTpqW2IucHJvcGVydHlOYW1lXT1kW2IucHJvcGVydHlOYW1lXTsic2Vzc2lvbiI9PWEmJih3aW5kb3cubmFtZT1tLnN0cmluZ2lmeShqKSk7ZC5sZW5ndGg9ZTtyZXR1cm59by5qU3RvcmFnZS5zZXQoYi5wcm9wZXJ0eU5hbWUsZFtiLnByb3BlcnR5TmFtZV0pO2QubGVuZ3RoPWV9fSk7d2luZG93W2ErIlN0b3JhZ2UiXT1kfX1mdW5jdGlvbiBEKCl7dmFyIGE9Int9IjtpZigidXNlckRhdGFCZWhhdmlvciI9PWwpe2kubG9hZCgialN0b3JhZ2UiKTt0cnl7YT1pLmdldEF0dHJpYnV0ZSgialN0b3JhZ2UiKX1jYXRjaChiKXt9dHJ5e3E9CmkuZ2V0QXR0cmlidXRlKCJqU3RvcmFnZV91cGRhdGUiKX1jYXRjaChjKXt9ay5qU3RvcmFnZT1hfUUoKTt5KCk7RigpfWZ1bmN0aW9uIHQoKXt2YXIgYTtjbGVhclRpbWVvdXQoRyk7Rz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYoImxvY2FsU3RvcmFnZSI9PWx8fCJnbG9iYWxTdG9yYWdlIj09bClhPWsualN0b3JhZ2VfdXBkYXRlO2Vsc2UgaWYoInVzZXJEYXRhQmVoYXZpb3IiPT1sKXtpLmxvYWQoImpTdG9yYWdlIik7dHJ5e2E9aS5nZXRBdHRyaWJ1dGUoImpTdG9yYWdlX3VwZGF0ZSIpfWNhdGNoKGIpe319aWYoYSYmYSE9cSl7cT1hO3ZhciBmPW0ucGFyc2UobS5zdHJpbmdpZnkoYy5fX2pzdG9yYWdlX21ldGEuQ1JDMzIpKSxoO0QoKTtoPW0ucGFyc2UobS5zdHJpbmdpZnkoYy5fX2pzdG9yYWdlX21ldGEuQ1JDMzIpKTt2YXIgZSxnPVtdLGQ9W107Zm9yKGUgaW4gZilmLmhhc093blByb3BlcnR5KGUpJiYoaFtlXT9mW2VdIT1oW2VdJiZnLnB1c2goZSk6ZC5wdXNoKGUpKTtmb3IoZSBpbiBoKWguaGFzT3duUHJvcGVydHkoZSkmJgooZltlXXx8Zy5wdXNoKGUpKTtyKGcsInVwZGF0ZWQiKTtyKGQsImRlbGV0ZWQiKX19LDI1KX1mdW5jdGlvbiByKGEsYil7YT1bXS5jb25jYXQoYXx8W10pO2lmKCJmbHVzaGVkIj09Yil7dmFyIGE9W10sYztmb3IoYyBpbiBuKW4uaGFzT3duUHJvcGVydHkoYykmJmEucHVzaChjKTtiPSJkZWxldGVkIn1jPTA7Zm9yKHZhciBoPWEubGVuZ3RoO2M8aDtjKyspaWYoblthW2NdXSlmb3IodmFyIGU9MCxnPW5bYVtjXV0ubGVuZ3RoO2U8ZztlKyspblthW2NdXVtlXShhW2NdLGIpfWZ1bmN0aW9uIHUoKXt2YXIgYT0oK25ldyBEYXRlKS50b1N0cmluZygpOyJsb2NhbFN0b3JhZ2UiPT1sfHwiZ2xvYmFsU3RvcmFnZSI9PWw/ay5qU3RvcmFnZV91cGRhdGU9YToidXNlckRhdGFCZWhhdmlvciI9PWwmJihpLnNldEF0dHJpYnV0ZSgialN0b3JhZ2VfdXBkYXRlIixhKSxpLnNhdmUoImpTdG9yYWdlIikpO3QoKX1mdW5jdGlvbiBFKCl7aWYoay5qU3RvcmFnZSl0cnl7Yz1tLnBhcnNlKFN0cmluZyhrLmpTdG9yYWdlKSl9Y2F0Y2goYSl7ay5qU3RvcmFnZT0KInt9In1lbHNlIGsualN0b3JhZ2U9Int9IjtBPWsualN0b3JhZ2U/U3RyaW5nKGsualN0b3JhZ2UpLmxlbmd0aDowO2MuX19qc3RvcmFnZV9tZXRhfHwoYy5fX2pzdG9yYWdlX21ldGE9e30pO2MuX19qc3RvcmFnZV9tZXRhLkNSQzMyfHwoYy5fX2pzdG9yYWdlX21ldGEuQ1JDMzI9e30pfWZ1bmN0aW9uIHYoKXtpZihjLl9fanN0b3JhZ2VfbWV0YS5QdWJTdWIpe2Zvcih2YXIgYT0rbmV3IERhdGUtMkUzLGI9MCxmPWMuX19qc3RvcmFnZV9tZXRhLlB1YlN1Yi5sZW5ndGg7YjxmO2IrKylpZihjLl9fanN0b3JhZ2VfbWV0YS5QdWJTdWJbYl1bMF08PWEpe2MuX19qc3RvcmFnZV9tZXRhLlB1YlN1Yi5zcGxpY2UoYixjLl9fanN0b3JhZ2VfbWV0YS5QdWJTdWIubGVuZ3RoLWIpO2JyZWFrfWMuX19qc3RvcmFnZV9tZXRhLlB1YlN1Yi5sZW5ndGh8fGRlbGV0ZSBjLl9fanN0b3JhZ2VfbWV0YS5QdWJTdWJ9dHJ5e2sualN0b3JhZ2U9bS5zdHJpbmdpZnkoYyksaSYmKGkuc2V0QXR0cmlidXRlKCJqU3RvcmFnZSIsCmsualN0b3JhZ2UpLGkuc2F2ZSgialN0b3JhZ2UiKSksQT1rLmpTdG9yYWdlP1N0cmluZyhrLmpTdG9yYWdlKS5sZW5ndGg6MH1jYXRjaChoKXt9fWZ1bmN0aW9uIHAoYSl7aWYoIWF8fCJzdHJpbmciIT10eXBlb2YgYSYmIm51bWJlciIhPXR5cGVvZiBhKXRocm93IG5ldyBUeXBlRXJyb3IoIktleSBuYW1lIG11c3QgYmUgc3RyaW5nIG9yIG51bWVyaWMiKTtpZigiX19qc3RvcmFnZV9tZXRhIj09YSl0aHJvdyBuZXcgVHlwZUVycm9yKCJSZXNlcnZlZCBrZXkgbmFtZSIpO3JldHVybiEwfWZ1bmN0aW9uIHkoKXt2YXIgYSxiLGYsaCxlPUluZmluaXR5LGc9ITEsZD1bXTtjbGVhclRpbWVvdXQoSCk7aWYoYy5fX2pzdG9yYWdlX21ldGEmJiJvYmplY3QiPT10eXBlb2YgYy5fX2pzdG9yYWdlX21ldGEuVFRMKXthPStuZXcgRGF0ZTtmPWMuX19qc3RvcmFnZV9tZXRhLlRUTDtoPWMuX19qc3RvcmFnZV9tZXRhLkNSQzMyO2ZvcihiIGluIGYpZi5oYXNPd25Qcm9wZXJ0eShiKSYmKGZbYl08PQphPyhkZWxldGUgZltiXSxkZWxldGUgaFtiXSxkZWxldGUgY1tiXSxnPSEwLGQucHVzaChiKSk6ZltiXTxlJiYoZT1mW2JdKSk7SW5maW5pdHkhPWUmJihIPXNldFRpbWVvdXQoeSxlLWEpKTtnJiYodigpLHUoKSxyKGQsImRlbGV0ZWQiKSl9fWZ1bmN0aW9uIEYoKXtpZihjLl9fanN0b3JhZ2VfbWV0YS5QdWJTdWIpe2Zvcih2YXIgYSxiPUIsZj1sZW49Yy5fX2pzdG9yYWdlX21ldGEuUHViU3ViLmxlbmd0aC0xOzA8PWY7Zi0tKWlmKGE9Yy5fX2pzdG9yYWdlX21ldGEuUHViU3ViW2ZdLGFbMF0+Qil7dmFyIGI9YVswXSxoPWFbMV07YT1hWzJdO2lmKHNbaF0pZm9yKHZhciBlPTAsZz1zW2hdLmxlbmd0aDtlPGc7ZSsrKXNbaF1bZV0oaCxtLnBhcnNlKG0uc3RyaW5naWZ5KGEpKSl9Qj1ifX12YXIgbz13aW5kb3cualF1ZXJ5fHx3aW5kb3cuJHx8KHdpbmRvdy4kPXt9KSxtPXtwYXJzZTp3aW5kb3cuSlNPTiYmKHdpbmRvdy5KU09OLnBhcnNlfHx3aW5kb3cuSlNPTi5kZWNvZGUpfHxTdHJpbmcucHJvdG90eXBlLmV2YWxKU09OJiYKZnVuY3Rpb24oYSl7cmV0dXJuIFN0cmluZyhhKS5ldmFsSlNPTigpfXx8by5wYXJzZUpTT058fG8uZXZhbEpTT04sc3RyaW5naWZ5Ok9iamVjdC50b0pTT058fHdpbmRvdy5KU09OJiYod2luZG93LkpTT04uc3RyaW5naWZ5fHx3aW5kb3cuSlNPTi5lbmNvZGUpfHxvLnRvSlNPTn07aWYoIW0ucGFyc2V8fCFtLnN0cmluZ2lmeSl0aHJvdyBFcnJvcigiTm8gSlNPTiBzdXBwb3J0IGZvdW5kLCBpbmNsdWRlIC8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2pzb24yLzIwMTEwMjIzL2pzb24yLmpzIHRvIHBhZ2UiKTt2YXIgYz17fSxrPXtqU3RvcmFnZToie30ifSxpPW51bGwsQT0wLGw9ITEsbj17fSxHPSExLHE9MCxzPXt9LEI9K25ldyBEYXRlLEgsQz17aXNYTUw6ZnVuY3Rpb24oYSl7cmV0dXJuKGE9KGE/YS5vd25lckRvY3VtZW50fHxhOjApLmRvY3VtZW50RWxlbWVudCk/IkhUTUwiIT09YS5ub2RlTmFtZTohMX0sZW5jb2RlOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmlzWE1MKGEpKXJldHVybiExOwp0cnl7cmV0dXJuKG5ldyBYTUxTZXJpYWxpemVyKS5zZXJpYWxpemVUb1N0cmluZyhhKX1jYXRjaChiKXt0cnl7cmV0dXJuIGEueG1sfWNhdGNoKGMpe319cmV0dXJuITF9LGRlY29kZTpmdW5jdGlvbihhKXt2YXIgYj0iRE9NUGFyc2VyImluIHdpbmRvdyYmKG5ldyBET01QYXJzZXIpLnBhcnNlRnJvbVN0cmluZ3x8d2luZG93LkFjdGl2ZVhPYmplY3QmJmZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBBY3RpdmVYT2JqZWN0KCJNaWNyb3NvZnQuWE1MRE9NIik7Yi5hc3luYz0iZmFsc2UiO2IubG9hZFhNTChhKTtyZXR1cm4gYn07aWYoIWIpcmV0dXJuITE7YT1iLmNhbGwoIkRPTVBhcnNlciJpbiB3aW5kb3cmJm5ldyBET01QYXJzZXJ8fHdpbmRvdyxhLCJ0ZXh0L3htbCIpO3JldHVybiB0aGlzLmlzWE1MKGEpP2E6ITF9fSx6PWZ1bmN0aW9uKCl7fTtvLmpTdG9yYWdlPXt2ZXJzaW9uOiIwLjMuMCIsc2V0OmZ1bmN0aW9uKGEsYixmKXtwKGEpO2Y9Znx8e307aWYoInVuZGVmaW5lZCI9PXR5cGVvZiBiKXJldHVybiB0aGlzLmRlbGV0ZUtleShhKSwKYjtpZihDLmlzWE1MKGIpKWI9e19pc194bWw6ITAseG1sOkMuZW5jb2RlKGIpfTtlbHNle2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBiKXJldHVybjtiJiYib2JqZWN0Ij09dHlwZW9mIGImJihiPW0ucGFyc2UobS5zdHJpbmdpZnkoYikpKX1jW2FdPWI7dmFyIGg9Yy5fX2pzdG9yYWdlX21ldGEuQ1JDMzIsZT1tLnN0cmluZ2lmeShiKSxnLGQ9MCxkPTA7Zz0tMTtmb3IodmFyIGo9MCxpPWUubGVuZ3RoO2o8aTtqKyspZD0oZ15lLmNoYXJDb2RlQXQoaikpJjI1NSxkPSIweCIrIjAwMDAwMDAwIDc3MDczMDk2IEVFMEU2MTJDIDk5MDk1MUJBIDA3NkRDNDE5IDcwNkFGNDhGIEU5NjNBNTM1IDlFNjQ5NUEzIDBFREI4ODMyIDc5RENCOEE0IEUwRDVFOTFFIDk3RDJEOTg4IDA5QjY0QzJCIDdFQjE3Q0JEIEU3QjgyRDA3IDkwQkYxRDkxIDFEQjcxMDY0IDZBQjAyMEYyIEYzQjk3MTQ4IDg0QkU0MURFIDFBREFENDdEIDZERERFNEVCIEY0RDRCNTUxIDgzRDM4NUM3IDEzNkM5ODU2IDY0NkJBOEMwIEZENjJGOTdBIDhBNjVDOUVDIDE0MDE1QzRGIDYzMDY2Q0Q5IEZBMEYzRDYzIDhEMDgwREY1IDNCNkUyMEM4IDRDNjkxMDVFIEQ1NjA0MUU0IEEyNjc3MTcyIDNDMDNFNEQxIDRCMDRENDQ3IEQyMEQ4NUZEIEE1MEFCNTZCIDM1QjVBOEZBIDQyQjI5ODZDIERCQkJDOUQ2IEFDQkNGOTQwIDMyRDg2Q0UzIDQ1REY1Qzc1IERDRDYwRENGIEFCRDEzRDU5IDI2RDkzMEFDIDUxREUwMDNBIEM4RDc1MTgwIEJGRDA2MTE2IDIxQjRGNEI1IDU2QjNDNDIzIENGQkE5NTk5IEI4QkRBNTBGIDI4MDJCODlFIDVGMDU4ODA4IEM2MENEOUIyIEIxMEJFOTI0IDJGNkY3Qzg3IDU4Njg0QzExIEMxNjExREFCIEI2NjYyRDNEIDc2REM0MTkwIDAxREI3MTA2IDk4RDIyMEJDIEVGRDUxMDJBIDcxQjE4NTg5IDA2QjZCNTFGIDlGQkZFNEE1IEU4QjhENDMzIDc4MDdDOUEyIDBGMDBGOTM0IDk2MDlBODhFIEUxMEU5ODE4IDdGNkEwREJCIDA4NkQzRDJEIDkxNjQ2Qzk3IEU2NjM1QzAxIDZCNkI1MUY0IDFDNkM2MTYyIDg1NjUzMEQ4IEYyNjIwMDRFIDZDMDY5NUVEIDFCMDFBNTdCIDgyMDhGNEMxIEY1MEZDNDU3IDY1QjBEOUM2IDEyQjdFOTUwIDhCQkVCOEVBIEZDQjk4ODdDIDYyREQxRERGIDE1REEyRDQ5IDhDRDM3Q0YzIEZCRDQ0QzY1IDREQjI2MTU4IDNBQjU1MUNFIEEzQkMwMDc0IEQ0QkIzMEUyIDRBREZBNTQxIDNERDg5NUQ3IEE0RDFDNDZEIEQzRDZGNEZCIDQzNjlFOTZBIDM0NkVEOUZDIEFENjc4ODQ2IERBNjBCOEQwIDQ0MDQyRDczIDMzMDMxREU1IEFBMEE0QzVGIEREMEQ3Q0M5IDUwMDU3MTNDIDI3MDI0MUFBIEJFMEIxMDEwIEM5MEMyMDg2IDU3NjhCNTI1IDIwNkY4NUIzIEI5NjZENDA5IENFNjFFNDlGIDVFREVGOTBFIDI5RDlDOTk4IEIwRDA5ODIyIEM3RDdBOEI0IDU5QjMzRDE3IDJFQjQwRDgxIEI3QkQ1QzNCIEMwQkE2Q0FEIEVEQjg4MzIwIDlBQkZCM0I2IDAzQjZFMjBDIDc0QjFEMjlBIEVBRDU0NzM5IDlERDI3N0FGIDA0REIyNjE1IDczREMxNjgzIEUzNjMwQjEyIDk0NjQzQjg0IDBENkQ2QTNFIDdBNkE1QUE4IEU0MEVDRjBCIDkzMDlGRjlEIDBBMDBBRTI3IDdEMDc5RUIxIEYwMEY5MzQ0IDg3MDhBM0QyIDFFMDFGMjY4IDY5MDZDMkZFIEY3NjI1NzVEIDgwNjU2N0NCIDE5NkMzNjcxIDZFNkIwNkU3IEZFRDQxQjc2IDg5RDMyQkUwIDEwREE3QTVBIDY3REQ0QUNDIEY5QjlERjZGIDhFQkVFRkY5IDE3QjdCRTQzIDYwQjA4RUQ1IEQ2RDZBM0U4IEExRDE5MzdFIDM4RDhDMkM0IDRGREZGMjUyIEQxQkI2N0YxIEE2QkM1NzY3IDNGQjUwNkREIDQ4QjIzNjRCIEQ4MEQyQkRBIEFGMEExQjRDIDM2MDM0QUY2IDQxMDQ3QTYwIERGNjBFRkMzIEE4NjdERjU1IDMxNkU4RUVGIDQ2NjlCRTc5IENCNjFCMzhDIEJDNjY4MzFBIDI1NkZEMkEwIDUyNjhFMjM2IENDMEM3Nzk1IEJCMEI0NzAzIDIyMDIxNkI5IDU1MDUyNjJGIEM1QkEzQkJFIEIyQkQwQjI4IDJCQjQ1QTkyIDVDQjM2QTA0IEMyRDdGRkE3IEI1RDBDRjMxIDJDRDk5RThCIDVCREVBRTFEIDlCNjRDMkIwIEVDNjNGMjI2IDc1NkFBMzlDIDAyNkQ5MzBBIDlDMDkwNkE5IEVCMEUzNjNGIDcyMDc2Nzg1IDA1MDA1NzEzIDk1QkY0QTgyIEUyQjg3QTE0IDdCQjEyQkFFIDBDQjYxQjM4IDkyRDI4RTlCIEU1RDVCRTBEIDdDRENFRkI3IDBCREJERjIxIDg2RDNEMkQ0IEYxRDRFMjQyIDY4RERCM0Y4IDFGREE4MzZFIDgxQkUxNkNEIEY2QjkyNjVCIDZGQjA3N0UxIDE4Qjc0Nzc3IDg4MDg1QUU2IEZGMEY2QTcwIDY2MDYzQkNBIDExMDEwQjVDIDhGNjU5RUZGIEY4NjJBRTY5IDYxNkJGRkQzIDE2NkNDRjQ1IEEwMEFFMjc4IEQ3MEREMkVFIDRFMDQ4MzU0IDM5MDNCM0MyIEE3NjcyNjYxIEQwNjAxNkY3IDQ5Njk0NzREIDNFNkU3N0RCIEFFRDE2QTRBIEQ5RDY1QURDIDQwREYwQjY2IDM3RDgzQkYwIEE5QkNBRTUzIERFQkI5RUM1IDQ3QjJDRjdGIDMwQjVGRkU5IEJEQkRGMjFDIENBQkFDMjhBIDUzQjM5MzMwIDI0QjRBM0E2IEJBRDAzNjA1IENERDcwNjkzIDU0REU1NzI5IDIzRDk2N0JGIEIzNjY3QTJFIEM0NjE0QUI4IDVENjgxQjAyIDJBNkYyQjk0IEI0MEJCRTM3IEMzMEM4RUExIDVBMDVERjFCIDJEMDJFRjhEIi5zdWJzdHIoOSoKZCw4KSxnPWc+Pj44XmQ7aFthXT1nXi0xO3RoaXMuc2V0VFRMKGEsZi5UVEx8fDApO3ooYSxiKTtyKGEsInVwZGF0ZWQiKTtyZXR1cm4gYn0sZ2V0OmZ1bmN0aW9uKGEsYil7cChhKTtyZXR1cm4gYSBpbiBjP2NbYV0mJiJvYmplY3QiPT10eXBlb2YgY1thXSYmY1thXS5faXNfeG1sJiZjW2FdLl9pc194bWw/Qy5kZWNvZGUoY1thXS54bWwpOmNbYV06InVuZGVmaW5lZCI9PXR5cGVvZiBiP251bGw6Yn0sZGVsZXRlS2V5OmZ1bmN0aW9uKGEpe3AoYSk7cmV0dXJuIGEgaW4gYz8oZGVsZXRlIGNbYV0sIm9iamVjdCI9PXR5cGVvZiBjLl9fanN0b3JhZ2VfbWV0YS5UVEwmJmEgaW4gYy5fX2pzdG9yYWdlX21ldGEuVFRMJiZkZWxldGUgYy5fX2pzdG9yYWdlX21ldGEuVFRMW2FdLGRlbGV0ZSBjLl9fanN0b3JhZ2VfbWV0YS5DUkMzMlthXSx6KGEsdm9pZCAwKSx2KCksdSgpLHIoYSwiZGVsZXRlZCIpLCEwKTohMX0sc2V0VFRMOmZ1bmN0aW9uKGEsYil7dmFyIGY9K25ldyBEYXRlO3AoYSk7CmI9TnVtYmVyKGIpfHwwO3JldHVybiBhIGluIGM/KGMuX19qc3RvcmFnZV9tZXRhLlRUTHx8KGMuX19qc3RvcmFnZV9tZXRhLlRUTD17fSksMDxiP2MuX19qc3RvcmFnZV9tZXRhLlRUTFthXT1mK2I6ZGVsZXRlIGMuX19qc3RvcmFnZV9tZXRhLlRUTFthXSx2KCkseSgpLHUoKSwhMCk6ITF9LGdldFRUTDpmdW5jdGlvbihhKXt2YXIgYj0rbmV3IERhdGU7cChhKTtyZXR1cm4gYSBpbiBjJiZjLl9fanN0b3JhZ2VfbWV0YS5UVEwmJmMuX19qc3RvcmFnZV9tZXRhLlRUTFthXT8oYT1jLl9fanN0b3JhZ2VfbWV0YS5UVExbYV0tYil8fDA6MH0sZmx1c2g6ZnVuY3Rpb24oKXtjPXtfX2pzdG9yYWdlX21ldGE6e0NSQzMyOnt9fX07eCgibG9jYWwiLCEwKTt2KCk7dSgpO3IobnVsbCwiZmx1c2hlZCIpO3JldHVybiEwfSxzdG9yYWdlT2JqOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe31hLnByb3RvdHlwZT1jO3JldHVybiBuZXcgYX0saW5kZXg6ZnVuY3Rpb24oKXt2YXIgYT1bXSxiO2ZvcihiIGluIGMpYy5oYXNPd25Qcm9wZXJ0eShiKSYmCiJfX2pzdG9yYWdlX21ldGEiIT1iJiZhLnB1c2goYik7cmV0dXJuIGF9LHN0b3JhZ2VTaXplOmZ1bmN0aW9uKCl7cmV0dXJuIEF9LGN1cnJlbnRCYWNrZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIGx9LHN0b3JhZ2VBdmFpbGFibGU6ZnVuY3Rpb24oKXtyZXR1cm4hIWx9LGxpc3RlbktleUNoYW5nZTpmdW5jdGlvbihhLGIpe3AoYSk7blthXXx8KG5bYV09W10pO25bYV0ucHVzaChiKX0sc3RvcExpc3RlbmluZzpmdW5jdGlvbihhLGIpe3AoYSk7aWYoblthXSlpZihiKWZvcih2YXIgYz1uW2FdLmxlbmd0aC0xOzA8PWM7Yy0tKW5bYV1bY109PWImJm5bYV0uc3BsaWNlKGMsMSk7ZWxzZSBkZWxldGUgblthXX0sc3Vic2NyaWJlOmZ1bmN0aW9uKGEsYil7YT0oYXx8IiIpLnRvU3RyaW5nKCk7aWYoIWEpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2hhbm5lbCBub3QgZGVmaW5lZCIpO3NbYV18fChzW2FdPVtdKTtzW2FdLnB1c2goYil9LHB1Ymxpc2g6ZnVuY3Rpb24oYSxiKXthPShhfHwiIikudG9TdHJpbmcoKTsKaWYoIWEpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2hhbm5lbCBub3QgZGVmaW5lZCIpO2MuX19qc3RvcmFnZV9tZXRhfHwoYy5fX2pzdG9yYWdlX21ldGE9e30pO2MuX19qc3RvcmFnZV9tZXRhLlB1YlN1Ynx8KGMuX19qc3RvcmFnZV9tZXRhLlB1YlN1Yj1bXSk7Yy5fX2pzdG9yYWdlX21ldGEuUHViU3ViLnVuc2hpZnQoWytuZXcgRGF0ZSxhLGJdKTt2KCk7dSgpfSxyZUluaXQ6ZnVuY3Rpb24oKXtEKCl9fTthOnt2YXIgdz0hMTtpZigibG9jYWxTdG9yYWdlImluIHdpbmRvdyl0cnl7d2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCJfdG1wdGVzdCIsInRtcHZhbCIpLHc9ITAsd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJfdG1wdGVzdCIpfWNhdGNoKEkpe31pZih3KXRyeXt3aW5kb3cubG9jYWxTdG9yYWdlJiYoaz13aW5kb3cubG9jYWxTdG9yYWdlLGw9ImxvY2FsU3RvcmFnZSIscT1rLmpTdG9yYWdlX3VwZGF0ZSl9Y2F0Y2goSil7fWVsc2UgaWYoImdsb2JhbFN0b3JhZ2UiaW4Kd2luZG93KXRyeXt3aW5kb3cuZ2xvYmFsU3RvcmFnZSYmKGs9d2luZG93Lmdsb2JhbFN0b3JhZ2Vbd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lXSxsPSJnbG9iYWxTdG9yYWdlIixxPWsualN0b3JhZ2VfdXBkYXRlKX1jYXRjaChLKXt9ZWxzZSBpZihpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpbmsiKSxpLmFkZEJlaGF2aW9yKXtpLnN0eWxlLmJlaGF2aW9yPSJ1cmwoI2RlZmF1bHQjdXNlckRhdGEpIjtkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdLmFwcGVuZENoaWxkKGkpO3RyeXtpLmxvYWQoImpTdG9yYWdlIil9Y2F0Y2goTCl7aS5zZXRBdHRyaWJ1dGUoImpTdG9yYWdlIiwie30iKSxpLnNhdmUoImpTdG9yYWdlIiksaS5sb2FkKCJqU3RvcmFnZSIpfXc9Int9Ijt0cnl7dz1pLmdldEF0dHJpYnV0ZSgialN0b3JhZ2UiKX1jYXRjaChNKXt9dHJ5e3E9aS5nZXRBdHRyaWJ1dGUoImpTdG9yYWdlX3VwZGF0ZSIpfWNhdGNoKE4pe31rLmpTdG9yYWdlPXc7Cmw9InVzZXJEYXRhQmVoYXZpb3IifWVsc2V7aT1udWxsO2JyZWFrIGF9RSgpO3koKTt4KCJsb2NhbCIpO3goInNlc3Npb24iKTsibG9jYWxTdG9yYWdlIj09bHx8Imdsb2JhbFN0b3JhZ2UiPT1sPyJhZGRFdmVudExpc3RlbmVyImluIHdpbmRvdz93aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigic3RvcmFnZSIsdCwhMSk6ZG9jdW1lbnQuYXR0YWNoRXZlbnQoIm9uc3RvcmFnZSIsdCk6InVzZXJEYXRhQmVoYXZpb3IiPT1sJiZzZXRJbnRlcnZhbCh0LDFFMyk7RigpOyJhZGRFdmVudExpc3RlbmVyImluIHdpbmRvdyYmd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInBhZ2VzaG93IixmdW5jdGlvbihhKXthLnBlcnNpc3RlZCYmdCgpfSwhMSl9fSkoKTs="},{"name":"slimScroll","src":"LyohIENvcHlyaWdodCAoYykgMjAxMSBQaW90ciBSb2NoYWxhIChodHRwOi8vcm9jaGEubGEpCiAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCAoaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHApCiAqIGFuZCBHUEwgKGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvZ3BsLWxpY2Vuc2UucGhwKSBsaWNlbnNlcy4KICoKICogVmVyc2lvbjogMC42LjUKICogCiAqLwooZnVuY3Rpb24oZCl7alF1ZXJ5LmZuLmV4dGVuZCh7c2xpbVNjcm9sbDpmdW5jdGlvbihtKXt2YXIgYT1kLmV4dGVuZCh7d2hlZWxTdGVwOjIwLHdpZHRoOiJhdXRvIixoZWlnaHQ6IjI1MHB4IixzaXplOiI3cHgiLGNvbG9yOiIjMDAwIixwb3NpdGlvbjoicmlnaHQiLGRpc3RhbmNlOiIxcHgiLHN0YXJ0OiJ0b3AiLG9wYWNpdHk6MC40LGFsd2F5c1Zpc2libGU6ITEsZGlzYWJsZUZhZGVPdXQ6ITEscmFpbFZpc2libGU6ITEscmFpbENvbG9yOiIjMzMzIixyYWlsT3BhY2l0eToiMC4yIixyYWlsQ2xhc3M6InNsaW1TY3JvbGxSYWlsIixiYXJDbGFzczoic2xpbVNjcm9sbEJhciIsd3JhcHBlckNsYXNzOiJzbGltU2Nyb2xsRGl2IixhbGxvd1BhZ2VTY3JvbGw6ITEsc2Nyb2xsOjAsdG91Y2hTY3JvbGxTdGVwOjIwMH0sbSk7dGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShpLGQsZSl7dmFyIGY9aTtkJiYoZj1wYXJzZUludChjLmNzcygidG9wIikpK2kqcGFyc2VJbnQoYS53aGVlbFN0ZXApLwoxMDAqYy5vdXRlckhlaWdodCgpLGQ9Yi5vdXRlckhlaWdodCgpLWMub3V0ZXJIZWlnaHQoKSxmPU1hdGgubWluKE1hdGgubWF4KGYsMCksZCksYy5jc3Moe3RvcDpmKyJweCJ9KSk7Zz1wYXJzZUludChjLmNzcygidG9wIikpLyhiLm91dGVySGVpZ2h0KCktYy5vdXRlckhlaWdodCgpKTtmPWcqKGJbMF0uc2Nyb2xsSGVpZ2h0LWIub3V0ZXJIZWlnaHQoKSk7ZSYmKGY9aSxpPWYvYlswXS5zY3JvbGxIZWlnaHQqYi5vdXRlckhlaWdodCgpLGMuY3NzKHt0b3A6aSsicHgifSkpO2Iuc2Nyb2xsVG9wKGYpO24oKTtqKCl9ZnVuY3Rpb24gdCgpe3A9TWF0aC5tYXgoYi5vdXRlckhlaWdodCgpL2JbMF0uc2Nyb2xsSGVpZ2h0KmIub3V0ZXJIZWlnaHQoKSxtKTtjLmNzcyh7aGVpZ2h0OnArInB4In0pfWZ1bmN0aW9uIG4oKXt0KCk7Y2xlYXJUaW1lb3V0KHUpO2c9PX5+ZyYmKGs9YS5hbGxvd1BhZ2VTY3JvbGwsdiE9ZyYmYi50cmlnZ2VyKCJzbGltc2Nyb2xsIiwwPT1+fmc/InRvcCI6ImJvdHRvbSIpKTsKdj1nO3A+PWIub3V0ZXJIZWlnaHQoKT9rPSEwOihjLnN0b3AoITAsITApLmZhZGVJbigiZmFzdCIpLGEucmFpbFZpc2libGUmJmguc3RvcCghMCwhMCkuZmFkZUluKCJmYXN0IikpfWZ1bmN0aW9uIGooKXthLmFsd2F5c1Zpc2libGV8fCh1PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtpZigoIWEuZGlzYWJsZUZhZGVPdXR8fCFsKSYmIXEmJiFyKWMuZmFkZU91dCgic2xvdyIpLGguZmFkZU91dCgic2xvdyIpfSwxRTMpKX12YXIgbCxxLHIsdSx3LHAsZyx2LG09MzAsaz0hMSxiPWQodGhpcyk7aWYoYi5wYXJlbnQoKS5oYXNDbGFzcygic2xpbVNjcm9sbERpdiIpKXNjcm9sbCYmKGM9Yi5wYXJlbnQoKS5maW5kKCIuc2xpbVNjcm9sbEJhciIpLGg9Yi5wYXJlbnQoKS5maW5kKCIuc2xpbVNjcm9sbFJhaWwiKSxlKGIuc2Nyb2xsVG9wKCkrcGFyc2VJbnQoc2Nyb2xsKSwhMSwhMCkpO2Vsc2V7dmFyIHk9ZCgiPGRpdj48L2Rpdj4iKS5hZGRDbGFzcyhhLndyYXBwZXJDbGFzcykuY3NzKHtwb3NpdGlvbjoicmVsYXRpdmUiLApvdmVyZmxvdzoiaGlkZGVuIix3aWR0aDphLndpZHRoLGhlaWdodDphLmhlaWdodH0pO2IuY3NzKHtvdmVyZmxvdzoiaGlkZGVuIix3aWR0aDphLndpZHRoLGhlaWdodDphLmhlaWdodH0pO3ZhciBoPWQoIjxkaXY+PC9kaXY+IikuYWRkQ2xhc3MoYS5yYWlsQ2xhc3MpLmNzcyh7d2lkdGg6YS5zaXplLGhlaWdodDoiMTAwJSIscG9zaXRpb246ImFic29sdXRlIix0b3A6MCxkaXNwbGF5OmEuYWx3YXlzVmlzaWJsZSYmYS5yYWlsVmlzaWJsZT8iYmxvY2siOiJub25lIiwiYm9yZGVyLXJhZGl1cyI6YS5zaXplLGJhY2tncm91bmQ6YS5yYWlsQ29sb3Isb3BhY2l0eTphLnJhaWxPcGFjaXR5LHpJbmRleDo5MH0pLGM9ZCgiPGRpdj48L2Rpdj4iKS5hZGRDbGFzcyhhLmJhckNsYXNzKS5jc3Moe2JhY2tncm91bmQ6YS5jb2xvcix3aWR0aDphLnNpemUscG9zaXRpb246ImFic29sdXRlIix0b3A6MCxvcGFjaXR5OmEub3BhY2l0eSxkaXNwbGF5OmEuYWx3YXlzVmlzaWJsZT8iYmxvY2siOiJub25lIiwKImJvcmRlci1yYWRpdXMiOmEuc2l6ZSxCb3JkZXJSYWRpdXM6YS5zaXplLE1vekJvcmRlclJhZGl1czphLnNpemUsV2Via2l0Qm9yZGVyUmFkaXVzOmEuc2l6ZSx6SW5kZXg6OTl9KSx4PSJyaWdodCI9PWEucG9zaXRpb24/e3JpZ2h0OmEuZGlzdGFuY2V9OntsZWZ0OmEuZGlzdGFuY2V9O2guY3NzKHgpO2MuY3NzKHgpO2Iud3JhcCh5KTtiLnBhcmVudCgpLmFwcGVuZChjKTtiLnBhcmVudCgpLmFwcGVuZChoKTtjLmRyYWdnYWJsZSh7YXhpczoieSIsY29udGFpbm1lbnQ6InBhcmVudCIsc3RhcnQ6ZnVuY3Rpb24oKXtyPSEwfSxzdG9wOmZ1bmN0aW9uKCl7cj0hMTtqKCl9LGRyYWc6ZnVuY3Rpb24oKXtlKDAsZCh0aGlzKS5wb3NpdGlvbigpLnRvcCwhMSl9fSk7aC5ob3ZlcihmdW5jdGlvbigpe24oKX0sZnVuY3Rpb24oKXtqKCl9KTtjLmhvdmVyKGZ1bmN0aW9uKCl7cT0hMH0sZnVuY3Rpb24oKXtxPSExfSk7Yi5ob3ZlcihmdW5jdGlvbigpe2w9ITA7bigpO2ooKX0sZnVuY3Rpb24oKXtsPQohMTtqKCl9KTtiLmJpbmQoInRvdWNoc3RhcnQiLGZ1bmN0aW9uKGEpe2Eub3JpZ2luYWxFdmVudC50b3VjaGVzLmxlbmd0aCYmKHc9YS5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF0ucGFnZVkpfSk7Yi5iaW5kKCJ0b3VjaG1vdmUiLGZ1bmN0aW9uKGIpe2Iub3JpZ2luYWxFdmVudC5wcmV2ZW50RGVmYXVsdCgpO2Iub3JpZ2luYWxFdmVudC50b3VjaGVzLmxlbmd0aCYmZSgody1iLm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXS5wYWdlWSkvYS50b3VjaFNjcm9sbFN0ZXAsITApfSk7dmFyIHM9ZnVuY3Rpb24oYSl7aWYobCl7dmFyIGE9YXx8d2luZG93LmV2ZW50LGI9MDthLndoZWVsRGVsdGEmJihiPS1hLndoZWVsRGVsdGEvMTIwKTthLmRldGFpbCYmKGI9YS5kZXRhaWwvMyk7ZShiLCEwKTthLnByZXZlbnREZWZhdWx0JiYhayYmYS5wcmV2ZW50RGVmYXVsdCgpO2t8fChhLnJldHVyblZhbHVlPSExKX19OyhmdW5jdGlvbigpe3dpbmRvdy5hZGRFdmVudExpc3RlbmVyPyh0aGlzLmFkZEV2ZW50TGlzdGVuZXIoIkRPTU1vdXNlU2Nyb2xsIiwKcywhMSksdGhpcy5hZGRFdmVudExpc3RlbmVyKCJtb3VzZXdoZWVsIixzLCExKSk6ZG9jdW1lbnQuYXR0YWNoRXZlbnQoIm9ubW91c2V3aGVlbCIscyl9KSgpO3QoKTsiYm90dG9tIj09YS5zdGFydD8oYy5jc3Moe3RvcDpiLm91dGVySGVpZ2h0KCktYy5vdXRlckhlaWdodCgpfSksZSgwLCEwKSk6Im9iamVjdCI9PXR5cGVvZiBhLnN0YXJ0JiYoZShkKGEuc3RhcnQpLnBvc2l0aW9uKCkudG9wLG51bGwsITApLGEuYWx3YXlzVmlzaWJsZXx8Yy5oaWRlKCkpfX0pO3JldHVybiB0aGlzfX0pO2pRdWVyeS5mbi5leHRlbmQoe3NsaW1zY3JvbGw6alF1ZXJ5LmZuLnNsaW1TY3JvbGx9KX0pKGpRdWVyeSk7"},{"name":"slimScroll","src":"LyohIENvcHlyaWdodCAoYykgMjAxMSBQaW90ciBSb2NoYWxhIChodHRwOi8vcm9jaGEubGEpCiAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCAoaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHApCiAqIGFuZCBHUEwgKGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvZ3BsLWxpY2Vuc2UucGhwKSBsaWNlbnNlcy4KICoKICogVmVyc2lvbjogMC42LjUKICogCiAqLwooZnVuY3Rpb24oZCl7alF1ZXJ5LmZuLmV4dGVuZCh7c2xpbVNjcm9sbDpmdW5jdGlvbihtKXt2YXIgYT1kLmV4dGVuZCh7d2hlZWxTdGVwOjIwLHdpZHRoOiJhdXRvIixoZWlnaHQ6IjI1MHB4IixzaXplOiI3cHgiLGNvbG9yOiIjMDAwIixwb3NpdGlvbjoicmlnaHQiLGRpc3RhbmNlOiIxcHgiLHN0YXJ0OiJ0b3AiLG9wYWNpdHk6MC40LGFsd2F5c1Zpc2libGU6ITEsZGlzYWJsZUZhZGVPdXQ6ITEscmFpbFZpc2libGU6ITEscmFpbENvbG9yOiIjMzMzIixyYWlsT3BhY2l0eToiMC4yIixyYWlsQ2xhc3M6InNsaW1TY3JvbGxSYWlsIixiYXJDbGFzczoic2xpbVNjcm9sbEJhciIsd3JhcHBlckNsYXNzOiJzbGltU2Nyb2xsRGl2IixhbGxvd1BhZ2VTY3JvbGw6ITEsc2Nyb2xsOjAsdG91Y2hTY3JvbGxTdGVwOjIwMH0sbSk7dGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShpLGQsZSl7dmFyIGY9aTtkJiYoZj1wYXJzZUludChjLmNzcygidG9wIikpK2kqcGFyc2VJbnQoYS53aGVlbFN0ZXApLwoxMDAqYy5vdXRlckhlaWdodCgpLGQ9Yi5vdXRlckhlaWdodCgpLWMub3V0ZXJIZWlnaHQoKSxmPU1hdGgubWluKE1hdGgubWF4KGYsMCksZCksYy5jc3Moe3RvcDpmKyJweCJ9KSk7Zz1wYXJzZUludChjLmNzcygidG9wIikpLyhiLm91dGVySGVpZ2h0KCktYy5vdXRlckhlaWdodCgpKTtmPWcqKGJbMF0uc2Nyb2xsSGVpZ2h0LWIub3V0ZXJIZWlnaHQoKSk7ZSYmKGY9aSxpPWYvYlswXS5zY3JvbGxIZWlnaHQqYi5vdXRlckhlaWdodCgpLGMuY3NzKHt0b3A6aSsicHgifSkpO2Iuc2Nyb2xsVG9wKGYpO24oKTtqKCl9ZnVuY3Rpb24gdCgpe3A9TWF0aC5tYXgoYi5vdXRlckhlaWdodCgpL2JbMF0uc2Nyb2xsSGVpZ2h0KmIub3V0ZXJIZWlnaHQoKSxtKTtjLmNzcyh7aGVpZ2h0OnArInB4In0pfWZ1bmN0aW9uIG4oKXt0KCk7Y2xlYXJUaW1lb3V0KHUpO2c9PX5+ZyYmKGs9YS5hbGxvd1BhZ2VTY3JvbGwsdiE9ZyYmYi50cmlnZ2VyKCJzbGltc2Nyb2xsIiwwPT1+fmc/InRvcCI6ImJvdHRvbSIpKTsKdj1nO3A+PWIub3V0ZXJIZWlnaHQoKT9rPSEwOihjLnN0b3AoITAsITApLmZhZGVJbigiZmFzdCIpLGEucmFpbFZpc2libGUmJmguc3RvcCghMCwhMCkuZmFkZUluKCJmYXN0IikpfWZ1bmN0aW9uIGooKXthLmFsd2F5c1Zpc2libGV8fCh1PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtpZigoIWEuZGlzYWJsZUZhZGVPdXR8fCFsKSYmIXEmJiFyKWMuZmFkZU91dCgic2xvdyIpLGguZmFkZU91dCgic2xvdyIpfSwxRTMpKX12YXIgbCxxLHIsdSx3LHAsZyx2LG09MzAsaz0hMSxiPWQodGhpcyk7aWYoYi5wYXJlbnQoKS5oYXNDbGFzcygic2xpbVNjcm9sbERpdiIpKXNjcm9sbCYmKGM9Yi5wYXJlbnQoKS5maW5kKCIuc2xpbVNjcm9sbEJhciIpLGg9Yi5wYXJlbnQoKS5maW5kKCIuc2xpbVNjcm9sbFJhaWwiKSxlKGIuc2Nyb2xsVG9wKCkrcGFyc2VJbnQoc2Nyb2xsKSwhMSwhMCkpO2Vsc2V7dmFyIHk9ZCgiPGRpdj48L2Rpdj4iKS5hZGRDbGFzcyhhLndyYXBwZXJDbGFzcykuY3NzKHtwb3NpdGlvbjoicmVsYXRpdmUiLApvdmVyZmxvdzoiaGlkZGVuIix3aWR0aDphLndpZHRoLGhlaWdodDphLmhlaWdodH0pO2IuY3NzKHtvdmVyZmxvdzoiaGlkZGVuIix3aWR0aDphLndpZHRoLGhlaWdodDphLmhlaWdodH0pO3ZhciBoPWQoIjxkaXY+PC9kaXY+IikuYWRkQ2xhc3MoYS5yYWlsQ2xhc3MpLmNzcyh7d2lkdGg6YS5zaXplLGhlaWdodDoiMTAwJSIscG9zaXRpb246ImFic29sdXRlIix0b3A6MCxkaXNwbGF5OmEuYWx3YXlzVmlzaWJsZSYmYS5yYWlsVmlzaWJsZT8iYmxvY2siOiJub25lIiwiYm9yZGVyLXJhZGl1cyI6YS5zaXplLGJhY2tncm91bmQ6YS5yYWlsQ29sb3Isb3BhY2l0eTphLnJhaWxPcGFjaXR5LHpJbmRleDo5MH0pLGM9ZCgiPGRpdj48L2Rpdj4iKS5hZGRDbGFzcyhhLmJhckNsYXNzKS5jc3Moe2JhY2tncm91bmQ6YS5jb2xvcix3aWR0aDphLnNpemUscG9zaXRpb246ImFic29sdXRlIix0b3A6MCxvcGFjaXR5OmEub3BhY2l0eSxkaXNwbGF5OmEuYWx3YXlzVmlzaWJsZT8iYmxvY2siOiJub25lIiwKImJvcmRlci1yYWRpdXMiOmEuc2l6ZSxCb3JkZXJSYWRpdXM6YS5zaXplLE1vekJvcmRlclJhZGl1czphLnNpemUsV2Via2l0Qm9yZGVyUmFkaXVzOmEuc2l6ZSx6SW5kZXg6OTl9KSx4PSJyaWdodCI9PWEucG9zaXRpb24/e3JpZ2h0OmEuZGlzdGFuY2V9OntsZWZ0OmEuZGlzdGFuY2V9O2guY3NzKHgpO2MuY3NzKHgpO2Iud3JhcCh5KTtiLnBhcmVudCgpLmFwcGVuZChjKTtiLnBhcmVudCgpLmFwcGVuZChoKTtjLmRyYWdnYWJsZSh7YXhpczoieSIsY29udGFpbm1lbnQ6InBhcmVudCIsc3RhcnQ6ZnVuY3Rpb24oKXtyPSEwfSxzdG9wOmZ1bmN0aW9uKCl7cj0hMTtqKCl9LGRyYWc6ZnVuY3Rpb24oKXtlKDAsZCh0aGlzKS5wb3NpdGlvbigpLnRvcCwhMSl9fSk7aC5ob3ZlcihmdW5jdGlvbigpe24oKX0sZnVuY3Rpb24oKXtqKCl9KTtjLmhvdmVyKGZ1bmN0aW9uKCl7cT0hMH0sZnVuY3Rpb24oKXtxPSExfSk7Yi5ob3ZlcihmdW5jdGlvbigpe2w9ITA7bigpO2ooKX0sZnVuY3Rpb24oKXtsPQohMTtqKCl9KTtiLmJpbmQoInRvdWNoc3RhcnQiLGZ1bmN0aW9uKGEpe2Eub3JpZ2luYWxFdmVudC50b3VjaGVzLmxlbmd0aCYmKHc9YS5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF0ucGFnZVkpfSk7Yi5iaW5kKCJ0b3VjaG1vdmUiLGZ1bmN0aW9uKGIpe2Iub3JpZ2luYWxFdmVudC5wcmV2ZW50RGVmYXVsdCgpO2Iub3JpZ2luYWxFdmVudC50b3VjaGVzLmxlbmd0aCYmZSgody1iLm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXS5wYWdlWSkvYS50b3VjaFNjcm9sbFN0ZXAsITApfSk7dmFyIHM9ZnVuY3Rpb24oYSl7aWYobCl7dmFyIGE9YXx8d2luZG93LmV2ZW50LGI9MDthLndoZWVsRGVsdGEmJihiPS1hLndoZWVsRGVsdGEvMTIwKTthLmRldGFpbCYmKGI9YS5kZXRhaWwvMyk7ZShiLCEwKTthLnByZXZlbnREZWZhdWx0JiYhayYmYS5wcmV2ZW50RGVmYXVsdCgpO2t8fChhLnJldHVyblZhbHVlPSExKX19OyhmdW5jdGlvbigpe3dpbmRvdy5hZGRFdmVudExpc3RlbmVyPyh0aGlzLmFkZEV2ZW50TGlzdGVuZXIoIkRPTU1vdXNlU2Nyb2xsIiwKcywhMSksdGhpcy5hZGRFdmVudExpc3RlbmVyKCJtb3VzZXdoZWVsIixzLCExKSk6ZG9jdW1lbnQuYXR0YWNoRXZlbnQoIm9ubW91c2V3aGVlbCIscyl9KSgpO3QoKTsiYm90dG9tIj09YS5zdGFydD8oYy5jc3Moe3RvcDpiLm91dGVySGVpZ2h0KCktYy5vdXRlckhlaWdodCgpfSksZSgwLCEwKSk6Im9iamVjdCI9PXR5cGVvZiBhLnN0YXJ0JiYoZShkKGEuc3RhcnQpLnBvc2l0aW9uKCkudG9wLG51bGwsITApLGEuYWx3YXlzVmlzaWJsZXx8Yy5oaWRlKCkpfX0pO3JldHVybiB0aGlzfX0pO2pRdWVyeS5mbi5leHRlbmQoe3NsaW1zY3JvbGw6alF1ZXJ5LmZuLnNsaW1TY3JvbGx9KX0pKGpRdWVyeSk7"},{"name":"bootstrap-transition","src":"LyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqIGJvb3RzdHJhcC10cmFuc2l0aW9uLmpzIHYyLjIuMgogKiBodHRwOi8vdHdpdHRlci5naXRodWIuY29tL2Jvb3RzdHJhcC9qYXZhc2NyaXB0Lmh0bWwjdHJhbnNpdGlvbnMKICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqIENvcHlyaWdodCAyMDEyIFR3aXR0ZXIsIEluYy4KICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovCgoKIWZ1bmN0aW9uICgkKSB7CgogICJ1c2Ugc3RyaWN0IjsgLy8ganNoaW50IDtfOwoKCiAgLyogQ1NTIFRSQU5TSVRJT04gU1VQUE9SVCAoaHR0cDovL3d3dy5tb2Rlcm5penIuY29tLykKICAgKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovCgogICQoZnVuY3Rpb24gKCkgewoKICAgICQuc3VwcG9ydC50cmFuc2l0aW9uID0gKGZ1bmN0aW9uICgpIHsKCiAgICAgIHZhciB0cmFuc2l0aW9uRW5kID0gKGZ1bmN0aW9uICgpIHsKCiAgICAgICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYm9vdHN0cmFwJykKICAgICAgICAgICwgdHJhbnNFbmRFdmVudE5hbWVzID0gewogICAgICAgICAgICAgICAnV2Via2l0VHJhbnNpdGlvbicgOiAnd2Via2l0VHJhbnNpdGlvbkVuZCcKICAgICAgICAgICAgLCAgJ01velRyYW5zaXRpb24nICAgIDogJ3RyYW5zaXRpb25lbmQnCiAgICAgICAgICAgICwgICdPVHJhbnNpdGlvbicgICAgICA6ICdvVHJhbnNpdGlvbkVuZCBvdHJhbnNpdGlvbmVuZCcKICAgICAgICAgICAgLCAgJ3RyYW5zaXRpb24nICAgICAgIDogJ3RyYW5zaXRpb25lbmQnCiAgICAgICAgICAgIH0KICAgICAgICAgICwgbmFtZQoKICAgICAgICBmb3IgKG5hbWUgaW4gdHJhbnNFbmRFdmVudE5hbWVzKXsKICAgICAgICAgIGlmIChlbC5zdHlsZVtuYW1lXSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIHJldHVybiB0cmFuc0VuZEV2ZW50TmFtZXNbbmFtZV0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICB9KCkpCgogICAgICByZXR1cm4gdHJhbnNpdGlvbkVuZCAmJiB7CiAgICAgICAgZW5kOiB0cmFuc2l0aW9uRW5kCiAgICAgIH0KCiAgICB9KSgpCgogIH0pCgp9KHdpbmRvdy5qUXVlcnkpOw=="},{"name":"bootstrap-alert","src":"LyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKiBib290c3RyYXAtYWxlcnQuanMgdjIuMi4yCiAqIGh0dHA6Ly90d2l0dGVyLmdpdGh1Yi5jb20vYm9vdHN0cmFwL2phdmFzY3JpcHQuaHRtbCNhbGVydHMKICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKiBDb3B5cmlnaHQgMjAxMiBUd2l0dGVyLCBJbmMuCiAqCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqLwoKCiFmdW5jdGlvbiAoJCkgewoKICAidXNlIHN0cmljdCI7IC8vIGpzaGludCA7XzsKCgogLyogQUxFUlQgQ0xBU1MgREVGSU5JVElPTgogICogPT09PT09PT09PT09PT09PT09PT09PSAqLwoKICB2YXIgZGlzbWlzcyA9ICdbZGF0YS1kaXNtaXNzPSJhbGVydCJdJwogICAgLCBBbGVydCA9IGZ1bmN0aW9uIChlbCkgewogICAgICAgICQoZWwpLm9uKCdjbGljaycsIGRpc21pc3MsIHRoaXMuY2xvc2UpCiAgICAgIH0KCiAgQWxlcnQucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKGUpIHsKICAgIHZhciAkdGhpcyA9ICQodGhpcykKICAgICAgLCBzZWxlY3RvciA9ICR0aGlzLmF0dHIoJ2RhdGEtdGFyZ2V0JykKICAgICAgLCAkcGFyZW50CgogICAgaWYgKCFzZWxlY3RvcikgewogICAgICBzZWxlY3RvciA9ICR0aGlzLmF0dHIoJ2hyZWYnKQogICAgICBzZWxlY3RvciA9IHNlbGVjdG9yICYmIHNlbGVjdG9yLnJlcGxhY2UoLy4qKD89I1teXHNdKiQpLywgJycpIC8vc3RyaXAgZm9yIGllNwogICAgfQoKICAgICRwYXJlbnQgPSAkKHNlbGVjdG9yKQoKICAgIGUgJiYgZS5wcmV2ZW50RGVmYXVsdCgpCgogICAgJHBhcmVudC5sZW5ndGggfHwgKCRwYXJlbnQgPSAkdGhpcy5oYXNDbGFzcygnYWxlcnQnKSA/ICR0aGlzIDogJHRoaXMucGFyZW50KCkpCgogICAgJHBhcmVudC50cmlnZ2VyKGUgPSAkLkV2ZW50KCdjbG9zZScpKQoKICAgIGlmIChlLmlzRGVmYXVsdFByZXZlbnRlZCgpKSByZXR1cm4KCiAgICAkcGFyZW50LnJlbW92ZUNsYXNzKCdpbicpCgogICAgZnVuY3Rpb24gcmVtb3ZlRWxlbWVudCgpIHsKICAgICAgJHBhcmVudAogICAgICAgIC50cmlnZ2VyKCdjbG9zZWQnKQogICAgICAgIC5yZW1vdmUoKQogICAgfQoKICAgICQuc3VwcG9ydC50cmFuc2l0aW9uICYmICRwYXJlbnQuaGFzQ2xhc3MoJ2ZhZGUnKSA/CiAgICAgICRwYXJlbnQub24oJC5zdXBwb3J0LnRyYW5zaXRpb24uZW5kLCByZW1vdmVFbGVtZW50KSA6CiAgICAgIHJlbW92ZUVsZW1lbnQoKQogIH0KCgogLyogQUxFUlQgUExVR0lOIERFRklOSVRJT04KICAqID09PT09PT09PT09PT09PT09PT09PT09ICovCgogIHZhciBvbGQgPSAkLmZuLmFsZXJ0CgogICQuZm4uYWxlcnQgPSBmdW5jdGlvbiAob3B0aW9uKSB7CiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgdmFyICR0aGlzID0gJCh0aGlzKQogICAgICAgICwgZGF0YSA9ICR0aGlzLmRhdGEoJ2FsZXJ0JykKICAgICAgaWYgKCFkYXRhKSAkdGhpcy5kYXRhKCdhbGVydCcsIChkYXRhID0gbmV3IEFsZXJ0KHRoaXMpKSkKICAgICAgaWYgKHR5cGVvZiBvcHRpb24gPT0gJ3N0cmluZycpIGRhdGFbb3B0aW9uXS5jYWxsKCR0aGlzKQogICAgfSkKICB9CgogICQuZm4uYWxlcnQuQ29uc3RydWN0b3IgPSBBbGVydAoKCiAvKiBBTEVSVCBOTyBDT05GTElDVAogICogPT09PT09PT09PT09PT09PT0gKi8KCiAgJC5mbi5hbGVydC5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkgewogICAgJC5mbi5hbGVydCA9IG9sZAogICAgcmV0dXJuIHRoaXMKICB9CgoKIC8qIEFMRVJUIERBVEEtQVBJCiAgKiA9PT09PT09PT09PT09PSAqLwoKICAkKGRvY3VtZW50KS5vbignY2xpY2suYWxlcnQuZGF0YS1hcGknLCBkaXNtaXNzLCBBbGVydC5wcm90b3R5cGUuY2xvc2UpCgp9KHdpbmRvdy5qUXVlcnkpOw=="},{"name":"bootstrap-modal","src":"LyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqIGJvb3RzdHJhcC1tb2RhbC5qcyB2Mi4yLjIKICogaHR0cDovL3R3aXR0ZXIuZ2l0aHViLmNvbS9ib290c3RyYXAvamF2YXNjcmlwdC5odG1sI21vZGFscwogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICogQ29weXJpZ2h0IDIwMTIgVHdpdHRlciwgSW5jLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqLwoKCiFmdW5jdGlvbiAoJCkgewoKICAidXNlIHN0cmljdCI7IC8vIGpzaGludCA7XzsKCgogLyogTU9EQUwgQ0xBU1MgREVGSU5JVElPTgogICogPT09PT09PT09PT09PT09PT09PT09PSAqLwoKICB2YXIgTW9kYWwgPSBmdW5jdGlvbiAoZWxlbWVudCwgb3B0aW9ucykgewogICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucwogICAgdGhpcy4kZWxlbWVudCA9ICQoZWxlbWVudCkKICAgICAgLmRlbGVnYXRlKCdbZGF0YS1kaXNtaXNzPSJtb2RhbCJdJywgJ2NsaWNrLmRpc21pc3MubW9kYWwnLCAkLnByb3h5KHRoaXMuaGlkZSwgdGhpcykpCiAgICB0aGlzLm9wdGlvbnMucmVtb3RlICYmIHRoaXMuJGVsZW1lbnQuZmluZCgnLm1vZGFsLWJvZHknKS5sb2FkKHRoaXMub3B0aW9ucy5yZW1vdGUpCiAgfQoKICBNb2RhbC5wcm90b3R5cGUgPSB7CgogICAgICBjb25zdHJ1Y3RvcjogTW9kYWwKCiAgICAsIHRvZ2dsZTogZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzWyF0aGlzLmlzU2hvd24gPyAnc2hvdycgOiAnaGlkZSddKCkKICAgICAgfQoKICAgICwgc2hvdzogZnVuY3Rpb24gKCkgewogICAgICAgIHZhciB0aGF0ID0gdGhpcwogICAgICAgICAgLCBlID0gJC5FdmVudCgnc2hvdycpCgogICAgICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcihlKQoKICAgICAgICBpZiAodGhpcy5pc1Nob3duIHx8IGUuaXNEZWZhdWx0UHJldmVudGVkKCkpIHJldHVybgoKICAgICAgICB0aGlzLmlzU2hvd24gPSB0cnVlCgogICAgICAgIHRoaXMuZXNjYXBlKCkKCiAgICAgICAgdGhpcy5iYWNrZHJvcChmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgdHJhbnNpdGlvbiA9ICQuc3VwcG9ydC50cmFuc2l0aW9uICYmIHRoYXQuJGVsZW1lbnQuaGFzQ2xhc3MoJ2ZhZGUnKQoKICAgICAgICAgIGlmICghdGhhdC4kZWxlbWVudC5wYXJlbnQoKS5sZW5ndGgpIHsKICAgICAgICAgICAgdGhhdC4kZWxlbWVudC5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KSAvL2Rvbid0IG1vdmUgbW9kYWxzIGRvbSBwb3NpdGlvbgogICAgICAgICAgfQoKICAgICAgICAgIHRoYXQuJGVsZW1lbnQKICAgICAgICAgICAgLnNob3coKQoKICAgICAgICAgIGlmICh0cmFuc2l0aW9uKSB7CiAgICAgICAgICAgIHRoYXQuJGVsZW1lbnRbMF0ub2Zmc2V0V2lkdGggLy8gZm9yY2UgcmVmbG93CiAgICAgICAgICB9CgogICAgICAgICAgdGhhdC4kZWxlbWVudAogICAgICAgICAgICAuYWRkQ2xhc3MoJ2luJykKICAgICAgICAgICAgLmF0dHIoJ2FyaWEtaGlkZGVuJywgZmFsc2UpCgogICAgICAgICAgdGhhdC5lbmZvcmNlRm9jdXMoKQoKICAgICAgICAgIHRyYW5zaXRpb24gPwogICAgICAgICAgICB0aGF0LiRlbGVtZW50Lm9uZSgkLnN1cHBvcnQudHJhbnNpdGlvbi5lbmQsIGZ1bmN0aW9uICgpIHsgdGhhdC4kZWxlbWVudC5mb2N1cygpLnRyaWdnZXIoJ3Nob3duJykgfSkgOgogICAgICAgICAgICB0aGF0LiRlbGVtZW50LmZvY3VzKCkudHJpZ2dlcignc2hvd24nKQoKICAgICAgICB9KQogICAgICB9CgogICAgLCBoaWRlOiBmdW5jdGlvbiAoZSkgewogICAgICAgIGUgJiYgZS5wcmV2ZW50RGVmYXVsdCgpCgogICAgICAgIHZhciB0aGF0ID0gdGhpcwoKICAgICAgICBlID0gJC5FdmVudCgnaGlkZScpCgogICAgICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcihlKQoKICAgICAgICBpZiAoIXRoaXMuaXNTaG93biB8fCBlLmlzRGVmYXVsdFByZXZlbnRlZCgpKSByZXR1cm4KCiAgICAgICAgdGhpcy5pc1Nob3duID0gZmFsc2UKCiAgICAgICAgdGhpcy5lc2NhcGUoKQoKICAgICAgICAkKGRvY3VtZW50KS5vZmYoJ2ZvY3VzaW4ubW9kYWwnKQoKICAgICAgICB0aGlzLiRlbGVtZW50CiAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ2luJykKICAgICAgICAgIC5hdHRyKCdhcmlhLWhpZGRlbicsIHRydWUpCgogICAgICAgICQuc3VwcG9ydC50cmFuc2l0aW9uICYmIHRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoJ2ZhZGUnKSA/CiAgICAgICAgICB0aGlzLmhpZGVXaXRoVHJhbnNpdGlvbigpIDoKICAgICAgICAgIHRoaXMuaGlkZU1vZGFsKCkKICAgICAgfQoKICAgICwgZW5mb3JjZUZvY3VzOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHRoYXQgPSB0aGlzCiAgICAgICAgJChkb2N1bWVudCkub24oJ2ZvY3VzaW4ubW9kYWwnLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgaWYgKHRoYXQuJGVsZW1lbnRbMF0gIT09IGUudGFyZ2V0ICYmICF0aGF0LiRlbGVtZW50LmhhcyhlLnRhcmdldCkubGVuZ3RoKSB7CiAgICAgICAgICAgIHRoYXQuJGVsZW1lbnQuZm9jdXMoKQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0KCiAgICAsIGVzY2FwZTogZnVuY3Rpb24gKCkgewogICAgICAgIHZhciB0aGF0ID0gdGhpcwogICAgICAgIGlmICh0aGlzLmlzU2hvd24gJiYgdGhpcy5vcHRpb25zLmtleWJvYXJkKSB7CiAgICAgICAgICB0aGlzLiRlbGVtZW50Lm9uKCdrZXl1cC5kaXNtaXNzLm1vZGFsJywgZnVuY3Rpb24gKCBlICkgewogICAgICAgICAgICBlLndoaWNoID09IDI3ICYmIHRoYXQuaGlkZSgpCiAgICAgICAgICB9KQogICAgICAgIH0gZWxzZSBpZiAoIXRoaXMuaXNTaG93bikgewogICAgICAgICAgdGhpcy4kZWxlbWVudC5vZmYoJ2tleXVwLmRpc21pc3MubW9kYWwnKQogICAgICAgIH0KICAgICAgfQoKICAgICwgaGlkZVdpdGhUcmFuc2l0aW9uOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHRoYXQgPSB0aGlzCiAgICAgICAgICAsIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICB0aGF0LiRlbGVtZW50Lm9mZigkLnN1cHBvcnQudHJhbnNpdGlvbi5lbmQpCiAgICAgICAgICAgICAgdGhhdC5oaWRlTW9kYWwoKQogICAgICAgICAgICB9LCA1MDApCgogICAgICAgIHRoaXMuJGVsZW1lbnQub25lKCQuc3VwcG9ydC50cmFuc2l0aW9uLmVuZCwgZnVuY3Rpb24gKCkgewogICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpCiAgICAgICAgICB0aGF0LmhpZGVNb2RhbCgpCiAgICAgICAgfSkKICAgICAgfQoKICAgICwgaGlkZU1vZGFsOiBmdW5jdGlvbiAodGhhdCkgewogICAgICAgIHRoaXMuJGVsZW1lbnQKICAgICAgICAgIC5oaWRlKCkKICAgICAgICAgIC50cmlnZ2VyKCdoaWRkZW4nKQoKICAgICAgICB0aGlzLmJhY2tkcm9wKCkKICAgICAgfQoKICAgICwgcmVtb3ZlQmFja2Ryb3A6IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLiRiYWNrZHJvcC5yZW1vdmUoKQogICAgICAgIHRoaXMuJGJhY2tkcm9wID0gbnVsbAogICAgICB9CgogICAgLCBiYWNrZHJvcDogZnVuY3Rpb24gKGNhbGxiYWNrKSB7CiAgICAgICAgdmFyIHRoYXQgPSB0aGlzCiAgICAgICAgICAsIGFuaW1hdGUgPSB0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKCdmYWRlJykgPyAnZmFkZScgOiAnJwoKICAgICAgICBpZiAodGhpcy5pc1Nob3duICYmIHRoaXMub3B0aW9ucy5iYWNrZHJvcCkgewogICAgICAgICAgdmFyIGRvQW5pbWF0ZSA9ICQuc3VwcG9ydC50cmFuc2l0aW9uICYmIGFuaW1hdGUKCiAgICAgICAgICB0aGlzLiRiYWNrZHJvcCA9ICQoJzxkaXYgY2xhc3M9Im1vZGFsLWJhY2tkcm9wICcgKyBhbmltYXRlICsgJyIgLz4nKQogICAgICAgICAgICAuYXBwZW5kVG8oZG9jdW1lbnQuYm9keSkKCiAgICAgICAgICB0aGlzLiRiYWNrZHJvcC5jbGljaygKICAgICAgICAgICAgdGhpcy5vcHRpb25zLmJhY2tkcm9wID09ICdzdGF0aWMnID8KICAgICAgICAgICAgICAkLnByb3h5KHRoaXMuJGVsZW1lbnRbMF0uZm9jdXMsIHRoaXMuJGVsZW1lbnRbMF0pCiAgICAgICAgICAgIDogJC5wcm94eSh0aGlzLmhpZGUsIHRoaXMpCiAgICAgICAgICApCgogICAgICAgICAgaWYgKGRvQW5pbWF0ZSkgdGhpcy4kYmFja2Ryb3BbMF0ub2Zmc2V0V2lkdGggLy8gZm9yY2UgcmVmbG93CgogICAgICAgICAgdGhpcy4kYmFja2Ryb3AuYWRkQ2xhc3MoJ2luJykKCiAgICAgICAgICBkb0FuaW1hdGUgPwogICAgICAgICAgICB0aGlzLiRiYWNrZHJvcC5vbmUoJC5zdXBwb3J0LnRyYW5zaXRpb24uZW5kLCBjYWxsYmFjaykgOgogICAgICAgICAgICBjYWxsYmFjaygpCgogICAgICAgIH0gZWxzZSBpZiAoIXRoaXMuaXNTaG93biAmJiB0aGlzLiRiYWNrZHJvcCkgewogICAgICAgICAgdGhpcy4kYmFja2Ryb3AucmVtb3ZlQ2xhc3MoJ2luJykKCiAgICAgICAgICAkLnN1cHBvcnQudHJhbnNpdGlvbiAmJiB0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKCdmYWRlJyk/CiAgICAgICAgICAgIHRoaXMuJGJhY2tkcm9wLm9uZSgkLnN1cHBvcnQudHJhbnNpdGlvbi5lbmQsICQucHJveHkodGhpcy5yZW1vdmVCYWNrZHJvcCwgdGhpcykpIDoKICAgICAgICAgICAgdGhpcy5yZW1vdmVCYWNrZHJvcCgpCgogICAgICAgIH0gZWxzZSBpZiAoY2FsbGJhY2spIHsKICAgICAgICAgIGNhbGxiYWNrKCkKICAgICAgICB9CiAgICAgIH0KICB9CgoKIC8qIE1PREFMIFBMVUdJTiBERUZJTklUSU9OCiAgKiA9PT09PT09PT09PT09PT09PT09PT09PSAqLwoKICB2YXIgb2xkID0gJC5mbi5tb2RhbAoKICAkLmZuLm1vZGFsID0gZnVuY3Rpb24gKG9wdGlvbikgewogICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgIHZhciAkdGhpcyA9ICQodGhpcykKICAgICAgICAsIGRhdGEgPSAkdGhpcy5kYXRhKCdtb2RhbCcpCiAgICAgICAgLCBvcHRpb25zID0gJC5leHRlbmQoe30sICQuZm4ubW9kYWwuZGVmYXVsdHMsICR0aGlzLmRhdGEoKSwgdHlwZW9mIG9wdGlvbiA9PSAnb2JqZWN0JyAmJiBvcHRpb24pCiAgICAgIGlmICghZGF0YSkgJHRoaXMuZGF0YSgnbW9kYWwnLCAoZGF0YSA9IG5ldyBNb2RhbCh0aGlzLCBvcHRpb25zKSkpCiAgICAgIGlmICh0eXBlb2Ygb3B0aW9uID09ICdzdHJpbmcnKSBkYXRhW29wdGlvbl0oKQogICAgICBlbHNlIGlmIChvcHRpb25zLnNob3cpIGRhdGEuc2hvdygpCiAgICB9KQogIH0KCiAgJC5mbi5tb2RhbC5kZWZhdWx0cyA9IHsKICAgICAgYmFja2Ryb3A6IHRydWUKICAgICwga2V5Ym9hcmQ6IHRydWUKICAgICwgc2hvdzogdHJ1ZQogIH0KCiAgJC5mbi5tb2RhbC5Db25zdHJ1Y3RvciA9IE1vZGFsCgoKIC8qIE1PREFMIE5PIENPTkZMSUNUCiAgKiA9PT09PT09PT09PT09PT09PSAqLwoKICAkLmZuLm1vZGFsLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7CiAgICAkLmZuLm1vZGFsID0gb2xkCiAgICByZXR1cm4gdGhpcwogIH0KCgogLyogTU9EQUwgREFUQS1BUEkKICAqID09PT09PT09PT09PT09ICovCgogICQoZG9jdW1lbnQpLm9uKCdjbGljay5tb2RhbC5kYXRhLWFwaScsICdbZGF0YS10b2dnbGU9Im1vZGFsIl0nLCBmdW5jdGlvbiAoZSkgewogICAgdmFyICR0aGlzID0gJCh0aGlzKQogICAgICAsIGhyZWYgPSAkdGhpcy5hdHRyKCdocmVmJykKICAgICAgLCAkdGFyZ2V0ID0gJCgkdGhpcy5hdHRyKCdkYXRhLXRhcmdldCcpIHx8IChocmVmICYmIGhyZWYucmVwbGFjZSgvLiooPz0jW15cc10rJCkvLCAnJykpKSAvL3N0cmlwIGZvciBpZTcKICAgICAgLCBvcHRpb24gPSAkdGFyZ2V0LmRhdGEoJ21vZGFsJykgPyAndG9nZ2xlJyA6ICQuZXh0ZW5kKHsgcmVtb3RlOiEvIy8udGVzdChocmVmKSAmJiBocmVmIH0sICR0YXJnZXQuZGF0YSgpLCAkdGhpcy5kYXRhKCkpCgogICAgZS5wcmV2ZW50RGVmYXVsdCgpCgogICAgJHRhcmdldAogICAgICAubW9kYWwob3B0aW9uKQogICAgICAub25lKCdoaWRlJywgZnVuY3Rpb24gKCkgewogICAgICAgICR0aGlzLmZvY3VzKCkKICAgICAgfSkKICB9KQoKfSh3aW5kb3cualF1ZXJ5KTsK"},{"name":"bootstrap-tab","src":"LyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICogYm9vdHN0cmFwLXRhYi5qcyB2Mi4yLjIKICogaHR0cDovL3R3aXR0ZXIuZ2l0aHViLmNvbS9ib290c3RyYXAvamF2YXNjcmlwdC5odG1sI3RhYnMKICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICogQ29weXJpZ2h0IDIwMTIgVHdpdHRlciwgSW5jLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovCgoKIWZ1bmN0aW9uICgkKSB7CgogICJ1c2Ugc3RyaWN0IjsgLy8ganNoaW50IDtfOwoKCiAvKiBUQUIgQ0xBU1MgREVGSU5JVElPTgogICogPT09PT09PT09PT09PT09PT09PT0gKi8KCiAgdmFyIFRhYiA9IGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICB0aGlzLmVsZW1lbnQgPSAkKGVsZW1lbnQpCiAgfQoKICBUYWIucHJvdG90eXBlID0gewoKICAgIGNvbnN0cnVjdG9yOiBUYWIKCiAgLCBzaG93OiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciAkdGhpcyA9IHRoaXMuZWxlbWVudAogICAgICAgICwgJHVsID0gJHRoaXMuY2xvc2VzdCgndWw6bm90KC5kcm9wZG93bi1tZW51KScpCiAgICAgICAgLCBzZWxlY3RvciA9ICR0aGlzLmF0dHIoJ2RhdGEtdGFyZ2V0JykKICAgICAgICAsIHByZXZpb3VzCiAgICAgICAgLCAkdGFyZ2V0CiAgICAgICAgLCBlCgogICAgICBpZiAoIXNlbGVjdG9yKSB7CiAgICAgICAgc2VsZWN0b3IgPSAkdGhpcy5hdHRyKCdocmVmJykKICAgICAgICBzZWxlY3RvciA9IHNlbGVjdG9yICYmIHNlbGVjdG9yLnJlcGxhY2UoLy4qKD89I1teXHNdKiQpLywgJycpIC8vc3RyaXAgZm9yIGllNwogICAgICB9CgogICAgICBpZiAoICR0aGlzLnBhcmVudCgnbGknKS5oYXNDbGFzcygnYWN0aXZlJykgKSByZXR1cm4KCiAgICAgIHByZXZpb3VzID0gJHVsLmZpbmQoJy5hY3RpdmU6bGFzdCBhJylbMF0KCiAgICAgIGUgPSAkLkV2ZW50KCdzaG93JywgewogICAgICAgIHJlbGF0ZWRUYXJnZXQ6IHByZXZpb3VzCiAgICAgIH0pCgogICAgICAkdGhpcy50cmlnZ2VyKGUpCgogICAgICBpZiAoZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkgcmV0dXJuCgogICAgICAkdGFyZ2V0ID0gJChzZWxlY3RvcikKCiAgICAgIHRoaXMuYWN0aXZhdGUoJHRoaXMucGFyZW50KCdsaScpLCAkdWwpCiAgICAgIHRoaXMuYWN0aXZhdGUoJHRhcmdldCwgJHRhcmdldC5wYXJlbnQoKSwgZnVuY3Rpb24gKCkgewogICAgICAgICR0aGlzLnRyaWdnZXIoewogICAgICAgICAgdHlwZTogJ3Nob3duJwogICAgICAgICwgcmVsYXRlZFRhcmdldDogcHJldmlvdXMKICAgICAgICB9KQogICAgICB9KQogICAgfQoKICAsIGFjdGl2YXRlOiBmdW5jdGlvbiAoIGVsZW1lbnQsIGNvbnRhaW5lciwgY2FsbGJhY2spIHsKICAgICAgdmFyICRhY3RpdmUgPSBjb250YWluZXIuZmluZCgnPiAuYWN0aXZlJykKICAgICAgICAsIHRyYW5zaXRpb24gPSBjYWxsYmFjawogICAgICAgICAgICAmJiAkLnN1cHBvcnQudHJhbnNpdGlvbgogICAgICAgICAgICAmJiAkYWN0aXZlLmhhc0NsYXNzKCdmYWRlJykKCiAgICAgIGZ1bmN0aW9uIG5leHQoKSB7CiAgICAgICAgJGFjdGl2ZQogICAgICAgICAgLnJlbW92ZUNsYXNzKCdhY3RpdmUnKQogICAgICAgICAgLmZpbmQoJz4gLmRyb3Bkb3duLW1lbnUgPiAuYWN0aXZlJykKICAgICAgICAgIC5yZW1vdmVDbGFzcygnYWN0aXZlJykKCiAgICAgICAgZWxlbWVudC5hZGRDbGFzcygnYWN0aXZlJykKCiAgICAgICAgaWYgKHRyYW5zaXRpb24pIHsKICAgICAgICAgIGVsZW1lbnRbMF0ub2Zmc2V0V2lkdGggLy8gcmVmbG93IGZvciB0cmFuc2l0aW9uCiAgICAgICAgICBlbGVtZW50LmFkZENsYXNzKCdpbicpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ2ZhZGUnKQogICAgICAgIH0KCiAgICAgICAgaWYgKCBlbGVtZW50LnBhcmVudCgnLmRyb3Bkb3duLW1lbnUnKSApIHsKICAgICAgICAgIGVsZW1lbnQuY2xvc2VzdCgnbGkuZHJvcGRvd24nKS5hZGRDbGFzcygnYWN0aXZlJykKICAgICAgICB9CgogICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKCkKICAgICAgfQoKICAgICAgdHJhbnNpdGlvbiA/CiAgICAgICAgJGFjdGl2ZS5vbmUoJC5zdXBwb3J0LnRyYW5zaXRpb24uZW5kLCBuZXh0KSA6CiAgICAgICAgbmV4dCgpCgogICAgICAkYWN0aXZlLnJlbW92ZUNsYXNzKCdpbicpCiAgICB9CiAgfQoKCiAvKiBUQUIgUExVR0lOIERFRklOSVRJT04KICAqID09PT09PT09PT09PT09PT09PT09PSAqLwoKICB2YXIgb2xkID0gJC5mbi50YWIKCiAgJC5mbi50YWIgPSBmdW5jdGlvbiAoIG9wdGlvbiApIHsKICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkgewogICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpCiAgICAgICAgLCBkYXRhID0gJHRoaXMuZGF0YSgndGFiJykKICAgICAgaWYgKCFkYXRhKSAkdGhpcy5kYXRhKCd0YWInLCAoZGF0YSA9IG5ldyBUYWIodGhpcykpKQogICAgICBpZiAodHlwZW9mIG9wdGlvbiA9PSAnc3RyaW5nJykgZGF0YVtvcHRpb25dKCkKICAgIH0pCiAgfQoKICAkLmZuLnRhYi5Db25zdHJ1Y3RvciA9IFRhYgoKCiAvKiBUQUIgTk8gQ09ORkxJQ1QKICAqID09PT09PT09PT09PT09PSAqLwoKICAkLmZuLnRhYi5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkgewogICAgJC5mbi50YWIgPSBvbGQKICAgIHJldHVybiB0aGlzCiAgfQoKCiAvKiBUQUIgREFUQS1BUEkKICAqID09PT09PT09PT09PSAqLwoKICAkKGRvY3VtZW50KS5vbignY2xpY2sudGFiLmRhdGEtYXBpJywgJ1tkYXRhLXRvZ2dsZT0idGFiIl0sIFtkYXRhLXRvZ2dsZT0icGlsbCJdJywgZnVuY3Rpb24gKGUpIHsKICAgIGUucHJldmVudERlZmF1bHQoKQogICAgJCh0aGlzKS50YWIoJ3Nob3cnKQogIH0pCgp9KHdpbmRvdy5qUXVlcnkpOw=="},{"name":"bootstrap-tooltip","src":"LyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICogYm9vdHN0cmFwLXRvb2x0aXAuanMgdjIuMi4yCiAqIGh0dHA6Ly90d2l0dGVyLmdpdGh1Yi5jb20vYm9vdHN0cmFwL2phdmFzY3JpcHQuaHRtbCN0b29sdGlwcwogKiBJbnNwaXJlZCBieSB0aGUgb3JpZ2luYWwgalF1ZXJ5LnRpcHN5IGJ5IEphc29uIEZyYW1lCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqIENvcHlyaWdodCAyMDEyIFR3aXR0ZXIsIEluYy4KICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovCgoKIWZ1bmN0aW9uICgkKSB7CgogICJ1c2Ugc3RyaWN0IjsgLy8ganNoaW50IDtfOwoKCiAvKiBUT09MVElQIFBVQkxJQyBDTEFTUyBERUZJTklUSU9OCiAgKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovCgogIHZhciBUb29sdGlwID0gZnVuY3Rpb24gKGVsZW1lbnQsIG9wdGlvbnMpIHsKICAgIHRoaXMuaW5pdCgndG9vbHRpcCcsIGVsZW1lbnQsIG9wdGlvbnMpCiAgfQoKICBUb29sdGlwLnByb3RvdHlwZSA9IHsKCiAgICBjb25zdHJ1Y3RvcjogVG9vbHRpcAoKICAsIGluaXQ6IGZ1bmN0aW9uICh0eXBlLCBlbGVtZW50LCBvcHRpb25zKSB7CiAgICAgIHZhciBldmVudEluCiAgICAgICAgLCBldmVudE91dAoKICAgICAgdGhpcy50eXBlID0gdHlwZQogICAgICB0aGlzLiRlbGVtZW50ID0gJChlbGVtZW50KQogICAgICB0aGlzLm9wdGlvbnMgPSB0aGlzLmdldE9wdGlvbnMob3B0aW9ucykKICAgICAgdGhpcy5lbmFibGVkID0gdHJ1ZQoKICAgICAgaWYgKHRoaXMub3B0aW9ucy50cmlnZ2VyID09ICdjbGljaycpIHsKICAgICAgICB0aGlzLiRlbGVtZW50Lm9uKCdjbGljay4nICsgdGhpcy50eXBlLCB0aGlzLm9wdGlvbnMuc2VsZWN0b3IsICQucHJveHkodGhpcy50b2dnbGUsIHRoaXMpKQogICAgICB9IGVsc2UgaWYgKHRoaXMub3B0aW9ucy50cmlnZ2VyICE9ICdtYW51YWwnKSB7CiAgICAgICAgZXZlbnRJbiA9IHRoaXMub3B0aW9ucy50cmlnZ2VyID09ICdob3ZlcicgPyAnbW91c2VlbnRlcicgOiAnZm9jdXMnCiAgICAgICAgZXZlbnRPdXQgPSB0aGlzLm9wdGlvbnMudHJpZ2dlciA9PSAnaG92ZXInID8gJ21vdXNlbGVhdmUnIDogJ2JsdXInCiAgICAgICAgdGhpcy4kZWxlbWVudC5vbihldmVudEluICsgJy4nICsgdGhpcy50eXBlLCB0aGlzLm9wdGlvbnMuc2VsZWN0b3IsICQucHJveHkodGhpcy5lbnRlciwgdGhpcykpCiAgICAgICAgdGhpcy4kZWxlbWVudC5vbihldmVudE91dCArICcuJyArIHRoaXMudHlwZSwgdGhpcy5vcHRpb25zLnNlbGVjdG9yLCAkLnByb3h5KHRoaXMubGVhdmUsIHRoaXMpKQogICAgICB9CgogICAgICB0aGlzLm9wdGlvbnMuc2VsZWN0b3IgPwogICAgICAgICh0aGlzLl9vcHRpb25zID0gJC5leHRlbmQoe30sIHRoaXMub3B0aW9ucywgeyB0cmlnZ2VyOiAnbWFudWFsJywgc2VsZWN0b3I6ICcnIH0pKSA6CiAgICAgICAgdGhpcy5maXhUaXRsZSgpCiAgICB9CgogICwgZ2V0T3B0aW9uczogZnVuY3Rpb24gKG9wdGlvbnMpIHsKICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCAkLmZuW3RoaXMudHlwZV0uZGVmYXVsdHMsIG9wdGlvbnMsIHRoaXMuJGVsZW1lbnQuZGF0YSgpKQoKICAgICAgaWYgKG9wdGlvbnMuZGVsYXkgJiYgdHlwZW9mIG9wdGlvbnMuZGVsYXkgPT0gJ251bWJlcicpIHsKICAgICAgICBvcHRpb25zLmRlbGF5ID0gewogICAgICAgICAgc2hvdzogb3B0aW9ucy5kZWxheQogICAgICAgICwgaGlkZTogb3B0aW9ucy5kZWxheQogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIG9wdGlvbnMKICAgIH0KCiAgLCBlbnRlcjogZnVuY3Rpb24gKGUpIHsKICAgICAgdmFyIHNlbGYgPSAkKGUuY3VycmVudFRhcmdldClbdGhpcy50eXBlXSh0aGlzLl9vcHRpb25zKS5kYXRhKHRoaXMudHlwZSkKCiAgICAgIGlmICghc2VsZi5vcHRpb25zLmRlbGF5IHx8ICFzZWxmLm9wdGlvbnMuZGVsYXkuc2hvdykgcmV0dXJuIHNlbGYuc2hvdygpCgogICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KQogICAgICBzZWxmLmhvdmVyU3RhdGUgPSAnaW4nCiAgICAgIHRoaXMudGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgaWYgKHNlbGYuaG92ZXJTdGF0ZSA9PSAnaW4nKSBzZWxmLnNob3coKQogICAgICB9LCBzZWxmLm9wdGlvbnMuZGVsYXkuc2hvdykKICAgIH0KCiAgLCBsZWF2ZTogZnVuY3Rpb24gKGUpIHsKICAgICAgdmFyIHNlbGYgPSAkKGUuY3VycmVudFRhcmdldClbdGhpcy50eXBlXSh0aGlzLl9vcHRpb25zKS5kYXRhKHRoaXMudHlwZSkKCiAgICAgIGlmICh0aGlzLnRpbWVvdXQpIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXQpCiAgICAgIGlmICghc2VsZi5vcHRpb25zLmRlbGF5IHx8ICFzZWxmLm9wdGlvbnMuZGVsYXkuaGlkZSkgcmV0dXJuIHNlbGYuaGlkZSgpCgogICAgICBzZWxmLmhvdmVyU3RhdGUgPSAnb3V0JwogICAgICB0aGlzLnRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgIGlmIChzZWxmLmhvdmVyU3RhdGUgPT0gJ291dCcpIHNlbGYuaGlkZSgpCiAgICAgIH0sIHNlbGYub3B0aW9ucy5kZWxheS5oaWRlKQogICAgfQoKICAsIHNob3c6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyICR0aXAKICAgICAgICAsIGluc2lkZQogICAgICAgICwgcG9zCiAgICAgICAgLCBhY3R1YWxXaWR0aAogICAgICAgICwgYWN0dWFsSGVpZ2h0CiAgICAgICAgLCBwbGFjZW1lbnQKICAgICAgICAsIHRwCgogICAgICBpZiAodGhpcy5oYXNDb250ZW50KCkgJiYgdGhpcy5lbmFibGVkKSB7CiAgICAgICAgJHRpcCA9IHRoaXMudGlwKCkKICAgICAgICB0aGlzLnNldENvbnRlbnQoKQoKICAgICAgICBpZiAodGhpcy5vcHRpb25zLmFuaW1hdGlvbikgewogICAgICAgICAgJHRpcC5hZGRDbGFzcygnZmFkZScpCiAgICAgICAgfQoKICAgICAgICBwbGFjZW1lbnQgPSB0eXBlb2YgdGhpcy5vcHRpb25zLnBsYWNlbWVudCA9PSAnZnVuY3Rpb24nID8KICAgICAgICAgIHRoaXMub3B0aW9ucy5wbGFjZW1lbnQuY2FsbCh0aGlzLCAkdGlwWzBdLCB0aGlzLiRlbGVtZW50WzBdKSA6CiAgICAgICAgICB0aGlzLm9wdGlvbnMucGxhY2VtZW50CgogICAgICAgIGluc2lkZSA9IC9pbi8udGVzdChwbGFjZW1lbnQpCgogICAgICAgICR0aXAKICAgICAgICAgIC5kZXRhY2goKQogICAgICAgICAgLmNzcyh7IHRvcDogMCwgbGVmdDogMCwgZGlzcGxheTogJ2Jsb2NrJyB9KQogICAgICAgICAgLmluc2VydEFmdGVyKHRoaXMuJGVsZW1lbnQpCgogICAgICAgIHBvcyA9IHRoaXMuZ2V0UG9zaXRpb24oaW5zaWRlKQoKICAgICAgICBhY3R1YWxXaWR0aCA9ICR0aXBbMF0ub2Zmc2V0V2lkdGgKICAgICAgICBhY3R1YWxIZWlnaHQgPSAkdGlwWzBdLm9mZnNldEhlaWdodAoKICAgICAgICBzd2l0Y2ggKGluc2lkZSA/IHBsYWNlbWVudC5zcGxpdCgnICcpWzFdIDogcGxhY2VtZW50KSB7CiAgICAgICAgICBjYXNlICdib3R0b20nOgogICAgICAgICAgICB0cCA9IHt0b3A6IHBvcy50b3AgKyBwb3MuaGVpZ2h0LCBsZWZ0OiBwb3MubGVmdCArIHBvcy53aWR0aCAvIDIgLSBhY3R1YWxXaWR0aCAvIDJ9CiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICBjYXNlICd0b3AnOgogICAgICAgICAgICB0cCA9IHt0b3A6IHBvcy50b3AgLSBhY3R1YWxIZWlnaHQsIGxlZnQ6IHBvcy5sZWZ0ICsgcG9zLndpZHRoIC8gMiAtIGFjdHVhbFdpZHRoIC8gMn0KICAgICAgICAgICAgYnJlYWsKICAgICAgICAgIGNhc2UgJ2xlZnQnOgogICAgICAgICAgICB0cCA9IHt0b3A6IHBvcy50b3AgKyBwb3MuaGVpZ2h0IC8gMiAtIGFjdHVhbEhlaWdodCAvIDIsIGxlZnQ6IHBvcy5sZWZ0IC0gYWN0dWFsV2lkdGh9CiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICBjYXNlICdyaWdodCc6CiAgICAgICAgICAgIHRwID0ge3RvcDogcG9zLnRvcCArIHBvcy5oZWlnaHQgLyAyIC0gYWN0dWFsSGVpZ2h0IC8gMiwgbGVmdDogcG9zLmxlZnQgKyBwb3Mud2lkdGh9CiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgfQoKICAgICAgICAkdGlwCiAgICAgICAgICAub2Zmc2V0KHRwKQogICAgICAgICAgLmFkZENsYXNzKHBsYWNlbWVudCkKICAgICAgICAgIC5hZGRDbGFzcygnaW4nKQogICAgICB9CiAgICB9CgogICwgc2V0Q29udGVudDogZnVuY3Rpb24gKCkgewogICAgICB2YXIgJHRpcCA9IHRoaXMudGlwKCkKICAgICAgICAsIHRpdGxlID0gdGhpcy5nZXRUaXRsZSgpCgogICAgICAkdGlwLmZpbmQoJy50b29sdGlwLWlubmVyJylbdGhpcy5vcHRpb25zLmh0bWwgPyAnaHRtbCcgOiAndGV4dCddKHRpdGxlKQogICAgICAkdGlwLnJlbW92ZUNsYXNzKCdmYWRlIGluIHRvcCBib3R0b20gbGVmdCByaWdodCcpCiAgICB9CgogICwgaGlkZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgdGhhdCA9IHRoaXMKICAgICAgICAsICR0aXAgPSB0aGlzLnRpcCgpCgogICAgICAkdGlwLnJlbW92ZUNsYXNzKCdpbicpCgogICAgICBmdW5jdGlvbiByZW1vdmVXaXRoQW5pbWF0aW9uKCkgewogICAgICAgIHZhciB0aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAkdGlwLm9mZigkLnN1cHBvcnQudHJhbnNpdGlvbi5lbmQpLmRldGFjaCgpCiAgICAgICAgfSwgNTAwKQoKICAgICAgICAkdGlwLm9uZSgkLnN1cHBvcnQudHJhbnNpdGlvbi5lbmQsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KQogICAgICAgICAgJHRpcC5kZXRhY2goKQogICAgICAgIH0pCiAgICAgIH0KCiAgICAgICQuc3VwcG9ydC50cmFuc2l0aW9uICYmIHRoaXMuJHRpcC5oYXNDbGFzcygnZmFkZScpID8KICAgICAgICByZW1vdmVXaXRoQW5pbWF0aW9uKCkgOgogICAgICAgICR0aXAuZGV0YWNoKCkKCiAgICAgIHJldHVybiB0aGlzCiAgICB9CgogICwgZml4VGl0bGU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyICRlID0gdGhpcy4kZWxlbWVudAogICAgICBpZiAoJGUuYXR0cigndGl0bGUnKSB8fCB0eXBlb2YoJGUuYXR0cignZGF0YS1vcmlnaW5hbC10aXRsZScpKSAhPSAnc3RyaW5nJykgewogICAgICAgICRlLmF0dHIoJ2RhdGEtb3JpZ2luYWwtdGl0bGUnLCAkZS5hdHRyKCd0aXRsZScpIHx8ICcnKS5yZW1vdmVBdHRyKCd0aXRsZScpCiAgICAgIH0KICAgIH0KCiAgLCBoYXNDb250ZW50OiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB0aGlzLmdldFRpdGxlKCkKICAgIH0KCiAgLCBnZXRQb3NpdGlvbjogZnVuY3Rpb24gKGluc2lkZSkgewogICAgICByZXR1cm4gJC5leHRlbmQoe30sIChpbnNpZGUgPyB7dG9wOiAwLCBsZWZ0OiAwfSA6IHRoaXMuJGVsZW1lbnQub2Zmc2V0KCkpLCB7CiAgICAgICAgd2lkdGg6IHRoaXMuJGVsZW1lbnRbMF0ub2Zmc2V0V2lkdGgKICAgICAgLCBoZWlnaHQ6IHRoaXMuJGVsZW1lbnRbMF0ub2Zmc2V0SGVpZ2h0CiAgICAgIH0pCiAgICB9CgogICwgZ2V0VGl0bGU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHRpdGxlCiAgICAgICAgLCAkZSA9IHRoaXMuJGVsZW1lbnQKICAgICAgICAsIG8gPSB0aGlzLm9wdGlvbnMKCiAgICAgIHRpdGxlID0gJGUuYXR0cignZGF0YS1vcmlnaW5hbC10aXRsZScpCiAgICAgICAgfHwgKHR5cGVvZiBvLnRpdGxlID09ICdmdW5jdGlvbicgPyBvLnRpdGxlLmNhbGwoJGVbMF0pIDogIG8udGl0bGUpCgogICAgICByZXR1cm4gdGl0bGUKICAgIH0KCiAgLCB0aXA6IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHRpcCA9IHRoaXMuJHRpcCB8fCAkKHRoaXMub3B0aW9ucy50ZW1wbGF0ZSkKICAgIH0KCiAgLCB2YWxpZGF0ZTogZnVuY3Rpb24gKCkgewogICAgICBpZiAoIXRoaXMuJGVsZW1lbnRbMF0ucGFyZW50Tm9kZSkgewogICAgICAgIHRoaXMuaGlkZSgpCiAgICAgICAgdGhpcy4kZWxlbWVudCA9IG51bGwKICAgICAgICB0aGlzLm9wdGlvbnMgPSBudWxsCiAgICAgIH0KICAgIH0KCiAgLCBlbmFibGU6IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5lbmFibGVkID0gdHJ1ZQogICAgfQoKICAsIGRpc2FibGU6IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5lbmFibGVkID0gZmFsc2UKICAgIH0KCiAgLCB0b2dnbGVFbmFibGVkOiBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMuZW5hYmxlZCA9ICF0aGlzLmVuYWJsZWQKICAgIH0KCiAgLCB0b2dnbGU6IGZ1bmN0aW9uIChlKSB7CiAgICAgIHZhciBzZWxmID0gJChlLmN1cnJlbnRUYXJnZXQpW3RoaXMudHlwZV0odGhpcy5fb3B0aW9ucykuZGF0YSh0aGlzLnR5cGUpCiAgICAgIHNlbGZbc2VsZi50aXAoKS5oYXNDbGFzcygnaW4nKSA/ICdoaWRlJyA6ICdzaG93J10oKQogICAgfQoKICAsIGRlc3Ryb3k6IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5oaWRlKCkuJGVsZW1lbnQub2ZmKCcuJyArIHRoaXMudHlwZSkucmVtb3ZlRGF0YSh0aGlzLnR5cGUpCiAgICB9CgogIH0KCgogLyogVE9PTFRJUCBQTFVHSU4gREVGSU5JVElPTgogICogPT09PT09PT09PT09PT09PT09PT09PT09PSAqLwoKICB2YXIgb2xkID0gJC5mbi50b29sdGlwCgogICQuZm4udG9vbHRpcCA9IGZ1bmN0aW9uICggb3B0aW9uICkgewogICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgIHZhciAkdGhpcyA9ICQodGhpcykKICAgICAgICAsIGRhdGEgPSAkdGhpcy5kYXRhKCd0b29sdGlwJykKICAgICAgICAsIG9wdGlvbnMgPSB0eXBlb2Ygb3B0aW9uID09ICdvYmplY3QnICYmIG9wdGlvbgogICAgICBpZiAoIWRhdGEpICR0aGlzLmRhdGEoJ3Rvb2x0aXAnLCAoZGF0YSA9IG5ldyBUb29sdGlwKHRoaXMsIG9wdGlvbnMpKSkKICAgICAgaWYgKHR5cGVvZiBvcHRpb24gPT0gJ3N0cmluZycpIGRhdGFbb3B0aW9uXSgpCiAgICB9KQogIH0KCiAgJC5mbi50b29sdGlwLkNvbnN0cnVjdG9yID0gVG9vbHRpcAoKICAkLmZuLnRvb2x0aXAuZGVmYXVsdHMgPSB7CiAgICBhbmltYXRpb246IHRydWUKICAsIHBsYWNlbWVudDogJ3RvcCcKICAsIHNlbGVjdG9yOiBmYWxzZQogICwgdGVtcGxhdGU6ICc8ZGl2IGNsYXNzPSJ0b29sdGlwIj48ZGl2IGNsYXNzPSJ0b29sdGlwLWFycm93Ij48L2Rpdj48ZGl2IGNsYXNzPSJ0b29sdGlwLWlubmVyIj48L2Rpdj48L2Rpdj4nCiAgLCB0cmlnZ2VyOiAnaG92ZXInCiAgLCB0aXRsZTogJycKICAsIGRlbGF5OiAwCiAgLCBodG1sOiBmYWxzZQogIH0KCgogLyogVE9PTFRJUCBOTyBDT05GTElDVAogICogPT09PT09PT09PT09PT09PT09PSAqLwoKICAkLmZuLnRvb2x0aXAubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHsKICAgICQuZm4udG9vbHRpcCA9IG9sZAogICAgcmV0dXJuIHRoaXMKICB9Cgp9KHdpbmRvdy5qUXVlcnkpOw=="},{"name":"bootstrap-button","src":"LyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqIGJvb3RzdHJhcC1idXR0b24uanMgdjIuMi4yCiAqIGh0dHA6Ly90d2l0dGVyLmdpdGh1Yi5jb20vYm9vdHN0cmFwL2phdmFzY3JpcHQuaHRtbCNidXR0b25zCiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKiBDb3B5cmlnaHQgMjAxMiBUd2l0dGVyLCBJbmMuCiAqCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovCgoKIWZ1bmN0aW9uICgkKSB7CgogICJ1c2Ugc3RyaWN0IjsgLy8ganNoaW50IDtfOwoKCiAvKiBCVVRUT04gUFVCTElDIENMQVNTIERFRklOSVRJT04KICAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqLwoKICB2YXIgQnV0dG9uID0gZnVuY3Rpb24gKGVsZW1lbnQsIG9wdGlvbnMpIHsKICAgIHRoaXMuJGVsZW1lbnQgPSAkKGVsZW1lbnQpCiAgICB0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgJC5mbi5idXR0b24uZGVmYXVsdHMsIG9wdGlvbnMpCiAgfQoKICBCdXR0b24ucHJvdG90eXBlLnNldFN0YXRlID0gZnVuY3Rpb24gKHN0YXRlKSB7CiAgICB2YXIgZCA9ICdkaXNhYmxlZCcKICAgICAgLCAkZWwgPSB0aGlzLiRlbGVtZW50CiAgICAgICwgZGF0YSA9ICRlbC5kYXRhKCkKICAgICAgLCB2YWwgPSAkZWwuaXMoJ2lucHV0JykgPyAndmFsJyA6ICdodG1sJwoKICAgIHN0YXRlID0gc3RhdGUgKyAnVGV4dCcKICAgIGRhdGEucmVzZXRUZXh0IHx8ICRlbC5kYXRhKCdyZXNldFRleHQnLCAkZWxbdmFsXSgpKQoKICAgICRlbFt2YWxdKGRhdGFbc3RhdGVdIHx8IHRoaXMub3B0aW9uc1tzdGF0ZV0pCgogICAgLy8gcHVzaCB0byBldmVudCBsb29wIHRvIGFsbG93IGZvcm1zIHRvIHN1Ym1pdAogICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgIHN0YXRlID09ICdsb2FkaW5nVGV4dCcgPwogICAgICAgICRlbC5hZGRDbGFzcyhkKS5hdHRyKGQsIGQpIDoKICAgICAgICAkZWwucmVtb3ZlQ2xhc3MoZCkucmVtb3ZlQXR0cihkKQogICAgfSwgMCkKICB9CgogIEJ1dHRvbi5wcm90b3R5cGUudG9nZ2xlID0gZnVuY3Rpb24gKCkgewogICAgdmFyICRwYXJlbnQgPSB0aGlzLiRlbGVtZW50LmNsb3Nlc3QoJ1tkYXRhLXRvZ2dsZT0iYnV0dG9ucy1yYWRpbyJdJykKCiAgICAkcGFyZW50ICYmICRwYXJlbnQKICAgICAgLmZpbmQoJy5hY3RpdmUnKQogICAgICAucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpCgogICAgdGhpcy4kZWxlbWVudC50b2dnbGVDbGFzcygnYWN0aXZlJykKICB9CgoKIC8qIEJVVFRPTiBQTFVHSU4gREVGSU5JVElPTgogICogPT09PT09PT09PT09PT09PT09PT09PT09ICovCgogIHZhciBvbGQgPSAkLmZuLmJ1dHRvbgoKICAkLmZuLmJ1dHRvbiA9IGZ1bmN0aW9uIChvcHRpb24pIHsKICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkgewogICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpCiAgICAgICAgLCBkYXRhID0gJHRoaXMuZGF0YSgnYnV0dG9uJykKICAgICAgICAsIG9wdGlvbnMgPSB0eXBlb2Ygb3B0aW9uID09ICdvYmplY3QnICYmIG9wdGlvbgogICAgICBpZiAoIWRhdGEpICR0aGlzLmRhdGEoJ2J1dHRvbicsIChkYXRhID0gbmV3IEJ1dHRvbih0aGlzLCBvcHRpb25zKSkpCiAgICAgIGlmIChvcHRpb24gPT0gJ3RvZ2dsZScpIGRhdGEudG9nZ2xlKCkKICAgICAgZWxzZSBpZiAob3B0aW9uKSBkYXRhLnNldFN0YXRlKG9wdGlvbikKICAgIH0pCiAgfQoKICAkLmZuLmJ1dHRvbi5kZWZhdWx0cyA9IHsKICAgIGxvYWRpbmdUZXh0OiAnbG9hZGluZy4uLicKICB9CgogICQuZm4uYnV0dG9uLkNvbnN0cnVjdG9yID0gQnV0dG9uCgoKIC8qIEJVVFRPTiBOTyBDT05GTElDVAogICogPT09PT09PT09PT09PT09PT09ICovCgogICQuZm4uYnV0dG9uLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7CiAgICAkLmZuLmJ1dHRvbiA9IG9sZAogICAgcmV0dXJuIHRoaXMKICB9CgoKIC8qIEJVVFRPTiBEQVRBLUFQSQogICogPT09PT09PT09PT09PT09ICovCgogICQoZG9jdW1lbnQpLm9uKCdjbGljay5idXR0b24uZGF0YS1hcGknLCAnW2RhdGEtdG9nZ2xlXj1idXR0b25dJywgZnVuY3Rpb24gKGUpIHsKICAgIHZhciAkYnRuID0gJChlLnRhcmdldCkKICAgIGlmICghJGJ0bi5oYXNDbGFzcygnYnRuJykpICRidG4gPSAkYnRuLmNsb3Nlc3QoJy5idG4nKQogICAgJGJ0bi5idXR0b24oJ3RvZ2dsZScpCiAgfSkKCn0od2luZG93LmpRdWVyeSk7"},{"name":"bootstrap-collapse","src":"LyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKiBib290c3RyYXAtY29sbGFwc2UuanMgdjIuMi4yCiAqIGh0dHA6Ly90d2l0dGVyLmdpdGh1Yi5jb20vYm9vdHN0cmFwL2phdmFzY3JpcHQuaHRtbCNjb2xsYXBzZQogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqIENvcHlyaWdodCAyMDEyIFR3aXR0ZXIsIEluYy4KICoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi8KCgohZnVuY3Rpb24gKCQpIHsKCiAgInVzZSBzdHJpY3QiOyAvLyBqc2hpbnQgO187CgoKIC8qIENPTExBUFNFIFBVQkxJQyBDTEFTUyBERUZJTklUSU9OCiAgKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqLwoKICB2YXIgQ29sbGFwc2UgPSBmdW5jdGlvbiAoZWxlbWVudCwgb3B0aW9ucykgewogICAgdGhpcy4kZWxlbWVudCA9ICQoZWxlbWVudCkKICAgIHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCAkLmZuLmNvbGxhcHNlLmRlZmF1bHRzLCBvcHRpb25zKQoKICAgIGlmICh0aGlzLm9wdGlvbnMucGFyZW50KSB7CiAgICAgIHRoaXMuJHBhcmVudCA9ICQodGhpcy5vcHRpb25zLnBhcmVudCkKICAgIH0KCiAgICB0aGlzLm9wdGlvbnMudG9nZ2xlICYmIHRoaXMudG9nZ2xlKCkKICB9CgogIENvbGxhcHNlLnByb3RvdHlwZSA9IHsKCiAgICBjb25zdHJ1Y3RvcjogQ29sbGFwc2UKCiAgLCBkaW1lbnNpb246IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGhhc1dpZHRoID0gdGhpcy4kZWxlbWVudC5oYXNDbGFzcygnd2lkdGgnKQogICAgICByZXR1cm4gaGFzV2lkdGggPyAnd2lkdGgnIDogJ2hlaWdodCcKICAgIH0KCiAgLCBzaG93OiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBkaW1lbnNpb24KICAgICAgICAsIHNjcm9sbAogICAgICAgICwgYWN0aXZlcwogICAgICAgICwgaGFzRGF0YQoKICAgICAgaWYgKHRoaXMudHJhbnNpdGlvbmluZykgcmV0dXJuCgogICAgICBkaW1lbnNpb24gPSB0aGlzLmRpbWVuc2lvbigpCiAgICAgIHNjcm9sbCA9ICQuY2FtZWxDYXNlKFsnc2Nyb2xsJywgZGltZW5zaW9uXS5qb2luKCctJykpCiAgICAgIGFjdGl2ZXMgPSB0aGlzLiRwYXJlbnQgJiYgdGhpcy4kcGFyZW50LmZpbmQoJz4gLmFjY29yZGlvbi1ncm91cCA+IC5pbicpCgogICAgICBpZiAoYWN0aXZlcyAmJiBhY3RpdmVzLmxlbmd0aCkgewogICAgICAgIGhhc0RhdGEgPSBhY3RpdmVzLmRhdGEoJ2NvbGxhcHNlJykKICAgICAgICBpZiAoaGFzRGF0YSAmJiBoYXNEYXRhLnRyYW5zaXRpb25pbmcpIHJldHVybgogICAgICAgIGFjdGl2ZXMuY29sbGFwc2UoJ2hpZGUnKQogICAgICAgIGhhc0RhdGEgfHwgYWN0aXZlcy5kYXRhKCdjb2xsYXBzZScsIG51bGwpCiAgICAgIH0KCiAgICAgIHRoaXMuJGVsZW1lbnRbZGltZW5zaW9uXSgwKQogICAgICB0aGlzLnRyYW5zaXRpb24oJ2FkZENsYXNzJywgJC5FdmVudCgnc2hvdycpLCAnc2hvd24nKQogICAgICAkLnN1cHBvcnQudHJhbnNpdGlvbiAmJiB0aGlzLiRlbGVtZW50W2RpbWVuc2lvbl0odGhpcy4kZWxlbWVudFswXVtzY3JvbGxdKQogICAgfQoKICAsIGhpZGU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGRpbWVuc2lvbgogICAgICBpZiAodGhpcy50cmFuc2l0aW9uaW5nKSByZXR1cm4KICAgICAgZGltZW5zaW9uID0gdGhpcy5kaW1lbnNpb24oKQogICAgICB0aGlzLnJlc2V0KHRoaXMuJGVsZW1lbnRbZGltZW5zaW9uXSgpKQogICAgICB0aGlzLnRyYW5zaXRpb24oJ3JlbW92ZUNsYXNzJywgJC5FdmVudCgnaGlkZScpLCAnaGlkZGVuJykKICAgICAgdGhpcy4kZWxlbWVudFtkaW1lbnNpb25dKDApCiAgICB9CgogICwgcmVzZXQ6IGZ1bmN0aW9uIChzaXplKSB7CiAgICAgIHZhciBkaW1lbnNpb24gPSB0aGlzLmRpbWVuc2lvbigpCgogICAgICB0aGlzLiRlbGVtZW50CiAgICAgICAgLnJlbW92ZUNsYXNzKCdjb2xsYXBzZScpCiAgICAgICAgW2RpbWVuc2lvbl0oc2l6ZSB8fCAnYXV0bycpCiAgICAgICAgWzBdLm9mZnNldFdpZHRoCgogICAgICB0aGlzLiRlbGVtZW50W3NpemUgIT09IG51bGwgPyAnYWRkQ2xhc3MnIDogJ3JlbW92ZUNsYXNzJ10oJ2NvbGxhcHNlJykKCiAgICAgIHJldHVybiB0aGlzCiAgICB9CgogICwgdHJhbnNpdGlvbjogZnVuY3Rpb24gKG1ldGhvZCwgc3RhcnRFdmVudCwgY29tcGxldGVFdmVudCkgewogICAgICB2YXIgdGhhdCA9IHRoaXMKICAgICAgICAsIGNvbXBsZXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoc3RhcnRFdmVudC50eXBlID09ICdzaG93JykgdGhhdC5yZXNldCgpCiAgICAgICAgICAgIHRoYXQudHJhbnNpdGlvbmluZyA9IDAKICAgICAgICAgICAgdGhhdC4kZWxlbWVudC50cmlnZ2VyKGNvbXBsZXRlRXZlbnQpCiAgICAgICAgICB9CgogICAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoc3RhcnRFdmVudCkKCiAgICAgIGlmIChzdGFydEV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSByZXR1cm4KCiAgICAgIHRoaXMudHJhbnNpdGlvbmluZyA9IDEKCiAgICAgIHRoaXMuJGVsZW1lbnRbbWV0aG9kXSgnaW4nKQoKICAgICAgJC5zdXBwb3J0LnRyYW5zaXRpb24gJiYgdGhpcy4kZWxlbWVudC5oYXNDbGFzcygnY29sbGFwc2UnKSA/CiAgICAgICAgdGhpcy4kZWxlbWVudC5vbmUoJC5zdXBwb3J0LnRyYW5zaXRpb24uZW5kLCBjb21wbGV0ZSkgOgogICAgICAgIGNvbXBsZXRlKCkKICAgIH0KCiAgLCB0b2dnbGU6IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpc1t0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKCdpbicpID8gJ2hpZGUnIDogJ3Nob3cnXSgpCiAgICB9CgogIH0KCgogLyogQ09MTEFQU0UgUExVR0lOIERFRklOSVRJT04KICAqID09PT09PT09PT09PT09PT09PT09PT09PT09ICovCgogIHZhciBvbGQgPSAkLmZuLmNvbGxhcHNlCgogICQuZm4uY29sbGFwc2UgPSBmdW5jdGlvbiAob3B0aW9uKSB7CiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgdmFyICR0aGlzID0gJCh0aGlzKQogICAgICAgICwgZGF0YSA9ICR0aGlzLmRhdGEoJ2NvbGxhcHNlJykKICAgICAgICAsIG9wdGlvbnMgPSB0eXBlb2Ygb3B0aW9uID09ICdvYmplY3QnICYmIG9wdGlvbgogICAgICBpZiAoIWRhdGEpICR0aGlzLmRhdGEoJ2NvbGxhcHNlJywgKGRhdGEgPSBuZXcgQ29sbGFwc2UodGhpcywgb3B0aW9ucykpKQogICAgICBpZiAodHlwZW9mIG9wdGlvbiA9PSAnc3RyaW5nJykgZGF0YVtvcHRpb25dKCkKICAgIH0pCiAgfQoKICAkLmZuLmNvbGxhcHNlLmRlZmF1bHRzID0gewogICAgdG9nZ2xlOiB0cnVlCiAgfQoKICAkLmZuLmNvbGxhcHNlLkNvbnN0cnVjdG9yID0gQ29sbGFwc2UKCgogLyogQ09MTEFQU0UgTk8gQ09ORkxJQ1QKICAqID09PT09PT09PT09PT09PT09PT09ICovCgogICQuZm4uY29sbGFwc2Uubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHsKICAgICQuZm4uY29sbGFwc2UgPSBvbGQKICAgIHJldHVybiB0aGlzCiAgfQoKCiAvKiBDT0xMQVBTRSBEQVRBLUFQSQogICogPT09PT09PT09PT09PT09PT0gKi8KCiAgJChkb2N1bWVudCkub24oJ2NsaWNrLmNvbGxhcHNlLmRhdGEtYXBpJywgJ1tkYXRhLXRvZ2dsZT1jb2xsYXBzZV0nLCBmdW5jdGlvbiAoZSkgewogICAgdmFyICR0aGlzID0gJCh0aGlzKSwgaHJlZgogICAgICAsIHRhcmdldCA9ICR0aGlzLmF0dHIoJ2RhdGEtdGFyZ2V0JykKICAgICAgICB8fCBlLnByZXZlbnREZWZhdWx0KCkKICAgICAgICB8fCAoaHJlZiA9ICR0aGlzLmF0dHIoJ2hyZWYnKSkgJiYgaHJlZi5yZXBsYWNlKC8uKig/PSNbXlxzXSskKS8sICcnKSAvL3N0cmlwIGZvciBpZTcKICAgICAgLCBvcHRpb24gPSAkKHRhcmdldCkuZGF0YSgnY29sbGFwc2UnKSA/ICd0b2dnbGUnIDogJHRoaXMuZGF0YSgpCiAgICAkdGhpc1skKHRhcmdldCkuaGFzQ2xhc3MoJ2luJykgPyAnYWRkQ2xhc3MnIDogJ3JlbW92ZUNsYXNzJ10oJ2NvbGxhcHNlZCcpCiAgICAkKHRhcmdldCkuY29sbGFwc2Uob3B0aW9uKQogIH0pCgp9KHdpbmRvdy5qUXVlcnkpOw=="},{"name":"market","src":"alF1ZXJ5LmZuLmltYWdlRnJvbUI2NCA9IGZ1bmN0aW9uKGVuY29kZWRJbWFnZVNvdXJjZSkgewogICAgLy9zZXQgdGhlIGRhdGEgdHlwZSBmb3IgdGhlIHNvdXJjZSBhbmQgYXBwZW5kIHRoZSBlbmNvZGVkIGltYWdlCiAgICAkKHRoaXMpLmF0dHIoJ3NyYycsICdkYXRhOmltYWdlL2dpZjtiYXNlNjQsJyArIGVuY29kZWRJbWFnZVNvdXJjZSk7Cn07Cgp2YXIgQXhjaWRTY3JpcHQgPSBBeGNpZFNjcmlwdCB8fCB7fTsKCi8vIFRoZSBjb3JlIHNjcmlwdCBsb2FkZXIuIExvYWRzIHBhY2tlZCBtaWNybyB3ZWIgYXBwbGljYXRpb25zIGFuZCBpbmplY3RzIHRoZW0gaW50byB0aGUgcGFnZSBET00uCihmdW5jdGlvbihucyl7CgogICAgbnMuc2hvd0FsZXJ0ID0gZnVuY3Rpb24obWVzc2FnZSkgewoKICAgIH07CgogICAgbnMuaW5zdGFsbEJ1dHRvbkNsaWNrZWQgPSBmdW5jdGlvbihzY3JpcHRJRCwgZWwpIHsKICAgICAgICAkKGVsKS5idXR0b24oJ2xvYWRpbmcnKTsKICAgIH07CgogICAgLy8gUmVnaXN0ZXIgdGhlIGNsYXNzCiAgICBucy5TY3JpcHRMb2FkZXIgPSAoZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIEFQSV9ST09UID0gIiI7CiAgICAgICAgLy8gVGhlIGFjdHVhbCBsb2FkZXIgY2xhc3MKICAgICAgICB2YXIgTG9hZGVyID0gZnVuY3Rpb24obnMpIHsKICAgICAgICAgICAgLy8gQ29uc3RydWN0b3IgQ29kZQogICAgICAgIH07CgogICAgICAgIC8vIExvYWQgYSBwYWNrYWdlIGZyb20gYSByZW1vdGUgVVJMIChUaGlzIGlzIHdoZXJlIGFzIGEgcHJvZHVjdGlvbiBhcHAsIHdlIHdpbGwgbmVlZCB0byBzZXJ2ZSByZXNvdXJjZXMgb3ZlciBIVFRQUyBhbmQgbWFrZSBzdXJlIHNjcmlwdHMgYXJlIGF1dGhvcml6ZWQgdG8gcnVuLgogICAgICAgIC8vIFNlcnZlIHRoZSByZXN1bHQgb3ZlciBKU09OUAogICAgICAgIExvYWRlci5wcm90b3R5cGUubG9hZFJlbW90ZVBhY2thZ2UgPSBmdW5jdGlvbih1cmwpIHsKCiAgICAgICAgfTsKCiAgICAgICAgTG9hZGVyLnByb3RvdHlwZS5sb2FkTG9jYWxQYWNrYWdlcyA9IGZ1bmN0aW9uKCkgewoKICAgICAgICB9OwoKICAgICAgICBMb2FkZXIucHJvdG90eXBlLnByb2Nlc3NQYWNrYWdlID0gZnVuY3Rpb24ocGFja2FnZSkgewoKICAgICAgICB9OwoKICAgICAgICBMb2FkZXIucHJvdG90eXBlLmluamVjdEpTID0gZnVuY3Rpb24oanMpIHsKCiAgICAgICAgfTsKCiAgICAgICAgTG9hZGVyLnByb3RvdHlwZS5sb2FkU2l0ZUFwcGxpY2F0aW9ucyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAkLmdldEpTT04oQVBJX1JPT1QgKyAnYXBpL21vdGhlcmZ1Y2tpbmdsaXN0JywgZnVuY3Rpb24oZGF0YSkgewoKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgTG9hZGVyLnByb3RvdHlwZS5sb2FkVG9wQXBwbGljYXRpb25zID0gZnVuY3Rpb24oKSB7CgogICAgICAgIH07CgogICAgICAgIExvYWRlci5wcm90b3R5cGUucmVuZGVyQXBwbGljYXRpb25zTGlzdCA9IGZ1bmN0aW9uKCkgewoKICAgICAgICB9OwoKICAgICAgICBMb2FkZXIucHJvdG90eXBlLnNhdmVNYW5pZmVzdFdpdGhLZXkgPSBmdW5jdGlvbihtYW5pZmVzdCwga2V5KSB7CiAgICAgICAgICAgIC8vc2F2ZSBvdXIganNvbiB3aXRoIGF1dGggdG9rZW4gKyBzY3JpcHQgaWQ/CiAgICAgICAgICAgIGlmKHRoaXMuaGFzTG9jYWxTdG9yYWdlQWNjZXNzKCkpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICQualN0b3JhZ2Uuc2V0KGtleSwgbWFuaWZlc3QpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1VuYWJsZSB0byBzYXZlIG1hbmlmZXN0IScpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgTG9hZGVyLnByb3RvdHlwZS5oYXNMb2NhbFN0b3JhZ2VBY2Nlc3MgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuICQualN0b3JhZ2Uuc3RvcmFnZUF2YWlsYWJsZSgpOwogICAgICAgIH07CgogICAgICAgIC8vIEluaXRpYWxpemUgaXQgc28gdGhpcyBmdW5jdGlvbiByZXR1cm5zIGFuIGluc3RhbmNlIG9mIGl0c2VsZi4KICAgICAgICByZXR1cm4gbmV3IExvYWRlcihucyk7CiAgICB9KSgpOwoKfSkoQXhjaWRTY3JpcHQpOwoKJChmdW5jdGlvbiAoKSB7CiAgICAKICAgICQoImJvZHkiKS5hcHBlbmQoV1BNLmdldEFwcCgnd3BtJykuZ2V0RmlsZSgnbWFya2V0LWZyYWdtZW50JykpOwogICAgCiAgICB2YXIgYXBwcyA9IFsKICAgICAgICB7CiAgICAgICAgICAgIHRpdGxlIDogJ3Rlc3QgYXBwJywKICAgICAgICAgICAgaWNvbiA6ICdodHRwOi8vZmlsZXMuc29mdGljb25zLmNvbS9kb3dubG9hZC9hcHBsaWNhdGlvbi1pY29ucy80OHB4LWljb25zLTEtNC1ieS1sZW9uYXJkLXNjaHdhcnovcG5nLzQ4eDQ4L01hcC5wbmcnLAogICAgICAgICAgICBpbnN0YWxsZWQgOiB0cnVlCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICAgIHRpdGxlIDogJ3Rlc3RpbmcgYXBwbGljYXRpb24nLAogICAgICAgICAgICBpY29uIDogJ2h0dHA6Ly9jZG41Lmljb25maW5kZXIuY29tL2RhdGEvaWNvbnMvNDhweF9pY29uc19jb2xsZWN0aW9uX2J5X25ld2VyYXZpbi80OC9hZHJlc3NfYm9vay5wbmcnLAogICAgICAgICAgICBpbnN0YWxsZWQgOiBmYWxzZQogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgICB0aXRsZSA6ICd0ZXN0IGFwcCcsCiAgICAgICAgICAgIGljb24gOiAnaHR0cDovL2ZpbGVzLnNvZnRpY29ucy5jb20vZG93bmxvYWQvYXBwbGljYXRpb24taWNvbnMvNDhweC1pY29ucy0xLTQtYnktbGVvbmFyZC1zY2h3YXJ6L3BuZy80OHg0OC9NYXAucG5nJywKICAgICAgICAgICAgaW5zdGFsbGVkIDogdHJ1ZQogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgICB0aXRsZSA6ICd0ZXN0aW5nIGFwcGxpY2F0aW9uJywKICAgICAgICAgICAgaWNvbiA6ICdodHRwOi8vY2RuNS5pY29uZmluZGVyLmNvbS9kYXRhL2ljb25zLzQ4cHhfaWNvbnNfY29sbGVjdGlvbl9ieV9uZXdlcmF2aW4vNDgvZmxhc2gucG5nJywKICAgICAgICAgICAgaW5zdGFsbGVkIDogdHJ1ZQogICAgICAgIH0KICAgIF07CgogICAgLy95ZWFoLi4uCiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHsKICAgICAgICAvL2FjdGl2YXRlIG91ciBtYXJrZXQKICAgICAgICAkKCcjbWFya2V0TW9kYWwnKS5tb2RhbCgnc2hvdycpOwoKICAgICAgICAvL21ha2UgdGhlIHNjcm9sbCBzZXh5IGZvciBvdXIgYXBwIHJlc3VsdHMKICAgICAgICAkKCcuYXBwLXJlc3VsdHMnKS5zbGltU2Nyb2xsKHsKICAgICAgICAgICAgaGVpZ2h0OiAnMTkwcHgnLAogICAgICAgICAgICBhbHdheXNWaXNpYmxlOiBmYWxzZQogICAgICAgIH0pOwoKICAgICAgICAvL3Rlc3Qgb3V0IG91ciB0ZW1wbGF0ZQogICAgICAgICQoJyNhcHBSZXN1bHRUZW1wbGF0ZScpLnRtcGwoYXBwcykuYXBwZW5kVG8oJyNhcHBSZXN1bHRzQm9keScpOwogICAgfSk7Cn0p"}],"css":[{"name":"bootstrap","src":"LyohCiAqIEJvb3RzdHJhcCB2Mi4yLjIKICoKICogQ29weXJpZ2h0IDIwMTIgVHdpdHRlciwgSW5jCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSB2Mi4wCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBEZXNpZ25lZCBhbmQgYnVpbHQgd2l0aCBhbGwgdGhlIGxvdmUgaW4gdGhlIHdvcmxkIEB0d2l0dGVyIGJ5IEBtZG8gYW5kIEBmYXQuCiAqLwoKYXJ0aWNsZSwKYXNpZGUsCmRldGFpbHMsCmZpZ2NhcHRpb24sCmZpZ3VyZSwKZm9vdGVyLApoZWFkZXIsCmhncm91cCwKbmF2LApzZWN0aW9uIHsKICBkaXNwbGF5OiBibG9jazsKfQoKYXVkaW8sCmNhbnZhcywKdmlkZW8gewogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAqZGlzcGxheTogaW5saW5lOwogICp6b29tOiAxOwp9CgphdWRpbzpub3QoW2NvbnRyb2xzXSkgewogIGRpc3BsYXk6IG5vbmU7Cn0KCmh0bWwgewogIGZvbnQtc2l6ZTogMTAwJTsKICAtd2Via2l0LXRleHQtc2l6ZS1hZGp1c3Q6IDEwMCU7CiAgICAgIC1tcy10ZXh0LXNpemUtYWRqdXN0OiAxMDAlOwp9CgphOmZvY3VzIHsKICBvdXRsaW5lOiB0aGluIGRvdHRlZCAjMzMzOwogIG91dGxpbmU6IDVweCBhdXRvIC13ZWJraXQtZm9jdXMtcmluZy1jb2xvcjsKICBvdXRsaW5lLW9mZnNldDogLTJweDsKfQoKYTpob3ZlciwKYTphY3RpdmUgewogIG91dGxpbmU6IDA7Cn0KCnN1YiwKc3VwIHsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgZm9udC1zaXplOiA3NSU7CiAgbGluZS1oZWlnaHQ6IDA7CiAgdmVydGljYWwtYWxpZ246IGJhc2VsaW5lOwp9CgpzdXAgewogIHRvcDogLTAuNWVtOwp9CgpzdWIgewogIGJvdHRvbTogLTAuMjVlbTsKfQoKaW1nIHsKICB3aWR0aDogYXV0b1w5OwogIGhlaWdodDogYXV0bzsKICBtYXgtd2lkdGg6IDEwMCU7CiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKICBib3JkZXI6IDA7CiAgLW1zLWludGVycG9sYXRpb24tbW9kZTogYmljdWJpYzsKfQoKI21hcF9jYW52YXMgaW1nLAouZ29vZ2xlLW1hcHMgaW1nIHsKICBtYXgtd2lkdGg6IG5vbmU7Cn0KCmJ1dHRvbiwKaW5wdXQsCnNlbGVjdCwKdGV4dGFyZWEgewogIG1hcmdpbjogMDsKICBmb250LXNpemU6IDEwMCU7CiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKfQoKYnV0dG9uLAppbnB1dCB7CiAgKm92ZXJmbG93OiB2aXNpYmxlOwogIGxpbmUtaGVpZ2h0OiBub3JtYWw7Cn0KCmJ1dHRvbjo6LW1vei1mb2N1cy1pbm5lciwKaW5wdXQ6Oi1tb3otZm9jdXMtaW5uZXIgewogIHBhZGRpbmc6IDA7CiAgYm9yZGVyOiAwOwp9CgpidXR0b24sCmh0bWwgaW5wdXRbdHlwZT0iYnV0dG9uIl0sCmlucHV0W3R5cGU9InJlc2V0Il0sCmlucHV0W3R5cGU9InN1Ym1pdCJdIHsKICBjdXJzb3I6IHBvaW50ZXI7CiAgLXdlYmtpdC1hcHBlYXJhbmNlOiBidXR0b247Cn0KCmxhYmVsLApzZWxlY3QsCmJ1dHRvbiwKaW5wdXRbdHlwZT0iYnV0dG9uIl0sCmlucHV0W3R5cGU9InJlc2V0Il0sCmlucHV0W3R5cGU9InN1Ym1pdCJdLAppbnB1dFt0eXBlPSJyYWRpbyJdLAppbnB1dFt0eXBlPSJjaGVja2JveCJdIHsKICBjdXJzb3I6IHBvaW50ZXI7Cn0KCmlucHV0W3R5cGU9InNlYXJjaCJdIHsKICAtd2Via2l0LWJveC1zaXppbmc6IGNvbnRlbnQtYm94OwogICAgIC1tb3otYm94LXNpemluZzogY29udGVudC1ib3g7CiAgICAgICAgICBib3gtc2l6aW5nOiBjb250ZW50LWJveDsKICAtd2Via2l0LWFwcGVhcmFuY2U6IHRleHRmaWVsZDsKfQoKaW5wdXRbdHlwZT0ic2VhcmNoIl06Oi13ZWJraXQtc2VhcmNoLWRlY29yYXRpb24sCmlucHV0W3R5cGU9InNlYXJjaCJdOjotd2Via2l0LXNlYXJjaC1jYW5jZWwtYnV0dG9uIHsKICAtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7Cn0KCnRleHRhcmVhIHsKICBvdmVyZmxvdzogYXV0bzsKICB2ZXJ0aWNhbC1hbGlnbjogdG9wOwp9CgpAbWVkaWEgcHJpbnQgewogICogewogICAgY29sb3I6ICMwMDAgIWltcG9ydGFudDsKICAgIHRleHQtc2hhZG93OiBub25lICFpbXBvcnRhbnQ7CiAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50OwogICAgYm94LXNoYWRvdzogbm9uZSAhaW1wb3J0YW50OwogIH0KICBhLAogIGE6dmlzaXRlZCB7CiAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsKICB9CiAgYVtocmVmXTphZnRlciB7CiAgICBjb250ZW50OiAiICgiIGF0dHIoaHJlZikgIikiOwogIH0KICBhYmJyW3RpdGxlXTphZnRlciB7CiAgICBjb250ZW50OiAiICgiIGF0dHIodGl0bGUpICIpIjsKICB9CiAgLmlyIGE6YWZ0ZXIsCiAgYVtocmVmXj0iamF2YXNjcmlwdDoiXTphZnRlciwKICBhW2hyZWZePSIjIl06YWZ0ZXIgewogICAgY29udGVudDogIiI7CiAgfQogIHByZSwKICBibG9ja3F1b3RlIHsKICAgIGJvcmRlcjogMXB4IHNvbGlkICM5OTk7CiAgICBwYWdlLWJyZWFrLWluc2lkZTogYXZvaWQ7CiAgfQogIHRoZWFkIHsKICAgIGRpc3BsYXk6IHRhYmxlLWhlYWRlci1ncm91cDsKICB9CiAgdHIsCiAgaW1nIHsKICAgIHBhZ2UtYnJlYWstaW5zaWRlOiBhdm9pZDsKICB9CiAgaW1nIHsKICAgIG1heC13aWR0aDogMTAwJSAhaW1wb3J0YW50OwogIH0KICBAcGFnZSAgewogICAgbWFyZ2luOiAwLjVjbTsKICB9CiAgcCwKICBoMiwKICBoMyB7CiAgICBvcnBoYW5zOiAzOwogICAgd2lkb3dzOiAzOwogIH0KICBoMiwKICBoMyB7CiAgICBwYWdlLWJyZWFrLWFmdGVyOiBhdm9pZDsKICB9Cn0KCi5jbGVhcmZpeCB7CiAgKnpvb206IDE7Cn0KCi5jbGVhcmZpeDpiZWZvcmUsCi5jbGVhcmZpeDphZnRlciB7CiAgZGlzcGxheTogdGFibGU7CiAgbGluZS1oZWlnaHQ6IDA7CiAgY29udGVudDogIiI7Cn0KCi5jbGVhcmZpeDphZnRlciB7CiAgY2xlYXI6IGJvdGg7Cn0KCi5oaWRlLXRleHQgewogIGZvbnQ6IDAvMCBhOwogIGNvbG9yOiB0cmFuc3BhcmVudDsKICB0ZXh0LXNoYWRvdzogbm9uZTsKICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsKICBib3JkZXI6IDA7Cn0KCi5pbnB1dC1ibG9jay1sZXZlbCB7CiAgZGlzcGxheTogYmxvY2s7CiAgd2lkdGg6IDEwMCU7CiAgbWluLWhlaWdodDogMzBweDsKICAtd2Via2l0LWJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgLW1vei1ib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKfQoKYm9keSB7CiAgbWFyZ2luOiAwOwogIGZvbnQtZmFtaWx5OiAiSGVsdmV0aWNhIE5ldWUiLCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmOwogIGZvbnQtc2l6ZTogMTRweDsKICBsaW5lLWhlaWdodDogMjBweDsKICBjb2xvcjogIzMzMzMzMzsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmOwp9CgphIHsKICBjb2xvcjogIzAwODhjYzsKICB0ZXh0LWRlY29yYXRpb246IG5vbmU7Cn0KCmE6aG92ZXIgewogIGNvbG9yOiAjMDA1NTgwOwogIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOwp9CgouaW1nLXJvdW5kZWQgewogIC13ZWJraXQtYm9yZGVyLXJhZGl1czogNnB4OwogICAgIC1tb3otYm9yZGVyLXJhZGl1czogNnB4OwogICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4Owp9CgouaW1nLXBvbGFyb2lkIHsKICBwYWRkaW5nOiA0cHg7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKICBib3JkZXI6IDFweCBzb2xpZCAjY2NjOwogIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4yKTsKICAtd2Via2l0LWJveC1zaGFkb3c6IDAgMXB4IDNweCByZ2JhKDAsIDAsIDAsIDAuMSk7CiAgICAgLW1vei1ib3gtc2hhZG93OiAwIDFweCAzcHggcmdiYSgwLCAwLCAwLCAwLjEpOwogICAgICAgICAgYm94LXNoYWRvdzogMCAxcHggM3B4IHJnYmEoMCwgMCwgMCwgMC4xKTsKfQoKLmltZy1jaXJjbGUgewogIC13ZWJraXQtYm9yZGVyLXJhZGl1czogNTAwcHg7CiAgICAgLW1vei1ib3JkZXItcmFkaXVzOiA1MDBweDsKICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwMHB4Owp9Cgoucm93IHsKICBtYXJnaW4tbGVmdDogLTIwcHg7CiAgKnpvb206IDE7Cn0KCi5yb3c6YmVmb3JlLAoucm93OmFmdGVyIHsKICBkaXNwbGF5OiB0YWJsZTsKICBsaW5lLWhlaWdodDogMDsKICBjb250ZW50OiAiIjsKfQoKLnJvdzphZnRlciB7CiAgY2xlYXI6IGJvdGg7Cn0KCltjbGFzcyo9InNwYW4iXSB7CiAgZmxvYXQ6IGxlZnQ7CiAgbWluLWhlaWdodDogMXB4OwogIG1hcmdpbi1sZWZ0OiAyMHB4Owp9CgouY29udGFpbmVyLAoubmF2YmFyLXN0YXRpYy10b3AgLmNvbnRhaW5lciwKLm5hdmJhci1maXhlZC10b3AgLmNvbnRhaW5lciwKLm5hdmJhci1maXhlZC1ib3R0b20gLmNvbnRhaW5lciB7CiAgd2lkdGg6IDk0MHB4Owp9Cgouc3BhbjEyIHsKICB3aWR0aDogOTQwcHg7Cn0KCi5zcGFuMTEgewogIHdpZHRoOiA4NjBweDsKfQoKLnNwYW4xMCB7CiAgd2lkdGg6IDc4MHB4Owp9Cgouc3BhbjkgewogIHdpZHRoOiA3MDBweDsKfQoKLnNwYW44IHsKICB3aWR0aDogNjIwcHg7Cn0KCi5zcGFuNyB7CiAgd2lkdGg6IDU0MHB4Owp9Cgouc3BhbjYgewogIHdpZHRoOiA0NjBweDsKfQoKLnNwYW41IHsKICB3aWR0aDogMzgwcHg7Cn0KCi5zcGFuNCB7CiAgd2lkdGg6IDMwMHB4Owp9Cgouc3BhbjMgewogIHdpZHRoOiAyMjBweDsKfQoKLnNwYW4yIHsKICB3aWR0aDogMTQwcHg7Cn0KCi5zcGFuMSB7CiAgd2lkdGg6IDYwcHg7Cn0KCi5vZmZzZXQxMiB7CiAgbWFyZ2luLWxlZnQ6IDk4MHB4Owp9Cgoub2Zmc2V0MTEgewogIG1hcmdpbi1sZWZ0OiA5MDBweDsKfQoKLm9mZnNldDEwIHsKICBtYXJnaW4tbGVmdDogODIwcHg7Cn0KCi5vZmZzZXQ5IHsKICBtYXJnaW4tbGVmdDogNzQwcHg7Cn0KCi5vZmZzZXQ4IHsKICBtYXJnaW4tbGVmdDogNjYwcHg7Cn0KCi5vZmZzZXQ3IHsKICBtYXJnaW4tbGVmdDogNTgwcHg7Cn0KCi5vZmZzZXQ2IHsKICBtYXJnaW4tbGVmdDogNTAwcHg7Cn0KCi5vZmZzZXQ1IHsKICBtYXJnaW4tbGVmdDogNDIwcHg7Cn0KCi5vZmZzZXQ0IHsKICBtYXJnaW4tbGVmdDogMzQwcHg7Cn0KCi5vZmZzZXQzIHsKICBtYXJnaW4tbGVmdDogMjYwcHg7Cn0KCi5vZmZzZXQyIHsKICBtYXJnaW4tbGVmdDogMTgwcHg7Cn0KCi5vZmZzZXQxIHsKICBtYXJnaW4tbGVmdDogMTAwcHg7Cn0KCi5yb3ctZmx1aWQgewogIHdpZHRoOiAxMDAlOwogICp6b29tOiAxOwp9Cgoucm93LWZsdWlkOmJlZm9yZSwKLnJvdy1mbHVpZDphZnRlciB7CiAgZGlzcGxheTogdGFibGU7CiAgbGluZS1oZWlnaHQ6IDA7CiAgY29udGVudDogIiI7Cn0KCi5yb3ctZmx1aWQ6YWZ0ZXIgewogIGNsZWFyOiBib3RoOwp9Cgoucm93LWZsdWlkIFtjbGFzcyo9InNwYW4iXSB7CiAgZGlzcGxheTogYmxvY2s7CiAgZmxvYXQ6IGxlZnQ7CiAgd2lkdGg6IDEwMCU7CiAgbWluLWhlaWdodDogMzBweDsKICBtYXJnaW4tbGVmdDogMi4xMjc2NTk1NzQ0NjgwODUlOwogICptYXJnaW4tbGVmdDogMi4wNzQ0NjgwODUxMDYzODMlOwogIC13ZWJraXQtYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgICAtbW96LWJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Owp9Cgoucm93LWZsdWlkIFtjbGFzcyo9InNwYW4iXTpmaXJzdC1jaGlsZCB7CiAgbWFyZ2luLWxlZnQ6IDA7Cn0KCi5yb3ctZmx1aWQgLmNvbnRyb2xzLXJvdyBbY2xhc3MqPSJzcGFuIl0gKyBbY2xhc3MqPSJzcGFuIl0gewogIG1hcmdpbi1sZWZ0OiAyLjEyNzY1OTU3NDQ2ODA4NSU7Cn0KCi5yb3ctZmx1aWQgLnNwYW4xMiB7CiAgd2lkdGg6IDEwMCU7CiAgKndpZHRoOiA5OS45NDY4MDg1MTA2MzgyOSU7Cn0KCi5yb3ctZmx1aWQgLnNwYW4xMSB7CiAgd2lkdGg6IDkxLjQ4OTM2MTcwMjEyNzY1JTsKICAqd2lkdGg6IDkxLjQzNjE3MDIxMjc2NTk0JTsKfQoKLnJvdy1mbHVpZCAuc3BhbjEwIHsKICB3aWR0aDogODIuOTc4NzIzNDA0MjU1MzIlOwogICp3aWR0aDogODIuOTI1NTMxOTE0ODkzNjElOwp9Cgoucm93LWZsdWlkIC5zcGFuOSB7CiAgd2lkdGg6IDc0LjQ2ODA4NTEwNjM4Mjk3JTsKICAqd2lkdGg6IDc0LjQxNDg5MzYxNzAyMTI2JTsKfQoKLnJvdy1mbHVpZCAuc3BhbjggewogIHdpZHRoOiA2NS45NTc0NDY4MDg1MTA2NCU7CiAgKndpZHRoOiA2NS45MDQyNTUzMTkxNDg5MyU7Cn0KCi5yb3ctZmx1aWQgLnNwYW43IHsKICB3aWR0aDogNTcuNDQ2ODA4NTEwNjM4MjklOwogICp3aWR0aDogNTcuMzkzNjE3MDIxMjc2NTklOwp9Cgoucm93LWZsdWlkIC5zcGFuNiB7CiAgd2lkdGg6IDQ4LjkzNjE3MDIxMjc2NTk1JTsKICAqd2lkdGg6IDQ4Ljg4Mjk3ODcyMzQwNDI1JTsKfQoKLnJvdy1mbHVpZCAuc3BhbjUgewogIHdpZHRoOiA0MC40MjU1MzE5MTQ4OTM2MiU7CiAgKndpZHRoOiA0MC4zNzIzNDA0MjU1MzE5MiU7Cn0KCi5yb3ctZmx1aWQgLnNwYW40IHsKICB3aWR0aDogMzEuOTE0ODkzNjE3MDIxMjc4JTsKICAqd2lkdGg6IDMxLjg2MTcwMjEyNzY1OTU3NiU7Cn0KCi5yb3ctZmx1aWQgLnNwYW4zIHsKICB3aWR0aDogMjMuNDA0MjU1MzE5MTQ4OTM0JTsKICAqd2lkdGg6IDIzLjM1MTA2MzgyOTc4NzIzMyU7Cn0KCi5yb3ctZmx1aWQgLnNwYW4yIHsKICB3aWR0aDogMTQuODkzNjE3MDIxMjc2NTk1JTsKICAqd2lkdGg6IDE0Ljg0MDQyNTUzMTkxNDg5NCU7Cn0KCi5yb3ctZmx1aWQgLnNwYW4xIHsKICB3aWR0aDogNi4zODI5Nzg3MjM0MDQyNTUlOwogICp3aWR0aDogNi4zMjk3ODcyMzQwNDI1NTMlOwp9Cgoucm93LWZsdWlkIC5vZmZzZXQxMiB7CiAgbWFyZ2luLWxlZnQ6IDEwNC4yNTUzMTkxNDg5MzYxNyU7CiAgKm1hcmdpbi1sZWZ0OiAxMDQuMTQ4OTM2MTcwMjEyNzUlOwp9Cgoucm93LWZsdWlkIC5vZmZzZXQxMjpmaXJzdC1jaGlsZCB7CiAgbWFyZ2luLWxlZnQ6IDEwMi4xMjc2NTk1NzQ0NjgwOCU7CiAgKm1hcmdpbi1sZWZ0OiAxMDIuMDIxMjc2NTk1NzQ0NjclOwp9Cgoucm93LWZsdWlkIC5vZmZzZXQxMSB7CiAgbWFyZ2luLWxlZnQ6IDk1Ljc0NDY4MDg1MTA2MzgyJTsKICAqbWFyZ2luLWxlZnQ6IDk1LjYzODI5Nzg3MjM0MDQlOwp9Cgoucm93LWZsdWlkIC5vZmZzZXQxMTpmaXJzdC1jaGlsZCB7CiAgbWFyZ2luLWxlZnQ6IDkzLjYxNzAyMTI3NjU5NTc0JTsKICAqbWFyZ2luLWxlZnQ6IDkzLjUxMDYzODI5Nzg3MjMyJTsKfQoKLnJvdy1mbHVpZCAub2Zmc2V0MTAgewogIG1hcmdpbi1sZWZ0OiA4Ny4yMzQwNDI1NTMxOTE0OSU7CiAgKm1hcmdpbi1sZWZ0OiA4Ny4xMjc2NTk1NzQ0NjgwNyU7Cn0KCi5yb3ctZmx1aWQgLm9mZnNldDEwOmZpcnN0LWNoaWxkIHsKICBtYXJnaW4tbGVmdDogODUuMTA2MzgyOTc4NzIzNCU7CiAgKm1hcmdpbi1sZWZ0OiA4NC45OTk5OTk5OTk5OTk5OSU7Cn0KCi5yb3ctZmx1aWQgLm9mZnNldDkgewogIG1hcmdpbi1sZWZ0OiA3OC43MjM0MDQyNTUzMTkxNCU7CiAgKm1hcmdpbi1sZWZ0OiA3OC42MTcwMjEyNzY1OTU3MiU7Cn0KCi5yb3ctZmx1aWQgLm9mZnNldDk6Zmlyc3QtY2hpbGQgewogIG1hcmdpbi1sZWZ0OiA3Ni41OTU3NDQ2ODA4NTEwNiU7CiAgKm1hcmdpbi1sZWZ0OiA3Ni40ODkzNjE3MDIxMjc2NCU7Cn0KCi5yb3ctZmx1aWQgLm9mZnNldDggewogIG1hcmdpbi1sZWZ0OiA3MC4yMTI3NjU5NTc0NDY4JTsKICAqbWFyZ2luLWxlZnQ6IDcwLjEwNjM4Mjk3ODcyMzM5JTsKfQoKLnJvdy1mbHVpZCAub2Zmc2V0ODpmaXJzdC1jaGlsZCB7CiAgbWFyZ2luLWxlZnQ6IDY4LjA4NTEwNjM4Mjk3ODcyJTsKICAqbWFyZ2luLWxlZnQ6IDY3Ljk3ODcyMzQwNDI1NTMlOwp9Cgoucm93LWZsdWlkIC5vZmZzZXQ3IHsKICBtYXJnaW4tbGVmdDogNjEuNzAyMTI3NjU5NTc0NDYlOwogICptYXJnaW4tbGVmdDogNjEuNTk1NzQ0NjgwODUxMDYlOwp9Cgoucm93LWZsdWlkIC5vZmZzZXQ3OmZpcnN0LWNoaWxkIHsKICBtYXJnaW4tbGVmdDogNTkuNTc0NDY4MDg1MTA2Mzc1JTsKICAqbWFyZ2luLWxlZnQ6IDU5LjQ2ODA4NTEwNjM4Mjk3JTsKfQoKLnJvdy1mbHVpZCAub2Zmc2V0NiB7CiAgbWFyZ2luLWxlZnQ6IDUzLjE5MTQ4OTM2MTcwMjEyNSU7CiAgKm1hcmdpbi1sZWZ0OiA1My4wODUxMDYzODI5Nzg3MTUlOwp9Cgoucm93LWZsdWlkIC5vZmZzZXQ2OmZpcnN0LWNoaWxkIHsKICBtYXJnaW4tbGVmdDogNTEuMDYzODI5Nzg3MjM0MDM1JTsKICAqbWFyZ2luLWxlZnQ6IDUwLjk1NzQ0NjgwODUxMDYzJTsKfQoKLnJvdy1mbHVpZCAub2Zmc2V0NSB7CiAgbWFyZ2luLWxlZnQ6IDQ0LjY4MDg1MTA2MzgyOTc5JTsKICAqbWFyZ2luLWxlZnQ6IDQ0LjU3NDQ2ODA4NTEwNjM4JTsKfQoKLnJvdy1mbHVpZCAub2Zmc2V0NTpmaXJzdC1jaGlsZCB7CiAgbWFyZ2luLWxlZnQ6IDQyLjU1MzE5MTQ4OTM2MTclOwogICptYXJnaW4tbGVmdDogNDIuNDQ2ODA4NTEwNjM4MyU7Cn0KCi5yb3ctZmx1aWQgLm9mZnNldDQgewogIG1hcmdpbi1sZWZ0OiAzNi4xNzAyMTI3NjU5NTc0NDQlOwogICptYXJnaW4tbGVmdDogMzYuMDYzODI5Nzg3MjM0MDUlOwp9Cgoucm93LWZsdWlkIC5vZmZzZXQ0OmZpcnN0LWNoaWxkIHsKICBtYXJnaW4tbGVmdDogMzQuMDQyNTUzMTkxNDg5MzYlOwogICptYXJnaW4tbGVmdDogMzMuOTM2MTcwMjEyNzY1OTYlOwp9Cgoucm93LWZsdWlkIC5vZmZzZXQzIHsKICBtYXJnaW4tbGVmdDogMjcuNjU5NTc0NDY4MDg1MTA0JTsKICAqbWFyZ2luLWxlZnQ6IDI3LjU1MzE5MTQ4OTM2MTclOwp9Cgoucm93LWZsdWlkIC5vZmZzZXQzOmZpcnN0LWNoaWxkIHsKICBtYXJnaW4tbGVmdDogMjUuNTMxOTE0ODkzNjE3MDIlOwogICptYXJnaW4tbGVmdDogMjUuNDI1NTMxOTE0ODkzNjE4JTsKfQoKLnJvdy1mbHVpZCAub2Zmc2V0MiB7CiAgbWFyZ2luLWxlZnQ6IDE5LjE0ODkzNjE3MDIxMjc2NCU7CiAgKm1hcmdpbi1sZWZ0OiAxOS4wNDI1NTMxOTE0ODkzNiU7Cn0KCi5yb3ctZmx1aWQgLm9mZnNldDI6Zmlyc3QtY2hpbGQgewogIG1hcmdpbi1sZWZ0OiAxNy4wMjEyNzY1OTU3NDQ2OCU7CiAgKm1hcmdpbi1sZWZ0OiAxNi45MTQ4OTM2MTcwMjEyNzglOwp9Cgoucm93LWZsdWlkIC5vZmZzZXQxIHsKICBtYXJnaW4tbGVmdDogMTAuNjM4Mjk3ODcyMzQwNDI1JTsKICAqbWFyZ2luLWxlZnQ6IDEwLjUzMTkxNDg5MzYxNzAyJTsKfQoKLnJvdy1mbHVpZCAub2Zmc2V0MTpmaXJzdC1jaGlsZCB7CiAgbWFyZ2luLWxlZnQ6IDguNTEwNjM4Mjk3ODcyMzQlOwogICptYXJnaW4tbGVmdDogOC40MDQyNTUzMTkxNDg5MzglOwp9CgpbY2xhc3MqPSJzcGFuIl0uaGlkZSwKLnJvdy1mbHVpZCBbY2xhc3MqPSJzcGFuIl0uaGlkZSB7CiAgZGlzcGxheTogbm9uZTsKfQoKW2NsYXNzKj0ic3BhbiJdLnB1bGwtcmlnaHQsCi5yb3ctZmx1aWQgW2NsYXNzKj0ic3BhbiJdLnB1bGwtcmlnaHQgewogIGZsb2F0OiByaWdodDsKfQoKLmNvbnRhaW5lciB7CiAgbWFyZ2luLXJpZ2h0OiBhdXRvOwogIG1hcmdpbi1sZWZ0OiBhdXRvOwogICp6b29tOiAxOwp9CgouY29udGFpbmVyOmJlZm9yZSwKLmNvbnRhaW5lcjphZnRlciB7CiAgZGlzcGxheTogdGFibGU7CiAgbGluZS1oZWlnaHQ6IDA7CiAgY29udGVudDogIiI7Cn0KCi5jb250YWluZXI6YWZ0ZXIgewogIGNsZWFyOiBib3RoOwp9CgouY29udGFpbmVyLWZsdWlkIHsKICBwYWRkaW5nLXJpZ2h0OiAyMHB4OwogIHBhZGRpbmctbGVmdDogMjBweDsKICAqem9vbTogMTsKfQoKLmNvbnRhaW5lci1mbHVpZDpiZWZvcmUsCi5jb250YWluZXItZmx1aWQ6YWZ0ZXIgewogIGRpc3BsYXk6IHRhYmxlOwogIGxpbmUtaGVpZ2h0OiAwOwogIGNvbnRlbnQ6ICIiOwp9CgouY29udGFpbmVyLWZsdWlkOmFmdGVyIHsKICBjbGVhcjogYm90aDsKfQoKcCB7CiAgbWFyZ2luOiAwIDAgMTBweDsKfQoKLmxlYWQgewogIG1hcmdpbi1ib3R0b206IDIwcHg7CiAgZm9udC1zaXplOiAyMXB4OwogIGZvbnQtd2VpZ2h0OiAyMDA7CiAgbGluZS1oZWlnaHQ6IDMwcHg7Cn0KCnNtYWxsIHsKICBmb250LXNpemU6IDg1JTsKfQoKc3Ryb25nIHsKICBmb250LXdlaWdodDogYm9sZDsKfQoKZW0gewogIGZvbnQtc3R5bGU6IGl0YWxpYzsKfQoKY2l0ZSB7CiAgZm9udC1zdHlsZTogbm9ybWFsOwp9CgoubXV0ZWQgewogIGNvbG9yOiAjOTk5OTk5Owp9CgphLm11dGVkOmhvdmVyIHsKICBjb2xvcjogIzgwODA4MDsKfQoKLnRleHQtd2FybmluZyB7CiAgY29sb3I6ICNjMDk4NTM7Cn0KCmEudGV4dC13YXJuaW5nOmhvdmVyIHsKICBjb2xvcjogI2E0N2UzYzsKfQoKLnRleHQtZXJyb3IgewogIGNvbG9yOiAjYjk0YTQ4Owp9CgphLnRleHQtZXJyb3I6aG92ZXIgewogIGNvbG9yOiAjOTUzYjM5Owp9CgoudGV4dC1pbmZvIHsKICBjb2xvcjogIzNhODdhZDsKfQoKYS50ZXh0LWluZm86aG92ZXIgewogIGNvbG9yOiAjMmQ2OTg3Owp9CgoudGV4dC1zdWNjZXNzIHsKICBjb2xvcjogIzQ2ODg0NzsKfQoKYS50ZXh0LXN1Y2Nlc3M6aG92ZXIgewogIGNvbG9yOiAjMzU2NjM1Owp9CgpoMSwKaDIsCmgzLApoNCwKaDUsCmg2IHsKICBtYXJnaW46IDEwcHggMDsKICBmb250LWZhbWlseTogaW5oZXJpdDsKICBmb250LXdlaWdodDogYm9sZDsKICBsaW5lLWhlaWdodDogMjBweDsKICBjb2xvcjogaW5oZXJpdDsKICB0ZXh0LXJlbmRlcmluZzogb3B0aW1pemVsZWdpYmlsaXR5Owp9CgpoMSBzbWFsbCwKaDIgc21hbGwsCmgzIHNtYWxsLApoNCBzbWFsbCwKaDUgc21hbGwsCmg2IHNtYWxsIHsKICBmb250LXdlaWdodDogbm9ybWFsOwogIGxpbmUtaGVpZ2h0OiAxOwogIGNvbG9yOiAjOTk5OTk5Owp9CgpoMSwKaDIsCmgzIHsKICBsaW5lLWhlaWdodDogNDBweDsKfQoKaDEgewogIGZvbnQtc2l6ZTogMzguNXB4Owp9CgpoMiB7CiAgZm9udC1zaXplOiAzMS41cHg7Cn0KCmgzIHsKICBmb250LXNpemU6IDI0LjVweDsKfQoKaDQgewogIGZvbnQtc2l6ZTogMTcuNXB4Owp9CgpoNSB7CiAgZm9udC1zaXplOiAxNHB4Owp9CgpoNiB7CiAgZm9udC1zaXplOiAxMS45cHg7Cn0KCmgxIHNtYWxsIHsKICBmb250LXNpemU6IDI0LjVweDsKfQoKaDIgc21hbGwgewogIGZvbnQtc2l6ZTogMTcuNXB4Owp9CgpoMyBzbWFsbCB7CiAgZm9udC1zaXplOiAxNHB4Owp9CgpoNCBzbWFsbCB7CiAgZm9udC1zaXplOiAxNHB4Owp9CgoucGFnZS1oZWFkZXIgewogIHBhZGRpbmctYm90dG9tOiA5cHg7CiAgbWFyZ2luOiAyMHB4IDAgMzBweDsKICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VlZWVlZTsKfQoKdWwsCm9sIHsKICBwYWRkaW5nOiAwOwogIG1hcmdpbjogMCAwIDEwcHggMjVweDsKfQoKdWwgdWwsCnVsIG9sLApvbCBvbCwKb2wgdWwgewogIG1hcmdpbi1ib3R0b206IDA7Cn0KCmxpIHsKICBsaW5lLWhlaWdodDogMjBweDsKfQoKdWwudW5zdHlsZWQsCm9sLnVuc3R5bGVkIHsKICBtYXJnaW4tbGVmdDogMDsKICBsaXN0LXN0eWxlOiBub25lOwp9Cgp1bC5pbmxpbmUsCm9sLmlubGluZSB7CiAgbWFyZ2luLWxlZnQ6IDA7CiAgbGlzdC1zdHlsZTogbm9uZTsKfQoKdWwuaW5saW5lID4gbGksCm9sLmlubGluZSA+IGxpIHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgcGFkZGluZy1yaWdodDogNXB4OwogIHBhZGRpbmctbGVmdDogNXB4Owp9CgpkbCB7CiAgbWFyZ2luLWJvdHRvbTogMjBweDsKfQoKZHQsCmRkIHsKICBsaW5lLWhlaWdodDogMjBweDsKfQoKZHQgewogIGZvbnQtd2VpZ2h0OiBib2xkOwp9CgpkZCB7CiAgbWFyZ2luLWxlZnQ6IDEwcHg7Cn0KCi5kbC1ob3Jpem9udGFsIHsKICAqem9vbTogMTsKfQoKLmRsLWhvcml6b250YWw6YmVmb3JlLAouZGwtaG9yaXpvbnRhbDphZnRlciB7CiAgZGlzcGxheTogdGFibGU7CiAgbGluZS1oZWlnaHQ6IDA7CiAgY29udGVudDogIiI7Cn0KCi5kbC1ob3Jpem9udGFsOmFmdGVyIHsKICBjbGVhcjogYm90aDsKfQoKLmRsLWhvcml6b250YWwgZHQgewogIGZsb2F0OiBsZWZ0OwogIHdpZHRoOiAxNjBweDsKICBvdmVyZmxvdzogaGlkZGVuOwogIGNsZWFyOiBsZWZ0OwogIHRleHQtYWxpZ246IHJpZ2h0OwogIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOwogIHdoaXRlLXNwYWNlOiBub3dyYXA7Cn0KCi5kbC1ob3Jpem9udGFsIGRkIHsKICBtYXJnaW4tbGVmdDogMTgwcHg7Cn0KCmhyIHsKICBtYXJnaW46IDIwcHggMDsKICBib3JkZXI6IDA7CiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlZWVlZWU7CiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNmZmZmZmY7Cn0KCmFiYnJbdGl0bGVdLAphYmJyW2RhdGEtb3JpZ2luYWwtdGl0bGVdIHsKICBjdXJzb3I6IGhlbHA7CiAgYm9yZGVyLWJvdHRvbTogMXB4IGRvdHRlZCAjOTk5OTk5Owp9CgphYmJyLmluaXRpYWxpc20gewogIGZvbnQtc2l6ZTogOTAlOwogIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7Cn0KCmJsb2NrcXVvdGUgewogIHBhZGRpbmc6IDAgMCAwIDE1cHg7CiAgbWFyZ2luOiAwIDAgMjBweDsKICBib3JkZXItbGVmdDogNXB4IHNvbGlkICNlZWVlZWU7Cn0KCmJsb2NrcXVvdGUgcCB7CiAgbWFyZ2luLWJvdHRvbTogMDsKICBmb250LXNpemU6IDE2cHg7CiAgZm9udC13ZWlnaHQ6IDMwMDsKICBsaW5lLWhlaWdodDogMjVweDsKfQoKYmxvY2txdW90ZSBzbWFsbCB7CiAgZGlzcGxheTogYmxvY2s7CiAgbGluZS1oZWlnaHQ6IDIwcHg7CiAgY29sb3I6ICM5OTk5OTk7Cn0KCmJsb2NrcXVvdGUgc21hbGw6YmVmb3JlIHsKICBjb250ZW50OiAnXDIwMTQgXDAwQTAnOwp9CgpibG9ja3F1b3RlLnB1bGwtcmlnaHQgewogIGZsb2F0OiByaWdodDsKICBwYWRkaW5nLXJpZ2h0OiAxNXB4OwogIHBhZGRpbmctbGVmdDogMDsKICBib3JkZXItcmlnaHQ6IDVweCBzb2xpZCAjZWVlZWVlOwogIGJvcmRlci1sZWZ0OiAwOwp9CgpibG9ja3F1b3RlLnB1bGwtcmlnaHQgcCwKYmxvY2txdW90ZS5wdWxsLXJpZ2h0IHNtYWxsIHsKICB0ZXh0LWFsaWduOiByaWdodDsKfQoKYmxvY2txdW90ZS5wdWxsLXJpZ2h0IHNtYWxsOmJlZm9yZSB7CiAgY29udGVudDogJyc7Cn0KCmJsb2NrcXVvdGUucHVsbC1yaWdodCBzbWFsbDphZnRlciB7CiAgY29udGVudDogJ1wwMEEwIFwyMDE0JzsKfQoKcTpiZWZvcmUsCnE6YWZ0ZXIsCmJsb2NrcXVvdGU6YmVmb3JlLApibG9ja3F1b3RlOmFmdGVyIHsKICBjb250ZW50OiAiIjsKfQoKYWRkcmVzcyB7CiAgZGlzcGxheTogYmxvY2s7CiAgbWFyZ2luLWJvdHRvbTogMjBweDsKICBmb250LXN0eWxlOiBub3JtYWw7CiAgbGluZS1oZWlnaHQ6IDIwcHg7Cn0KCmNvZGUsCnByZSB7CiAgcGFkZGluZzogMCAzcHggMnB4OwogIGZvbnQtZmFtaWx5OiBNb25hY28sIE1lbmxvLCBDb25zb2xhcywgIkNvdXJpZXIgTmV3IiwgbW9ub3NwYWNlOwogIGZvbnQtc2l6ZTogMTJweDsKICBjb2xvcjogIzMzMzMzMzsKICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDNweDsKICAgICAtbW96LWJvcmRlci1yYWRpdXM6IDNweDsKICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDsKfQoKY29kZSB7CiAgcGFkZGluZzogMnB4IDRweDsKICBjb2xvcjogI2QxNDsKICB3aGl0ZS1zcGFjZTogbm93cmFwOwogIGJhY2tncm91bmQtY29sb3I6ICNmN2Y3Zjk7CiAgYm9yZGVyOiAxcHggc29saWQgI2UxZTFlODsKfQoKcHJlIHsKICBkaXNwbGF5OiBibG9jazsKICBwYWRkaW5nOiA5LjVweDsKICBtYXJnaW46IDAgMCAxMHB4OwogIGZvbnQtc2l6ZTogMTNweDsKICBsaW5lLWhlaWdodDogMjBweDsKICB3b3JkLWJyZWFrOiBicmVhay1hbGw7CiAgd29yZC13cmFwOiBicmVhay13b3JkOwogIHdoaXRlLXNwYWNlOiBwcmU7CiAgd2hpdGUtc3BhY2U6IHByZS13cmFwOwogIGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7CiAgYm9yZGVyOiAxcHggc29saWQgI2NjYzsKICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMTUpOwogIC13ZWJraXQtYm9yZGVyLXJhZGl1czogNHB4OwogICAgIC1tb3otYm9yZGVyLXJhZGl1czogNHB4OwogICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4Owp9CgpwcmUucHJldHR5cHJpbnQgewogIG1hcmdpbi1ib3R0b206IDIwcHg7Cn0KCnByZSBjb2RlIHsKICBwYWRkaW5nOiAwOwogIGNvbG9yOiBpbmhlcml0OwogIHdoaXRlLXNwYWNlOiBwcmU7CiAgd2hpdGUtc3BhY2U6IHByZS13cmFwOwogIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50OwogIGJvcmRlcjogMDsKfQoKLnByZS1zY3JvbGxhYmxlIHsKICBtYXgtaGVpZ2h0OiAzNDBweDsKICBvdmVyZmxvdy15OiBzY3JvbGw7Cn0KCmZvcm0gewogIG1hcmdpbjogMCAwIDIwcHg7Cn0KCmZpZWxkc2V0IHsKICBwYWRkaW5nOiAwOwogIG1hcmdpbjogMDsKICBib3JkZXI6IDA7Cn0KCmxlZ2VuZCB7CiAgZGlzcGxheTogYmxvY2s7CiAgd2lkdGg6IDEwMCU7CiAgcGFkZGluZzogMDsKICBtYXJnaW4tYm90dG9tOiAyMHB4OwogIGZvbnQtc2l6ZTogMjFweDsKICBsaW5lLWhlaWdodDogNDBweDsKICBjb2xvcjogIzMzMzMzMzsKICBib3JkZXI6IDA7CiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlNWU1ZTU7Cn0KCmxlZ2VuZCBzbWFsbCB7CiAgZm9udC1zaXplOiAxNXB4OwogIGNvbG9yOiAjOTk5OTk5Owp9CgpsYWJlbCwKaW5wdXQsCmJ1dHRvbiwKc2VsZWN0LAp0ZXh0YXJlYSB7CiAgZm9udC1zaXplOiAxNHB4OwogIGZvbnQtd2VpZ2h0OiBub3JtYWw7CiAgbGluZS1oZWlnaHQ6IDIwcHg7Cn0KCmlucHV0LApidXR0b24sCnNlbGVjdCwKdGV4dGFyZWEgewogIGZvbnQtZmFtaWx5OiAiSGVsdmV0aWNhIE5ldWUiLCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmOwp9CgpsYWJlbCB7CiAgZGlzcGxheTogYmxvY2s7CiAgbWFyZ2luLWJvdHRvbTogNXB4Owp9CgpzZWxlY3QsCnRleHRhcmVhLAppbnB1dFt0eXBlPSJ0ZXh0Il0sCmlucHV0W3R5cGU9InBhc3N3b3JkIl0sCmlucHV0W3R5cGU9ImRhdGV0aW1lIl0sCmlucHV0W3R5cGU9ImRhdGV0aW1lLWxvY2FsIl0sCmlucHV0W3R5cGU9ImRhdGUiXSwKaW5wdXRbdHlwZT0ibW9udGgiXSwKaW5wdXRbdHlwZT0idGltZSJdLAppbnB1dFt0eXBlPSJ3ZWVrIl0sCmlucHV0W3R5cGU9Im51bWJlciJdLAppbnB1dFt0eXBlPSJlbWFpbCJdLAppbnB1dFt0eXBlPSJ1cmwiXSwKaW5wdXRbdHlwZT0ic2VhcmNoIl0sCmlucHV0W3R5cGU9InRlbCJdLAppbnB1dFt0eXBlPSJjb2xvciJdLAoudW5lZGl0YWJsZS1pbnB1dCB7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIGhlaWdodDogMjBweDsKICBwYWRkaW5nOiA0cHggNnB4OwogIG1hcmdpbi1ib3R0b206IDEwcHg7CiAgZm9udC1zaXplOiAxNHB4OwogIGxpbmUtaGVpZ2h0OiAyMHB4OwogIGNvbG9yOiAjNTU1NTU1OwogIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiA0cHg7CiAgICAgLW1vei1ib3JkZXItcmFkaXVzOiA0cHg7CiAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7Cn0KCmlucHV0LAp0ZXh0YXJlYSwKLnVuZWRpdGFibGUtaW5wdXQgewogIHdpZHRoOiAyMDZweDsKfQoKdGV4dGFyZWEgewogIGhlaWdodDogYXV0bzsKfQoKdGV4dGFyZWEsCmlucHV0W3R5cGU9InRleHQiXSwKaW5wdXRbdHlwZT0icGFzc3dvcmQiXSwKaW5wdXRbdHlwZT0iZGF0ZXRpbWUiXSwKaW5wdXRbdHlwZT0iZGF0ZXRpbWUtbG9jYWwiXSwKaW5wdXRbdHlwZT0iZGF0ZSJdLAppbnB1dFt0eXBlPSJtb250aCJdLAppbnB1dFt0eXBlPSJ0aW1lIl0sCmlucHV0W3R5cGU9IndlZWsiXSwKaW5wdXRbdHlwZT0ibnVtYmVyIl0sCmlucHV0W3R5cGU9ImVtYWlsIl0sCmlucHV0W3R5cGU9InVybCJdLAppbnB1dFt0eXBlPSJzZWFyY2giXSwKaW5wdXRbdHlwZT0idGVsIl0sCmlucHV0W3R5cGU9ImNvbG9yIl0sCi51bmVkaXRhYmxlLWlucHV0IHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmOwogIGJvcmRlcjogMXB4IHNvbGlkICNjY2NjY2M7CiAgLXdlYmtpdC1ib3gtc2hhZG93OiBpbnNldCAwIDFweCAxcHggcmdiYSgwLCAwLCAwLCAwLjA3NSk7CiAgICAgLW1vei1ib3gtc2hhZG93OiBpbnNldCAwIDFweCAxcHggcmdiYSgwLCAwLCAwLCAwLjA3NSk7CiAgICAgICAgICBib3gtc2hhZG93OiBpbnNldCAwIDFweCAxcHggcmdiYSgwLCAwLCAwLCAwLjA3NSk7CiAgLXdlYmtpdC10cmFuc2l0aW9uOiBib3JkZXIgbGluZWFyIDAuMnMsIGJveC1zaGFkb3cgbGluZWFyIDAuMnM7CiAgICAgLW1vei10cmFuc2l0aW9uOiBib3JkZXIgbGluZWFyIDAuMnMsIGJveC1zaGFkb3cgbGluZWFyIDAuMnM7CiAgICAgICAtby10cmFuc2l0aW9uOiBib3JkZXIgbGluZWFyIDAuMnMsIGJveC1zaGFkb3cgbGluZWFyIDAuMnM7CiAgICAgICAgICB0cmFuc2l0aW9uOiBib3JkZXIgbGluZWFyIDAuMnMsIGJveC1zaGFkb3cgbGluZWFyIDAuMnM7Cn0KCnRleHRhcmVhOmZvY3VzLAppbnB1dFt0eXBlPSJ0ZXh0Il06Zm9jdXMsCmlucHV0W3R5cGU9InBhc3N3b3JkIl06Zm9jdXMsCmlucHV0W3R5cGU9ImRhdGV0aW1lIl06Zm9jdXMsCmlucHV0W3R5cGU9ImRhdGV0aW1lLWxvY2FsIl06Zm9jdXMsCmlucHV0W3R5cGU9ImRhdGUiXTpmb2N1cywKaW5wdXRbdHlwZT0ibW9udGgiXTpmb2N1cywKaW5wdXRbdHlwZT0idGltZSJdOmZvY3VzLAppbnB1dFt0eXBlPSJ3ZWVrIl06Zm9jdXMsCmlucHV0W3R5cGU9Im51bWJlciJdOmZvY3VzLAppbnB1dFt0eXBlPSJlbWFpbCJdOmZvY3VzLAppbnB1dFt0eXBlPSJ1cmwiXTpmb2N1cywKaW5wdXRbdHlwZT0ic2VhcmNoIl06Zm9jdXMsCmlucHV0W3R5cGU9InRlbCJdOmZvY3VzLAppbnB1dFt0eXBlPSJjb2xvciJdOmZvY3VzLAoudW5lZGl0YWJsZS1pbnB1dDpmb2N1cyB7CiAgYm9yZGVyLWNvbG9yOiByZ2JhKDgyLCAxNjgsIDIzNiwgMC44KTsKICBvdXRsaW5lOiAwOwogIG91dGxpbmU6IHRoaW4gZG90dGVkIFw5OwogIC8qIElFNi05ICovCgogIC13ZWJraXQtYm94LXNoYWRvdzogaW5zZXQgMCAxcHggMXB4IHJnYmEoMCwgMCwgMCwgMC4wNzUpLCAwIDAgOHB4IHJnYmEoODIsIDE2OCwgMjM2LCAwLjYpOwogICAgIC1tb3otYm94LXNoYWRvdzogaW5zZXQgMCAxcHggMXB4IHJnYmEoMCwgMCwgMCwgMC4wNzUpLCAwIDAgOHB4IHJnYmEoODIsIDE2OCwgMjM2LCAwLjYpOwogICAgICAgICAgYm94LXNoYWRvdzogaW5zZXQgMCAxcHggMXB4IHJnYmEoMCwgMCwgMCwgMC4wNzUpLCAwIDAgOHB4IHJnYmEoODIsIDE2OCwgMjM2LCAwLjYpOwp9CgppbnB1dFt0eXBlPSJyYWRpbyJdLAppbnB1dFt0eXBlPSJjaGVja2JveCJdIHsKICBtYXJnaW46IDRweCAwIDA7CiAgbWFyZ2luLXRvcDogMXB4IFw5OwogICptYXJnaW4tdG9wOiAwOwogIGxpbmUtaGVpZ2h0OiBub3JtYWw7Cn0KCmlucHV0W3R5cGU9ImZpbGUiXSwKaW5wdXRbdHlwZT0iaW1hZ2UiXSwKaW5wdXRbdHlwZT0ic3VibWl0Il0sCmlucHV0W3R5cGU9InJlc2V0Il0sCmlucHV0W3R5cGU9ImJ1dHRvbiJdLAppbnB1dFt0eXBlPSJyYWRpbyJdLAppbnB1dFt0eXBlPSJjaGVja2JveCJdIHsKICB3aWR0aDogYXV0bzsKfQoKc2VsZWN0LAppbnB1dFt0eXBlPSJmaWxlIl0gewogIGhlaWdodDogMzBweDsKICAvKiBJbiBJRTcsIHRoZSBoZWlnaHQgb2YgdGhlIHNlbGVjdCBlbGVtZW50IGNhbm5vdCBiZSBjaGFuZ2VkIGJ5IGhlaWdodCwgb25seSBmb250LXNpemUgKi8KCiAgKm1hcmdpbi10b3A6IDRweDsKICAvKiBGb3IgSUU3LCBhZGQgdG9wIG1hcmdpbiB0byBhbGlnbiBzZWxlY3Qgd2l0aCBsYWJlbHMgKi8KCiAgbGluZS1oZWlnaHQ6IDMwcHg7Cn0KCnNlbGVjdCB7CiAgd2lkdGg6IDIyMHB4OwogIGJhY2tncm91bmQtY29sb3I6ICNmZmZmZmY7CiAgYm9yZGVyOiAxcHggc29saWQgI2NjY2NjYzsKfQoKc2VsZWN0W211bHRpcGxlXSwKc2VsZWN0W3NpemVdIHsKICBoZWlnaHQ6IGF1dG87Cn0KCnNlbGVjdDpmb2N1cywKaW5wdXRbdHlwZT0iZmlsZSJdOmZvY3VzLAppbnB1dFt0eXBlPSJyYWRpbyJdOmZvY3VzLAppbnB1dFt0eXBlPSJjaGVja2JveCJdOmZvY3VzIHsKICBvdXRsaW5lOiB0aGluIGRvdHRlZCAjMzMzOwogIG91dGxpbmU6IDVweCBhdXRvIC13ZWJraXQtZm9jdXMtcmluZy1jb2xvcjsKICBvdXRsaW5lLW9mZnNldDogLTJweDsKfQoKLnVuZWRpdGFibGUtaW5wdXQsCi51bmVkaXRhYmxlLXRleHRhcmVhIHsKICBjb2xvcjogIzk5OTk5OTsKICBjdXJzb3I6IG5vdC1hbGxvd2VkOwogIGJhY2tncm91bmQtY29sb3I6ICNmY2ZjZmM7CiAgYm9yZGVyLWNvbG9yOiAjY2NjY2NjOwogIC13ZWJraXQtYm94LXNoYWRvdzogaW5zZXQgMCAxcHggMnB4IHJnYmEoMCwgMCwgMCwgMC4wMjUpOwogICAgIC1tb3otYm94LXNoYWRvdzogaW5zZXQgMCAxcHggMnB4IHJnYmEoMCwgMCwgMCwgMC4wMjUpOwogICAgICAgICAgYm94LXNoYWRvdzogaW5zZXQgMCAxcHggMnB4IHJnYmEoMCwgMCwgMCwgMC4wMjUpOwp9CgoudW5lZGl0YWJsZS1pbnB1dCB7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKICB3aGl0ZS1zcGFjZTogbm93cmFwOwp9CgoudW5lZGl0YWJsZS10ZXh0YXJlYSB7CiAgd2lkdGg6IGF1dG87CiAgaGVpZ2h0OiBhdXRvOwp9CgppbnB1dDotbW96LXBsYWNlaG9sZGVyLAp0ZXh0YXJlYTotbW96LXBsYWNlaG9sZGVyIHsKICBjb2xvcjogIzk5OTk5OTsKfQoKaW5wdXQ6LW1zLWlucHV0LXBsYWNlaG9sZGVyLAp0ZXh0YXJlYTotbXMtaW5wdXQtcGxhY2Vob2xkZXIgewogIGNvbG9yOiAjOTk5OTk5Owp9CgppbnB1dDo6LXdlYmtpdC1pbnB1dC1wbGFjZWhvbGRlciwKdGV4dGFyZWE6Oi13ZWJraXQtaW5wdXQtcGxhY2Vob2xkZXIgewogIGNvbG9yOiAjOTk5OTk5Owp9CgoucmFkaW8sCi5jaGVja2JveCB7CiAgbWluLWhlaWdodDogMjBweDsKICBwYWRkaW5nLWxlZnQ6IDIwcHg7Cn0KCi5yYWRpbyBpbnB1dFt0eXBlPSJyYWRpbyJdLAouY2hlY2tib3ggaW5wdXRbdHlwZT0iY2hlY2tib3giXSB7CiAgZmxvYXQ6IGxlZnQ7CiAgbWFyZ2luLWxlZnQ6IC0yMHB4Owp9CgouY29udHJvbHMgPiAucmFkaW86Zmlyc3QtY2hpbGQsCi5jb250cm9scyA+IC5jaGVja2JveDpmaXJzdC1jaGlsZCB7CiAgcGFkZGluZy10b3A6IDVweDsKfQoKLnJhZGlvLmlubGluZSwKLmNoZWNrYm94LmlubGluZSB7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIHBhZGRpbmctdG9wOiA1cHg7CiAgbWFyZ2luLWJvdHRvbTogMDsKICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwp9CgoucmFkaW8uaW5saW5lICsgLnJhZGlvLmlubGluZSwKLmNoZWNrYm94LmlubGluZSArIC5jaGVja2JveC5pbmxpbmUgewogIG1hcmdpbi1sZWZ0OiAxMHB4Owp9CgouaW5wdXQtbWluaSB7CiAgd2lkdGg6IDYwcHg7Cn0KCi5pbnB1dC1zbWFsbCB7CiAgd2lkdGg6IDkwcHg7Cn0KCi5pbnB1dC1tZWRpdW0gewogIHdpZHRoOiAxNTBweDsKfQoKLmlucHV0LWxhcmdlIHsKICB3aWR0aDogMjEwcHg7Cn0KCi5pbnB1dC14bGFyZ2UgewogIHdpZHRoOiAyNzBweDsKfQoKLmlucHV0LXh4bGFyZ2UgewogIHdpZHRoOiA1MzBweDsKfQoKaW5wdXRbY2xhc3MqPSJzcGFuIl0sCnNlbGVjdFtjbGFzcyo9InNwYW4iXSwKdGV4dGFyZWFbY2xhc3MqPSJzcGFuIl0sCi51bmVkaXRhYmxlLWlucHV0W2NsYXNzKj0ic3BhbiJdLAoucm93LWZsdWlkIGlucHV0W2NsYXNzKj0ic3BhbiJdLAoucm93LWZsdWlkIHNlbGVjdFtjbGFzcyo9InNwYW4iXSwKLnJvdy1mbHVpZCB0ZXh0YXJlYVtjbGFzcyo9InNwYW4iXSwKLnJvdy1mbHVpZCAudW5lZGl0YWJsZS1pbnB1dFtjbGFzcyo9InNwYW4iXSB7CiAgZmxvYXQ6IG5vbmU7CiAgbWFyZ2luLWxlZnQ6IDA7Cn0KCi5pbnB1dC1hcHBlbmQgaW5wdXRbY2xhc3MqPSJzcGFuIl0sCi5pbnB1dC1hcHBlbmQgLnVuZWRpdGFibGUtaW5wdXRbY2xhc3MqPSJzcGFuIl0sCi5pbnB1dC1wcmVwZW5kIGlucHV0W2NsYXNzKj0ic3BhbiJdLAouaW5wdXQtcHJlcGVuZCAudW5lZGl0YWJsZS1pbnB1dFtjbGFzcyo9InNwYW4iXSwKLnJvdy1mbHVpZCBpbnB1dFtjbGFzcyo9InNwYW4iXSwKLnJvdy1mbHVpZCBzZWxlY3RbY2xhc3MqPSJzcGFuIl0sCi5yb3ctZmx1aWQgdGV4dGFyZWFbY2xhc3MqPSJzcGFuIl0sCi5yb3ctZmx1aWQgLnVuZWRpdGFibGUtaW5wdXRbY2xhc3MqPSJzcGFuIl0sCi5yb3ctZmx1aWQgLmlucHV0LXByZXBlbmQgW2NsYXNzKj0ic3BhbiJdLAoucm93LWZsdWlkIC5pbnB1dC1hcHBlbmQgW2NsYXNzKj0ic3BhbiJdIHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Cn0KCmlucHV0LAp0ZXh0YXJlYSwKLnVuZWRpdGFibGUtaW5wdXQgewogIG1hcmdpbi1sZWZ0OiAwOwp9CgouY29udHJvbHMtcm93IFtjbGFzcyo9InNwYW4iXSArIFtjbGFzcyo9InNwYW4iXSB7CiAgbWFyZ2luLWxlZnQ6IDIwcHg7Cn0KCmlucHV0LnNwYW4xMiwKdGV4dGFyZWEuc3BhbjEyLAoudW5lZGl0YWJsZS1pbnB1dC5zcGFuMTIgewogIHdpZHRoOiA5MjZweDsKfQoKaW5wdXQuc3BhbjExLAp0ZXh0YXJlYS5zcGFuMTEsCi51bmVkaXRhYmxlLWlucHV0LnNwYW4xMSB7CiAgd2lkdGg6IDg0NnB4Owp9CgppbnB1dC5zcGFuMTAsCnRleHRhcmVhLnNwYW4xMCwKLnVuZWRpdGFibGUtaW5wdXQuc3BhbjEwIHsKICB3aWR0aDogNzY2cHg7Cn0KCmlucHV0LnNwYW45LAp0ZXh0YXJlYS5zcGFuOSwKLnVuZWRpdGFibGUtaW5wdXQuc3BhbjkgewogIHdpZHRoOiA2ODZweDsKfQoKaW5wdXQuc3BhbjgsCnRleHRhcmVhLnNwYW44LAoudW5lZGl0YWJsZS1pbnB1dC5zcGFuOCB7CiAgd2lkdGg6IDYwNnB4Owp9CgppbnB1dC5zcGFuNywKdGV4dGFyZWEuc3BhbjcsCi51bmVkaXRhYmxlLWlucHV0LnNwYW43IHsKICB3aWR0aDogNTI2cHg7Cn0KCmlucHV0LnNwYW42LAp0ZXh0YXJlYS5zcGFuNiwKLnVuZWRpdGFibGUtaW5wdXQuc3BhbjYgewogIHdpZHRoOiA0NDZweDsKfQoKaW5wdXQuc3BhbjUsCnRleHRhcmVhLnNwYW41LAoudW5lZGl0YWJsZS1pbnB1dC5zcGFuNSB7CiAgd2lkdGg6IDM2NnB4Owp9CgppbnB1dC5zcGFuNCwKdGV4dGFyZWEuc3BhbjQsCi51bmVkaXRhYmxlLWlucHV0LnNwYW40IHsKICB3aWR0aDogMjg2cHg7Cn0KCmlucHV0LnNwYW4zLAp0ZXh0YXJlYS5zcGFuMywKLnVuZWRpdGFibGUtaW5wdXQuc3BhbjMgewogIHdpZHRoOiAyMDZweDsKfQoKaW5wdXQuc3BhbjIsCnRleHRhcmVhLnNwYW4yLAoudW5lZGl0YWJsZS1pbnB1dC5zcGFuMiB7CiAgd2lkdGg6IDEyNnB4Owp9CgppbnB1dC5zcGFuMSwKdGV4dGFyZWEuc3BhbjEsCi51bmVkaXRhYmxlLWlucHV0LnNwYW4xIHsKICB3aWR0aDogNDZweDsKfQoKLmNvbnRyb2xzLXJvdyB7CiAgKnpvb206IDE7Cn0KCi5jb250cm9scy1yb3c6YmVmb3JlLAouY29udHJvbHMtcm93OmFmdGVyIHsKICBkaXNwbGF5OiB0YWJsZTsKICBsaW5lLWhlaWdodDogMDsKICBjb250ZW50OiAiIjsKfQoKLmNvbnRyb2xzLXJvdzphZnRlciB7CiAgY2xlYXI6IGJvdGg7Cn0KCi5jb250cm9scy1yb3cgW2NsYXNzKj0ic3BhbiJdLAoucm93LWZsdWlkIC5jb250cm9scy1yb3cgW2NsYXNzKj0ic3BhbiJdIHsKICBmbG9hdDogbGVmdDsKfQoKLmNvbnRyb2xzLXJvdyAuY2hlY2tib3hbY2xhc3MqPSJzcGFuIl0sCi5jb250cm9scy1yb3cgLnJhZGlvW2NsYXNzKj0ic3BhbiJdIHsKICBwYWRkaW5nLXRvcDogNXB4Owp9CgppbnB1dFtkaXNhYmxlZF0sCnNlbGVjdFtkaXNhYmxlZF0sCnRleHRhcmVhW2Rpc2FibGVkXSwKaW5wdXRbcmVhZG9ubHldLApzZWxlY3RbcmVhZG9ubHldLAp0ZXh0YXJlYVtyZWFkb25seV0gewogIGN1cnNvcjogbm90LWFsbG93ZWQ7CiAgYmFja2dyb3VuZC1jb2xvcjogI2VlZWVlZTsKfQoKaW5wdXRbdHlwZT0icmFkaW8iXVtkaXNhYmxlZF0sCmlucHV0W3R5cGU9ImNoZWNrYm94Il1bZGlzYWJsZWRdLAppbnB1dFt0eXBlPSJyYWRpbyJdW3JlYWRvbmx5XSwKaW5wdXRbdHlwZT0iY2hlY2tib3giXVtyZWFkb25seV0gewogIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50Owp9CgouY29udHJvbC1ncm91cC53YXJuaW5nIC5jb250cm9sLWxhYmVsLAouY29udHJvbC1ncm91cC53YXJuaW5nIC5oZWxwLWJsb2NrLAouY29udHJvbC1ncm91cC53YXJuaW5nIC5oZWxwLWlubGluZSB7CiAgY29sb3I6ICNjMDk4NTM7Cn0KCi5jb250cm9sLWdyb3VwLndhcm5pbmcgLmNoZWNrYm94LAouY29udHJvbC1ncm91cC53YXJuaW5nIC5yYWRpbywKLmNvbnRyb2wtZ3JvdXAud2FybmluZyBpbnB1dCwKLmNvbnRyb2wtZ3JvdXAud2FybmluZyBzZWxlY3QsCi5jb250cm9sLWdyb3VwLndhcm5pbmcgdGV4dGFyZWEgewogIGNvbG9yOiAjYzA5ODUzOwp9CgouY29udHJvbC1ncm91cC53YXJuaW5nIGlucHV0LAouY29udHJvbC1ncm91cC53YXJuaW5nIHNlbGVjdCwKLmNvbnRyb2wtZ3JvdXAud2FybmluZyB0ZXh0YXJlYSB7CiAgYm9yZGVyLWNvbG9yOiAjYzA5ODUzOwogIC13ZWJraXQtYm94LXNoYWRvdzogaW5zZXQgMCAxcHggMXB4IHJnYmEoMCwgMCwgMCwgMC4wNzUpOwogICAgIC1tb3otYm94LXNoYWRvdzogaW5zZXQgMCAxcHggMXB4IHJnYmEoMCwgMCwgMCwgMC4wNzUpOwogICAgICAgICAgYm94LXNoYWRvdzogaW5zZXQgMCAxcHggMXB4IHJnYmEoMCwgMCwgMCwgMC4wNzUpOwp9CgouY29udHJvbC1ncm91cC53YXJuaW5nIGlucHV0OmZvY3VzLAouY29udHJvbC1ncm91cC53YXJuaW5nIHNlbGVjdDpmb2N1cywKLmNvbnRyb2wtZ3JvdXAud2FybmluZyB0ZXh0YXJlYTpmb2N1cyB7CiAgYm9yZGVyLWNvbG9yOiAjYTQ3ZTNjOwogIC13ZWJraXQtYm94LXNoYWRvdzogaW5zZXQgMCAxcHggMXB4IHJnYmEoMCwgMCwgMCwgMC4wNzUpLCAwIDAgNnB4ICNkYmM1OWU7CiAgICAgLW1vei1ib3gtc2hhZG93OiBpbnNldCAwIDFweCAxcHggcmdiYSgwLCAwLCAwLCAwLjA3NSksIDAgMCA2cHggI2RiYzU5ZTsKICAgICAgICAgIGJveC1zaGFkb3c6IGluc2V0IDAgMXB4IDFweCByZ2JhKDAsIDAsIDAsIDAuMDc1KSwgMCAwIDZweCAjZGJjNTllOwp9CgouY29udHJvbC1ncm91cC53YXJuaW5nIC5pbnB1dC1wcmVwZW5kIC5hZGQtb24sCi5jb250cm9sLWdyb3VwLndhcm5pbmcgLmlucHV0LWFwcGVuZCAuYWRkLW9uIHsKICBjb2xvcjogI2MwOTg1MzsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmNmOGUzOwogIGJvcmRlci1jb2xvcjogI2MwOTg1MzsKfQoKLmNvbnRyb2wtZ3JvdXAuZXJyb3IgLmNvbnRyb2wtbGFiZWwsCi5jb250cm9sLWdyb3VwLmVycm9yIC5oZWxwLWJsb2NrLAouY29udHJvbC1ncm91cC5lcnJvciAuaGVscC1pbmxpbmUgewogIGNvbG9yOiAjYjk0YTQ4Owp9CgouY29udHJvbC1ncm91cC5lcnJvciAuY2hlY2tib3gsCi5jb250cm9sLWdyb3VwLmVycm9yIC5yYWRpbywKLmNvbnRyb2wtZ3JvdXAuZXJyb3IgaW5wdXQsCi5jb250cm9sLWdyb3VwLmVycm9yIHNlbGVjdCwKLmNvbnRyb2wtZ3JvdXAuZXJyb3IgdGV4dGFyZWEgewogIGNvbG9yOiAjYjk0YTQ4Owp9CgouY29udHJvbC1ncm91cC5lcnJvciBpbnB1dCwKLmNvbnRyb2wtZ3JvdXAuZXJyb3Igc2VsZWN0LAouY29udHJvbC1ncm91cC5lcnJvciB0ZXh0YXJlYSB7CiAgYm9yZGVyLWNvbG9yOiAjYjk0YTQ4OwogIC13ZWJraXQtYm94LXNoYWRvdzogaW5zZXQgMCAxcHggMXB4IHJnYmEoMCwgMCwgMCwgMC4wNzUpOwogICAgIC1tb3otYm94LXNoYWRvdzogaW5zZXQgMCAxcHggMXB4IHJnYmEoMCwgMCwgMCwgMC4wNzUpOwogICAgICAgICAgYm94LXNoYWRvdzogaW5zZXQgMCAxcHggMXB4IHJnYmEoMCwgMCwgMCwgMC4wNzUpOwp9CgouY29udHJvbC1ncm91cC5lcnJvciBpbnB1dDpmb2N1cywKLmNvbnRyb2wtZ3JvdXAuZXJyb3Igc2VsZWN0OmZvY3VzLAouY29udHJvbC1ncm91cC5lcnJvciB0ZXh0YXJlYTpmb2N1cyB7CiAgYm9yZGVyLWNvbG9yOiAjOTUzYjM5OwogIC13ZWJraXQtYm94LXNoYWRvdzogaW5zZXQgMCAxcHggMXB4IHJnYmEoMCwgMCwgMCwgMC4wNzUpLCAwIDAgNnB4ICNkNTkzOTI7CiAgICAgLW1vei1ib3gtc2hhZG93OiBpbnNldCAwIDFweCAxcHggcmdiYSgwLCAwLCAwLCAwLjA3NSksIDAgMCA2cHggI2Q1OTM5MjsKICAgICAgICAgIGJveC1zaGFkb3c6IGluc2V0IDAgMXB4IDFweCByZ2JhKDAsIDAsIDAsIDAuMDc1KSwgMCAwIDZweCAjZDU5MzkyOwp9CgouY29udHJvbC1ncm91cC5lcnJvciAuaW5wdXQtcHJlcGVuZCAuYWRkLW9uLAouY29udHJvbC1ncm91cC5lcnJvciAuaW5wdXQtYXBwZW5kIC5hZGQtb24gewogIGNvbG9yOiAjYjk0YTQ4OwogIGJhY2tncm91bmQtY29sb3I6ICNmMmRlZGU7CiAgYm9yZGVyLWNvbG9yOiAjYjk0YTQ4Owp9CgouY29udHJvbC1ncm91cC5zdWNjZXNzIC5jb250cm9sLWxhYmVsLAouY29udHJvbC1ncm91cC5zdWNjZXNzIC5oZWxwLWJsb2NrLAouY29udHJvbC1ncm91cC5zdWNjZXNzIC5oZWxwLWlubGluZSB7CiAgY29sb3I6ICM0Njg4NDc7Cn0KCi5jb250cm9sLWdyb3VwLnN1Y2Nlc3MgLmNoZWNrYm94LAouY29udHJvbC1ncm91cC5zdWNjZXNzIC5yYWRpbywKLmNvbnRyb2wtZ3JvdXAuc3VjY2VzcyBpbnB1dCwKLmNvbnRyb2wtZ3JvdXAuc3VjY2VzcyBzZWxlY3QsCi5jb250cm9sLWdyb3VwLnN1Y2Nlc3MgdGV4dGFyZWEgewogIGNvbG9yOiAjNDY4ODQ3Owp9CgouY29udHJvbC1ncm91cC5zdWNjZXNzIGlucHV0LAouY29udHJvbC1ncm91cC5zdWNjZXNzIHNlbGVjdCwKLmNvbnRyb2wtZ3JvdXAuc3VjY2VzcyB0ZXh0YXJlYSB7CiAgYm9yZGVyLWNvbG9yOiAjNDY4ODQ3OwogIC13ZWJraXQtYm94LXNoYWRvdzogaW5zZXQgMCAxcHggMXB4IHJnYmEoMCwgMCwgMCwgMC4wNzUpOwogICAgIC1tb3otYm94LXNoYWRvdzogaW5zZXQgMCAxcHggMXB4IHJnYmEoMCwgMCwgMCwgMC4wNzUpOwogICAgICAgICAgYm94LXNoYWRvdzogaW5zZXQgMCAxcHggMXB4IHJnYmEoMCwgMCwgMCwgMC4wNzUpOwp9CgouY29udHJvbC1ncm91cC5zdWNjZXNzIGlucHV0OmZvY3VzLAouY29udHJvbC1ncm91cC5zdWNjZXNzIHNlbGVjdDpmb2N1cywKLmNvbnRyb2wtZ3JvdXAuc3VjY2VzcyB0ZXh0YXJlYTpmb2N1cyB7CiAgYm9yZGVyLWNvbG9yOiAjMzU2NjM1OwogIC13ZWJraXQtYm94LXNoYWRvdzogaW5zZXQgMCAxcHggMXB4IHJnYmEoMCwgMCwgMCwgMC4wNzUpLCAwIDAgNnB4ICM3YWJhN2I7CiAgICAgLW1vei1ib3gtc2hhZG93OiBpbnNldCAwIDFweCAxcHggcmdiYSgwLCAwLCAwLCAwLjA3NSksIDAgMCA2cHggIzdhYmE3YjsKICAgICAgICAgIGJveC1zaGFkb3c6IGluc2V0IDAgMXB4IDFweCByZ2JhKDAsIDAsIDAsIDAuMDc1KSwgMCAwIDZweCAjN2FiYTdiOwp9CgouY29udHJvbC1ncm91cC5zdWNjZXNzIC5pbnB1dC1wcmVwZW5kIC5hZGQtb24sCi5jb250cm9sLWdyb3VwLnN1Y2Nlc3MgLmlucHV0LWFwcGVuZCAuYWRkLW9uIHsKICBjb2xvcjogIzQ2ODg0NzsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZGZmMGQ4OwogIGJvcmRlci1jb2xvcjogIzQ2ODg0NzsKfQoKLmNvbnRyb2wtZ3JvdXAuaW5mbyAuY29udHJvbC1sYWJlbCwKLmNvbnRyb2wtZ3JvdXAuaW5mbyAuaGVscC1ibG9jaywKLmNvbnRyb2wtZ3JvdXAuaW5mbyAuaGVscC1pbmxpbmUgewogIGNvbG9yOiAjM2E4N2FkOwp9CgouY29udHJvbC1ncm91cC5pbmZvIC5jaGVja2JveCwKLmNvbnRyb2wtZ3JvdXAuaW5mbyAucmFkaW8sCi5jb250cm9sLWdyb3VwLmluZm8gaW5wdXQsCi5jb250cm9sLWdyb3VwLmluZm8gc2VsZWN0LAouY29udHJvbC1ncm91cC5pbmZvIHRleHRhcmVhIHsKICBjb2xvcjogIzNhODdhZDsKfQoKLmNvbnRyb2wtZ3JvdXAuaW5mbyBpbnB1dCwKLmNvbnRyb2wtZ3JvdXAuaW5mbyBzZWxlY3QsCi5jb250cm9sLWdyb3VwLmluZm8gdGV4dGFyZWEgewogIGJvcmRlci1jb2xvcjogIzNhODdhZDsKICAtd2Via2l0LWJveC1zaGFkb3c6IGluc2V0IDAgMXB4IDFweCByZ2JhKDAsIDAsIDAsIDAuMDc1KTsKICAgICAtbW96LWJveC1zaGFkb3c6IGluc2V0IDAgMXB4IDFweCByZ2JhKDAsIDAsIDAsIDAuMDc1KTsKICAgICAgICAgIGJveC1zaGFkb3c6IGluc2V0IDAgMXB4IDFweCByZ2JhKDAsIDAsIDAsIDAuMDc1KTsKfQoKLmNvbnRyb2wtZ3JvdXAuaW5mbyBpbnB1dDpmb2N1cywKLmNvbnRyb2wtZ3JvdXAuaW5mbyBzZWxlY3Q6Zm9jdXMsCi5jb250cm9sLWdyb3VwLmluZm8gdGV4dGFyZWE6Zm9jdXMgewogIGJvcmRlci1jb2xvcjogIzJkNjk4NzsKICAtd2Via2l0LWJveC1zaGFkb3c6IGluc2V0IDAgMXB4IDFweCByZ2JhKDAsIDAsIDAsIDAuMDc1KSwgMCAwIDZweCAjN2FiNWQzOwogICAgIC1tb3otYm94LXNoYWRvdzogaW5zZXQgMCAxcHggMXB4IHJnYmEoMCwgMCwgMCwgMC4wNzUpLCAwIDAgNnB4ICM3YWI1ZDM7CiAgICAgICAgICBib3gtc2hhZG93OiBpbnNldCAwIDFweCAxcHggcmdiYSgwLCAwLCAwLCAwLjA3NSksIDAgMCA2cHggIzdhYjVkMzsKfQoKLmNvbnRyb2wtZ3JvdXAuaW5mbyAuaW5wdXQtcHJlcGVuZCAuYWRkLW9uLAouY29udHJvbC1ncm91cC5pbmZvIC5pbnB1dC1hcHBlbmQgLmFkZC1vbiB7CiAgY29sb3I6ICMzYTg3YWQ7CiAgYmFja2dyb3VuZC1jb2xvcjogI2Q5ZWRmNzsKICBib3JkZXItY29sb3I6ICMzYTg3YWQ7Cn0KCmlucHV0OmZvY3VzOmludmFsaWQsCnRleHRhcmVhOmZvY3VzOmludmFsaWQsCnNlbGVjdDpmb2N1czppbnZhbGlkIHsKICBjb2xvcjogI2I5NGE0ODsKICBib3JkZXItY29sb3I6ICNlZTVmNWI7Cn0KCmlucHV0OmZvY3VzOmludmFsaWQ6Zm9jdXMsCnRleHRhcmVhOmZvY3VzOmludmFsaWQ6Zm9jdXMsCnNlbGVjdDpmb2N1czppbnZhbGlkOmZvY3VzIHsKICBib3JkZXItY29sb3I6ICNlOTMyMmQ7CiAgLXdlYmtpdC1ib3gtc2hhZG93OiAwIDAgNnB4ICNmOGI5Yjc7CiAgICAgLW1vei1ib3gtc2hhZG93OiAwIDAgNnB4ICNmOGI5Yjc7CiAgICAgICAgICBib3gtc2hhZG93OiAwIDAgNnB4ICNmOGI5Yjc7Cn0KCi5mb3JtLWFjdGlvbnMgewogIHBhZGRpbmc6IDE5cHggMjBweCAyMHB4OwogIG1hcmdpbi10b3A6IDIwcHg7CiAgbWFyZ2luLWJvdHRvbTogMjBweDsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjVmNWY1OwogIGJvcmRlci10b3A6IDFweCBzb2xpZCAjZTVlNWU1OwogICp6b29tOiAxOwp9CgouZm9ybS1hY3Rpb25zOmJlZm9yZSwKLmZvcm0tYWN0aW9uczphZnRlciB7CiAgZGlzcGxheTogdGFibGU7CiAgbGluZS1oZWlnaHQ6IDA7CiAgY29udGVudDogIiI7Cn0KCi5mb3JtLWFjdGlvbnM6YWZ0ZXIgewogIGNsZWFyOiBib3RoOwp9CgouaGVscC1ibG9jaywKLmhlbHAtaW5saW5lIHsKICBjb2xvcjogIzU5NTk1OTsKfQoKLmhlbHAtYmxvY2sgewogIGRpc3BsYXk6IGJsb2NrOwogIG1hcmdpbi1ib3R0b206IDEwcHg7Cn0KCi5oZWxwLWlubGluZSB7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICpkaXNwbGF5OiBpbmxpbmU7CiAgcGFkZGluZy1sZWZ0OiA1cHg7CiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKICAqem9vbTogMTsKfQoKLmlucHV0LWFwcGVuZCwKLmlucHV0LXByZXBlbmQgewogIG1hcmdpbi1ib3R0b206IDVweDsKICBmb250LXNpemU6IDA7CiAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKfQoKLmlucHV0LWFwcGVuZCBpbnB1dCwKLmlucHV0LXByZXBlbmQgaW5wdXQsCi5pbnB1dC1hcHBlbmQgc2VsZWN0LAouaW5wdXQtcHJlcGVuZCBzZWxlY3QsCi5pbnB1dC1hcHBlbmQgLnVuZWRpdGFibGUtaW5wdXQsCi5pbnB1dC1wcmVwZW5kIC51bmVkaXRhYmxlLWlucHV0LAouaW5wdXQtYXBwZW5kIC5kcm9wZG93bi1tZW51LAouaW5wdXQtcHJlcGVuZCAuZHJvcGRvd24tbWVudSB7CiAgZm9udC1zaXplOiAxNHB4Owp9CgouaW5wdXQtYXBwZW5kIGlucHV0LAouaW5wdXQtcHJlcGVuZCBpbnB1dCwKLmlucHV0LWFwcGVuZCBzZWxlY3QsCi5pbnB1dC1wcmVwZW5kIHNlbGVjdCwKLmlucHV0LWFwcGVuZCAudW5lZGl0YWJsZS1pbnB1dCwKLmlucHV0LXByZXBlbmQgLnVuZWRpdGFibGUtaW5wdXQgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICBtYXJnaW4tYm90dG9tOiAwOwogICptYXJnaW4tbGVmdDogMDsKICB2ZXJ0aWNhbC1hbGlnbjogdG9wOwogIC13ZWJraXQtYm9yZGVyLXJhZGl1czogMCA0cHggNHB4IDA7CiAgICAgLW1vei1ib3JkZXItcmFkaXVzOiAwIDRweCA0cHggMDsKICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDAgNHB4IDRweCAwOwp9CgouaW5wdXQtYXBwZW5kIGlucHV0OmZvY3VzLAouaW5wdXQtcHJlcGVuZCBpbnB1dDpmb2N1cywKLmlucHV0LWFwcGVuZCBzZWxlY3Q6Zm9jdXMsCi5pbnB1dC1wcmVwZW5kIHNlbGVjdDpmb2N1cywKLmlucHV0LWFwcGVuZCAudW5lZGl0YWJsZS1pbnB1dDpmb2N1cywKLmlucHV0LXByZXBlbmQgLnVuZWRpdGFibGUtaW5wdXQ6Zm9jdXMgewogIHotaW5kZXg6IDI7Cn0KCi5pbnB1dC1hcHBlbmQgLmFkZC1vbiwKLmlucHV0LXByZXBlbmQgLmFkZC1vbiB7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIHdpZHRoOiBhdXRvOwogIGhlaWdodDogMjBweDsKICBtaW4td2lkdGg6IDE2cHg7CiAgcGFkZGluZzogNHB4IDVweDsKICBmb250LXNpemU6IDE0cHg7CiAgZm9udC13ZWlnaHQ6IG5vcm1hbDsKICBsaW5lLWhlaWdodDogMjBweDsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgdGV4dC1zaGFkb3c6IDAgMXB4IDAgI2ZmZmZmZjsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVlZWVlOwogIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7Cn0KCi5pbnB1dC1hcHBlbmQgLmFkZC1vbiwKLmlucHV0LXByZXBlbmQgLmFkZC1vbiwKLmlucHV0LWFwcGVuZCAuYnRuLAouaW5wdXQtcHJlcGVuZCAuYnRuLAouaW5wdXQtYXBwZW5kIC5idG4tZ3JvdXAgPiAuZHJvcGRvd24tdG9nZ2xlLAouaW5wdXQtcHJlcGVuZCAuYnRuLWdyb3VwID4gLmRyb3Bkb3duLXRvZ2dsZSB7CiAgdmVydGljYWwtYWxpZ246IHRvcDsKICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDA7CiAgICAgLW1vei1ib3JkZXItcmFkaXVzOiAwOwogICAgICAgICAgYm9yZGVyLXJhZGl1czogMDsKfQoKLmlucHV0LWFwcGVuZCAuYWN0aXZlLAouaW5wdXQtcHJlcGVuZCAuYWN0aXZlIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjYTlkYmE5OwogIGJvcmRlci1jb2xvcjogIzQ2YTU0NjsKfQoKLmlucHV0LXByZXBlbmQgLmFkZC1vbiwKLmlucHV0LXByZXBlbmQgLmJ0biB7CiAgbWFyZ2luLXJpZ2h0OiAtMXB4Owp9CgouaW5wdXQtcHJlcGVuZCAuYWRkLW9uOmZpcnN0LWNoaWxkLAouaW5wdXQtcHJlcGVuZCAuYnRuOmZpcnN0LWNoaWxkIHsKICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDRweCAwIDAgNHB4OwogICAgIC1tb3otYm9yZGVyLXJhZGl1czogNHB4IDAgMCA0cHg7CiAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHggMCAwIDRweDsKfQoKLmlucHV0LWFwcGVuZCBpbnB1dCwKLmlucHV0LWFwcGVuZCBzZWxlY3QsCi5pbnB1dC1hcHBlbmQgLnVuZWRpdGFibGUtaW5wdXQgewogIC13ZWJraXQtYm9yZGVyLXJhZGl1czogNHB4IDAgMCA0cHg7CiAgICAgLW1vei1ib3JkZXItcmFkaXVzOiA0cHggMCAwIDRweDsKICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweCAwIDAgNHB4Owp9CgouaW5wdXQtYXBwZW5kIGlucHV0ICsgLmJ0bi1ncm91cCAuYnRuOmxhc3QtY2hpbGQsCi5pbnB1dC1hcHBlbmQgc2VsZWN0ICsgLmJ0bi1ncm91cCAuYnRuOmxhc3QtY2hpbGQsCi5pbnB1dC1hcHBlbmQgLnVuZWRpdGFibGUtaW5wdXQgKyAuYnRuLWdyb3VwIC5idG46bGFzdC1jaGlsZCB7CiAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiAwIDRweCA0cHggMDsKICAgICAtbW96LWJvcmRlci1yYWRpdXM6IDAgNHB4IDRweCAwOwogICAgICAgICAgYm9yZGVyLXJhZGl1czogMCA0cHggNHB4IDA7Cn0KCi5pbnB1dC1hcHBlbmQgLmFkZC1vbiwKLmlucHV0LWFwcGVuZCAuYnRuLAouaW5wdXQtYXBwZW5kIC5idG4tZ3JvdXAgewogIG1hcmdpbi1sZWZ0OiAtMXB4Owp9CgouaW5wdXQtYXBwZW5kIC5hZGQtb246bGFzdC1jaGlsZCwKLmlucHV0LWFwcGVuZCAuYnRuOmxhc3QtY2hpbGQsCi5pbnB1dC1hcHBlbmQgLmJ0bi1ncm91cDpsYXN0LWNoaWxkID4gLmRyb3Bkb3duLXRvZ2dsZSB7CiAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiAwIDRweCA0cHggMDsKICAgICAtbW96LWJvcmRlci1yYWRpdXM6IDAgNHB4IDRweCAwOwogICAgICAgICAgYm9yZGVyLXJhZGl1czogMCA0cHggNHB4IDA7Cn0KCi5pbnB1dC1wcmVwZW5kLmlucHV0LWFwcGVuZCBpbnB1dCwKLmlucHV0LXByZXBlbmQuaW5wdXQtYXBwZW5kIHNlbGVjdCwKLmlucHV0LXByZXBlbmQuaW5wdXQtYXBwZW5kIC51bmVkaXRhYmxlLWlucHV0IHsKICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDA7CiAgICAgLW1vei1ib3JkZXItcmFkaXVzOiAwOwogICAgICAgICAgYm9yZGVyLXJhZGl1czogMDsKfQoKLmlucHV0LXByZXBlbmQuaW5wdXQtYXBwZW5kIGlucHV0ICsgLmJ0bi1ncm91cCAuYnRuLAouaW5wdXQtcHJlcGVuZC5pbnB1dC1hcHBlbmQgc2VsZWN0ICsgLmJ0bi1ncm91cCAuYnRuLAouaW5wdXQtcHJlcGVuZC5pbnB1dC1hcHBlbmQgLnVuZWRpdGFibGUtaW5wdXQgKyAuYnRuLWdyb3VwIC5idG4gewogIC13ZWJraXQtYm9yZGVyLXJhZGl1czogMCA0cHggNHB4IDA7CiAgICAgLW1vei1ib3JkZXItcmFkaXVzOiAwIDRweCA0cHggMDsKICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDAgNHB4IDRweCAwOwp9CgouaW5wdXQtcHJlcGVuZC5pbnB1dC1hcHBlbmQgLmFkZC1vbjpmaXJzdC1jaGlsZCwKLmlucHV0LXByZXBlbmQuaW5wdXQtYXBwZW5kIC5idG46Zmlyc3QtY2hpbGQgewogIG1hcmdpbi1yaWdodDogLTFweDsKICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDRweCAwIDAgNHB4OwogICAgIC1tb3otYm9yZGVyLXJhZGl1czogNHB4IDAgMCA0cHg7CiAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHggMCAwIDRweDsKfQoKLmlucHV0LXByZXBlbmQuaW5wdXQtYXBwZW5kIC5hZGQtb246bGFzdC1jaGlsZCwKLmlucHV0LXByZXBlbmQuaW5wdXQtYXBwZW5kIC5idG46bGFzdC1jaGlsZCB7CiAgbWFyZ2luLWxlZnQ6IC0xcHg7CiAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiAwIDRweCA0cHggMDsKICAgICAtbW96LWJvcmRlci1yYWRpdXM6IDAgNHB4IDRweCAwOwogICAgICAgICAgYm9yZGVyLXJhZGl1czogMCA0cHggNHB4IDA7Cn0KCi5pbnB1dC1wcmVwZW5kLmlucHV0LWFwcGVuZCAuYnRuLWdyb3VwOmZpcnN0LWNoaWxkIHsKICBtYXJnaW4tbGVmdDogMDsKfQoKaW5wdXQuc2VhcmNoLXF1ZXJ5IHsKICBwYWRkaW5nLXJpZ2h0OiAxNHB4OwogIHBhZGRpbmctcmlnaHQ6IDRweCBcOTsKICBwYWRkaW5nLWxlZnQ6IDE0cHg7CiAgcGFkZGluZy1sZWZ0OiA0cHggXDk7CiAgLyogSUU3LTggZG9lc24ndCBoYXZlIGJvcmRlci1yYWRpdXMsIHNvIGRvbid0IGluZGVudCB0aGUgcGFkZGluZyAqLwoKICBtYXJnaW4tYm90dG9tOiAwOwogIC13ZWJraXQtYm9yZGVyLXJhZGl1czogMTVweDsKICAgICAtbW96LWJvcmRlci1yYWRpdXM6IDE1cHg7CiAgICAgICAgICBib3JkZXItcmFkaXVzOiAxNXB4Owp9CgovKiBBbGxvdyBmb3IgaW5wdXQgcHJlcGVuZC9hcHBlbmQgaW4gc2VhcmNoIGZvcm1zICovCgouZm9ybS1zZWFyY2ggLmlucHV0LWFwcGVuZCAuc2VhcmNoLXF1ZXJ5LAouZm9ybS1zZWFyY2ggLmlucHV0LXByZXBlbmQgLnNlYXJjaC1xdWVyeSB7CiAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiAwOwogICAgIC1tb3otYm9yZGVyLXJhZGl1czogMDsKICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDA7Cn0KCi5mb3JtLXNlYXJjaCAuaW5wdXQtYXBwZW5kIC5zZWFyY2gtcXVlcnkgewogIC13ZWJraXQtYm9yZGVyLXJhZGl1czogMTRweCAwIDAgMTRweDsKICAgICAtbW96LWJvcmRlci1yYWRpdXM6IDE0cHggMCAwIDE0cHg7CiAgICAgICAgICBib3JkZXItcmFkaXVzOiAxNHB4IDAgMCAxNHB4Owp9CgouZm9ybS1zZWFyY2ggLmlucHV0LWFwcGVuZCAuYnRuIHsKICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDAgMTRweCAxNHB4IDA7CiAgICAgLW1vei1ib3JkZXItcmFkaXVzOiAwIDE0cHggMTRweCAwOwogICAgICAgICAgYm9yZGVyLXJhZGl1czogMCAxNHB4IDE0cHggMDsKfQoKLmZvcm0tc2VhcmNoIC5pbnB1dC1wcmVwZW5kIC5zZWFyY2gtcXVlcnkgewogIC13ZWJraXQtYm9yZGVyLXJhZGl1czogMCAxNHB4IDE0cHggMDsKICAgICAtbW96LWJvcmRlci1yYWRpdXM6IDAgMTRweCAxNHB4IDA7CiAgICAgICAgICBib3JkZXItcmFkaXVzOiAwIDE0cHggMTRweCAwOwp9CgouZm9ybS1zZWFyY2ggLmlucHV0LXByZXBlbmQgLmJ0biB7CiAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiAxNHB4IDAgMCAxNHB4OwogICAgIC1tb3otYm9yZGVyLXJhZGl1czogMTRweCAwIDAgMTRweDsKICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDE0cHggMCAwIDE0cHg7Cn0KCi5mb3JtLXNlYXJjaCBpbnB1dCwKLmZvcm0taW5saW5lIGlucHV0LAouZm9ybS1ob3Jpem9udGFsIGlucHV0LAouZm9ybS1zZWFyY2ggdGV4dGFyZWEsCi5mb3JtLWlubGluZSB0ZXh0YXJlYSwKLmZvcm0taG9yaXpvbnRhbCB0ZXh0YXJlYSwKLmZvcm0tc2VhcmNoIHNlbGVjdCwKLmZvcm0taW5saW5lIHNlbGVjdCwKLmZvcm0taG9yaXpvbnRhbCBzZWxlY3QsCi5mb3JtLXNlYXJjaCAuaGVscC1pbmxpbmUsCi5mb3JtLWlubGluZSAuaGVscC1pbmxpbmUsCi5mb3JtLWhvcml6b250YWwgLmhlbHAtaW5saW5lLAouZm9ybS1zZWFyY2ggLnVuZWRpdGFibGUtaW5wdXQsCi5mb3JtLWlubGluZSAudW5lZGl0YWJsZS1pbnB1dCwKLmZvcm0taG9yaXpvbnRhbCAudW5lZGl0YWJsZS1pbnB1dCwKLmZvcm0tc2VhcmNoIC5pbnB1dC1wcmVwZW5kLAouZm9ybS1pbmxpbmUgLmlucHV0LXByZXBlbmQsCi5mb3JtLWhvcml6b250YWwgLmlucHV0LXByZXBlbmQsCi5mb3JtLXNlYXJjaCAuaW5wdXQtYXBwZW5kLAouZm9ybS1pbmxpbmUgLmlucHV0LWFwcGVuZCwKLmZvcm0taG9yaXpvbnRhbCAuaW5wdXQtYXBwZW5kIHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgKmRpc3BsYXk6IGlubGluZTsKICBtYXJnaW4tYm90dG9tOiAwOwogIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgKnpvb206IDE7Cn0KCi5mb3JtLXNlYXJjaCAuaGlkZSwKLmZvcm0taW5saW5lIC5oaWRlLAouZm9ybS1ob3Jpem9udGFsIC5oaWRlIHsKICBkaXNwbGF5OiBub25lOwp9CgouZm9ybS1zZWFyY2ggbGFiZWwsCi5mb3JtLWlubGluZSBsYWJlbCwKLmZvcm0tc2VhcmNoIC5idG4tZ3JvdXAsCi5mb3JtLWlubGluZSAuYnRuLWdyb3VwIHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Cn0KCi5mb3JtLXNlYXJjaCAuaW5wdXQtYXBwZW5kLAouZm9ybS1pbmxpbmUgLmlucHV0LWFwcGVuZCwKLmZvcm0tc2VhcmNoIC5pbnB1dC1wcmVwZW5kLAouZm9ybS1pbmxpbmUgLmlucHV0LXByZXBlbmQgewogIG1hcmdpbi1ib3R0b206IDA7Cn0KCi5mb3JtLXNlYXJjaCAucmFkaW8sCi5mb3JtLXNlYXJjaCAuY2hlY2tib3gsCi5mb3JtLWlubGluZSAucmFkaW8sCi5mb3JtLWlubGluZSAuY2hlY2tib3ggewogIHBhZGRpbmctbGVmdDogMDsKICBtYXJnaW4tYm90dG9tOiAwOwogIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7Cn0KCi5mb3JtLXNlYXJjaCAucmFkaW8gaW5wdXRbdHlwZT0icmFkaW8iXSwKLmZvcm0tc2VhcmNoIC5jaGVja2JveCBpbnB1dFt0eXBlPSJjaGVja2JveCJdLAouZm9ybS1pbmxpbmUgLnJhZGlvIGlucHV0W3R5cGU9InJhZGlvIl0sCi5mb3JtLWlubGluZSAuY2hlY2tib3ggaW5wdXRbdHlwZT0iY2hlY2tib3giXSB7CiAgZmxvYXQ6IGxlZnQ7CiAgbWFyZ2luLXJpZ2h0OiAzcHg7CiAgbWFyZ2luLWxlZnQ6IDA7Cn0KCi5jb250cm9sLWdyb3VwIHsKICBtYXJnaW4tYm90dG9tOiAxMHB4Owp9CgpsZWdlbmQgKyAuY29udHJvbC1ncm91cCB7CiAgbWFyZ2luLXRvcDogMjBweDsKICAtd2Via2l0LW1hcmdpbi10b3AtY29sbGFwc2U6IHNlcGFyYXRlOwp9CgouZm9ybS1ob3Jpem9udGFsIC5jb250cm9sLWdyb3VwIHsKICBtYXJnaW4tYm90dG9tOiAyMHB4OwogICp6b29tOiAxOwp9CgouZm9ybS1ob3Jpem9udGFsIC5jb250cm9sLWdyb3VwOmJlZm9yZSwKLmZvcm0taG9yaXpvbnRhbCAuY29udHJvbC1ncm91cDphZnRlciB7CiAgZGlzcGxheTogdGFibGU7CiAgbGluZS1oZWlnaHQ6IDA7CiAgY29udGVudDogIiI7Cn0KCi5mb3JtLWhvcml6b250YWwgLmNvbnRyb2wtZ3JvdXA6YWZ0ZXIgewogIGNsZWFyOiBib3RoOwp9CgouZm9ybS1ob3Jpem9udGFsIC5jb250cm9sLWxhYmVsIHsKICBmbG9hdDogbGVmdDsKICB3aWR0aDogMTYwcHg7CiAgcGFkZGluZy10b3A6IDVweDsKICB0ZXh0LWFsaWduOiByaWdodDsKfQoKLmZvcm0taG9yaXpvbnRhbCAuY29udHJvbHMgewogICpkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgKnBhZGRpbmctbGVmdDogMjBweDsKICBtYXJnaW4tbGVmdDogMTgwcHg7CiAgKm1hcmdpbi1sZWZ0OiAwOwp9CgouZm9ybS1ob3Jpem9udGFsIC5jb250cm9sczpmaXJzdC1jaGlsZCB7CiAgKnBhZGRpbmctbGVmdDogMTgwcHg7Cn0KCi5mb3JtLWhvcml6b250YWwgLmhlbHAtYmxvY2sgewogIG1hcmdpbi1ib3R0b206IDA7Cn0KCi5mb3JtLWhvcml6b250YWwgaW5wdXQgKyAuaGVscC1ibG9jaywKLmZvcm0taG9yaXpvbnRhbCBzZWxlY3QgKyAuaGVscC1ibG9jaywKLmZvcm0taG9yaXpvbnRhbCB0ZXh0YXJlYSArIC5oZWxwLWJsb2NrLAouZm9ybS1ob3Jpem9udGFsIC51bmVkaXRhYmxlLWlucHV0ICsgLmhlbHAtYmxvY2ssCi5mb3JtLWhvcml6b250YWwgLmlucHV0LXByZXBlbmQgKyAuaGVscC1ibG9jaywKLmZvcm0taG9yaXpvbnRhbCAuaW5wdXQtYXBwZW5kICsgLmhlbHAtYmxvY2sgewogIG1hcmdpbi10b3A6IDEwcHg7Cn0KCi5mb3JtLWhvcml6b250YWwgLmZvcm0tYWN0aW9ucyB7CiAgcGFkZGluZy1sZWZ0OiAxODBweDsKfQoKdGFibGUgewogIG1heC13aWR0aDogMTAwJTsKICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsKICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOwogIGJvcmRlci1zcGFjaW5nOiAwOwp9CgoudGFibGUgewogIHdpZHRoOiAxMDAlOwogIG1hcmdpbi1ib3R0b206IDIwcHg7Cn0KCi50YWJsZSB0aCwKLnRhYmxlIHRkIHsKICBwYWRkaW5nOiA4cHg7CiAgbGluZS1oZWlnaHQ6IDIwcHg7CiAgdGV4dC1hbGlnbjogbGVmdDsKICB2ZXJ0aWNhbC1hbGlnbjogdG9wOwogIGJvcmRlci10b3A6IDFweCBzb2xpZCAjZGRkZGRkOwp9CgoudGFibGUgdGggewogIGZvbnQtd2VpZ2h0OiBib2xkOwp9CgoudGFibGUgdGhlYWQgdGggewogIHZlcnRpY2FsLWFsaWduOiBib3R0b207Cn0KCi50YWJsZSBjYXB0aW9uICsgdGhlYWQgdHI6Zmlyc3QtY2hpbGQgdGgsCi50YWJsZSBjYXB0aW9uICsgdGhlYWQgdHI6Zmlyc3QtY2hpbGQgdGQsCi50YWJsZSBjb2xncm91cCArIHRoZWFkIHRyOmZpcnN0LWNoaWxkIHRoLAoudGFibGUgY29sZ3JvdXAgKyB0aGVhZCB0cjpmaXJzdC1jaGlsZCB0ZCwKLnRhYmxlIHRoZWFkOmZpcnN0LWNoaWxkIHRyOmZpcnN0LWNoaWxkIHRoLAoudGFibGUgdGhlYWQ6Zmlyc3QtY2hpbGQgdHI6Zmlyc3QtY2hpbGQgdGQgewogIGJvcmRlci10b3A6IDA7Cn0KCi50YWJsZSB0Ym9keSArIHRib2R5IHsKICBib3JkZXItdG9wOiAycHggc29saWQgI2RkZGRkZDsKfQoKLnRhYmxlIC50YWJsZSB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjsKfQoKLnRhYmxlLWNvbmRlbnNlZCB0aCwKLnRhYmxlLWNvbmRlbnNlZCB0ZCB7CiAgcGFkZGluZzogNHB4IDVweDsKfQoKLnRhYmxlLWJvcmRlcmVkIHsKICBib3JkZXI6IDFweCBzb2xpZCAjZGRkZGRkOwogIGJvcmRlci1jb2xsYXBzZTogc2VwYXJhdGU7CiAgKmJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7CiAgYm9yZGVyLWxlZnQ6IDA7CiAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiA0cHg7CiAgICAgLW1vei1ib3JkZXItcmFkaXVzOiA0cHg7CiAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7Cn0KCi50YWJsZS1ib3JkZXJlZCB0aCwKLnRhYmxlLWJvcmRlcmVkIHRkIHsKICBib3JkZXItbGVmdDogMXB4IHNvbGlkICNkZGRkZGQ7Cn0KCi50YWJsZS1ib3JkZXJlZCBjYXB0aW9uICsgdGhlYWQgdHI6Zmlyc3QtY2hpbGQgdGgsCi50YWJsZS1ib3JkZXJlZCBjYXB0aW9uICsgdGJvZHkgdHI6Zmlyc3QtY2hpbGQgdGgsCi50YWJsZS1ib3JkZXJlZCBjYXB0aW9uICsgdGJvZHkgdHI6Zmlyc3QtY2hpbGQgdGQsCi50YWJsZS1ib3JkZXJlZCBjb2xncm91cCArIHRoZWFkIHRyOmZpcnN0LWNoaWxkIHRoLAoudGFibGUtYm9yZGVyZWQgY29sZ3JvdXAgKyB0Ym9keSB0cjpmaXJzdC1jaGlsZCB0aCwKLnRhYmxlLWJvcmRlcmVkIGNvbGdyb3VwICsgdGJvZHkgdHI6Zmlyc3QtY2hpbGQgdGQsCi50YWJsZS1ib3JkZXJlZCB0aGVhZDpmaXJzdC1jaGlsZCB0cjpmaXJzdC1jaGlsZCB0aCwKLnRhYmxlLWJvcmRlcmVkIHRib2R5OmZpcnN0LWNoaWxkIHRyOmZpcnN0LWNoaWxkIHRoLAoudGFibGUtYm9yZGVyZWQgdGJvZHk6Zmlyc3QtY2hpbGQgdHI6Zmlyc3QtY2hpbGQgdGQgewogIGJvcmRlci10b3A6IDA7Cn0KCi50YWJsZS1ib3JkZXJlZCB0aGVhZDpmaXJzdC1jaGlsZCB0cjpmaXJzdC1jaGlsZCA+IHRoOmZpcnN0LWNoaWxkLAoudGFibGUtYm9yZGVyZWQgdGJvZHk6Zmlyc3QtY2hpbGQgdHI6Zmlyc3QtY2hpbGQgPiB0ZDpmaXJzdC1jaGlsZCB7CiAgLXdlYmtpdC1ib3JkZXItdG9wLWxlZnQtcmFkaXVzOiA0cHg7CiAgICAgICAgICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiA0cHg7CiAgLW1vei1ib3JkZXItcmFkaXVzLXRvcGxlZnQ6IDRweDsKfQoKLnRhYmxlLWJvcmRlcmVkIHRoZWFkOmZpcnN0LWNoaWxkIHRyOmZpcnN0LWNoaWxkID4gdGg6bGFzdC1jaGlsZCwKLnRhYmxlLWJvcmRlcmVkIHRib2R5OmZpcnN0LWNoaWxkIHRyOmZpcnN0LWNoaWxkID4gdGQ6bGFzdC1jaGlsZCB7CiAgLXdlYmtpdC1ib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogNHB4OwogICAgICAgICAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDRweDsKICAtbW96LWJvcmRlci1yYWRpdXMtdG9wcmlnaHQ6IDRweDsKfQoKLnRhYmxlLWJvcmRlcmVkIHRoZWFkOmxhc3QtY2hpbGQgdHI6bGFzdC1jaGlsZCA+IHRoOmZpcnN0LWNoaWxkLAoudGFibGUtYm9yZGVyZWQgdGJvZHk6bGFzdC1jaGlsZCB0cjpsYXN0LWNoaWxkID4gdGQ6Zmlyc3QtY2hpbGQsCi50YWJsZS1ib3JkZXJlZCB0Zm9vdDpsYXN0LWNoaWxkIHRyOmxhc3QtY2hpbGQgPiB0ZDpmaXJzdC1jaGlsZCB7CiAgLXdlYmtpdC1ib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiA0cHg7CiAgICAgICAgICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiA0cHg7CiAgLW1vei1ib3JkZXItcmFkaXVzLWJvdHRvbWxlZnQ6IDRweDsKfQoKLnRhYmxlLWJvcmRlcmVkIHRoZWFkOmxhc3QtY2hpbGQgdHI6bGFzdC1jaGlsZCA+IHRoOmxhc3QtY2hpbGQsCi50YWJsZS1ib3JkZXJlZCB0Ym9keTpsYXN0LWNoaWxkIHRyOmxhc3QtY2hpbGQgPiB0ZDpsYXN0LWNoaWxkLAoudGFibGUtYm9yZGVyZWQgdGZvb3Q6bGFzdC1jaGlsZCB0cjpsYXN0LWNoaWxkID4gdGQ6bGFzdC1jaGlsZCB7CiAgLXdlYmtpdC1ib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogNHB4OwogICAgICAgICAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDRweDsKICAtbW96LWJvcmRlci1yYWRpdXMtYm90dG9tcmlnaHQ6IDRweDsKfQoKLnRhYmxlLWJvcmRlcmVkIHRmb290ICsgdGJvZHk6bGFzdC1jaGlsZCB0cjpsYXN0LWNoaWxkIHRkOmZpcnN0LWNoaWxkIHsKICAtd2Via2l0LWJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDA7CiAgICAgICAgICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiAwOwogIC1tb3otYm9yZGVyLXJhZGl1cy1ib3R0b21sZWZ0OiAwOwp9CgoudGFibGUtYm9yZGVyZWQgdGZvb3QgKyB0Ym9keTpsYXN0LWNoaWxkIHRyOmxhc3QtY2hpbGQgdGQ6bGFzdC1jaGlsZCB7CiAgLXdlYmtpdC1ib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogMDsKICAgICAgICAgIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiAwOwogIC1tb3otYm9yZGVyLXJhZGl1cy1ib3R0b21yaWdodDogMDsKfQoKLnRhYmxlLWJvcmRlcmVkIGNhcHRpb24gKyB0aGVhZCB0cjpmaXJzdC1jaGlsZCB0aDpmaXJzdC1jaGlsZCwKLnRhYmxlLWJvcmRlcmVkIGNhcHRpb24gKyB0Ym9keSB0cjpmaXJzdC1jaGlsZCB0ZDpmaXJzdC1jaGlsZCwKLnRhYmxlLWJvcmRlcmVkIGNvbGdyb3VwICsgdGhlYWQgdHI6Zmlyc3QtY2hpbGQgdGg6Zmlyc3QtY2hpbGQsCi50YWJsZS1ib3JkZXJlZCBjb2xncm91cCArIHRib2R5IHRyOmZpcnN0LWNoaWxkIHRkOmZpcnN0LWNoaWxkIHsKICAtd2Via2l0LWJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDRweDsKICAgICAgICAgIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDRweDsKICAtbW96LWJvcmRlci1yYWRpdXMtdG9wbGVmdDogNHB4Owp9CgoudGFibGUtYm9yZGVyZWQgY2FwdGlvbiArIHRoZWFkIHRyOmZpcnN0LWNoaWxkIHRoOmxhc3QtY2hpbGQsCi50YWJsZS1ib3JkZXJlZCBjYXB0aW9uICsgdGJvZHkgdHI6Zmlyc3QtY2hpbGQgdGQ6bGFzdC1jaGlsZCwKLnRhYmxlLWJvcmRlcmVkIGNvbGdyb3VwICsgdGhlYWQgdHI6Zmlyc3QtY2hpbGQgdGg6bGFzdC1jaGlsZCwKLnRhYmxlLWJvcmRlcmVkIGNvbGdyb3VwICsgdGJvZHkgdHI6Zmlyc3QtY2hpbGQgdGQ6bGFzdC1jaGlsZCB7CiAgLXdlYmtpdC1ib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogNHB4OwogICAgICAgICAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDRweDsKICAtbW96LWJvcmRlci1yYWRpdXMtdG9wcmlnaHQ6IDRweDsKfQoKLnRhYmxlLXN0cmlwZWQgdGJvZHkgPiB0cjpudGgtY2hpbGQob2RkKSA+IHRkLAoudGFibGUtc3RyaXBlZCB0Ym9keSA+IHRyOm50aC1jaGlsZChvZGQpID4gdGggewogIGJhY2tncm91bmQtY29sb3I6ICNmOWY5Zjk7Cn0KCi50YWJsZS1ob3ZlciB0Ym9keSB0cjpob3ZlciB0ZCwKLnRhYmxlLWhvdmVyIHRib2R5IHRyOmhvdmVyIHRoIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjVmNWY1Owp9Cgp0YWJsZSB0ZFtjbGFzcyo9InNwYW4iXSwKdGFibGUgdGhbY2xhc3MqPSJzcGFuIl0sCi5yb3ctZmx1aWQgdGFibGUgdGRbY2xhc3MqPSJzcGFuIl0sCi5yb3ctZmx1aWQgdGFibGUgdGhbY2xhc3MqPSJzcGFuIl0gewogIGRpc3BsYXk6IHRhYmxlLWNlbGw7CiAgZmxvYXQ6IG5vbmU7CiAgbWFyZ2luLWxlZnQ6IDA7Cn0KCi50YWJsZSB0ZC5zcGFuMSwKLnRhYmxlIHRoLnNwYW4xIHsKICBmbG9hdDogbm9uZTsKICB3aWR0aDogNDRweDsKICBtYXJnaW4tbGVmdDogMDsKfQoKLnRhYmxlIHRkLnNwYW4yLAoudGFibGUgdGguc3BhbjIgewogIGZsb2F0OiBub25lOwogIHdpZHRoOiAxMjRweDsKICBtYXJnaW4tbGVmdDogMDsKfQoKLnRhYmxlIHRkLnNwYW4zLAoudGFibGUgdGguc3BhbjMgewogIGZsb2F0OiBub25lOwogIHdpZHRoOiAyMDRweDsKICBtYXJnaW4tbGVmdDogMDsKfQoKLnRhYmxlIHRkLnNwYW40LAoudGFibGUgdGguc3BhbjQgewogIGZsb2F0OiBub25lOwogIHdpZHRoOiAyODRweDsKICBtYXJnaW4tbGVmdDogMDsKfQoKLnRhYmxlIHRkLnNwYW41LAoudGFibGUgdGguc3BhbjUgewogIGZsb2F0OiBub25lOwogIHdpZHRoOiAzNjRweDsKICBtYXJnaW4tbGVmdDogMDsKfQoKLnRhYmxlIHRkLnNwYW42LAoudGFibGUgdGguc3BhbjYgewogIGZsb2F0OiBub25lOwogIHdpZHRoOiA0NDRweDsKICBtYXJnaW4tbGVmdDogMDsKfQoKLnRhYmxlIHRkLnNwYW43LAoudGFibGUgdGguc3BhbjcgewogIGZsb2F0OiBub25lOwogIHdpZHRoOiA1MjRweDsKICBtYXJnaW4tbGVmdDogMDsKfQoKLnRhYmxlIHRkLnNwYW44LAoudGFibGUgdGguc3BhbjggewogIGZsb2F0OiBub25lOwogIHdpZHRoOiA2MDRweDsKICBtYXJnaW4tbGVmdDogMDsKfQoKLnRhYmxlIHRkLnNwYW45LAoudGFibGUgdGguc3BhbjkgewogIGZsb2F0OiBub25lOwogIHdpZHRoOiA2ODRweDsKICBtYXJnaW4tbGVmdDogMDsKfQoKLnRhYmxlIHRkLnNwYW4xMCwKLnRhYmxlIHRoLnNwYW4xMCB7CiAgZmxvYXQ6IG5vbmU7CiAgd2lkdGg6IDc2NHB4OwogIG1hcmdpbi1sZWZ0OiAwOwp9CgoudGFibGUgdGQuc3BhbjExLAoudGFibGUgdGguc3BhbjExIHsKICBmbG9hdDogbm9uZTsKICB3aWR0aDogODQ0cHg7CiAgbWFyZ2luLWxlZnQ6IDA7Cn0KCi50YWJsZSB0ZC5zcGFuMTIsCi50YWJsZSB0aC5zcGFuMTIgewogIGZsb2F0OiBub25lOwogIHdpZHRoOiA5MjRweDsKICBtYXJnaW4tbGVmdDogMDsKfQoKLnRhYmxlIHRib2R5IHRyLnN1Y2Nlc3MgdGQgewogIGJhY2tncm91bmQtY29sb3I6ICNkZmYwZDg7Cn0KCi50YWJsZSB0Ym9keSB0ci5lcnJvciB0ZCB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2YyZGVkZTsKfQoKLnRhYmxlIHRib2R5IHRyLndhcm5pbmcgdGQgewogIGJhY2tncm91bmQtY29sb3I6ICNmY2Y4ZTM7Cn0KCi50YWJsZSB0Ym9keSB0ci5pbmZvIHRkIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZDllZGY3Owp9CgoudGFibGUtaG92ZXIgdGJvZHkgdHIuc3VjY2Vzczpob3ZlciB0ZCB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2QwZTljNjsKfQoKLnRhYmxlLWhvdmVyIHRib2R5IHRyLmVycm9yOmhvdmVyIHRkIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWJjY2NjOwp9CgoudGFibGUtaG92ZXIgdGJvZHkgdHIud2FybmluZzpob3ZlciB0ZCB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZhZjJjYzsKfQoKLnRhYmxlLWhvdmVyIHRib2R5IHRyLmluZm86aG92ZXIgdGQgewogIGJhY2tncm91bmQtY29sb3I6ICNjNGUzZjM7Cn0KCltjbGFzc149Imljb24tIl0sCltjbGFzcyo9IiBpY29uLSJdIHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgd2lkdGg6IDE0cHg7CiAgaGVpZ2h0OiAxNHB4OwogIG1hcmdpbi10b3A6IDFweDsKICAqbWFyZ2luLXJpZ2h0OiAuM2VtOwogIGxpbmUtaGVpZ2h0OiAxNHB4OwogIHZlcnRpY2FsLWFsaWduOiB0ZXh0LXRvcDsKICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoIi4uL2ltZy9nbHlwaGljb25zLWhhbGZsaW5ncy5wbmciKTsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAxNHB4IDE0cHg7CiAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDsKfQoKLyogV2hpdGUgaWNvbnMgd2l0aCBvcHRpb25hbCBjbGFzcywgb3Igb24gaG92ZXIvYWN0aXZlIHN0YXRlcyBvZiBjZXJ0YWluIGVsZW1lbnRzICovCgouaWNvbi13aGl0ZSwKLm5hdi1waWxscyA+IC5hY3RpdmUgPiBhID4gW2NsYXNzXj0iaWNvbi0iXSwKLm5hdi1waWxscyA+IC5hY3RpdmUgPiBhID4gW2NsYXNzKj0iIGljb24tIl0sCi5uYXYtbGlzdCA+IC5hY3RpdmUgPiBhID4gW2NsYXNzXj0iaWNvbi0iXSwKLm5hdi1saXN0ID4gLmFjdGl2ZSA+IGEgPiBbY2xhc3MqPSIgaWNvbi0iXSwKLm5hdmJhci1pbnZlcnNlIC5uYXYgPiAuYWN0aXZlID4gYSA+IFtjbGFzc149Imljb24tIl0sCi5uYXZiYXItaW52ZXJzZSAubmF2ID4gLmFjdGl2ZSA+IGEgPiBbY2xhc3MqPSIgaWNvbi0iXSwKLmRyb3Bkb3duLW1lbnUgPiBsaSA+IGE6aG92ZXIgPiBbY2xhc3NePSJpY29uLSJdLAouZHJvcGRvd24tbWVudSA+IGxpID4gYTpob3ZlciA+IFtjbGFzcyo9IiBpY29uLSJdLAouZHJvcGRvd24tbWVudSA+IC5hY3RpdmUgPiBhID4gW2NsYXNzXj0iaWNvbi0iXSwKLmRyb3Bkb3duLW1lbnUgPiAuYWN0aXZlID4gYSA+IFtjbGFzcyo9IiBpY29uLSJdLAouZHJvcGRvd24tc3VibWVudTpob3ZlciA+IGEgPiBbY2xhc3NePSJpY29uLSJdLAouZHJvcGRvd24tc3VibWVudTpob3ZlciA+IGEgPiBbY2xhc3MqPSIgaWNvbi0iXSB7CiAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCIuLi9pbWcvZ2x5cGhpY29ucy1oYWxmbGluZ3Mtd2hpdGUucG5nIik7Cn0KCi5pY29uLWdsYXNzIHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwICAgICAgMDsKfQoKLmljb24tbXVzaWMgewogIGJhY2tncm91bmQtcG9zaXRpb246IC0yNHB4IDA7Cn0KCi5pY29uLXNlYXJjaCB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTQ4cHggMDsKfQoKLmljb24tZW52ZWxvcGUgewogIGJhY2tncm91bmQtcG9zaXRpb246IC03MnB4IDA7Cn0KCi5pY29uLWhlYXJ0IHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtOTZweCAwOwp9CgouaWNvbi1zdGFyIHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTIwcHggMDsKfQoKLmljb24tc3Rhci1lbXB0eSB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE0NHB4IDA7Cn0KCi5pY29uLXVzZXIgewogIGJhY2tncm91bmQtcG9zaXRpb246IC0xNjhweCAwOwp9CgouaWNvbi1maWxtIHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTkycHggMDsKfQoKLmljb24tdGgtbGFyZ2UgewogIGJhY2tncm91bmQtcG9zaXRpb246IC0yMTZweCAwOwp9CgouaWNvbi10aCB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTI0MHB4IDA7Cn0KCi5pY29uLXRoLWxpc3QgewogIGJhY2tncm91bmQtcG9zaXRpb246IC0yNjRweCAwOwp9CgouaWNvbi1vayB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTI4OHB4IDA7Cn0KCi5pY29uLXJlbW92ZSB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTMxMnB4IDA7Cn0KCi5pY29uLXpvb20taW4gewogIGJhY2tncm91bmQtcG9zaXRpb246IC0zMzZweCAwOwp9CgouaWNvbi16b29tLW91dCB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTM2MHB4IDA7Cn0KCi5pY29uLW9mZiB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTM4NHB4IDA7Cn0KCi5pY29uLXNpZ25hbCB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTQwOHB4IDA7Cn0KCi5pY29uLWNvZyB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTQzMnB4IDA7Cn0KCi5pY29uLXRyYXNoIHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNDU2cHggMDsKfQoKLmljb24taG9tZSB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogMCAtMjRweDsKfQoKLmljb24tZmlsZSB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTI0cHggLTI0cHg7Cn0KCi5pY29uLXRpbWUgewogIGJhY2tncm91bmQtcG9zaXRpb246IC00OHB4IC0yNHB4Owp9CgouaWNvbi1yb2FkIHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNzJweCAtMjRweDsKfQoKLmljb24tZG93bmxvYWQtYWx0IHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtOTZweCAtMjRweDsKfQoKLmljb24tZG93bmxvYWQgewogIGJhY2tncm91bmQtcG9zaXRpb246IC0xMjBweCAtMjRweDsKfQoKLmljb24tdXBsb2FkIHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTQ0cHggLTI0cHg7Cn0KCi5pY29uLWluYm94IHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTY4cHggLTI0cHg7Cn0KCi5pY29uLXBsYXktY2lyY2xlIHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTkycHggLTI0cHg7Cn0KCi5pY29uLXJlcGVhdCB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTIxNnB4IC0yNHB4Owp9CgouaWNvbi1yZWZyZXNoIHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMjQwcHggLTI0cHg7Cn0KCi5pY29uLWxpc3QtYWx0IHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMjY0cHggLTI0cHg7Cn0KCi5pY29uLWxvY2sgewogIGJhY2tncm91bmQtcG9zaXRpb246IC0yODdweCAtMjRweDsKfQoKLmljb24tZmxhZyB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTMxMnB4IC0yNHB4Owp9CgouaWNvbi1oZWFkcGhvbmVzIHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMzM2cHggLTI0cHg7Cn0KCi5pY29uLXZvbHVtZS1vZmYgewogIGJhY2tncm91bmQtcG9zaXRpb246IC0zNjBweCAtMjRweDsKfQoKLmljb24tdm9sdW1lLWRvd24gewogIGJhY2tncm91bmQtcG9zaXRpb246IC0zODRweCAtMjRweDsKfQoKLmljb24tdm9sdW1lLXVwIHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNDA4cHggLTI0cHg7Cn0KCi5pY29uLXFyY29kZSB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTQzMnB4IC0yNHB4Owp9CgouaWNvbi1iYXJjb2RlIHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNDU2cHggLTI0cHg7Cn0KCi5pY29uLXRhZyB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogMCAtNDhweDsKfQoKLmljb24tdGFncyB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTI1cHggLTQ4cHg7Cn0KCi5pY29uLWJvb2sgewogIGJhY2tncm91bmQtcG9zaXRpb246IC00OHB4IC00OHB4Owp9CgouaWNvbi1ib29rbWFyayB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTcycHggLTQ4cHg7Cn0KCi5pY29uLXByaW50IHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtOTZweCAtNDhweDsKfQoKLmljb24tY2FtZXJhIHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTIwcHggLTQ4cHg7Cn0KCi5pY29uLWZvbnQgewogIGJhY2tncm91bmQtcG9zaXRpb246IC0xNDRweCAtNDhweDsKfQoKLmljb24tYm9sZCB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE2N3B4IC00OHB4Owp9CgouaWNvbi1pdGFsaWMgewogIGJhY2tncm91bmQtcG9zaXRpb246IC0xOTJweCAtNDhweDsKfQoKLmljb24tdGV4dC1oZWlnaHQgewogIGJhY2tncm91bmQtcG9zaXRpb246IC0yMTZweCAtNDhweDsKfQoKLmljb24tdGV4dC13aWR0aCB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTI0MHB4IC00OHB4Owp9CgouaWNvbi1hbGlnbi1sZWZ0IHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMjY0cHggLTQ4cHg7Cn0KCi5pY29uLWFsaWduLWNlbnRlciB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTI4OHB4IC00OHB4Owp9CgouaWNvbi1hbGlnbi1yaWdodCB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTMxMnB4IC00OHB4Owp9CgouaWNvbi1hbGlnbi1qdXN0aWZ5IHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMzM2cHggLTQ4cHg7Cn0KCi5pY29uLWxpc3QgewogIGJhY2tncm91bmQtcG9zaXRpb246IC0zNjBweCAtNDhweDsKfQoKLmljb24taW5kZW50LWxlZnQgewogIGJhY2tncm91bmQtcG9zaXRpb246IC0zODRweCAtNDhweDsKfQoKLmljb24taW5kZW50LXJpZ2h0IHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNDA4cHggLTQ4cHg7Cn0KCi5pY29uLWZhY2V0aW1lLXZpZGVvIHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNDMycHggLTQ4cHg7Cn0KCi5pY29uLXBpY3R1cmUgewogIGJhY2tncm91bmQtcG9zaXRpb246IC00NTZweCAtNDhweDsKfQoKLmljb24tcGVuY2lsIHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwIC03MnB4Owp9CgouaWNvbi1tYXAtbWFya2VyIHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMjRweCAtNzJweDsKfQoKLmljb24tYWRqdXN0IHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNDhweCAtNzJweDsKfQoKLmljb24tdGludCB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTcycHggLTcycHg7Cn0KCi5pY29uLWVkaXQgewogIGJhY2tncm91bmQtcG9zaXRpb246IC05NnB4IC03MnB4Owp9CgouaWNvbi1zaGFyZSB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTEyMHB4IC03MnB4Owp9CgouaWNvbi1jaGVjayB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE0NHB4IC03MnB4Owp9CgouaWNvbi1tb3ZlIHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTY4cHggLTcycHg7Cn0KCi5pY29uLXN0ZXAtYmFja3dhcmQgewogIGJhY2tncm91bmQtcG9zaXRpb246IC0xOTJweCAtNzJweDsKfQoKLmljb24tZmFzdC1iYWNrd2FyZCB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTIxNnB4IC03MnB4Owp9CgouaWNvbi1iYWNrd2FyZCB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTI0MHB4IC03MnB4Owp9CgouaWNvbi1wbGF5IHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMjY0cHggLTcycHg7Cn0KCi5pY29uLXBhdXNlIHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMjg4cHggLTcycHg7Cn0KCi5pY29uLXN0b3AgewogIGJhY2tncm91bmQtcG9zaXRpb246IC0zMTJweCAtNzJweDsKfQoKLmljb24tZm9yd2FyZCB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTMzNnB4IC03MnB4Owp9CgouaWNvbi1mYXN0LWZvcndhcmQgewogIGJhY2tncm91bmQtcG9zaXRpb246IC0zNjBweCAtNzJweDsKfQoKLmljb24tc3RlcC1mb3J3YXJkIHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMzg0cHggLTcycHg7Cn0KCi5pY29uLWVqZWN0IHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNDA4cHggLTcycHg7Cn0KCi5pY29uLWNoZXZyb24tbGVmdCB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTQzMnB4IC03MnB4Owp9CgouaWNvbi1jaGV2cm9uLXJpZ2h0IHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNDU2cHggLTcycHg7Cn0KCi5pY29uLXBsdXMtc2lnbiB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogMCAtOTZweDsKfQoKLmljb24tbWludXMtc2lnbiB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTI0cHggLTk2cHg7Cn0KCi5pY29uLXJlbW92ZS1zaWduIHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNDhweCAtOTZweDsKfQoKLmljb24tb2stc2lnbiB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTcycHggLTk2cHg7Cn0KCi5pY29uLXF1ZXN0aW9uLXNpZ24gewogIGJhY2tncm91bmQtcG9zaXRpb246IC05NnB4IC05NnB4Owp9CgouaWNvbi1pbmZvLXNpZ24gewogIGJhY2tncm91bmQtcG9zaXRpb246IC0xMjBweCAtOTZweDsKfQoKLmljb24tc2NyZWVuc2hvdCB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE0NHB4IC05NnB4Owp9CgouaWNvbi1yZW1vdmUtY2lyY2xlIHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTY4cHggLTk2cHg7Cn0KCi5pY29uLW9rLWNpcmNsZSB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE5MnB4IC05NnB4Owp9CgouaWNvbi1iYW4tY2lyY2xlIHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMjE2cHggLTk2cHg7Cn0KCi5pY29uLWFycm93LWxlZnQgewogIGJhY2tncm91bmQtcG9zaXRpb246IC0yNDBweCAtOTZweDsKfQoKLmljb24tYXJyb3ctcmlnaHQgewogIGJhY2tncm91bmQtcG9zaXRpb246IC0yNjRweCAtOTZweDsKfQoKLmljb24tYXJyb3ctdXAgewogIGJhY2tncm91bmQtcG9zaXRpb246IC0yODlweCAtOTZweDsKfQoKLmljb24tYXJyb3ctZG93biB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTMxMnB4IC05NnB4Owp9CgouaWNvbi1zaGFyZS1hbHQgewogIGJhY2tncm91bmQtcG9zaXRpb246IC0zMzZweCAtOTZweDsKfQoKLmljb24tcmVzaXplLWZ1bGwgewogIGJhY2tncm91bmQtcG9zaXRpb246IC0zNjBweCAtOTZweDsKfQoKLmljb24tcmVzaXplLXNtYWxsIHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMzg0cHggLTk2cHg7Cn0KCi5pY29uLXBsdXMgewogIGJhY2tncm91bmQtcG9zaXRpb246IC00MDhweCAtOTZweDsKfQoKLmljb24tbWludXMgewogIGJhY2tncm91bmQtcG9zaXRpb246IC00MzNweCAtOTZweDsKfQoKLmljb24tYXN0ZXJpc2sgewogIGJhY2tncm91bmQtcG9zaXRpb246IC00NTZweCAtOTZweDsKfQoKLmljb24tZXhjbGFtYXRpb24tc2lnbiB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogMCAtMTIwcHg7Cn0KCi5pY29uLWdpZnQgewogIGJhY2tncm91bmQtcG9zaXRpb246IC0yNHB4IC0xMjBweDsKfQoKLmljb24tbGVhZiB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTQ4cHggLTEyMHB4Owp9CgouaWNvbi1maXJlIHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNzJweCAtMTIwcHg7Cn0KCi5pY29uLWV5ZS1vcGVuIHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtOTZweCAtMTIwcHg7Cn0KCi5pY29uLWV5ZS1jbG9zZSB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTEyMHB4IC0xMjBweDsKfQoKLmljb24td2FybmluZy1zaWduIHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTQ0cHggLTEyMHB4Owp9CgouaWNvbi1wbGFuZSB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTE2OHB4IC0xMjBweDsKfQoKLmljb24tY2FsZW5kYXIgewogIGJhY2tncm91bmQtcG9zaXRpb246IC0xOTJweCAtMTIwcHg7Cn0KCi5pY29uLXJhbmRvbSB7CiAgd2lkdGg6IDE2cHg7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTIxNnB4IC0xMjBweDsKfQoKLmljb24tY29tbWVudCB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTI0MHB4IC0xMjBweDsKfQoKLmljb24tbWFnbmV0IHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMjY0cHggLTEyMHB4Owp9CgouaWNvbi1jaGV2cm9uLXVwIHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMjg4cHggLTEyMHB4Owp9CgouaWNvbi1jaGV2cm9uLWRvd24gewogIGJhY2tncm91bmQtcG9zaXRpb246IC0zMTNweCAtMTE5cHg7Cn0KCi5pY29uLXJldHdlZXQgewogIGJhY2tncm91bmQtcG9zaXRpb246IC0zMzZweCAtMTIwcHg7Cn0KCi5pY29uLXNob3BwaW5nLWNhcnQgewogIGJhY2tncm91bmQtcG9zaXRpb246IC0zNjBweCAtMTIwcHg7Cn0KCi5pY29uLWZvbGRlci1jbG9zZSB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTM4NHB4IC0xMjBweDsKfQoKLmljb24tZm9sZGVyLW9wZW4gewogIHdpZHRoOiAxNnB4OwogIGJhY2tncm91bmQtcG9zaXRpb246IC00MDhweCAtMTIwcHg7Cn0KCi5pY29uLXJlc2l6ZS12ZXJ0aWNhbCB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTQzMnB4IC0xMTlweDsKfQoKLmljb24tcmVzaXplLWhvcml6b250YWwgewogIGJhY2tncm91bmQtcG9zaXRpb246IC00NTZweCAtMTE4cHg7Cn0KCi5pY29uLWhkZCB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogMCAtMTQ0cHg7Cn0KCi5pY29uLWJ1bGxob3JuIHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMjRweCAtMTQ0cHg7Cn0KCi5pY29uLWJlbGwgewogIGJhY2tncm91bmQtcG9zaXRpb246IC00OHB4IC0xNDRweDsKfQoKLmljb24tY2VydGlmaWNhdGUgewogIGJhY2tncm91bmQtcG9zaXRpb246IC03MnB4IC0xNDRweDsKfQoKLmljb24tdGh1bWJzLXVwIHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtOTZweCAtMTQ0cHg7Cn0KCi5pY29uLXRodW1icy1kb3duIHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTIwcHggLTE0NHB4Owp9CgouaWNvbi1oYW5kLXJpZ2h0IHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMTQ0cHggLTE0NHB4Owp9CgouaWNvbi1oYW5kLWxlZnQgewogIGJhY2tncm91bmQtcG9zaXRpb246IC0xNjhweCAtMTQ0cHg7Cn0KCi5pY29uLWhhbmQtdXAgewogIGJhY2tncm91bmQtcG9zaXRpb246IC0xOTJweCAtMTQ0cHg7Cn0KCi5pY29uLWhhbmQtZG93biB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTIxNnB4IC0xNDRweDsKfQoKLmljb24tY2lyY2xlLWFycm93LXJpZ2h0IHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMjQwcHggLTE0NHB4Owp9CgouaWNvbi1jaXJjbGUtYXJyb3ctbGVmdCB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTI2NHB4IC0xNDRweDsKfQoKLmljb24tY2lyY2xlLWFycm93LXVwIHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMjg4cHggLTE0NHB4Owp9CgouaWNvbi1jaXJjbGUtYXJyb3ctZG93biB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTMxMnB4IC0xNDRweDsKfQoKLmljb24tZ2xvYmUgewogIGJhY2tncm91bmQtcG9zaXRpb246IC0zMzZweCAtMTQ0cHg7Cn0KCi5pY29uLXdyZW5jaCB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTM2MHB4IC0xNDRweDsKfQoKLmljb24tdGFza3MgewogIGJhY2tncm91bmQtcG9zaXRpb246IC0zODRweCAtMTQ0cHg7Cn0KCi5pY29uLWZpbHRlciB7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogLTQwOHB4IC0xNDRweDsKfQoKLmljb24tYnJpZWZjYXNlIHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNDMycHggLTE0NHB4Owp9CgouaWNvbi1mdWxsc2NyZWVuIHsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNDU2cHggLTE0NHB4Owp9CgouZHJvcHVwLAouZHJvcGRvd24gewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKfQoKLmRyb3Bkb3duLXRvZ2dsZSB7CiAgKm1hcmdpbi1ib3R0b206IC0zcHg7Cn0KCi5kcm9wZG93bi10b2dnbGU6YWN0aXZlLAoub3BlbiAuZHJvcGRvd24tdG9nZ2xlIHsKICBvdXRsaW5lOiAwOwp9CgouY2FyZXQgewogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICB3aWR0aDogMDsKICBoZWlnaHQ6IDA7CiAgdmVydGljYWwtYWxpZ246IHRvcDsKICBib3JkZXItdG9wOiA0cHggc29saWQgIzAwMDAwMDsKICBib3JkZXItcmlnaHQ6IDRweCBzb2xpZCB0cmFuc3BhcmVudDsKICBib3JkZXItbGVmdDogNHB4IHNvbGlkIHRyYW5zcGFyZW50OwogIGNvbnRlbnQ6ICIiOwp9CgouZHJvcGRvd24gLmNhcmV0IHsKICBtYXJnaW4tdG9wOiA4cHg7CiAgbWFyZ2luLWxlZnQ6IDJweDsKfQoKLmRyb3Bkb3duLW1lbnUgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDEwMCU7CiAgbGVmdDogMDsKICB6LWluZGV4OiAxMDAwOwogIGRpc3BsYXk6IG5vbmU7CiAgZmxvYXQ6IGxlZnQ7CiAgbWluLXdpZHRoOiAxNjBweDsKICBwYWRkaW5nOiA1cHggMDsKICBtYXJnaW46IDJweCAwIDA7CiAgbGlzdC1zdHlsZTogbm9uZTsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmOwogIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7CiAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjIpOwogICpib3JkZXItcmlnaHQtd2lkdGg6IDJweDsKICAqYm9yZGVyLWJvdHRvbS13aWR0aDogMnB4OwogIC13ZWJraXQtYm9yZGVyLXJhZGl1czogNnB4OwogICAgIC1tb3otYm9yZGVyLXJhZGl1czogNnB4OwogICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4OwogIC13ZWJraXQtYm94LXNoYWRvdzogMCA1cHggMTBweCByZ2JhKDAsIDAsIDAsIDAuMik7CiAgICAgLW1vei1ib3gtc2hhZG93OiAwIDVweCAxMHB4IHJnYmEoMCwgMCwgMCwgMC4yKTsKICAgICAgICAgIGJveC1zaGFkb3c6IDAgNXB4IDEwcHggcmdiYSgwLCAwLCAwLCAwLjIpOwogIC13ZWJraXQtYmFja2dyb3VuZC1jbGlwOiBwYWRkaW5nLWJveDsKICAgICAtbW96LWJhY2tncm91bmQtY2xpcDogcGFkZGluZzsKICAgICAgICAgIGJhY2tncm91bmQtY2xpcDogcGFkZGluZy1ib3g7Cn0KCi5kcm9wZG93bi1tZW51LnB1bGwtcmlnaHQgewogIHJpZ2h0OiAwOwogIGxlZnQ6IGF1dG87Cn0KCi5kcm9wZG93bi1tZW51IC5kaXZpZGVyIHsKICAqd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxcHg7CiAgbWFyZ2luOiA5cHggMXB4OwogICptYXJnaW46IC01cHggMCA1cHg7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTVlNWU1OwogIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZmZmZmZmOwp9CgouZHJvcGRvd24tbWVudSBsaSA+IGEgewogIGRpc3BsYXk6IGJsb2NrOwogIHBhZGRpbmc6IDNweCAyMHB4OwogIGNsZWFyOiBib3RoOwogIGZvbnQtd2VpZ2h0OiBub3JtYWw7CiAgbGluZS1oZWlnaHQ6IDIwcHg7CiAgY29sb3I6ICMzMzMzMzM7CiAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKfQoKLmRyb3Bkb3duLW1lbnUgbGkgPiBhOmhvdmVyLAouZHJvcGRvd24tbWVudSBsaSA+IGE6Zm9jdXMsCi5kcm9wZG93bi1zdWJtZW51OmhvdmVyID4gYSB7CiAgY29sb3I6ICNmZmZmZmY7CiAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwogIGJhY2tncm91bmQtY29sb3I6ICMwMDgxYzI7CiAgYmFja2dyb3VuZC1pbWFnZTogLW1vei1saW5lYXItZ3JhZGllbnQodG9wLCAjMDA4OGNjLCAjMDA3N2IzKTsKICBiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWdyYWRpZW50KGxpbmVhciwgMCAwLCAwIDEwMCUsIGZyb20oIzAwODhjYyksIHRvKCMwMDc3YjMpKTsKICBiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWxpbmVhci1ncmFkaWVudCh0b3AsICMwMDg4Y2MsICMwMDc3YjMpOwogIGJhY2tncm91bmQtaW1hZ2U6IC1vLWxpbmVhci1ncmFkaWVudCh0b3AsICMwMDg4Y2MsICMwMDc3YjMpOwogIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCh0byBib3R0b20sICMwMDg4Y2MsICMwMDc3YjMpOwogIGJhY2tncm91bmQtcmVwZWF0OiByZXBlYXQteDsKICBmaWx0ZXI6IHByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5ncmFkaWVudChzdGFydENvbG9yc3RyPScjZmYwMDg4Y2MnLCBlbmRDb2xvcnN0cj0nI2ZmMDA3N2IzJywgR3JhZGllbnRUeXBlPTApOwp9CgouZHJvcGRvd24tbWVudSAuYWN0aXZlID4gYSwKLmRyb3Bkb3duLW1lbnUgLmFjdGl2ZSA+IGE6aG92ZXIgewogIGNvbG9yOiAjZmZmZmZmOwogIHRleHQtZGVjb3JhdGlvbjogbm9uZTsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA4MWMyOwogIGJhY2tncm91bmQtaW1hZ2U6IC1tb3otbGluZWFyLWdyYWRpZW50KHRvcCwgIzAwODhjYywgIzAwNzdiMyk7CiAgYmFja2dyb3VuZC1pbWFnZTogLXdlYmtpdC1ncmFkaWVudChsaW5lYXIsIDAgMCwgMCAxMDAlLCBmcm9tKCMwMDg4Y2MpLCB0bygjMDA3N2IzKSk7CiAgYmFja2dyb3VuZC1pbWFnZTogLXdlYmtpdC1saW5lYXItZ3JhZGllbnQodG9wLCAjMDA4OGNjLCAjMDA3N2IzKTsKICBiYWNrZ3JvdW5kLWltYWdlOiAtby1saW5lYXItZ3JhZGllbnQodG9wLCAjMDA4OGNjLCAjMDA3N2IzKTsKICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCAjMDA4OGNjLCAjMDA3N2IzKTsKICBiYWNrZ3JvdW5kLXJlcGVhdDogcmVwZWF0LXg7CiAgb3V0bGluZTogMDsKICBmaWx0ZXI6IHByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5ncmFkaWVudChzdGFydENvbG9yc3RyPScjZmYwMDg4Y2MnLCBlbmRDb2xvcnN0cj0nI2ZmMDA3N2IzJywgR3JhZGllbnRUeXBlPTApOwp9CgouZHJvcGRvd24tbWVudSAuZGlzYWJsZWQgPiBhLAouZHJvcGRvd24tbWVudSAuZGlzYWJsZWQgPiBhOmhvdmVyIHsKICBjb2xvcjogIzk5OTk5OTsKfQoKLmRyb3Bkb3duLW1lbnUgLmRpc2FibGVkID4gYTpob3ZlciB7CiAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwogIGN1cnNvcjogZGVmYXVsdDsKICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsKICBiYWNrZ3JvdW5kLWltYWdlOiBub25lOwogIGZpbHRlcjogcHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LmdyYWRpZW50KGVuYWJsZWQ9ZmFsc2UpOwp9Cgoub3BlbiB7CiAgKnotaW5kZXg6IDEwMDA7Cn0KCi5vcGVuID4gLmRyb3Bkb3duLW1lbnUgewogIGRpc3BsYXk6IGJsb2NrOwp9CgoucHVsbC1yaWdodCA+IC5kcm9wZG93bi1tZW51IHsKICByaWdodDogMDsKICBsZWZ0OiBhdXRvOwp9CgouZHJvcHVwIC5jYXJldCwKLm5hdmJhci1maXhlZC1ib3R0b20gLmRyb3Bkb3duIC5jYXJldCB7CiAgYm9yZGVyLXRvcDogMDsKICBib3JkZXItYm90dG9tOiA0cHggc29saWQgIzAwMDAwMDsKICBjb250ZW50OiAiIjsKfQoKLmRyb3B1cCAuZHJvcGRvd24tbWVudSwKLm5hdmJhci1maXhlZC1ib3R0b20gLmRyb3Bkb3duIC5kcm9wZG93bi1tZW51IHsKICB0b3A6IGF1dG87CiAgYm90dG9tOiAxMDAlOwogIG1hcmdpbi1ib3R0b206IDFweDsKfQoKLmRyb3Bkb3duLXN1Ym1lbnUgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKfQoKLmRyb3Bkb3duLXN1Ym1lbnUgPiAuZHJvcGRvd24tbWVudSB7CiAgdG9wOiAwOwogIGxlZnQ6IDEwMCU7CiAgbWFyZ2luLXRvcDogLTZweDsKICBtYXJnaW4tbGVmdDogLTFweDsKICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDAgNnB4IDZweCA2cHg7CiAgICAgLW1vei1ib3JkZXItcmFkaXVzOiAwIDZweCA2cHggNnB4OwogICAgICAgICAgYm9yZGVyLXJhZGl1czogMCA2cHggNnB4IDZweDsKfQoKLmRyb3Bkb3duLXN1Ym1lbnU6aG92ZXIgPiAuZHJvcGRvd24tbWVudSB7CiAgZGlzcGxheTogYmxvY2s7Cn0KCi5kcm9wdXAgLmRyb3Bkb3duLXN1Ym1lbnUgPiAuZHJvcGRvd24tbWVudSB7CiAgdG9wOiBhdXRvOwogIGJvdHRvbTogMDsKICBtYXJnaW4tdG9wOiAwOwogIG1hcmdpbi1ib3R0b206IC0ycHg7CiAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiA1cHggNXB4IDVweCAwOwogICAgIC1tb3otYm9yZGVyLXJhZGl1czogNXB4IDVweCA1cHggMDsKICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDVweCA1cHggNXB4IDA7Cn0KCi5kcm9wZG93bi1zdWJtZW51ID4gYTphZnRlciB7CiAgZGlzcGxheTogYmxvY2s7CiAgZmxvYXQ6IHJpZ2h0OwogIHdpZHRoOiAwOwogIGhlaWdodDogMDsKICBtYXJnaW4tdG9wOiA1cHg7CiAgbWFyZ2luLXJpZ2h0OiAtMTBweDsKICBib3JkZXItY29sb3I6IHRyYW5zcGFyZW50OwogIGJvcmRlci1sZWZ0LWNvbG9yOiAjY2NjY2NjOwogIGJvcmRlci1zdHlsZTogc29saWQ7CiAgYm9yZGVyLXdpZHRoOiA1cHggMCA1cHggNXB4OwogIGNvbnRlbnQ6ICIgIjsKfQoKLmRyb3Bkb3duLXN1Ym1lbnU6aG92ZXIgPiBhOmFmdGVyIHsKICBib3JkZXItbGVmdC1jb2xvcjogI2ZmZmZmZjsKfQoKLmRyb3Bkb3duLXN1Ym1lbnUucHVsbC1sZWZ0IHsKICBmbG9hdDogbm9uZTsKfQoKLmRyb3Bkb3duLXN1Ym1lbnUucHVsbC1sZWZ0ID4gLmRyb3Bkb3duLW1lbnUgewogIGxlZnQ6IC0xMDAlOwogIG1hcmdpbi1sZWZ0OiAxMHB4OwogIC13ZWJraXQtYm9yZGVyLXJhZGl1czogNnB4IDAgNnB4IDZweDsKICAgICAtbW96LWJvcmRlci1yYWRpdXM6IDZweCAwIDZweCA2cHg7CiAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHggMCA2cHggNnB4Owp9CgouZHJvcGRvd24gLmRyb3Bkb3duLW1lbnUgLm5hdi1oZWFkZXIgewogIHBhZGRpbmctcmlnaHQ6IDIwcHg7CiAgcGFkZGluZy1sZWZ0OiAyMHB4Owp9CgoudHlwZWFoZWFkIHsKICB6LWluZGV4OiAxMDUxOwogIG1hcmdpbi10b3A6IDJweDsKICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDRweDsKICAgICAtbW96LWJvcmRlci1yYWRpdXM6IDRweDsKICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsKfQoKLndlbGwgewogIG1pbi1oZWlnaHQ6IDIwcHg7CiAgcGFkZGluZzogMTlweDsKICBtYXJnaW4tYm90dG9tOiAyMHB4OwogIGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7CiAgYm9yZGVyOiAxcHggc29saWQgI2UzZTNlMzsKICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDRweDsKICAgICAtbW96LWJvcmRlci1yYWRpdXM6IDRweDsKICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsKICAtd2Via2l0LWJveC1zaGFkb3c6IGluc2V0IDAgMXB4IDFweCByZ2JhKDAsIDAsIDAsIDAuMDUpOwogICAgIC1tb3otYm94LXNoYWRvdzogaW5zZXQgMCAxcHggMXB4IHJnYmEoMCwgMCwgMCwgMC4wNSk7CiAgICAgICAgICBib3gtc2hhZG93OiBpbnNldCAwIDFweCAxcHggcmdiYSgwLCAwLCAwLCAwLjA1KTsKfQoKLndlbGwgYmxvY2txdW90ZSB7CiAgYm9yZGVyLWNvbG9yOiAjZGRkOwogIGJvcmRlci1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjE1KTsKfQoKLndlbGwtbGFyZ2UgewogIHBhZGRpbmc6IDI0cHg7CiAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiA2cHg7CiAgICAgLW1vei1ib3JkZXItcmFkaXVzOiA2cHg7CiAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7Cn0KCi53ZWxsLXNtYWxsIHsKICBwYWRkaW5nOiA5cHg7CiAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiAzcHg7CiAgICAgLW1vei1ib3JkZXItcmFkaXVzOiAzcHg7CiAgICAgICAgICBib3JkZXItcmFkaXVzOiAzcHg7Cn0KCi5mYWRlIHsKICBvcGFjaXR5OiAwOwogIC13ZWJraXQtdHJhbnNpdGlvbjogb3BhY2l0eSAwLjE1cyBsaW5lYXI7CiAgICAgLW1vei10cmFuc2l0aW9uOiBvcGFjaXR5IDAuMTVzIGxpbmVhcjsKICAgICAgIC1vLXRyYW5zaXRpb246IG9wYWNpdHkgMC4xNXMgbGluZWFyOwogICAgICAgICAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjE1cyBsaW5lYXI7Cn0KCi5mYWRlLmluIHsKICBvcGFjaXR5OiAxOwp9CgouY29sbGFwc2UgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICBoZWlnaHQ6IDA7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKICAtd2Via2l0LXRyYW5zaXRpb246IGhlaWdodCAwLjM1cyBlYXNlOwogICAgIC1tb3otdHJhbnNpdGlvbjogaGVpZ2h0IDAuMzVzIGVhc2U7CiAgICAgICAtby10cmFuc2l0aW9uOiBoZWlnaHQgMC4zNXMgZWFzZTsKICAgICAgICAgIHRyYW5zaXRpb246IGhlaWdodCAwLjM1cyBlYXNlOwp9CgouY29sbGFwc2UuaW4gewogIGhlaWdodDogYXV0bzsKfQoKLmNsb3NlIHsKICBmbG9hdDogcmlnaHQ7CiAgZm9udC1zaXplOiAyMHB4OwogIGZvbnQtd2VpZ2h0OiBib2xkOwogIGxpbmUtaGVpZ2h0OiAyMHB4OwogIGNvbG9yOiAjMDAwMDAwOwogIHRleHQtc2hhZG93OiAwIDFweCAwICNmZmZmZmY7CiAgb3BhY2l0eTogMC4yOwogIGZpbHRlcjogYWxwaGEob3BhY2l0eT0yMCk7Cn0KCi5jbG9zZTpob3ZlciB7CiAgY29sb3I6ICMwMDAwMDA7CiAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwogIGN1cnNvcjogcG9pbnRlcjsKICBvcGFjaXR5OiAwLjQ7CiAgZmlsdGVyOiBhbHBoYShvcGFjaXR5PTQwKTsKfQoKYnV0dG9uLmNsb3NlIHsKICBwYWRkaW5nOiAwOwogIGN1cnNvcjogcG9pbnRlcjsKICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsKICBib3JkZXI6IDA7CiAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lOwp9CgouYnRuIHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgKmRpc3BsYXk6IGlubGluZTsKICBwYWRkaW5nOiA0cHggMTJweDsKICBtYXJnaW4tYm90dG9tOiAwOwogICptYXJnaW4tbGVmdDogLjNlbTsKICBmb250LXNpemU6IDE0cHg7CiAgbGluZS1oZWlnaHQ6IDIwcHg7CiAgY29sb3I6ICMzMzMzMzM7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIHRleHQtc2hhZG93OiAwIDFweCAxcHggcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjc1KTsKICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwogIGN1cnNvcjogcG9pbnRlcjsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjVmNWY1OwogICpiYWNrZ3JvdW5kLWNvbG9yOiAjZTZlNmU2OwogIGJhY2tncm91bmQtaW1hZ2U6IC1tb3otbGluZWFyLWdyYWRpZW50KHRvcCwgI2ZmZmZmZiwgI2U2ZTZlNik7CiAgYmFja2dyb3VuZC1pbWFnZTogLXdlYmtpdC1ncmFkaWVudChsaW5lYXIsIDAgMCwgMCAxMDAlLCBmcm9tKCNmZmZmZmYpLCB0bygjZTZlNmU2KSk7CiAgYmFja2dyb3VuZC1pbWFnZTogLXdlYmtpdC1saW5lYXItZ3JhZGllbnQodG9wLCAjZmZmZmZmLCAjZTZlNmU2KTsKICBiYWNrZ3JvdW5kLWltYWdlOiAtby1saW5lYXItZ3JhZGllbnQodG9wLCAjZmZmZmZmLCAjZTZlNmU2KTsKICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCAjZmZmZmZmLCAjZTZlNmU2KTsKICBiYWNrZ3JvdW5kLXJlcGVhdDogcmVwZWF0LXg7CiAgYm9yZGVyOiAxcHggc29saWQgI2JiYmJiYjsKICAqYm9yZGVyOiAwOwogIGJvcmRlci1jb2xvcjogI2U2ZTZlNiAjZTZlNmU2ICNiZmJmYmY7CiAgYm9yZGVyLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMSkgcmdiYSgwLCAwLCAwLCAwLjEpIHJnYmEoMCwgMCwgMCwgMC4yNSk7CiAgYm9yZGVyLWJvdHRvbS1jb2xvcjogI2EyYTJhMjsKICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDRweDsKICAgICAtbW96LWJvcmRlci1yYWRpdXM6IDRweDsKICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsKICBmaWx0ZXI6IHByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5ncmFkaWVudChzdGFydENvbG9yc3RyPScjZmZmZmZmZmYnLCBlbmRDb2xvcnN0cj0nI2ZmZTZlNmU2JywgR3JhZGllbnRUeXBlPTApOwogIGZpbHRlcjogcHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LmdyYWRpZW50KGVuYWJsZWQ9ZmFsc2UpOwogICp6b29tOiAxOwogIC13ZWJraXQtYm94LXNoYWRvdzogaW5zZXQgMCAxcHggMCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMiksIDAgMXB4IDJweCByZ2JhKDAsIDAsIDAsIDAuMDUpOwogICAgIC1tb3otYm94LXNoYWRvdzogaW5zZXQgMCAxcHggMCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMiksIDAgMXB4IDJweCByZ2JhKDAsIDAsIDAsIDAuMDUpOwogICAgICAgICAgYm94LXNoYWRvdzogaW5zZXQgMCAxcHggMCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMiksIDAgMXB4IDJweCByZ2JhKDAsIDAsIDAsIDAuMDUpOwp9CgouYnRuOmhvdmVyLAouYnRuOmFjdGl2ZSwKLmJ0bi5hY3RpdmUsCi5idG4uZGlzYWJsZWQsCi5idG5bZGlzYWJsZWRdIHsKICBjb2xvcjogIzMzMzMzMzsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTZlNmU2OwogICpiYWNrZ3JvdW5kLWNvbG9yOiAjZDlkOWQ5Owp9CgouYnRuOmFjdGl2ZSwKLmJ0bi5hY3RpdmUgewogIGJhY2tncm91bmQtY29sb3I6ICNjY2NjY2MgXDk7Cn0KCi5idG46Zmlyc3QtY2hpbGQgewogICptYXJnaW4tbGVmdDogMDsKfQoKLmJ0bjpob3ZlciB7CiAgY29sb3I6ICMzMzMzMzM7CiAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwogIGJhY2tncm91bmQtcG9zaXRpb246IDAgLTE1cHg7CiAgLXdlYmtpdC10cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLXBvc2l0aW9uIDAuMXMgbGluZWFyOwogICAgIC1tb3otdHJhbnNpdGlvbjogYmFja2dyb3VuZC1wb3NpdGlvbiAwLjFzIGxpbmVhcjsKICAgICAgIC1vLXRyYW5zaXRpb246IGJhY2tncm91bmQtcG9zaXRpb24gMC4xcyBsaW5lYXI7CiAgICAgICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLXBvc2l0aW9uIDAuMXMgbGluZWFyOwp9CgouYnRuOmZvY3VzIHsKICBvdXRsaW5lOiB0aGluIGRvdHRlZCAjMzMzOwogIG91dGxpbmU6IDVweCBhdXRvIC13ZWJraXQtZm9jdXMtcmluZy1jb2xvcjsKICBvdXRsaW5lLW9mZnNldDogLTJweDsKfQoKLmJ0bi5hY3RpdmUsCi5idG46YWN0aXZlIHsKICBiYWNrZ3JvdW5kLWltYWdlOiBub25lOwogIG91dGxpbmU6IDA7CiAgLXdlYmtpdC1ib3gtc2hhZG93OiBpbnNldCAwIDJweCA0cHggcmdiYSgwLCAwLCAwLCAwLjE1KSwgMCAxcHggMnB4IHJnYmEoMCwgMCwgMCwgMC4wNSk7CiAgICAgLW1vei1ib3gtc2hhZG93OiBpbnNldCAwIDJweCA0cHggcmdiYSgwLCAwLCAwLCAwLjE1KSwgMCAxcHggMnB4IHJnYmEoMCwgMCwgMCwgMC4wNSk7CiAgICAgICAgICBib3gtc2hhZG93OiBpbnNldCAwIDJweCA0cHggcmdiYSgwLCAwLCAwLCAwLjE1KSwgMCAxcHggMnB4IHJnYmEoMCwgMCwgMCwgMC4wNSk7Cn0KCi5idG4uZGlzYWJsZWQsCi5idG5bZGlzYWJsZWRdIHsKICBjdXJzb3I6IGRlZmF1bHQ7CiAgYmFja2dyb3VuZC1pbWFnZTogbm9uZTsKICBvcGFjaXR5OiAwLjY1OwogIGZpbHRlcjogYWxwaGEob3BhY2l0eT02NSk7CiAgLXdlYmtpdC1ib3gtc2hhZG93OiBub25lOwogICAgIC1tb3otYm94LXNoYWRvdzogbm9uZTsKICAgICAgICAgIGJveC1zaGFkb3c6IG5vbmU7Cn0KCi5idG4tbGFyZ2UgewogIHBhZGRpbmc6IDExcHggMTlweDsKICBmb250LXNpemU6IDE3LjVweDsKICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDZweDsKICAgICAtbW96LWJvcmRlci1yYWRpdXM6IDZweDsKICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDsKfQoKLmJ0bi1sYXJnZSBbY2xhc3NePSJpY29uLSJdLAouYnRuLWxhcmdlIFtjbGFzcyo9IiBpY29uLSJdIHsKICBtYXJnaW4tdG9wOiA0cHg7Cn0KCi5idG4tc21hbGwgewogIHBhZGRpbmc6IDJweCAxMHB4OwogIGZvbnQtc2l6ZTogMTEuOXB4OwogIC13ZWJraXQtYm9yZGVyLXJhZGl1czogM3B4OwogICAgIC1tb3otYm9yZGVyLXJhZGl1czogM3B4OwogICAgICAgICAgYm9yZGVyLXJhZGl1czogM3B4Owp9CgouYnRuLXNtYWxsIFtjbGFzc149Imljb24tIl0sCi5idG4tc21hbGwgW2NsYXNzKj0iIGljb24tIl0gewogIG1hcmdpbi10b3A6IDA7Cn0KCi5idG4tbWluaSBbY2xhc3NePSJpY29uLSJdLAouYnRuLW1pbmkgW2NsYXNzKj0iIGljb24tIl0gewogIG1hcmdpbi10b3A6IC0xcHg7Cn0KCi5idG4tbWluaSB7CiAgcGFkZGluZzogMCA2cHg7CiAgZm9udC1zaXplOiAxMC41cHg7CiAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiAzcHg7CiAgICAgLW1vei1ib3JkZXItcmFkaXVzOiAzcHg7CiAgICAgICAgICBib3JkZXItcmFkaXVzOiAzcHg7Cn0KCi5idG4tYmxvY2sgewogIGRpc3BsYXk6IGJsb2NrOwogIHdpZHRoOiAxMDAlOwogIHBhZGRpbmctcmlnaHQ6IDA7CiAgcGFkZGluZy1sZWZ0OiAwOwogIC13ZWJraXQtYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgICAtbW96LWJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Owp9CgouYnRuLWJsb2NrICsgLmJ0bi1ibG9jayB7CiAgbWFyZ2luLXRvcDogNXB4Owp9CgppbnB1dFt0eXBlPSJzdWJtaXQiXS5idG4tYmxvY2ssCmlucHV0W3R5cGU9InJlc2V0Il0uYnRuLWJsb2NrLAppbnB1dFt0eXBlPSJidXR0b24iXS5idG4tYmxvY2sgewogIHdpZHRoOiAxMDAlOwp9CgouYnRuLXByaW1hcnkuYWN0aXZlLAouYnRuLXdhcm5pbmcuYWN0aXZlLAouYnRuLWRhbmdlci5hY3RpdmUsCi5idG4tc3VjY2Vzcy5hY3RpdmUsCi5idG4taW5mby5hY3RpdmUsCi5idG4taW52ZXJzZS5hY3RpdmUgewogIGNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNzUpOwp9CgouYnRuIHsKICBib3JkZXItY29sb3I6ICNjNWM1YzU7CiAgYm9yZGVyLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMTUpIHJnYmEoMCwgMCwgMCwgMC4xNSkgcmdiYSgwLCAwLCAwLCAwLjI1KTsKfQoKLmJ0bi1wcmltYXJ5IHsKICBjb2xvcjogI2ZmZmZmZjsKICB0ZXh0LXNoYWRvdzogMCAtMXB4IDAgcmdiYSgwLCAwLCAwLCAwLjI1KTsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA2ZGNjOwogICpiYWNrZ3JvdW5kLWNvbG9yOiAjMDA0NGNjOwogIGJhY2tncm91bmQtaW1hZ2U6IC1tb3otbGluZWFyLWdyYWRpZW50KHRvcCwgIzAwODhjYywgIzAwNDRjYyk7CiAgYmFja2dyb3VuZC1pbWFnZTogLXdlYmtpdC1ncmFkaWVudChsaW5lYXIsIDAgMCwgMCAxMDAlLCBmcm9tKCMwMDg4Y2MpLCB0bygjMDA0NGNjKSk7CiAgYmFja2dyb3VuZC1pbWFnZTogLXdlYmtpdC1saW5lYXItZ3JhZGllbnQodG9wLCAjMDA4OGNjLCAjMDA0NGNjKTsKICBiYWNrZ3JvdW5kLWltYWdlOiAtby1saW5lYXItZ3JhZGllbnQodG9wLCAjMDA4OGNjLCAjMDA0NGNjKTsKICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCAjMDA4OGNjLCAjMDA0NGNjKTsKICBiYWNrZ3JvdW5kLXJlcGVhdDogcmVwZWF0LXg7CiAgYm9yZGVyLWNvbG9yOiAjMDA0NGNjICMwMDQ0Y2MgIzAwMmE4MDsKICBib3JkZXItY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4xKSByZ2JhKDAsIDAsIDAsIDAuMSkgcmdiYSgwLCAwLCAwLCAwLjI1KTsKICBmaWx0ZXI6IHByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5ncmFkaWVudChzdGFydENvbG9yc3RyPScjZmYwMDg4Y2MnLCBlbmRDb2xvcnN0cj0nI2ZmMDA0NGNjJywgR3JhZGllbnRUeXBlPTApOwogIGZpbHRlcjogcHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LmdyYWRpZW50KGVuYWJsZWQ9ZmFsc2UpOwp9CgouYnRuLXByaW1hcnk6aG92ZXIsCi5idG4tcHJpbWFyeTphY3RpdmUsCi5idG4tcHJpbWFyeS5hY3RpdmUsCi5idG4tcHJpbWFyeS5kaXNhYmxlZCwKLmJ0bi1wcmltYXJ5W2Rpc2FibGVkXSB7CiAgY29sb3I6ICNmZmZmZmY7CiAgYmFja2dyb3VuZC1jb2xvcjogIzAwNDRjYzsKICAqYmFja2dyb3VuZC1jb2xvcjogIzAwM2JiMzsKfQoKLmJ0bi1wcmltYXJ5OmFjdGl2ZSwKLmJ0bi1wcmltYXJ5LmFjdGl2ZSB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzAwMzM5OSBcOTsKfQoKLmJ0bi13YXJuaW5nIHsKICBjb2xvcjogI2ZmZmZmZjsKICB0ZXh0LXNoYWRvdzogMCAtMXB4IDAgcmdiYSgwLCAwLCAwLCAwLjI1KTsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmFhNzMyOwogICpiYWNrZ3JvdW5kLWNvbG9yOiAjZjg5NDA2OwogIGJhY2tncm91bmQtaW1hZ2U6IC1tb3otbGluZWFyLWdyYWRpZW50KHRvcCwgI2ZiYjQ1MCwgI2Y4OTQwNik7CiAgYmFja2dyb3VuZC1pbWFnZTogLXdlYmtpdC1ncmFkaWVudChsaW5lYXIsIDAgMCwgMCAxMDAlLCBmcm9tKCNmYmI0NTApLCB0bygjZjg5NDA2KSk7CiAgYmFja2dyb3VuZC1pbWFnZTogLXdlYmtpdC1saW5lYXItZ3JhZGllbnQodG9wLCAjZmJiNDUwLCAjZjg5NDA2KTsKICBiYWNrZ3JvdW5kLWltYWdlOiAtby1saW5lYXItZ3JhZGllbnQodG9wLCAjZmJiNDUwLCAjZjg5NDA2KTsKICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCAjZmJiNDUwLCAjZjg5NDA2KTsKICBiYWNrZ3JvdW5kLXJlcGVhdDogcmVwZWF0LXg7CiAgYm9yZGVyLWNvbG9yOiAjZjg5NDA2ICNmODk0MDYgI2FkNjcwNDsKICBib3JkZXItY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4xKSByZ2JhKDAsIDAsIDAsIDAuMSkgcmdiYSgwLCAwLCAwLCAwLjI1KTsKICBmaWx0ZXI6IHByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5ncmFkaWVudChzdGFydENvbG9yc3RyPScjZmZmYmI0NTAnLCBlbmRDb2xvcnN0cj0nI2ZmZjg5NDA2JywgR3JhZGllbnRUeXBlPTApOwogIGZpbHRlcjogcHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LmdyYWRpZW50KGVuYWJsZWQ9ZmFsc2UpOwp9CgouYnRuLXdhcm5pbmc6aG92ZXIsCi5idG4td2FybmluZzphY3RpdmUsCi5idG4td2FybmluZy5hY3RpdmUsCi5idG4td2FybmluZy5kaXNhYmxlZCwKLmJ0bi13YXJuaW5nW2Rpc2FibGVkXSB7CiAgY29sb3I6ICNmZmZmZmY7CiAgYmFja2dyb3VuZC1jb2xvcjogI2Y4OTQwNjsKICAqYmFja2dyb3VuZC1jb2xvcjogI2RmODUwNTsKfQoKLmJ0bi13YXJuaW5nOmFjdGl2ZSwKLmJ0bi13YXJuaW5nLmFjdGl2ZSB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2M2NzYwNSBcOTsKfQoKLmJ0bi1kYW5nZXIgewogIGNvbG9yOiAjZmZmZmZmOwogIHRleHQtc2hhZG93OiAwIC0xcHggMCByZ2JhKDAsIDAsIDAsIDAuMjUpOwogIGJhY2tncm91bmQtY29sb3I6ICNkYTRmNDk7CiAgKmJhY2tncm91bmQtY29sb3I6ICNiZDM2MmY7CiAgYmFja2dyb3VuZC1pbWFnZTogLW1vei1saW5lYXItZ3JhZGllbnQodG9wLCAjZWU1ZjViLCAjYmQzNjJmKTsKICBiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWdyYWRpZW50KGxpbmVhciwgMCAwLCAwIDEwMCUsIGZyb20oI2VlNWY1YiksIHRvKCNiZDM2MmYpKTsKICBiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWxpbmVhci1ncmFkaWVudCh0b3AsICNlZTVmNWIsICNiZDM2MmYpOwogIGJhY2tncm91bmQtaW1hZ2U6IC1vLWxpbmVhci1ncmFkaWVudCh0b3AsICNlZTVmNWIsICNiZDM2MmYpOwogIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCh0byBib3R0b20sICNlZTVmNWIsICNiZDM2MmYpOwogIGJhY2tncm91bmQtcmVwZWF0OiByZXBlYXQteDsKICBib3JkZXItY29sb3I6ICNiZDM2MmYgI2JkMzYyZiAjODAyNDIwOwogIGJvcmRlci1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjEpIHJnYmEoMCwgMCwgMCwgMC4xKSByZ2JhKDAsIDAsIDAsIDAuMjUpOwogIGZpbHRlcjogcHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LmdyYWRpZW50KHN0YXJ0Q29sb3JzdHI9JyNmZmVlNWY1YicsIGVuZENvbG9yc3RyPScjZmZiZDM2MmYnLCBHcmFkaWVudFR5cGU9MCk7CiAgZmlsdGVyOiBwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuZ3JhZGllbnQoZW5hYmxlZD1mYWxzZSk7Cn0KCi5idG4tZGFuZ2VyOmhvdmVyLAouYnRuLWRhbmdlcjphY3RpdmUsCi5idG4tZGFuZ2VyLmFjdGl2ZSwKLmJ0bi1kYW5nZXIuZGlzYWJsZWQsCi5idG4tZGFuZ2VyW2Rpc2FibGVkXSB7CiAgY29sb3I6ICNmZmZmZmY7CiAgYmFja2dyb3VuZC1jb2xvcjogI2JkMzYyZjsKICAqYmFja2dyb3VuZC1jb2xvcjogI2E5MzAyYTsKfQoKLmJ0bi1kYW5nZXI6YWN0aXZlLAouYnRuLWRhbmdlci5hY3RpdmUgewogIGJhY2tncm91bmQtY29sb3I6ICM5NDJhMjUgXDk7Cn0KCi5idG4tc3VjY2VzcyB7CiAgY29sb3I6ICNmZmZmZmY7CiAgdGV4dC1zaGFkb3c6IDAgLTFweCAwIHJnYmEoMCwgMCwgMCwgMC4yNSk7CiAgYmFja2dyb3VuZC1jb2xvcjogIzViYjc1YjsKICAqYmFja2dyb3VuZC1jb2xvcjogIzUxYTM1MTsKICBiYWNrZ3JvdW5kLWltYWdlOiAtbW96LWxpbmVhci1ncmFkaWVudCh0b3AsICM2MmM0NjIsICM1MWEzNTEpOwogIGJhY2tncm91bmQtaW1hZ2U6IC13ZWJraXQtZ3JhZGllbnQobGluZWFyLCAwIDAsIDAgMTAwJSwgZnJvbSgjNjJjNDYyKSwgdG8oIzUxYTM1MSkpOwogIGJhY2tncm91bmQtaW1hZ2U6IC13ZWJraXQtbGluZWFyLWdyYWRpZW50KHRvcCwgIzYyYzQ2MiwgIzUxYTM1MSk7CiAgYmFja2dyb3VuZC1pbWFnZTogLW8tbGluZWFyLWdyYWRpZW50KHRvcCwgIzYyYzQ2MiwgIzUxYTM1MSk7CiAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwgIzYyYzQ2MiwgIzUxYTM1MSk7CiAgYmFja2dyb3VuZC1yZXBlYXQ6IHJlcGVhdC14OwogIGJvcmRlci1jb2xvcjogIzUxYTM1MSAjNTFhMzUxICMzODcwMzg7CiAgYm9yZGVyLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMSkgcmdiYSgwLCAwLCAwLCAwLjEpIHJnYmEoMCwgMCwgMCwgMC4yNSk7CiAgZmlsdGVyOiBwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuZ3JhZGllbnQoc3RhcnRDb2xvcnN0cj0nI2ZmNjJjNDYyJywgZW5kQ29sb3JzdHI9JyNmZjUxYTM1MScsIEdyYWRpZW50VHlwZT0wKTsKICBmaWx0ZXI6IHByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5ncmFkaWVudChlbmFibGVkPWZhbHNlKTsKfQoKLmJ0bi1zdWNjZXNzOmhvdmVyLAouYnRuLXN1Y2Nlc3M6YWN0aXZlLAouYnRuLXN1Y2Nlc3MuYWN0aXZlLAouYnRuLXN1Y2Nlc3MuZGlzYWJsZWQsCi5idG4tc3VjY2Vzc1tkaXNhYmxlZF0gewogIGNvbG9yOiAjZmZmZmZmOwogIGJhY2tncm91bmQtY29sb3I6ICM1MWEzNTE7CiAgKmJhY2tncm91bmQtY29sb3I6ICM0OTkyNDk7Cn0KCi5idG4tc3VjY2VzczphY3RpdmUsCi5idG4tc3VjY2Vzcy5hY3RpdmUgewogIGJhY2tncm91bmQtY29sb3I6ICM0MDgxNDAgXDk7Cn0KCi5idG4taW5mbyB7CiAgY29sb3I6ICNmZmZmZmY7CiAgdGV4dC1zaGFkb3c6IDAgLTFweCAwIHJnYmEoMCwgMCwgMCwgMC4yNSk7CiAgYmFja2dyb3VuZC1jb2xvcjogIzQ5YWZjZDsKICAqYmFja2dyb3VuZC1jb2xvcjogIzJmOTZiNDsKICBiYWNrZ3JvdW5kLWltYWdlOiAtbW96LWxpbmVhci1ncmFkaWVudCh0b3AsICM1YmMwZGUsICMyZjk2YjQpOwogIGJhY2tncm91bmQtaW1hZ2U6IC13ZWJraXQtZ3JhZGllbnQobGluZWFyLCAwIDAsIDAgMTAwJSwgZnJvbSgjNWJjMGRlKSwgdG8oIzJmOTZiNCkpOwogIGJhY2tncm91bmQtaW1hZ2U6IC13ZWJraXQtbGluZWFyLWdyYWRpZW50KHRvcCwgIzViYzBkZSwgIzJmOTZiNCk7CiAgYmFja2dyb3VuZC1pbWFnZTogLW8tbGluZWFyLWdyYWRpZW50KHRvcCwgIzViYzBkZSwgIzJmOTZiNCk7CiAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwgIzViYzBkZSwgIzJmOTZiNCk7CiAgYmFja2dyb3VuZC1yZXBlYXQ6IHJlcGVhdC14OwogIGJvcmRlci1jb2xvcjogIzJmOTZiNCAjMmY5NmI0ICMxZjYzNzc7CiAgYm9yZGVyLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMSkgcmdiYSgwLCAwLCAwLCAwLjEpIHJnYmEoMCwgMCwgMCwgMC4yNSk7CiAgZmlsdGVyOiBwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuZ3JhZGllbnQoc3RhcnRDb2xvcnN0cj0nI2ZmNWJjMGRlJywgZW5kQ29sb3JzdHI9JyNmZjJmOTZiNCcsIEdyYWRpZW50VHlwZT0wKTsKICBmaWx0ZXI6IHByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5ncmFkaWVudChlbmFibGVkPWZhbHNlKTsKfQoKLmJ0bi1pbmZvOmhvdmVyLAouYnRuLWluZm86YWN0aXZlLAouYnRuLWluZm8uYWN0aXZlLAouYnRuLWluZm8uZGlzYWJsZWQsCi5idG4taW5mb1tkaXNhYmxlZF0gewogIGNvbG9yOiAjZmZmZmZmOwogIGJhY2tncm91bmQtY29sb3I6ICMyZjk2YjQ7CiAgKmJhY2tncm91bmQtY29sb3I6ICMyYTg1YTA7Cn0KCi5idG4taW5mbzphY3RpdmUsCi5idG4taW5mby5hY3RpdmUgewogIGJhY2tncm91bmQtY29sb3I6ICMyNDc0OGMgXDk7Cn0KCi5idG4taW52ZXJzZSB7CiAgY29sb3I6ICNmZmZmZmY7CiAgdGV4dC1zaGFkb3c6IDAgLTFweCAwIHJnYmEoMCwgMCwgMCwgMC4yNSk7CiAgYmFja2dyb3VuZC1jb2xvcjogIzM2MzYzNjsKICAqYmFja2dyb3VuZC1jb2xvcjogIzIyMjIyMjsKICBiYWNrZ3JvdW5kLWltYWdlOiAtbW96LWxpbmVhci1ncmFkaWVudCh0b3AsICM0NDQ0NDQsICMyMjIyMjIpOwogIGJhY2tncm91bmQtaW1hZ2U6IC13ZWJraXQtZ3JhZGllbnQobGluZWFyLCAwIDAsIDAgMTAwJSwgZnJvbSgjNDQ0NDQ0KSwgdG8oIzIyMjIyMikpOwogIGJhY2tncm91bmQtaW1hZ2U6IC13ZWJraXQtbGluZWFyLWdyYWRpZW50KHRvcCwgIzQ0NDQ0NCwgIzIyMjIyMik7CiAgYmFja2dyb3VuZC1pbWFnZTogLW8tbGluZWFyLWdyYWRpZW50KHRvcCwgIzQ0NDQ0NCwgIzIyMjIyMik7CiAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwgIzQ0NDQ0NCwgIzIyMjIyMik7CiAgYmFja2dyb3VuZC1yZXBlYXQ6IHJlcGVhdC14OwogIGJvcmRlci1jb2xvcjogIzIyMjIyMiAjMjIyMjIyICMwMDAwMDA7CiAgYm9yZGVyLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMSkgcmdiYSgwLCAwLCAwLCAwLjEpIHJnYmEoMCwgMCwgMCwgMC4yNSk7CiAgZmlsdGVyOiBwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuZ3JhZGllbnQoc3RhcnRDb2xvcnN0cj0nI2ZmNDQ0NDQ0JywgZW5kQ29sb3JzdHI9JyNmZjIyMjIyMicsIEdyYWRpZW50VHlwZT0wKTsKICBmaWx0ZXI6IHByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5ncmFkaWVudChlbmFibGVkPWZhbHNlKTsKfQoKLmJ0bi1pbnZlcnNlOmhvdmVyLAouYnRuLWludmVyc2U6YWN0aXZlLAouYnRuLWludmVyc2UuYWN0aXZlLAouYnRuLWludmVyc2UuZGlzYWJsZWQsCi5idG4taW52ZXJzZVtkaXNhYmxlZF0gewogIGNvbG9yOiAjZmZmZmZmOwogIGJhY2tncm91bmQtY29sb3I6ICMyMjIyMjI7CiAgKmJhY2tncm91bmQtY29sb3I6ICMxNTE1MTU7Cn0KCi5idG4taW52ZXJzZTphY3RpdmUsCi5idG4taW52ZXJzZS5hY3RpdmUgewogIGJhY2tncm91bmQtY29sb3I6ICMwODA4MDggXDk7Cn0KCmJ1dHRvbi5idG4sCmlucHV0W3R5cGU9InN1Ym1pdCJdLmJ0biB7CiAgKnBhZGRpbmctdG9wOiAzcHg7CiAgKnBhZGRpbmctYm90dG9tOiAzcHg7Cn0KCmJ1dHRvbi5idG46Oi1tb3otZm9jdXMtaW5uZXIsCmlucHV0W3R5cGU9InN1Ym1pdCJdLmJ0bjo6LW1vei1mb2N1cy1pbm5lciB7CiAgcGFkZGluZzogMDsKICBib3JkZXI6IDA7Cn0KCmJ1dHRvbi5idG4uYnRuLWxhcmdlLAppbnB1dFt0eXBlPSJzdWJtaXQiXS5idG4uYnRuLWxhcmdlIHsKICAqcGFkZGluZy10b3A6IDdweDsKICAqcGFkZGluZy1ib3R0b206IDdweDsKfQoKYnV0dG9uLmJ0bi5idG4tc21hbGwsCmlucHV0W3R5cGU9InN1Ym1pdCJdLmJ0bi5idG4tc21hbGwgewogICpwYWRkaW5nLXRvcDogM3B4OwogICpwYWRkaW5nLWJvdHRvbTogM3B4Owp9CgpidXR0b24uYnRuLmJ0bi1taW5pLAppbnB1dFt0eXBlPSJzdWJtaXQiXS5idG4uYnRuLW1pbmkgewogICpwYWRkaW5nLXRvcDogMXB4OwogICpwYWRkaW5nLWJvdHRvbTogMXB4Owp9CgouYnRuLWxpbmssCi5idG4tbGluazphY3RpdmUsCi5idG4tbGlua1tkaXNhYmxlZF0gewogIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50OwogIGJhY2tncm91bmQtaW1hZ2U6IG5vbmU7CiAgLXdlYmtpdC1ib3gtc2hhZG93OiBub25lOwogICAgIC1tb3otYm94LXNoYWRvdzogbm9uZTsKICAgICAgICAgIGJveC1zaGFkb3c6IG5vbmU7Cn0KCi5idG4tbGluayB7CiAgY29sb3I6ICMwMDg4Y2M7CiAgY3Vyc29yOiBwb2ludGVyOwogIGJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnQ7CiAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiAwOwogICAgIC1tb3otYm9yZGVyLXJhZGl1czogMDsKICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDA7Cn0KCi5idG4tbGluazpob3ZlciB7CiAgY29sb3I6ICMwMDU1ODA7CiAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7CiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7Cn0KCi5idG4tbGlua1tkaXNhYmxlZF06aG92ZXIgewogIGNvbG9yOiAjMzMzMzMzOwogIHRleHQtZGVjb3JhdGlvbjogbm9uZTsKfQoKLmJ0bi1ncm91cCB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAqZGlzcGxheTogaW5saW5lOwogICptYXJnaW4tbGVmdDogLjNlbTsKICBmb250LXNpemU6IDA7CiAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwogICp6b29tOiAxOwp9CgouYnRuLWdyb3VwOmZpcnN0LWNoaWxkIHsKICAqbWFyZ2luLWxlZnQ6IDA7Cn0KCi5idG4tZ3JvdXAgKyAuYnRuLWdyb3VwIHsKICBtYXJnaW4tbGVmdDogNXB4Owp9CgouYnRuLXRvb2xiYXIgewogIG1hcmdpbi10b3A6IDEwcHg7CiAgbWFyZ2luLWJvdHRvbTogMTBweDsKICBmb250LXNpemU6IDA7Cn0KCi5idG4tdG9vbGJhciA+IC5idG4gKyAuYnRuLAouYnRuLXRvb2xiYXIgPiAuYnRuLWdyb3VwICsgLmJ0biwKLmJ0bi10b29sYmFyID4gLmJ0biArIC5idG4tZ3JvdXAgewogIG1hcmdpbi1sZWZ0OiA1cHg7Cn0KCi5idG4tZ3JvdXAgPiAuYnRuIHsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiAwOwogICAgIC1tb3otYm9yZGVyLXJhZGl1czogMDsKICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDA7Cn0KCi5idG4tZ3JvdXAgPiAuYnRuICsgLmJ0biB7CiAgbWFyZ2luLWxlZnQ6IC0xcHg7Cn0KCi5idG4tZ3JvdXAgPiAuYnRuLAouYnRuLWdyb3VwID4gLmRyb3Bkb3duLW1lbnUsCi5idG4tZ3JvdXAgPiAucG9wb3ZlciB7CiAgZm9udC1zaXplOiAxNHB4Owp9CgouYnRuLWdyb3VwID4gLmJ0bi1taW5pIHsKICBmb250LXNpemU6IDEwLjVweDsKfQoKLmJ0bi1ncm91cCA+IC5idG4tc21hbGwgewogIGZvbnQtc2l6ZTogMTEuOXB4Owp9CgouYnRuLWdyb3VwID4gLmJ0bi1sYXJnZSB7CiAgZm9udC1zaXplOiAxNy41cHg7Cn0KCi5idG4tZ3JvdXAgPiAuYnRuOmZpcnN0LWNoaWxkIHsKICBtYXJnaW4tbGVmdDogMDsKICAtd2Via2l0LWJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDRweDsKICAgICAgICAgIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDRweDsKICAtd2Via2l0LWJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDRweDsKICAgICAgICAgIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDRweDsKICAtbW96LWJvcmRlci1yYWRpdXMtYm90dG9tbGVmdDogNHB4OwogIC1tb3otYm9yZGVyLXJhZGl1cy10b3BsZWZ0OiA0cHg7Cn0KCi5idG4tZ3JvdXAgPiAuYnRuOmxhc3QtY2hpbGQsCi5idG4tZ3JvdXAgPiAuZHJvcGRvd24tdG9nZ2xlIHsKICAtd2Via2l0LWJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiA0cHg7CiAgICAgICAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogNHB4OwogIC13ZWJraXQtYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDRweDsKICAgICAgICAgIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiA0cHg7CiAgLW1vei1ib3JkZXItcmFkaXVzLXRvcHJpZ2h0OiA0cHg7CiAgLW1vei1ib3JkZXItcmFkaXVzLWJvdHRvbXJpZ2h0OiA0cHg7Cn0KCi5idG4tZ3JvdXAgPiAuYnRuLmxhcmdlOmZpcnN0LWNoaWxkIHsKICBtYXJnaW4tbGVmdDogMDsKICAtd2Via2l0LWJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDZweDsKICAgICAgICAgIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDZweDsKICAtd2Via2l0LWJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDZweDsKICAgICAgICAgIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDZweDsKICAtbW96LWJvcmRlci1yYWRpdXMtYm90dG9tbGVmdDogNnB4OwogIC1tb3otYm9yZGVyLXJhZGl1cy10b3BsZWZ0OiA2cHg7Cn0KCi5idG4tZ3JvdXAgPiAuYnRuLmxhcmdlOmxhc3QtY2hpbGQsCi5idG4tZ3JvdXAgPiAubGFyZ2UuZHJvcGRvd24tdG9nZ2xlIHsKICAtd2Via2l0LWJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiA2cHg7CiAgICAgICAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogNnB4OwogIC13ZWJraXQtYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDZweDsKICAgICAgICAgIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiA2cHg7CiAgLW1vei1ib3JkZXItcmFkaXVzLXRvcHJpZ2h0OiA2cHg7CiAgLW1vei1ib3JkZXItcmFkaXVzLWJvdHRvbXJpZ2h0OiA2cHg7Cn0KCi5idG4tZ3JvdXAgPiAuYnRuOmhvdmVyLAouYnRuLWdyb3VwID4gLmJ0bjpmb2N1cywKLmJ0bi1ncm91cCA+IC5idG46YWN0aXZlLAouYnRuLWdyb3VwID4gLmJ0bi5hY3RpdmUgewogIHotaW5kZXg6IDI7Cn0KCi5idG4tZ3JvdXAgLmRyb3Bkb3duLXRvZ2dsZTphY3RpdmUsCi5idG4tZ3JvdXAub3BlbiAuZHJvcGRvd24tdG9nZ2xlIHsKICBvdXRsaW5lOiAwOwp9CgouYnRuLWdyb3VwID4gLmJ0biArIC5kcm9wZG93bi10b2dnbGUgewogICpwYWRkaW5nLXRvcDogNXB4OwogIHBhZGRpbmctcmlnaHQ6IDhweDsKICAqcGFkZGluZy1ib3R0b206IDVweDsKICBwYWRkaW5nLWxlZnQ6IDhweDsKICAtd2Via2l0LWJveC1zaGFkb3c6IGluc2V0IDFweCAwIDAgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjEyNSksIGluc2V0IDAgMXB4IDAgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjIpLCAwIDFweCAycHggcmdiYSgwLCAwLCAwLCAwLjA1KTsKICAgICAtbW96LWJveC1zaGFkb3c6IGluc2V0IDFweCAwIDAgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjEyNSksIGluc2V0IDAgMXB4IDAgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjIpLCAwIDFweCAycHggcmdiYSgwLCAwLCAwLCAwLjA1KTsKICAgICAgICAgIGJveC1zaGFkb3c6IGluc2V0IDFweCAwIDAgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjEyNSksIGluc2V0IDAgMXB4IDAgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjIpLCAwIDFweCAycHggcmdiYSgwLCAwLCAwLCAwLjA1KTsKfQoKLmJ0bi1ncm91cCA+IC5idG4tbWluaSArIC5kcm9wZG93bi10b2dnbGUgewogICpwYWRkaW5nLXRvcDogMnB4OwogIHBhZGRpbmctcmlnaHQ6IDVweDsKICAqcGFkZGluZy1ib3R0b206IDJweDsKICBwYWRkaW5nLWxlZnQ6IDVweDsKfQoKLmJ0bi1ncm91cCA+IC5idG4tc21hbGwgKyAuZHJvcGRvd24tdG9nZ2xlIHsKICAqcGFkZGluZy10b3A6IDVweDsKICAqcGFkZGluZy1ib3R0b206IDRweDsKfQoKLmJ0bi1ncm91cCA+IC5idG4tbGFyZ2UgKyAuZHJvcGRvd24tdG9nZ2xlIHsKICAqcGFkZGluZy10b3A6IDdweDsKICBwYWRkaW5nLXJpZ2h0OiAxMnB4OwogICpwYWRkaW5nLWJvdHRvbTogN3B4OwogIHBhZGRpbmctbGVmdDogMTJweDsKfQoKLmJ0bi1ncm91cC5vcGVuIC5kcm9wZG93bi10b2dnbGUgewogIGJhY2tncm91bmQtaW1hZ2U6IG5vbmU7CiAgLXdlYmtpdC1ib3gtc2hhZG93OiBpbnNldCAwIDJweCA0cHggcmdiYSgwLCAwLCAwLCAwLjE1KSwgMCAxcHggMnB4IHJnYmEoMCwgMCwgMCwgMC4wNSk7CiAgICAgLW1vei1ib3gtc2hhZG93OiBpbnNldCAwIDJweCA0cHggcmdiYSgwLCAwLCAwLCAwLjE1KSwgMCAxcHggMnB4IHJnYmEoMCwgMCwgMCwgMC4wNSk7CiAgICAgICAgICBib3gtc2hhZG93OiBpbnNldCAwIDJweCA0cHggcmdiYSgwLCAwLCAwLCAwLjE1KSwgMCAxcHggMnB4IHJnYmEoMCwgMCwgMCwgMC4wNSk7Cn0KCi5idG4tZ3JvdXAub3BlbiAuYnRuLmRyb3Bkb3duLXRvZ2dsZSB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2U2ZTZlNjsKfQoKLmJ0bi1ncm91cC5vcGVuIC5idG4tcHJpbWFyeS5kcm9wZG93bi10b2dnbGUgewogIGJhY2tncm91bmQtY29sb3I6ICMwMDQ0Y2M7Cn0KCi5idG4tZ3JvdXAub3BlbiAuYnRuLXdhcm5pbmcuZHJvcGRvd24tdG9nZ2xlIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjg5NDA2Owp9CgouYnRuLWdyb3VwLm9wZW4gLmJ0bi1kYW5nZXIuZHJvcGRvd24tdG9nZ2xlIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjYmQzNjJmOwp9CgouYnRuLWdyb3VwLm9wZW4gLmJ0bi1zdWNjZXNzLmRyb3Bkb3duLXRvZ2dsZSB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzUxYTM1MTsKfQoKLmJ0bi1ncm91cC5vcGVuIC5idG4taW5mby5kcm9wZG93bi10b2dnbGUgewogIGJhY2tncm91bmQtY29sb3I6ICMyZjk2YjQ7Cn0KCi5idG4tZ3JvdXAub3BlbiAuYnRuLWludmVyc2UuZHJvcGRvd24tdG9nZ2xlIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjIyMjIyOwp9CgouYnRuIC5jYXJldCB7CiAgbWFyZ2luLXRvcDogOHB4OwogIG1hcmdpbi1sZWZ0OiAwOwp9CgouYnRuLW1pbmkgLmNhcmV0LAouYnRuLXNtYWxsIC5jYXJldCwKLmJ0bi1sYXJnZSAuY2FyZXQgewogIG1hcmdpbi10b3A6IDZweDsKfQoKLmJ0bi1sYXJnZSAuY2FyZXQgewogIGJvcmRlci10b3Atd2lkdGg6IDVweDsKICBib3JkZXItcmlnaHQtd2lkdGg6IDVweDsKICBib3JkZXItbGVmdC13aWR0aDogNXB4Owp9CgouZHJvcHVwIC5idG4tbGFyZ2UgLmNhcmV0IHsKICBib3JkZXItYm90dG9tLXdpZHRoOiA1cHg7Cn0KCi5idG4tcHJpbWFyeSAuY2FyZXQsCi5idG4td2FybmluZyAuY2FyZXQsCi5idG4tZGFuZ2VyIC5jYXJldCwKLmJ0bi1pbmZvIC5jYXJldCwKLmJ0bi1zdWNjZXNzIC5jYXJldCwKLmJ0bi1pbnZlcnNlIC5jYXJldCB7CiAgYm9yZGVyLXRvcC1jb2xvcjogI2ZmZmZmZjsKICBib3JkZXItYm90dG9tLWNvbG9yOiAjZmZmZmZmOwp9CgouYnRuLWdyb3VwLXZlcnRpY2FsIHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgKmRpc3BsYXk6IGlubGluZTsKICAvKiBJRTcgaW5saW5lLWJsb2NrIGhhY2sgKi8KCiAgKnpvb206IDE7Cn0KCi5idG4tZ3JvdXAtdmVydGljYWwgPiAuYnRuIHsKICBkaXNwbGF5OiBibG9jazsKICBmbG9hdDogbm9uZTsKICBtYXgtd2lkdGg6IDEwMCU7CiAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiAwOwogICAgIC1tb3otYm9yZGVyLXJhZGl1czogMDsKICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDA7Cn0KCi5idG4tZ3JvdXAtdmVydGljYWwgPiAuYnRuICsgLmJ0biB7CiAgbWFyZ2luLXRvcDogLTFweDsKICBtYXJnaW4tbGVmdDogMDsKfQoKLmJ0bi1ncm91cC12ZXJ0aWNhbCA+IC5idG46Zmlyc3QtY2hpbGQgewogIC13ZWJraXQtYm9yZGVyLXJhZGl1czogNHB4IDRweCAwIDA7CiAgICAgLW1vei1ib3JkZXItcmFkaXVzOiA0cHggNHB4IDAgMDsKICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweCA0cHggMCAwOwp9CgouYnRuLWdyb3VwLXZlcnRpY2FsID4gLmJ0bjpsYXN0LWNoaWxkIHsKICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDAgMCA0cHggNHB4OwogICAgIC1tb3otYm9yZGVyLXJhZGl1czogMCAwIDRweCA0cHg7CiAgICAgICAgICBib3JkZXItcmFkaXVzOiAwIDAgNHB4IDRweDsKfQoKLmJ0bi1ncm91cC12ZXJ0aWNhbCA+IC5idG4tbGFyZ2U6Zmlyc3QtY2hpbGQgewogIC13ZWJraXQtYm9yZGVyLXJhZGl1czogNnB4IDZweCAwIDA7CiAgICAgLW1vei1ib3JkZXItcmFkaXVzOiA2cHggNnB4IDAgMDsKICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweCA2cHggMCAwOwp9CgouYnRuLWdyb3VwLXZlcnRpY2FsID4gLmJ0bi1sYXJnZTpsYXN0LWNoaWxkIHsKICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDAgMCA2cHggNnB4OwogICAgIC1tb3otYm9yZGVyLXJhZGl1czogMCAwIDZweCA2cHg7CiAgICAgICAgICBib3JkZXItcmFkaXVzOiAwIDAgNnB4IDZweDsKfQoKLmFsZXJ0IHsKICBwYWRkaW5nOiA4cHggMzVweCA4cHggMTRweDsKICBtYXJnaW4tYm90dG9tOiAyMHB4OwogIHRleHQtc2hhZG93OiAwIDFweCAwIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC41KTsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmNmOGUzOwogIGJvcmRlcjogMXB4IHNvbGlkICNmYmVlZDU7CiAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiA0cHg7CiAgICAgLW1vei1ib3JkZXItcmFkaXVzOiA0cHg7CiAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7Cn0KCi5hbGVydCwKLmFsZXJ0IGg0IHsKICBjb2xvcjogI2MwOTg1MzsKfQoKLmFsZXJ0IGg0IHsKICBtYXJnaW46IDA7Cn0KCi5hbGVydCAuY2xvc2UgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICB0b3A6IC0ycHg7CiAgcmlnaHQ6IC0yMXB4OwogIGxpbmUtaGVpZ2h0OiAyMHB4Owp9CgouYWxlcnQtc3VjY2VzcyB7CiAgY29sb3I6ICM0Njg4NDc7CiAgYmFja2dyb3VuZC1jb2xvcjogI2RmZjBkODsKICBib3JkZXItY29sb3I6ICNkNmU5YzY7Cn0KCi5hbGVydC1zdWNjZXNzIGg0IHsKICBjb2xvcjogIzQ2ODg0NzsKfQoKLmFsZXJ0LWRhbmdlciwKLmFsZXJ0LWVycm9yIHsKICBjb2xvcjogI2I5NGE0ODsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjJkZWRlOwogIGJvcmRlci1jb2xvcjogI2VlZDNkNzsKfQoKLmFsZXJ0LWRhbmdlciBoNCwKLmFsZXJ0LWVycm9yIGg0IHsKICBjb2xvcjogI2I5NGE0ODsKfQoKLmFsZXJ0LWluZm8gewogIGNvbG9yOiAjM2E4N2FkOwogIGJhY2tncm91bmQtY29sb3I6ICNkOWVkZjc7CiAgYm9yZGVyLWNvbG9yOiAjYmNlOGYxOwp9CgouYWxlcnQtaW5mbyBoNCB7CiAgY29sb3I6ICMzYTg3YWQ7Cn0KCi5hbGVydC1ibG9jayB7CiAgcGFkZGluZy10b3A6IDE0cHg7CiAgcGFkZGluZy1ib3R0b206IDE0cHg7Cn0KCi5hbGVydC1ibG9jayA+IHAsCi5hbGVydC1ibG9jayA+IHVsIHsKICBtYXJnaW4tYm90dG9tOiAwOwp9CgouYWxlcnQtYmxvY2sgcCArIHAgewogIG1hcmdpbi10b3A6IDVweDsKfQoKLm5hdiB7CiAgbWFyZ2luLWJvdHRvbTogMjBweDsKICBtYXJnaW4tbGVmdDogMDsKICBsaXN0LXN0eWxlOiBub25lOwp9CgoubmF2ID4gbGkgPiBhIHsKICBkaXNwbGF5OiBibG9jazsKfQoKLm5hdiA+IGxpID4gYTpob3ZlciB7CiAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwogIGJhY2tncm91bmQtY29sb3I6ICNlZWVlZWU7Cn0KCi5uYXYgPiBsaSA+IGEgPiBpbWcgewogIG1heC13aWR0aDogbm9uZTsKfQoKLm5hdiA+IC5wdWxsLXJpZ2h0IHsKICBmbG9hdDogcmlnaHQ7Cn0KCi5uYXYtaGVhZGVyIHsKICBkaXNwbGF5OiBibG9jazsKICBwYWRkaW5nOiAzcHggMTVweDsKICBmb250LXNpemU6IDExcHg7CiAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgbGluZS1oZWlnaHQ6IDIwcHg7CiAgY29sb3I6ICM5OTk5OTk7CiAgdGV4dC1zaGFkb3c6IDAgMXB4IDAgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjUpOwogIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7Cn0KCi5uYXYgbGkgKyAubmF2LWhlYWRlciB7CiAgbWFyZ2luLXRvcDogOXB4Owp9CgoubmF2LWxpc3QgewogIHBhZGRpbmctcmlnaHQ6IDE1cHg7CiAgcGFkZGluZy1sZWZ0OiAxNXB4OwogIG1hcmdpbi1ib3R0b206IDA7Cn0KCi5uYXYtbGlzdCA+IGxpID4gYSwKLm5hdi1saXN0IC5uYXYtaGVhZGVyIHsKICBtYXJnaW4tcmlnaHQ6IC0xNXB4OwogIG1hcmdpbi1sZWZ0OiAtMTVweDsKICB0ZXh0LXNoYWRvdzogMCAxcHggMCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNSk7Cn0KCi5uYXYtbGlzdCA+IGxpID4gYSB7CiAgcGFkZGluZzogM3B4IDE1cHg7Cn0KCi5uYXYtbGlzdCA+IC5hY3RpdmUgPiBhLAoubmF2LWxpc3QgPiAuYWN0aXZlID4gYTpob3ZlciB7CiAgY29sb3I6ICNmZmZmZmY7CiAgdGV4dC1zaGFkb3c6IDAgLTFweCAwIHJnYmEoMCwgMCwgMCwgMC4yKTsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA4OGNjOwp9CgoubmF2LWxpc3QgW2NsYXNzXj0iaWNvbi0iXSwKLm5hdi1saXN0IFtjbGFzcyo9IiBpY29uLSJdIHsKICBtYXJnaW4tcmlnaHQ6IDJweDsKfQoKLm5hdi1saXN0IC5kaXZpZGVyIHsKICAqd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxcHg7CiAgbWFyZ2luOiA5cHggMXB4OwogICptYXJnaW46IC01cHggMCA1cHg7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTVlNWU1OwogIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZmZmZmZmOwp9CgoubmF2LXRhYnMsCi5uYXYtcGlsbHMgewogICp6b29tOiAxOwp9CgoubmF2LXRhYnM6YmVmb3JlLAoubmF2LXBpbGxzOmJlZm9yZSwKLm5hdi10YWJzOmFmdGVyLAoubmF2LXBpbGxzOmFmdGVyIHsKICBkaXNwbGF5OiB0YWJsZTsKICBsaW5lLWhlaWdodDogMDsKICBjb250ZW50OiAiIjsKfQoKLm5hdi10YWJzOmFmdGVyLAoubmF2LXBpbGxzOmFmdGVyIHsKICBjbGVhcjogYm90aDsKfQoKLm5hdi10YWJzID4gbGksCi5uYXYtcGlsbHMgPiBsaSB7CiAgZmxvYXQ6IGxlZnQ7Cn0KCi5uYXYtdGFicyA+IGxpID4gYSwKLm5hdi1waWxscyA+IGxpID4gYSB7CiAgcGFkZGluZy1yaWdodDogMTJweDsKICBwYWRkaW5nLWxlZnQ6IDEycHg7CiAgbWFyZ2luLXJpZ2h0OiAycHg7CiAgbGluZS1oZWlnaHQ6IDE0cHg7Cn0KCi5uYXYtdGFicyB7CiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNkZGQ7Cn0KCi5uYXYtdGFicyA+IGxpIHsKICBtYXJnaW4tYm90dG9tOiAtMXB4Owp9CgoubmF2LXRhYnMgPiBsaSA+IGEgewogIHBhZGRpbmctdG9wOiA4cHg7CiAgcGFkZGluZy1ib3R0b206IDhweDsKICBsaW5lLWhlaWdodDogMjBweDsKICBib3JkZXI6IDFweCBzb2xpZCB0cmFuc3BhcmVudDsKICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDRweCA0cHggMCAwOwogICAgIC1tb3otYm9yZGVyLXJhZGl1czogNHB4IDRweCAwIDA7CiAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHggNHB4IDAgMDsKfQoKLm5hdi10YWJzID4gbGkgPiBhOmhvdmVyIHsKICBib3JkZXItY29sb3I6ICNlZWVlZWUgI2VlZWVlZSAjZGRkZGRkOwp9CgoubmF2LXRhYnMgPiAuYWN0aXZlID4gYSwKLm5hdi10YWJzID4gLmFjdGl2ZSA+IGE6aG92ZXIgewogIGNvbG9yOiAjNTU1NTU1OwogIGN1cnNvcjogZGVmYXVsdDsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmOwogIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7CiAgYm9yZGVyLWJvdHRvbS1jb2xvcjogdHJhbnNwYXJlbnQ7Cn0KCi5uYXYtcGlsbHMgPiBsaSA+IGEgewogIHBhZGRpbmctdG9wOiA4cHg7CiAgcGFkZGluZy1ib3R0b206IDhweDsKICBtYXJnaW4tdG9wOiAycHg7CiAgbWFyZ2luLWJvdHRvbTogMnB4OwogIC13ZWJraXQtYm9yZGVyLXJhZGl1czogNXB4OwogICAgIC1tb3otYm9yZGVyLXJhZGl1czogNXB4OwogICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4Owp9CgoubmF2LXBpbGxzID4gLmFjdGl2ZSA+IGEsCi5uYXYtcGlsbHMgPiAuYWN0aXZlID4gYTpob3ZlciB7CiAgY29sb3I6ICNmZmZmZmY7CiAgYmFja2dyb3VuZC1jb2xvcjogIzAwODhjYzsKfQoKLm5hdi1zdGFja2VkID4gbGkgewogIGZsb2F0OiBub25lOwp9CgoubmF2LXN0YWNrZWQgPiBsaSA+IGEgewogIG1hcmdpbi1yaWdodDogMDsKfQoKLm5hdi10YWJzLm5hdi1zdGFja2VkIHsKICBib3JkZXItYm90dG9tOiAwOwp9CgoubmF2LXRhYnMubmF2LXN0YWNrZWQgPiBsaSA+IGEgewogIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7CiAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiAwOwogICAgIC1tb3otYm9yZGVyLXJhZGl1czogMDsKICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDA7Cn0KCi5uYXYtdGFicy5uYXYtc3RhY2tlZCA+IGxpOmZpcnN0LWNoaWxkID4gYSB7CiAgLXdlYmtpdC1ib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogNHB4OwogICAgICAgICAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDRweDsKICAtd2Via2l0LWJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDRweDsKICAgICAgICAgIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDRweDsKICAtbW96LWJvcmRlci1yYWRpdXMtdG9wcmlnaHQ6IDRweDsKICAtbW96LWJvcmRlci1yYWRpdXMtdG9wbGVmdDogNHB4Owp9CgoubmF2LXRhYnMubmF2LXN0YWNrZWQgPiBsaTpsYXN0LWNoaWxkID4gYSB7CiAgLXdlYmtpdC1ib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogNHB4OwogICAgICAgICAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDRweDsKICAtd2Via2l0LWJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDRweDsKICAgICAgICAgIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDRweDsKICAtbW96LWJvcmRlci1yYWRpdXMtYm90dG9tcmlnaHQ6IDRweDsKICAtbW96LWJvcmRlci1yYWRpdXMtYm90dG9tbGVmdDogNHB4Owp9CgoubmF2LXRhYnMubmF2LXN0YWNrZWQgPiBsaSA+IGE6aG92ZXIgewogIHotaW5kZXg6IDI7CiAgYm9yZGVyLWNvbG9yOiAjZGRkOwp9CgoubmF2LXBpbGxzLm5hdi1zdGFja2VkID4gbGkgPiBhIHsKICBtYXJnaW4tYm90dG9tOiAzcHg7Cn0KCi5uYXYtcGlsbHMubmF2LXN0YWNrZWQgPiBsaTpsYXN0LWNoaWxkID4gYSB7CiAgbWFyZ2luLWJvdHRvbTogMXB4Owp9CgoubmF2LXRhYnMgLmRyb3Bkb3duLW1lbnUgewogIC13ZWJraXQtYm9yZGVyLXJhZGl1czogMCAwIDZweCA2cHg7CiAgICAgLW1vei1ib3JkZXItcmFkaXVzOiAwIDAgNnB4IDZweDsKICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDAgMCA2cHggNnB4Owp9CgoubmF2LXBpbGxzIC5kcm9wZG93bi1tZW51IHsKICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDZweDsKICAgICAtbW96LWJvcmRlci1yYWRpdXM6IDZweDsKICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDsKfQoKLm5hdiAuZHJvcGRvd24tdG9nZ2xlIC5jYXJldCB7CiAgbWFyZ2luLXRvcDogNnB4OwogIGJvcmRlci10b3AtY29sb3I6ICMwMDg4Y2M7CiAgYm9yZGVyLWJvdHRvbS1jb2xvcjogIzAwODhjYzsKfQoKLm5hdiAuZHJvcGRvd24tdG9nZ2xlOmhvdmVyIC5jYXJldCB7CiAgYm9yZGVyLXRvcC1jb2xvcjogIzAwNTU4MDsKICBib3JkZXItYm90dG9tLWNvbG9yOiAjMDA1NTgwOwp9CgovKiBtb3ZlIGRvd24gY2FyZXRzIGZvciB0YWJzICovCgoubmF2LXRhYnMgLmRyb3Bkb3duLXRvZ2dsZSAuY2FyZXQgewogIG1hcmdpbi10b3A6IDhweDsKfQoKLm5hdiAuYWN0aXZlIC5kcm9wZG93bi10b2dnbGUgLmNhcmV0IHsKICBib3JkZXItdG9wLWNvbG9yOiAjZmZmOwogIGJvcmRlci1ib3R0b20tY29sb3I6ICNmZmY7Cn0KCi5uYXYtdGFicyAuYWN0aXZlIC5kcm9wZG93bi10b2dnbGUgLmNhcmV0IHsKICBib3JkZXItdG9wLWNvbG9yOiAjNTU1NTU1OwogIGJvcmRlci1ib3R0b20tY29sb3I6ICM1NTU1NTU7Cn0KCi5uYXYgPiAuZHJvcGRvd24uYWN0aXZlID4gYTpob3ZlciB7CiAgY3Vyc29yOiBwb2ludGVyOwp9CgoubmF2LXRhYnMgLm9wZW4gLmRyb3Bkb3duLXRvZ2dsZSwKLm5hdi1waWxscyAub3BlbiAuZHJvcGRvd24tdG9nZ2xlLAoubmF2ID4gbGkuZHJvcGRvd24ub3Blbi5hY3RpdmUgPiBhOmhvdmVyIHsKICBjb2xvcjogI2ZmZmZmZjsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjOTk5OTk5OwogIGJvcmRlci1jb2xvcjogIzk5OTk5OTsKfQoKLm5hdiBsaS5kcm9wZG93bi5vcGVuIC5jYXJldCwKLm5hdiBsaS5kcm9wZG93bi5vcGVuLmFjdGl2ZSAuY2FyZXQsCi5uYXYgbGkuZHJvcGRvd24ub3BlbiBhOmhvdmVyIC5jYXJldCB7CiAgYm9yZGVyLXRvcC1jb2xvcjogI2ZmZmZmZjsKICBib3JkZXItYm90dG9tLWNvbG9yOiAjZmZmZmZmOwogIG9wYWNpdHk6IDE7CiAgZmlsdGVyOiBhbHBoYShvcGFjaXR5PTEwMCk7Cn0KCi50YWJzLXN0YWNrZWQgLm9wZW4gPiBhOmhvdmVyIHsKICBib3JkZXItY29sb3I6ICM5OTk5OTk7Cn0KCi50YWJiYWJsZSB7CiAgKnpvb206IDE7Cn0KCi50YWJiYWJsZTpiZWZvcmUsCi50YWJiYWJsZTphZnRlciB7CiAgZGlzcGxheTogdGFibGU7CiAgbGluZS1oZWlnaHQ6IDA7CiAgY29udGVudDogIiI7Cn0KCi50YWJiYWJsZTphZnRlciB7CiAgY2xlYXI6IGJvdGg7Cn0KCi50YWItY29udGVudCB7CiAgb3ZlcmZsb3c6IGF1dG87Cn0KCi50YWJzLWJlbG93ID4gLm5hdi10YWJzLAoudGFicy1yaWdodCA+IC5uYXYtdGFicywKLnRhYnMtbGVmdCA+IC5uYXYtdGFicyB7CiAgYm9yZGVyLWJvdHRvbTogMDsKfQoKLnRhYi1jb250ZW50ID4gLnRhYi1wYW5lLAoucGlsbC1jb250ZW50ID4gLnBpbGwtcGFuZSB7CiAgZGlzcGxheTogbm9uZTsKfQoKLnRhYi1jb250ZW50ID4gLmFjdGl2ZSwKLnBpbGwtY29udGVudCA+IC5hY3RpdmUgewogIGRpc3BsYXk6IGJsb2NrOwp9CgoudGFicy1iZWxvdyA+IC5uYXYtdGFicyB7CiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNkZGQ7Cn0KCi50YWJzLWJlbG93ID4gLm5hdi10YWJzID4gbGkgewogIG1hcmdpbi10b3A6IC0xcHg7CiAgbWFyZ2luLWJvdHRvbTogMDsKfQoKLnRhYnMtYmVsb3cgPiAubmF2LXRhYnMgPiBsaSA+IGEgewogIC13ZWJraXQtYm9yZGVyLXJhZGl1czogMCAwIDRweCA0cHg7CiAgICAgLW1vei1ib3JkZXItcmFkaXVzOiAwIDAgNHB4IDRweDsKICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDAgMCA0cHggNHB4Owp9CgoudGFicy1iZWxvdyA+IC5uYXYtdGFicyA+IGxpID4gYTpob3ZlciB7CiAgYm9yZGVyLXRvcC1jb2xvcjogI2RkZDsKICBib3JkZXItYm90dG9tLWNvbG9yOiB0cmFuc3BhcmVudDsKfQoKLnRhYnMtYmVsb3cgPiAubmF2LXRhYnMgPiAuYWN0aXZlID4gYSwKLnRhYnMtYmVsb3cgPiAubmF2LXRhYnMgPiAuYWN0aXZlID4gYTpob3ZlciB7CiAgYm9yZGVyLWNvbG9yOiB0cmFuc3BhcmVudCAjZGRkICNkZGQgI2RkZDsKfQoKLnRhYnMtbGVmdCA+IC5uYXYtdGFicyA+IGxpLAoudGFicy1yaWdodCA+IC5uYXYtdGFicyA+IGxpIHsKICBmbG9hdDogbm9uZTsKfQoKLnRhYnMtbGVmdCA+IC5uYXYtdGFicyA+IGxpID4gYSwKLnRhYnMtcmlnaHQgPiAubmF2LXRhYnMgPiBsaSA+IGEgewogIG1pbi13aWR0aDogNzRweDsKICBtYXJnaW4tcmlnaHQ6IDA7CiAgbWFyZ2luLWJvdHRvbTogM3B4Owp9CgoudGFicy1sZWZ0ID4gLm5hdi10YWJzIHsKICBmbG9hdDogbGVmdDsKICBtYXJnaW4tcmlnaHQ6IDE5cHg7CiAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgI2RkZDsKfQoKLnRhYnMtbGVmdCA+IC5uYXYtdGFicyA+IGxpID4gYSB7CiAgbWFyZ2luLXJpZ2h0OiAtMXB4OwogIC13ZWJraXQtYm9yZGVyLXJhZGl1czogNHB4IDAgMCA0cHg7CiAgICAgLW1vei1ib3JkZXItcmFkaXVzOiA0cHggMCAwIDRweDsKICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweCAwIDAgNHB4Owp9CgoudGFicy1sZWZ0ID4gLm5hdi10YWJzID4gbGkgPiBhOmhvdmVyIHsKICBib3JkZXItY29sb3I6ICNlZWVlZWUgI2RkZGRkZCAjZWVlZWVlICNlZWVlZWU7Cn0KCi50YWJzLWxlZnQgPiAubmF2LXRhYnMgLmFjdGl2ZSA+IGEsCi50YWJzLWxlZnQgPiAubmF2LXRhYnMgLmFjdGl2ZSA+IGE6aG92ZXIgewogIGJvcmRlci1jb2xvcjogI2RkZCB0cmFuc3BhcmVudCAjZGRkICNkZGQ7CiAgKmJvcmRlci1yaWdodC1jb2xvcjogI2ZmZmZmZjsKfQoKLnRhYnMtcmlnaHQgPiAubmF2LXRhYnMgewogIGZsb2F0OiByaWdodDsKICBtYXJnaW4tbGVmdDogMTlweDsKICBib3JkZXItbGVmdDogMXB4IHNvbGlkICNkZGQ7Cn0KCi50YWJzLXJpZ2h0ID4gLm5hdi10YWJzID4gbGkgPiBhIHsKICBtYXJnaW4tbGVmdDogLTFweDsKICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDAgNHB4IDRweCAwOwogICAgIC1tb3otYm9yZGVyLXJhZGl1czogMCA0cHggNHB4IDA7CiAgICAgICAgICBib3JkZXItcmFkaXVzOiAwIDRweCA0cHggMDsKfQoKLnRhYnMtcmlnaHQgPiAubmF2LXRhYnMgPiBsaSA+IGE6aG92ZXIgewogIGJvcmRlci1jb2xvcjogI2VlZWVlZSAjZWVlZWVlICNlZWVlZWUgI2RkZGRkZDsKfQoKLnRhYnMtcmlnaHQgPiAubmF2LXRhYnMgLmFjdGl2ZSA+IGEsCi50YWJzLXJpZ2h0ID4gLm5hdi10YWJzIC5hY3RpdmUgPiBhOmhvdmVyIHsKICBib3JkZXItY29sb3I6ICNkZGQgI2RkZCAjZGRkIHRyYW5zcGFyZW50OwogICpib3JkZXItbGVmdC1jb2xvcjogI2ZmZmZmZjsKfQoKLm5hdiA+IC5kaXNhYmxlZCA+IGEgewogIGNvbG9yOiAjOTk5OTk5Owp9CgoubmF2ID4gLmRpc2FibGVkID4gYTpob3ZlciB7CiAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwogIGN1cnNvcjogZGVmYXVsdDsKICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsKfQoKLm5hdmJhciB7CiAgKnBvc2l0aW9uOiByZWxhdGl2ZTsKICAqei1pbmRleDogMjsKICBtYXJnaW4tYm90dG9tOiAyMHB4OwogIG92ZXJmbG93OiB2aXNpYmxlOwp9CgoubmF2YmFyLWlubmVyIHsKICBtaW4taGVpZ2h0OiA0MHB4OwogIHBhZGRpbmctcmlnaHQ6IDIwcHg7CiAgcGFkZGluZy1sZWZ0OiAyMHB4OwogIGJhY2tncm91bmQtY29sb3I6ICNmYWZhZmE7CiAgYmFja2dyb3VuZC1pbWFnZTogLW1vei1saW5lYXItZ3JhZGllbnQodG9wLCAjZmZmZmZmLCAjZjJmMmYyKTsKICBiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWdyYWRpZW50KGxpbmVhciwgMCAwLCAwIDEwMCUsIGZyb20oI2ZmZmZmZiksIHRvKCNmMmYyZjIpKTsKICBiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWxpbmVhci1ncmFkaWVudCh0b3AsICNmZmZmZmYsICNmMmYyZjIpOwogIGJhY2tncm91bmQtaW1hZ2U6IC1vLWxpbmVhci1ncmFkaWVudCh0b3AsICNmZmZmZmYsICNmMmYyZjIpOwogIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCh0byBib3R0b20sICNmZmZmZmYsICNmMmYyZjIpOwogIGJhY2tncm91bmQtcmVwZWF0OiByZXBlYXQteDsKICBib3JkZXI6IDFweCBzb2xpZCAjZDRkNGQ0OwogIC13ZWJraXQtYm9yZGVyLXJhZGl1czogNHB4OwogICAgIC1tb3otYm9yZGVyLXJhZGl1czogNHB4OwogICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4OwogIGZpbHRlcjogcHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LmdyYWRpZW50KHN0YXJ0Q29sb3JzdHI9JyNmZmZmZmZmZicsIGVuZENvbG9yc3RyPScjZmZmMmYyZjInLCBHcmFkaWVudFR5cGU9MCk7CiAgKnpvb206IDE7CiAgLXdlYmtpdC1ib3gtc2hhZG93OiAwIDFweCA0cHggcmdiYSgwLCAwLCAwLCAwLjA2NSk7CiAgICAgLW1vei1ib3gtc2hhZG93OiAwIDFweCA0cHggcmdiYSgwLCAwLCAwLCAwLjA2NSk7CiAgICAgICAgICBib3gtc2hhZG93OiAwIDFweCA0cHggcmdiYSgwLCAwLCAwLCAwLjA2NSk7Cn0KCi5uYXZiYXItaW5uZXI6YmVmb3JlLAoubmF2YmFyLWlubmVyOmFmdGVyIHsKICBkaXNwbGF5OiB0YWJsZTsKICBsaW5lLWhlaWdodDogMDsKICBjb250ZW50OiAiIjsKfQoKLm5hdmJhci1pbm5lcjphZnRlciB7CiAgY2xlYXI6IGJvdGg7Cn0KCi5uYXZiYXIgLmNvbnRhaW5lciB7CiAgd2lkdGg6IGF1dG87Cn0KCi5uYXYtY29sbGFwc2UuY29sbGFwc2UgewogIGhlaWdodDogYXV0bzsKICBvdmVyZmxvdzogdmlzaWJsZTsKfQoKLm5hdmJhciAuYnJhbmQgewogIGRpc3BsYXk6IGJsb2NrOwogIGZsb2F0OiBsZWZ0OwogIHBhZGRpbmc6IDEwcHggMjBweCAxMHB4OwogIG1hcmdpbi1sZWZ0OiAtMjBweDsKICBmb250LXNpemU6IDIwcHg7CiAgZm9udC13ZWlnaHQ6IDIwMDsKICBjb2xvcjogIzc3Nzc3NzsKICB0ZXh0LXNoYWRvdzogMCAxcHggMCAjZmZmZmZmOwp9CgoubmF2YmFyIC5icmFuZDpob3ZlciB7CiAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwp9CgoubmF2YmFyLXRleHQgewogIG1hcmdpbi1ib3R0b206IDA7CiAgbGluZS1oZWlnaHQ6IDQwcHg7CiAgY29sb3I6ICM3Nzc3Nzc7Cn0KCi5uYXZiYXItbGluayB7CiAgY29sb3I6ICM3Nzc3Nzc7Cn0KCi5uYXZiYXItbGluazpob3ZlciB7CiAgY29sb3I6ICMzMzMzMzM7Cn0KCi5uYXZiYXIgLmRpdmlkZXItdmVydGljYWwgewogIGhlaWdodDogNDBweDsKICBtYXJnaW46IDAgOXB4OwogIGJvcmRlci1yaWdodDogMXB4IHNvbGlkICNmZmZmZmY7CiAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAjZjJmMmYyOwp9CgoubmF2YmFyIC5idG4sCi5uYXZiYXIgLmJ0bi1ncm91cCB7CiAgbWFyZ2luLXRvcDogNXB4Owp9CgoubmF2YmFyIC5idG4tZ3JvdXAgLmJ0biwKLm5hdmJhciAuaW5wdXQtcHJlcGVuZCAuYnRuLAoubmF2YmFyIC5pbnB1dC1hcHBlbmQgLmJ0biB7CiAgbWFyZ2luLXRvcDogMDsKfQoKLm5hdmJhci1mb3JtIHsKICBtYXJnaW4tYm90dG9tOiAwOwogICp6b29tOiAxOwp9CgoubmF2YmFyLWZvcm06YmVmb3JlLAoubmF2YmFyLWZvcm06YWZ0ZXIgewogIGRpc3BsYXk6IHRhYmxlOwogIGxpbmUtaGVpZ2h0OiAwOwogIGNvbnRlbnQ6ICIiOwp9CgoubmF2YmFyLWZvcm06YWZ0ZXIgewogIGNsZWFyOiBib3RoOwp9CgoubmF2YmFyLWZvcm0gaW5wdXQsCi5uYXZiYXItZm9ybSBzZWxlY3QsCi5uYXZiYXItZm9ybSAucmFkaW8sCi5uYXZiYXItZm9ybSAuY2hlY2tib3ggewogIG1hcmdpbi10b3A6IDVweDsKfQoKLm5hdmJhci1mb3JtIGlucHV0LAoubmF2YmFyLWZvcm0gc2VsZWN0LAoubmF2YmFyLWZvcm0gLmJ0biB7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIG1hcmdpbi1ib3R0b206IDA7Cn0KCi5uYXZiYXItZm9ybSBpbnB1dFt0eXBlPSJpbWFnZSJdLAoubmF2YmFyLWZvcm0gaW5wdXRbdHlwZT0iY2hlY2tib3giXSwKLm5hdmJhci1mb3JtIGlucHV0W3R5cGU9InJhZGlvIl0gewogIG1hcmdpbi10b3A6IDNweDsKfQoKLm5hdmJhci1mb3JtIC5pbnB1dC1hcHBlbmQsCi5uYXZiYXItZm9ybSAuaW5wdXQtcHJlcGVuZCB7CiAgbWFyZ2luLXRvcDogNXB4OwogIHdoaXRlLXNwYWNlOiBub3dyYXA7Cn0KCi5uYXZiYXItZm9ybSAuaW5wdXQtYXBwZW5kIGlucHV0LAoubmF2YmFyLWZvcm0gLmlucHV0LXByZXBlbmQgaW5wdXQgewogIG1hcmdpbi10b3A6IDA7Cn0KCi5uYXZiYXItc2VhcmNoIHsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgZmxvYXQ6IGxlZnQ7CiAgbWFyZ2luLXRvcDogNXB4OwogIG1hcmdpbi1ib3R0b206IDA7Cn0KCi5uYXZiYXItc2VhcmNoIC5zZWFyY2gtcXVlcnkgewogIHBhZGRpbmc6IDRweCAxNHB4OwogIG1hcmdpbi1ib3R0b206IDA7CiAgZm9udC1mYW1pbHk6ICJIZWx2ZXRpY2EgTmV1ZSIsIEhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWY7CiAgZm9udC1zaXplOiAxM3B4OwogIGZvbnQtd2VpZ2h0OiBub3JtYWw7CiAgbGluZS1oZWlnaHQ6IDE7CiAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiAxNXB4OwogICAgIC1tb3otYm9yZGVyLXJhZGl1czogMTVweDsKICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDE1cHg7Cn0KCi5uYXZiYXItc3RhdGljLXRvcCB7CiAgcG9zaXRpb246IHN0YXRpYzsKICBtYXJnaW4tYm90dG9tOiAwOwp9CgoubmF2YmFyLXN0YXRpYy10b3AgLm5hdmJhci1pbm5lciB7CiAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiAwOwogICAgIC1tb3otYm9yZGVyLXJhZGl1czogMDsKICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDA7Cn0KCi5uYXZiYXItZml4ZWQtdG9wLAoubmF2YmFyLWZpeGVkLWJvdHRvbSB7CiAgcG9zaXRpb246IGZpeGVkOwogIHJpZ2h0OiAwOwogIGxlZnQ6IDA7CiAgei1pbmRleDogMTAzMDsKICBtYXJnaW4tYm90dG9tOiAwOwp9CgoubmF2YmFyLWZpeGVkLXRvcCAubmF2YmFyLWlubmVyLAoubmF2YmFyLXN0YXRpYy10b3AgLm5hdmJhci1pbm5lciB7CiAgYm9yZGVyLXdpZHRoOiAwIDAgMXB4Owp9CgoubmF2YmFyLWZpeGVkLWJvdHRvbSAubmF2YmFyLWlubmVyIHsKICBib3JkZXItd2lkdGg6IDFweCAwIDA7Cn0KCi5uYXZiYXItZml4ZWQtdG9wIC5uYXZiYXItaW5uZXIsCi5uYXZiYXItZml4ZWQtYm90dG9tIC5uYXZiYXItaW5uZXIgewogIHBhZGRpbmctcmlnaHQ6IDA7CiAgcGFkZGluZy1sZWZ0OiAwOwogIC13ZWJraXQtYm9yZGVyLXJhZGl1czogMDsKICAgICAtbW96LWJvcmRlci1yYWRpdXM6IDA7CiAgICAgICAgICBib3JkZXItcmFkaXVzOiAwOwp9CgoubmF2YmFyLXN0YXRpYy10b3AgLmNvbnRhaW5lciwKLm5hdmJhci1maXhlZC10b3AgLmNvbnRhaW5lciwKLm5hdmJhci1maXhlZC1ib3R0b20gLmNvbnRhaW5lciB7CiAgd2lkdGg6IDk0MHB4Owp9CgoubmF2YmFyLWZpeGVkLXRvcCB7CiAgdG9wOiAwOwp9CgoubmF2YmFyLWZpeGVkLXRvcCAubmF2YmFyLWlubmVyLAoubmF2YmFyLXN0YXRpYy10b3AgLm5hdmJhci1pbm5lciB7CiAgLXdlYmtpdC1ib3gtc2hhZG93OiAwIDFweCAxMHB4IHJnYmEoMCwgMCwgMCwgMC4xKTsKICAgICAtbW96LWJveC1zaGFkb3c6IDAgMXB4IDEwcHggcmdiYSgwLCAwLCAwLCAwLjEpOwogICAgICAgICAgYm94LXNoYWRvdzogMCAxcHggMTBweCByZ2JhKDAsIDAsIDAsIDAuMSk7Cn0KCi5uYXZiYXItZml4ZWQtYm90dG9tIHsKICBib3R0b206IDA7Cn0KCi5uYXZiYXItZml4ZWQtYm90dG9tIC5uYXZiYXItaW5uZXIgewogIC13ZWJraXQtYm94LXNoYWRvdzogMCAtMXB4IDEwcHggcmdiYSgwLCAwLCAwLCAwLjEpOwogICAgIC1tb3otYm94LXNoYWRvdzogMCAtMXB4IDEwcHggcmdiYSgwLCAwLCAwLCAwLjEpOwogICAgICAgICAgYm94LXNoYWRvdzogMCAtMXB4IDEwcHggcmdiYSgwLCAwLCAwLCAwLjEpOwp9CgoubmF2YmFyIC5uYXYgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICBsZWZ0OiAwOwogIGRpc3BsYXk6IGJsb2NrOwogIGZsb2F0OiBsZWZ0OwogIG1hcmdpbjogMCAxMHB4IDAgMDsKfQoKLm5hdmJhciAubmF2LnB1bGwtcmlnaHQgewogIGZsb2F0OiByaWdodDsKICBtYXJnaW4tcmlnaHQ6IDA7Cn0KCi5uYXZiYXIgLm5hdiA+IGxpIHsKICBmbG9hdDogbGVmdDsKfQoKLm5hdmJhciAubmF2ID4gbGkgPiBhIHsKICBmbG9hdDogbm9uZTsKICBwYWRkaW5nOiAxMHB4IDE1cHggMTBweDsKICBjb2xvcjogIzc3Nzc3NzsKICB0ZXh0LWRlY29yYXRpb246IG5vbmU7CiAgdGV4dC1zaGFkb3c6IDAgMXB4IDAgI2ZmZmZmZjsKfQoKLm5hdmJhciAubmF2IC5kcm9wZG93bi10b2dnbGUgLmNhcmV0IHsKICBtYXJnaW4tdG9wOiA4cHg7Cn0KCi5uYXZiYXIgLm5hdiA+IGxpID4gYTpmb2N1cywKLm5hdmJhciAubmF2ID4gbGkgPiBhOmhvdmVyIHsKICBjb2xvcjogIzMzMzMzMzsKICB0ZXh0LWRlY29yYXRpb246IG5vbmU7CiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7Cn0KCi5uYXZiYXIgLm5hdiA+IC5hY3RpdmUgPiBhLAoubmF2YmFyIC5uYXYgPiAuYWN0aXZlID4gYTpob3ZlciwKLm5hdmJhciAubmF2ID4gLmFjdGl2ZSA+IGE6Zm9jdXMgewogIGNvbG9yOiAjNTU1NTU1OwogIHRleHQtZGVjb3JhdGlvbjogbm9uZTsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTVlNWU1OwogIC13ZWJraXQtYm94LXNoYWRvdzogaW5zZXQgMCAzcHggOHB4IHJnYmEoMCwgMCwgMCwgMC4xMjUpOwogICAgIC1tb3otYm94LXNoYWRvdzogaW5zZXQgMCAzcHggOHB4IHJnYmEoMCwgMCwgMCwgMC4xMjUpOwogICAgICAgICAgYm94LXNoYWRvdzogaW5zZXQgMCAzcHggOHB4IHJnYmEoMCwgMCwgMCwgMC4xMjUpOwp9CgoubmF2YmFyIC5idG4tbmF2YmFyIHsKICBkaXNwbGF5OiBub25lOwogIGZsb2F0OiByaWdodDsKICBwYWRkaW5nOiA3cHggMTBweDsKICBtYXJnaW4tcmlnaHQ6IDVweDsKICBtYXJnaW4tbGVmdDogNXB4OwogIGNvbG9yOiAjZmZmZmZmOwogIHRleHQtc2hhZG93OiAwIC0xcHggMCByZ2JhKDAsIDAsIDAsIDAuMjUpOwogIGJhY2tncm91bmQtY29sb3I6ICNlZGVkZWQ7CiAgKmJhY2tncm91bmQtY29sb3I6ICNlNWU1ZTU7CiAgYmFja2dyb3VuZC1pbWFnZTogLW1vei1saW5lYXItZ3JhZGllbnQodG9wLCAjZjJmMmYyLCAjZTVlNWU1KTsKICBiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWdyYWRpZW50KGxpbmVhciwgMCAwLCAwIDEwMCUsIGZyb20oI2YyZjJmMiksIHRvKCNlNWU1ZTUpKTsKICBiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWxpbmVhci1ncmFkaWVudCh0b3AsICNmMmYyZjIsICNlNWU1ZTUpOwogIGJhY2tncm91bmQtaW1hZ2U6IC1vLWxpbmVhci1ncmFkaWVudCh0b3AsICNmMmYyZjIsICNlNWU1ZTUpOwogIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCh0byBib3R0b20sICNmMmYyZjIsICNlNWU1ZTUpOwogIGJhY2tncm91bmQtcmVwZWF0OiByZXBlYXQteDsKICBib3JkZXItY29sb3I6ICNlNWU1ZTUgI2U1ZTVlNSAjYmZiZmJmOwogIGJvcmRlci1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjEpIHJnYmEoMCwgMCwgMCwgMC4xKSByZ2JhKDAsIDAsIDAsIDAuMjUpOwogIGZpbHRlcjogcHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LmdyYWRpZW50KHN0YXJ0Q29sb3JzdHI9JyNmZmYyZjJmMicsIGVuZENvbG9yc3RyPScjZmZlNWU1ZTUnLCBHcmFkaWVudFR5cGU9MCk7CiAgZmlsdGVyOiBwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuZ3JhZGllbnQoZW5hYmxlZD1mYWxzZSk7CiAgLXdlYmtpdC1ib3gtc2hhZG93OiBpbnNldCAwIDFweCAwIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKSwgMCAxcHggMCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDc1KTsKICAgICAtbW96LWJveC1zaGFkb3c6IGluc2V0IDAgMXB4IDAgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjEpLCAwIDFweCAwIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4wNzUpOwogICAgICAgICAgYm94LXNoYWRvdzogaW5zZXQgMCAxcHggMCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSksIDAgMXB4IDAgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjA3NSk7Cn0KCi5uYXZiYXIgLmJ0bi1uYXZiYXI6aG92ZXIsCi5uYXZiYXIgLmJ0bi1uYXZiYXI6YWN0aXZlLAoubmF2YmFyIC5idG4tbmF2YmFyLmFjdGl2ZSwKLm5hdmJhciAuYnRuLW5hdmJhci5kaXNhYmxlZCwKLm5hdmJhciAuYnRuLW5hdmJhcltkaXNhYmxlZF0gewogIGNvbG9yOiAjZmZmZmZmOwogIGJhY2tncm91bmQtY29sb3I6ICNlNWU1ZTU7CiAgKmJhY2tncm91bmQtY29sb3I6ICNkOWQ5ZDk7Cn0KCi5uYXZiYXIgLmJ0bi1uYXZiYXI6YWN0aXZlLAoubmF2YmFyIC5idG4tbmF2YmFyLmFjdGl2ZSB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2NjY2NjYyBcOTsKfQoKLm5hdmJhciAuYnRuLW5hdmJhciAuaWNvbi1iYXIgewogIGRpc3BsYXk6IGJsb2NrOwogIHdpZHRoOiAxOHB4OwogIGhlaWdodDogMnB4OwogIGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7CiAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiAxcHg7CiAgICAgLW1vei1ib3JkZXItcmFkaXVzOiAxcHg7CiAgICAgICAgICBib3JkZXItcmFkaXVzOiAxcHg7CiAgLXdlYmtpdC1ib3gtc2hhZG93OiAwIDFweCAwIHJnYmEoMCwgMCwgMCwgMC4yNSk7CiAgICAgLW1vei1ib3gtc2hhZG93OiAwIDFweCAwIHJnYmEoMCwgMCwgMCwgMC4yNSk7CiAgICAgICAgICBib3gtc2hhZG93OiAwIDFweCAwIHJnYmEoMCwgMCwgMCwgMC4yNSk7Cn0KCi5idG4tbmF2YmFyIC5pY29uLWJhciArIC5pY29uLWJhciB7CiAgbWFyZ2luLXRvcDogM3B4Owp9CgoubmF2YmFyIC5uYXYgPiBsaSA+IC5kcm9wZG93bi1tZW51OmJlZm9yZSB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogLTdweDsKICBsZWZ0OiA5cHg7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIGJvcmRlci1yaWdodDogN3B4IHNvbGlkIHRyYW5zcGFyZW50OwogIGJvcmRlci1ib3R0b206IDdweCBzb2xpZCAjY2NjOwogIGJvcmRlci1sZWZ0OiA3cHggc29saWQgdHJhbnNwYXJlbnQ7CiAgYm9yZGVyLWJvdHRvbS1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjIpOwogIGNvbnRlbnQ6ICcnOwp9CgoubmF2YmFyIC5uYXYgPiBsaSA+IC5kcm9wZG93bi1tZW51OmFmdGVyIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiAtNnB4OwogIGxlZnQ6IDEwcHg7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIGJvcmRlci1yaWdodDogNnB4IHNvbGlkIHRyYW5zcGFyZW50OwogIGJvcmRlci1ib3R0b206IDZweCBzb2xpZCAjZmZmZmZmOwogIGJvcmRlci1sZWZ0OiA2cHggc29saWQgdHJhbnNwYXJlbnQ7CiAgY29udGVudDogJyc7Cn0KCi5uYXZiYXItZml4ZWQtYm90dG9tIC5uYXYgPiBsaSA+IC5kcm9wZG93bi1tZW51OmJlZm9yZSB7CiAgdG9wOiBhdXRvOwogIGJvdHRvbTogLTdweDsKICBib3JkZXItdG9wOiA3cHggc29saWQgI2NjYzsKICBib3JkZXItYm90dG9tOiAwOwogIGJvcmRlci10b3AtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4yKTsKfQoKLm5hdmJhci1maXhlZC1ib3R0b20gLm5hdiA+IGxpID4gLmRyb3Bkb3duLW1lbnU6YWZ0ZXIgewogIHRvcDogYXV0bzsKICBib3R0b206IC02cHg7CiAgYm9yZGVyLXRvcDogNnB4IHNvbGlkICNmZmZmZmY7CiAgYm9yZGVyLWJvdHRvbTogMDsKfQoKLm5hdmJhciAubmF2IGxpLmRyb3Bkb3duID4gYTpob3ZlciAuY2FyZXQgewogIGJvcmRlci10b3AtY29sb3I6ICM1NTU1NTU7CiAgYm9yZGVyLWJvdHRvbS1jb2xvcjogIzU1NTU1NTsKfQoKLm5hdmJhciAubmF2IGxpLmRyb3Bkb3duLm9wZW4gPiAuZHJvcGRvd24tdG9nZ2xlLAoubmF2YmFyIC5uYXYgbGkuZHJvcGRvd24uYWN0aXZlID4gLmRyb3Bkb3duLXRvZ2dsZSwKLm5hdmJhciAubmF2IGxpLmRyb3Bkb3duLm9wZW4uYWN0aXZlID4gLmRyb3Bkb3duLXRvZ2dsZSB7CiAgY29sb3I6ICM1NTU1NTU7CiAgYmFja2dyb3VuZC1jb2xvcjogI2U1ZTVlNTsKfQoKLm5hdmJhciAubmF2IGxpLmRyb3Bkb3duID4gLmRyb3Bkb3duLXRvZ2dsZSAuY2FyZXQgewogIGJvcmRlci10b3AtY29sb3I6ICM3Nzc3Nzc7CiAgYm9yZGVyLWJvdHRvbS1jb2xvcjogIzc3Nzc3NzsKfQoKLm5hdmJhciAubmF2IGxpLmRyb3Bkb3duLm9wZW4gPiAuZHJvcGRvd24tdG9nZ2xlIC5jYXJldCwKLm5hdmJhciAubmF2IGxpLmRyb3Bkb3duLmFjdGl2ZSA+IC5kcm9wZG93bi10b2dnbGUgLmNhcmV0LAoubmF2YmFyIC5uYXYgbGkuZHJvcGRvd24ub3Blbi5hY3RpdmUgPiAuZHJvcGRvd24tdG9nZ2xlIC5jYXJldCB7CiAgYm9yZGVyLXRvcC1jb2xvcjogIzU1NTU1NTsKICBib3JkZXItYm90dG9tLWNvbG9yOiAjNTU1NTU1Owp9CgoubmF2YmFyIC5wdWxsLXJpZ2h0ID4gbGkgPiAuZHJvcGRvd24tbWVudSwKLm5hdmJhciAubmF2ID4gbGkgPiAuZHJvcGRvd24tbWVudS5wdWxsLXJpZ2h0IHsKICByaWdodDogMDsKICBsZWZ0OiBhdXRvOwp9CgoubmF2YmFyIC5wdWxsLXJpZ2h0ID4gbGkgPiAuZHJvcGRvd24tbWVudTpiZWZvcmUsCi5uYXZiYXIgLm5hdiA+IGxpID4gLmRyb3Bkb3duLW1lbnUucHVsbC1yaWdodDpiZWZvcmUgewogIHJpZ2h0OiAxMnB4OwogIGxlZnQ6IGF1dG87Cn0KCi5uYXZiYXIgLnB1bGwtcmlnaHQgPiBsaSA+IC5kcm9wZG93bi1tZW51OmFmdGVyLAoubmF2YmFyIC5uYXYgPiBsaSA+IC5kcm9wZG93bi1tZW51LnB1bGwtcmlnaHQ6YWZ0ZXIgewogIHJpZ2h0OiAxM3B4OwogIGxlZnQ6IGF1dG87Cn0KCi5uYXZiYXIgLnB1bGwtcmlnaHQgPiBsaSA+IC5kcm9wZG93bi1tZW51IC5kcm9wZG93bi1tZW51LAoubmF2YmFyIC5uYXYgPiBsaSA+IC5kcm9wZG93bi1tZW51LnB1bGwtcmlnaHQgLmRyb3Bkb3duLW1lbnUgewogIHJpZ2h0OiAxMDAlOwogIGxlZnQ6IGF1dG87CiAgbWFyZ2luLXJpZ2h0OiAtMXB4OwogIG1hcmdpbi1sZWZ0OiAwOwogIC13ZWJraXQtYm9yZGVyLXJhZGl1czogNnB4IDAgNnB4IDZweDsKICAgICAtbW96LWJvcmRlci1yYWRpdXM6IDZweCAwIDZweCA2cHg7CiAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHggMCA2cHggNnB4Owp9CgoubmF2YmFyLWludmVyc2UgLm5hdmJhci1pbm5lciB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzFiMWIxYjsKICBiYWNrZ3JvdW5kLWltYWdlOiAtbW96LWxpbmVhci1ncmFkaWVudCh0b3AsICMyMjIyMjIsICMxMTExMTEpOwogIGJhY2tncm91bmQtaW1hZ2U6IC13ZWJraXQtZ3JhZGllbnQobGluZWFyLCAwIDAsIDAgMTAwJSwgZnJvbSgjMjIyMjIyKSwgdG8oIzExMTExMSkpOwogIGJhY2tncm91bmQtaW1hZ2U6IC13ZWJraXQtbGluZWFyLWdyYWRpZW50KHRvcCwgIzIyMjIyMiwgIzExMTExMSk7CiAgYmFja2dyb3VuZC1pbWFnZTogLW8tbGluZWFyLWdyYWRpZW50KHRvcCwgIzIyMjIyMiwgIzExMTExMSk7CiAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwgIzIyMjIyMiwgIzExMTExMSk7CiAgYmFja2dyb3VuZC1yZXBlYXQ6IHJlcGVhdC14OwogIGJvcmRlci1jb2xvcjogIzI1MjUyNTsKICBmaWx0ZXI6IHByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5ncmFkaWVudChzdGFydENvbG9yc3RyPScjZmYyMjIyMjInLCBlbmRDb2xvcnN0cj0nI2ZmMTExMTExJywgR3JhZGllbnRUeXBlPTApOwp9CgoubmF2YmFyLWludmVyc2UgLmJyYW5kLAoubmF2YmFyLWludmVyc2UgLm5hdiA+IGxpID4gYSB7CiAgY29sb3I6ICM5OTk5OTk7CiAgdGV4dC1zaGFkb3c6IDAgLTFweCAwIHJnYmEoMCwgMCwgMCwgMC4yNSk7Cn0KCi5uYXZiYXItaW52ZXJzZSAuYnJhbmQ6aG92ZXIsCi5uYXZiYXItaW52ZXJzZSAubmF2ID4gbGkgPiBhOmhvdmVyIHsKICBjb2xvcjogI2ZmZmZmZjsKfQoKLm5hdmJhci1pbnZlcnNlIC5icmFuZCB7CiAgY29sb3I6ICM5OTk5OTk7Cn0KCi5uYXZiYXItaW52ZXJzZSAubmF2YmFyLXRleHQgewogIGNvbG9yOiAjOTk5OTk5Owp9CgoubmF2YmFyLWludmVyc2UgLm5hdiA+IGxpID4gYTpmb2N1cywKLm5hdmJhci1pbnZlcnNlIC5uYXYgPiBsaSA+IGE6aG92ZXIgewogIGNvbG9yOiAjZmZmZmZmOwogIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50Owp9CgoubmF2YmFyLWludmVyc2UgLm5hdiAuYWN0aXZlID4gYSwKLm5hdmJhci1pbnZlcnNlIC5uYXYgLmFjdGl2ZSA+IGE6aG92ZXIsCi5uYXZiYXItaW52ZXJzZSAubmF2IC5hY3RpdmUgPiBhOmZvY3VzIHsKICBjb2xvcjogI2ZmZmZmZjsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMTExMTExOwp9CgoubmF2YmFyLWludmVyc2UgLm5hdmJhci1saW5rIHsKICBjb2xvcjogIzk5OTk5OTsKfQoKLm5hdmJhci1pbnZlcnNlIC5uYXZiYXItbGluazpob3ZlciB7CiAgY29sb3I6ICNmZmZmZmY7Cn0KCi5uYXZiYXItaW52ZXJzZSAuZGl2aWRlci12ZXJ0aWNhbCB7CiAgYm9yZGVyLXJpZ2h0LWNvbG9yOiAjMjIyMjIyOwogIGJvcmRlci1sZWZ0LWNvbG9yOiAjMTExMTExOwp9CgoubmF2YmFyLWludmVyc2UgLm5hdiBsaS5kcm9wZG93bi5vcGVuID4gLmRyb3Bkb3duLXRvZ2dsZSwKLm5hdmJhci1pbnZlcnNlIC5uYXYgbGkuZHJvcGRvd24uYWN0aXZlID4gLmRyb3Bkb3duLXRvZ2dsZSwKLm5hdmJhci1pbnZlcnNlIC5uYXYgbGkuZHJvcGRvd24ub3Blbi5hY3RpdmUgPiAuZHJvcGRvd24tdG9nZ2xlIHsKICBjb2xvcjogI2ZmZmZmZjsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMTExMTExOwp9CgoubmF2YmFyLWludmVyc2UgLm5hdiBsaS5kcm9wZG93biA+IGE6aG92ZXIgLmNhcmV0IHsKICBib3JkZXItdG9wLWNvbG9yOiAjZmZmZmZmOwogIGJvcmRlci1ib3R0b20tY29sb3I6ICNmZmZmZmY7Cn0KCi5uYXZiYXItaW52ZXJzZSAubmF2IGxpLmRyb3Bkb3duID4gLmRyb3Bkb3duLXRvZ2dsZSAuY2FyZXQgewogIGJvcmRlci10b3AtY29sb3I6ICM5OTk5OTk7CiAgYm9yZGVyLWJvdHRvbS1jb2xvcjogIzk5OTk5OTsKfQoKLm5hdmJhci1pbnZlcnNlIC5uYXYgbGkuZHJvcGRvd24ub3BlbiA+IC5kcm9wZG93bi10b2dnbGUgLmNhcmV0LAoubmF2YmFyLWludmVyc2UgLm5hdiBsaS5kcm9wZG93bi5hY3RpdmUgPiAuZHJvcGRvd24tdG9nZ2xlIC5jYXJldCwKLm5hdmJhci1pbnZlcnNlIC5uYXYgbGkuZHJvcGRvd24ub3Blbi5hY3RpdmUgPiAuZHJvcGRvd24tdG9nZ2xlIC5jYXJldCB7CiAgYm9yZGVyLXRvcC1jb2xvcjogI2ZmZmZmZjsKICBib3JkZXItYm90dG9tLWNvbG9yOiAjZmZmZmZmOwp9CgoubmF2YmFyLWludmVyc2UgLm5hdmJhci1zZWFyY2ggLnNlYXJjaC1xdWVyeSB7CiAgY29sb3I6ICNmZmZmZmY7CiAgYmFja2dyb3VuZC1jb2xvcjogIzUxNTE1MTsKICBib3JkZXItY29sb3I6ICMxMTExMTE7CiAgLXdlYmtpdC1ib3gtc2hhZG93OiBpbnNldCAwIDFweCAycHggcmdiYSgwLCAwLCAwLCAwLjEpLCAwIDFweCAwIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSk7CiAgICAgLW1vei1ib3gtc2hhZG93OiBpbnNldCAwIDFweCAycHggcmdiYSgwLCAwLCAwLCAwLjEpLCAwIDFweCAwIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSk7CiAgICAgICAgICBib3gtc2hhZG93OiBpbnNldCAwIDFweCAycHggcmdiYSgwLCAwLCAwLCAwLjEpLCAwIDFweCAwIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSk7CiAgLXdlYmtpdC10cmFuc2l0aW9uOiBub25lOwogICAgIC1tb3otdHJhbnNpdGlvbjogbm9uZTsKICAgICAgIC1vLXRyYW5zaXRpb246IG5vbmU7CiAgICAgICAgICB0cmFuc2l0aW9uOiBub25lOwp9CgoubmF2YmFyLWludmVyc2UgLm5hdmJhci1zZWFyY2ggLnNlYXJjaC1xdWVyeTotbW96LXBsYWNlaG9sZGVyIHsKICBjb2xvcjogI2NjY2NjYzsKfQoKLm5hdmJhci1pbnZlcnNlIC5uYXZiYXItc2VhcmNoIC5zZWFyY2gtcXVlcnk6LW1zLWlucHV0LXBsYWNlaG9sZGVyIHsKICBjb2xvcjogI2NjY2NjYzsKfQoKLm5hdmJhci1pbnZlcnNlIC5uYXZiYXItc2VhcmNoIC5zZWFyY2gtcXVlcnk6Oi13ZWJraXQtaW5wdXQtcGxhY2Vob2xkZXIgewogIGNvbG9yOiAjY2NjY2NjOwp9CgoubmF2YmFyLWludmVyc2UgLm5hdmJhci1zZWFyY2ggLnNlYXJjaC1xdWVyeTpmb2N1cywKLm5hdmJhci1pbnZlcnNlIC5uYXZiYXItc2VhcmNoIC5zZWFyY2gtcXVlcnkuZm9jdXNlZCB7CiAgcGFkZGluZzogNXB4IDE1cHg7CiAgY29sb3I6ICMzMzMzMzM7CiAgdGV4dC1zaGFkb3c6IDAgMXB4IDAgI2ZmZmZmZjsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmOwogIGJvcmRlcjogMDsKICBvdXRsaW5lOiAwOwogIC13ZWJraXQtYm94LXNoYWRvdzogMCAwIDNweCByZ2JhKDAsIDAsIDAsIDAuMTUpOwogICAgIC1tb3otYm94LXNoYWRvdzogMCAwIDNweCByZ2JhKDAsIDAsIDAsIDAuMTUpOwogICAgICAgICAgYm94LXNoYWRvdzogMCAwIDNweCByZ2JhKDAsIDAsIDAsIDAuMTUpOwp9CgoubmF2YmFyLWludmVyc2UgLmJ0bi1uYXZiYXIgewogIGNvbG9yOiAjZmZmZmZmOwogIHRleHQtc2hhZG93OiAwIC0xcHggMCByZ2JhKDAsIDAsIDAsIDAuMjUpOwogIGJhY2tncm91bmQtY29sb3I6ICMwZTBlMGU7CiAgKmJhY2tncm91bmQtY29sb3I6ICMwNDA0MDQ7CiAgYmFja2dyb3VuZC1pbWFnZTogLW1vei1saW5lYXItZ3JhZGllbnQodG9wLCAjMTUxNTE1LCAjMDQwNDA0KTsKICBiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWdyYWRpZW50KGxpbmVhciwgMCAwLCAwIDEwMCUsIGZyb20oIzE1MTUxNSksIHRvKCMwNDA0MDQpKTsKICBiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWxpbmVhci1ncmFkaWVudCh0b3AsICMxNTE1MTUsICMwNDA0MDQpOwogIGJhY2tncm91bmQtaW1hZ2U6IC1vLWxpbmVhci1ncmFkaWVudCh0b3AsICMxNTE1MTUsICMwNDA0MDQpOwogIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCh0byBib3R0b20sICMxNTE1MTUsICMwNDA0MDQpOwogIGJhY2tncm91bmQtcmVwZWF0OiByZXBlYXQteDsKICBib3JkZXItY29sb3I6ICMwNDA0MDQgIzA0MDQwNCAjMDAwMDAwOwogIGJvcmRlci1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjEpIHJnYmEoMCwgMCwgMCwgMC4xKSByZ2JhKDAsIDAsIDAsIDAuMjUpOwogIGZpbHRlcjogcHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LmdyYWRpZW50KHN0YXJ0Q29sb3JzdHI9JyNmZjE1MTUxNScsIGVuZENvbG9yc3RyPScjZmYwNDA0MDQnLCBHcmFkaWVudFR5cGU9MCk7CiAgZmlsdGVyOiBwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuZ3JhZGllbnQoZW5hYmxlZD1mYWxzZSk7Cn0KCi5uYXZiYXItaW52ZXJzZSAuYnRuLW5hdmJhcjpob3ZlciwKLm5hdmJhci1pbnZlcnNlIC5idG4tbmF2YmFyOmFjdGl2ZSwKLm5hdmJhci1pbnZlcnNlIC5idG4tbmF2YmFyLmFjdGl2ZSwKLm5hdmJhci1pbnZlcnNlIC5idG4tbmF2YmFyLmRpc2FibGVkLAoubmF2YmFyLWludmVyc2UgLmJ0bi1uYXZiYXJbZGlzYWJsZWRdIHsKICBjb2xvcjogI2ZmZmZmZjsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDQwNDA0OwogICpiYWNrZ3JvdW5kLWNvbG9yOiAjMDAwMDAwOwp9CgoubmF2YmFyLWludmVyc2UgLmJ0bi1uYXZiYXI6YWN0aXZlLAoubmF2YmFyLWludmVyc2UgLmJ0bi1uYXZiYXIuYWN0aXZlIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDAwMDAwIFw5Owp9CgouYnJlYWRjcnVtYiB7CiAgcGFkZGluZzogOHB4IDE1cHg7CiAgbWFyZ2luOiAwIDAgMjBweDsKICBsaXN0LXN0eWxlOiBub25lOwogIGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7CiAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiA0cHg7CiAgICAgLW1vei1ib3JkZXItcmFkaXVzOiA0cHg7CiAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7Cn0KCi5icmVhZGNydW1iID4gbGkgewogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAqZGlzcGxheTogaW5saW5lOwogIHRleHQtc2hhZG93OiAwIDFweCAwICNmZmZmZmY7CiAgKnpvb206IDE7Cn0KCi5icmVhZGNydW1iID4gbGkgPiAuZGl2aWRlciB7CiAgcGFkZGluZzogMCA1cHg7CiAgY29sb3I6ICNjY2M7Cn0KCi5icmVhZGNydW1iID4gLmFjdGl2ZSB7CiAgY29sb3I6ICM5OTk5OTk7Cn0KCi5wYWdpbmF0aW9uIHsKICBtYXJnaW46IDIwcHggMDsKfQoKLnBhZ2luYXRpb24gdWwgewogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAqZGlzcGxheTogaW5saW5lOwogIG1hcmdpbi1ib3R0b206IDA7CiAgbWFyZ2luLWxlZnQ6IDA7CiAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiA0cHg7CiAgICAgLW1vei1ib3JkZXItcmFkaXVzOiA0cHg7CiAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7CiAgKnpvb206IDE7CiAgLXdlYmtpdC1ib3gtc2hhZG93OiAwIDFweCAycHggcmdiYSgwLCAwLCAwLCAwLjA1KTsKICAgICAtbW96LWJveC1zaGFkb3c6IDAgMXB4IDJweCByZ2JhKDAsIDAsIDAsIDAuMDUpOwogICAgICAgICAgYm94LXNoYWRvdzogMCAxcHggMnB4IHJnYmEoMCwgMCwgMCwgMC4wNSk7Cn0KCi5wYWdpbmF0aW9uIHVsID4gbGkgewogIGRpc3BsYXk6IGlubGluZTsKfQoKLnBhZ2luYXRpb24gdWwgPiBsaSA+IGEsCi5wYWdpbmF0aW9uIHVsID4gbGkgPiBzcGFuIHsKICBmbG9hdDogbGVmdDsKICBwYWRkaW5nOiA0cHggMTJweDsKICBsaW5lLWhlaWdodDogMjBweDsKICB0ZXh0LWRlY29yYXRpb246IG5vbmU7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjsKICBib3JkZXI6IDFweCBzb2xpZCAjZGRkZGRkOwogIGJvcmRlci1sZWZ0LXdpZHRoOiAwOwp9CgoucGFnaW5hdGlvbiB1bCA+IGxpID4gYTpob3ZlciwKLnBhZ2luYXRpb24gdWwgPiAuYWN0aXZlID4gYSwKLnBhZ2luYXRpb24gdWwgPiAuYWN0aXZlID4gc3BhbiB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2Y1ZjVmNTsKfQoKLnBhZ2luYXRpb24gdWwgPiAuYWN0aXZlID4gYSwKLnBhZ2luYXRpb24gdWwgPiAuYWN0aXZlID4gc3BhbiB7CiAgY29sb3I6ICM5OTk5OTk7CiAgY3Vyc29yOiBkZWZhdWx0Owp9CgoucGFnaW5hdGlvbiB1bCA+IC5kaXNhYmxlZCA+IHNwYW4sCi5wYWdpbmF0aW9uIHVsID4gLmRpc2FibGVkID4gYSwKLnBhZ2luYXRpb24gdWwgPiAuZGlzYWJsZWQgPiBhOmhvdmVyIHsKICBjb2xvcjogIzk5OTk5OTsKICBjdXJzb3I6IGRlZmF1bHQ7CiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7Cn0KCi5wYWdpbmF0aW9uIHVsID4gbGk6Zmlyc3QtY2hpbGQgPiBhLAoucGFnaW5hdGlvbiB1bCA+IGxpOmZpcnN0LWNoaWxkID4gc3BhbiB7CiAgYm9yZGVyLWxlZnQtd2lkdGg6IDFweDsKICAtd2Via2l0LWJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDRweDsKICAgICAgICAgIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDRweDsKICAtd2Via2l0LWJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDRweDsKICAgICAgICAgIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDRweDsKICAtbW96LWJvcmRlci1yYWRpdXMtYm90dG9tbGVmdDogNHB4OwogIC1tb3otYm9yZGVyLXJhZGl1cy10b3BsZWZ0OiA0cHg7Cn0KCi5wYWdpbmF0aW9uIHVsID4gbGk6bGFzdC1jaGlsZCA+IGEsCi5wYWdpbmF0aW9uIHVsID4gbGk6bGFzdC1jaGlsZCA+IHNwYW4gewogIC13ZWJraXQtYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDRweDsKICAgICAgICAgIGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiA0cHg7CiAgLXdlYmtpdC1ib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogNHB4OwogICAgICAgICAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDRweDsKICAtbW96LWJvcmRlci1yYWRpdXMtdG9wcmlnaHQ6IDRweDsKICAtbW96LWJvcmRlci1yYWRpdXMtYm90dG9tcmlnaHQ6IDRweDsKfQoKLnBhZ2luYXRpb24tY2VudGVyZWQgewogIHRleHQtYWxpZ246IGNlbnRlcjsKfQoKLnBhZ2luYXRpb24tcmlnaHQgewogIHRleHQtYWxpZ246IHJpZ2h0Owp9CgoucGFnaW5hdGlvbi1sYXJnZSB1bCA+IGxpID4gYSwKLnBhZ2luYXRpb24tbGFyZ2UgdWwgPiBsaSA+IHNwYW4gewogIHBhZGRpbmc6IDExcHggMTlweDsKICBmb250LXNpemU6IDE3LjVweDsKfQoKLnBhZ2luYXRpb24tbGFyZ2UgdWwgPiBsaTpmaXJzdC1jaGlsZCA+IGEsCi5wYWdpbmF0aW9uLWxhcmdlIHVsID4gbGk6Zmlyc3QtY2hpbGQgPiBzcGFuIHsKICAtd2Via2l0LWJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDZweDsKICAgICAgICAgIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDZweDsKICAtd2Via2l0LWJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDZweDsKICAgICAgICAgIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDZweDsKICAtbW96LWJvcmRlci1yYWRpdXMtYm90dG9tbGVmdDogNnB4OwogIC1tb3otYm9yZGVyLXJhZGl1cy10b3BsZWZ0OiA2cHg7Cn0KCi5wYWdpbmF0aW9uLWxhcmdlIHVsID4gbGk6bGFzdC1jaGlsZCA+IGEsCi5wYWdpbmF0aW9uLWxhcmdlIHVsID4gbGk6bGFzdC1jaGlsZCA+IHNwYW4gewogIC13ZWJraXQtYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDZweDsKICAgICAgICAgIGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiA2cHg7CiAgLXdlYmtpdC1ib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogNnB4OwogICAgICAgICAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDZweDsKICAtbW96LWJvcmRlci1yYWRpdXMtdG9wcmlnaHQ6IDZweDsKICAtbW96LWJvcmRlci1yYWRpdXMtYm90dG9tcmlnaHQ6IDZweDsKfQoKLnBhZ2luYXRpb24tbWluaSB1bCA+IGxpOmZpcnN0LWNoaWxkID4gYSwKLnBhZ2luYXRpb24tc21hbGwgdWwgPiBsaTpmaXJzdC1jaGlsZCA+IGEsCi5wYWdpbmF0aW9uLW1pbmkgdWwgPiBsaTpmaXJzdC1jaGlsZCA+IHNwYW4sCi5wYWdpbmF0aW9uLXNtYWxsIHVsID4gbGk6Zmlyc3QtY2hpbGQgPiBzcGFuIHsKICAtd2Via2l0LWJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDNweDsKICAgICAgICAgIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDNweDsKICAtd2Via2l0LWJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDNweDsKICAgICAgICAgIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDNweDsKICAtbW96LWJvcmRlci1yYWRpdXMtYm90dG9tbGVmdDogM3B4OwogIC1tb3otYm9yZGVyLXJhZGl1cy10b3BsZWZ0OiAzcHg7Cn0KCi5wYWdpbmF0aW9uLW1pbmkgdWwgPiBsaTpsYXN0LWNoaWxkID4gYSwKLnBhZ2luYXRpb24tc21hbGwgdWwgPiBsaTpsYXN0LWNoaWxkID4gYSwKLnBhZ2luYXRpb24tbWluaSB1bCA+IGxpOmxhc3QtY2hpbGQgPiBzcGFuLAoucGFnaW5hdGlvbi1zbWFsbCB1bCA+IGxpOmxhc3QtY2hpbGQgPiBzcGFuIHsKICAtd2Via2l0LWJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiAzcHg7CiAgICAgICAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogM3B4OwogIC13ZWJraXQtYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDNweDsKICAgICAgICAgIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiAzcHg7CiAgLW1vei1ib3JkZXItcmFkaXVzLXRvcHJpZ2h0OiAzcHg7CiAgLW1vei1ib3JkZXItcmFkaXVzLWJvdHRvbXJpZ2h0OiAzcHg7Cn0KCi5wYWdpbmF0aW9uLXNtYWxsIHVsID4gbGkgPiBhLAoucGFnaW5hdGlvbi1zbWFsbCB1bCA+IGxpID4gc3BhbiB7CiAgcGFkZGluZzogMnB4IDEwcHg7CiAgZm9udC1zaXplOiAxMS45cHg7Cn0KCi5wYWdpbmF0aW9uLW1pbmkgdWwgPiBsaSA+IGEsCi5wYWdpbmF0aW9uLW1pbmkgdWwgPiBsaSA+IHNwYW4gewogIHBhZGRpbmc6IDAgNnB4OwogIGZvbnQtc2l6ZTogMTAuNXB4Owp9CgoucGFnZXIgewogIG1hcmdpbjogMjBweCAwOwogIHRleHQtYWxpZ246IGNlbnRlcjsKICBsaXN0LXN0eWxlOiBub25lOwogICp6b29tOiAxOwp9CgoucGFnZXI6YmVmb3JlLAoucGFnZXI6YWZ0ZXIgewogIGRpc3BsYXk6IHRhYmxlOwogIGxpbmUtaGVpZ2h0OiAwOwogIGNvbnRlbnQ6ICIiOwp9CgoucGFnZXI6YWZ0ZXIgewogIGNsZWFyOiBib3RoOwp9CgoucGFnZXIgbGkgewogIGRpc3BsYXk6IGlubGluZTsKfQoKLnBhZ2VyIGxpID4gYSwKLnBhZ2VyIGxpID4gc3BhbiB7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIHBhZGRpbmc6IDVweCAxNHB4OwogIGJhY2tncm91bmQtY29sb3I6ICNmZmY7CiAgYm9yZGVyOiAxcHggc29saWQgI2RkZDsKICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDE1cHg7CiAgICAgLW1vei1ib3JkZXItcmFkaXVzOiAxNXB4OwogICAgICAgICAgYm9yZGVyLXJhZGl1czogMTVweDsKfQoKLnBhZ2VyIGxpID4gYTpob3ZlciB7CiAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwogIGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7Cn0KCi5wYWdlciAubmV4dCA+IGEsCi5wYWdlciAubmV4dCA+IHNwYW4gewogIGZsb2F0OiByaWdodDsKfQoKLnBhZ2VyIC5wcmV2aW91cyA+IGEsCi5wYWdlciAucHJldmlvdXMgPiBzcGFuIHsKICBmbG9hdDogbGVmdDsKfQoKLnBhZ2VyIC5kaXNhYmxlZCA+IGEsCi5wYWdlciAuZGlzYWJsZWQgPiBhOmhvdmVyLAoucGFnZXIgLmRpc2FibGVkID4gc3BhbiB7CiAgY29sb3I6ICM5OTk5OTk7CiAgY3Vyc29yOiBkZWZhdWx0OwogIGJhY2tncm91bmQtY29sb3I6ICNmZmY7Cn0KCi5tb2RhbC1iYWNrZHJvcCB7CiAgcG9zaXRpb246IGZpeGVkOwogIHRvcDogMDsKICByaWdodDogMDsKICBib3R0b206IDA7CiAgbGVmdDogMDsKICB6LWluZGV4OiAxMDQwOwogIGJhY2tncm91bmQtY29sb3I6ICMwMDAwMDA7Cn0KCi5tb2RhbC1iYWNrZHJvcC5mYWRlIHsKICBvcGFjaXR5OiAwOwp9CgoubW9kYWwtYmFja2Ryb3AsCi5tb2RhbC1iYWNrZHJvcC5mYWRlLmluIHsKICBvcGFjaXR5OiAwLjg7CiAgZmlsdGVyOiBhbHBoYShvcGFjaXR5PTgwKTsKfQoKLm1vZGFsIHsKICBwb3NpdGlvbjogZml4ZWQ7CiAgdG9wOiAxMCU7CiAgbGVmdDogNTAlOwogIHotaW5kZXg6IDEwNTA7CiAgd2lkdGg6IDU2MHB4OwogIG1hcmdpbi1sZWZ0OiAtMjgwcHg7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjsKICBib3JkZXI6IDFweCBzb2xpZCAjOTk5OwogIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4zKTsKICAqYm9yZGVyOiAxcHggc29saWQgIzk5OTsKICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDZweDsKICAgICAtbW96LWJvcmRlci1yYWRpdXM6IDZweDsKICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDsKICBvdXRsaW5lOiBub25lOwogIC13ZWJraXQtYm94LXNoYWRvdzogMCAzcHggN3B4IHJnYmEoMCwgMCwgMCwgMC4zKTsKICAgICAtbW96LWJveC1zaGFkb3c6IDAgM3B4IDdweCByZ2JhKDAsIDAsIDAsIDAuMyk7CiAgICAgICAgICBib3gtc2hhZG93OiAwIDNweCA3cHggcmdiYSgwLCAwLCAwLCAwLjMpOwogIC13ZWJraXQtYmFja2dyb3VuZC1jbGlwOiBwYWRkaW5nLWJveDsKICAgICAtbW96LWJhY2tncm91bmQtY2xpcDogcGFkZGluZy1ib3g7CiAgICAgICAgICBiYWNrZ3JvdW5kLWNsaXA6IHBhZGRpbmctYm94Owp9CgoubW9kYWwuZmFkZSB7CiAgdG9wOiAtMjUlOwogIC13ZWJraXQtdHJhbnNpdGlvbjogb3BhY2l0eSAwLjNzIGxpbmVhciwgdG9wIDAuM3MgZWFzZS1vdXQ7CiAgICAgLW1vei10cmFuc2l0aW9uOiBvcGFjaXR5IDAuM3MgbGluZWFyLCB0b3AgMC4zcyBlYXNlLW91dDsKICAgICAgIC1vLXRyYW5zaXRpb246IG9wYWNpdHkgMC4zcyBsaW5lYXIsIHRvcCAwLjNzIGVhc2Utb3V0OwogICAgICAgICAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjNzIGxpbmVhciwgdG9wIDAuM3MgZWFzZS1vdXQ7Cn0KCi5tb2RhbC5mYWRlLmluIHsKICB0b3A6IDEwJTsKfQoKLm1vZGFsLWhlYWRlciB7CiAgcGFkZGluZzogOXB4IDE1cHg7CiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlZWU7Cn0KCi5tb2RhbC1oZWFkZXIgLmNsb3NlIHsKICBtYXJnaW4tdG9wOiAycHg7Cn0KCi5tb2RhbC1oZWFkZXIgaDMgewogIG1hcmdpbjogMDsKICBsaW5lLWhlaWdodDogMzBweDsKfQoKLm1vZGFsLWJvZHkgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICBtYXgtaGVpZ2h0OiA0MDBweDsKICBwYWRkaW5nOiAxNXB4OwogIG92ZXJmbG93LXk6IGF1dG87Cn0KCi5tb2RhbC1mb3JtIHsKICBtYXJnaW4tYm90dG9tOiAwOwp9CgoubW9kYWwtZm9vdGVyIHsKICBwYWRkaW5nOiAxNHB4IDE1cHggMTVweDsKICBtYXJnaW4tYm90dG9tOiAwOwogIHRleHQtYWxpZ246IHJpZ2h0OwogIGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7CiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNkZGQ7CiAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiAwIDAgNnB4IDZweDsKICAgICAtbW96LWJvcmRlci1yYWRpdXM6IDAgMCA2cHggNnB4OwogICAgICAgICAgYm9yZGVyLXJhZGl1czogMCAwIDZweCA2cHg7CiAgKnpvb206IDE7CiAgLXdlYmtpdC1ib3gtc2hhZG93OiBpbnNldCAwIDFweCAwICNmZmZmZmY7CiAgICAgLW1vei1ib3gtc2hhZG93OiBpbnNldCAwIDFweCAwICNmZmZmZmY7CiAgICAgICAgICBib3gtc2hhZG93OiBpbnNldCAwIDFweCAwICNmZmZmZmY7Cn0KCi5tb2RhbC1mb290ZXI6YmVmb3JlLAoubW9kYWwtZm9vdGVyOmFmdGVyIHsKICBkaXNwbGF5OiB0YWJsZTsKICBsaW5lLWhlaWdodDogMDsKICBjb250ZW50OiAiIjsKfQoKLm1vZGFsLWZvb3RlcjphZnRlciB7CiAgY2xlYXI6IGJvdGg7Cn0KCi5tb2RhbC1mb290ZXIgLmJ0biArIC5idG4gewogIG1hcmdpbi1ib3R0b206IDA7CiAgbWFyZ2luLWxlZnQ6IDVweDsKfQoKLm1vZGFsLWZvb3RlciAuYnRuLWdyb3VwIC5idG4gKyAuYnRuIHsKICBtYXJnaW4tbGVmdDogLTFweDsKfQoKLm1vZGFsLWZvb3RlciAuYnRuLWJsb2NrICsgLmJ0bi1ibG9jayB7CiAgbWFyZ2luLWxlZnQ6IDA7Cn0KCi50b29sdGlwIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgei1pbmRleDogMTAzMDsKICBkaXNwbGF5OiBibG9jazsKICBwYWRkaW5nOiA1cHg7CiAgZm9udC1zaXplOiAxMXB4OwogIG9wYWNpdHk6IDA7CiAgZmlsdGVyOiBhbHBoYShvcGFjaXR5PTApOwogIHZpc2liaWxpdHk6IHZpc2libGU7Cn0KCi50b29sdGlwLmluIHsKICBvcGFjaXR5OiAwLjg7CiAgZmlsdGVyOiBhbHBoYShvcGFjaXR5PTgwKTsKfQoKLnRvb2x0aXAudG9wIHsKICBtYXJnaW4tdG9wOiAtM3B4Owp9CgoudG9vbHRpcC5yaWdodCB7CiAgbWFyZ2luLWxlZnQ6IDNweDsKfQoKLnRvb2x0aXAuYm90dG9tIHsKICBtYXJnaW4tdG9wOiAzcHg7Cn0KCi50b29sdGlwLmxlZnQgewogIG1hcmdpbi1sZWZ0OiAtM3B4Owp9CgoudG9vbHRpcC1pbm5lciB7CiAgbWF4LXdpZHRoOiAyMDBweDsKICBwYWRkaW5nOiAzcHggOHB4OwogIGNvbG9yOiAjZmZmZmZmOwogIHRleHQtYWxpZ246IGNlbnRlcjsKICB0ZXh0LWRlY29yYXRpb246IG5vbmU7CiAgYmFja2dyb3VuZC1jb2xvcjogIzAwMDAwMDsKICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDRweDsKICAgICAtbW96LWJvcmRlci1yYWRpdXM6IDRweDsKICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsKfQoKLnRvb2x0aXAtYXJyb3cgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB3aWR0aDogMDsKICBoZWlnaHQ6IDA7CiAgYm9yZGVyLWNvbG9yOiB0cmFuc3BhcmVudDsKICBib3JkZXItc3R5bGU6IHNvbGlkOwp9CgoudG9vbHRpcC50b3AgLnRvb2x0aXAtYXJyb3cgewogIGJvdHRvbTogMDsKICBsZWZ0OiA1MCU7CiAgbWFyZ2luLWxlZnQ6IC01cHg7CiAgYm9yZGVyLXRvcC1jb2xvcjogIzAwMDAwMDsKICBib3JkZXItd2lkdGg6IDVweCA1cHggMDsKfQoKLnRvb2x0aXAucmlnaHQgLnRvb2x0aXAtYXJyb3cgewogIHRvcDogNTAlOwogIGxlZnQ6IDA7CiAgbWFyZ2luLXRvcDogLTVweDsKICBib3JkZXItcmlnaHQtY29sb3I6ICMwMDAwMDA7CiAgYm9yZGVyLXdpZHRoOiA1cHggNXB4IDVweCAwOwp9CgoudG9vbHRpcC5sZWZ0IC50b29sdGlwLWFycm93IHsKICB0b3A6IDUwJTsKICByaWdodDogMDsKICBtYXJnaW4tdG9wOiAtNXB4OwogIGJvcmRlci1sZWZ0LWNvbG9yOiAjMDAwMDAwOwogIGJvcmRlci13aWR0aDogNXB4IDAgNXB4IDVweDsKfQoKLnRvb2x0aXAuYm90dG9tIC50b29sdGlwLWFycm93IHsKICB0b3A6IDA7CiAgbGVmdDogNTAlOwogIG1hcmdpbi1sZWZ0OiAtNXB4OwogIGJvcmRlci1ib3R0b20tY29sb3I6ICMwMDAwMDA7CiAgYm9yZGVyLXdpZHRoOiAwIDVweCA1cHg7Cn0KCi5wb3BvdmVyIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiAwOwogIGxlZnQ6IDA7CiAgei1pbmRleDogMTAxMDsKICBkaXNwbGF5OiBub25lOwogIHdpZHRoOiAyMzZweDsKICBwYWRkaW5nOiAxcHg7CiAgdGV4dC1hbGlnbjogbGVmdDsKICB3aGl0ZS1zcGFjZTogbm9ybWFsOwogIGJhY2tncm91bmQtY29sb3I6ICNmZmZmZmY7CiAgYm9yZGVyOiAxcHggc29saWQgI2NjYzsKICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMik7CiAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiA2cHg7CiAgICAgLW1vei1ib3JkZXItcmFkaXVzOiA2cHg7CiAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7CiAgLXdlYmtpdC1ib3gtc2hhZG93OiAwIDVweCAxMHB4IHJnYmEoMCwgMCwgMCwgMC4yKTsKICAgICAtbW96LWJveC1zaGFkb3c6IDAgNXB4IDEwcHggcmdiYSgwLCAwLCAwLCAwLjIpOwogICAgICAgICAgYm94LXNoYWRvdzogMCA1cHggMTBweCByZ2JhKDAsIDAsIDAsIDAuMik7CiAgLXdlYmtpdC1iYWNrZ3JvdW5kLWNsaXA6IHBhZGRpbmctYm94OwogICAgIC1tb3otYmFja2dyb3VuZC1jbGlwOiBwYWRkaW5nOwogICAgICAgICAgYmFja2dyb3VuZC1jbGlwOiBwYWRkaW5nLWJveDsKfQoKLnBvcG92ZXIudG9wIHsKICBtYXJnaW4tdG9wOiAtMTBweDsKfQoKLnBvcG92ZXIucmlnaHQgewogIG1hcmdpbi1sZWZ0OiAxMHB4Owp9CgoucG9wb3Zlci5ib3R0b20gewogIG1hcmdpbi10b3A6IDEwcHg7Cn0KCi5wb3BvdmVyLmxlZnQgewogIG1hcmdpbi1sZWZ0OiAtMTBweDsKfQoKLnBvcG92ZXItdGl0bGUgewogIHBhZGRpbmc6IDhweCAxNHB4OwogIG1hcmdpbjogMDsKICBmb250LXNpemU6IDE0cHg7CiAgZm9udC13ZWlnaHQ6IG5vcm1hbDsKICBsaW5lLWhlaWdodDogMThweDsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjdmN2Y3OwogIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZWJlYmViOwogIC13ZWJraXQtYm9yZGVyLXJhZGl1czogNXB4IDVweCAwIDA7CiAgICAgLW1vei1ib3JkZXItcmFkaXVzOiA1cHggNXB4IDAgMDsKICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDVweCA1cHggMCAwOwp9CgoucG9wb3Zlci1jb250ZW50IHsKICBwYWRkaW5nOiA5cHggMTRweDsKfQoKLnBvcG92ZXIgLmFycm93LAoucG9wb3ZlciAuYXJyb3c6YWZ0ZXIgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBkaXNwbGF5OiBibG9jazsKICB3aWR0aDogMDsKICBoZWlnaHQ6IDA7CiAgYm9yZGVyLWNvbG9yOiB0cmFuc3BhcmVudDsKICBib3JkZXItc3R5bGU6IHNvbGlkOwp9CgoucG9wb3ZlciAuYXJyb3cgewogIGJvcmRlci13aWR0aDogMTFweDsKfQoKLnBvcG92ZXIgLmFycm93OmFmdGVyIHsKICBib3JkZXItd2lkdGg6IDEwcHg7CiAgY29udGVudDogIiI7Cn0KCi5wb3BvdmVyLnRvcCAuYXJyb3cgewogIGJvdHRvbTogLTExcHg7CiAgbGVmdDogNTAlOwogIG1hcmdpbi1sZWZ0OiAtMTFweDsKICBib3JkZXItdG9wLWNvbG9yOiAjOTk5OwogIGJvcmRlci10b3AtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4yNSk7CiAgYm9yZGVyLWJvdHRvbS13aWR0aDogMDsKfQoKLnBvcG92ZXIudG9wIC5hcnJvdzphZnRlciB7CiAgYm90dG9tOiAxcHg7CiAgbWFyZ2luLWxlZnQ6IC0xMHB4OwogIGJvcmRlci10b3AtY29sb3I6ICNmZmZmZmY7CiAgYm9yZGVyLWJvdHRvbS13aWR0aDogMDsKfQoKLnBvcG92ZXIucmlnaHQgLmFycm93IHsKICB0b3A6IDUwJTsKICBsZWZ0OiAtMTFweDsKICBtYXJnaW4tdG9wOiAtMTFweDsKICBib3JkZXItcmlnaHQtY29sb3I6ICM5OTk7CiAgYm9yZGVyLXJpZ2h0LWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMjUpOwogIGJvcmRlci1sZWZ0LXdpZHRoOiAwOwp9CgoucG9wb3Zlci5yaWdodCAuYXJyb3c6YWZ0ZXIgewogIGJvdHRvbTogLTEwcHg7CiAgbGVmdDogMXB4OwogIGJvcmRlci1yaWdodC1jb2xvcjogI2ZmZmZmZjsKICBib3JkZXItbGVmdC13aWR0aDogMDsKfQoKLnBvcG92ZXIuYm90dG9tIC5hcnJvdyB7CiAgdG9wOiAtMTFweDsKICBsZWZ0OiA1MCU7CiAgbWFyZ2luLWxlZnQ6IC0xMXB4OwogIGJvcmRlci1ib3R0b20tY29sb3I6ICM5OTk7CiAgYm9yZGVyLWJvdHRvbS1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjI1KTsKICBib3JkZXItdG9wLXdpZHRoOiAwOwp9CgoucG9wb3Zlci5ib3R0b20gLmFycm93OmFmdGVyIHsKICB0b3A6IDFweDsKICBtYXJnaW4tbGVmdDogLTEwcHg7CiAgYm9yZGVyLWJvdHRvbS1jb2xvcjogI2ZmZmZmZjsKICBib3JkZXItdG9wLXdpZHRoOiAwOwp9CgoucG9wb3Zlci5sZWZ0IC5hcnJvdyB7CiAgdG9wOiA1MCU7CiAgcmlnaHQ6IC0xMXB4OwogIG1hcmdpbi10b3A6IC0xMXB4OwogIGJvcmRlci1sZWZ0LWNvbG9yOiAjOTk5OwogIGJvcmRlci1sZWZ0LWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMjUpOwogIGJvcmRlci1yaWdodC13aWR0aDogMDsKfQoKLnBvcG92ZXIubGVmdCAuYXJyb3c6YWZ0ZXIgewogIHJpZ2h0OiAxcHg7CiAgYm90dG9tOiAtMTBweDsKICBib3JkZXItbGVmdC1jb2xvcjogI2ZmZmZmZjsKICBib3JkZXItcmlnaHQtd2lkdGg6IDA7Cn0KCi50aHVtYm5haWxzIHsKICBtYXJnaW4tbGVmdDogLTIwcHg7CiAgbGlzdC1zdHlsZTogbm9uZTsKICAqem9vbTogMTsKfQoKLnRodW1ibmFpbHM6YmVmb3JlLAoudGh1bWJuYWlsczphZnRlciB7CiAgZGlzcGxheTogdGFibGU7CiAgbGluZS1oZWlnaHQ6IDA7CiAgY29udGVudDogIiI7Cn0KCi50aHVtYm5haWxzOmFmdGVyIHsKICBjbGVhcjogYm90aDsKfQoKLnJvdy1mbHVpZCAudGh1bWJuYWlscyB7CiAgbWFyZ2luLWxlZnQ6IDA7Cn0KCi50aHVtYm5haWxzID4gbGkgewogIGZsb2F0OiBsZWZ0OwogIG1hcmdpbi1ib3R0b206IDIwcHg7CiAgbWFyZ2luLWxlZnQ6IDIwcHg7Cn0KCi50aHVtYm5haWwgewogIGRpc3BsYXk6IGJsb2NrOwogIHBhZGRpbmc6IDRweDsKICBsaW5lLWhlaWdodDogMjBweDsKICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOwogIC13ZWJraXQtYm9yZGVyLXJhZGl1czogNHB4OwogICAgIC1tb3otYm9yZGVyLXJhZGl1czogNHB4OwogICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4OwogIC13ZWJraXQtYm94LXNoYWRvdzogMCAxcHggM3B4IHJnYmEoMCwgMCwgMCwgMC4wNTUpOwogICAgIC1tb3otYm94LXNoYWRvdzogMCAxcHggM3B4IHJnYmEoMCwgMCwgMCwgMC4wNTUpOwogICAgICAgICAgYm94LXNoYWRvdzogMCAxcHggM3B4IHJnYmEoMCwgMCwgMCwgMC4wNTUpOwogIC13ZWJraXQtdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZS1pbi1vdXQ7CiAgICAgLW1vei10cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlLWluLW91dDsKICAgICAgIC1vLXRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2UtaW4tb3V0OwogICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZS1pbi1vdXQ7Cn0KCmEudGh1bWJuYWlsOmhvdmVyIHsKICBib3JkZXItY29sb3I6ICMwMDg4Y2M7CiAgLXdlYmtpdC1ib3gtc2hhZG93OiAwIDFweCA0cHggcmdiYSgwLCAxMDUsIDIxNCwgMC4yNSk7CiAgICAgLW1vei1ib3gtc2hhZG93OiAwIDFweCA0cHggcmdiYSgwLCAxMDUsIDIxNCwgMC4yNSk7CiAgICAgICAgICBib3gtc2hhZG93OiAwIDFweCA0cHggcmdiYSgwLCAxMDUsIDIxNCwgMC4yNSk7Cn0KCi50aHVtYm5haWwgPiBpbWcgewogIGRpc3BsYXk6IGJsb2NrOwogIG1heC13aWR0aDogMTAwJTsKICBtYXJnaW4tcmlnaHQ6IGF1dG87CiAgbWFyZ2luLWxlZnQ6IGF1dG87Cn0KCi50aHVtYm5haWwgLmNhcHRpb24gewogIHBhZGRpbmc6IDlweDsKICBjb2xvcjogIzU1NTU1NTsKfQoKLm1lZGlhLAoubWVkaWEtYm9keSB7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKICAqb3ZlcmZsb3c6IHZpc2libGU7CiAgem9vbTogMTsKfQoKLm1lZGlhLAoubWVkaWEgLm1lZGlhIHsKICBtYXJnaW4tdG9wOiAxNXB4Owp9CgoubWVkaWE6Zmlyc3QtY2hpbGQgewogIG1hcmdpbi10b3A6IDA7Cn0KCi5tZWRpYS1vYmplY3QgewogIGRpc3BsYXk6IGJsb2NrOwp9CgoubWVkaWEtaGVhZGluZyB7CiAgbWFyZ2luOiAwIDAgNXB4Owp9CgoubWVkaWEgLnB1bGwtbGVmdCB7CiAgbWFyZ2luLXJpZ2h0OiAxMHB4Owp9CgoubWVkaWEgLnB1bGwtcmlnaHQgewogIG1hcmdpbi1sZWZ0OiAxMHB4Owp9CgoubWVkaWEtbGlzdCB7CiAgbWFyZ2luLWxlZnQ6IDA7CiAgbGlzdC1zdHlsZTogbm9uZTsKfQoKLmxhYmVsLAouYmFkZ2UgewogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICBwYWRkaW5nOiAycHggNHB4OwogIGZvbnQtc2l6ZTogMTEuODQ0cHg7CiAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgbGluZS1oZWlnaHQ6IDE0cHg7CiAgY29sb3I6ICNmZmZmZmY7CiAgdGV4dC1zaGFkb3c6IDAgLTFweCAwIHJnYmEoMCwgMCwgMCwgMC4yNSk7CiAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKICB2ZXJ0aWNhbC1hbGlnbjogYmFzZWxpbmU7CiAgYmFja2dyb3VuZC1jb2xvcjogIzk5OTk5OTsKfQoKLmxhYmVsIHsKICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDNweDsKICAgICAtbW96LWJvcmRlci1yYWRpdXM6IDNweDsKICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDsKfQoKLmJhZGdlIHsKICBwYWRkaW5nLXJpZ2h0OiA5cHg7CiAgcGFkZGluZy1sZWZ0OiA5cHg7CiAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiA5cHg7CiAgICAgLW1vei1ib3JkZXItcmFkaXVzOiA5cHg7CiAgICAgICAgICBib3JkZXItcmFkaXVzOiA5cHg7Cn0KCi5sYWJlbDplbXB0eSwKLmJhZGdlOmVtcHR5IHsKICBkaXNwbGF5OiBub25lOwp9CgphLmxhYmVsOmhvdmVyLAphLmJhZGdlOmhvdmVyIHsKICBjb2xvcjogI2ZmZmZmZjsKICB0ZXh0LWRlY29yYXRpb246IG5vbmU7CiAgY3Vyc29yOiBwb2ludGVyOwp9CgoubGFiZWwtaW1wb3J0YW50LAouYmFkZ2UtaW1wb3J0YW50IHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjYjk0YTQ4Owp9CgoubGFiZWwtaW1wb3J0YW50W2hyZWZdLAouYmFkZ2UtaW1wb3J0YW50W2hyZWZdIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjOTUzYjM5Owp9CgoubGFiZWwtd2FybmluZywKLmJhZGdlLXdhcm5pbmcgewogIGJhY2tncm91bmQtY29sb3I6ICNmODk0MDY7Cn0KCi5sYWJlbC13YXJuaW5nW2hyZWZdLAouYmFkZ2Utd2FybmluZ1tocmVmXSB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2M2NzYwNTsKfQoKLmxhYmVsLXN1Y2Nlc3MsCi5iYWRnZS1zdWNjZXNzIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDY4ODQ3Owp9CgoubGFiZWwtc3VjY2Vzc1tocmVmXSwKLmJhZGdlLXN1Y2Nlc3NbaHJlZl0gewogIGJhY2tncm91bmQtY29sb3I6ICMzNTY2MzU7Cn0KCi5sYWJlbC1pbmZvLAouYmFkZ2UtaW5mbyB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzNhODdhZDsKfQoKLmxhYmVsLWluZm9baHJlZl0sCi5iYWRnZS1pbmZvW2hyZWZdIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMmQ2OTg3Owp9CgoubGFiZWwtaW52ZXJzZSwKLmJhZGdlLWludmVyc2UgewogIGJhY2tncm91bmQtY29sb3I6ICMzMzMzMzM7Cn0KCi5sYWJlbC1pbnZlcnNlW2hyZWZdLAouYmFkZ2UtaW52ZXJzZVtocmVmXSB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzFhMWExYTsKfQoKLmJ0biAubGFiZWwsCi5idG4gLmJhZGdlIHsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgdG9wOiAtMXB4Owp9CgouYnRuLW1pbmkgLmxhYmVsLAouYnRuLW1pbmkgLmJhZGdlIHsKICB0b3A6IDA7Cn0KCkAtd2Via2l0LWtleWZyYW1lcyBwcm9ncmVzcy1iYXItc3RyaXBlcyB7CiAgZnJvbSB7CiAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiA0MHB4IDA7CiAgfQogIHRvIHsKICAgIGJhY2tncm91bmQtcG9zaXRpb246IDAgMDsKICB9Cn0KCkAtbW96LWtleWZyYW1lcyBwcm9ncmVzcy1iYXItc3RyaXBlcyB7CiAgZnJvbSB7CiAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiA0MHB4IDA7CiAgfQogIHRvIHsKICAgIGJhY2tncm91bmQtcG9zaXRpb246IDAgMDsKICB9Cn0KCkAtbXMta2V5ZnJhbWVzIHByb2dyZXNzLWJhci1zdHJpcGVzIHsKICBmcm9tIHsKICAgIGJhY2tncm91bmQtcG9zaXRpb246IDQwcHggMDsKICB9CiAgdG8gewogICAgYmFja2dyb3VuZC1wb3NpdGlvbjogMCAwOwogIH0KfQoKQC1vLWtleWZyYW1lcyBwcm9ncmVzcy1iYXItc3RyaXBlcyB7CiAgZnJvbSB7CiAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwIDA7CiAgfQogIHRvIHsKICAgIGJhY2tncm91bmQtcG9zaXRpb246IDQwcHggMDsKICB9Cn0KCkBrZXlmcmFtZXMgcHJvZ3Jlc3MtYmFyLXN0cmlwZXMgewogIGZyb20gewogICAgYmFja2dyb3VuZC1wb3NpdGlvbjogNDBweCAwOwogIH0KICB0byB7CiAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAwIDA7CiAgfQp9CgoucHJvZ3Jlc3MgewogIGhlaWdodDogMjBweDsKICBtYXJnaW4tYm90dG9tOiAyMHB4OwogIG92ZXJmbG93OiBoaWRkZW47CiAgYmFja2dyb3VuZC1jb2xvcjogI2Y3ZjdmNzsKICBiYWNrZ3JvdW5kLWltYWdlOiAtbW96LWxpbmVhci1ncmFkaWVudCh0b3AsICNmNWY1ZjUsICNmOWY5ZjkpOwogIGJhY2tncm91bmQtaW1hZ2U6IC13ZWJraXQtZ3JhZGllbnQobGluZWFyLCAwIDAsIDAgMTAwJSwgZnJvbSgjZjVmNWY1KSwgdG8oI2Y5ZjlmOSkpOwogIGJhY2tncm91bmQtaW1hZ2U6IC13ZWJraXQtbGluZWFyLWdyYWRpZW50KHRvcCwgI2Y1ZjVmNSwgI2Y5ZjlmOSk7CiAgYmFja2dyb3VuZC1pbWFnZTogLW8tbGluZWFyLWdyYWRpZW50KHRvcCwgI2Y1ZjVmNSwgI2Y5ZjlmOSk7CiAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwgI2Y1ZjVmNSwgI2Y5ZjlmOSk7CiAgYmFja2dyb3VuZC1yZXBlYXQ6IHJlcGVhdC14OwogIC13ZWJraXQtYm9yZGVyLXJhZGl1czogNHB4OwogICAgIC1tb3otYm9yZGVyLXJhZGl1czogNHB4OwogICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4OwogIGZpbHRlcjogcHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LmdyYWRpZW50KHN0YXJ0Q29sb3JzdHI9JyNmZmY1ZjVmNScsIGVuZENvbG9yc3RyPScjZmZmOWY5ZjknLCBHcmFkaWVudFR5cGU9MCk7CiAgLXdlYmtpdC1ib3gtc2hhZG93OiBpbnNldCAwIDFweCAycHggcmdiYSgwLCAwLCAwLCAwLjEpOwogICAgIC1tb3otYm94LXNoYWRvdzogaW5zZXQgMCAxcHggMnB4IHJnYmEoMCwgMCwgMCwgMC4xKTsKICAgICAgICAgIGJveC1zaGFkb3c6IGluc2V0IDAgMXB4IDJweCByZ2JhKDAsIDAsIDAsIDAuMSk7Cn0KCi5wcm9ncmVzcyAuYmFyIHsKICBmbG9hdDogbGVmdDsKICB3aWR0aDogMDsKICBoZWlnaHQ6IDEwMCU7CiAgZm9udC1zaXplOiAxMnB4OwogIGNvbG9yOiAjZmZmZmZmOwogIHRleHQtYWxpZ246IGNlbnRlcjsKICB0ZXh0LXNoYWRvdzogMCAtMXB4IDAgcmdiYSgwLCAwLCAwLCAwLjI1KTsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMGU5MGQyOwogIGJhY2tncm91bmQtaW1hZ2U6IC1tb3otbGluZWFyLWdyYWRpZW50KHRvcCwgIzE0OWJkZiwgIzA0ODBiZSk7CiAgYmFja2dyb3VuZC1pbWFnZTogLXdlYmtpdC1ncmFkaWVudChsaW5lYXIsIDAgMCwgMCAxMDAlLCBmcm9tKCMxNDliZGYpLCB0bygjMDQ4MGJlKSk7CiAgYmFja2dyb3VuZC1pbWFnZTogLXdlYmtpdC1saW5lYXItZ3JhZGllbnQodG9wLCAjMTQ5YmRmLCAjMDQ4MGJlKTsKICBiYWNrZ3JvdW5kLWltYWdlOiAtby1saW5lYXItZ3JhZGllbnQodG9wLCAjMTQ5YmRmLCAjMDQ4MGJlKTsKICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCAjMTQ5YmRmLCAjMDQ4MGJlKTsKICBiYWNrZ3JvdW5kLXJlcGVhdDogcmVwZWF0LXg7CiAgZmlsdGVyOiBwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuZ3JhZGllbnQoc3RhcnRDb2xvcnN0cj0nI2ZmMTQ5YmRmJywgZW5kQ29sb3JzdHI9JyNmZjA0ODBiZScsIEdyYWRpZW50VHlwZT0wKTsKICAtd2Via2l0LWJveC1zaGFkb3c6IGluc2V0IDAgLTFweCAwIHJnYmEoMCwgMCwgMCwgMC4xNSk7CiAgICAgLW1vei1ib3gtc2hhZG93OiBpbnNldCAwIC0xcHggMCByZ2JhKDAsIDAsIDAsIDAuMTUpOwogICAgICAgICAgYm94LXNoYWRvdzogaW5zZXQgMCAtMXB4IDAgcmdiYSgwLCAwLCAwLCAwLjE1KTsKICAtd2Via2l0LWJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgLW1vei1ib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAtd2Via2l0LXRyYW5zaXRpb246IHdpZHRoIDAuNnMgZWFzZTsKICAgICAtbW96LXRyYW5zaXRpb246IHdpZHRoIDAuNnMgZWFzZTsKICAgICAgIC1vLXRyYW5zaXRpb246IHdpZHRoIDAuNnMgZWFzZTsKICAgICAgICAgIHRyYW5zaXRpb246IHdpZHRoIDAuNnMgZWFzZTsKfQoKLnByb2dyZXNzIC5iYXIgKyAuYmFyIHsKICAtd2Via2l0LWJveC1zaGFkb3c6IGluc2V0IDFweCAwIDAgcmdiYSgwLCAwLCAwLCAwLjE1KSwgaW5zZXQgMCAtMXB4IDAgcmdiYSgwLCAwLCAwLCAwLjE1KTsKICAgICAtbW96LWJveC1zaGFkb3c6IGluc2V0IDFweCAwIDAgcmdiYSgwLCAwLCAwLCAwLjE1KSwgaW5zZXQgMCAtMXB4IDAgcmdiYSgwLCAwLCAwLCAwLjE1KTsKICAgICAgICAgIGJveC1zaGFkb3c6IGluc2V0IDFweCAwIDAgcmdiYSgwLCAwLCAwLCAwLjE1KSwgaW5zZXQgMCAtMXB4IDAgcmdiYSgwLCAwLCAwLCAwLjE1KTsKfQoKLnByb2dyZXNzLXN0cmlwZWQgLmJhciB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzE0OWJkZjsKICBiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWdyYWRpZW50KGxpbmVhciwgMCAxMDAlLCAxMDAlIDAsIGNvbG9yLXN0b3AoMC4yNSwgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjE1KSksIGNvbG9yLXN0b3AoMC4yNSwgdHJhbnNwYXJlbnQpLCBjb2xvci1zdG9wKDAuNSwgdHJhbnNwYXJlbnQpLCBjb2xvci1zdG9wKDAuNSwgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjE1KSksIGNvbG9yLXN0b3AoMC43NSwgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjE1KSksIGNvbG9yLXN0b3AoMC43NSwgdHJhbnNwYXJlbnQpLCB0byh0cmFuc3BhcmVudCkpOwogIGJhY2tncm91bmQtaW1hZ2U6IC13ZWJraXQtbGluZWFyLWdyYWRpZW50KDQ1ZGVnLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpIDI1JSwgdHJhbnNwYXJlbnQgMjUlLCB0cmFuc3BhcmVudCA1MCUsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSkgNTAlLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpIDc1JSwgdHJhbnNwYXJlbnQgNzUlLCB0cmFuc3BhcmVudCk7CiAgYmFja2dyb3VuZC1pbWFnZTogLW1vei1saW5lYXItZ3JhZGllbnQoNDVkZWcsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSkgMjUlLCB0cmFuc3BhcmVudCAyNSUsIHRyYW5zcGFyZW50IDUwJSwgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjE1KSA1MCUsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSkgNzUlLCB0cmFuc3BhcmVudCA3NSUsIHRyYW5zcGFyZW50KTsKICBiYWNrZ3JvdW5kLWltYWdlOiAtby1saW5lYXItZ3JhZGllbnQoNDVkZWcsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSkgMjUlLCB0cmFuc3BhcmVudCAyNSUsIHRyYW5zcGFyZW50IDUwJSwgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjE1KSA1MCUsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSkgNzUlLCB0cmFuc3BhcmVudCA3NSUsIHRyYW5zcGFyZW50KTsKICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoNDVkZWcsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSkgMjUlLCB0cmFuc3BhcmVudCAyNSUsIHRyYW5zcGFyZW50IDUwJSwgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjE1KSA1MCUsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSkgNzUlLCB0cmFuc3BhcmVudCA3NSUsIHRyYW5zcGFyZW50KTsKICAtd2Via2l0LWJhY2tncm91bmQtc2l6ZTogNDBweCA0MHB4OwogICAgIC1tb3otYmFja2dyb3VuZC1zaXplOiA0MHB4IDQwcHg7CiAgICAgICAtby1iYWNrZ3JvdW5kLXNpemU6IDQwcHggNDBweDsKICAgICAgICAgIGJhY2tncm91bmQtc2l6ZTogNDBweCA0MHB4Owp9CgoucHJvZ3Jlc3MuYWN0aXZlIC5iYXIgewogIC13ZWJraXQtYW5pbWF0aW9uOiBwcm9ncmVzcy1iYXItc3RyaXBlcyAycyBsaW5lYXIgaW5maW5pdGU7CiAgICAgLW1vei1hbmltYXRpb246IHByb2dyZXNzLWJhci1zdHJpcGVzIDJzIGxpbmVhciBpbmZpbml0ZTsKICAgICAgLW1zLWFuaW1hdGlvbjogcHJvZ3Jlc3MtYmFyLXN0cmlwZXMgMnMgbGluZWFyIGluZmluaXRlOwogICAgICAgLW8tYW5pbWF0aW9uOiBwcm9ncmVzcy1iYXItc3RyaXBlcyAycyBsaW5lYXIgaW5maW5pdGU7CiAgICAgICAgICBhbmltYXRpb246IHByb2dyZXNzLWJhci1zdHJpcGVzIDJzIGxpbmVhciBpbmZpbml0ZTsKfQoKLnByb2dyZXNzLWRhbmdlciAuYmFyLAoucHJvZ3Jlc3MgLmJhci1kYW5nZXIgewogIGJhY2tncm91bmQtY29sb3I6ICNkZDUxNGM7CiAgYmFja2dyb3VuZC1pbWFnZTogLW1vei1saW5lYXItZ3JhZGllbnQodG9wLCAjZWU1ZjViLCAjYzQzYzM1KTsKICBiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWdyYWRpZW50KGxpbmVhciwgMCAwLCAwIDEwMCUsIGZyb20oI2VlNWY1YiksIHRvKCNjNDNjMzUpKTsKICBiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWxpbmVhci1ncmFkaWVudCh0b3AsICNlZTVmNWIsICNjNDNjMzUpOwogIGJhY2tncm91bmQtaW1hZ2U6IC1vLWxpbmVhci1ncmFkaWVudCh0b3AsICNlZTVmNWIsICNjNDNjMzUpOwogIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCh0byBib3R0b20sICNlZTVmNWIsICNjNDNjMzUpOwogIGJhY2tncm91bmQtcmVwZWF0OiByZXBlYXQteDsKICBmaWx0ZXI6IHByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5ncmFkaWVudChzdGFydENvbG9yc3RyPScjZmZlZTVmNWInLCBlbmRDb2xvcnN0cj0nI2ZmYzQzYzM1JywgR3JhZGllbnRUeXBlPTApOwp9CgoucHJvZ3Jlc3MtZGFuZ2VyLnByb2dyZXNzLXN0cmlwZWQgLmJhciwKLnByb2dyZXNzLXN0cmlwZWQgLmJhci1kYW5nZXIgewogIGJhY2tncm91bmQtY29sb3I6ICNlZTVmNWI7CiAgYmFja2dyb3VuZC1pbWFnZTogLXdlYmtpdC1ncmFkaWVudChsaW5lYXIsIDAgMTAwJSwgMTAwJSAwLCBjb2xvci1zdG9wKDAuMjUsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSkpLCBjb2xvci1zdG9wKDAuMjUsIHRyYW5zcGFyZW50KSwgY29sb3Itc3RvcCgwLjUsIHRyYW5zcGFyZW50KSwgY29sb3Itc3RvcCgwLjUsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSkpLCBjb2xvci1zdG9wKDAuNzUsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSkpLCBjb2xvci1zdG9wKDAuNzUsIHRyYW5zcGFyZW50KSwgdG8odHJhbnNwYXJlbnQpKTsKICBiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWxpbmVhci1ncmFkaWVudCg0NWRlZywgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjE1KSAyNSUsIHRyYW5zcGFyZW50IDI1JSwgdHJhbnNwYXJlbnQgNTAlLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpIDUwJSwgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjE1KSA3NSUsIHRyYW5zcGFyZW50IDc1JSwgdHJhbnNwYXJlbnQpOwogIGJhY2tncm91bmQtaW1hZ2U6IC1tb3otbGluZWFyLWdyYWRpZW50KDQ1ZGVnLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpIDI1JSwgdHJhbnNwYXJlbnQgMjUlLCB0cmFuc3BhcmVudCA1MCUsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSkgNTAlLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpIDc1JSwgdHJhbnNwYXJlbnQgNzUlLCB0cmFuc3BhcmVudCk7CiAgYmFja2dyb3VuZC1pbWFnZTogLW8tbGluZWFyLWdyYWRpZW50KDQ1ZGVnLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpIDI1JSwgdHJhbnNwYXJlbnQgMjUlLCB0cmFuc3BhcmVudCA1MCUsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSkgNTAlLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpIDc1JSwgdHJhbnNwYXJlbnQgNzUlLCB0cmFuc3BhcmVudCk7CiAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KDQ1ZGVnLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpIDI1JSwgdHJhbnNwYXJlbnQgMjUlLCB0cmFuc3BhcmVudCA1MCUsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSkgNTAlLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpIDc1JSwgdHJhbnNwYXJlbnQgNzUlLCB0cmFuc3BhcmVudCk7Cn0KCi5wcm9ncmVzcy1zdWNjZXNzIC5iYXIsCi5wcm9ncmVzcyAuYmFyLXN1Y2Nlc3MgewogIGJhY2tncm91bmQtY29sb3I6ICM1ZWI5NWU7CiAgYmFja2dyb3VuZC1pbWFnZTogLW1vei1saW5lYXItZ3JhZGllbnQodG9wLCAjNjJjNDYyLCAjNTdhOTU3KTsKICBiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWdyYWRpZW50KGxpbmVhciwgMCAwLCAwIDEwMCUsIGZyb20oIzYyYzQ2MiksIHRvKCM1N2E5NTcpKTsKICBiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWxpbmVhci1ncmFkaWVudCh0b3AsICM2MmM0NjIsICM1N2E5NTcpOwogIGJhY2tncm91bmQtaW1hZ2U6IC1vLWxpbmVhci1ncmFkaWVudCh0b3AsICM2MmM0NjIsICM1N2E5NTcpOwogIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCh0byBib3R0b20sICM2MmM0NjIsICM1N2E5NTcpOwogIGJhY2tncm91bmQtcmVwZWF0OiByZXBlYXQteDsKICBmaWx0ZXI6IHByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5ncmFkaWVudChzdGFydENvbG9yc3RyPScjZmY2MmM0NjInLCBlbmRDb2xvcnN0cj0nI2ZmNTdhOTU3JywgR3JhZGllbnRUeXBlPTApOwp9CgoucHJvZ3Jlc3Mtc3VjY2Vzcy5wcm9ncmVzcy1zdHJpcGVkIC5iYXIsCi5wcm9ncmVzcy1zdHJpcGVkIC5iYXItc3VjY2VzcyB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzYyYzQ2MjsKICBiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWdyYWRpZW50KGxpbmVhciwgMCAxMDAlLCAxMDAlIDAsIGNvbG9yLXN0b3AoMC4yNSwgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjE1KSksIGNvbG9yLXN0b3AoMC4yNSwgdHJhbnNwYXJlbnQpLCBjb2xvci1zdG9wKDAuNSwgdHJhbnNwYXJlbnQpLCBjb2xvci1zdG9wKDAuNSwgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjE1KSksIGNvbG9yLXN0b3AoMC43NSwgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjE1KSksIGNvbG9yLXN0b3AoMC43NSwgdHJhbnNwYXJlbnQpLCB0byh0cmFuc3BhcmVudCkpOwogIGJhY2tncm91bmQtaW1hZ2U6IC13ZWJraXQtbGluZWFyLWdyYWRpZW50KDQ1ZGVnLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpIDI1JSwgdHJhbnNwYXJlbnQgMjUlLCB0cmFuc3BhcmVudCA1MCUsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSkgNTAlLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpIDc1JSwgdHJhbnNwYXJlbnQgNzUlLCB0cmFuc3BhcmVudCk7CiAgYmFja2dyb3VuZC1pbWFnZTogLW1vei1saW5lYXItZ3JhZGllbnQoNDVkZWcsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSkgMjUlLCB0cmFuc3BhcmVudCAyNSUsIHRyYW5zcGFyZW50IDUwJSwgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjE1KSA1MCUsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSkgNzUlLCB0cmFuc3BhcmVudCA3NSUsIHRyYW5zcGFyZW50KTsKICBiYWNrZ3JvdW5kLWltYWdlOiAtby1saW5lYXItZ3JhZGllbnQoNDVkZWcsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSkgMjUlLCB0cmFuc3BhcmVudCAyNSUsIHRyYW5zcGFyZW50IDUwJSwgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjE1KSA1MCUsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSkgNzUlLCB0cmFuc3BhcmVudCA3NSUsIHRyYW5zcGFyZW50KTsKICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoNDVkZWcsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSkgMjUlLCB0cmFuc3BhcmVudCAyNSUsIHRyYW5zcGFyZW50IDUwJSwgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjE1KSA1MCUsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSkgNzUlLCB0cmFuc3BhcmVudCA3NSUsIHRyYW5zcGFyZW50KTsKfQoKLnByb2dyZXNzLWluZm8gLmJhciwKLnByb2dyZXNzIC5iYXItaW5mbyB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzRiYjFjZjsKICBiYWNrZ3JvdW5kLWltYWdlOiAtbW96LWxpbmVhci1ncmFkaWVudCh0b3AsICM1YmMwZGUsICMzMzliYjkpOwogIGJhY2tncm91bmQtaW1hZ2U6IC13ZWJraXQtZ3JhZGllbnQobGluZWFyLCAwIDAsIDAgMTAwJSwgZnJvbSgjNWJjMGRlKSwgdG8oIzMzOWJiOSkpOwogIGJhY2tncm91bmQtaW1hZ2U6IC13ZWJraXQtbGluZWFyLWdyYWRpZW50KHRvcCwgIzViYzBkZSwgIzMzOWJiOSk7CiAgYmFja2dyb3VuZC1pbWFnZTogLW8tbGluZWFyLWdyYWRpZW50KHRvcCwgIzViYzBkZSwgIzMzOWJiOSk7CiAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwgIzViYzBkZSwgIzMzOWJiOSk7CiAgYmFja2dyb3VuZC1yZXBlYXQ6IHJlcGVhdC14OwogIGZpbHRlcjogcHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LmdyYWRpZW50KHN0YXJ0Q29sb3JzdHI9JyNmZjViYzBkZScsIGVuZENvbG9yc3RyPScjZmYzMzliYjknLCBHcmFkaWVudFR5cGU9MCk7Cn0KCi5wcm9ncmVzcy1pbmZvLnByb2dyZXNzLXN0cmlwZWQgLmJhciwKLnByb2dyZXNzLXN0cmlwZWQgLmJhci1pbmZvIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjNWJjMGRlOwogIGJhY2tncm91bmQtaW1hZ2U6IC13ZWJraXQtZ3JhZGllbnQobGluZWFyLCAwIDEwMCUsIDEwMCUgMCwgY29sb3Itc3RvcCgwLjI1LCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpKSwgY29sb3Itc3RvcCgwLjI1LCB0cmFuc3BhcmVudCksIGNvbG9yLXN0b3AoMC41LCB0cmFuc3BhcmVudCksIGNvbG9yLXN0b3AoMC41LCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpKSwgY29sb3Itc3RvcCgwLjc1LCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpKSwgY29sb3Itc3RvcCgwLjc1LCB0cmFuc3BhcmVudCksIHRvKHRyYW5zcGFyZW50KSk7CiAgYmFja2dyb3VuZC1pbWFnZTogLXdlYmtpdC1saW5lYXItZ3JhZGllbnQoNDVkZWcsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSkgMjUlLCB0cmFuc3BhcmVudCAyNSUsIHRyYW5zcGFyZW50IDUwJSwgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjE1KSA1MCUsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSkgNzUlLCB0cmFuc3BhcmVudCA3NSUsIHRyYW5zcGFyZW50KTsKICBiYWNrZ3JvdW5kLWltYWdlOiAtbW96LWxpbmVhci1ncmFkaWVudCg0NWRlZywgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjE1KSAyNSUsIHRyYW5zcGFyZW50IDI1JSwgdHJhbnNwYXJlbnQgNTAlLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpIDUwJSwgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjE1KSA3NSUsIHRyYW5zcGFyZW50IDc1JSwgdHJhbnNwYXJlbnQpOwogIGJhY2tncm91bmQtaW1hZ2U6IC1vLWxpbmVhci1ncmFkaWVudCg0NWRlZywgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjE1KSAyNSUsIHRyYW5zcGFyZW50IDI1JSwgdHJhbnNwYXJlbnQgNTAlLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpIDUwJSwgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjE1KSA3NSUsIHRyYW5zcGFyZW50IDc1JSwgdHJhbnNwYXJlbnQpOwogIGJhY2tncm91bmQtaW1hZ2U6IGxpbmVhci1ncmFkaWVudCg0NWRlZywgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjE1KSAyNSUsIHRyYW5zcGFyZW50IDI1JSwgdHJhbnNwYXJlbnQgNTAlLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpIDUwJSwgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjE1KSA3NSUsIHRyYW5zcGFyZW50IDc1JSwgdHJhbnNwYXJlbnQpOwp9CgoucHJvZ3Jlc3Mtd2FybmluZyAuYmFyLAoucHJvZ3Jlc3MgLmJhci13YXJuaW5nIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmFhNzMyOwogIGJhY2tncm91bmQtaW1hZ2U6IC1tb3otbGluZWFyLWdyYWRpZW50KHRvcCwgI2ZiYjQ1MCwgI2Y4OTQwNik7CiAgYmFja2dyb3VuZC1pbWFnZTogLXdlYmtpdC1ncmFkaWVudChsaW5lYXIsIDAgMCwgMCAxMDAlLCBmcm9tKCNmYmI0NTApLCB0bygjZjg5NDA2KSk7CiAgYmFja2dyb3VuZC1pbWFnZTogLXdlYmtpdC1saW5lYXItZ3JhZGllbnQodG9wLCAjZmJiNDUwLCAjZjg5NDA2KTsKICBiYWNrZ3JvdW5kLWltYWdlOiAtby1saW5lYXItZ3JhZGllbnQodG9wLCAjZmJiNDUwLCAjZjg5NDA2KTsKICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCAjZmJiNDUwLCAjZjg5NDA2KTsKICBiYWNrZ3JvdW5kLXJlcGVhdDogcmVwZWF0LXg7CiAgZmlsdGVyOiBwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuZ3JhZGllbnQoc3RhcnRDb2xvcnN0cj0nI2ZmZmJiNDUwJywgZW5kQ29sb3JzdHI9JyNmZmY4OTQwNicsIEdyYWRpZW50VHlwZT0wKTsKfQoKLnByb2dyZXNzLXdhcm5pbmcucHJvZ3Jlc3Mtc3RyaXBlZCAuYmFyLAoucHJvZ3Jlc3Mtc3RyaXBlZCAuYmFyLXdhcm5pbmcgewogIGJhY2tncm91bmQtY29sb3I6ICNmYmI0NTA7CiAgYmFja2dyb3VuZC1pbWFnZTogLXdlYmtpdC1ncmFkaWVudChsaW5lYXIsIDAgMTAwJSwgMTAwJSAwLCBjb2xvci1zdG9wKDAuMjUsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSkpLCBjb2xvci1zdG9wKDAuMjUsIHRyYW5zcGFyZW50KSwgY29sb3Itc3RvcCgwLjUsIHRyYW5zcGFyZW50KSwgY29sb3Itc3RvcCgwLjUsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSkpLCBjb2xvci1zdG9wKDAuNzUsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSkpLCBjb2xvci1zdG9wKDAuNzUsIHRyYW5zcGFyZW50KSwgdG8odHJhbnNwYXJlbnQpKTsKICBiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWxpbmVhci1ncmFkaWVudCg0NWRlZywgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjE1KSAyNSUsIHRyYW5zcGFyZW50IDI1JSwgdHJhbnNwYXJlbnQgNTAlLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpIDUwJSwgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjE1KSA3NSUsIHRyYW5zcGFyZW50IDc1JSwgdHJhbnNwYXJlbnQpOwogIGJhY2tncm91bmQtaW1hZ2U6IC1tb3otbGluZWFyLWdyYWRpZW50KDQ1ZGVnLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpIDI1JSwgdHJhbnNwYXJlbnQgMjUlLCB0cmFuc3BhcmVudCA1MCUsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSkgNTAlLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpIDc1JSwgdHJhbnNwYXJlbnQgNzUlLCB0cmFuc3BhcmVudCk7CiAgYmFja2dyb3VuZC1pbWFnZTogLW8tbGluZWFyLWdyYWRpZW50KDQ1ZGVnLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpIDI1JSwgdHJhbnNwYXJlbnQgMjUlLCB0cmFuc3BhcmVudCA1MCUsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSkgNTAlLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpIDc1JSwgdHJhbnNwYXJlbnQgNzUlLCB0cmFuc3BhcmVudCk7CiAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KDQ1ZGVnLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpIDI1JSwgdHJhbnNwYXJlbnQgMjUlLCB0cmFuc3BhcmVudCA1MCUsIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSkgNTAlLCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpIDc1JSwgdHJhbnNwYXJlbnQgNzUlLCB0cmFuc3BhcmVudCk7Cn0KCi5hY2NvcmRpb24gewogIG1hcmdpbi1ib3R0b206IDIwcHg7Cn0KCi5hY2NvcmRpb24tZ3JvdXAgewogIG1hcmdpbi1ib3R0b206IDJweDsKICBib3JkZXI6IDFweCBzb2xpZCAjZTVlNWU1OwogIC13ZWJraXQtYm9yZGVyLXJhZGl1czogNHB4OwogICAgIC1tb3otYm9yZGVyLXJhZGl1czogNHB4OwogICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4Owp9CgouYWNjb3JkaW9uLWhlYWRpbmcgewogIGJvcmRlci1ib3R0b206IDA7Cn0KCi5hY2NvcmRpb24taGVhZGluZyAuYWNjb3JkaW9uLXRvZ2dsZSB7CiAgZGlzcGxheTogYmxvY2s7CiAgcGFkZGluZzogOHB4IDE1cHg7Cn0KCi5hY2NvcmRpb24tdG9nZ2xlIHsKICBjdXJzb3I6IHBvaW50ZXI7Cn0KCi5hY2NvcmRpb24taW5uZXIgewogIHBhZGRpbmc6IDlweCAxNXB4OwogIGJvcmRlci10b3A6IDFweCBzb2xpZCAjZTVlNWU1Owp9CgouY2Fyb3VzZWwgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICBtYXJnaW4tYm90dG9tOiAyMHB4OwogIGxpbmUtaGVpZ2h0OiAxOwp9CgouY2Fyb3VzZWwtaW5uZXIgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICB3aWR0aDogMTAwJTsKICBvdmVyZmxvdzogaGlkZGVuOwp9CgouY2Fyb3VzZWwtaW5uZXIgPiAuaXRlbSB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIGRpc3BsYXk6IG5vbmU7CiAgLXdlYmtpdC10cmFuc2l0aW9uOiAwLjZzIGVhc2UtaW4tb3V0IGxlZnQ7CiAgICAgLW1vei10cmFuc2l0aW9uOiAwLjZzIGVhc2UtaW4tb3V0IGxlZnQ7CiAgICAgICAtby10cmFuc2l0aW9uOiAwLjZzIGVhc2UtaW4tb3V0IGxlZnQ7CiAgICAgICAgICB0cmFuc2l0aW9uOiAwLjZzIGVhc2UtaW4tb3V0IGxlZnQ7Cn0KCi5jYXJvdXNlbC1pbm5lciA+IC5pdGVtID4gaW1nIHsKICBkaXNwbGF5OiBibG9jazsKICBsaW5lLWhlaWdodDogMTsKfQoKLmNhcm91c2VsLWlubmVyID4gLmFjdGl2ZSwKLmNhcm91c2VsLWlubmVyID4gLm5leHQsCi5jYXJvdXNlbC1pbm5lciA+IC5wcmV2IHsKICBkaXNwbGF5OiBibG9jazsKfQoKLmNhcm91c2VsLWlubmVyID4gLmFjdGl2ZSB7CiAgbGVmdDogMDsKfQoKLmNhcm91c2VsLWlubmVyID4gLm5leHQsCi5jYXJvdXNlbC1pbm5lciA+IC5wcmV2IHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiAwOwogIHdpZHRoOiAxMDAlOwp9CgouY2Fyb3VzZWwtaW5uZXIgPiAubmV4dCB7CiAgbGVmdDogMTAwJTsKfQoKLmNhcm91c2VsLWlubmVyID4gLnByZXYgewogIGxlZnQ6IC0xMDAlOwp9CgouY2Fyb3VzZWwtaW5uZXIgPiAubmV4dC5sZWZ0LAouY2Fyb3VzZWwtaW5uZXIgPiAucHJldi5yaWdodCB7CiAgbGVmdDogMDsKfQoKLmNhcm91c2VsLWlubmVyID4gLmFjdGl2ZS5sZWZ0IHsKICBsZWZ0OiAtMTAwJTsKfQoKLmNhcm91c2VsLWlubmVyID4gLmFjdGl2ZS5yaWdodCB7CiAgbGVmdDogMTAwJTsKfQoKLmNhcm91c2VsLWNvbnRyb2wgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDQwJTsKICBsZWZ0OiAxNXB4OwogIHdpZHRoOiA0MHB4OwogIGhlaWdodDogNDBweDsKICBtYXJnaW4tdG9wOiAtMjBweDsKICBmb250LXNpemU6IDYwcHg7CiAgZm9udC13ZWlnaHQ6IDEwMDsKICBsaW5lLWhlaWdodDogMzBweDsKICBjb2xvcjogI2ZmZmZmZjsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgYmFja2dyb3VuZDogIzIyMjIyMjsKICBib3JkZXI6IDNweCBzb2xpZCAjZmZmZmZmOwogIC13ZWJraXQtYm9yZGVyLXJhZGl1czogMjNweDsKICAgICAtbW96LWJvcmRlci1yYWRpdXM6IDIzcHg7CiAgICAgICAgICBib3JkZXItcmFkaXVzOiAyM3B4OwogIG9wYWNpdHk6IDAuNTsKICBmaWx0ZXI6IGFscGhhKG9wYWNpdHk9NTApOwp9CgouY2Fyb3VzZWwtY29udHJvbC5yaWdodCB7CiAgcmlnaHQ6IDE1cHg7CiAgbGVmdDogYXV0bzsKfQoKLmNhcm91c2VsLWNvbnRyb2w6aG92ZXIgewogIGNvbG9yOiAjZmZmZmZmOwogIHRleHQtZGVjb3JhdGlvbjogbm9uZTsKICBvcGFjaXR5OiAwLjk7CiAgZmlsdGVyOiBhbHBoYShvcGFjaXR5PTkwKTsKfQoKLmNhcm91c2VsLWNhcHRpb24gewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICByaWdodDogMDsKICBib3R0b206IDA7CiAgbGVmdDogMDsKICBwYWRkaW5nOiAxNXB4OwogIGJhY2tncm91bmQ6ICMzMzMzMzM7CiAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjc1KTsKfQoKLmNhcm91c2VsLWNhcHRpb24gaDQsCi5jYXJvdXNlbC1jYXB0aW9uIHAgewogIGxpbmUtaGVpZ2h0OiAyMHB4OwogIGNvbG9yOiAjZmZmZmZmOwp9CgouY2Fyb3VzZWwtY2FwdGlvbiBoNCB7CiAgbWFyZ2luOiAwIDAgNXB4Owp9CgouY2Fyb3VzZWwtY2FwdGlvbiBwIHsKICBtYXJnaW4tYm90dG9tOiAwOwp9CgouaGVyby11bml0IHsKICBwYWRkaW5nOiA2MHB4OwogIG1hcmdpbi1ib3R0b206IDMwcHg7CiAgZm9udC1zaXplOiAxOHB4OwogIGZvbnQtd2VpZ2h0OiAyMDA7CiAgbGluZS1oZWlnaHQ6IDMwcHg7CiAgY29sb3I6IGluaGVyaXQ7CiAgYmFja2dyb3VuZC1jb2xvcjogI2VlZWVlZTsKICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDZweDsKICAgICAtbW96LWJvcmRlci1yYWRpdXM6IDZweDsKICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDsKfQoKLmhlcm8tdW5pdCBoMSB7CiAgbWFyZ2luLWJvdHRvbTogMDsKICBmb250LXNpemU6IDYwcHg7CiAgbGluZS1oZWlnaHQ6IDE7CiAgbGV0dGVyLXNwYWNpbmc6IC0xcHg7CiAgY29sb3I6IGluaGVyaXQ7Cn0KCi5oZXJvLXVuaXQgbGkgewogIGxpbmUtaGVpZ2h0OiAzMHB4Owp9CgoucHVsbC1yaWdodCB7CiAgZmxvYXQ6IHJpZ2h0Owp9CgoucHVsbC1sZWZ0IHsKICBmbG9hdDogbGVmdDsKfQoKLmhpZGUgewogIGRpc3BsYXk6IG5vbmU7Cn0KCi5zaG93IHsKICBkaXNwbGF5OiBibG9jazsKfQoKLmludmlzaWJsZSB7CiAgdmlzaWJpbGl0eTogaGlkZGVuOwp9CgouYWZmaXggewogIHBvc2l0aW9uOiBmaXhlZDsKfQo="},{"name":"bootstrap-responsive","src":"LyohCiAqIEJvb3RzdHJhcCBSZXNwb25zaXZlIHYyLjIuMgogKgogKiBDb3B5cmlnaHQgMjAxMiBUd2l0dGVyLCBJbmMKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlIHYyLjAKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIERlc2lnbmVkIGFuZCBidWlsdCB3aXRoIGFsbCB0aGUgbG92ZSBpbiB0aGUgd29ybGQgQHR3aXR0ZXIgYnkgQG1kbyBhbmQgQGZhdC4KICovCgpALW1zLXZpZXdwb3J0IHsKICB3aWR0aDogZGV2aWNlLXdpZHRoOwp9CgouY2xlYXJmaXggewogICp6b29tOiAxOwp9CgouY2xlYXJmaXg6YmVmb3JlLAouY2xlYXJmaXg6YWZ0ZXIgewogIGRpc3BsYXk6IHRhYmxlOwogIGxpbmUtaGVpZ2h0OiAwOwogIGNvbnRlbnQ6ICIiOwp9CgouY2xlYXJmaXg6YWZ0ZXIgewogIGNsZWFyOiBib3RoOwp9CgouaGlkZS10ZXh0IHsKICBmb250OiAwLzAgYTsKICBjb2xvcjogdHJhbnNwYXJlbnQ7CiAgdGV4dC1zaGFkb3c6IG5vbmU7CiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7CiAgYm9yZGVyOiAwOwp9CgouaW5wdXQtYmxvY2stbGV2ZWwgewogIGRpc3BsYXk6IGJsb2NrOwogIHdpZHRoOiAxMDAlOwogIG1pbi1oZWlnaHQ6IDMwcHg7CiAgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgIC1tb3otYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7Cn0KCi5oaWRkZW4gewogIGRpc3BsYXk6IG5vbmU7CiAgdmlzaWJpbGl0eTogaGlkZGVuOwp9CgoudmlzaWJsZS1waG9uZSB7CiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50Owp9CgoudmlzaWJsZS10YWJsZXQgewogIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsKfQoKLmhpZGRlbi1kZXNrdG9wIHsKICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7Cn0KCi52aXNpYmxlLWRlc2t0b3AgewogIGRpc3BsYXk6IGluaGVyaXQgIWltcG9ydGFudDsKfQoKQG1lZGlhIChtaW4td2lkdGg6IDc2OHB4KSBhbmQgKG1heC13aWR0aDogOTc5cHgpIHsKICAuaGlkZGVuLWRlc2t0b3AgewogICAgZGlzcGxheTogaW5oZXJpdCAhaW1wb3J0YW50OwogIH0KICAudmlzaWJsZS1kZXNrdG9wIHsKICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudCA7CiAgfQogIC52aXNpYmxlLXRhYmxldCB7CiAgICBkaXNwbGF5OiBpbmhlcml0ICFpbXBvcnRhbnQ7CiAgfQogIC5oaWRkZW4tdGFibGV0IHsKICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsKICB9Cn0KCkBtZWRpYSAobWF4LXdpZHRoOiA3NjdweCkgewogIC5oaWRkZW4tZGVza3RvcCB7CiAgICBkaXNwbGF5OiBpbmhlcml0ICFpbXBvcnRhbnQ7CiAgfQogIC52aXNpYmxlLWRlc2t0b3AgewogICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OwogIH0KICAudmlzaWJsZS1waG9uZSB7CiAgICBkaXNwbGF5OiBpbmhlcml0ICFpbXBvcnRhbnQ7CiAgfQogIC5oaWRkZW4tcGhvbmUgewogICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OwogIH0KfQoKQG1lZGlhIChtaW4td2lkdGg6IDEyMDBweCkgewogIC5yb3cgewogICAgbWFyZ2luLWxlZnQ6IC0zMHB4OwogICAgKnpvb206IDE7CiAgfQogIC5yb3c6YmVmb3JlLAogIC5yb3c6YWZ0ZXIgewogICAgZGlzcGxheTogdGFibGU7CiAgICBsaW5lLWhlaWdodDogMDsKICAgIGNvbnRlbnQ6ICIiOwogIH0KICAucm93OmFmdGVyIHsKICAgIGNsZWFyOiBib3RoOwogIH0KICBbY2xhc3MqPSJzcGFuIl0gewogICAgZmxvYXQ6IGxlZnQ7CiAgICBtaW4taGVpZ2h0OiAxcHg7CiAgICBtYXJnaW4tbGVmdDogMzBweDsKICB9CiAgLmNvbnRhaW5lciwKICAubmF2YmFyLXN0YXRpYy10b3AgLmNvbnRhaW5lciwKICAubmF2YmFyLWZpeGVkLXRvcCAuY29udGFpbmVyLAogIC5uYXZiYXItZml4ZWQtYm90dG9tIC5jb250YWluZXIgewogICAgd2lkdGg6IDExNzBweDsKICB9CiAgLnNwYW4xMiB7CiAgICB3aWR0aDogMTE3MHB4OwogIH0KICAuc3BhbjExIHsKICAgIHdpZHRoOiAxMDcwcHg7CiAgfQogIC5zcGFuMTAgewogICAgd2lkdGg6IDk3MHB4OwogIH0KICAuc3BhbjkgewogICAgd2lkdGg6IDg3MHB4OwogIH0KICAuc3BhbjggewogICAgd2lkdGg6IDc3MHB4OwogIH0KICAuc3BhbjcgewogICAgd2lkdGg6IDY3MHB4OwogIH0KICAuc3BhbjYgewogICAgd2lkdGg6IDU3MHB4OwogIH0KICAuc3BhbjUgewogICAgd2lkdGg6IDQ3MHB4OwogIH0KICAuc3BhbjQgewogICAgd2lkdGg6IDM3MHB4OwogIH0KICAuc3BhbjMgewogICAgd2lkdGg6IDI3MHB4OwogIH0KICAuc3BhbjIgewogICAgd2lkdGg6IDE3MHB4OwogIH0KICAuc3BhbjEgewogICAgd2lkdGg6IDcwcHg7CiAgfQogIC5vZmZzZXQxMiB7CiAgICBtYXJnaW4tbGVmdDogMTIzMHB4OwogIH0KICAub2Zmc2V0MTEgewogICAgbWFyZ2luLWxlZnQ6IDExMzBweDsKICB9CiAgLm9mZnNldDEwIHsKICAgIG1hcmdpbi1sZWZ0OiAxMDMwcHg7CiAgfQogIC5vZmZzZXQ5IHsKICAgIG1hcmdpbi1sZWZ0OiA5MzBweDsKICB9CiAgLm9mZnNldDggewogICAgbWFyZ2luLWxlZnQ6IDgzMHB4OwogIH0KICAub2Zmc2V0NyB7CiAgICBtYXJnaW4tbGVmdDogNzMwcHg7CiAgfQogIC5vZmZzZXQ2IHsKICAgIG1hcmdpbi1sZWZ0OiA2MzBweDsKICB9CiAgLm9mZnNldDUgewogICAgbWFyZ2luLWxlZnQ6IDUzMHB4OwogIH0KICAub2Zmc2V0NCB7CiAgICBtYXJnaW4tbGVmdDogNDMwcHg7CiAgfQogIC5vZmZzZXQzIHsKICAgIG1hcmdpbi1sZWZ0OiAzMzBweDsKICB9CiAgLm9mZnNldDIgewogICAgbWFyZ2luLWxlZnQ6IDIzMHB4OwogIH0KICAub2Zmc2V0MSB7CiAgICBtYXJnaW4tbGVmdDogMTMwcHg7CiAgfQogIC5yb3ctZmx1aWQgewogICAgd2lkdGg6IDEwMCU7CiAgICAqem9vbTogMTsKICB9CiAgLnJvdy1mbHVpZDpiZWZvcmUsCiAgLnJvdy1mbHVpZDphZnRlciB7CiAgICBkaXNwbGF5OiB0YWJsZTsKICAgIGxpbmUtaGVpZ2h0OiAwOwogICAgY29udGVudDogIiI7CiAgfQogIC5yb3ctZmx1aWQ6YWZ0ZXIgewogICAgY2xlYXI6IGJvdGg7CiAgfQogIC5yb3ctZmx1aWQgW2NsYXNzKj0ic3BhbiJdIHsKICAgIGRpc3BsYXk6IGJsb2NrOwogICAgZmxvYXQ6IGxlZnQ7CiAgICB3aWR0aDogMTAwJTsKICAgIG1pbi1oZWlnaHQ6IDMwcHg7CiAgICBtYXJnaW4tbGVmdDogMi41NjQxMDI1NjQxMDI1NjQlOwogICAgKm1hcmdpbi1sZWZ0OiAyLjUxMDkxMTA3NDc0MDg2MTYlOwogICAgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgICAgLW1vei1ib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogIH0KICAucm93LWZsdWlkIFtjbGFzcyo9InNwYW4iXTpmaXJzdC1jaGlsZCB7CiAgICBtYXJnaW4tbGVmdDogMDsKICB9CiAgLnJvdy1mbHVpZCAuY29udHJvbHMtcm93IFtjbGFzcyo9InNwYW4iXSArIFtjbGFzcyo9InNwYW4iXSB7CiAgICBtYXJnaW4tbGVmdDogMi41NjQxMDI1NjQxMDI1NjQlOwogIH0KICAucm93LWZsdWlkIC5zcGFuMTIgewogICAgd2lkdGg6IDEwMCU7CiAgICAqd2lkdGg6IDk5Ljk0NjgwODUxMDYzODI5JTsKICB9CiAgLnJvdy1mbHVpZCAuc3BhbjExIHsKICAgIHdpZHRoOiA5MS40NTI5OTE0NTI5OTE0NSU7CiAgICAqd2lkdGg6IDkxLjM5OTc5OTk2MzYyOTc1JTsKICB9CiAgLnJvdy1mbHVpZCAuc3BhbjEwIHsKICAgIHdpZHRoOiA4Mi45MDU5ODI5MDU5ODI5MSU7CiAgICAqd2lkdGg6IDgyLjg1Mjc5MTQxNjYyMTIlOwogIH0KICAucm93LWZsdWlkIC5zcGFuOSB7CiAgICB3aWR0aDogNzQuMzU4OTc0MzU4OTc0MzYlOwogICAgKndpZHRoOiA3NC4zMDU3ODI4Njk2MTI2NiU7CiAgfQogIC5yb3ctZmx1aWQgLnNwYW44IHsKICAgIHdpZHRoOiA2NS44MTE5NjU4MTE5NjU4MiU7CiAgICAqd2lkdGg6IDY1Ljc1ODc3NDMyMjYwNDExJTsKICB9CiAgLnJvdy1mbHVpZCAuc3BhbjcgewogICAgd2lkdGg6IDU3LjI2NDk1NzI2NDk1NzI2JTsKICAgICp3aWR0aDogNTcuMjExNzY1Nzc1NTk1NTYlOwogIH0KICAucm93LWZsdWlkIC5zcGFuNiB7CiAgICB3aWR0aDogNDguNzE3OTQ4NzE3OTQ4NzE1JTsKICAgICp3aWR0aDogNDguNjY0NzU3MjI4NTg3MDE0JTsKICB9CiAgLnJvdy1mbHVpZCAuc3BhbjUgewogICAgd2lkdGg6IDQwLjE3MDk0MDE3MDk0MDE3JTsKICAgICp3aWR0aDogNDAuMTE3NzQ4NjgxNTc4NDclOwogIH0KICAucm93LWZsdWlkIC5zcGFuNCB7CiAgICB3aWR0aDogMzEuNjIzOTMxNjIzOTMxNjI1JTsKICAgICp3aWR0aDogMzEuNTcwNzQwMTM0NTY5OTI0JTsKICB9CiAgLnJvdy1mbHVpZCAuc3BhbjMgewogICAgd2lkdGg6IDIzLjA3NjkyMzA3NjkyMzA3NyU7CiAgICAqd2lkdGg6IDIzLjAyMzczMTU4NzU2MTM3NSU7CiAgfQogIC5yb3ctZmx1aWQgLnNwYW4yIHsKICAgIHdpZHRoOiAxNC41Mjk5MTQ1Mjk5MTQ1MyU7CiAgICAqd2lkdGg6IDE0LjQ3NjcyMzA0MDU1MjgyOCU7CiAgfQogIC5yb3ctZmx1aWQgLnNwYW4xIHsKICAgIHdpZHRoOiA1Ljk4MjkwNTk4MjkwNTk4MyU7CiAgICAqd2lkdGg6IDUuOTI5NzE0NDkzNTQ0MjgxJTsKICB9CiAgLnJvdy1mbHVpZCAub2Zmc2V0MTIgewogICAgbWFyZ2luLWxlZnQ6IDEwNS4xMjgyMDUxMjgyMDUxMiU7CiAgICAqbWFyZ2luLWxlZnQ6IDEwNS4wMjE4MjIxNDk0ODE3MSU7CiAgfQogIC5yb3ctZmx1aWQgLm9mZnNldDEyOmZpcnN0LWNoaWxkIHsKICAgIG1hcmdpbi1sZWZ0OiAxMDIuNTY0MTAyNTY0MTAyNTclOwogICAgKm1hcmdpbi1sZWZ0OiAxMDIuNDU3NzE5NTg1Mzc5MTUlOwogIH0KICAucm93LWZsdWlkIC5vZmZzZXQxMSB7CiAgICBtYXJnaW4tbGVmdDogOTYuNTgxMTk2NTgxMTk2NTglOwogICAgKm1hcmdpbi1sZWZ0OiA5Ni40NzQ4MTM2MDI0NzMxNiU7CiAgfQogIC5yb3ctZmx1aWQgLm9mZnNldDExOmZpcnN0LWNoaWxkIHsKICAgIG1hcmdpbi1sZWZ0OiA5NC4wMTcwOTQwMTcwOTQwMiU7CiAgICAqbWFyZ2luLWxlZnQ6IDkzLjkxMDcxMTAzODM3MDYxJTsKICB9CiAgLnJvdy1mbHVpZCAub2Zmc2V0MTAgewogICAgbWFyZ2luLWxlZnQ6IDg4LjAzNDE4ODAzNDE4ODAzJTsKICAgICptYXJnaW4tbGVmdDogODcuOTI3ODA1MDU1NDY0NjIlOwogIH0KICAucm93LWZsdWlkIC5vZmZzZXQxMDpmaXJzdC1jaGlsZCB7CiAgICBtYXJnaW4tbGVmdDogODUuNDcwMDg1NDcwMDg1NDglOwogICAgKm1hcmdpbi1sZWZ0OiA4NS4zNjM3MDI0OTEzNjIwNiU7CiAgfQogIC5yb3ctZmx1aWQgLm9mZnNldDkgewogICAgbWFyZ2luLWxlZnQ6IDc5LjQ4NzE3OTQ4NzE3OTQ5JTsKICAgICptYXJnaW4tbGVmdDogNzkuMzgwNzk2NTA4NDU2MDclOwogIH0KICAucm93LWZsdWlkIC5vZmZzZXQ5OmZpcnN0LWNoaWxkIHsKICAgIG1hcmdpbi1sZWZ0OiA3Ni45MjMwNzY5MjMwNzY5MyU7CiAgICAqbWFyZ2luLWxlZnQ6IDc2LjgxNjY5Mzk0NDM1MzUyJTsKICB9CiAgLnJvdy1mbHVpZCAub2Zmc2V0OCB7CiAgICBtYXJnaW4tbGVmdDogNzAuOTQwMTcwOTQwMTcwOTQlOwogICAgKm1hcmdpbi1sZWZ0OiA3MC44MzM3ODc5NjE0NDc1MyU7CiAgfQogIC5yb3ctZmx1aWQgLm9mZnNldDg6Zmlyc3QtY2hpbGQgewogICAgbWFyZ2luLWxlZnQ6IDY4LjM3NjA2ODM3NjA2ODM5JTsKICAgICptYXJnaW4tbGVmdDogNjguMjY5Njg1Mzk3MzQ0OTclOwogIH0KICAucm93LWZsdWlkIC5vZmZzZXQ3IHsKICAgIG1hcmdpbi1sZWZ0OiA2Mi4zOTMxNjIzOTMxNjIzODUlOwogICAgKm1hcmdpbi1sZWZ0OiA2Mi4yODY3Nzk0MTQ0Mzg5OSU7CiAgfQogIC5yb3ctZmx1aWQgLm9mZnNldDc6Zmlyc3QtY2hpbGQgewogICAgbWFyZ2luLWxlZnQ6IDU5LjgyOTA1OTgyOTA1OTgyJTsKICAgICptYXJnaW4tbGVmdDogNTkuNzIyNjc2ODUwMzM2NDIlOwogIH0KICAucm93LWZsdWlkIC5vZmZzZXQ2IHsKICAgIG1hcmdpbi1sZWZ0OiA1My44NDYxNTM4NDYxNTM4NCU7CiAgICAqbWFyZ2luLWxlZnQ6IDUzLjczOTc3MDg2NzQzMDQ0NCU7CiAgfQogIC5yb3ctZmx1aWQgLm9mZnNldDY6Zmlyc3QtY2hpbGQgewogICAgbWFyZ2luLWxlZnQ6IDUxLjI4MjA1MTI4MjA1MTI4JTsKICAgICptYXJnaW4tbGVmdDogNTEuMTc1NjY4MzAzMzI3ODc1JTsKICB9CiAgLnJvdy1mbHVpZCAub2Zmc2V0NSB7CiAgICBtYXJnaW4tbGVmdDogNDUuMjk5MTQ1Mjk5MTQ1Mjk1JTsKICAgICptYXJnaW4tbGVmdDogNDUuMTkyNzYyMzIwNDIxOSU7CiAgfQogIC5yb3ctZmx1aWQgLm9mZnNldDU6Zmlyc3QtY2hpbGQgewogICAgbWFyZ2luLWxlZnQ6IDQyLjczNTA0MjczNTA0MjczJTsKICAgICptYXJnaW4tbGVmdDogNDIuNjI4NjU5NzU2MzE5MzMlOwogIH0KICAucm93LWZsdWlkIC5vZmZzZXQ0IHsKICAgIG1hcmdpbi1sZWZ0OiAzNi43NTIxMzY3NTIxMzY3NSU7CiAgICAqbWFyZ2luLWxlZnQ6IDM2LjY0NTc1Mzc3MzQxMzM1NCU7CiAgfQogIC5yb3ctZmx1aWQgLm9mZnNldDQ6Zmlyc3QtY2hpbGQgewogICAgbWFyZ2luLWxlZnQ6IDM0LjE4ODAzNDE4ODAzNDE5JTsKICAgICptYXJnaW4tbGVmdDogMzQuMDgxNjUxMjA5MzEwNzg1JTsKICB9CiAgLnJvdy1mbHVpZCAub2Zmc2V0MyB7CiAgICBtYXJnaW4tbGVmdDogMjguMjA1MTI4MjA1MTI4MjA0JTsKICAgICptYXJnaW4tbGVmdDogMjguMDk4NzQ1MjI2NDA0OCU7CiAgfQogIC5yb3ctZmx1aWQgLm9mZnNldDM6Zmlyc3QtY2hpbGQgewogICAgbWFyZ2luLWxlZnQ6IDI1LjY0MTAyNTY0MTAyNTY0MiU7CiAgICAqbWFyZ2luLWxlZnQ6IDI1LjUzNDY0MjY2MjMwMjI0JTsKICB9CiAgLnJvdy1mbHVpZCAub2Zmc2V0MiB7CiAgICBtYXJnaW4tbGVmdDogMTkuNjU4MTE5NjU4MTE5NjYlOwogICAgKm1hcmdpbi1sZWZ0OiAxOS41NTE3MzY2NzkzOTYyNTclOwogIH0KICAucm93LWZsdWlkIC5vZmZzZXQyOmZpcnN0LWNoaWxkIHsKICAgIG1hcmdpbi1sZWZ0OiAxNy4wOTQwMTcwOTQwMTcwOTQlOwogICAgKm1hcmdpbi1sZWZ0OiAxNi45ODc2MzQxMTUyOTM2OSU7CiAgfQogIC5yb3ctZmx1aWQgLm9mZnNldDEgewogICAgbWFyZ2luLWxlZnQ6IDExLjExMTExMTExMTExMTExJTsKICAgICptYXJnaW4tbGVmdDogMTEuMDA0NzI4MTMyMzg3NzA4JTsKICB9CiAgLnJvdy1mbHVpZCAub2Zmc2V0MTpmaXJzdC1jaGlsZCB7CiAgICBtYXJnaW4tbGVmdDogOC41NDcwMDg1NDcwMDg1NDclOwogICAgKm1hcmdpbi1sZWZ0OiA4LjQ0MDYyNTU2ODI4NTE0MiU7CiAgfQogIGlucHV0LAogIHRleHRhcmVhLAogIC51bmVkaXRhYmxlLWlucHV0IHsKICAgIG1hcmdpbi1sZWZ0OiAwOwogIH0KICAuY29udHJvbHMtcm93IFtjbGFzcyo9InNwYW4iXSArIFtjbGFzcyo9InNwYW4iXSB7CiAgICBtYXJnaW4tbGVmdDogMzBweDsKICB9CiAgaW5wdXQuc3BhbjEyLAogIHRleHRhcmVhLnNwYW4xMiwKICAudW5lZGl0YWJsZS1pbnB1dC5zcGFuMTIgewogICAgd2lkdGg6IDExNTZweDsKICB9CiAgaW5wdXQuc3BhbjExLAogIHRleHRhcmVhLnNwYW4xMSwKICAudW5lZGl0YWJsZS1pbnB1dC5zcGFuMTEgewogICAgd2lkdGg6IDEwNTZweDsKICB9CiAgaW5wdXQuc3BhbjEwLAogIHRleHRhcmVhLnNwYW4xMCwKICAudW5lZGl0YWJsZS1pbnB1dC5zcGFuMTAgewogICAgd2lkdGg6IDk1NnB4OwogIH0KICBpbnB1dC5zcGFuOSwKICB0ZXh0YXJlYS5zcGFuOSwKICAudW5lZGl0YWJsZS1pbnB1dC5zcGFuOSB7CiAgICB3aWR0aDogODU2cHg7CiAgfQogIGlucHV0LnNwYW44LAogIHRleHRhcmVhLnNwYW44LAogIC51bmVkaXRhYmxlLWlucHV0LnNwYW44IHsKICAgIHdpZHRoOiA3NTZweDsKICB9CiAgaW5wdXQuc3BhbjcsCiAgdGV4dGFyZWEuc3BhbjcsCiAgLnVuZWRpdGFibGUtaW5wdXQuc3BhbjcgewogICAgd2lkdGg6IDY1NnB4OwogIH0KICBpbnB1dC5zcGFuNiwKICB0ZXh0YXJlYS5zcGFuNiwKICAudW5lZGl0YWJsZS1pbnB1dC5zcGFuNiB7CiAgICB3aWR0aDogNTU2cHg7CiAgfQogIGlucHV0LnNwYW41LAogIHRleHRhcmVhLnNwYW41LAogIC51bmVkaXRhYmxlLWlucHV0LnNwYW41IHsKICAgIHdpZHRoOiA0NTZweDsKICB9CiAgaW5wdXQuc3BhbjQsCiAgdGV4dGFyZWEuc3BhbjQsCiAgLnVuZWRpdGFibGUtaW5wdXQuc3BhbjQgewogICAgd2lkdGg6IDM1NnB4OwogIH0KICBpbnB1dC5zcGFuMywKICB0ZXh0YXJlYS5zcGFuMywKICAudW5lZGl0YWJsZS1pbnB1dC5zcGFuMyB7CiAgICB3aWR0aDogMjU2cHg7CiAgfQogIGlucHV0LnNwYW4yLAogIHRleHRhcmVhLnNwYW4yLAogIC51bmVkaXRhYmxlLWlucHV0LnNwYW4yIHsKICAgIHdpZHRoOiAxNTZweDsKICB9CiAgaW5wdXQuc3BhbjEsCiAgdGV4dGFyZWEuc3BhbjEsCiAgLnVuZWRpdGFibGUtaW5wdXQuc3BhbjEgewogICAgd2lkdGg6IDU2cHg7CiAgfQogIC50aHVtYm5haWxzIHsKICAgIG1hcmdpbi1sZWZ0OiAtMzBweDsKICB9CiAgLnRodW1ibmFpbHMgPiBsaSB7CiAgICBtYXJnaW4tbGVmdDogMzBweDsKICB9CiAgLnJvdy1mbHVpZCAudGh1bWJuYWlscyB7CiAgICBtYXJnaW4tbGVmdDogMDsKICB9Cn0KCkBtZWRpYSAobWluLXdpZHRoOiA3NjhweCkgYW5kIChtYXgtd2lkdGg6IDk3OXB4KSB7CiAgLnJvdyB7CiAgICBtYXJnaW4tbGVmdDogLTIwcHg7CiAgICAqem9vbTogMTsKICB9CiAgLnJvdzpiZWZvcmUsCiAgLnJvdzphZnRlciB7CiAgICBkaXNwbGF5OiB0YWJsZTsKICAgIGxpbmUtaGVpZ2h0OiAwOwogICAgY29udGVudDogIiI7CiAgfQogIC5yb3c6YWZ0ZXIgewogICAgY2xlYXI6IGJvdGg7CiAgfQogIFtjbGFzcyo9InNwYW4iXSB7CiAgICBmbG9hdDogbGVmdDsKICAgIG1pbi1oZWlnaHQ6IDFweDsKICAgIG1hcmdpbi1sZWZ0OiAyMHB4OwogIH0KICAuY29udGFpbmVyLAogIC5uYXZiYXItc3RhdGljLXRvcCAuY29udGFpbmVyLAogIC5uYXZiYXItZml4ZWQtdG9wIC5jb250YWluZXIsCiAgLm5hdmJhci1maXhlZC1ib3R0b20gLmNvbnRhaW5lciB7CiAgICB3aWR0aDogNzI0cHg7CiAgfQogIC5zcGFuMTIgewogICAgd2lkdGg6IDcyNHB4OwogIH0KICAuc3BhbjExIHsKICAgIHdpZHRoOiA2NjJweDsKICB9CiAgLnNwYW4xMCB7CiAgICB3aWR0aDogNjAwcHg7CiAgfQogIC5zcGFuOSB7CiAgICB3aWR0aDogNTM4cHg7CiAgfQogIC5zcGFuOCB7CiAgICB3aWR0aDogNDc2cHg7CiAgfQogIC5zcGFuNyB7CiAgICB3aWR0aDogNDE0cHg7CiAgfQogIC5zcGFuNiB7CiAgICB3aWR0aDogMzUycHg7CiAgfQogIC5zcGFuNSB7CiAgICB3aWR0aDogMjkwcHg7CiAgfQogIC5zcGFuNCB7CiAgICB3aWR0aDogMjI4cHg7CiAgfQogIC5zcGFuMyB7CiAgICB3aWR0aDogMTY2cHg7CiAgfQogIC5zcGFuMiB7CiAgICB3aWR0aDogMTA0cHg7CiAgfQogIC5zcGFuMSB7CiAgICB3aWR0aDogNDJweDsKICB9CiAgLm9mZnNldDEyIHsKICAgIG1hcmdpbi1sZWZ0OiA3NjRweDsKICB9CiAgLm9mZnNldDExIHsKICAgIG1hcmdpbi1sZWZ0OiA3MDJweDsKICB9CiAgLm9mZnNldDEwIHsKICAgIG1hcmdpbi1sZWZ0OiA2NDBweDsKICB9CiAgLm9mZnNldDkgewogICAgbWFyZ2luLWxlZnQ6IDU3OHB4OwogIH0KICAub2Zmc2V0OCB7CiAgICBtYXJnaW4tbGVmdDogNTE2cHg7CiAgfQogIC5vZmZzZXQ3IHsKICAgIG1hcmdpbi1sZWZ0OiA0NTRweDsKICB9CiAgLm9mZnNldDYgewogICAgbWFyZ2luLWxlZnQ6IDM5MnB4OwogIH0KICAub2Zmc2V0NSB7CiAgICBtYXJnaW4tbGVmdDogMzMwcHg7CiAgfQogIC5vZmZzZXQ0IHsKICAgIG1hcmdpbi1sZWZ0OiAyNjhweDsKICB9CiAgLm9mZnNldDMgewogICAgbWFyZ2luLWxlZnQ6IDIwNnB4OwogIH0KICAub2Zmc2V0MiB7CiAgICBtYXJnaW4tbGVmdDogMTQ0cHg7CiAgfQogIC5vZmZzZXQxIHsKICAgIG1hcmdpbi1sZWZ0OiA4MnB4OwogIH0KICAucm93LWZsdWlkIHsKICAgIHdpZHRoOiAxMDAlOwogICAgKnpvb206IDE7CiAgfQogIC5yb3ctZmx1aWQ6YmVmb3JlLAogIC5yb3ctZmx1aWQ6YWZ0ZXIgewogICAgZGlzcGxheTogdGFibGU7CiAgICBsaW5lLWhlaWdodDogMDsKICAgIGNvbnRlbnQ6ICIiOwogIH0KICAucm93LWZsdWlkOmFmdGVyIHsKICAgIGNsZWFyOiBib3RoOwogIH0KICAucm93LWZsdWlkIFtjbGFzcyo9InNwYW4iXSB7CiAgICBkaXNwbGF5OiBibG9jazsKICAgIGZsb2F0OiBsZWZ0OwogICAgd2lkdGg6IDEwMCU7CiAgICBtaW4taGVpZ2h0OiAzMHB4OwogICAgbWFyZ2luLWxlZnQ6IDIuNzYyNDMwOTM5MjI2NTE5NCU7CiAgICAqbWFyZ2luLWxlZnQ6IDIuNzA5MjM5NDQ5ODY0ODE3JTsKICAgIC13ZWJraXQtYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgICAgIC1tb3otYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICB9CiAgLnJvdy1mbHVpZCBbY2xhc3MqPSJzcGFuIl06Zmlyc3QtY2hpbGQgewogICAgbWFyZ2luLWxlZnQ6IDA7CiAgfQogIC5yb3ctZmx1aWQgLmNvbnRyb2xzLXJvdyBbY2xhc3MqPSJzcGFuIl0gKyBbY2xhc3MqPSJzcGFuIl0gewogICAgbWFyZ2luLWxlZnQ6IDIuNzYyNDMwOTM5MjI2NTE5NCU7CiAgfQogIC5yb3ctZmx1aWQgLnNwYW4xMiB7CiAgICB3aWR0aDogMTAwJTsKICAgICp3aWR0aDogOTkuOTQ2ODA4NTEwNjM4MjklOwogIH0KICAucm93LWZsdWlkIC5zcGFuMTEgewogICAgd2lkdGg6IDkxLjQzNjQ2NDA4ODM5Nzc4JTsKICAgICp3aWR0aDogOTEuMzgzMjcyNTk5MDM2MDglOwogIH0KICAucm93LWZsdWlkIC5zcGFuMTAgewogICAgd2lkdGg6IDgyLjg3MjkyODE3Njc5NTU4JTsKICAgICp3aWR0aDogODIuODE5NzM2Njg3NDMzODclOwogIH0KICAucm93LWZsdWlkIC5zcGFuOSB7CiAgICB3aWR0aDogNzQuMzA5MzkyMjY1MTkzMzclOwogICAgKndpZHRoOiA3NC4yNTYyMDA3NzU4MzE2NiU7CiAgfQogIC5yb3ctZmx1aWQgLnNwYW44IHsKICAgIHdpZHRoOiA2NS43NDU4NTYzNTM1OTExNyU7CiAgICAqd2lkdGg6IDY1LjY5MjY2NDg2NDIyOTQ2JTsKICB9CiAgLnJvdy1mbHVpZCAuc3BhbjcgewogICAgd2lkdGg6IDU3LjE4MjMyMDQ0MTk4ODk1JTsKICAgICp3aWR0aDogNTcuMTI5MTI4OTUyNjI3MjUlOwogIH0KICAucm93LWZsdWlkIC5zcGFuNiB7CiAgICB3aWR0aDogNDguNjE4Nzg0NTMwMzg2NzQlOwogICAgKndpZHRoOiA0OC41NjU1OTMwNDEwMjUwNCU7CiAgfQogIC5yb3ctZmx1aWQgLnNwYW41IHsKICAgIHdpZHRoOiA0MC4wNTUyNDg2MTg3ODQ1MyU7CiAgICAqd2lkdGg6IDQwLjAwMjA1NzEyOTQyMjgzJTsKICB9CiAgLnJvdy1mbHVpZCAuc3BhbjQgewogICAgd2lkdGg6IDMxLjQ5MTcxMjcwNzE4MjMyMyU7CiAgICAqd2lkdGg6IDMxLjQzODUyMTIxNzgyMDYyJTsKICB9CiAgLnJvdy1mbHVpZCAuc3BhbjMgewogICAgd2lkdGg6IDIyLjkyODE3Njc5NTU4MDExJTsKICAgICp3aWR0aDogMjIuODc0OTg1MzA2MjE4NDElOwogIH0KICAucm93LWZsdWlkIC5zcGFuMiB7CiAgICB3aWR0aDogMTQuMzY0NjQwODgzOTc3OSU7CiAgICAqd2lkdGg6IDE0LjMxMTQ0OTM5NDYxNjE5OSU7CiAgfQogIC5yb3ctZmx1aWQgLnNwYW4xIHsKICAgIHdpZHRoOiA1LjgwMTEwNDk3MjM3NTY5MSU7CiAgICAqd2lkdGg6IDUuNzQ3OTEzNDgzMDEzOTg4JTsKICB9CiAgLnJvdy1mbHVpZCAub2Zmc2V0MTIgewogICAgbWFyZ2luLWxlZnQ6IDEwNS41MjQ4NjE4Nzg0NTMwNCU7CiAgICAqbWFyZ2luLWxlZnQ6IDEwNS40MTg0Nzg4OTk3Mjk2MiU7CiAgfQogIC5yb3ctZmx1aWQgLm9mZnNldDEyOmZpcnN0LWNoaWxkIHsKICAgIG1hcmdpbi1sZWZ0OiAxMDIuNzYyNDMwOTM5MjI2NTIlOwogICAgKm1hcmdpbi1sZWZ0OiAxMDIuNjU2MDQ3OTYwNTAzMSU7CiAgfQogIC5yb3ctZmx1aWQgLm9mZnNldDExIHsKICAgIG1hcmdpbi1sZWZ0OiA5Ni45NjEzMjU5NjY4NTA4MiU7CiAgICAqbWFyZ2luLWxlZnQ6IDk2Ljg1NDk0Mjk4ODEyNzQlOwogIH0KICAucm93LWZsdWlkIC5vZmZzZXQxMTpmaXJzdC1jaGlsZCB7CiAgICBtYXJnaW4tbGVmdDogOTQuMTk4ODk1MDI3NjI0MyU7CiAgICAqbWFyZ2luLWxlZnQ6IDk0LjA5MjUxMjA0ODkwMDg5JTsKICB9CiAgLnJvdy1mbHVpZCAub2Zmc2V0MTAgewogICAgbWFyZ2luLWxlZnQ6IDg4LjM5Nzc5MDA1NTI0ODYyJTsKICAgICptYXJnaW4tbGVmdDogODguMjkxNDA3MDc2NTI1MiU7CiAgfQogIC5yb3ctZmx1aWQgLm9mZnNldDEwOmZpcnN0LWNoaWxkIHsKICAgIG1hcmdpbi1sZWZ0OiA4NS42MzUzNTkxMTYwMjIxJTsKICAgICptYXJnaW4tbGVmdDogODUuNTI4OTc2MTM3Mjk4NjglOwogIH0KICAucm93LWZsdWlkIC5vZmZzZXQ5IHsKICAgIG1hcmdpbi1sZWZ0OiA3OS44MzQyNTQxNDM2NDY0JTsKICAgICptYXJnaW4tbGVmdDogNzkuNzI3ODcxMTY0OTIyOTklOwogIH0KICAucm93LWZsdWlkIC5vZmZzZXQ5OmZpcnN0LWNoaWxkIHsKICAgIG1hcmdpbi1sZWZ0OiA3Ny4wNzE4MjMyMDQ0MTk4OSU7CiAgICAqbWFyZ2luLWxlZnQ6IDc2Ljk2NTQ0MDIyNTY5NjQ3JTsKICB9CiAgLnJvdy1mbHVpZCAub2Zmc2V0OCB7CiAgICBtYXJnaW4tbGVmdDogNzEuMjcwNzE4MjMyMDQ0MiU7CiAgICAqbWFyZ2luLWxlZnQ6IDcxLjE2NDMzNTI1MzMyMDc5JTsKICB9CiAgLnJvdy1mbHVpZCAub2Zmc2V0ODpmaXJzdC1jaGlsZCB7CiAgICBtYXJnaW4tbGVmdDogNjguNTA4Mjg3MjkyODE3NjglOwogICAgKm1hcmdpbi1sZWZ0OiA2OC40MDE5MDQzMTQwOTQyNyU7CiAgfQogIC5yb3ctZmx1aWQgLm9mZnNldDcgewogICAgbWFyZ2luLWxlZnQ6IDYyLjcwNzE4MjMyMDQ0MTk5JTsKICAgICptYXJnaW4tbGVmdDogNjIuNjAwNzk5MzQxNzE4NTg0JTsKICB9CiAgLnJvdy1mbHVpZCAub2Zmc2V0NzpmaXJzdC1jaGlsZCB7CiAgICBtYXJnaW4tbGVmdDogNTkuOTQ0NzUxMzgxMjE1NDclOwogICAgKm1hcmdpbi1sZWZ0OiA1OS44MzgzNjg0MDI0OTIwNjUlOwogIH0KICAucm93LWZsdWlkIC5vZmZzZXQ2IHsKICAgIG1hcmdpbi1sZWZ0OiA1NC4xNDM2NDY0MDg4Mzk3OCU7CiAgICAqbWFyZ2luLWxlZnQ6IDU0LjAzNzI2MzQzMDExNjM3NiU7CiAgfQogIC5yb3ctZmx1aWQgLm9mZnNldDY6Zmlyc3QtY2hpbGQgewogICAgbWFyZ2luLWxlZnQ6IDUxLjM4MTIxNTQ2OTYxMzI2JTsKICAgICptYXJnaW4tbGVmdDogNTEuMjc0ODMyNDkwODg5ODYlOwogIH0KICAucm93LWZsdWlkIC5vZmZzZXQ1IHsKICAgIG1hcmdpbi1sZWZ0OiA0NS41ODAxMTA0OTcyMzc1NyU7CiAgICAqbWFyZ2luLWxlZnQ6IDQ1LjQ3MzcyNzUxODUxNDE3JTsKICB9CiAgLnJvdy1mbHVpZCAub2Zmc2V0NTpmaXJzdC1jaGlsZCB7CiAgICBtYXJnaW4tbGVmdDogNDIuODE3Njc5NTU4MDExMDUlOwogICAgKm1hcmdpbi1sZWZ0OiA0Mi43MTEyOTY1NzkyODc2NSU7CiAgfQogIC5yb3ctZmx1aWQgLm9mZnNldDQgewogICAgbWFyZ2luLWxlZnQ6IDM3LjAxNjU3NDU4NTYzNTM2JTsKICAgICptYXJnaW4tbGVmdDogMzYuOTEwMTkxNjA2OTExOTYlOwogIH0KICAucm93LWZsdWlkIC5vZmZzZXQ0OmZpcnN0LWNoaWxkIHsKICAgIG1hcmdpbi1sZWZ0OiAzNC4yNTQxNDM2NDY0MDg4NCU7CiAgICAqbWFyZ2luLWxlZnQ6IDM0LjE0Nzc2MDY2NzY4NTQ0JTsKICB9CiAgLnJvdy1mbHVpZCAub2Zmc2V0MyB7CiAgICBtYXJnaW4tbGVmdDogMjguNDUzMDM4Njc0MDMzMTUlOwogICAgKm1hcmdpbi1sZWZ0OiAyOC4zNDY2NTU2OTUzMDk3NDYlOwogIH0KICAucm93LWZsdWlkIC5vZmZzZXQzOmZpcnN0LWNoaWxkIHsKICAgIG1hcmdpbi1sZWZ0OiAyNS42OTA2MDc3MzQ4MDY2MyU7CiAgICAqbWFyZ2luLWxlZnQ6IDI1LjU4NDIyNDc1NjA4MzIyNyU7CiAgfQogIC5yb3ctZmx1aWQgLm9mZnNldDIgewogICAgbWFyZ2luLWxlZnQ6IDE5Ljg4OTUwMjc2MjQzMDk0JTsKICAgICptYXJnaW4tbGVmdDogMTkuNzgzMTE5NzgzNzA3NTM3JTsKICB9CiAgLnJvdy1mbHVpZCAub2Zmc2V0MjpmaXJzdC1jaGlsZCB7CiAgICBtYXJnaW4tbGVmdDogMTcuMTI3MDcxODIzMjA0NDIlOwogICAgKm1hcmdpbi1sZWZ0OiAxNy4wMjA2ODg4NDQ0ODEwMiU7CiAgfQogIC5yb3ctZmx1aWQgLm9mZnNldDEgewogICAgbWFyZ2luLWxlZnQ6IDExLjMyNTk2Njg1MDgyODczJTsKICAgICptYXJnaW4tbGVmdDogMTEuMjE5NTgzODcyMTA1MzI1JTsKICB9CiAgLnJvdy1mbHVpZCAub2Zmc2V0MTpmaXJzdC1jaGlsZCB7CiAgICBtYXJnaW4tbGVmdDogOC41NjM1MzU5MTE2MDIyMSU7CiAgICAqbWFyZ2luLWxlZnQ6IDguNDU3MTUyOTMyODc4ODA2JTsKICB9CiAgaW5wdXQsCiAgdGV4dGFyZWEsCiAgLnVuZWRpdGFibGUtaW5wdXQgewogICAgbWFyZ2luLWxlZnQ6IDA7CiAgfQogIC5jb250cm9scy1yb3cgW2NsYXNzKj0ic3BhbiJdICsgW2NsYXNzKj0ic3BhbiJdIHsKICAgIG1hcmdpbi1sZWZ0OiAyMHB4OwogIH0KICBpbnB1dC5zcGFuMTIsCiAgdGV4dGFyZWEuc3BhbjEyLAogIC51bmVkaXRhYmxlLWlucHV0LnNwYW4xMiB7CiAgICB3aWR0aDogNzEwcHg7CiAgfQogIGlucHV0LnNwYW4xMSwKICB0ZXh0YXJlYS5zcGFuMTEsCiAgLnVuZWRpdGFibGUtaW5wdXQuc3BhbjExIHsKICAgIHdpZHRoOiA2NDhweDsKICB9CiAgaW5wdXQuc3BhbjEwLAogIHRleHRhcmVhLnNwYW4xMCwKICAudW5lZGl0YWJsZS1pbnB1dC5zcGFuMTAgewogICAgd2lkdGg6IDU4NnB4OwogIH0KICBpbnB1dC5zcGFuOSwKICB0ZXh0YXJlYS5zcGFuOSwKICAudW5lZGl0YWJsZS1pbnB1dC5zcGFuOSB7CiAgICB3aWR0aDogNTI0cHg7CiAgfQogIGlucHV0LnNwYW44LAogIHRleHRhcmVhLnNwYW44LAogIC51bmVkaXRhYmxlLWlucHV0LnNwYW44IHsKICAgIHdpZHRoOiA0NjJweDsKICB9CiAgaW5wdXQuc3BhbjcsCiAgdGV4dGFyZWEuc3BhbjcsCiAgLnVuZWRpdGFibGUtaW5wdXQuc3BhbjcgewogICAgd2lkdGg6IDQwMHB4OwogIH0KICBpbnB1dC5zcGFuNiwKICB0ZXh0YXJlYS5zcGFuNiwKICAudW5lZGl0YWJsZS1pbnB1dC5zcGFuNiB7CiAgICB3aWR0aDogMzM4cHg7CiAgfQogIGlucHV0LnNwYW41LAogIHRleHRhcmVhLnNwYW41LAogIC51bmVkaXRhYmxlLWlucHV0LnNwYW41IHsKICAgIHdpZHRoOiAyNzZweDsKICB9CiAgaW5wdXQuc3BhbjQsCiAgdGV4dGFyZWEuc3BhbjQsCiAgLnVuZWRpdGFibGUtaW5wdXQuc3BhbjQgewogICAgd2lkdGg6IDIxNHB4OwogIH0KICBpbnB1dC5zcGFuMywKICB0ZXh0YXJlYS5zcGFuMywKICAudW5lZGl0YWJsZS1pbnB1dC5zcGFuMyB7CiAgICB3aWR0aDogMTUycHg7CiAgfQogIGlucHV0LnNwYW4yLAogIHRleHRhcmVhLnNwYW4yLAogIC51bmVkaXRhYmxlLWlucHV0LnNwYW4yIHsKICAgIHdpZHRoOiA5MHB4OwogIH0KICBpbnB1dC5zcGFuMSwKICB0ZXh0YXJlYS5zcGFuMSwKICAudW5lZGl0YWJsZS1pbnB1dC5zcGFuMSB7CiAgICB3aWR0aDogMjhweDsKICB9Cn0KCkBtZWRpYSAobWF4LXdpZHRoOiA3NjdweCkgewogIGJvZHkgewogICAgcGFkZGluZy1yaWdodDogMjBweDsKICAgIHBhZGRpbmctbGVmdDogMjBweDsKICB9CiAgLm5hdmJhci1maXhlZC10b3AsCiAgLm5hdmJhci1maXhlZC1ib3R0b20sCiAgLm5hdmJhci1zdGF0aWMtdG9wIHsKICAgIG1hcmdpbi1yaWdodDogLTIwcHg7CiAgICBtYXJnaW4tbGVmdDogLTIwcHg7CiAgfQogIC5jb250YWluZXItZmx1aWQgewogICAgcGFkZGluZzogMDsKICB9CiAgLmRsLWhvcml6b250YWwgZHQgewogICAgZmxvYXQ6IG5vbmU7CiAgICB3aWR0aDogYXV0bzsKICAgIGNsZWFyOiBub25lOwogICAgdGV4dC1hbGlnbjogbGVmdDsKICB9CiAgLmRsLWhvcml6b250YWwgZGQgewogICAgbWFyZ2luLWxlZnQ6IDA7CiAgfQogIC5jb250YWluZXIgewogICAgd2lkdGg6IGF1dG87CiAgfQogIC5yb3ctZmx1aWQgewogICAgd2lkdGg6IDEwMCU7CiAgfQogIC5yb3csCiAgLnRodW1ibmFpbHMgewogICAgbWFyZ2luLWxlZnQ6IDA7CiAgfQogIC50aHVtYm5haWxzID4gbGkgewogICAgZmxvYXQ6IG5vbmU7CiAgICBtYXJnaW4tbGVmdDogMDsKICB9CiAgW2NsYXNzKj0ic3BhbiJdLAogIC51bmVkaXRhYmxlLWlucHV0W2NsYXNzKj0ic3BhbiJdLAogIC5yb3ctZmx1aWQgW2NsYXNzKj0ic3BhbiJdIHsKICAgIGRpc3BsYXk6IGJsb2NrOwogICAgZmxvYXQ6IG5vbmU7CiAgICB3aWR0aDogMTAwJTsKICAgIG1hcmdpbi1sZWZ0OiAwOwogICAgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgICAgLW1vei1ib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogIH0KICAuc3BhbjEyLAogIC5yb3ctZmx1aWQgLnNwYW4xMiB7CiAgICB3aWR0aDogMTAwJTsKICAgIC13ZWJraXQtYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgICAgIC1tb3otYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICB9CiAgLnJvdy1mbHVpZCBbY2xhc3MqPSJvZmZzZXQiXTpmaXJzdC1jaGlsZCB7CiAgICBtYXJnaW4tbGVmdDogMDsKICB9CiAgLmlucHV0LWxhcmdlLAogIC5pbnB1dC14bGFyZ2UsCiAgLmlucHV0LXh4bGFyZ2UsCiAgaW5wdXRbY2xhc3MqPSJzcGFuIl0sCiAgc2VsZWN0W2NsYXNzKj0ic3BhbiJdLAogIHRleHRhcmVhW2NsYXNzKj0ic3BhbiJdLAogIC51bmVkaXRhYmxlLWlucHV0IHsKICAgIGRpc3BsYXk6IGJsb2NrOwogICAgd2lkdGg6IDEwMCU7CiAgICBtaW4taGVpZ2h0OiAzMHB4OwogICAgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgICAgLW1vei1ib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogIH0KICAuaW5wdXQtcHJlcGVuZCBpbnB1dCwKICAuaW5wdXQtYXBwZW5kIGlucHV0LAogIC5pbnB1dC1wcmVwZW5kIGlucHV0W2NsYXNzKj0ic3BhbiJdLAogIC5pbnB1dC1hcHBlbmQgaW5wdXRbY2xhc3MqPSJzcGFuIl0gewogICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgd2lkdGg6IGF1dG87CiAgfQogIC5jb250cm9scy1yb3cgW2NsYXNzKj0ic3BhbiJdICsgW2NsYXNzKj0ic3BhbiJdIHsKICAgIG1hcmdpbi1sZWZ0OiAwOwogIH0KICAubW9kYWwgewogICAgcG9zaXRpb246IGZpeGVkOwogICAgdG9wOiAyMHB4OwogICAgcmlnaHQ6IDIwcHg7CiAgICBsZWZ0OiAyMHB4OwogICAgd2lkdGg6IGF1dG87CiAgICBtYXJnaW46IDA7CiAgfQogIC5tb2RhbC5mYWRlIHsKICAgIHRvcDogLTEwMHB4OwogIH0KICAubW9kYWwuZmFkZS5pbiB7CiAgICB0b3A6IDIwcHg7CiAgfQp9CgpAbWVkaWEgKG1heC13aWR0aDogNDgwcHgpIHsKICAubmF2LWNvbGxhcHNlIHsKICAgIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgwLCAwLCAwKTsKICB9CiAgLnBhZ2UtaGVhZGVyIGgxIHNtYWxsIHsKICAgIGRpc3BsYXk6IGJsb2NrOwogICAgbGluZS1oZWlnaHQ6IDIwcHg7CiAgfQogIGlucHV0W3R5cGU9ImNoZWNrYm94Il0sCiAgaW5wdXRbdHlwZT0icmFkaW8iXSB7CiAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjOwogIH0KICAuZm9ybS1ob3Jpem9udGFsIC5jb250cm9sLWxhYmVsIHsKICAgIGZsb2F0OiBub25lOwogICAgd2lkdGg6IGF1dG87CiAgICBwYWRkaW5nLXRvcDogMDsKICAgIHRleHQtYWxpZ246IGxlZnQ7CiAgfQogIC5mb3JtLWhvcml6b250YWwgLmNvbnRyb2xzIHsKICAgIG1hcmdpbi1sZWZ0OiAwOwogIH0KICAuZm9ybS1ob3Jpem9udGFsIC5jb250cm9sLWxpc3QgewogICAgcGFkZGluZy10b3A6IDA7CiAgfQogIC5mb3JtLWhvcml6b250YWwgLmZvcm0tYWN0aW9ucyB7CiAgICBwYWRkaW5nLXJpZ2h0OiAxMHB4OwogICAgcGFkZGluZy1sZWZ0OiAxMHB4OwogIH0KICAubWVkaWEgLnB1bGwtbGVmdCwKICAubWVkaWEgLnB1bGwtcmlnaHQgewogICAgZGlzcGxheTogYmxvY2s7CiAgICBmbG9hdDogbm9uZTsKICAgIG1hcmdpbi1ib3R0b206IDEwcHg7CiAgfQogIC5tZWRpYS1vYmplY3QgewogICAgbWFyZ2luLXJpZ2h0OiAwOwogICAgbWFyZ2luLWxlZnQ6IDA7CiAgfQogIC5tb2RhbCB7CiAgICB0b3A6IDEwcHg7CiAgICByaWdodDogMTBweDsKICAgIGxlZnQ6IDEwcHg7CiAgfQogIC5tb2RhbC1oZWFkZXIgLmNsb3NlIHsKICAgIHBhZGRpbmc6IDEwcHg7CiAgICBtYXJnaW46IC0xMHB4OwogIH0KICAuY2Fyb3VzZWwtY2FwdGlvbiB7CiAgICBwb3NpdGlvbjogc3RhdGljOwogIH0KfQoKQG1lZGlhIChtYXgtd2lkdGg6IDk3OXB4KSB7CiAgYm9keSB7CiAgICBwYWRkaW5nLXRvcDogMDsKICB9CiAgLm5hdmJhci1maXhlZC10b3AsCiAgLm5hdmJhci1maXhlZC1ib3R0b20gewogICAgcG9zaXRpb246IHN0YXRpYzsKICB9CiAgLm5hdmJhci1maXhlZC10b3AgewogICAgbWFyZ2luLWJvdHRvbTogMjBweDsKICB9CiAgLm5hdmJhci1maXhlZC1ib3R0b20gewogICAgbWFyZ2luLXRvcDogMjBweDsKICB9CiAgLm5hdmJhci1maXhlZC10b3AgLm5hdmJhci1pbm5lciwKICAubmF2YmFyLWZpeGVkLWJvdHRvbSAubmF2YmFyLWlubmVyIHsKICAgIHBhZGRpbmc6IDVweDsKICB9CiAgLm5hdmJhciAuY29udGFpbmVyIHsKICAgIHdpZHRoOiBhdXRvOwogICAgcGFkZGluZzogMDsKICB9CiAgLm5hdmJhciAuYnJhbmQgewogICAgcGFkZGluZy1yaWdodDogMTBweDsKICAgIHBhZGRpbmctbGVmdDogMTBweDsKICAgIG1hcmdpbjogMCAwIDAgLTVweDsKICB9CiAgLm5hdi1jb2xsYXBzZSB7CiAgICBjbGVhcjogYm90aDsKICB9CiAgLm5hdi1jb2xsYXBzZSAubmF2IHsKICAgIGZsb2F0OiBub25lOwogICAgbWFyZ2luOiAwIDAgMTBweDsKICB9CiAgLm5hdi1jb2xsYXBzZSAubmF2ID4gbGkgewogICAgZmxvYXQ6IG5vbmU7CiAgfQogIC5uYXYtY29sbGFwc2UgLm5hdiA+IGxpID4gYSB7CiAgICBtYXJnaW4tYm90dG9tOiAycHg7CiAgfQogIC5uYXYtY29sbGFwc2UgLm5hdiA+IC5kaXZpZGVyLXZlcnRpY2FsIHsKICAgIGRpc3BsYXk6IG5vbmU7CiAgfQogIC5uYXYtY29sbGFwc2UgLm5hdiAubmF2LWhlYWRlciB7CiAgICBjb2xvcjogIzc3Nzc3NzsKICAgIHRleHQtc2hhZG93OiBub25lOwogIH0KICAubmF2LWNvbGxhcHNlIC5uYXYgPiBsaSA+IGEsCiAgLm5hdi1jb2xsYXBzZSAuZHJvcGRvd24tbWVudSBhIHsKICAgIHBhZGRpbmc6IDlweCAxNXB4OwogICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICBjb2xvcjogIzc3Nzc3NzsKICAgIC13ZWJraXQtYm9yZGVyLXJhZGl1czogM3B4OwogICAgICAgLW1vei1ib3JkZXItcmFkaXVzOiAzcHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICB9CiAgLm5hdi1jb2xsYXBzZSAuYnRuIHsKICAgIHBhZGRpbmc6IDRweCAxMHB4IDRweDsKICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7CiAgICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDRweDsKICAgICAgIC1tb3otYm9yZGVyLXJhZGl1czogNHB4OwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7CiAgfQogIC5uYXYtY29sbGFwc2UgLmRyb3Bkb3duLW1lbnUgbGkgKyBsaSBhIHsKICAgIG1hcmdpbi1ib3R0b206IDJweDsKICB9CiAgLm5hdi1jb2xsYXBzZSAubmF2ID4gbGkgPiBhOmhvdmVyLAogIC5uYXYtY29sbGFwc2UgLmRyb3Bkb3duLW1lbnUgYTpob3ZlciB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjJmMmYyOwogIH0KICAubmF2YmFyLWludmVyc2UgLm5hdi1jb2xsYXBzZSAubmF2ID4gbGkgPiBhLAogIC5uYXZiYXItaW52ZXJzZSAubmF2LWNvbGxhcHNlIC5kcm9wZG93bi1tZW51IGEgewogICAgY29sb3I6ICM5OTk5OTk7CiAgfQogIC5uYXZiYXItaW52ZXJzZSAubmF2LWNvbGxhcHNlIC5uYXYgPiBsaSA+IGE6aG92ZXIsCiAgLm5hdmJhci1pbnZlcnNlIC5uYXYtY29sbGFwc2UgLmRyb3Bkb3duLW1lbnUgYTpob3ZlciB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMTExMTExOwogIH0KICAubmF2LWNvbGxhcHNlLmluIC5idG4tZ3JvdXAgewogICAgcGFkZGluZzogMDsKICAgIG1hcmdpbi10b3A6IDVweDsKICB9CiAgLm5hdi1jb2xsYXBzZSAuZHJvcGRvd24tbWVudSB7CiAgICBwb3NpdGlvbjogc3RhdGljOwogICAgdG9wOiBhdXRvOwogICAgbGVmdDogYXV0bzsKICAgIGRpc3BsYXk6IG5vbmU7CiAgICBmbG9hdDogbm9uZTsKICAgIG1heC13aWR0aDogbm9uZTsKICAgIHBhZGRpbmc6IDA7CiAgICBtYXJnaW46IDAgMTVweDsKICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50OwogICAgYm9yZGVyOiBub25lOwogICAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiAwOwogICAgICAgLW1vei1ib3JkZXItcmFkaXVzOiAwOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwOwogICAgLXdlYmtpdC1ib3gtc2hhZG93OiBub25lOwogICAgICAgLW1vei1ib3gtc2hhZG93OiBub25lOwogICAgICAgICAgICBib3gtc2hhZG93OiBub25lOwogIH0KICAubmF2LWNvbGxhcHNlIC5vcGVuID4gLmRyb3Bkb3duLW1lbnUgewogICAgZGlzcGxheTogYmxvY2s7CiAgfQogIC5uYXYtY29sbGFwc2UgLmRyb3Bkb3duLW1lbnU6YmVmb3JlLAogIC5uYXYtY29sbGFwc2UgLmRyb3Bkb3duLW1lbnU6YWZ0ZXIgewogICAgZGlzcGxheTogbm9uZTsKICB9CiAgLm5hdi1jb2xsYXBzZSAuZHJvcGRvd24tbWVudSAuZGl2aWRlciB7CiAgICBkaXNwbGF5OiBub25lOwogIH0KICAubmF2LWNvbGxhcHNlIC5uYXYgPiBsaSA+IC5kcm9wZG93bi1tZW51OmJlZm9yZSwKICAubmF2LWNvbGxhcHNlIC5uYXYgPiBsaSA+IC5kcm9wZG93bi1tZW51OmFmdGVyIHsKICAgIGRpc3BsYXk6IG5vbmU7CiAgfQogIC5uYXYtY29sbGFwc2UgLm5hdmJhci1mb3JtLAogIC5uYXYtY29sbGFwc2UgLm5hdmJhci1zZWFyY2ggewogICAgZmxvYXQ6IG5vbmU7CiAgICBwYWRkaW5nOiAxMHB4IDE1cHg7CiAgICBtYXJnaW46IDEwcHggMDsKICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCAjZjJmMmYyOwogICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNmMmYyZjI7CiAgICAtd2Via2l0LWJveC1zaGFkb3c6IGluc2V0IDAgMXB4IDAgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjEpLCAwIDFweCAwIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKTsKICAgICAgIC1tb3otYm94LXNoYWRvdzogaW5zZXQgMCAxcHggMCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSksIDAgMXB4IDAgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjEpOwogICAgICAgICAgICBib3gtc2hhZG93OiBpbnNldCAwIDFweCAwIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKSwgMCAxcHggMCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7CiAgfQogIC5uYXZiYXItaW52ZXJzZSAubmF2LWNvbGxhcHNlIC5uYXZiYXItZm9ybSwKICAubmF2YmFyLWludmVyc2UgLm5hdi1jb2xsYXBzZSAubmF2YmFyLXNlYXJjaCB7CiAgICBib3JkZXItdG9wLWNvbG9yOiAjMTExMTExOwogICAgYm9yZGVyLWJvdHRvbS1jb2xvcjogIzExMTExMTsKICB9CiAgLm5hdmJhciAubmF2LWNvbGxhcHNlIC5uYXYucHVsbC1yaWdodCB7CiAgICBmbG9hdDogbm9uZTsKICAgIG1hcmdpbi1sZWZ0OiAwOwogIH0KICAubmF2LWNvbGxhcHNlLAogIC5uYXYtY29sbGFwc2UuY29sbGFwc2UgewogICAgaGVpZ2h0OiAwOwogICAgb3ZlcmZsb3c6IGhpZGRlbjsKICB9CiAgLm5hdmJhciAuYnRuLW5hdmJhciB7CiAgICBkaXNwbGF5OiBibG9jazsKICB9CiAgLm5hdmJhci1zdGF0aWMgLm5hdmJhci1pbm5lciB7CiAgICBwYWRkaW5nLXJpZ2h0OiAxMHB4OwogICAgcGFkZGluZy1sZWZ0OiAxMHB4OwogIH0KfQoKQG1lZGlhIChtaW4td2lkdGg6IDk4MHB4KSB7CiAgLm5hdi1jb2xsYXBzZS5jb2xsYXBzZSB7CiAgICBoZWlnaHQ6IGF1dG8gIWltcG9ydGFudDsKICAgIG92ZXJmbG93OiB2aXNpYmxlICFpbXBvcnRhbnQ7CiAgfQp9Cg=="},{"name":"market","src":"I21hcmtldE1vZGFsIHsKICAgIHdpZHRoOiA2MDBweDsKfQoKI21hcmtldFRhYnMgewogICAgZmxvYXQ6IHJpZ2h0OwogICAgZGlzcGxheTogYmxvY2s7Cn0KCiNheGNpZE1hcmtldFRpdGxlIHsKICAgIGZsb2F0OiBsZWZ0OwogICAgbGluZS1oZWlnaHQ6IDQycHg7CiAgICBmb250LXNpemU6IDE0cHg7CiAgICBmb250LXdlaWdodDogYm9sZDsKfQoKLmFwcC1yZXN1bHRzIHsKICAgIG1heC1oZWlnaHQ6IDE5MHB4OwogICAgb3ZlcmZsb3c6IGF1dG87Cn0KCi5hcHAtcmVzdWx0LWFjdGlvbnMgewogICAgbGluZS1oZWlnaHQ6IDQ4cHg7CiAgICB0ZXh0LWFsaWduOiByaWdodDsKfQoKLmFwcC1yZXN1bHQtc25pcHBldCB7CiAgICBtaW4td2lkdGg6IDE1MHB4OwogICAgd2lkdGg6IDEwMCU7CiAgICBoZWlnaHQ6IDEwMCU7CiAgICBsaW5lLWhlaWdodDogNDhweDsKfQo="}],"files":[{"name":"market-fragment","src":"PGRpdiBpZD0ibWFya2V0TW9kYWwiIGNsYXNzPSJtb2RhbCBoaWRlIGZhZGUiIHRhYmluZGV4PSItMSIgcm9sZT0iZGlhbG9nIj4KCiAgICA8ZGl2IGNsYXNzPSJtb2RhbC1ib2R5Ij4KICAgICAgICA8ZGl2IGlkPSJheGNpZE1hcmtldFdpZGdldCIgY2xhc3M9ImF4Y2lkV2lkZ2V0Ij4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iIj4KICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImF4Y2lkTWFya2V0VGl0bGUiPkF4Y2lkIFNjcmlwdCBNYXJrZXQ8L2Rpdj4KICAgICAgICAgICAgICAgIDx1bCBjbGFzcz0ibmF2IG5hdi10YWJzIiBpZD0ibWFya2V0VGFicyI+CiAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJhY3RpdmUiPjxhIGhyZWY9IiNheGNpZE1hcmtldFRhYiIgZGF0YS10b2dnbGU9InRhYiI+QXBwIE1hcmtldDwvYT48L2xpPgogICAgICAgICAgICAgICAgICAgIDxsaT48YSBocmVmPSIjYXhjaWRNYXJrZXRUd2Vha3NUYWIiIGRhdGEtdG9nZ2xlPSJ0YWIiPlNpdGUgVHdlYWtzPC9hPjwvbGk+CiAgICAgICAgICAgICAgICAgICAgPGxpPjxhIGhyZWY9IiNheGNpZE1hcmtldE9wdGlvbnNUYWIiIGRhdGEtdG9nZ2xlPSJ0YWIiPk9wdGlvbnM8L2E+PC9saT4KICAgICAgICAgICAgICAgIDwvdWw+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjbGVhcmZpeCI+PC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdiBjbGFzcz0idGFiLWNvbnRlbnQiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idGFiLXBhbmUgYWN0aXZlIiBpZD0iYXhjaWRNYXJrZXRUYWIiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFjY29yZGlvbiIgaWQ9ImFjY29yZGlvbjIiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhY2NvcmRpb24tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWNjb3JkaW9uLWhlYWRpbmciPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPSJhY2NvcmRpb24tdG9nZ2xlIiBkYXRhLXRvZ2dsZT0iY29sbGFwc2UiIGRhdGEtcGFyZW50PSIjYWNjb3JkaW9uMiIgaHJlZj0iI2NvbGxhcHNlT25lIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVG9wIGFwcHMgZm9yIGRvbWFpbi5jb20KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImNvbGxhcHNlT25lIiBjbGFzcz0iYWNjb3JkaW9uLWJvZHkgY29sbGFwc2UgaW4iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFjY29yZGlvbi1pbm5lciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFwcC1yZXN1bHRzIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InJvdy1mbHVpZCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzPSJ0YWJsZSB0YWJsZS1zdHJpcGVkIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRib2R5IGlkPSJhcHBSZXN1bHRzQm9keSI+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFjY29yZGlvbi1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhY2NvcmRpb24taGVhZGluZyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9ImFjY29yZGlvbi10b2dnbGUiIGRhdGEtdG9nZ2xlPSJjb2xsYXBzZSIgZGF0YS1wYXJlbnQ9IiNhY2NvcmRpb24yIiBocmVmPSIjY29sbGFwc2VUd28iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUb3AgYXBwcyAoU2NyaXB0IE1hcmtldCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImNvbGxhcHNlVHdvIiBjbGFzcz0iYWNjb3JkaW9uLWJvZHkgY29sbGFwc2UiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFjY29yZGlvbi1pbm5lciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFwcC1yZXN1bHRzIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InJvdy1mbHVpZCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzPSJ0YWJsZSB0YWJsZS1zdHJpcGVkIiBzdHlsZT0iYm9yZGVyLXRvcDogMXB4IHNvbGlkICNEREQ7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRib2R5PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD48aW1nIGNsYXNzPSJhcHAtcmVzdWx0LWljb24iIHNyYz0iLi4vaW1hZ2VzL2dtYWlsLWljb24ucG5nIiAvPjwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPjxkaXYgY2xhc3M9ImFwcC1yZXN1bHQtc25pcHBldCI+RXZlbiBiZXR0ZXIgYXBwPC9kaXY+PC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFwcC1yZXN1bHQtYWN0aW9ucyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJidG4tZ3JvdXAiIGRhdGEtdG9nZ2xlPSJidXR0b25zLXJhZGlvIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImJ0biBidG4tcHJpbWFyeSBhY3RpdmUiPk9uPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLXByaW1hcnkiPk9mZjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRhYi1wYW5lIiBpZD0iYXhjaWRNYXJrZXRUd2Vha3NUYWIiPgogICAgICAgICAgICAgICAgICAgIDxwPkxvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0LCBjb25zZWN0ZXR1ciBhZGlwaXNpY2luZyBlbGl0LCBzZWQgZG8gZWl1c21vZCB0ZW1wb3IgaW5jaWRpZHVudCB1dCBsYWJvcmUgZXQgZG9sb3JlIG1hZ25hIGFsaXF1YS4gVXQgZW5pbSBhZCBtaW5pbSB2ZW5pYW0sIHF1aXMgbm9zdHJ1ZCBleGVyY2l0YXRpb24gdWxsYW1jbyBsYWJvcmlzIG5pc2kgdXQgYWxpcXVpcCBleCBlYSBjb21tb2RvIGNvbnNlcXVhdC4gRHVpcyBhdXRlIGlydXJlIGRvbG9yIGluIHJlcHJlaGVuZGVyaXQgaW4gdm9sdXB0YXRlIHZlbGl0IGVzc2UgY2lsbHVtIGRvbG9yZSBldSBmdWdpYXQgbnVsbGEgcGFyaWF0dXIuIEV4Y2VwdGV1ciBzaW50IG9jY2FlY2F0IGN1cGlkYXRhdCBub24gcHJvaWRlbnQsIHN1bnQgaW4gY3VscGEgcXVpIG9mZmljaWEgZGVzZXJ1bnQgbW9sbGl0IGFuaW0gaWQgZXN0IGxhYm9ydW0uPC9wPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0YWItcGFuZSIgaWQ9ImF4Y2lkTWFya2V0T3B0aW9uc1RhYiI+CiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj0iI2xvZ2luTW9kYWwiIHJvbGU9ImJ1dHRvbiIgY2xhc3M9ImJ0biIgZGF0YS10b2dnbGU9Im1vZGFsIj5Mb2dpbjwvYT4KICAgICAgICAgICAgICAgICAgICA8cD5Mb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCwgY29uc2VjdGV0dXIgYWRpcGlzaWNpbmcgZWxpdCwgc2VkIGRvIGVpdXNtb2QgdGVtcG9yIGluY2lkaWR1bnQgdXQgbGFib3JlIGV0IGRvbG9yZSBtYWduYSBhbGlxdWEuIFV0IGVuaW0gYWQgbWluaW0gdmVuaWFtLCBxdWlzIG5vc3RydWQgZXhlcmNpdGF0aW9uIHVsbGFtY28gbGFib3JpcyBuaXNpIHV0IGFsaXF1aXAgZXggZWEgY29tbW9kbyBjb25zZXF1YXQuIER1aXMgYXV0ZSBpcnVyZSBkb2xvciBpbiByZXByZWhlbmRlcml0IGluIHZvbHVwdGF0ZSB2ZWxpdCBlc3NlIGNpbGx1bSBkb2xvcmUgZXUgZnVnaWF0IG51bGxhIHBhcmlhdHVyLiBFeGNlcHRldXIgc2ludCBvY2NhZWNhdCBjdXBpZGF0YXQgbm9uIHByb2lkZW50LCBzdW50IGluIGN1bHBhIHF1aSBvZmZpY2lhIGRlc2VydW50IG1vbGxpdCBhbmltIGlkIGVzdCBsYWJvcnVtLjwvcD4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2Pgo8L2Rpdj4KCgo8ZGl2IGlkPSJsb2dpbk1vZGFsIiBjbGFzcz0ibW9kYWwgaGlkZSBmYWRlIj4KICAgIDxkaXYgY2xhc3M9Im1vZGFsLWhlYWRlciI+CiAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJjbG9zZSIgZGF0YS1kaXNtaXNzPSJtb2RhbCIgYXJpYS1oaWRkZW49InRydWUiPiZ0aW1lczs8L2J1dHRvbj4KICAgICAgICA8aDM+TG9naW48L2gzPgogICAgPC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJtb2RhbC1ib2R5Ij4KICAgICAgICA8Zm9ybT4KICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIC8+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJwYXNzd29yZCIgLz4KICAgICAgICA8L2Zvcm0+CiAgICA8L2Rpdj4KICAgIDxkaXYgY2xhc3M9Im1vZGFsLWZvb3RlciI+CiAgICAgICAgPGEgaHJlZj0iIyIgY2xhc3M9ImJ0biI+Q2xvc2U8L2E+CiAgICAgICAgPGEgaHJlZj0iIyIgY2xhc3M9ImJ0biBidG4tcHJpbWFyeSI+U2F2ZSBjaGFuZ2VzPC9hPgogICAgPC9kaXY+CjwvZGl2PgoKCjxzY3JpcHQgaWQ9ImFwcFJlc3VsdFRlbXBsYXRlIiB0eXBlPSJ0ZXh0L3gtanF1ZXJ5LXRtcGwiPgogICAgPHRyPgogICAgICAgIDx0ZD48aW1nIGNsYXNzPSJhcHAtcmVzdWx0LWljb24iIHNyYz0iJHtpY29ufSIgLz48L3RkPgogICAgICAgIDx0ZD48ZGl2IGNsYXNzPSJhcHAtcmVzdWx0LXNuaXBwZXQiPiR7dGl0bGV9PC9kaXY+PC90ZD4KICAgICAgICA8dGQ+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFwcC1yZXN1bHQtYWN0aW9ucyI+CiAgICAgICAgICAgICAgICB7e2lmIGluc3RhbGxlZH19CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJidG4tZ3JvdXAiIGRhdGEtdG9nZ2xlPSJidXR0b25zLXJhZGlvIj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImJ0biBidG4tcHJpbWFyeSBhY3RpdmUiPk9uPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJidG4gYnRuLXByaW1hcnkiPk9mZjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICB7e2Vsc2V9fQogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYXBwLXJlc3VsdC1hY3Rpb25zIj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImJ0biBidG4tcHJpbWFyeSIgZGF0YS1sb2FkaW5nLXRleHQ9Ikluc3RhbGxpbmcuLi4iIG9uY2xpY2s9IkF4Y2lkU2NyaXB0Lmluc3RhbGxCdXR0b25DbGlja2VkKDEyMzQzLCB0aGlzKTsiPkluc3RhbGw8L2J1dHRvbj48L2Rpdj4KICAgICAgICAgICAgICAgIHt7L2lmfX0KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC90ZD4KICAgIDwvdHI+Cjwvc2NyaXB0Pg=="}],"inlineImages":[]});